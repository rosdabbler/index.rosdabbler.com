<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/turtlebot3_drlnav/github-tomasvr-turtlebot3_drlnav/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">turtlebot3_drlnav</li>
        <!--<li class="active">turtlebot3_drlnav</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-default" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-default" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-default" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-default" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-primary" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class="disabled older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/turtlebot3_drlnav">turtlebot3_drlnav</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tomasvr-turtlebot3_drlnav
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tomasvr-turtlebot3_drlnav" role="menuitem" tabindex="-1" href="/r/turtlebot3_drlnav/github-tomasvr-turtlebot3_drlnav" data="github-tomasvr-turtlebot3_drlnav">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tomasvr-turtlebot3_drlnav
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>humble</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/turtlebot3_drlnav">turtlebot3_drlnav</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tomasvr-turtlebot3_drlnav
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tomasvr-turtlebot3_drlnav" role="menuitem" tabindex="-1" href="/r/turtlebot3_drlnav/github-tomasvr-turtlebot3_drlnav" data="github-tomasvr-turtlebot3_drlnav">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tomasvr-turtlebot3_drlnav
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jazzy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/turtlebot3_drlnav">turtlebot3_drlnav</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tomasvr-turtlebot3_drlnav
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tomasvr-turtlebot3_drlnav" role="menuitem" tabindex="-1" href="/r/turtlebot3_drlnav/github-tomasvr-turtlebot3_drlnav" data="github-tomasvr-turtlebot3_drlnav">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tomasvr-turtlebot3_drlnav
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>kilted</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/turtlebot3_drlnav">turtlebot3_drlnav</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tomasvr-turtlebot3_drlnav
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tomasvr-turtlebot3_drlnav" role="menuitem" tabindex="-1" href="/r/turtlebot3_drlnav/github-tomasvr-turtlebot3_drlnav" data="github-tomasvr-turtlebot3_drlnav">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tomasvr-turtlebot3_drlnav
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>rolling</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/turtlebot3_drlnav">turtlebot3_drlnav</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/turtlebot3_drl">turtlebot3_drl</a>
        
        <a class="label label-primary pkg-label" href="/p/turtlebot3_msgs">turtlebot3_msgs</a>
        
        <a class="label label-primary pkg-label" href="/p/turtlebot3_fake_node">turtlebot3_fake_node</a>
        
        <a class="label label-primary pkg-label" href="/p/turtlebot3_gazebo">turtlebot3_gazebo</a>
        
        <a class="label label-primary pkg-label" href="/p/turtlebot3_simulations">turtlebot3_simulations</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tomasvr-turtlebot3_drlnav
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tomasvr-turtlebot3_drlnav" role="menuitem" tabindex="-1" href="/r/turtlebot3_drlnav/github-tomasvr-turtlebot3_drlnav" data="github-tomasvr-turtlebot3_drlnav">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tomasvr-turtlebot3_drlnav
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">A ROS2-based framework for TurtleBot3 DRL autonomous navigation</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/tomasvr/turtlebot3_drlnav.git">https://github.com/tomasvr/turtlebot3_drlnav.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-21
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNKNOWN
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/turtlebot3_drlnav/#github-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/turtlebot3_drlnav/#github-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/turtlebot3_drlnav/#github-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/turtlebot3_drl">turtlebot3_drl</a></td>
                    <td>2.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/turtlebot3_msgs">turtlebot3_msgs</a></td>
                    <td>2.2.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/turtlebot3_fake_node">turtlebot3_fake_node</a></td>
                    <td>2.2.3</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/turtlebot3_gazebo">turtlebot3_gazebo</a></td>
                    <td>2.2.3</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/turtlebot3_simulations">turtlebot3_simulations</a></td>
                    <td>2.2.3</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="mobile-robot-drl-navigation">Mobile Robot DRL Navigation</h1>

<h3 id="a-ros2-framework-for-drl-autonomous-navigation-on-mobile-robots-with-lidar">A ROS2 framework for DRL autonomous navigation on mobile robots with LiDAR.</h3>
<p float="left">
 <img src="https://raw.githubusercontent.com/tomasvr/turtlebot3_drlnav/main/media/simulation.gif" width="400">
 <img src="https://raw.githubusercontent.com/tomasvr/turtlebot3_drlnav/main/media/physical_demo.gif" width="216" alt="physical_demo.gif">
</p>

<h1 id="table-of-contents"><strong>Table of contents</strong></h1>
<ul>
  <li><a href="https://github.com/tomasvr/turtlebot3_drlnav/tree/main/#introduction">Introduction</a></li>
  <li>
<a href="https://github.com/tomasvr/turtlebot3_drlnav/tree/main/#installation">Installation</a>
    <ul>
      <li><a href="https://github.com/tomasvr/turtlebot3_drlnav/tree/main/#docker-installation-recommended">Docker Installation (recommended)</a></li>
      <li><a href="https://github.com/tomasvr/turtlebot3_drlnav/tree/main/#manual-installation">Manual Installation</a></li>
    </ul>
  </li>
  <li>
<a href="https://github.com/tomasvr/turtlebot3_drlnav/tree/main/#training">Training</a>
    <ul>
      <li><a href="https://github.com/tomasvr/turtlebot3_drlnav/tree/main/#loading-a-stored-model">Loading a Stored Model</a></li>
      <li><a href="https://github.com/tomasvr/turtlebot3_drlnav/tree/main/#optional-configuration">Optional Configuration</a></li>
      <li><a href="https://github.com/tomasvr/turtlebot3_drlnav/tree/main/#utilities">Utilities</a></li>
    </ul>
  </li>
  <li><a href="https://github.com/tomasvr/turtlebot3_drlnav/tree/main/#physical-robot">Physical Robot</a></li>
  <li><a href="https://github.com/tomasvr/turtlebot3_drlnav/tree/main/#troubleshooting">Troubleshooting</a></li>
</ul>

<h1 id="introduction"><strong>Introduction</strong></h1>

<p>This repository contains a ROS2 and PyTorch framework for developing and experimenting with deep reinforcement learning for autonomous navigation on mobile robots. Models are trained in simulation and evaluated either in simulation or on a real-world robot. The robot model used in this repository is based on the turtlebot3. However, the framework can be used for any robot model that can provide LiDAR and odometry information and work with linear velocity messages.</p>

<p>Below are a few examples of what the current framework can be used for:</p>

<ul>
  <li>Train, store, load, and evaluate a navigation agent in simulation in different environments</li>
  <li>Deploy an existing model on a real robot to perform navigation and obstacle avoidance</li>
  <li>Evaluate the effect of different hyperparameters on training time and performance</li>
  <li>Experiment with additional capabilities (backward motion, frame stacking)</li>
  <li>Implement your own DRL algorithm (currently includes: DQN, DDPG, TD3)</li>
</ul>

<h1 id="installation"><strong>Installation</strong></h1>

<h1 id="docker-installation-recommended"><strong>Docker Installation (Recommended)</strong></h1>

<p>In order to greatly simplify the installation process and get up and running quickly it is recommended to use Docker. Docker can be seen as a lightweight VM that allows you to run applications within an isolated container making it easy to install all of the dependencies.</p>

<p>First, <a href="https://docs.docker.com/engine/install/ubuntu/">install docker</a></p>

<p>Now, in order to use your GPU within the docker container to run the machine learning models, we need to complete a few extra simple steps.
You should already have the nvidia driver installed on your system.</p>

<h2 id="nvidia-container-toolkit"><strong>Nvidia Container Toolkit</strong></h2>

<p>The next thing we need to do is install the <a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/overview.html">nvidia container toolkit</a> which is a piece of software that will allow us to use our GPU within the docker container. The installation steps are listed below.</p>

<p>First, setup the package repository and the GPG key:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>distribution=$(. /etc/os-release;echo $ID$VERSION_ID) \
      &amp;&amp; curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | sudo gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg \
      &amp;&amp; curl -s -L https://nvidia.github.io/libnvidia-container/$distribution/libnvidia-container.list | \
            sed 's#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g' | \
            sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list

</code></pre></div></div>

<p>Then install the container toolkit:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get update &amp;&amp; sudo apt-get install -y nvidia-container-toolkit

</code></pre></div></div>

<p>Configure the Docker daemon to recognize the NVIDIA Container Runtime:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo nvidia-ctk runtime configure --runtime=docker

</code></pre></div></div>

<p>And lastly, restart the Docker daemon to complete the installation after setting the default runtime:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo systemctl restart docker

</code></pre></div></div>

<p>At this point, a working setup can be tested by running a base CUDA container:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo docker run --rm --runtime=nvidia --gpus all nvidia/cuda:11.6.2-base-ubuntu20.04 nvidia-smi

</code></pre></div></div>
<h2 id="build-and-run-container"><strong>Build and run container</strong></h2>

<p>Now build the container specified in the Dockerfile, which may take 10-20 minutes:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker build -t turtlebot3_drlnav .

</code></pre></div></div>

<p>Lastly, we need to give our docker container permission to run GUIs:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xhost +local:docker

</code></pre></div></div>

<p>Now that everything is set up, start the container: <br>
(Replace <code class="language-plaintext highlighter-rouge">/PATH/TO/REPO</code> with the path where you downloaded this repository on your machine)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run -it --gpus all --privileged   --env NVIDIA_VISIBLE_DEVICES=all   --env NVIDIA_DRIVER_CAPABILITIES=all  --env DISPLAY=${DISPLAY}  --env QT_X11_NO_MITSHM=1  --volume /tmp/.X11-unix:/tmp/.X11-unix -v /PATH/TO/REPO/turtlebot3_drlnav:/home/turtlebot3_drlnav   --network host turtlebot3_drlnav

</code></pre></div></div>
<p>And that’s it! we don’t need to install any other dependencies thanks to docker.</p>

<p>While inside the container first build our application:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>colcon build

</code></pre></div></div>
<p>And then source our packages:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>source install/setup.bash

</code></pre></div></div>

<p>Now you are ready to skip to the <a href="https://github.com/tomasvr/turtlebot3_drlnav/tree/main/#training">Training</a> section and run the application.</p>

<h1 id="manual-installation"><strong>Manual Installation</strong></h1>

<p>If you don’t want to use docker you can install all dependencies manually.</p>

<h2 id="dependencies"><strong>Dependencies</strong></h2>

<ul>
  <li>Ubuntu 20.04 LTS (Focal Fossa) <a href="https://releases.ubuntu.com/20.04">download</a>
</li>
  <li>ROS2 Foxy Fitzroy</li>
  <li>Gazebo (Version 11.0)</li>
  <li>PyTorch (Version: 1.10.0)</li>
</ul>

<h2 id="installing-ros2"><strong>Installing ROS2</strong></h2>
<p>Install ROS2 foxy according to the following guide: <a href="https://docs.ros.org/en/foxy/Installation/Ubuntu-Install-Debians.html">link</a>. You can choose either the Desktop or Bare Bones ROS installation, both work. <br>
To prevent having to manually source the setup script every time, add the following line at the end of your <code class="language-plaintext highlighter-rouge">~/.bashrc</code> file:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>source /opt/ros/foxy/setup.bash

</code></pre></div></div>

<p>More detailed installation instructions can be found <a href="https://automaticaddison.com/how-to-install-ros-2-foxy-fitzroy-on-ubuntu-linux/">here</a>.</p>

<h2 id="installing-gazebo"><strong>Installing Gazebo</strong></h2>

<p>For this project we will be using Gazebo <strong>11.0.</strong> To install Gazebo 11.0, navigate to the following <a href="http://gazebosim.org/tutorials?tut=install_ubuntu">page</a>, select Version 11.0 in the top-right corner and follow the default installation instructions.</p>

<p>Next, we need to install a package that allows ROS2 to interface with Gazebo.
To install this package we simply execute the following command in a terminal:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install ros-foxy-gazebo-ros-pkgs

</code></pre></div></div>
<p>After successful installation we are now going to test our ROS2 + Gazebo setup by making a demo model move in the simulator. First, install two additional packages for demo purposes (they might already be installed):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install ros-foxy-ros-core ros-foxy-geometry2

</code></pre></div></div>
<p>Source ROS2 before we launch the demo:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>source /opt/ros/foxy/setup.bash

</code></pre></div></div>

<p>Now, let’s load the demo model in gazebo:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gazebo --verbose /opt/ros/foxy/share/gazebo_plugins/worlds/gazebo_ros_diff_drive_demo.world

</code></pre></div></div>
<p>This should launch the Gazebo GUI with a simple vehicle model. Open a second terminal and provide the following command to make the vehicle move:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /demo/cmd_demo geometry_msgs/Twist '{linear: {x: 1.0}}' -1

</code></pre></div></div>
<p>If the vehicle starts moving forward we confirmed that the Gazebo-ROS connection works.
If something does not work, carefully check whether you executed all the commands and sourced ROS2 (<code class="language-plaintext highlighter-rouge">source /opt/ros/foxy/setup.bash</code>). You can also check the more detailed <a href="https://automaticaddison.com/how-to-install-ros-2-foxy-fitzroy-on-ubuntu-linux/">guide</a>.</p>

<h2 id="installing-python3-pytorch"><strong>Installing Python3, Pytorch</strong></h2>

<p>If you are using Ubuntu 20.04 as specified, Python should already be preinstalled. The last tested version for this project was Python 3.8.10</p>

<p>Install pip3 (python package manager for python 3) as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install python3-pip

</code></pre></div></div>

<p>To install the tested version of PyTorch (1.10.0) with CUDA support (11.3) and packages for generating graphs, run:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3 install matplotlib pandas pyqtgraph==0.12.4 PyQt5==5.14.1 torch==1.10.0+cu113 -f https://download.pytorch.org/whl/cu113/torch_stable.html

</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">pyqtgraph</code> and <code class="language-plaintext highlighter-rouge">PyQt</code> are optional and only necessary if you want to visualize the neural network activity. <code class="language-plaintext highlighter-rouge">pandas</code> is only required for generating graphs outside of training.</p>

<p><strong>Note: The version of CUDA support to install will depend on the <a href="https://developer.nvidia.com/cuda-gpus">compute capability</a> of your GPU</strong></p>

<h2 id="enabling-gpu-support-recommended"><strong>Enabling GPU support (recommended)</strong></h2>

<p>We can significantly speed up the training procedure by making use of a GPU. If no GPU is available or it is not initialized correctly the training will automatically be redirected to the CPU. Since most users have access to an NVIDIA GPU we will explain how to enable this to work with PyTorch on linux.
Three different components are required to train on GPU:</p>
<ul>
  <li>NVIDIA drivers for linux</li>
  <li>The CUDA library for linux</li>
  <li>cuDNN (comes with pytorch and should be installed automatically)</li>
</ul>

<p>Press the windows/command key and type “Additional drivers” to make the corresponding linux menu come up. Here, multiple radio button options should be listed for installing different nvidia drivers. Install the option with the latest version (highest number, e.g. currently nvidia-driver-510).</p>

<p>The next step is to download the correct CUDA version. This will depend on your NVIDIA drivers and GPU variant. Generally, all you have to do is execute:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install nvidia-cuda-toolkit

</code></pre></div></div>
<p>You can then verify that CUDA is installed using:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nvcc -V

</code></pre></div></div>
<p>and</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nvidia-smi

</code></pre></div></div>
<p>Which should display version numbers and GPU information.
In case of doubt, consult one of the following resources: <a href="https://varhowto.com/install-pytorch-ubuntu-20-04/">one</a>, <a href="https://pytorch.org/get-started/locally/">two</a>, <a href="https://docs.nvidia.com/deploy/cuda-compatibility/index.html">three</a></p>

<h2 id="downloading-the-code-base-and-building"><strong>Downloading the code base and building</strong></h2>
<!-- Now it's time to create a workspace that will serve as the basis for our project. To do this, follow the tutorial [here](https://automaticaddison.com/how-to-create-a-workspace-ros-2-foxy-fitzroy/) -->

<p>Now it’s time to download the repository to the actual code.</p>

<p>Since ROS2 does not yet support metapackages, we will have to download the whole workspace from Git.</p>

<p>First, make sure you have the <code class="language-plaintext highlighter-rouge">turtlebot3-description</code> package by running:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install ros-foxy-turtlebot3-description

</code></pre></div></div>

<p>Open a terminal in the desired location for the new workspace. Clone the repository using:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/tomasvr/turtlebot3_drlnav.git

</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">cd</code> into the directory and make sure you are on the main branch</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd turtlebot3_drlnav
git checkout main

</code></pre></div></div>

<p>Next, install the correct rosdep tool</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install python3-rosdep2

</code></pre></div></div>

<p>Then initialize rosdep by running</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rosdep update

</code></pre></div></div>

<p>Now we can use rosdep to install all ROS packages needed by our repository</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rosdep install -i --from-path src --rosdistro foxy -y

</code></pre></div></div>

<p>Now that we have all of the packages in place it is time to build the repository. First update your package list</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt update

</code></pre></div></div>

<p>Then install the build tool <strong>colcon</strong> which we will use to build our ROS2 package</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install python3-colcon-common-extensions

</code></pre></div></div>

<p>Next, it’s time to actually build the repository code!</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>colcon build

</code></pre></div></div>
<p>After colcon has finished building source the repository</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>source install/setup.bash

</code></pre></div></div>

<p>The last thing we need to do before running the code is add a few lines to our <code class="language-plaintext highlighter-rouge">~/.bashrc</code> file so that they are automatically executed whenever we open a new terminal. Add the following lines at the end of your <code class="language-plaintext highlighter-rouge">~/.bashrc</code> file and <strong>replace ~/path/to/turtlebot3_drlnav/repo with the path where you cloned the repository. (e.g. ~/turtlebot3_drlnav)</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># ROS2 domain id for network communication, machines with the same ID will receive each others' messages
export ROS_DOMAIN_ID=1

# Fill in the path to where you cloned the turtlebot3_drlnav repo
WORKSPACE_DIR=~/path/to/turtlebot3_drlnav
export DRLNAV_BASE_PATH=$WORKSPACE_DIR

# Source the workspace
source $WORKSPACE_DIR/install/setup.bash

# Allow gazebo to find our turtlebot3 models
export GAZEBO_MODEL_PATH=$GAZEBO_MODEL_PATH:$WORKSPACE_DIR/src/turtlebot3_simulations/turtlebot3_gazebo/models

# Select which turtlebot3 model we will be using (default: burger, waffle, waffle_pi)
export TURTLEBOT3_MODEL=burger

# Allow Gazebo to find the plugin for moving the obstacles
export GAZEBO_PLUGIN_PATH=$GAZEBO_PLUGIN_PATH:$WORKSPACE_DIR/src/turtlebot3_simulations/turtlebot3_gazebo/models/turtlebot3_drl_world/obstacle_plugin/lib

</code></pre></div></div>

<p>For more detailed instructions on ros workspaces check <a href="https://automaticaddison.com/how-to-create-a-workspace-ros-2-foxy-fitzroy/">this guide</a>.</p>

<p><strong>Note: Always make sure to first run
<code class="language-plaintext highlighter-rouge">source install/setup.bash
</code> or open a fresh terminal after building with <code class="language-plaintext highlighter-rouge">colcon build</code>.</strong></p>

<h1 id="training"><strong>Training</strong></h1>

<p><img src="https://raw.githubusercontent.com/tomasvr/turtlebot3_drlnav/main/media/system_architecture.png" alt="System Architecture" width="700"></p>

<h2 id="running-and-training-the-drl-agent"><strong>Running and training the DRL agent!</strong></h2>

<p>Now that we have finally completed the setup, all that’s left to do is run and train the agent.</p>

<p>Open up four different terminals however you like (I recommended using <code class="language-plaintext highlighter-rouge">terminator</code> or <code class="language-plaintext highlighter-rouge">tmux</code> for multi-tab). In the first terminal run</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch turtlebot3_gazebo turtlebot3_drl_stage4.launch.py

</code></pre></div></div>
<p>You should see the gazebo GUI come up with the robot model loaded and two moving obstacles (this might take a while to load).
<strong>Note: make sure to run the ‘launch’ command first before any other nodes as it will set the stage parameter.</strong></p>

<p>In a second terminal run</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run turtlebot3_drl gazebo_goals

</code></pre></div></div>

<p>In a third terminal run</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run turtlebot3_drl environment

</code></pre></div></div>

<p>And lastly, in the fourth terminal run the ddpg agent
For DDPG:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run turtlebot3_drl train_agent ddpg

</code></pre></div></div>

<p>The first argument indicates whether we are testing or training (0 = testing, 1 = training)</p>

<!-- *optional arguments:*
- The second argument indicates the name of the model if we are continuing training (e.g. "path/to/model/ddpg_1")
- The third argument indicates from which episode to continue training -->

<p>for TD3:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run turtlebot3_drl train_agent td3

</code></pre></div></div>

<p>for DQN:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run turtlebot3_drl train_agent dqn

</code></pre></div></div>

<p>Your robot should now be moving and training progress is being printed to the terminals!</p>

<p><strong>Note</strong>: The matplotlib graph will initially be empty but will be displayed after the first <code class="language-plaintext highlighter-rouge">GRAPH_DRAW_INTERVAL</code> episodes configured in <code class="language-plaintext highlighter-rouge">settings.py</code>. During testing, terminal output is used instead of the graph.</p>

<p>The state of your model will be stored automatically every <code class="language-plaintext highlighter-rouge">STORE_MODEL_INTERVAL</code> episodes configured in <code class="language-plaintext highlighter-rouge">settings.py</code>.
You will find the trained model, logfiles, and graphs in the model directory: <code class="language-plaintext highlighter-rouge">model/[HOSTNAME]/[MODEL_NAME]</code>. Training results per episode are stored in a sequential text file.</p>

<p>Now you have everything up and running to train your model. There are several additional options and utilities available for training which will be discussed below.</p>

<h2 id="loading-a-stored-model">Loading a stored model</h2>

<p>The current state of the agent (weights, parameters, replay buffer, and graphs) will be stored automatically every N episodes as configured by the <code class="language-plaintext highlighter-rouge">store_interval</code> variable in the <code class="language-plaintext highlighter-rouge">common/settings.py</code> file.</p>

<p>In order to load a model for testing (e.g. ddpg_0 at episode 500) the following command should be used:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run turtlebot3_drl test_agent ddpg "ddpg_0" 500

</code></pre></div></div>

<p>In order to load a model to continue training (e.g. ddpg_0 at episode 500) the following command should be used:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run turtlebot3_drl train_agent ddpg "ddpg_0" 500

</code></pre></div></div>

<p><strong>Note:</strong> You can also test (or continue training) a model on a different stage than where it was originally trained on.</p>

<h3 id="loading-one-of-the-included-example-models">Loading one of the included example models</h3>

<p>Two examples are included for a DDPG and TD3 model. In order to run them, open four terminals like before and run:</p>

<p>Terminal 1:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch turtlebot3_gazebo turtlebot3_drl_stage9.launch.py

</code></pre></div></div>

<p>Terminal 2:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run turtlebot3_drl gazebo_goals

</code></pre></div></div>

<p>Terminal 3:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run turtlebot3_drl environment

</code></pre></div></div>

<p>Terminal 4:
For DDPG:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run turtlebot3_drl test_agent ddpg 'examples/ddpg_0' 8000

</code></pre></div></div>

<p>Or, for TD3</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run turtlebot3_drl test_agent td3 'examples/td3_0' 7400

</code></pre></div></div>

<p>You should then see the example model navigate successfully toward the goal</p>

<h3 id="switching-environments">Switching environments</h3>

<p>You can switch between 10 different environments by changing the stage number in the launch command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch turtlebot3_gazebo turtlebot3_drl_stage5.launch.py

</code></pre></div></div>

<p>change <code class="language-plaintext highlighter-rouge">stage5</code> to any stage between 1-10 to train on different environments.</p>

<h2 id="optional-configuration"><strong>Optional Configuration</strong></h2>

<h3 id="settings-change-parameters">Settings: change parameters</h3>

<p>The <code class="language-plaintext highlighter-rouge">settings.py</code> file contains most of the interesting parameters that you might wish to change, including the DRL hyperparameters.</p>

<h3 id="reward-tweak-reward-design">Reward: tweak reward design</h3>

<p>The <code class="language-plaintext highlighter-rouge">reward.py</code> file contains the reward design. Here you can implement different reward functions between which you can switch in the <code class="language-plaintext highlighter-rouge">settings.py</code> file. For example, to define a new reward function <code class="language-plaintext highlighter-rouge">"B"</code> you simply add <code class="language-plaintext highlighter-rouge">get_reward_B(...)</code> to <code class="language-plaintext highlighter-rouge">reward.py</code> and define the reward per step.</p>

<h3 id="backward-motion">Backward motion</h3>

<p>To enable the robot to also move in the backward direction simply set <code class="language-plaintext highlighter-rouge">ENABLE_BACKWARD</code> to <code class="language-plaintext highlighter-rouge">True</code> in <code class="language-plaintext highlighter-rouge">settings.py</code>.</p>

<h3 id="stacking">Stacking</h3>

<p>‘Frame stacking’ can enable the robot to consider the direction in which obstacles are moving. The robot considers multiple subsequent laser scan frames instead of a single frame at each step. To enable frame stacking, set <code class="language-plaintext highlighter-rouge">ENABLE_STACKING</code> to <code class="language-plaintext highlighter-rouge">True</code> in <code class="language-plaintext highlighter-rouge">settings.py</code>. Also define <code class="language-plaintext highlighter-rouge">STACK_DEPTH</code> (number of frames per step) and <code class="language-plaintext highlighter-rouge">FRAME_SKIP</code> (number of frames to skip between two frames in the stack).</p>

<h2 id="utilities"><strong>Utilities</strong></h2>
<h3 id="graph-generation">Graph Generation</h3>

<p>In order to compare results the repository includes a script that graphs the reward curves for different models. The script <code class="language-plaintext highlighter-rouge">reward_graph.py</code> can be found in the <code class="language-plaintext highlighter-rouge">util</code> directory.</p>

<p>To compare the reward curve for <code class="language-plaintext highlighter-rouge">ddpg_0</code> and <code class="language-plaintext highlighter-rouge">td3_0</code> every 100 episodes we type:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python3 util/reward_graph.py 100 examples/ddpg_0 examples/td3_0

</code></pre></div></div>

<p>Again, <code class="language-plaintext highlighter-rouge">examples/</code> should not be included in the path for your own models.</p>

<p><strong>Note: graph generation will only work correctly if training has not been stopped and continued. Otherwise you first need to merge the different _train_stage*.txt files into a single file</strong></p>

<h3 id="cleaning-model-data">Cleaning model data</h3>

<p>Training models can generate a lot of data, especially if you save the model often. In order to automatically clean models to save space, two cleaning scripts are included in the <code class="language-plaintext highlighter-rouge">util</code> folder.</p>

<p><strong>CAUTION: use the following scripts with caution as deleted data cannot be retrieved! Carefully examine the script settings and double-check the command line arguments you enter</strong></p>

<p>The following line will clean ddpg_0 removing all saved model states except:</p>
<ul>
  <li>The model state for the 4 best-performing episodes</li>
  <li>The model state for the most recent episode
<code class="language-plaintext highlighter-rouge">python3 util/clean_single_model.py ddpg_0</code>
</li>
</ul>

<p>If you want to keep more or less data you can adjust the <code class="language-plaintext highlighter-rouge">TOP_EPISODES</code> parameters in the script itself.</p>

<p>To clean all of the models at once you can use the <code class="language-plaintext highlighter-rouge">purge_all_models.py</code> script. Carefully check the parameters at the top of the file before executing the script. To execute the script simply type:</p>

<p>```python3 util/purge_all_models.py</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
The script will loop through all of your models and select the models to keep like explained above. In addition, models which scored too low or were trained for too few episodes will be removed completely (threshold specified in `purge_all_models.py`).

### Visualization

&lt;img src="media/visual.gif" width="900"&gt;

To enable a complete visualization of the neural network neuron activity and biases simply set `ENABLE_VISUAL` to `True` in `settings.py`. This requires the python3 packages `pyqtgraph` and `PyQt5` to be installed.
The visual should mainly be used during evaluation as it can slow down training significantly.
## Command Specification

**train_agent:**


```ros2 run turtlebot3_drl train_agent [algorithm=dqn/ddpg/td3] [loadmodel=\path\to\model] [loadepisode=episode] 
</code></pre></div></div>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">algorithm</code>: algorithm to run, one of either: <code class="language-plaintext highlighter-rouge">dqn</code>, <code class="language-plaintext highlighter-rouge">ddpg</code>, <code class="language-plaintext highlighter-rouge">td3</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">modelpath</code>: path to the model to be loaded to continue training</li>
  <li>
<code class="language-plaintext highlighter-rouge">loadepisode</code>: is the episode to load from <code class="language-plaintext highlighter-rouge">modelpath</code>
</li>
</ul>

<p><strong>test_agent:</strong></p>

<p>```ros2 run turtlebot3_drl test_agent [algorithm=dqn/ddpg/td3] [loadmodel=\path\to\model] [loadepisode=episode]</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
* `algorithm`: algorithm to run, one of either: `dqn`, `ddpg`, `td3`
* `modelpath`: path to model to be loaded for testing
* `loadepisode`: is the episode to load from `modelpath`

# Physical Robot

The models trained using this framework were validated on a low-cost physical system. Video demonstrations can be found on my [YouTube channel](https://www.youtube.com/@tomasvr1/videos).

![Physical Robot](media/physical_robot.png?raw=true)

The are three main requirements for a robot to be compatible with this project:
* The robot needs to provide LiDAR scan information
* The robot needs to provide any kind of odometry information (e.g. tachometers, SLAM, AMCL or GPS)
* The robot needs to be able to work with linear and angular velocity messages

To run one of your models (trained in simulation) on a physical robot follow these steps:
* In settings.py, adjust the REAL ROBOT ENVIRONMENT SETTINGS
  * **REAL_TOPIC**: Set the right ROS topics for your laser scan, odometry and velocity inputs/outputs
  * **REAL_N_SCAN_SAMPLES**: Configure the number of Lidar samples your robot will provide
  * **REAL_LIDAR_CORRECTION**: Depending on the dimensions of your robot the LiDAR values might need to be corrected to avoid the agent from detecting a 'collision' when the robot has not yet actually collided with any obstacle. This value is simply subtracted from the real LiDAR readings and finding the right value requires some trial and error.
  * Set the remaining options such as the arena dimensions, max velocities, max LiDAR distance, and goal and collision thresholds.

Next, when using a physical robot we do not need to run the gazebo simulation node or the gazebo_goals node. We will however still need to run an environment node and an agent node.

At this point, turn on the robot and initialize all of its components. Ensure that:
* LiDAR scan ROS messages are being sent over the configured TOPIC_SCAN topic
* Odometry ROS messages are being sent over the TOPIC_ODOM topic
* The robot is listening for velocity ROS messages on the TOPIC_VELO topic.

**Note:** If you are running nodes on multiple machines (e.g. one laptop and one robot) ensure that all machines have the same value set for `ROS_DOMAIN_ID` in `~/.bashrc`:

`export ROS_DOMAIN_ID=[X]` (X can be any number as long as it is the same for each machine).

Also ensure that all machines are connected to the same Local Area Network (LAN).

Now, open a terminal on your laptop (or robot) and run the environment node for a real robot:

</code></pre></div></div>
<p>ros2 run turtlebot3_drl real_environment</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Then, open another terminal and run the agent node for a real robot (substitute your model name and desired episode to load):

</code></pre></div></div>
<p>ros2 run turtlebot3_drl real_agent [ALGORITHM_NAME] [MODEL_NAME] [MODEL_EPISODE]</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>For example:

</code></pre></div></div>
<p>ros2 run turtlebot3_drl real_agent ddpg ddpg_1_stage4 1000</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
If everything loads correctly, you can now use the included script to generate a goal at location (x=1, y=1):

</code></pre></div></div>
<p>./spawn_goal 1 1</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
**And that's it!** You should now see the robot start moving toward the goal while avoiding obstacles.

**Note:** You can use RViz2 in order to visualize the LiDAR scans for debugging and fine-tuning the REAL_LIDAR_CORRECTION value: simply add a `laser_scan` display type and set its topic to `TOPIC_SCAN`.

# **Troubleshooting**

## **bash: /opt/ros/foxy/setup.bash: No such file or directory**

Depending on your installation method of ROS, it might be required to add the following line to your `~/bashrc` file:

</code></pre></div></div>
<p>source ~/ros2_foxy/ros2-linux/setup.bash</p>

<p>```
Also, make sure that you source the correct setup files in your <code class="language-plaintext highlighter-rouge">~/.bashrc</code> as described in the installation section of this guide.</p>

<h2 id="package-turtlebot3_gazebo-not-found-package-turtlebot3_gazebo-not-found-searching-optrosfoxy"><strong>Package ‘turtlebot3_gazebo’ not found: “package ‘turtlebot3_gazebo’ not found, searching: [‘/opt/ros/foxy’]”</strong></h2>

<p>Make sure to run <code class="language-plaintext highlighter-rouge">source install/setup.bash</code> from the root of the repository in every terminal every time after you build the project using <code class="language-plaintext highlighter-rouge">colcon_build</code>. Otherwise, the nodes will not run the updated version of your code but the old version from the last time you built and sourced.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/turtlebot3_drlnav">turtlebot3_drlnav</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tomasvr-turtlebot3_drlnav
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tomasvr-turtlebot3_drlnav" role="menuitem" tabindex="-1" href="/r/turtlebot3_drlnav/github-tomasvr-turtlebot3_drlnav" data="github-tomasvr-turtlebot3_drlnav">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tomasvr-turtlebot3_drlnav
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/turtlebot3_drlnav">turtlebot3_drlnav</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tomasvr-turtlebot3_drlnav
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tomasvr-turtlebot3_drlnav" role="menuitem" tabindex="-1" href="/r/turtlebot3_drlnav/github-tomasvr-turtlebot3_drlnav" data="github-tomasvr-turtlebot3_drlnav">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tomasvr-turtlebot3_drlnav
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/turtlebot3_drlnav">turtlebot3_drlnav</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tomasvr-turtlebot3_drlnav
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tomasvr-turtlebot3_drlnav" role="menuitem" tabindex="-1" href="/r/turtlebot3_drlnav/github-tomasvr-turtlebot3_drlnav" data="github-tomasvr-turtlebot3_drlnav">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tomasvr-turtlebot3_drlnav
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>iron</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/turtlebot3_drlnav">turtlebot3_drlnav</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tomasvr-turtlebot3_drlnav
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tomasvr-turtlebot3_drlnav" role="menuitem" tabindex="-1" href="/r/turtlebot3_drlnav/github-tomasvr-turtlebot3_drlnav" data="github-tomasvr-turtlebot3_drlnav">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tomasvr-turtlebot3_drlnav
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/tomasvr/turtlebot3_drlnav.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
