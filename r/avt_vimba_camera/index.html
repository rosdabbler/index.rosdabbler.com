<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/avt_vimba_camera/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">avt_vimba_camera</li>
        <!--<li class="active">avt_vimba_camera</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-primary" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-primary" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-primary" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-primary" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-default" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-primary" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class=" older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class=" older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/avt_vimba_camera">avt_vimba_camera</a> <small>repository</small></h3>
        <span class="label label-default">camera</span> <span class="label label-default">driver</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
        <a class="label label-primary pkg-label" href="/p/avt_vimba_camera">avt_vimba_camera</a>
        
        <a class="label label-primary pkg-label" href="/p/avt_vimba_camera_msgs">avt_vimba_camera_msgs</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-astuff-avt_vimba_camera
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-astuff-avt_vimba_camera" role="menuitem" tabindex="-1" href="/r/avt_vimba_camera/github-astuff-avt_vimba_camera" data="github-astuff-avt_vimba_camera">
                    <span class="glyphicon glyphicon-star"></span>
                    github-astuff-avt_vimba_camera
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS1/2 Driver for AVT cameras using VIMBA SDK.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/astuff/avt_vimba_camera.git">https://github.com/astuff/avt_vimba_camera.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">ros2_master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2022-05-24
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">camera</span> <span class="label label-default">driver</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/avt_vimba_camera/#humble-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/avt_vimba_camera/#humble-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/avt_vimba_camera/#humble-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/avt_vimba_camera">avt_vimba_camera</a></td>
                    <td>2001.1.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/avt_vimba_camera_msgs">avt_vimba_camera_msgs</a></td>
                    <td>2001.1.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="avt_vimba_camera-ros2">avt_vimba_camera (ROS2)</h1>

<p>This repo contains a ROS2 driver for cameras manufactured by <a href="https://www.alliedvision.com">Allied Vision Technologies</a>.
The driver relies on libraries provided by AVT as part of their <a href="https://www.alliedvision.com/en/products/software.html">Vimba SDK</a>.</p>

<p><em>See the ROS1 version of this README <a href="https://github.com/astuff/avt_vimba_camera/blob/ros1_master/README.md">here</a>.</em></p>

<h2 id="installation">Installation</h2>

<h3 id="dependencies">Dependencies</h3>
<p>First, you will need to install the Vimba SDK.
Download it from AVT’s website <a href="https://www.alliedvision.com/en/products/vimba-sdk/#c1497">here</a>.</p>

<p>Also see the <a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/software/software/Vimba/appnote/Vimba_installation_under_Linux.pdf">linux vimba installation instructions</a>.</p>

<p>It is highly recommended to open the “Vimba Viewer” tool that came along with the SDK and make sure you can connect to your camera.</p>

<p>It may be useful to create a desktop shortcut to Vimba Viewer:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ln</span> <span class="nt">-sf</span> <span class="s2">"Vimba_5_0/Tools/Viewer/Bin/x86_64bit/VimbaViewer"</span> <span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/Desktop"</span>

</code></pre></div></div>

<h3 id="ros-driver">ROS Driver</h3>

<p>Once you’ve successfully connected to your camera using Vimba Viewer, you can continue with the ROS driver install:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install ros-$ROS_DISTRO-avt-vimba-camera

</code></pre></div></div>

<h2 id="operational-advice">Operational Advice</h2>

<h3 id="mtu-size-gige-cameras">MTU Size (GigE Cameras)</h3>
<p>If you are using a GigE camera (ethernet-based camera), it is recommended to adjust some settings in your network interface to be able to handle the potentially high bandwidth usage of the camera stream.</p>

<p>On Linux, you will need to increase the MTU (Maximum Transmission Unit) on the network interface attached to the camera.</p>

<p>You can check what your current mtu setting is by running the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ip a | grep mtu

</code></pre></div></div>

<p>According to AVT documentation, increase the mtu to <code class="language-plaintext highlighter-rouge">9014</code>.
If you use Network Manager, this can be done by opening the network interface settings and editing the “MTU” box under the “Identity” tab.</p>

<p>See the “Optimize system performance” section of your camera’s technical manual for full details.
For example, the Mako camera technical manual is available <a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/Mako/techman/Mako_TechMan_en.pdf">here</a>.</p>

<h3 id="receive-buffer-size-gige-cameras">Receive Buffer Size (GigE Cameras)</h3>

<p>It is also recommended to increase your network receive buffer size.
By default, Ubuntu uses <code class="language-plaintext highlighter-rouge">212992</code>.</p>

<p>You can check what your current buffer size is:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl 'net.core.rmem_max'

</code></pre></div></div>
<p>Update the buffer size with the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl -w 'net.core.rmem_max=26214400'

</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">26214400</code> has been tested successfully, but anything above <code class="language-plaintext highlighter-rouge">2000000</code> is likely fine.</p>

<p>Once you find a value that works for you, you can make the change permanent (persist across reboots) by updating the <code class="language-plaintext highlighter-rouge">/etc/sysctl.conf</code> file with the following line:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>net.core.rmem_max=26214400

</code></pre></div></div>

<h3 id="camera-settings-in-general">Camera Settings in General</h3>

<p>When the ROS2 driver starts up, it queries the camera for all features and creates ROS parameters for every feature on the camera.
All camera-related ROS parameters are prefixed with “feature/” in their name to indicate they are camera features.
Note that some features are read-only, and each camera model will have slightly different feature sets.
If the user does not specify the ROS parameter for a given feature using yaml config files or launch files, then the value for that feature is untouched and not overridden by the driver.</p>

<p>This allows you to take two different approaches towards params/features with the ROS driver:</p>
<ol>
  <li>
    <p>Don’t configure anything via ROS params and instead use the camera’s “Saved User Sets” functionality to load a custom configuration every time it boots. 
The ROS driver won’t change anything (as long as no “feature/” ROS params are set) and just use the camera as it’s configured.</p>
  </li>
  <li>
    <p>Use ROS params defined in a yaml file to configure the camera when the driver starts.
Existing params can be saved using <code class="language-plaintext highlighter-rouge">ros2 param dump [node_name]</code> .</p>
  </li>
</ol>

<p>Reagrdless of your approach, if you are having difficulty getting the camera configured, it is suggested to first use Vimba Viewer to play around with settings that work. 
The Vimba Viewer GUI will help you determine what settings are available to your camera model and help you tune them easier.
Once you have settings that you are happy with, save them into your own rosparam file or onto the camera using “Saved User Sets”.</p>

<h2 id="ros-nodes">ROS Nodes</h2>

<h3 id="mono_camera_node">mono_camera_node</h3>

<p>The mono_camera_node is the main driver that connects to the camera, configures it according to ROS parameters/dynamic reconfigure, and starts publishing image frames.
The driver uses <a href="http://wiki.ros.org/image_transport">image_transport</a> to publish image frames, so all expected image topics should be available.
See the config file (<code class="language-plaintext highlighter-rouge">cfg/AvtVimbaCamera.cfg</code>) for documentation regarding the various parameters that can be used to configure the camera itself.
See the launch file (launch/mono_camera.launch) for documentation regarding the operational parameters of the driver.</p>

<h3 id="trigger_node">trigger_node</h3>

<p>The trigger_node is a standalone node for sending out ethernet-based action commands to AVT cameras. 
Action commands are useful for triggering frame captures over ethernet.
See AVT’s <a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/Action-Commands_Appnote.pdf">application note</a> for more details.
Note that cameras must be configured to receive the action commands in addition to running the trigger_node.</p>

<h2 id="clock-synchronization">Clock Synchronization</h2>

<p>If you wish to use the exact time the image was measured in the header of the ROS messages, it is suggested to use PTP synchronization.
PTP will ensure the clock on the camera is synchronized with the computer, so that measurement times are all based off of the same clock.
Setting the <code class="language-plaintext highlighter-rouge">use_measurement_time</code> parameter will set the ROS header timestamp to the frame timestamp, but it is up to you to make sure the camera clock is synced with the computer.
<a href="http://linuxptp.sourceforge.net">linuxptp</a> is a great tool for PTP synchronization and is suggested for ensuring the camera is in sync with the computer.
See the links below for more details on PTP sync.</p>

<h2 id="useful-technical-references-and-application-notes">Useful Technical References and Application Notes</h2>

<ul>
  <li>
<a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/features/GigE_Features_Reference.pdf">GigE Features Reference</a> (To better understand what features your camera supports and how to tune them)</li>
  <li><a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/Action-Commands_Appnote.pdf">Trigger over Ethernet - Action Commands</a></li>
  <li>
<a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/PTP_IEEE1588_with_Prosilica_GT_GC_Manta.pdf">PTP Clock Sync</a> (Highly recommended if you care about exact image acquisition time)</li>
  <li><a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/Image_Timestamp.pdf">Image Timestamp on Allied Vision GigE Cameras</a></li>
  <li>
<a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/various/Decimation.pdf">Decimation</a> (Binning is similar)</li>
</ul>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/avt_vimba_camera">avt_vimba_camera</a> <small>repository</small></h3>
        <span class="label label-default">camera</span> <span class="label label-default">driver</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
        <a class="label label-primary pkg-label" href="/p/avt_vimba_camera">avt_vimba_camera</a>
        
        <a class="label label-primary pkg-label" href="/p/avt_vimba_camera_msgs">avt_vimba_camera_msgs</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-astuff-avt_vimba_camera
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-astuff-avt_vimba_camera" role="menuitem" tabindex="-1" href="/r/avt_vimba_camera/github-astuff-avt_vimba_camera" data="github-astuff-avt_vimba_camera">
                    <span class="glyphicon glyphicon-star"></span>
                    github-astuff-avt_vimba_camera
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS1/2 Driver for AVT cameras using VIMBA SDK.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/astuff/avt_vimba_camera.git">https://github.com/astuff/avt_vimba_camera.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">ros2_master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2022-05-24
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">camera</span> <span class="label label-default">driver</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/avt_vimba_camera/#jazzy-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/avt_vimba_camera/#jazzy-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/avt_vimba_camera/#jazzy-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/avt_vimba_camera">avt_vimba_camera</a></td>
                    <td>2001.1.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/avt_vimba_camera_msgs">avt_vimba_camera_msgs</a></td>
                    <td>2001.1.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="avt_vimba_camera-ros2">avt_vimba_camera (ROS2)</h1>

<p>This repo contains a ROS2 driver for cameras manufactured by <a href="https://www.alliedvision.com">Allied Vision Technologies</a>.
The driver relies on libraries provided by AVT as part of their <a href="https://www.alliedvision.com/en/products/software.html">Vimba SDK</a>.</p>

<p><em>See the ROS1 version of this README <a href="https://github.com/astuff/avt_vimba_camera/blob/ros1_master/README.md">here</a>.</em></p>

<h2 id="installation">Installation</h2>

<h3 id="dependencies">Dependencies</h3>
<p>First, you will need to install the Vimba SDK.
Download it from AVT’s website <a href="https://www.alliedvision.com/en/products/vimba-sdk/#c1497">here</a>.</p>

<p>Also see the <a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/software/software/Vimba/appnote/Vimba_installation_under_Linux.pdf">linux vimba installation instructions</a>.</p>

<p>It is highly recommended to open the “Vimba Viewer” tool that came along with the SDK and make sure you can connect to your camera.</p>

<p>It may be useful to create a desktop shortcut to Vimba Viewer:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ln</span> <span class="nt">-sf</span> <span class="s2">"Vimba_5_0/Tools/Viewer/Bin/x86_64bit/VimbaViewer"</span> <span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/Desktop"</span>

</code></pre></div></div>

<h3 id="ros-driver">ROS Driver</h3>

<p>Once you’ve successfully connected to your camera using Vimba Viewer, you can continue with the ROS driver install:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install ros-$ROS_DISTRO-avt-vimba-camera

</code></pre></div></div>

<h2 id="operational-advice">Operational Advice</h2>

<h3 id="mtu-size-gige-cameras">MTU Size (GigE Cameras)</h3>
<p>If you are using a GigE camera (ethernet-based camera), it is recommended to adjust some settings in your network interface to be able to handle the potentially high bandwidth usage of the camera stream.</p>

<p>On Linux, you will need to increase the MTU (Maximum Transmission Unit) on the network interface attached to the camera.</p>

<p>You can check what your current mtu setting is by running the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ip a | grep mtu

</code></pre></div></div>

<p>According to AVT documentation, increase the mtu to <code class="language-plaintext highlighter-rouge">9014</code>.
If you use Network Manager, this can be done by opening the network interface settings and editing the “MTU” box under the “Identity” tab.</p>

<p>See the “Optimize system performance” section of your camera’s technical manual for full details.
For example, the Mako camera technical manual is available <a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/Mako/techman/Mako_TechMan_en.pdf">here</a>.</p>

<h3 id="receive-buffer-size-gige-cameras">Receive Buffer Size (GigE Cameras)</h3>

<p>It is also recommended to increase your network receive buffer size.
By default, Ubuntu uses <code class="language-plaintext highlighter-rouge">212992</code>.</p>

<p>You can check what your current buffer size is:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl 'net.core.rmem_max'

</code></pre></div></div>
<p>Update the buffer size with the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl -w 'net.core.rmem_max=26214400'

</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">26214400</code> has been tested successfully, but anything above <code class="language-plaintext highlighter-rouge">2000000</code> is likely fine.</p>

<p>Once you find a value that works for you, you can make the change permanent (persist across reboots) by updating the <code class="language-plaintext highlighter-rouge">/etc/sysctl.conf</code> file with the following line:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>net.core.rmem_max=26214400

</code></pre></div></div>

<h3 id="camera-settings-in-general">Camera Settings in General</h3>

<p>When the ROS2 driver starts up, it queries the camera for all features and creates ROS parameters for every feature on the camera.
All camera-related ROS parameters are prefixed with “feature/” in their name to indicate they are camera features.
Note that some features are read-only, and each camera model will have slightly different feature sets.
If the user does not specify the ROS parameter for a given feature using yaml config files or launch files, then the value for that feature is untouched and not overridden by the driver.</p>

<p>This allows you to take two different approaches towards params/features with the ROS driver:</p>
<ol>
  <li>
    <p>Don’t configure anything via ROS params and instead use the camera’s “Saved User Sets” functionality to load a custom configuration every time it boots. 
The ROS driver won’t change anything (as long as no “feature/” ROS params are set) and just use the camera as it’s configured.</p>
  </li>
  <li>
    <p>Use ROS params defined in a yaml file to configure the camera when the driver starts.
Existing params can be saved using <code class="language-plaintext highlighter-rouge">ros2 param dump [node_name]</code> .</p>
  </li>
</ol>

<p>Reagrdless of your approach, if you are having difficulty getting the camera configured, it is suggested to first use Vimba Viewer to play around with settings that work. 
The Vimba Viewer GUI will help you determine what settings are available to your camera model and help you tune them easier.
Once you have settings that you are happy with, save them into your own rosparam file or onto the camera using “Saved User Sets”.</p>

<h2 id="ros-nodes">ROS Nodes</h2>

<h3 id="mono_camera_node">mono_camera_node</h3>

<p>The mono_camera_node is the main driver that connects to the camera, configures it according to ROS parameters/dynamic reconfigure, and starts publishing image frames.
The driver uses <a href="http://wiki.ros.org/image_transport">image_transport</a> to publish image frames, so all expected image topics should be available.
See the config file (<code class="language-plaintext highlighter-rouge">cfg/AvtVimbaCamera.cfg</code>) for documentation regarding the various parameters that can be used to configure the camera itself.
See the launch file (launch/mono_camera.launch) for documentation regarding the operational parameters of the driver.</p>

<h3 id="trigger_node">trigger_node</h3>

<p>The trigger_node is a standalone node for sending out ethernet-based action commands to AVT cameras. 
Action commands are useful for triggering frame captures over ethernet.
See AVT’s <a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/Action-Commands_Appnote.pdf">application note</a> for more details.
Note that cameras must be configured to receive the action commands in addition to running the trigger_node.</p>

<h2 id="clock-synchronization">Clock Synchronization</h2>

<p>If you wish to use the exact time the image was measured in the header of the ROS messages, it is suggested to use PTP synchronization.
PTP will ensure the clock on the camera is synchronized with the computer, so that measurement times are all based off of the same clock.
Setting the <code class="language-plaintext highlighter-rouge">use_measurement_time</code> parameter will set the ROS header timestamp to the frame timestamp, but it is up to you to make sure the camera clock is synced with the computer.
<a href="http://linuxptp.sourceforge.net">linuxptp</a> is a great tool for PTP synchronization and is suggested for ensuring the camera is in sync with the computer.
See the links below for more details on PTP sync.</p>

<h2 id="useful-technical-references-and-application-notes">Useful Technical References and Application Notes</h2>

<ul>
  <li>
<a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/features/GigE_Features_Reference.pdf">GigE Features Reference</a> (To better understand what features your camera supports and how to tune them)</li>
  <li><a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/Action-Commands_Appnote.pdf">Trigger over Ethernet - Action Commands</a></li>
  <li>
<a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/PTP_IEEE1588_with_Prosilica_GT_GC_Manta.pdf">PTP Clock Sync</a> (Highly recommended if you care about exact image acquisition time)</li>
  <li><a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/Image_Timestamp.pdf">Image Timestamp on Allied Vision GigE Cameras</a></li>
  <li>
<a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/various/Decimation.pdf">Decimation</a> (Binning is similar)</li>
</ul>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/avt_vimba_camera">avt_vimba_camera</a> <small>repository</small></h3>
        <span class="label label-default">camera</span> <span class="label label-default">driver</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
        <a class="label label-primary pkg-label" href="/p/avt_vimba_camera">avt_vimba_camera</a>
        
        <a class="label label-primary pkg-label" href="/p/avt_vimba_camera_msgs">avt_vimba_camera_msgs</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-astuff-avt_vimba_camera
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-astuff-avt_vimba_camera" role="menuitem" tabindex="-1" href="/r/avt_vimba_camera/github-astuff-avt_vimba_camera" data="github-astuff-avt_vimba_camera">
                    <span class="glyphicon glyphicon-star"></span>
                    github-astuff-avt_vimba_camera
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS1/2 Driver for AVT cameras using VIMBA SDK.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/astuff/avt_vimba_camera.git">https://github.com/astuff/avt_vimba_camera.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">ros2_master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2022-05-24
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">camera</span> <span class="label label-default">driver</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/avt_vimba_camera/#kilted-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/avt_vimba_camera/#kilted-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/avt_vimba_camera/#kilted-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/avt_vimba_camera">avt_vimba_camera</a></td>
                    <td>2001.1.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/avt_vimba_camera_msgs">avt_vimba_camera_msgs</a></td>
                    <td>2001.1.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="avt_vimba_camera-ros2">avt_vimba_camera (ROS2)</h1>

<p>This repo contains a ROS2 driver for cameras manufactured by <a href="https://www.alliedvision.com">Allied Vision Technologies</a>.
The driver relies on libraries provided by AVT as part of their <a href="https://www.alliedvision.com/en/products/software.html">Vimba SDK</a>.</p>

<p><em>See the ROS1 version of this README <a href="https://github.com/astuff/avt_vimba_camera/blob/ros1_master/README.md">here</a>.</em></p>

<h2 id="installation">Installation</h2>

<h3 id="dependencies">Dependencies</h3>
<p>First, you will need to install the Vimba SDK.
Download it from AVT’s website <a href="https://www.alliedvision.com/en/products/vimba-sdk/#c1497">here</a>.</p>

<p>Also see the <a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/software/software/Vimba/appnote/Vimba_installation_under_Linux.pdf">linux vimba installation instructions</a>.</p>

<p>It is highly recommended to open the “Vimba Viewer” tool that came along with the SDK and make sure you can connect to your camera.</p>

<p>It may be useful to create a desktop shortcut to Vimba Viewer:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ln</span> <span class="nt">-sf</span> <span class="s2">"Vimba_5_0/Tools/Viewer/Bin/x86_64bit/VimbaViewer"</span> <span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/Desktop"</span>

</code></pre></div></div>

<h3 id="ros-driver">ROS Driver</h3>

<p>Once you’ve successfully connected to your camera using Vimba Viewer, you can continue with the ROS driver install:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install ros-$ROS_DISTRO-avt-vimba-camera

</code></pre></div></div>

<h2 id="operational-advice">Operational Advice</h2>

<h3 id="mtu-size-gige-cameras">MTU Size (GigE Cameras)</h3>
<p>If you are using a GigE camera (ethernet-based camera), it is recommended to adjust some settings in your network interface to be able to handle the potentially high bandwidth usage of the camera stream.</p>

<p>On Linux, you will need to increase the MTU (Maximum Transmission Unit) on the network interface attached to the camera.</p>

<p>You can check what your current mtu setting is by running the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ip a | grep mtu

</code></pre></div></div>

<p>According to AVT documentation, increase the mtu to <code class="language-plaintext highlighter-rouge">9014</code>.
If you use Network Manager, this can be done by opening the network interface settings and editing the “MTU” box under the “Identity” tab.</p>

<p>See the “Optimize system performance” section of your camera’s technical manual for full details.
For example, the Mako camera technical manual is available <a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/Mako/techman/Mako_TechMan_en.pdf">here</a>.</p>

<h3 id="receive-buffer-size-gige-cameras">Receive Buffer Size (GigE Cameras)</h3>

<p>It is also recommended to increase your network receive buffer size.
By default, Ubuntu uses <code class="language-plaintext highlighter-rouge">212992</code>.</p>

<p>You can check what your current buffer size is:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl 'net.core.rmem_max'

</code></pre></div></div>
<p>Update the buffer size with the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl -w 'net.core.rmem_max=26214400'

</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">26214400</code> has been tested successfully, but anything above <code class="language-plaintext highlighter-rouge">2000000</code> is likely fine.</p>

<p>Once you find a value that works for you, you can make the change permanent (persist across reboots) by updating the <code class="language-plaintext highlighter-rouge">/etc/sysctl.conf</code> file with the following line:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>net.core.rmem_max=26214400

</code></pre></div></div>

<h3 id="camera-settings-in-general">Camera Settings in General</h3>

<p>When the ROS2 driver starts up, it queries the camera for all features and creates ROS parameters for every feature on the camera.
All camera-related ROS parameters are prefixed with “feature/” in their name to indicate they are camera features.
Note that some features are read-only, and each camera model will have slightly different feature sets.
If the user does not specify the ROS parameter for a given feature using yaml config files or launch files, then the value for that feature is untouched and not overridden by the driver.</p>

<p>This allows you to take two different approaches towards params/features with the ROS driver:</p>
<ol>
  <li>
    <p>Don’t configure anything via ROS params and instead use the camera’s “Saved User Sets” functionality to load a custom configuration every time it boots. 
The ROS driver won’t change anything (as long as no “feature/” ROS params are set) and just use the camera as it’s configured.</p>
  </li>
  <li>
    <p>Use ROS params defined in a yaml file to configure the camera when the driver starts.
Existing params can be saved using <code class="language-plaintext highlighter-rouge">ros2 param dump [node_name]</code> .</p>
  </li>
</ol>

<p>Reagrdless of your approach, if you are having difficulty getting the camera configured, it is suggested to first use Vimba Viewer to play around with settings that work. 
The Vimba Viewer GUI will help you determine what settings are available to your camera model and help you tune them easier.
Once you have settings that you are happy with, save them into your own rosparam file or onto the camera using “Saved User Sets”.</p>

<h2 id="ros-nodes">ROS Nodes</h2>

<h3 id="mono_camera_node">mono_camera_node</h3>

<p>The mono_camera_node is the main driver that connects to the camera, configures it according to ROS parameters/dynamic reconfigure, and starts publishing image frames.
The driver uses <a href="http://wiki.ros.org/image_transport">image_transport</a> to publish image frames, so all expected image topics should be available.
See the config file (<code class="language-plaintext highlighter-rouge">cfg/AvtVimbaCamera.cfg</code>) for documentation regarding the various parameters that can be used to configure the camera itself.
See the launch file (launch/mono_camera.launch) for documentation regarding the operational parameters of the driver.</p>

<h3 id="trigger_node">trigger_node</h3>

<p>The trigger_node is a standalone node for sending out ethernet-based action commands to AVT cameras. 
Action commands are useful for triggering frame captures over ethernet.
See AVT’s <a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/Action-Commands_Appnote.pdf">application note</a> for more details.
Note that cameras must be configured to receive the action commands in addition to running the trigger_node.</p>

<h2 id="clock-synchronization">Clock Synchronization</h2>

<p>If you wish to use the exact time the image was measured in the header of the ROS messages, it is suggested to use PTP synchronization.
PTP will ensure the clock on the camera is synchronized with the computer, so that measurement times are all based off of the same clock.
Setting the <code class="language-plaintext highlighter-rouge">use_measurement_time</code> parameter will set the ROS header timestamp to the frame timestamp, but it is up to you to make sure the camera clock is synced with the computer.
<a href="http://linuxptp.sourceforge.net">linuxptp</a> is a great tool for PTP synchronization and is suggested for ensuring the camera is in sync with the computer.
See the links below for more details on PTP sync.</p>

<h2 id="useful-technical-references-and-application-notes">Useful Technical References and Application Notes</h2>

<ul>
  <li>
<a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/features/GigE_Features_Reference.pdf">GigE Features Reference</a> (To better understand what features your camera supports and how to tune them)</li>
  <li><a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/Action-Commands_Appnote.pdf">Trigger over Ethernet - Action Commands</a></li>
  <li>
<a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/PTP_IEEE1588_with_Prosilica_GT_GC_Manta.pdf">PTP Clock Sync</a> (Highly recommended if you care about exact image acquisition time)</li>
  <li><a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/Image_Timestamp.pdf">Image Timestamp on Allied Vision GigE Cameras</a></li>
  <li>
<a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/various/Decimation.pdf">Decimation</a> (Binning is similar)</li>
</ul>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/avt_vimba_camera">avt_vimba_camera</a> <small>repository</small></h3>
        <span class="label label-default">camera</span> <span class="label label-default">driver</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
        <a class="label label-primary pkg-label" href="/p/avt_vimba_camera">avt_vimba_camera</a>
        
        <a class="label label-primary pkg-label" href="/p/avt_vimba_camera_msgs">avt_vimba_camera_msgs</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-astuff-avt_vimba_camera
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-astuff-avt_vimba_camera" role="menuitem" tabindex="-1" href="/r/avt_vimba_camera/github-astuff-avt_vimba_camera" data="github-astuff-avt_vimba_camera">
                    <span class="glyphicon glyphicon-star"></span>
                    github-astuff-avt_vimba_camera
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS1/2 Driver for AVT cameras using VIMBA SDK.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/astuff/avt_vimba_camera.git">https://github.com/astuff/avt_vimba_camera.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">ros2_master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2022-05-24
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">camera</span> <span class="label label-default">driver</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/avt_vimba_camera/#rolling-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/avt_vimba_camera/#rolling-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/avt_vimba_camera/#rolling-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/avt_vimba_camera">avt_vimba_camera</a></td>
                    <td>2001.1.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/avt_vimba_camera_msgs">avt_vimba_camera_msgs</a></td>
                    <td>2001.1.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="avt_vimba_camera-ros2">avt_vimba_camera (ROS2)</h1>

<p>This repo contains a ROS2 driver for cameras manufactured by <a href="https://www.alliedvision.com">Allied Vision Technologies</a>.
The driver relies on libraries provided by AVT as part of their <a href="https://www.alliedvision.com/en/products/software.html">Vimba SDK</a>.</p>

<p><em>See the ROS1 version of this README <a href="https://github.com/astuff/avt_vimba_camera/blob/ros1_master/README.md">here</a>.</em></p>

<h2 id="installation">Installation</h2>

<h3 id="dependencies">Dependencies</h3>
<p>First, you will need to install the Vimba SDK.
Download it from AVT’s website <a href="https://www.alliedvision.com/en/products/vimba-sdk/#c1497">here</a>.</p>

<p>Also see the <a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/software/software/Vimba/appnote/Vimba_installation_under_Linux.pdf">linux vimba installation instructions</a>.</p>

<p>It is highly recommended to open the “Vimba Viewer” tool that came along with the SDK and make sure you can connect to your camera.</p>

<p>It may be useful to create a desktop shortcut to Vimba Viewer:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ln</span> <span class="nt">-sf</span> <span class="s2">"Vimba_5_0/Tools/Viewer/Bin/x86_64bit/VimbaViewer"</span> <span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/Desktop"</span>

</code></pre></div></div>

<h3 id="ros-driver">ROS Driver</h3>

<p>Once you’ve successfully connected to your camera using Vimba Viewer, you can continue with the ROS driver install:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install ros-$ROS_DISTRO-avt-vimba-camera

</code></pre></div></div>

<h2 id="operational-advice">Operational Advice</h2>

<h3 id="mtu-size-gige-cameras">MTU Size (GigE Cameras)</h3>
<p>If you are using a GigE camera (ethernet-based camera), it is recommended to adjust some settings in your network interface to be able to handle the potentially high bandwidth usage of the camera stream.</p>

<p>On Linux, you will need to increase the MTU (Maximum Transmission Unit) on the network interface attached to the camera.</p>

<p>You can check what your current mtu setting is by running the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ip a | grep mtu

</code></pre></div></div>

<p>According to AVT documentation, increase the mtu to <code class="language-plaintext highlighter-rouge">9014</code>.
If you use Network Manager, this can be done by opening the network interface settings and editing the “MTU” box under the “Identity” tab.</p>

<p>See the “Optimize system performance” section of your camera’s technical manual for full details.
For example, the Mako camera technical manual is available <a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/Mako/techman/Mako_TechMan_en.pdf">here</a>.</p>

<h3 id="receive-buffer-size-gige-cameras">Receive Buffer Size (GigE Cameras)</h3>

<p>It is also recommended to increase your network receive buffer size.
By default, Ubuntu uses <code class="language-plaintext highlighter-rouge">212992</code>.</p>

<p>You can check what your current buffer size is:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl 'net.core.rmem_max'

</code></pre></div></div>
<p>Update the buffer size with the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl -w 'net.core.rmem_max=26214400'

</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">26214400</code> has been tested successfully, but anything above <code class="language-plaintext highlighter-rouge">2000000</code> is likely fine.</p>

<p>Once you find a value that works for you, you can make the change permanent (persist across reboots) by updating the <code class="language-plaintext highlighter-rouge">/etc/sysctl.conf</code> file with the following line:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>net.core.rmem_max=26214400

</code></pre></div></div>

<h3 id="camera-settings-in-general">Camera Settings in General</h3>

<p>When the ROS2 driver starts up, it queries the camera for all features and creates ROS parameters for every feature on the camera.
All camera-related ROS parameters are prefixed with “feature/” in their name to indicate they are camera features.
Note that some features are read-only, and each camera model will have slightly different feature sets.
If the user does not specify the ROS parameter for a given feature using yaml config files or launch files, then the value for that feature is untouched and not overridden by the driver.</p>

<p>This allows you to take two different approaches towards params/features with the ROS driver:</p>
<ol>
  <li>
    <p>Don’t configure anything via ROS params and instead use the camera’s “Saved User Sets” functionality to load a custom configuration every time it boots. 
The ROS driver won’t change anything (as long as no “feature/” ROS params are set) and just use the camera as it’s configured.</p>
  </li>
  <li>
    <p>Use ROS params defined in a yaml file to configure the camera when the driver starts.
Existing params can be saved using <code class="language-plaintext highlighter-rouge">ros2 param dump [node_name]</code> .</p>
  </li>
</ol>

<p>Reagrdless of your approach, if you are having difficulty getting the camera configured, it is suggested to first use Vimba Viewer to play around with settings that work. 
The Vimba Viewer GUI will help you determine what settings are available to your camera model and help you tune them easier.
Once you have settings that you are happy with, save them into your own rosparam file or onto the camera using “Saved User Sets”.</p>

<h2 id="ros-nodes">ROS Nodes</h2>

<h3 id="mono_camera_node">mono_camera_node</h3>

<p>The mono_camera_node is the main driver that connects to the camera, configures it according to ROS parameters/dynamic reconfigure, and starts publishing image frames.
The driver uses <a href="http://wiki.ros.org/image_transport">image_transport</a> to publish image frames, so all expected image topics should be available.
See the config file (<code class="language-plaintext highlighter-rouge">cfg/AvtVimbaCamera.cfg</code>) for documentation regarding the various parameters that can be used to configure the camera itself.
See the launch file (launch/mono_camera.launch) for documentation regarding the operational parameters of the driver.</p>

<h3 id="trigger_node">trigger_node</h3>

<p>The trigger_node is a standalone node for sending out ethernet-based action commands to AVT cameras. 
Action commands are useful for triggering frame captures over ethernet.
See AVT’s <a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/Action-Commands_Appnote.pdf">application note</a> for more details.
Note that cameras must be configured to receive the action commands in addition to running the trigger_node.</p>

<h2 id="clock-synchronization">Clock Synchronization</h2>

<p>If you wish to use the exact time the image was measured in the header of the ROS messages, it is suggested to use PTP synchronization.
PTP will ensure the clock on the camera is synchronized with the computer, so that measurement times are all based off of the same clock.
Setting the <code class="language-plaintext highlighter-rouge">use_measurement_time</code> parameter will set the ROS header timestamp to the frame timestamp, but it is up to you to make sure the camera clock is synced with the computer.
<a href="http://linuxptp.sourceforge.net">linuxptp</a> is a great tool for PTP synchronization and is suggested for ensuring the camera is in sync with the computer.
See the links below for more details on PTP sync.</p>

<h2 id="useful-technical-references-and-application-notes">Useful Technical References and Application Notes</h2>

<ul>
  <li>
<a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/features/GigE_Features_Reference.pdf">GigE Features Reference</a> (To better understand what features your camera supports and how to tune them)</li>
  <li><a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/Action-Commands_Appnote.pdf">Trigger over Ethernet - Action Commands</a></li>
  <li>
<a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/PTP_IEEE1588_with_Prosilica_GT_GC_Manta.pdf">PTP Clock Sync</a> (Highly recommended if you care about exact image acquisition time)</li>
  <li><a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/Image_Timestamp.pdf">Image Timestamp on Allied Vision GigE Cameras</a></li>
  <li>
<a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/various/Decimation.pdf">Decimation</a> (Binning is similar)</li>
</ul>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/avt_vimba_camera">avt_vimba_camera</a> <small>repository</small></h3>
        <span class="label label-default">camera</span> <span class="label label-default">driver</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-astuff-avt_vimba_camera
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-astuff-avt_vimba_camera" role="menuitem" tabindex="-1" href="/r/avt_vimba_camera/github-astuff-avt_vimba_camera" data="github-astuff-avt_vimba_camera">
                    <span class="glyphicon glyphicon-star"></span>
                    github-astuff-avt_vimba_camera
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>github</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/avt_vimba_camera">avt_vimba_camera</a> <small>repository</small></h3>
        <span class="label label-default">camera</span> <span class="label label-default">driver</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
        <a class="label label-primary pkg-label" href="/p/avt_vimba_camera">avt_vimba_camera</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-astuff-avt_vimba_camera
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-astuff-avt_vimba_camera" role="menuitem" tabindex="-1" href="/r/avt_vimba_camera/github-astuff-avt_vimba_camera" data="github-astuff-avt_vimba_camera">
                    <span class="glyphicon glyphicon-star"></span>
                    github-astuff-avt_vimba_camera
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS1/2 Driver for AVT cameras using VIMBA SDK.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/astuff/avt_vimba_camera.git">https://github.com/astuff/avt_vimba_camera.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">ros1_master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2023-05-29
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">camera</span> <span class="label label-default">driver</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/avt_vimba_camera/#noetic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/avt_vimba_camera/#noetic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/avt_vimba_camera/#noetic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/avt_vimba_camera">avt_vimba_camera</a></td>
                    <td>1.2.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="avt_vimba_camera-ros1">avt_vimba_camera (ROS1)</h1>

<p>This repo contains a ROS driver for cameras manufactured by <a href="https://www.alliedvision.com">Allied Vision Technologies</a>.
The driver relies on libraries provided by AVT as part of their <a href="https://www.alliedvision.com/en/products/software.html">Vimba SDK</a>.</p>

<p><em>See the ROS2 version of this README <a href="https://github.com/astuff/avt_vimba_camera/blob/ros2_master/README.md">here</a>.</em></p>

<h2 id="installation">Installation</h2>

<h3 id="dependencies">Dependencies</h3>
<p>First, you will need to install the Vimba SDK.
Download it from AVT’s website <a href="https://www.alliedvision.com/en/products/vimba-sdk/#c1497">here</a>.</p>

<p>Also see the <a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/software/software/Vimba/appnote/Vimba_installation_under_Linux.pdf">linux vimba installation instructions</a>.</p>

<p>It is highly recommended to open the “Vimba Viewer” tool that came along with the SDK and make sure you can connect to your camera.</p>

<p>It may be useful to create a desktop shortcut to Vimba Viewer:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ln</span> <span class="nt">-sf</span> <span class="s2">"Vimba_5_0/Tools/Viewer/Bin/x86_64bit/VimbaViewer"</span> <span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/Desktop"</span>

</code></pre></div></div>

<h3 id="ros-driver">ROS Driver</h3>

<p>Once you’ve successfully connected to your camera using Vimba Viewer, you can continue with the ROS driver install:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install ros-$ROS_DISTRO-avt-vimba-camera

</code></pre></div></div>

<h2 id="operational-advice">Operational Advice</h2>

<h3 id="mtu-size">MTU Size</h3>
<p>If you are using a GigE camera (ethernet-based camera), it is recommended to adjust some settings in your network interface to be able to handle the potentially high bandwidth usage of the camera stream.</p>

<p>On Linux, you will need to increase the MTU (Maximum Transmission Unit) on the network interface attached to the camera.</p>

<p>You can check what your current mtu setting is by running the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ip a | grep mtu

</code></pre></div></div>

<p>According to AVT documentation, increase the mtu to <code class="language-plaintext highlighter-rouge">9014</code>.
If you use Network Manager, this can be done by opening the network interface settings and editing the “MTU” box under the “Identity” tab.</p>

<p>See the “Optimize system performance” section of your camera’s technical manual for full details.
For example, the Mako camera technical manual is available <a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/Mako/techman/Mako_TechMan_en.pdf">here</a>.</p>

<h3 id="receive-buffer-size">Receive Buffer Size</h3>

<p>It is also recommended to increase your network receive buffer size.
By default, Ubuntu uses <code class="language-plaintext highlighter-rouge">212992</code>.</p>

<p>You can check what your current buffer size is:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl 'net.core.rmem_max'

</code></pre></div></div>
<p>Update the buffer size with the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl -w 'net.core.rmem_max=26214400'

</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">26214400</code> has been tested successfully, but anything above <code class="language-plaintext highlighter-rouge">2000000</code> is likely fine.</p>

<p>Once you find a value that works for you, you can make the change permanent (persist across reboots) by updating the <code class="language-plaintext highlighter-rouge">/etc/sysctl.conf</code> file with the following line:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>net.core.rmem_max=26214400

</code></pre></div></div>

<h3 id="camera-settings-in-general">Camera Settings in General</h3>

<p>If you are having difficulty getting the camera to do what you want using the ROS driver, it is suggested to first use Vimba Viewer to play around with settings that work. 
The Vimba Viewer GUI will help you determine what settings are available to your camera model and help you tune them easier.
Once you have settings that you are happy with, save them into your own rosparam file or launch file, and the driver will use those settings every time it launches.</p>

<p>Note that this driver makes use of both ROS parameters and dynamic reconfigure.
When the driver first starts, the dyanmic reconfigure server will initialize with all current ROS param values, then trigger a callback to configure the camera.
This means ROS params will take precedence and should be the preferred way to save camera configs meant to be reused.
After the driver initializes, changes to the parameters can be made using dynamic reconfigure RQT tool (rqt_reconfigure).</p>

<h2 id="ros-nodes">ROS Nodes</h2>

<h3 id="mono_camera_node">mono_camera_node</h3>

<p>The mono_camera_node is the main driver that connects to the camera, configures it according to ROS parameters/dynamic reconfigure, and starts publishing image frames.
The driver uses <a href="http://wiki.ros.org/image_transport">image_transport</a> to publish image frames, so all expected image topics should be available.
See the config file (<code class="language-plaintext highlighter-rouge">cfg/AvtVimbaCamera.cfg</code>) for documentation regarding the various parameters that can be used to configure the camera itself.
See the launch file (launch/mono_camera.launch) for documentation regarding the operational parameters of the driver.</p>

<h3 id="trigger_node">trigger_node</h3>

<p>The trigger_node is a standalone node for sending out ethernet-based action commands to AVT cameras. 
Action commands are useful for triggering frame captures over ethernet.
See AVT’s <a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/Action-Commands_Appnote.pdf">application note</a> for more details.
Note that cameras must be configured to receive the action commands in addition to running the trigger_node.</p>

<h2 id="clock-synchronization">Clock Synchronization</h2>

<p>If you wish to use the exact time the image was measured in the header of the ROS messages, it is suggested to use PTP synchronization.
PTP will ensure the clock on the camera is synchronized with the computer, so that measurement times are all based off of the same clock.
Setting the <code class="language-plaintext highlighter-rouge">use_measurement_time</code> parameter will set the ROS header timestamp to the frame timestamp, but it is up to you to make sure the camera clock is synced with the computer.
<a href="http://linuxptp.sourceforge.net">linuxptp</a> is a great tool for PTP synchronization and is suggested for ensuring the camera is in sync with the computer.
See the links below for more details on PTP sync.</p>

<h2 id="useful-technical-references-and-application-notes">Useful Technical References and Application Notes</h2>

<ul>
  <li>
<a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/features/GigE_Features_Reference.pdf">GigE Features Reference</a> (To better understand what features your camera supports and how to tune them)</li>
  <li><a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/Action-Commands_Appnote.pdf">Trigger over Ethernet - Action Commands</a></li>
  <li>
<a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/PTP_IEEE1588_with_Prosilica_GT_GC_Manta.pdf">PTP Clock Sync</a> (Highly recommended if you care about exact image acquisition time)</li>
  <li><a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/Image_Timestamp.pdf">Image Timestamp on Allied Vision GigE Cameras</a></li>
  <li>
<a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/various/Decimation.pdf">Decimation</a> (Binning is similar)</li>
</ul>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/avt_vimba_camera">avt_vimba_camera</a> <small>repository</small></h3>
        <span class="label label-default">camera</span> <span class="label label-default">driver</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-astuff-avt_vimba_camera
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-astuff-avt_vimba_camera" role="menuitem" tabindex="-1" href="/r/avt_vimba_camera/github-astuff-avt_vimba_camera" data="github-astuff-avt_vimba_camera">
                    <span class="glyphicon glyphicon-star"></span>
                    github-astuff-avt_vimba_camera
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/avt_vimba_camera">avt_vimba_camera</a> <small>repository</small></h3>
        <span class="label label-default">camera</span> <span class="label label-default">driver</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
        <a class="label label-primary pkg-label" href="/p/avt_vimba_camera">avt_vimba_camera</a>
        
        <a class="label label-primary pkg-label" href="/p/avt_vimba_camera_msgs">avt_vimba_camera_msgs</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-astuff-avt_vimba_camera
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-astuff-avt_vimba_camera" role="menuitem" tabindex="-1" href="/r/avt_vimba_camera/github-astuff-avt_vimba_camera" data="github-astuff-avt_vimba_camera">
                    <span class="glyphicon glyphicon-star"></span>
                    github-astuff-avt_vimba_camera
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS1/2 Driver for AVT cameras using VIMBA SDK.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/astuff/avt_vimba_camera.git">https://github.com/astuff/avt_vimba_camera.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">ros2_master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2022-05-24
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">camera</span> <span class="label label-default">driver</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/avt_vimba_camera/#iron-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/avt_vimba_camera/#iron-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/avt_vimba_camera/#iron-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/avt_vimba_camera">avt_vimba_camera</a></td>
                    <td>2001.1.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/avt_vimba_camera_msgs">avt_vimba_camera_msgs</a></td>
                    <td>2001.1.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="avt_vimba_camera-ros2">avt_vimba_camera (ROS2)</h1>

<p>This repo contains a ROS2 driver for cameras manufactured by <a href="https://www.alliedvision.com">Allied Vision Technologies</a>.
The driver relies on libraries provided by AVT as part of their <a href="https://www.alliedvision.com/en/products/software.html">Vimba SDK</a>.</p>

<p><em>See the ROS1 version of this README <a href="https://github.com/astuff/avt_vimba_camera/blob/ros1_master/README.md">here</a>.</em></p>

<h2 id="installation">Installation</h2>

<h3 id="dependencies">Dependencies</h3>
<p>First, you will need to install the Vimba SDK.
Download it from AVT’s website <a href="https://www.alliedvision.com/en/products/vimba-sdk/#c1497">here</a>.</p>

<p>Also see the <a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/software/software/Vimba/appnote/Vimba_installation_under_Linux.pdf">linux vimba installation instructions</a>.</p>

<p>It is highly recommended to open the “Vimba Viewer” tool that came along with the SDK and make sure you can connect to your camera.</p>

<p>It may be useful to create a desktop shortcut to Vimba Viewer:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ln</span> <span class="nt">-sf</span> <span class="s2">"Vimba_5_0/Tools/Viewer/Bin/x86_64bit/VimbaViewer"</span> <span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/Desktop"</span>

</code></pre></div></div>

<h3 id="ros-driver">ROS Driver</h3>

<p>Once you’ve successfully connected to your camera using Vimba Viewer, you can continue with the ROS driver install:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install ros-$ROS_DISTRO-avt-vimba-camera

</code></pre></div></div>

<h2 id="operational-advice">Operational Advice</h2>

<h3 id="mtu-size-gige-cameras">MTU Size (GigE Cameras)</h3>
<p>If you are using a GigE camera (ethernet-based camera), it is recommended to adjust some settings in your network interface to be able to handle the potentially high bandwidth usage of the camera stream.</p>

<p>On Linux, you will need to increase the MTU (Maximum Transmission Unit) on the network interface attached to the camera.</p>

<p>You can check what your current mtu setting is by running the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ip a | grep mtu

</code></pre></div></div>

<p>According to AVT documentation, increase the mtu to <code class="language-plaintext highlighter-rouge">9014</code>.
If you use Network Manager, this can be done by opening the network interface settings and editing the “MTU” box under the “Identity” tab.</p>

<p>See the “Optimize system performance” section of your camera’s technical manual for full details.
For example, the Mako camera technical manual is available <a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/Mako/techman/Mako_TechMan_en.pdf">here</a>.</p>

<h3 id="receive-buffer-size-gige-cameras">Receive Buffer Size (GigE Cameras)</h3>

<p>It is also recommended to increase your network receive buffer size.
By default, Ubuntu uses <code class="language-plaintext highlighter-rouge">212992</code>.</p>

<p>You can check what your current buffer size is:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl 'net.core.rmem_max'

</code></pre></div></div>
<p>Update the buffer size with the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl -w 'net.core.rmem_max=26214400'

</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">26214400</code> has been tested successfully, but anything above <code class="language-plaintext highlighter-rouge">2000000</code> is likely fine.</p>

<p>Once you find a value that works for you, you can make the change permanent (persist across reboots) by updating the <code class="language-plaintext highlighter-rouge">/etc/sysctl.conf</code> file with the following line:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>net.core.rmem_max=26214400

</code></pre></div></div>

<h3 id="camera-settings-in-general">Camera Settings in General</h3>

<p>When the ROS2 driver starts up, it queries the camera for all features and creates ROS parameters for every feature on the camera.
All camera-related ROS parameters are prefixed with “feature/” in their name to indicate they are camera features.
Note that some features are read-only, and each camera model will have slightly different feature sets.
If the user does not specify the ROS parameter for a given feature using yaml config files or launch files, then the value for that feature is untouched and not overridden by the driver.</p>

<p>This allows you to take two different approaches towards params/features with the ROS driver:</p>
<ol>
  <li>
    <p>Don’t configure anything via ROS params and instead use the camera’s “Saved User Sets” functionality to load a custom configuration every time it boots. 
The ROS driver won’t change anything (as long as no “feature/” ROS params are set) and just use the camera as it’s configured.</p>
  </li>
  <li>
    <p>Use ROS params defined in a yaml file to configure the camera when the driver starts.
Existing params can be saved using <code class="language-plaintext highlighter-rouge">ros2 param dump [node_name]</code> .</p>
  </li>
</ol>

<p>Reagrdless of your approach, if you are having difficulty getting the camera configured, it is suggested to first use Vimba Viewer to play around with settings that work. 
The Vimba Viewer GUI will help you determine what settings are available to your camera model and help you tune them easier.
Once you have settings that you are happy with, save them into your own rosparam file or onto the camera using “Saved User Sets”.</p>

<h2 id="ros-nodes">ROS Nodes</h2>

<h3 id="mono_camera_node">mono_camera_node</h3>

<p>The mono_camera_node is the main driver that connects to the camera, configures it according to ROS parameters/dynamic reconfigure, and starts publishing image frames.
The driver uses <a href="http://wiki.ros.org/image_transport">image_transport</a> to publish image frames, so all expected image topics should be available.
See the config file (<code class="language-plaintext highlighter-rouge">cfg/AvtVimbaCamera.cfg</code>) for documentation regarding the various parameters that can be used to configure the camera itself.
See the launch file (launch/mono_camera.launch) for documentation regarding the operational parameters of the driver.</p>

<h3 id="trigger_node">trigger_node</h3>

<p>The trigger_node is a standalone node for sending out ethernet-based action commands to AVT cameras. 
Action commands are useful for triggering frame captures over ethernet.
See AVT’s <a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/Action-Commands_Appnote.pdf">application note</a> for more details.
Note that cameras must be configured to receive the action commands in addition to running the trigger_node.</p>

<h2 id="clock-synchronization">Clock Synchronization</h2>

<p>If you wish to use the exact time the image was measured in the header of the ROS messages, it is suggested to use PTP synchronization.
PTP will ensure the clock on the camera is synchronized with the computer, so that measurement times are all based off of the same clock.
Setting the <code class="language-plaintext highlighter-rouge">use_measurement_time</code> parameter will set the ROS header timestamp to the frame timestamp, but it is up to you to make sure the camera clock is synced with the computer.
<a href="http://linuxptp.sourceforge.net">linuxptp</a> is a great tool for PTP synchronization and is suggested for ensuring the camera is in sync with the computer.
See the links below for more details on PTP sync.</p>

<h2 id="useful-technical-references-and-application-notes">Useful Technical References and Application Notes</h2>

<ul>
  <li>
<a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/features/GigE_Features_Reference.pdf">GigE Features Reference</a> (To better understand what features your camera supports and how to tune them)</li>
  <li><a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/Action-Commands_Appnote.pdf">Trigger over Ethernet - Action Commands</a></li>
  <li>
<a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/PTP_IEEE1588_with_Prosilica_GT_GC_Manta.pdf">PTP Clock Sync</a> (Highly recommended if you care about exact image acquisition time)</li>
  <li><a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/Image_Timestamp.pdf">Image Timestamp on Allied Vision GigE Cameras</a></li>
  <li>
<a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/various/Decimation.pdf">Decimation</a> (Binning is similar)</li>
</ul>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/avt_vimba_camera">avt_vimba_camera</a> <small>repository</small></h3>
        <span class="label label-default">camera</span> <span class="label label-default">driver</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
        <a class="label label-primary pkg-label" href="/p/avt_vimba_camera">avt_vimba_camera</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-astuff-avt_vimba_camera
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-astuff-avt_vimba_camera" role="menuitem" tabindex="-1" href="/r/avt_vimba_camera/github-astuff-avt_vimba_camera" data="github-astuff-avt_vimba_camera">
                    <span class="glyphicon glyphicon-star"></span>
                    github-astuff-avt_vimba_camera
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS1/2 Driver for AVT cameras using VIMBA SDK.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/astuff/avt_vimba_camera.git">https://github.com/astuff/avt_vimba_camera.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">ros1_master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2023-05-29
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">camera</span> <span class="label label-default">driver</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/avt_vimba_camera/#melodic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/avt_vimba_camera/#melodic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/avt_vimba_camera/#melodic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/avt_vimba_camera">avt_vimba_camera</a></td>
                    <td>1.2.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="avt_vimba_camera-ros1">avt_vimba_camera (ROS1)</h1>

<p>This repo contains a ROS driver for cameras manufactured by <a href="https://www.alliedvision.com">Allied Vision Technologies</a>.
The driver relies on libraries provided by AVT as part of their <a href="https://www.alliedvision.com/en/products/software.html">Vimba SDK</a>.</p>

<p><em>See the ROS2 version of this README <a href="https://github.com/astuff/avt_vimba_camera/blob/ros2_master/README.md">here</a>.</em></p>

<h2 id="installation">Installation</h2>

<h3 id="dependencies">Dependencies</h3>
<p>First, you will need to install the Vimba SDK.
Download it from AVT’s website <a href="https://www.alliedvision.com/en/products/vimba-sdk/#c1497">here</a>.</p>

<p>Also see the <a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/software/software/Vimba/appnote/Vimba_installation_under_Linux.pdf">linux vimba installation instructions</a>.</p>

<p>It is highly recommended to open the “Vimba Viewer” tool that came along with the SDK and make sure you can connect to your camera.</p>

<p>It may be useful to create a desktop shortcut to Vimba Viewer:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ln</span> <span class="nt">-sf</span> <span class="s2">"Vimba_5_0/Tools/Viewer/Bin/x86_64bit/VimbaViewer"</span> <span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/Desktop"</span>

</code></pre></div></div>

<h3 id="ros-driver">ROS Driver</h3>

<p>Once you’ve successfully connected to your camera using Vimba Viewer, you can continue with the ROS driver install:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install ros-$ROS_DISTRO-avt-vimba-camera

</code></pre></div></div>

<h2 id="operational-advice">Operational Advice</h2>

<h3 id="mtu-size">MTU Size</h3>
<p>If you are using a GigE camera (ethernet-based camera), it is recommended to adjust some settings in your network interface to be able to handle the potentially high bandwidth usage of the camera stream.</p>

<p>On Linux, you will need to increase the MTU (Maximum Transmission Unit) on the network interface attached to the camera.</p>

<p>You can check what your current mtu setting is by running the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ip a | grep mtu

</code></pre></div></div>

<p>According to AVT documentation, increase the mtu to <code class="language-plaintext highlighter-rouge">9014</code>.
If you use Network Manager, this can be done by opening the network interface settings and editing the “MTU” box under the “Identity” tab.</p>

<p>See the “Optimize system performance” section of your camera’s technical manual for full details.
For example, the Mako camera technical manual is available <a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/Mako/techman/Mako_TechMan_en.pdf">here</a>.</p>

<h3 id="receive-buffer-size">Receive Buffer Size</h3>

<p>It is also recommended to increase your network receive buffer size.
By default, Ubuntu uses <code class="language-plaintext highlighter-rouge">212992</code>.</p>

<p>You can check what your current buffer size is:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl 'net.core.rmem_max'

</code></pre></div></div>
<p>Update the buffer size with the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl -w 'net.core.rmem_max=26214400'

</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">26214400</code> has been tested successfully, but anything above <code class="language-plaintext highlighter-rouge">2000000</code> is likely fine.</p>

<p>Once you find a value that works for you, you can make the change permanent (persist across reboots) by updating the <code class="language-plaintext highlighter-rouge">/etc/sysctl.conf</code> file with the following line:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>net.core.rmem_max=26214400

</code></pre></div></div>

<h3 id="camera-settings-in-general">Camera Settings in General</h3>

<p>If you are having difficulty getting the camera to do what you want using the ROS driver, it is suggested to first use Vimba Viewer to play around with settings that work. 
The Vimba Viewer GUI will help you determine what settings are available to your camera model and help you tune them easier.
Once you have settings that you are happy with, save them into your own rosparam file or launch file, and the driver will use those settings every time it launches.</p>

<p>Note that this driver makes use of both ROS parameters and dynamic reconfigure.
When the driver first starts, the dyanmic reconfigure server will initialize with all current ROS param values, then trigger a callback to configure the camera.
This means ROS params will take precedence and should be the preferred way to save camera configs meant to be reused.
After the driver initializes, changes to the parameters can be made using dynamic reconfigure RQT tool (rqt_reconfigure).</p>

<h2 id="ros-nodes">ROS Nodes</h2>

<h3 id="mono_camera_node">mono_camera_node</h3>

<p>The mono_camera_node is the main driver that connects to the camera, configures it according to ROS parameters/dynamic reconfigure, and starts publishing image frames.
The driver uses <a href="http://wiki.ros.org/image_transport">image_transport</a> to publish image frames, so all expected image topics should be available.
See the config file (<code class="language-plaintext highlighter-rouge">cfg/AvtVimbaCamera.cfg</code>) for documentation regarding the various parameters that can be used to configure the camera itself.
See the launch file (launch/mono_camera.launch) for documentation regarding the operational parameters of the driver.</p>

<h3 id="trigger_node">trigger_node</h3>

<p>The trigger_node is a standalone node for sending out ethernet-based action commands to AVT cameras. 
Action commands are useful for triggering frame captures over ethernet.
See AVT’s <a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/Action-Commands_Appnote.pdf">application note</a> for more details.
Note that cameras must be configured to receive the action commands in addition to running the trigger_node.</p>

<h2 id="clock-synchronization">Clock Synchronization</h2>

<p>If you wish to use the exact time the image was measured in the header of the ROS messages, it is suggested to use PTP synchronization.
PTP will ensure the clock on the camera is synchronized with the computer, so that measurement times are all based off of the same clock.
Setting the <code class="language-plaintext highlighter-rouge">use_measurement_time</code> parameter will set the ROS header timestamp to the frame timestamp, but it is up to you to make sure the camera clock is synced with the computer.
<a href="http://linuxptp.sourceforge.net">linuxptp</a> is a great tool for PTP synchronization and is suggested for ensuring the camera is in sync with the computer.
See the links below for more details on PTP sync.</p>

<h2 id="useful-technical-references-and-application-notes">Useful Technical References and Application Notes</h2>

<ul>
  <li>
<a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/features/GigE_Features_Reference.pdf">GigE Features Reference</a> (To better understand what features your camera supports and how to tune them)</li>
  <li><a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/Action-Commands_Appnote.pdf">Trigger over Ethernet - Action Commands</a></li>
  <li>
<a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/PTP_IEEE1588_with_Prosilica_GT_GC_Manta.pdf">PTP Clock Sync</a> (Highly recommended if you care about exact image acquisition time)</li>
  <li><a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/GigE/Image_Timestamp.pdf">Image Timestamp on Allied Vision GigE Cameras</a></li>
  <li>
<a href="https://cdn.alliedvision.com/fileadmin/content/documents/products/cameras/various/appnote/various/Decimation.pdf">Decimation</a> (Binning is similar)</li>
</ul>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/astuff/avt_vimba_camera.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
