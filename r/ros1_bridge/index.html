<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/ros1_bridge/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">ros1_bridge</li>
        <!--<li class="active">ros1_bridge</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-primary" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-primary" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-primary" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-primary" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-default" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class=" older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class=" older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros1_bridge">ros1_bridge</a> <small>repository</small></h3>
        <span class="label label-default">hacktoberfest</span> 
        
        <a class="label label-primary pkg-label" href="/p/ros1_bridge">ros1_bridge</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-ros1_bridge
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-ros1_bridge" role="menuitem" tabindex="-1" href="/r/ros1_bridge/github-ros2-ros1_bridge" data="github-ros2-ros1_bridge">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-ros1_bridge
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS 2 package that provides bidirectional communication between ROS 1 and ROS 2</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros2/ros1_bridge.git">https://github.com/ros2/ros1_bridge.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-03-31
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">hacktoberfest</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ros1_bridge/#humble-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros1_bridge/#humble-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros1_bridge/#humble-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ros1_bridge">ros1_bridge</a></td>
                    <td>0.10.3</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="bridge-communication-between-ros-1-and-ros-2">Bridge communication between ROS 1 and ROS 2</h1>

<p>This package provides a network bridge which enables the exchange of messages between ROS 1 and ROS 2.</p>

<p>The bridge is currently implemented in C++ as at the time the Python API for ROS 2 had not been developed.
Because of this its support is limited to only the message/service types available at compile time of the bridge.
The bridge provided with the prebuilt ROS 2 binaries includes support for common ROS interfaces (messages/services), such as the interface packages listed in the <a href="https://github.com/ros2/common_interfaces">ros2/common_interfaces repository</a> and <code class="language-plaintext highlighter-rouge">tf2_msgs</code>.
See <a href="https://github.com/ros2/ros1_bridge/tree/master/doc/index.rst">the documentation</a> for more details on how ROS 1 and ROS 2 interfaces are associated with each other.
If you would like to use a bridge with other interfaces (including your own custom types), you will have to build the bridge from source (instructions below), after building and sourcing your custom types in separate ROS 1 and ROS 2 workspaces.
See <a href="https://github.com/ros2/ros1_bridge/tree/master/doc/index.rst">the documentation</a> for an example setup.</p>

<p>For efficiency reasons, topics will only be bridged when matching publisher-subscriber pairs are active for a topic on either side of the bridge.
As a result using <code class="language-plaintext highlighter-rouge">ros2 topic echo &lt;topic-name&gt;</code> doesn’t work but fails with an error message <code class="language-plaintext highlighter-rouge">Could not determine the type for the passed topic</code> if no other subscribers are present since the dynamic bridge hasn’t bridged the topic yet.
As a workaround the topic type can be specified explicitly <code class="language-plaintext highlighter-rouge">ros2 topic echo &lt;topic-name&gt; &lt;topic-type&gt;</code> which triggers the bridging of the topic since the <code class="language-plaintext highlighter-rouge">echo</code> command represents the necessary subscriber.
On the ROS 1 side <code class="language-plaintext highlighter-rouge">rostopic echo</code> doesn’t have an option to specify the topic type explicitly.
Therefore it can’t be used with the dynamic bridge if no other subscribers are present.
As an alternative you can use the <code class="language-plaintext highlighter-rouge">--bridge-all-2to1-topics</code> option to bridge all ROS 2 topics to ROS 1 so that tools such as <code class="language-plaintext highlighter-rouge">rostopic echo</code>, <code class="language-plaintext highlighter-rouge">rostopic list</code> and <code class="language-plaintext highlighter-rouge">rqt</code> will see the topics even if there are no matching ROS 1 subscribers.
Run <code class="language-plaintext highlighter-rouge">ros2 run ros1_bridge dynamic_bridge -- --help</code> for more options.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>In order to run the bridge you need to either:</p>

<ul>
  <li>get <a href="https://github.com/ros2/ros2/releases">prebuilt binaries</a> or</li>
  <li>build the bridge as well as the other ROS 2 packages from source.</li>
</ul>

<p>After that you can run both examples described below.</p>

<p>For all examples you need to source the environment of the install space where the bridge was built or unpacked to.
Additionally you will need to either source the ROS 1 environment or at least set the <code class="language-plaintext highlighter-rouge">ROS_MASTER_URI</code> and run a <code class="language-plaintext highlighter-rouge">roscore</code>.</p>

<p>The following ROS 1 packages are required to build and use the bridge:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">catkin</code></li>
  <li><code class="language-plaintext highlighter-rouge">roscpp</code></li>
  <li>
<code class="language-plaintext highlighter-rouge">roslaunch</code> (for <code class="language-plaintext highlighter-rouge">roscore</code> executable)</li>
  <li><code class="language-plaintext highlighter-rouge">rosmsg</code></li>
  <li><code class="language-plaintext highlighter-rouge">std_msgs</code></li>
  <li>as well as the Python package <code class="language-plaintext highlighter-rouge">rospkg</code>
</li>
</ul>

<p>To run the following examples you will also need these ROS 1 packages:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">rosbash</code> (for <code class="language-plaintext highlighter-rouge">rosrun</code> executable)</li>
  <li><code class="language-plaintext highlighter-rouge">roscpp_tutorials</code></li>
  <li><code class="language-plaintext highlighter-rouge">rospy_tutorials</code></li>
  <li><code class="language-plaintext highlighter-rouge">rostopic</code></li>
  <li><code class="language-plaintext highlighter-rouge">rqt_image_view</code></li>
</ul>

<h3 id="prerequisites-for-the-examples-in-this-file">Prerequisites for the examples in this file</h3>

<p>In order to make the examples below portable between versions of ROS, we define two environment variables, <code class="language-plaintext highlighter-rouge">ROS1_INSTALL_PATH</code> and <code class="language-plaintext highlighter-rouge">ROS2_INSTALL_PATH</code>. 
These are defined as the paths to the installation location of their respective ROS versions.</p>

<p>If you installed Noetic in the default location, then the definition of <code class="language-plaintext highlighter-rouge">ROS1_INSTALL_PATH</code> will be <code class="language-plaintext highlighter-rouge">/opt/ros/noetic</code>.</p>

<p>Building the bridge as described below requires you to build all of ROS 2.
We assume that you have downloaded it to <code class="language-plaintext highlighter-rouge">~/ros2_rolling</code>, and that is where you plan on building it.
In this case, <code class="language-plaintext highlighter-rouge">ROS2_INSTALL_PATH</code> will be defined as <code class="language-plaintext highlighter-rouge">~/ros2_rolling/install</code>.</p>

<p>If you’ve chosen to install either or both versions of ROS somewhere else, you will need adjust the definitions below to match your installation paths.</p>

<p>Because these definitions are used continuously throughout this page, it is useful to add the following lines to your shell startup file (<code class="language-plaintext highlighter-rouge">~/.bashrc</code> if you are using <code class="language-plaintext highlighter-rouge">bash</code>, <code class="language-plaintext highlighter-rouge">~/.zshrc</code> if you are using <code class="language-plaintext highlighter-rouge">zsh</code>).
Modify these definitions as appropriate for the versions of ROS that you’re using, and for the shell that you’re using.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">ROS1_INSTALL_PATH</span><span class="o">=</span>/opt/ros/noetic
<span class="nb">export </span><span class="nv">ROS2_INSTALL_PATH</span><span class="o">=</span>~/ros2_rolling/install

</code></pre></div></div>

<p>Note that no trailing ‘/’ character is used in either definition.
If you have problems involving paths, please verify that you have the correct path to the installation location, and that you do not have a trailing ‘/’ in either definition.</p>

<h3 id="building-the-bridge-from-source">Building the bridge from source</h3>

<p>Before continuing you should have the prerequisites for building ROS 2 from source installed following <a href="https://github.com/ros2/ros2/wiki/Installation">these instructions</a>.</p>

<p>In the past, building this package required patches to ROS 1, but in the latest releases that is no longer the case.
If you run into trouble first make sure you have at least version <code class="language-plaintext highlighter-rouge">1.11.16</code> of <code class="language-plaintext highlighter-rouge">ros_comm</code> and <code class="language-plaintext highlighter-rouge">rosbag</code>.</p>

<p>The bridge uses <code class="language-plaintext highlighter-rouge">pkg-config</code> to find ROS 1 packages.
ROS 2 packages are found through CMake using <code class="language-plaintext highlighter-rouge">find_package()</code>.
Therefore the <code class="language-plaintext highlighter-rouge">CMAKE_PREFIX_PATH</code> must not contain paths from ROS 1 which would overlay ROS 2 packages.</p>

<p>Here are the steps for Linux and OSX.</p>

<p>You should first build everything but the ROS 1 bridge with normal colcon arguments.
We don’t recommend having your ROS 1 environment sourced during this step as it can add other libraries to the path.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>colcon build <span class="nt">--symlink-install</span> <span class="nt">--packages-skip</span> ros1_bridge

</code></pre></div></div>

<p>Next you need to source the ROS 1 environment.
If you set the <code class="language-plaintext highlighter-rouge">ROS1_INSTALL_PATH</code> environment variable as described above, then the following will source the correct <code class="language-plaintext highlighter-rouge">setup.bash</code> file.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>

</code></pre></div></div>

<p>The bridge will be built with support for any message/service packages that are on your path and have an associated mapping between ROS 1 and ROS 2.
Therefore you must add any ROS 1 or ROS 2 workspaces that have message/service packages that you want to be bridged to your path before building the bridge.
This can be done by adding explicit dependencies on the message/service packages to the <code class="language-plaintext highlighter-rouge">package.xml</code> of the bridge, so that <code class="language-plaintext highlighter-rouge">colcon</code> will add them to the path before it builds the bridge.
Alternatively you can do it manually by sourcing the relevant workspaces yourself, e.g.:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># You have already sourced your ROS installation.</span>
<span class="c"># Source your ROS 2 installation:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># And if you have a ROS 1 overlay workspace, something like:</span>
<span class="c"># . &lt;install-space-to-ros1-overlay-ws&gt;/setup.bash</span>
<span class="c"># And if you have a ROS 2 overlay workspace, something like:</span>
<span class="c"># . &lt;install-space-to-ros2-overlay-ws&gt;/local_setup.bash</span>

</code></pre></div></div>

<p>Then build just the ROS 1 bridge:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>colcon build <span class="nt">--symlink-install</span> <span class="nt">--packages-select</span> ros1_bridge <span class="nt">--cmake-force-configure</span>

</code></pre></div></div>

<p><em>Note:</em> If you are building on a memory constrained system you might want to limit the number of parallel jobs by setting e.g. the environment variable <code class="language-plaintext highlighter-rouge">MAKEFLAGS=-j1</code>.</p>

<h2 id="example-1-run-the-bridge-and-the-example-talker-and-listener">Example 1: run the bridge and the example talker and listener</h2>

<p>The talker and listener can be either a ROS 1 or a ROS 2 node.
The bridge will pass the message along transparently.</p>

<p><em>Note:</em> When you are running these demos make sure to only source the indicated workspaces.
You will get errors from most tools if they have both workspaces in their environment.</p>

<h3 id="example-1a-ros-1-talker-and-ros-2-listener">Example 1a: ROS 1 talker and ROS 2 listener</h3>

<p>First we start a ROS 1 <code class="language-plaintext highlighter-rouge">roscore</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A (ROS 1 only):</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
roscore

</code></pre></div></div>

<hr>

<p>Then we start the dynamic bridge which will watch the available ROS 1 and ROS 2 topics.
Once a <em>matching</em> topic has been detected it starts to bridge the messages on this topic.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell B (ROS 1 + ROS 2):</span>
<span class="c"># Source ROS 1 first:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
<span class="c"># Source ROS 2 next:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># For example:</span>
<span class="c"># . /opt/ros/dashing/setup.bash</span>
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
ros2 run ros1_bridge dynamic_bridge

</code></pre></div></div>

<p>The program will start outputting the currently available topics in ROS 1 and ROS 2 in a regular interval.</p>

<hr>

<p>Now we start the ROS 1 talker.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell C:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rosrun rospy_tutorials talker

</code></pre></div></div>

<p>The ROS 1 node will start printing the published messages to the console.</p>

<hr>

<p>Now we start the ROS 2 listener from the <code class="language-plaintext highlighter-rouge">demo_nodes_cpp</code> ROS 2 package.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run demo_nodes_cpp listener

</code></pre></div></div>

<p>The ROS 2 node will start printing the received messages to the console.</p>

<p>When looking at the output in <em>shell B</em> there will be a line stating that the bridge for this topic has been created:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>created 1to2 bridge <span class="k">for </span>topic <span class="s1">'/chatter'</span> with ROS 1 <span class="nb">type</span> <span class="s1">'std_msgs/String'</span> and ROS 2 <span class="nb">type</span> <span class="s1">'std_msgs/String'</span>

</code></pre></div></div>

<p>At the end stop all programs with <code class="language-plaintext highlighter-rouge">Ctrl-C</code>.
Once you stop either the talker or the listener in <em>shell B</em> a line will be stating that the bridge has been torn down:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>removed 1to2 bridge <span class="k">for </span>topic <span class="s1">'/chatter'</span>

</code></pre></div></div>

<p>The screenshot shows all the shell windows and their expected content:</p>

<p><img src="https://raw.githubusercontent.com/ros2/ros1_bridge/master/doc/ros1_talker_ros2_listener.png" alt="ROS 1 talker and ROS 2 listener"></p>

<h3 id="example-1b-ros-2-talker-and-ros-1-listener">Example 1b: ROS 2 talker and ROS 1 listener</h3>

<p>The steps are very similar to the previous example and therefore only the commands are described.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
roscore

</code></pre></div></div>

<hr>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell B:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
ros2 run ros1_bridge dynamic_bridge

</code></pre></div></div>

<hr>

<p>Now we start the ROS 2 talker from the <code class="language-plaintext highlighter-rouge">demo_nodes_py</code> ROS 2 package.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell C:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run demo_nodes_py talker

</code></pre></div></div>

<hr>

<p>Now we start the ROS 1 listener.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rosrun roscpp_tutorials listener

</code></pre></div></div>

<h2 id="example-2-run-the-bridge-and-exchange-images">Example 2: run the bridge and exchange images</h2>

<p>The second example will demonstrate the bridge passing along bigger and more complicated messages.
A ROS 2 node is publishing images retrieved from a camera and on the ROS 1 side we use <code class="language-plaintext highlighter-rouge">rqt_image_view</code> to render the images in a GUI.
And a ROS 1 publisher can send a message to toggle an option in the ROS 2 node.</p>

<p>First we start a ROS 1 <code class="language-plaintext highlighter-rouge">roscore</code> and the bridge:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
roscore

</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell B:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/install/setup.bash
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
ros2 run ros1_bridge dynamic_bridge

</code></pre></div></div>

<hr>

<p>Now we start the ROS 1 GUI:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell C:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rqt_image_view /image

</code></pre></div></div>

<hr>

<p>Now we start the ROS 2 image publisher from the <code class="language-plaintext highlighter-rouge">image_tools</code> ROS 2 package:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/install/setup.bash
ros2 run image_tools cam2image

</code></pre></div></div>

<p>You should see the current images in <code class="language-plaintext highlighter-rouge">rqt_image_view</code> which are coming from the ROS 2 node <code class="language-plaintext highlighter-rouge">cam2image</code> and are being passed along by the bridge.</p>

<hr>

<p>To exercise the bridge in the opposite direction at the same time you can publish a message to the ROS 2 node from ROS 1.
By publishing either <code class="language-plaintext highlighter-rouge">true</code> or <code class="language-plaintext highlighter-rouge">false</code> to the <code class="language-plaintext highlighter-rouge">flip_image</code> topic, the camera node will conditionally flip the image before sending it.
You can either use the <code class="language-plaintext highlighter-rouge">Message Publisher</code> plugin in <code class="language-plaintext highlighter-rouge">rqt</code> to publish a <code class="language-plaintext highlighter-rouge">std_msgs/Bool</code> message on the topic <code class="language-plaintext highlighter-rouge">flip_image</code>, or run one of the two following <code class="language-plaintext highlighter-rouge">rostopic</code> commands:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell E:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rostopic pub <span class="nt">-r</span> 1 /flip_image std_msgs/Bool <span class="s2">"{data: true}"</span>
rostopic pub <span class="nt">-r</span> 1 /flip_image std_msgs/Bool <span class="s2">"{data: false}"</span>

</code></pre></div></div>

<p>The screenshot shows all the shell windows and their expected content (it was taken when Indigo was supported - you should use Melodic):</p>

<p><img src="https://raw.githubusercontent.com/ros2/ros1_bridge/master/doc/ros2_camera_ros1_rqt.png" alt="ROS 2 camera and ROS 1 rqt"></p>

<h2 id="example-3-run-the-bridge-for-addtwoints-service">Example 3: run the bridge for AddTwoInts service</h2>

<p>In this example we will bridge a service TwoInts from
<a href="https://github.com/ros/ros_tutorials">ros/roscpp_tutorials</a> and AddTwoInts from
<a href="https://github.com/ros2/examples">ros2/roscpp_examples</a>.</p>

<p>While building, ros1_bridge looks for all installed ROS and ROS2 services.
Found services are matched by comparing package name, service name and fields in a request and a response.
If all names are the same in ROS and ROS2 service, the bridge will be created.
It is also possible to pair services manually by creating a yaml file that will include names of corresponding services.
You can find more information <a href="https://github.com/ros2/ros1_bridge/tree/master/doc/index.rst">here</a>.</p>

<p>So to make this example work, please make sure that the roscpp_tutorials package
is installed on your system and the environment is set up correctly while you build ros1_bridge.</p>

<p>Launch ROS master</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
roscore <span class="nt">-p</span> 11311

</code></pre></div></div>

<p>Launch dynamic_bridge:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell B:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
ros2 run ros1_bridge dynamic_bridge

</code></pre></div></div>

<p>Launch TwoInts server:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell C:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
rosrun roscpp_tutorials add_two_ints_server

</code></pre></div></div>

<p>Launch AddTwoInts client:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run demo_nodes_cpp add_two_ints_client

</code></pre></div></div>

<h2 id="example-4-bridge-only-selected-topics-and-services">Example 4: bridge only selected topics and services</h2>
<p>This example expands on example 3 by selecting a subset of topics and services to be bridged.
This is handy when, for example, you have a system that runs most of it’s stuff in either ROS 1 or ROS 2 but needs a few nodes from the ‘opposite’ version of ROS.
Where the <code class="language-plaintext highlighter-rouge">dynamic_bridge</code> bridges all topics and service, the <code class="language-plaintext highlighter-rouge">parameter_bridge</code> uses the ROS 1 parameter server to choose which topics and services are bridged.
<strong>Note</strong>: The service bridge is <strong>monodirectional</strong>. You must use either <code class="language-plaintext highlighter-rouge">services_2_to_1</code> and/or <code class="language-plaintext highlighter-rouge">services_1_to_2</code> to bridge ROS 2 -&gt; ROS 1 or ROS 1 -&gt; ROS 2 services accordingly.
For example, to bridge only the <code class="language-plaintext highlighter-rouge">/chatter</code> topic bidirectionally, and the <code class="language-plaintext highlighter-rouge">/add_two_ints service</code> from ROS 2 to ROS 1 only, create this configuration file, <code class="language-plaintext highlighter-rouge">bridge.yaml</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">topics</span><span class="pi">:</span>
  <span class="pi">-</span>
    <span class="na">topic</span><span class="pi">:</span> <span class="s">/chatter</span>  <span class="c1"># Topic name on both ROS 1 and ROS 2</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">std_msgs/msg/String</span>  <span class="c1"># Type of topic to bridge</span>
    <span class="na">queue_size</span><span class="pi">:</span> <span class="m">1</span>  <span class="c1"># Queue size</span>
<span class="na">services_2_to_1</span><span class="pi">:</span>
  <span class="pi">-</span>
    <span class="na">service</span><span class="pi">:</span> <span class="s">/add_two_ints</span>  <span class="c1"># ROS 1 service name</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">roscpp_tutorials/TwoInts</span>  <span class="c1"># The ROS 1 service type name</span>

</code></pre></div></div>

<p>Start a ROS 1 roscore:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A (ROS 1 only):</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
roscore

</code></pre></div></div>

<p>Then load the bridge.yaml config file and start the talker to publish on the <code class="language-plaintext highlighter-rouge">/chatter</code> topic:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Shell B: <span class="o">(</span>ROS 1 only<span class="o">)</span>:
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rosparam load bridge.yaml

rosrun rospy_tutorials talker

</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Shell C: <span class="o">(</span>ROS 1 only<span class="o">)</span>:
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>

rosrun roscpp_tutorials add_two_ints_server

</code></pre></div></div>

<p>Then, in a few ROS 2 terminals:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run ros1_bridge parameter_bridge

</code></pre></div></div>

<p>If all is well, the logging shows it is creating bridges for the topic and service and you should be able to call the service and listen to the ROS 1 talker from ROS 2:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell E:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run demo_nodes_cpp listener

</code></pre></div></div>
<p>This should start printing text like <code class="language-plaintext highlighter-rouge">I heard: [hello world ...]</code> with a timestamp.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell F:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 service call /add_two_ints example_interfaces/srv/AddTwoInts <span class="s2">"{a: 1, b: 2}"</span>

</code></pre></div></div>
<p>If all is well, the output should contain <code class="language-plaintext highlighter-rouge">example_interfaces.srv.AddTwoInts_Response(sum=3)</code></p>

<h3 id="parametrizing-quality-of-service">Parametrizing Quality of Service</h3>
<p>An advantage of ROS 2 over ROS 1 is the possibility to define different Quality of Service settings per topic.
The parameter bridge optionally allows for this as well.
For some topics, like <code class="language-plaintext highlighter-rouge">/tf_static</code> this is actually required, as this is a latching topic in ROS 1.
In ROS 2 with the <code class="language-plaintext highlighter-rouge">parameter_bridge</code>, this requires that topic to be configured as such:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">topics</span><span class="pi">:</span>
  <span class="pi">-</span>
    <span class="na">topic</span><span class="pi">:</span> <span class="s">/tf_static</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">tf2_msgs/msg/TFMessage</span>
    <span class="na">queue_size</span><span class="pi">:</span> <span class="m">1</span>
    <span class="na">qos</span><span class="pi">:</span>
      <span class="na">history</span><span class="pi">:</span> <span class="s">keep_all</span>
      <span class="na">durability</span><span class="pi">:</span> <span class="s">transient_local</span>

</code></pre></div></div>

<p>All other QoS options (as documented here in https://docs.ros.org/en/foxy/Concepts/About-Quality-of-Service-Settings.html) are available:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">topics</span><span class="pi">:</span>
  <span class="pi">-</span>
    <span class="na">topic</span><span class="pi">:</span> <span class="s">/some_ros1_topic</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">std_msgs/msg/String</span>
    <span class="na">queue_size</span><span class="pi">:</span> <span class="m">1</span>
    <span class="na">qos</span><span class="pi">:</span>
      <span class="na">history</span><span class="pi">:</span> <span class="s">keep_last</span>  <span class="c1"># OR keep_all, then you can omit `depth` parameter below</span>
      <span class="na">depth</span><span class="pi">:</span> <span class="m">10</span>  <span class="c1"># Only required when history == keep_last</span>
      <span class="na">reliability</span><span class="pi">:</span> <span class="s">reliable</span>  <span class="c1"># OR best_effort</span>
      <span class="na">durability</span><span class="pi">:</span> <span class="s">transient_local</span>  <span class="c1"># OR volatile</span>
      <span class="na">deadline</span><span class="pi">:</span>
          <span class="na">secs</span><span class="pi">:</span> <span class="m">10</span>
          <span class="na">nsecs</span><span class="pi">:</span> <span class="m">2345</span>
      <span class="na">lifespan</span><span class="pi">:</span>
          <span class="na">secs</span><span class="pi">:</span> <span class="m">20</span>
          <span class="na">nsecs</span><span class="pi">:</span> <span class="m">3456</span>
      <span class="na">liveliness</span><span class="pi">:</span> <span class="s">liveliness_system_default</span>  <span class="c1"># Values from https://design.ros2.org/articles/qos_deadline_liveliness_lifespan.html, eg. LIVELINESS_AUTOMATIC</span>
      <span class="na">liveliness_lease_duration</span><span class="pi">:</span>
          <span class="na">secs</span><span class="pi">:</span> <span class="m">40</span>
          <span class="na">nsecs</span><span class="pi">:</span> <span class="m">5678</span>

</code></pre></div></div>

<p>Note that the <code class="language-plaintext highlighter-rouge">qos</code> section can be omitted entirely and options not set are left default.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>

<p>Contributors must sign-off each commit by adding a <code class="language-plaintext highlighter-rouge">Signed-off-by: ...</code>
line to commit messages to certify that they have the right to submit
the code they are contributing to the project according to the
<a href="https://developercertificate.org/">Developer Certificate of Origin (DCO)</a>.</p>
</div>
              <hr id="humble-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="humble-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#humble-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#humble-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#humble-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="humble-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="humble-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="humble-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros1_bridge">ros1_bridge</a> <small>repository</small></h3>
        <span class="label label-default">hacktoberfest</span> 
        
        <a class="label label-primary pkg-label" href="/p/ros1_bridge">ros1_bridge</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-ros1_bridge
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-ros1_bridge" role="menuitem" tabindex="-1" href="/r/ros1_bridge/github-ros2-ros1_bridge" data="github-ros2-ros1_bridge">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-ros1_bridge
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS 2 package that provides bidirectional communication between ROS 1 and ROS 2</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros2/ros1_bridge.git">https://github.com/ros2/ros1_bridge.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-03-31
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">hacktoberfest</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ros1_bridge/#jazzy-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros1_bridge/#jazzy-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros1_bridge/#jazzy-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ros1_bridge">ros1_bridge</a></td>
                    <td>0.10.3</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="bridge-communication-between-ros-1-and-ros-2">Bridge communication between ROS 1 and ROS 2</h1>

<p>This package provides a network bridge which enables the exchange of messages between ROS 1 and ROS 2.</p>

<p>The bridge is currently implemented in C++ as at the time the Python API for ROS 2 had not been developed.
Because of this its support is limited to only the message/service types available at compile time of the bridge.
The bridge provided with the prebuilt ROS 2 binaries includes support for common ROS interfaces (messages/services), such as the interface packages listed in the <a href="https://github.com/ros2/common_interfaces">ros2/common_interfaces repository</a> and <code class="language-plaintext highlighter-rouge">tf2_msgs</code>.
See <a href="https://github.com/ros2/ros1_bridge/tree/master/doc/index.rst">the documentation</a> for more details on how ROS 1 and ROS 2 interfaces are associated with each other.
If you would like to use a bridge with other interfaces (including your own custom types), you will have to build the bridge from source (instructions below), after building and sourcing your custom types in separate ROS 1 and ROS 2 workspaces.
See <a href="https://github.com/ros2/ros1_bridge/tree/master/doc/index.rst">the documentation</a> for an example setup.</p>

<p>For efficiency reasons, topics will only be bridged when matching publisher-subscriber pairs are active for a topic on either side of the bridge.
As a result using <code class="language-plaintext highlighter-rouge">ros2 topic echo &lt;topic-name&gt;</code> doesn’t work but fails with an error message <code class="language-plaintext highlighter-rouge">Could not determine the type for the passed topic</code> if no other subscribers are present since the dynamic bridge hasn’t bridged the topic yet.
As a workaround the topic type can be specified explicitly <code class="language-plaintext highlighter-rouge">ros2 topic echo &lt;topic-name&gt; &lt;topic-type&gt;</code> which triggers the bridging of the topic since the <code class="language-plaintext highlighter-rouge">echo</code> command represents the necessary subscriber.
On the ROS 1 side <code class="language-plaintext highlighter-rouge">rostopic echo</code> doesn’t have an option to specify the topic type explicitly.
Therefore it can’t be used with the dynamic bridge if no other subscribers are present.
As an alternative you can use the <code class="language-plaintext highlighter-rouge">--bridge-all-2to1-topics</code> option to bridge all ROS 2 topics to ROS 1 so that tools such as <code class="language-plaintext highlighter-rouge">rostopic echo</code>, <code class="language-plaintext highlighter-rouge">rostopic list</code> and <code class="language-plaintext highlighter-rouge">rqt</code> will see the topics even if there are no matching ROS 1 subscribers.
Run <code class="language-plaintext highlighter-rouge">ros2 run ros1_bridge dynamic_bridge -- --help</code> for more options.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>In order to run the bridge you need to either:</p>

<ul>
  <li>get <a href="https://github.com/ros2/ros2/releases">prebuilt binaries</a> or</li>
  <li>build the bridge as well as the other ROS 2 packages from source.</li>
</ul>

<p>After that you can run both examples described below.</p>

<p>For all examples you need to source the environment of the install space where the bridge was built or unpacked to.
Additionally you will need to either source the ROS 1 environment or at least set the <code class="language-plaintext highlighter-rouge">ROS_MASTER_URI</code> and run a <code class="language-plaintext highlighter-rouge">roscore</code>.</p>

<p>The following ROS 1 packages are required to build and use the bridge:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">catkin</code></li>
  <li><code class="language-plaintext highlighter-rouge">roscpp</code></li>
  <li>
<code class="language-plaintext highlighter-rouge">roslaunch</code> (for <code class="language-plaintext highlighter-rouge">roscore</code> executable)</li>
  <li><code class="language-plaintext highlighter-rouge">rosmsg</code></li>
  <li><code class="language-plaintext highlighter-rouge">std_msgs</code></li>
  <li>as well as the Python package <code class="language-plaintext highlighter-rouge">rospkg</code>
</li>
</ul>

<p>To run the following examples you will also need these ROS 1 packages:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">rosbash</code> (for <code class="language-plaintext highlighter-rouge">rosrun</code> executable)</li>
  <li><code class="language-plaintext highlighter-rouge">roscpp_tutorials</code></li>
  <li><code class="language-plaintext highlighter-rouge">rospy_tutorials</code></li>
  <li><code class="language-plaintext highlighter-rouge">rostopic</code></li>
  <li><code class="language-plaintext highlighter-rouge">rqt_image_view</code></li>
</ul>

<h3 id="prerequisites-for-the-examples-in-this-file">Prerequisites for the examples in this file</h3>

<p>In order to make the examples below portable between versions of ROS, we define two environment variables, <code class="language-plaintext highlighter-rouge">ROS1_INSTALL_PATH</code> and <code class="language-plaintext highlighter-rouge">ROS2_INSTALL_PATH</code>. 
These are defined as the paths to the installation location of their respective ROS versions.</p>

<p>If you installed Noetic in the default location, then the definition of <code class="language-plaintext highlighter-rouge">ROS1_INSTALL_PATH</code> will be <code class="language-plaintext highlighter-rouge">/opt/ros/noetic</code>.</p>

<p>Building the bridge as described below requires you to build all of ROS 2.
We assume that you have downloaded it to <code class="language-plaintext highlighter-rouge">~/ros2_rolling</code>, and that is where you plan on building it.
In this case, <code class="language-plaintext highlighter-rouge">ROS2_INSTALL_PATH</code> will be defined as <code class="language-plaintext highlighter-rouge">~/ros2_rolling/install</code>.</p>

<p>If you’ve chosen to install either or both versions of ROS somewhere else, you will need adjust the definitions below to match your installation paths.</p>

<p>Because these definitions are used continuously throughout this page, it is useful to add the following lines to your shell startup file (<code class="language-plaintext highlighter-rouge">~/.bashrc</code> if you are using <code class="language-plaintext highlighter-rouge">bash</code>, <code class="language-plaintext highlighter-rouge">~/.zshrc</code> if you are using <code class="language-plaintext highlighter-rouge">zsh</code>).
Modify these definitions as appropriate for the versions of ROS that you’re using, and for the shell that you’re using.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">ROS1_INSTALL_PATH</span><span class="o">=</span>/opt/ros/noetic
<span class="nb">export </span><span class="nv">ROS2_INSTALL_PATH</span><span class="o">=</span>~/ros2_rolling/install

</code></pre></div></div>

<p>Note that no trailing ‘/’ character is used in either definition.
If you have problems involving paths, please verify that you have the correct path to the installation location, and that you do not have a trailing ‘/’ in either definition.</p>

<h3 id="building-the-bridge-from-source">Building the bridge from source</h3>

<p>Before continuing you should have the prerequisites for building ROS 2 from source installed following <a href="https://github.com/ros2/ros2/wiki/Installation">these instructions</a>.</p>

<p>In the past, building this package required patches to ROS 1, but in the latest releases that is no longer the case.
If you run into trouble first make sure you have at least version <code class="language-plaintext highlighter-rouge">1.11.16</code> of <code class="language-plaintext highlighter-rouge">ros_comm</code> and <code class="language-plaintext highlighter-rouge">rosbag</code>.</p>

<p>The bridge uses <code class="language-plaintext highlighter-rouge">pkg-config</code> to find ROS 1 packages.
ROS 2 packages are found through CMake using <code class="language-plaintext highlighter-rouge">find_package()</code>.
Therefore the <code class="language-plaintext highlighter-rouge">CMAKE_PREFIX_PATH</code> must not contain paths from ROS 1 which would overlay ROS 2 packages.</p>

<p>Here are the steps for Linux and OSX.</p>

<p>You should first build everything but the ROS 1 bridge with normal colcon arguments.
We don’t recommend having your ROS 1 environment sourced during this step as it can add other libraries to the path.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>colcon build <span class="nt">--symlink-install</span> <span class="nt">--packages-skip</span> ros1_bridge

</code></pre></div></div>

<p>Next you need to source the ROS 1 environment.
If you set the <code class="language-plaintext highlighter-rouge">ROS1_INSTALL_PATH</code> environment variable as described above, then the following will source the correct <code class="language-plaintext highlighter-rouge">setup.bash</code> file.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>

</code></pre></div></div>

<p>The bridge will be built with support for any message/service packages that are on your path and have an associated mapping between ROS 1 and ROS 2.
Therefore you must add any ROS 1 or ROS 2 workspaces that have message/service packages that you want to be bridged to your path before building the bridge.
This can be done by adding explicit dependencies on the message/service packages to the <code class="language-plaintext highlighter-rouge">package.xml</code> of the bridge, so that <code class="language-plaintext highlighter-rouge">colcon</code> will add them to the path before it builds the bridge.
Alternatively you can do it manually by sourcing the relevant workspaces yourself, e.g.:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># You have already sourced your ROS installation.</span>
<span class="c"># Source your ROS 2 installation:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># And if you have a ROS 1 overlay workspace, something like:</span>
<span class="c"># . &lt;install-space-to-ros1-overlay-ws&gt;/setup.bash</span>
<span class="c"># And if you have a ROS 2 overlay workspace, something like:</span>
<span class="c"># . &lt;install-space-to-ros2-overlay-ws&gt;/local_setup.bash</span>

</code></pre></div></div>

<p>Then build just the ROS 1 bridge:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>colcon build <span class="nt">--symlink-install</span> <span class="nt">--packages-select</span> ros1_bridge <span class="nt">--cmake-force-configure</span>

</code></pre></div></div>

<p><em>Note:</em> If you are building on a memory constrained system you might want to limit the number of parallel jobs by setting e.g. the environment variable <code class="language-plaintext highlighter-rouge">MAKEFLAGS=-j1</code>.</p>

<h2 id="example-1-run-the-bridge-and-the-example-talker-and-listener">Example 1: run the bridge and the example talker and listener</h2>

<p>The talker and listener can be either a ROS 1 or a ROS 2 node.
The bridge will pass the message along transparently.</p>

<p><em>Note:</em> When you are running these demos make sure to only source the indicated workspaces.
You will get errors from most tools if they have both workspaces in their environment.</p>

<h3 id="example-1a-ros-1-talker-and-ros-2-listener">Example 1a: ROS 1 talker and ROS 2 listener</h3>

<p>First we start a ROS 1 <code class="language-plaintext highlighter-rouge">roscore</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A (ROS 1 only):</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
roscore

</code></pre></div></div>

<hr>

<p>Then we start the dynamic bridge which will watch the available ROS 1 and ROS 2 topics.
Once a <em>matching</em> topic has been detected it starts to bridge the messages on this topic.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell B (ROS 1 + ROS 2):</span>
<span class="c"># Source ROS 1 first:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
<span class="c"># Source ROS 2 next:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># For example:</span>
<span class="c"># . /opt/ros/dashing/setup.bash</span>
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
ros2 run ros1_bridge dynamic_bridge

</code></pre></div></div>

<p>The program will start outputting the currently available topics in ROS 1 and ROS 2 in a regular interval.</p>

<hr>

<p>Now we start the ROS 1 talker.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell C:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rosrun rospy_tutorials talker

</code></pre></div></div>

<p>The ROS 1 node will start printing the published messages to the console.</p>

<hr>

<p>Now we start the ROS 2 listener from the <code class="language-plaintext highlighter-rouge">demo_nodes_cpp</code> ROS 2 package.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run demo_nodes_cpp listener

</code></pre></div></div>

<p>The ROS 2 node will start printing the received messages to the console.</p>

<p>When looking at the output in <em>shell B</em> there will be a line stating that the bridge for this topic has been created:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>created 1to2 bridge <span class="k">for </span>topic <span class="s1">'/chatter'</span> with ROS 1 <span class="nb">type</span> <span class="s1">'std_msgs/String'</span> and ROS 2 <span class="nb">type</span> <span class="s1">'std_msgs/String'</span>

</code></pre></div></div>

<p>At the end stop all programs with <code class="language-plaintext highlighter-rouge">Ctrl-C</code>.
Once you stop either the talker or the listener in <em>shell B</em> a line will be stating that the bridge has been torn down:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>removed 1to2 bridge <span class="k">for </span>topic <span class="s1">'/chatter'</span>

</code></pre></div></div>

<p>The screenshot shows all the shell windows and their expected content:</p>

<p><img src="https://raw.githubusercontent.com/ros2/ros1_bridge/master/doc/ros1_talker_ros2_listener.png" alt="ROS 1 talker and ROS 2 listener"></p>

<h3 id="example-1b-ros-2-talker-and-ros-1-listener">Example 1b: ROS 2 talker and ROS 1 listener</h3>

<p>The steps are very similar to the previous example and therefore only the commands are described.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
roscore

</code></pre></div></div>

<hr>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell B:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
ros2 run ros1_bridge dynamic_bridge

</code></pre></div></div>

<hr>

<p>Now we start the ROS 2 talker from the <code class="language-plaintext highlighter-rouge">demo_nodes_py</code> ROS 2 package.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell C:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run demo_nodes_py talker

</code></pre></div></div>

<hr>

<p>Now we start the ROS 1 listener.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rosrun roscpp_tutorials listener

</code></pre></div></div>

<h2 id="example-2-run-the-bridge-and-exchange-images">Example 2: run the bridge and exchange images</h2>

<p>The second example will demonstrate the bridge passing along bigger and more complicated messages.
A ROS 2 node is publishing images retrieved from a camera and on the ROS 1 side we use <code class="language-plaintext highlighter-rouge">rqt_image_view</code> to render the images in a GUI.
And a ROS 1 publisher can send a message to toggle an option in the ROS 2 node.</p>

<p>First we start a ROS 1 <code class="language-plaintext highlighter-rouge">roscore</code> and the bridge:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
roscore

</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell B:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/install/setup.bash
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
ros2 run ros1_bridge dynamic_bridge

</code></pre></div></div>

<hr>

<p>Now we start the ROS 1 GUI:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell C:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rqt_image_view /image

</code></pre></div></div>

<hr>

<p>Now we start the ROS 2 image publisher from the <code class="language-plaintext highlighter-rouge">image_tools</code> ROS 2 package:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/install/setup.bash
ros2 run image_tools cam2image

</code></pre></div></div>

<p>You should see the current images in <code class="language-plaintext highlighter-rouge">rqt_image_view</code> which are coming from the ROS 2 node <code class="language-plaintext highlighter-rouge">cam2image</code> and are being passed along by the bridge.</p>

<hr>

<p>To exercise the bridge in the opposite direction at the same time you can publish a message to the ROS 2 node from ROS 1.
By publishing either <code class="language-plaintext highlighter-rouge">true</code> or <code class="language-plaintext highlighter-rouge">false</code> to the <code class="language-plaintext highlighter-rouge">flip_image</code> topic, the camera node will conditionally flip the image before sending it.
You can either use the <code class="language-plaintext highlighter-rouge">Message Publisher</code> plugin in <code class="language-plaintext highlighter-rouge">rqt</code> to publish a <code class="language-plaintext highlighter-rouge">std_msgs/Bool</code> message on the topic <code class="language-plaintext highlighter-rouge">flip_image</code>, or run one of the two following <code class="language-plaintext highlighter-rouge">rostopic</code> commands:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell E:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rostopic pub <span class="nt">-r</span> 1 /flip_image std_msgs/Bool <span class="s2">"{data: true}"</span>
rostopic pub <span class="nt">-r</span> 1 /flip_image std_msgs/Bool <span class="s2">"{data: false}"</span>

</code></pre></div></div>

<p>The screenshot shows all the shell windows and their expected content (it was taken when Indigo was supported - you should use Melodic):</p>

<p><img src="https://raw.githubusercontent.com/ros2/ros1_bridge/master/doc/ros2_camera_ros1_rqt.png" alt="ROS 2 camera and ROS 1 rqt"></p>

<h2 id="example-3-run-the-bridge-for-addtwoints-service">Example 3: run the bridge for AddTwoInts service</h2>

<p>In this example we will bridge a service TwoInts from
<a href="https://github.com/ros/ros_tutorials">ros/roscpp_tutorials</a> and AddTwoInts from
<a href="https://github.com/ros2/examples">ros2/roscpp_examples</a>.</p>

<p>While building, ros1_bridge looks for all installed ROS and ROS2 services.
Found services are matched by comparing package name, service name and fields in a request and a response.
If all names are the same in ROS and ROS2 service, the bridge will be created.
It is also possible to pair services manually by creating a yaml file that will include names of corresponding services.
You can find more information <a href="https://github.com/ros2/ros1_bridge/tree/master/doc/index.rst">here</a>.</p>

<p>So to make this example work, please make sure that the roscpp_tutorials package
is installed on your system and the environment is set up correctly while you build ros1_bridge.</p>

<p>Launch ROS master</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
roscore <span class="nt">-p</span> 11311

</code></pre></div></div>

<p>Launch dynamic_bridge:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell B:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
ros2 run ros1_bridge dynamic_bridge

</code></pre></div></div>

<p>Launch TwoInts server:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell C:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
rosrun roscpp_tutorials add_two_ints_server

</code></pre></div></div>

<p>Launch AddTwoInts client:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run demo_nodes_cpp add_two_ints_client

</code></pre></div></div>

<h2 id="example-4-bridge-only-selected-topics-and-services">Example 4: bridge only selected topics and services</h2>
<p>This example expands on example 3 by selecting a subset of topics and services to be bridged.
This is handy when, for example, you have a system that runs most of it’s stuff in either ROS 1 or ROS 2 but needs a few nodes from the ‘opposite’ version of ROS.
Where the <code class="language-plaintext highlighter-rouge">dynamic_bridge</code> bridges all topics and service, the <code class="language-plaintext highlighter-rouge">parameter_bridge</code> uses the ROS 1 parameter server to choose which topics and services are bridged.
<strong>Note</strong>: The service bridge is <strong>monodirectional</strong>. You must use either <code class="language-plaintext highlighter-rouge">services_2_to_1</code> and/or <code class="language-plaintext highlighter-rouge">services_1_to_2</code> to bridge ROS 2 -&gt; ROS 1 or ROS 1 -&gt; ROS 2 services accordingly.
For example, to bridge only the <code class="language-plaintext highlighter-rouge">/chatter</code> topic bidirectionally, and the <code class="language-plaintext highlighter-rouge">/add_two_ints service</code> from ROS 2 to ROS 1 only, create this configuration file, <code class="language-plaintext highlighter-rouge">bridge.yaml</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">topics</span><span class="pi">:</span>
  <span class="pi">-</span>
    <span class="na">topic</span><span class="pi">:</span> <span class="s">/chatter</span>  <span class="c1"># Topic name on both ROS 1 and ROS 2</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">std_msgs/msg/String</span>  <span class="c1"># Type of topic to bridge</span>
    <span class="na">queue_size</span><span class="pi">:</span> <span class="m">1</span>  <span class="c1"># Queue size</span>
<span class="na">services_2_to_1</span><span class="pi">:</span>
  <span class="pi">-</span>
    <span class="na">service</span><span class="pi">:</span> <span class="s">/add_two_ints</span>  <span class="c1"># ROS 1 service name</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">roscpp_tutorials/TwoInts</span>  <span class="c1"># The ROS 1 service type name</span>

</code></pre></div></div>

<p>Start a ROS 1 roscore:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A (ROS 1 only):</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
roscore

</code></pre></div></div>

<p>Then load the bridge.yaml config file and start the talker to publish on the <code class="language-plaintext highlighter-rouge">/chatter</code> topic:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Shell B: <span class="o">(</span>ROS 1 only<span class="o">)</span>:
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rosparam load bridge.yaml

rosrun rospy_tutorials talker

</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Shell C: <span class="o">(</span>ROS 1 only<span class="o">)</span>:
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>

rosrun roscpp_tutorials add_two_ints_server

</code></pre></div></div>

<p>Then, in a few ROS 2 terminals:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run ros1_bridge parameter_bridge

</code></pre></div></div>

<p>If all is well, the logging shows it is creating bridges for the topic and service and you should be able to call the service and listen to the ROS 1 talker from ROS 2:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell E:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run demo_nodes_cpp listener

</code></pre></div></div>
<p>This should start printing text like <code class="language-plaintext highlighter-rouge">I heard: [hello world ...]</code> with a timestamp.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell F:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 service call /add_two_ints example_interfaces/srv/AddTwoInts <span class="s2">"{a: 1, b: 2}"</span>

</code></pre></div></div>
<p>If all is well, the output should contain <code class="language-plaintext highlighter-rouge">example_interfaces.srv.AddTwoInts_Response(sum=3)</code></p>

<h3 id="parametrizing-quality-of-service">Parametrizing Quality of Service</h3>
<p>An advantage of ROS 2 over ROS 1 is the possibility to define different Quality of Service settings per topic.
The parameter bridge optionally allows for this as well.
For some topics, like <code class="language-plaintext highlighter-rouge">/tf_static</code> this is actually required, as this is a latching topic in ROS 1.
In ROS 2 with the <code class="language-plaintext highlighter-rouge">parameter_bridge</code>, this requires that topic to be configured as such:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">topics</span><span class="pi">:</span>
  <span class="pi">-</span>
    <span class="na">topic</span><span class="pi">:</span> <span class="s">/tf_static</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">tf2_msgs/msg/TFMessage</span>
    <span class="na">queue_size</span><span class="pi">:</span> <span class="m">1</span>
    <span class="na">qos</span><span class="pi">:</span>
      <span class="na">history</span><span class="pi">:</span> <span class="s">keep_all</span>
      <span class="na">durability</span><span class="pi">:</span> <span class="s">transient_local</span>

</code></pre></div></div>

<p>All other QoS options (as documented here in https://docs.ros.org/en/foxy/Concepts/About-Quality-of-Service-Settings.html) are available:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">topics</span><span class="pi">:</span>
  <span class="pi">-</span>
    <span class="na">topic</span><span class="pi">:</span> <span class="s">/some_ros1_topic</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">std_msgs/msg/String</span>
    <span class="na">queue_size</span><span class="pi">:</span> <span class="m">1</span>
    <span class="na">qos</span><span class="pi">:</span>
      <span class="na">history</span><span class="pi">:</span> <span class="s">keep_last</span>  <span class="c1"># OR keep_all, then you can omit `depth` parameter below</span>
      <span class="na">depth</span><span class="pi">:</span> <span class="m">10</span>  <span class="c1"># Only required when history == keep_last</span>
      <span class="na">reliability</span><span class="pi">:</span> <span class="s">reliable</span>  <span class="c1"># OR best_effort</span>
      <span class="na">durability</span><span class="pi">:</span> <span class="s">transient_local</span>  <span class="c1"># OR volatile</span>
      <span class="na">deadline</span><span class="pi">:</span>
          <span class="na">secs</span><span class="pi">:</span> <span class="m">10</span>
          <span class="na">nsecs</span><span class="pi">:</span> <span class="m">2345</span>
      <span class="na">lifespan</span><span class="pi">:</span>
          <span class="na">secs</span><span class="pi">:</span> <span class="m">20</span>
          <span class="na">nsecs</span><span class="pi">:</span> <span class="m">3456</span>
      <span class="na">liveliness</span><span class="pi">:</span> <span class="s">liveliness_system_default</span>  <span class="c1"># Values from https://design.ros2.org/articles/qos_deadline_liveliness_lifespan.html, eg. LIVELINESS_AUTOMATIC</span>
      <span class="na">liveliness_lease_duration</span><span class="pi">:</span>
          <span class="na">secs</span><span class="pi">:</span> <span class="m">40</span>
          <span class="na">nsecs</span><span class="pi">:</span> <span class="m">5678</span>

</code></pre></div></div>

<p>Note that the <code class="language-plaintext highlighter-rouge">qos</code> section can be omitted entirely and options not set are left default.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>

<p>Contributors must sign-off each commit by adding a <code class="language-plaintext highlighter-rouge">Signed-off-by: ...</code>
line to commit messages to certify that they have the right to submit
the code they are contributing to the project according to the
<a href="https://developercertificate.org/">Developer Certificate of Origin (DCO)</a>.</p>
</div>
              <hr id="jazzy-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="jazzy-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#jazzy-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#jazzy-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#jazzy-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="jazzy-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="jazzy-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="jazzy-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros1_bridge">ros1_bridge</a> <small>repository</small></h3>
        <span class="label label-default">hacktoberfest</span> 
        
        <a class="label label-primary pkg-label" href="/p/ros1_bridge">ros1_bridge</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-ros1_bridge
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-ros1_bridge" role="menuitem" tabindex="-1" href="/r/ros1_bridge/github-ros2-ros1_bridge" data="github-ros2-ros1_bridge">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-ros1_bridge
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS 2 package that provides bidirectional communication between ROS 1 and ROS 2</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros2/ros1_bridge.git">https://github.com/ros2/ros1_bridge.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-03-31
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">hacktoberfest</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ros1_bridge/#kilted-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros1_bridge/#kilted-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros1_bridge/#kilted-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ros1_bridge">ros1_bridge</a></td>
                    <td>0.10.3</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="bridge-communication-between-ros-1-and-ros-2">Bridge communication between ROS 1 and ROS 2</h1>

<p>This package provides a network bridge which enables the exchange of messages between ROS 1 and ROS 2.</p>

<p>The bridge is currently implemented in C++ as at the time the Python API for ROS 2 had not been developed.
Because of this its support is limited to only the message/service types available at compile time of the bridge.
The bridge provided with the prebuilt ROS 2 binaries includes support for common ROS interfaces (messages/services), such as the interface packages listed in the <a href="https://github.com/ros2/common_interfaces">ros2/common_interfaces repository</a> and <code class="language-plaintext highlighter-rouge">tf2_msgs</code>.
See <a href="https://github.com/ros2/ros1_bridge/tree/master/doc/index.rst">the documentation</a> for more details on how ROS 1 and ROS 2 interfaces are associated with each other.
If you would like to use a bridge with other interfaces (including your own custom types), you will have to build the bridge from source (instructions below), after building and sourcing your custom types in separate ROS 1 and ROS 2 workspaces.
See <a href="https://github.com/ros2/ros1_bridge/tree/master/doc/index.rst">the documentation</a> for an example setup.</p>

<p>For efficiency reasons, topics will only be bridged when matching publisher-subscriber pairs are active for a topic on either side of the bridge.
As a result using <code class="language-plaintext highlighter-rouge">ros2 topic echo &lt;topic-name&gt;</code> doesn’t work but fails with an error message <code class="language-plaintext highlighter-rouge">Could not determine the type for the passed topic</code> if no other subscribers are present since the dynamic bridge hasn’t bridged the topic yet.
As a workaround the topic type can be specified explicitly <code class="language-plaintext highlighter-rouge">ros2 topic echo &lt;topic-name&gt; &lt;topic-type&gt;</code> which triggers the bridging of the topic since the <code class="language-plaintext highlighter-rouge">echo</code> command represents the necessary subscriber.
On the ROS 1 side <code class="language-plaintext highlighter-rouge">rostopic echo</code> doesn’t have an option to specify the topic type explicitly.
Therefore it can’t be used with the dynamic bridge if no other subscribers are present.
As an alternative you can use the <code class="language-plaintext highlighter-rouge">--bridge-all-2to1-topics</code> option to bridge all ROS 2 topics to ROS 1 so that tools such as <code class="language-plaintext highlighter-rouge">rostopic echo</code>, <code class="language-plaintext highlighter-rouge">rostopic list</code> and <code class="language-plaintext highlighter-rouge">rqt</code> will see the topics even if there are no matching ROS 1 subscribers.
Run <code class="language-plaintext highlighter-rouge">ros2 run ros1_bridge dynamic_bridge -- --help</code> for more options.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>In order to run the bridge you need to either:</p>

<ul>
  <li>get <a href="https://github.com/ros2/ros2/releases">prebuilt binaries</a> or</li>
  <li>build the bridge as well as the other ROS 2 packages from source.</li>
</ul>

<p>After that you can run both examples described below.</p>

<p>For all examples you need to source the environment of the install space where the bridge was built or unpacked to.
Additionally you will need to either source the ROS 1 environment or at least set the <code class="language-plaintext highlighter-rouge">ROS_MASTER_URI</code> and run a <code class="language-plaintext highlighter-rouge">roscore</code>.</p>

<p>The following ROS 1 packages are required to build and use the bridge:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">catkin</code></li>
  <li><code class="language-plaintext highlighter-rouge">roscpp</code></li>
  <li>
<code class="language-plaintext highlighter-rouge">roslaunch</code> (for <code class="language-plaintext highlighter-rouge">roscore</code> executable)</li>
  <li><code class="language-plaintext highlighter-rouge">rosmsg</code></li>
  <li><code class="language-plaintext highlighter-rouge">std_msgs</code></li>
  <li>as well as the Python package <code class="language-plaintext highlighter-rouge">rospkg</code>
</li>
</ul>

<p>To run the following examples you will also need these ROS 1 packages:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">rosbash</code> (for <code class="language-plaintext highlighter-rouge">rosrun</code> executable)</li>
  <li><code class="language-plaintext highlighter-rouge">roscpp_tutorials</code></li>
  <li><code class="language-plaintext highlighter-rouge">rospy_tutorials</code></li>
  <li><code class="language-plaintext highlighter-rouge">rostopic</code></li>
  <li><code class="language-plaintext highlighter-rouge">rqt_image_view</code></li>
</ul>

<h3 id="prerequisites-for-the-examples-in-this-file">Prerequisites for the examples in this file</h3>

<p>In order to make the examples below portable between versions of ROS, we define two environment variables, <code class="language-plaintext highlighter-rouge">ROS1_INSTALL_PATH</code> and <code class="language-plaintext highlighter-rouge">ROS2_INSTALL_PATH</code>. 
These are defined as the paths to the installation location of their respective ROS versions.</p>

<p>If you installed Noetic in the default location, then the definition of <code class="language-plaintext highlighter-rouge">ROS1_INSTALL_PATH</code> will be <code class="language-plaintext highlighter-rouge">/opt/ros/noetic</code>.</p>

<p>Building the bridge as described below requires you to build all of ROS 2.
We assume that you have downloaded it to <code class="language-plaintext highlighter-rouge">~/ros2_rolling</code>, and that is where you plan on building it.
In this case, <code class="language-plaintext highlighter-rouge">ROS2_INSTALL_PATH</code> will be defined as <code class="language-plaintext highlighter-rouge">~/ros2_rolling/install</code>.</p>

<p>If you’ve chosen to install either or both versions of ROS somewhere else, you will need adjust the definitions below to match your installation paths.</p>

<p>Because these definitions are used continuously throughout this page, it is useful to add the following lines to your shell startup file (<code class="language-plaintext highlighter-rouge">~/.bashrc</code> if you are using <code class="language-plaintext highlighter-rouge">bash</code>, <code class="language-plaintext highlighter-rouge">~/.zshrc</code> if you are using <code class="language-plaintext highlighter-rouge">zsh</code>).
Modify these definitions as appropriate for the versions of ROS that you’re using, and for the shell that you’re using.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">ROS1_INSTALL_PATH</span><span class="o">=</span>/opt/ros/noetic
<span class="nb">export </span><span class="nv">ROS2_INSTALL_PATH</span><span class="o">=</span>~/ros2_rolling/install

</code></pre></div></div>

<p>Note that no trailing ‘/’ character is used in either definition.
If you have problems involving paths, please verify that you have the correct path to the installation location, and that you do not have a trailing ‘/’ in either definition.</p>

<h3 id="building-the-bridge-from-source">Building the bridge from source</h3>

<p>Before continuing you should have the prerequisites for building ROS 2 from source installed following <a href="https://github.com/ros2/ros2/wiki/Installation">these instructions</a>.</p>

<p>In the past, building this package required patches to ROS 1, but in the latest releases that is no longer the case.
If you run into trouble first make sure you have at least version <code class="language-plaintext highlighter-rouge">1.11.16</code> of <code class="language-plaintext highlighter-rouge">ros_comm</code> and <code class="language-plaintext highlighter-rouge">rosbag</code>.</p>

<p>The bridge uses <code class="language-plaintext highlighter-rouge">pkg-config</code> to find ROS 1 packages.
ROS 2 packages are found through CMake using <code class="language-plaintext highlighter-rouge">find_package()</code>.
Therefore the <code class="language-plaintext highlighter-rouge">CMAKE_PREFIX_PATH</code> must not contain paths from ROS 1 which would overlay ROS 2 packages.</p>

<p>Here are the steps for Linux and OSX.</p>

<p>You should first build everything but the ROS 1 bridge with normal colcon arguments.
We don’t recommend having your ROS 1 environment sourced during this step as it can add other libraries to the path.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>colcon build <span class="nt">--symlink-install</span> <span class="nt">--packages-skip</span> ros1_bridge

</code></pre></div></div>

<p>Next you need to source the ROS 1 environment.
If you set the <code class="language-plaintext highlighter-rouge">ROS1_INSTALL_PATH</code> environment variable as described above, then the following will source the correct <code class="language-plaintext highlighter-rouge">setup.bash</code> file.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>

</code></pre></div></div>

<p>The bridge will be built with support for any message/service packages that are on your path and have an associated mapping between ROS 1 and ROS 2.
Therefore you must add any ROS 1 or ROS 2 workspaces that have message/service packages that you want to be bridged to your path before building the bridge.
This can be done by adding explicit dependencies on the message/service packages to the <code class="language-plaintext highlighter-rouge">package.xml</code> of the bridge, so that <code class="language-plaintext highlighter-rouge">colcon</code> will add them to the path before it builds the bridge.
Alternatively you can do it manually by sourcing the relevant workspaces yourself, e.g.:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># You have already sourced your ROS installation.</span>
<span class="c"># Source your ROS 2 installation:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># And if you have a ROS 1 overlay workspace, something like:</span>
<span class="c"># . &lt;install-space-to-ros1-overlay-ws&gt;/setup.bash</span>
<span class="c"># And if you have a ROS 2 overlay workspace, something like:</span>
<span class="c"># . &lt;install-space-to-ros2-overlay-ws&gt;/local_setup.bash</span>

</code></pre></div></div>

<p>Then build just the ROS 1 bridge:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>colcon build <span class="nt">--symlink-install</span> <span class="nt">--packages-select</span> ros1_bridge <span class="nt">--cmake-force-configure</span>

</code></pre></div></div>

<p><em>Note:</em> If you are building on a memory constrained system you might want to limit the number of parallel jobs by setting e.g. the environment variable <code class="language-plaintext highlighter-rouge">MAKEFLAGS=-j1</code>.</p>

<h2 id="example-1-run-the-bridge-and-the-example-talker-and-listener">Example 1: run the bridge and the example talker and listener</h2>

<p>The talker and listener can be either a ROS 1 or a ROS 2 node.
The bridge will pass the message along transparently.</p>

<p><em>Note:</em> When you are running these demos make sure to only source the indicated workspaces.
You will get errors from most tools if they have both workspaces in their environment.</p>

<h3 id="example-1a-ros-1-talker-and-ros-2-listener">Example 1a: ROS 1 talker and ROS 2 listener</h3>

<p>First we start a ROS 1 <code class="language-plaintext highlighter-rouge">roscore</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A (ROS 1 only):</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
roscore

</code></pre></div></div>

<hr>

<p>Then we start the dynamic bridge which will watch the available ROS 1 and ROS 2 topics.
Once a <em>matching</em> topic has been detected it starts to bridge the messages on this topic.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell B (ROS 1 + ROS 2):</span>
<span class="c"># Source ROS 1 first:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
<span class="c"># Source ROS 2 next:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># For example:</span>
<span class="c"># . /opt/ros/dashing/setup.bash</span>
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
ros2 run ros1_bridge dynamic_bridge

</code></pre></div></div>

<p>The program will start outputting the currently available topics in ROS 1 and ROS 2 in a regular interval.</p>

<hr>

<p>Now we start the ROS 1 talker.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell C:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rosrun rospy_tutorials talker

</code></pre></div></div>

<p>The ROS 1 node will start printing the published messages to the console.</p>

<hr>

<p>Now we start the ROS 2 listener from the <code class="language-plaintext highlighter-rouge">demo_nodes_cpp</code> ROS 2 package.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run demo_nodes_cpp listener

</code></pre></div></div>

<p>The ROS 2 node will start printing the received messages to the console.</p>

<p>When looking at the output in <em>shell B</em> there will be a line stating that the bridge for this topic has been created:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>created 1to2 bridge <span class="k">for </span>topic <span class="s1">'/chatter'</span> with ROS 1 <span class="nb">type</span> <span class="s1">'std_msgs/String'</span> and ROS 2 <span class="nb">type</span> <span class="s1">'std_msgs/String'</span>

</code></pre></div></div>

<p>At the end stop all programs with <code class="language-plaintext highlighter-rouge">Ctrl-C</code>.
Once you stop either the talker or the listener in <em>shell B</em> a line will be stating that the bridge has been torn down:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>removed 1to2 bridge <span class="k">for </span>topic <span class="s1">'/chatter'</span>

</code></pre></div></div>

<p>The screenshot shows all the shell windows and their expected content:</p>

<p><img src="https://raw.githubusercontent.com/ros2/ros1_bridge/master/doc/ros1_talker_ros2_listener.png" alt="ROS 1 talker and ROS 2 listener"></p>

<h3 id="example-1b-ros-2-talker-and-ros-1-listener">Example 1b: ROS 2 talker and ROS 1 listener</h3>

<p>The steps are very similar to the previous example and therefore only the commands are described.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
roscore

</code></pre></div></div>

<hr>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell B:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
ros2 run ros1_bridge dynamic_bridge

</code></pre></div></div>

<hr>

<p>Now we start the ROS 2 talker from the <code class="language-plaintext highlighter-rouge">demo_nodes_py</code> ROS 2 package.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell C:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run demo_nodes_py talker

</code></pre></div></div>

<hr>

<p>Now we start the ROS 1 listener.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rosrun roscpp_tutorials listener

</code></pre></div></div>

<h2 id="example-2-run-the-bridge-and-exchange-images">Example 2: run the bridge and exchange images</h2>

<p>The second example will demonstrate the bridge passing along bigger and more complicated messages.
A ROS 2 node is publishing images retrieved from a camera and on the ROS 1 side we use <code class="language-plaintext highlighter-rouge">rqt_image_view</code> to render the images in a GUI.
And a ROS 1 publisher can send a message to toggle an option in the ROS 2 node.</p>

<p>First we start a ROS 1 <code class="language-plaintext highlighter-rouge">roscore</code> and the bridge:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
roscore

</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell B:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/install/setup.bash
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
ros2 run ros1_bridge dynamic_bridge

</code></pre></div></div>

<hr>

<p>Now we start the ROS 1 GUI:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell C:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rqt_image_view /image

</code></pre></div></div>

<hr>

<p>Now we start the ROS 2 image publisher from the <code class="language-plaintext highlighter-rouge">image_tools</code> ROS 2 package:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/install/setup.bash
ros2 run image_tools cam2image

</code></pre></div></div>

<p>You should see the current images in <code class="language-plaintext highlighter-rouge">rqt_image_view</code> which are coming from the ROS 2 node <code class="language-plaintext highlighter-rouge">cam2image</code> and are being passed along by the bridge.</p>

<hr>

<p>To exercise the bridge in the opposite direction at the same time you can publish a message to the ROS 2 node from ROS 1.
By publishing either <code class="language-plaintext highlighter-rouge">true</code> or <code class="language-plaintext highlighter-rouge">false</code> to the <code class="language-plaintext highlighter-rouge">flip_image</code> topic, the camera node will conditionally flip the image before sending it.
You can either use the <code class="language-plaintext highlighter-rouge">Message Publisher</code> plugin in <code class="language-plaintext highlighter-rouge">rqt</code> to publish a <code class="language-plaintext highlighter-rouge">std_msgs/Bool</code> message on the topic <code class="language-plaintext highlighter-rouge">flip_image</code>, or run one of the two following <code class="language-plaintext highlighter-rouge">rostopic</code> commands:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell E:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rostopic pub <span class="nt">-r</span> 1 /flip_image std_msgs/Bool <span class="s2">"{data: true}"</span>
rostopic pub <span class="nt">-r</span> 1 /flip_image std_msgs/Bool <span class="s2">"{data: false}"</span>

</code></pre></div></div>

<p>The screenshot shows all the shell windows and their expected content (it was taken when Indigo was supported - you should use Melodic):</p>

<p><img src="https://raw.githubusercontent.com/ros2/ros1_bridge/master/doc/ros2_camera_ros1_rqt.png" alt="ROS 2 camera and ROS 1 rqt"></p>

<h2 id="example-3-run-the-bridge-for-addtwoints-service">Example 3: run the bridge for AddTwoInts service</h2>

<p>In this example we will bridge a service TwoInts from
<a href="https://github.com/ros/ros_tutorials">ros/roscpp_tutorials</a> and AddTwoInts from
<a href="https://github.com/ros2/examples">ros2/roscpp_examples</a>.</p>

<p>While building, ros1_bridge looks for all installed ROS and ROS2 services.
Found services are matched by comparing package name, service name and fields in a request and a response.
If all names are the same in ROS and ROS2 service, the bridge will be created.
It is also possible to pair services manually by creating a yaml file that will include names of corresponding services.
You can find more information <a href="https://github.com/ros2/ros1_bridge/tree/master/doc/index.rst">here</a>.</p>

<p>So to make this example work, please make sure that the roscpp_tutorials package
is installed on your system and the environment is set up correctly while you build ros1_bridge.</p>

<p>Launch ROS master</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
roscore <span class="nt">-p</span> 11311

</code></pre></div></div>

<p>Launch dynamic_bridge:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell B:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
ros2 run ros1_bridge dynamic_bridge

</code></pre></div></div>

<p>Launch TwoInts server:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell C:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
rosrun roscpp_tutorials add_two_ints_server

</code></pre></div></div>

<p>Launch AddTwoInts client:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run demo_nodes_cpp add_two_ints_client

</code></pre></div></div>

<h2 id="example-4-bridge-only-selected-topics-and-services">Example 4: bridge only selected topics and services</h2>
<p>This example expands on example 3 by selecting a subset of topics and services to be bridged.
This is handy when, for example, you have a system that runs most of it’s stuff in either ROS 1 or ROS 2 but needs a few nodes from the ‘opposite’ version of ROS.
Where the <code class="language-plaintext highlighter-rouge">dynamic_bridge</code> bridges all topics and service, the <code class="language-plaintext highlighter-rouge">parameter_bridge</code> uses the ROS 1 parameter server to choose which topics and services are bridged.
<strong>Note</strong>: The service bridge is <strong>monodirectional</strong>. You must use either <code class="language-plaintext highlighter-rouge">services_2_to_1</code> and/or <code class="language-plaintext highlighter-rouge">services_1_to_2</code> to bridge ROS 2 -&gt; ROS 1 or ROS 1 -&gt; ROS 2 services accordingly.
For example, to bridge only the <code class="language-plaintext highlighter-rouge">/chatter</code> topic bidirectionally, and the <code class="language-plaintext highlighter-rouge">/add_two_ints service</code> from ROS 2 to ROS 1 only, create this configuration file, <code class="language-plaintext highlighter-rouge">bridge.yaml</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">topics</span><span class="pi">:</span>
  <span class="pi">-</span>
    <span class="na">topic</span><span class="pi">:</span> <span class="s">/chatter</span>  <span class="c1"># Topic name on both ROS 1 and ROS 2</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">std_msgs/msg/String</span>  <span class="c1"># Type of topic to bridge</span>
    <span class="na">queue_size</span><span class="pi">:</span> <span class="m">1</span>  <span class="c1"># Queue size</span>
<span class="na">services_2_to_1</span><span class="pi">:</span>
  <span class="pi">-</span>
    <span class="na">service</span><span class="pi">:</span> <span class="s">/add_two_ints</span>  <span class="c1"># ROS 1 service name</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">roscpp_tutorials/TwoInts</span>  <span class="c1"># The ROS 1 service type name</span>

</code></pre></div></div>

<p>Start a ROS 1 roscore:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A (ROS 1 only):</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
roscore

</code></pre></div></div>

<p>Then load the bridge.yaml config file and start the talker to publish on the <code class="language-plaintext highlighter-rouge">/chatter</code> topic:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Shell B: <span class="o">(</span>ROS 1 only<span class="o">)</span>:
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rosparam load bridge.yaml

rosrun rospy_tutorials talker

</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Shell C: <span class="o">(</span>ROS 1 only<span class="o">)</span>:
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>

rosrun roscpp_tutorials add_two_ints_server

</code></pre></div></div>

<p>Then, in a few ROS 2 terminals:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run ros1_bridge parameter_bridge

</code></pre></div></div>

<p>If all is well, the logging shows it is creating bridges for the topic and service and you should be able to call the service and listen to the ROS 1 talker from ROS 2:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell E:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run demo_nodes_cpp listener

</code></pre></div></div>
<p>This should start printing text like <code class="language-plaintext highlighter-rouge">I heard: [hello world ...]</code> with a timestamp.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell F:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 service call /add_two_ints example_interfaces/srv/AddTwoInts <span class="s2">"{a: 1, b: 2}"</span>

</code></pre></div></div>
<p>If all is well, the output should contain <code class="language-plaintext highlighter-rouge">example_interfaces.srv.AddTwoInts_Response(sum=3)</code></p>

<h3 id="parametrizing-quality-of-service">Parametrizing Quality of Service</h3>
<p>An advantage of ROS 2 over ROS 1 is the possibility to define different Quality of Service settings per topic.
The parameter bridge optionally allows for this as well.
For some topics, like <code class="language-plaintext highlighter-rouge">/tf_static</code> this is actually required, as this is a latching topic in ROS 1.
In ROS 2 with the <code class="language-plaintext highlighter-rouge">parameter_bridge</code>, this requires that topic to be configured as such:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">topics</span><span class="pi">:</span>
  <span class="pi">-</span>
    <span class="na">topic</span><span class="pi">:</span> <span class="s">/tf_static</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">tf2_msgs/msg/TFMessage</span>
    <span class="na">queue_size</span><span class="pi">:</span> <span class="m">1</span>
    <span class="na">qos</span><span class="pi">:</span>
      <span class="na">history</span><span class="pi">:</span> <span class="s">keep_all</span>
      <span class="na">durability</span><span class="pi">:</span> <span class="s">transient_local</span>

</code></pre></div></div>

<p>All other QoS options (as documented here in https://docs.ros.org/en/foxy/Concepts/About-Quality-of-Service-Settings.html) are available:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">topics</span><span class="pi">:</span>
  <span class="pi">-</span>
    <span class="na">topic</span><span class="pi">:</span> <span class="s">/some_ros1_topic</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">std_msgs/msg/String</span>
    <span class="na">queue_size</span><span class="pi">:</span> <span class="m">1</span>
    <span class="na">qos</span><span class="pi">:</span>
      <span class="na">history</span><span class="pi">:</span> <span class="s">keep_last</span>  <span class="c1"># OR keep_all, then you can omit `depth` parameter below</span>
      <span class="na">depth</span><span class="pi">:</span> <span class="m">10</span>  <span class="c1"># Only required when history == keep_last</span>
      <span class="na">reliability</span><span class="pi">:</span> <span class="s">reliable</span>  <span class="c1"># OR best_effort</span>
      <span class="na">durability</span><span class="pi">:</span> <span class="s">transient_local</span>  <span class="c1"># OR volatile</span>
      <span class="na">deadline</span><span class="pi">:</span>
          <span class="na">secs</span><span class="pi">:</span> <span class="m">10</span>
          <span class="na">nsecs</span><span class="pi">:</span> <span class="m">2345</span>
      <span class="na">lifespan</span><span class="pi">:</span>
          <span class="na">secs</span><span class="pi">:</span> <span class="m">20</span>
          <span class="na">nsecs</span><span class="pi">:</span> <span class="m">3456</span>
      <span class="na">liveliness</span><span class="pi">:</span> <span class="s">liveliness_system_default</span>  <span class="c1"># Values from https://design.ros2.org/articles/qos_deadline_liveliness_lifespan.html, eg. LIVELINESS_AUTOMATIC</span>
      <span class="na">liveliness_lease_duration</span><span class="pi">:</span>
          <span class="na">secs</span><span class="pi">:</span> <span class="m">40</span>
          <span class="na">nsecs</span><span class="pi">:</span> <span class="m">5678</span>

</code></pre></div></div>

<p>Note that the <code class="language-plaintext highlighter-rouge">qos</code> section can be omitted entirely and options not set are left default.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>

<p>Contributors must sign-off each commit by adding a <code class="language-plaintext highlighter-rouge">Signed-off-by: ...</code>
line to commit messages to certify that they have the right to submit
the code they are contributing to the project according to the
<a href="https://developercertificate.org/">Developer Certificate of Origin (DCO)</a>.</p>
</div>
              <hr id="kilted-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="kilted-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#kilted-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#kilted-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#kilted-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="kilted-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="kilted-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="kilted-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros1_bridge">ros1_bridge</a> <small>repository</small></h3>
        <span class="label label-default">hacktoberfest</span> 
        
        <a class="label label-primary pkg-label" href="/p/ros1_bridge">ros1_bridge</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-ros1_bridge
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-ros1_bridge" role="menuitem" tabindex="-1" href="/r/ros1_bridge/github-ros2-ros1_bridge" data="github-ros2-ros1_bridge">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-ros1_bridge
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS 2 package that provides bidirectional communication between ROS 1 and ROS 2</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros2/ros1_bridge.git">https://github.com/ros2/ros1_bridge.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-03-31
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">hacktoberfest</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ros1_bridge/#rolling-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros1_bridge/#rolling-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros1_bridge/#rolling-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ros1_bridge">ros1_bridge</a></td>
                    <td>0.10.3</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="bridge-communication-between-ros-1-and-ros-2">Bridge communication between ROS 1 and ROS 2</h1>

<p>This package provides a network bridge which enables the exchange of messages between ROS 1 and ROS 2.</p>

<p>The bridge is currently implemented in C++ as at the time the Python API for ROS 2 had not been developed.
Because of this its support is limited to only the message/service types available at compile time of the bridge.
The bridge provided with the prebuilt ROS 2 binaries includes support for common ROS interfaces (messages/services), such as the interface packages listed in the <a href="https://github.com/ros2/common_interfaces">ros2/common_interfaces repository</a> and <code class="language-plaintext highlighter-rouge">tf2_msgs</code>.
See <a href="https://github.com/ros2/ros1_bridge/tree/master/doc/index.rst">the documentation</a> for more details on how ROS 1 and ROS 2 interfaces are associated with each other.
If you would like to use a bridge with other interfaces (including your own custom types), you will have to build the bridge from source (instructions below), after building and sourcing your custom types in separate ROS 1 and ROS 2 workspaces.
See <a href="https://github.com/ros2/ros1_bridge/tree/master/doc/index.rst">the documentation</a> for an example setup.</p>

<p>For efficiency reasons, topics will only be bridged when matching publisher-subscriber pairs are active for a topic on either side of the bridge.
As a result using <code class="language-plaintext highlighter-rouge">ros2 topic echo &lt;topic-name&gt;</code> doesn’t work but fails with an error message <code class="language-plaintext highlighter-rouge">Could not determine the type for the passed topic</code> if no other subscribers are present since the dynamic bridge hasn’t bridged the topic yet.
As a workaround the topic type can be specified explicitly <code class="language-plaintext highlighter-rouge">ros2 topic echo &lt;topic-name&gt; &lt;topic-type&gt;</code> which triggers the bridging of the topic since the <code class="language-plaintext highlighter-rouge">echo</code> command represents the necessary subscriber.
On the ROS 1 side <code class="language-plaintext highlighter-rouge">rostopic echo</code> doesn’t have an option to specify the topic type explicitly.
Therefore it can’t be used with the dynamic bridge if no other subscribers are present.
As an alternative you can use the <code class="language-plaintext highlighter-rouge">--bridge-all-2to1-topics</code> option to bridge all ROS 2 topics to ROS 1 so that tools such as <code class="language-plaintext highlighter-rouge">rostopic echo</code>, <code class="language-plaintext highlighter-rouge">rostopic list</code> and <code class="language-plaintext highlighter-rouge">rqt</code> will see the topics even if there are no matching ROS 1 subscribers.
Run <code class="language-plaintext highlighter-rouge">ros2 run ros1_bridge dynamic_bridge -- --help</code> for more options.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>In order to run the bridge you need to either:</p>

<ul>
  <li>get <a href="https://github.com/ros2/ros2/releases">prebuilt binaries</a> or</li>
  <li>build the bridge as well as the other ROS 2 packages from source.</li>
</ul>

<p>After that you can run both examples described below.</p>

<p>For all examples you need to source the environment of the install space where the bridge was built or unpacked to.
Additionally you will need to either source the ROS 1 environment or at least set the <code class="language-plaintext highlighter-rouge">ROS_MASTER_URI</code> and run a <code class="language-plaintext highlighter-rouge">roscore</code>.</p>

<p>The following ROS 1 packages are required to build and use the bridge:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">catkin</code></li>
  <li><code class="language-plaintext highlighter-rouge">roscpp</code></li>
  <li>
<code class="language-plaintext highlighter-rouge">roslaunch</code> (for <code class="language-plaintext highlighter-rouge">roscore</code> executable)</li>
  <li><code class="language-plaintext highlighter-rouge">rosmsg</code></li>
  <li><code class="language-plaintext highlighter-rouge">std_msgs</code></li>
  <li>as well as the Python package <code class="language-plaintext highlighter-rouge">rospkg</code>
</li>
</ul>

<p>To run the following examples you will also need these ROS 1 packages:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">rosbash</code> (for <code class="language-plaintext highlighter-rouge">rosrun</code> executable)</li>
  <li><code class="language-plaintext highlighter-rouge">roscpp_tutorials</code></li>
  <li><code class="language-plaintext highlighter-rouge">rospy_tutorials</code></li>
  <li><code class="language-plaintext highlighter-rouge">rostopic</code></li>
  <li><code class="language-plaintext highlighter-rouge">rqt_image_view</code></li>
</ul>

<h3 id="prerequisites-for-the-examples-in-this-file">Prerequisites for the examples in this file</h3>

<p>In order to make the examples below portable between versions of ROS, we define two environment variables, <code class="language-plaintext highlighter-rouge">ROS1_INSTALL_PATH</code> and <code class="language-plaintext highlighter-rouge">ROS2_INSTALL_PATH</code>. 
These are defined as the paths to the installation location of their respective ROS versions.</p>

<p>If you installed Noetic in the default location, then the definition of <code class="language-plaintext highlighter-rouge">ROS1_INSTALL_PATH</code> will be <code class="language-plaintext highlighter-rouge">/opt/ros/noetic</code>.</p>

<p>Building the bridge as described below requires you to build all of ROS 2.
We assume that you have downloaded it to <code class="language-plaintext highlighter-rouge">~/ros2_rolling</code>, and that is where you plan on building it.
In this case, <code class="language-plaintext highlighter-rouge">ROS2_INSTALL_PATH</code> will be defined as <code class="language-plaintext highlighter-rouge">~/ros2_rolling/install</code>.</p>

<p>If you’ve chosen to install either or both versions of ROS somewhere else, you will need adjust the definitions below to match your installation paths.</p>

<p>Because these definitions are used continuously throughout this page, it is useful to add the following lines to your shell startup file (<code class="language-plaintext highlighter-rouge">~/.bashrc</code> if you are using <code class="language-plaintext highlighter-rouge">bash</code>, <code class="language-plaintext highlighter-rouge">~/.zshrc</code> if you are using <code class="language-plaintext highlighter-rouge">zsh</code>).
Modify these definitions as appropriate for the versions of ROS that you’re using, and for the shell that you’re using.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">ROS1_INSTALL_PATH</span><span class="o">=</span>/opt/ros/noetic
<span class="nb">export </span><span class="nv">ROS2_INSTALL_PATH</span><span class="o">=</span>~/ros2_rolling/install

</code></pre></div></div>

<p>Note that no trailing ‘/’ character is used in either definition.
If you have problems involving paths, please verify that you have the correct path to the installation location, and that you do not have a trailing ‘/’ in either definition.</p>

<h3 id="building-the-bridge-from-source">Building the bridge from source</h3>

<p>Before continuing you should have the prerequisites for building ROS 2 from source installed following <a href="https://github.com/ros2/ros2/wiki/Installation">these instructions</a>.</p>

<p>In the past, building this package required patches to ROS 1, but in the latest releases that is no longer the case.
If you run into trouble first make sure you have at least version <code class="language-plaintext highlighter-rouge">1.11.16</code> of <code class="language-plaintext highlighter-rouge">ros_comm</code> and <code class="language-plaintext highlighter-rouge">rosbag</code>.</p>

<p>The bridge uses <code class="language-plaintext highlighter-rouge">pkg-config</code> to find ROS 1 packages.
ROS 2 packages are found through CMake using <code class="language-plaintext highlighter-rouge">find_package()</code>.
Therefore the <code class="language-plaintext highlighter-rouge">CMAKE_PREFIX_PATH</code> must not contain paths from ROS 1 which would overlay ROS 2 packages.</p>

<p>Here are the steps for Linux and OSX.</p>

<p>You should first build everything but the ROS 1 bridge with normal colcon arguments.
We don’t recommend having your ROS 1 environment sourced during this step as it can add other libraries to the path.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>colcon build <span class="nt">--symlink-install</span> <span class="nt">--packages-skip</span> ros1_bridge

</code></pre></div></div>

<p>Next you need to source the ROS 1 environment.
If you set the <code class="language-plaintext highlighter-rouge">ROS1_INSTALL_PATH</code> environment variable as described above, then the following will source the correct <code class="language-plaintext highlighter-rouge">setup.bash</code> file.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>

</code></pre></div></div>

<p>The bridge will be built with support for any message/service packages that are on your path and have an associated mapping between ROS 1 and ROS 2.
Therefore you must add any ROS 1 or ROS 2 workspaces that have message/service packages that you want to be bridged to your path before building the bridge.
This can be done by adding explicit dependencies on the message/service packages to the <code class="language-plaintext highlighter-rouge">package.xml</code> of the bridge, so that <code class="language-plaintext highlighter-rouge">colcon</code> will add them to the path before it builds the bridge.
Alternatively you can do it manually by sourcing the relevant workspaces yourself, e.g.:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># You have already sourced your ROS installation.</span>
<span class="c"># Source your ROS 2 installation:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># And if you have a ROS 1 overlay workspace, something like:</span>
<span class="c"># . &lt;install-space-to-ros1-overlay-ws&gt;/setup.bash</span>
<span class="c"># And if you have a ROS 2 overlay workspace, something like:</span>
<span class="c"># . &lt;install-space-to-ros2-overlay-ws&gt;/local_setup.bash</span>

</code></pre></div></div>

<p>Then build just the ROS 1 bridge:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>colcon build <span class="nt">--symlink-install</span> <span class="nt">--packages-select</span> ros1_bridge <span class="nt">--cmake-force-configure</span>

</code></pre></div></div>

<p><em>Note:</em> If you are building on a memory constrained system you might want to limit the number of parallel jobs by setting e.g. the environment variable <code class="language-plaintext highlighter-rouge">MAKEFLAGS=-j1</code>.</p>

<h2 id="example-1-run-the-bridge-and-the-example-talker-and-listener">Example 1: run the bridge and the example talker and listener</h2>

<p>The talker and listener can be either a ROS 1 or a ROS 2 node.
The bridge will pass the message along transparently.</p>

<p><em>Note:</em> When you are running these demos make sure to only source the indicated workspaces.
You will get errors from most tools if they have both workspaces in their environment.</p>

<h3 id="example-1a-ros-1-talker-and-ros-2-listener">Example 1a: ROS 1 talker and ROS 2 listener</h3>

<p>First we start a ROS 1 <code class="language-plaintext highlighter-rouge">roscore</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A (ROS 1 only):</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
roscore

</code></pre></div></div>

<hr>

<p>Then we start the dynamic bridge which will watch the available ROS 1 and ROS 2 topics.
Once a <em>matching</em> topic has been detected it starts to bridge the messages on this topic.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell B (ROS 1 + ROS 2):</span>
<span class="c"># Source ROS 1 first:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
<span class="c"># Source ROS 2 next:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># For example:</span>
<span class="c"># . /opt/ros/dashing/setup.bash</span>
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
ros2 run ros1_bridge dynamic_bridge

</code></pre></div></div>

<p>The program will start outputting the currently available topics in ROS 1 and ROS 2 in a regular interval.</p>

<hr>

<p>Now we start the ROS 1 talker.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell C:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rosrun rospy_tutorials talker

</code></pre></div></div>

<p>The ROS 1 node will start printing the published messages to the console.</p>

<hr>

<p>Now we start the ROS 2 listener from the <code class="language-plaintext highlighter-rouge">demo_nodes_cpp</code> ROS 2 package.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run demo_nodes_cpp listener

</code></pre></div></div>

<p>The ROS 2 node will start printing the received messages to the console.</p>

<p>When looking at the output in <em>shell B</em> there will be a line stating that the bridge for this topic has been created:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>created 1to2 bridge <span class="k">for </span>topic <span class="s1">'/chatter'</span> with ROS 1 <span class="nb">type</span> <span class="s1">'std_msgs/String'</span> and ROS 2 <span class="nb">type</span> <span class="s1">'std_msgs/String'</span>

</code></pre></div></div>

<p>At the end stop all programs with <code class="language-plaintext highlighter-rouge">Ctrl-C</code>.
Once you stop either the talker or the listener in <em>shell B</em> a line will be stating that the bridge has been torn down:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>removed 1to2 bridge <span class="k">for </span>topic <span class="s1">'/chatter'</span>

</code></pre></div></div>

<p>The screenshot shows all the shell windows and their expected content:</p>

<p><img src="https://raw.githubusercontent.com/ros2/ros1_bridge/master/doc/ros1_talker_ros2_listener.png" alt="ROS 1 talker and ROS 2 listener"></p>

<h3 id="example-1b-ros-2-talker-and-ros-1-listener">Example 1b: ROS 2 talker and ROS 1 listener</h3>

<p>The steps are very similar to the previous example and therefore only the commands are described.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
roscore

</code></pre></div></div>

<hr>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell B:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
ros2 run ros1_bridge dynamic_bridge

</code></pre></div></div>

<hr>

<p>Now we start the ROS 2 talker from the <code class="language-plaintext highlighter-rouge">demo_nodes_py</code> ROS 2 package.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell C:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run demo_nodes_py talker

</code></pre></div></div>

<hr>

<p>Now we start the ROS 1 listener.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rosrun roscpp_tutorials listener

</code></pre></div></div>

<h2 id="example-2-run-the-bridge-and-exchange-images">Example 2: run the bridge and exchange images</h2>

<p>The second example will demonstrate the bridge passing along bigger and more complicated messages.
A ROS 2 node is publishing images retrieved from a camera and on the ROS 1 side we use <code class="language-plaintext highlighter-rouge">rqt_image_view</code> to render the images in a GUI.
And a ROS 1 publisher can send a message to toggle an option in the ROS 2 node.</p>

<p>First we start a ROS 1 <code class="language-plaintext highlighter-rouge">roscore</code> and the bridge:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
roscore

</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell B:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/install/setup.bash
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
ros2 run ros1_bridge dynamic_bridge

</code></pre></div></div>

<hr>

<p>Now we start the ROS 1 GUI:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell C:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rqt_image_view /image

</code></pre></div></div>

<hr>

<p>Now we start the ROS 2 image publisher from the <code class="language-plaintext highlighter-rouge">image_tools</code> ROS 2 package:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/install/setup.bash
ros2 run image_tools cam2image

</code></pre></div></div>

<p>You should see the current images in <code class="language-plaintext highlighter-rouge">rqt_image_view</code> which are coming from the ROS 2 node <code class="language-plaintext highlighter-rouge">cam2image</code> and are being passed along by the bridge.</p>

<hr>

<p>To exercise the bridge in the opposite direction at the same time you can publish a message to the ROS 2 node from ROS 1.
By publishing either <code class="language-plaintext highlighter-rouge">true</code> or <code class="language-plaintext highlighter-rouge">false</code> to the <code class="language-plaintext highlighter-rouge">flip_image</code> topic, the camera node will conditionally flip the image before sending it.
You can either use the <code class="language-plaintext highlighter-rouge">Message Publisher</code> plugin in <code class="language-plaintext highlighter-rouge">rqt</code> to publish a <code class="language-plaintext highlighter-rouge">std_msgs/Bool</code> message on the topic <code class="language-plaintext highlighter-rouge">flip_image</code>, or run one of the two following <code class="language-plaintext highlighter-rouge">rostopic</code> commands:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell E:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rostopic pub <span class="nt">-r</span> 1 /flip_image std_msgs/Bool <span class="s2">"{data: true}"</span>
rostopic pub <span class="nt">-r</span> 1 /flip_image std_msgs/Bool <span class="s2">"{data: false}"</span>

</code></pre></div></div>

<p>The screenshot shows all the shell windows and their expected content (it was taken when Indigo was supported - you should use Melodic):</p>

<p><img src="https://raw.githubusercontent.com/ros2/ros1_bridge/master/doc/ros2_camera_ros1_rqt.png" alt="ROS 2 camera and ROS 1 rqt"></p>

<h2 id="example-3-run-the-bridge-for-addtwoints-service">Example 3: run the bridge for AddTwoInts service</h2>

<p>In this example we will bridge a service TwoInts from
<a href="https://github.com/ros/ros_tutorials">ros/roscpp_tutorials</a> and AddTwoInts from
<a href="https://github.com/ros2/examples">ros2/roscpp_examples</a>.</p>

<p>While building, ros1_bridge looks for all installed ROS and ROS2 services.
Found services are matched by comparing package name, service name and fields in a request and a response.
If all names are the same in ROS and ROS2 service, the bridge will be created.
It is also possible to pair services manually by creating a yaml file that will include names of corresponding services.
You can find more information <a href="https://github.com/ros2/ros1_bridge/tree/master/doc/index.rst">here</a>.</p>

<p>So to make this example work, please make sure that the roscpp_tutorials package
is installed on your system and the environment is set up correctly while you build ros1_bridge.</p>

<p>Launch ROS master</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
roscore <span class="nt">-p</span> 11311

</code></pre></div></div>

<p>Launch dynamic_bridge:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell B:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
ros2 run ros1_bridge dynamic_bridge

</code></pre></div></div>

<p>Launch TwoInts server:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell C:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
rosrun roscpp_tutorials add_two_ints_server

</code></pre></div></div>

<p>Launch AddTwoInts client:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run demo_nodes_cpp add_two_ints_client

</code></pre></div></div>

<h2 id="example-4-bridge-only-selected-topics-and-services">Example 4: bridge only selected topics and services</h2>
<p>This example expands on example 3 by selecting a subset of topics and services to be bridged.
This is handy when, for example, you have a system that runs most of it’s stuff in either ROS 1 or ROS 2 but needs a few nodes from the ‘opposite’ version of ROS.
Where the <code class="language-plaintext highlighter-rouge">dynamic_bridge</code> bridges all topics and service, the <code class="language-plaintext highlighter-rouge">parameter_bridge</code> uses the ROS 1 parameter server to choose which topics and services are bridged.
<strong>Note</strong>: The service bridge is <strong>monodirectional</strong>. You must use either <code class="language-plaintext highlighter-rouge">services_2_to_1</code> and/or <code class="language-plaintext highlighter-rouge">services_1_to_2</code> to bridge ROS 2 -&gt; ROS 1 or ROS 1 -&gt; ROS 2 services accordingly.
For example, to bridge only the <code class="language-plaintext highlighter-rouge">/chatter</code> topic bidirectionally, and the <code class="language-plaintext highlighter-rouge">/add_two_ints service</code> from ROS 2 to ROS 1 only, create this configuration file, <code class="language-plaintext highlighter-rouge">bridge.yaml</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">topics</span><span class="pi">:</span>
  <span class="pi">-</span>
    <span class="na">topic</span><span class="pi">:</span> <span class="s">/chatter</span>  <span class="c1"># Topic name on both ROS 1 and ROS 2</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">std_msgs/msg/String</span>  <span class="c1"># Type of topic to bridge</span>
    <span class="na">queue_size</span><span class="pi">:</span> <span class="m">1</span>  <span class="c1"># Queue size</span>
<span class="na">services_2_to_1</span><span class="pi">:</span>
  <span class="pi">-</span>
    <span class="na">service</span><span class="pi">:</span> <span class="s">/add_two_ints</span>  <span class="c1"># ROS 1 service name</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">roscpp_tutorials/TwoInts</span>  <span class="c1"># The ROS 1 service type name</span>

</code></pre></div></div>

<p>Start a ROS 1 roscore:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A (ROS 1 only):</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
roscore

</code></pre></div></div>

<p>Then load the bridge.yaml config file and start the talker to publish on the <code class="language-plaintext highlighter-rouge">/chatter</code> topic:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Shell B: <span class="o">(</span>ROS 1 only<span class="o">)</span>:
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rosparam load bridge.yaml

rosrun rospy_tutorials talker

</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Shell C: <span class="o">(</span>ROS 1 only<span class="o">)</span>:
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>

rosrun roscpp_tutorials add_two_ints_server

</code></pre></div></div>

<p>Then, in a few ROS 2 terminals:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run ros1_bridge parameter_bridge

</code></pre></div></div>

<p>If all is well, the logging shows it is creating bridges for the topic and service and you should be able to call the service and listen to the ROS 1 talker from ROS 2:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell E:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run demo_nodes_cpp listener

</code></pre></div></div>
<p>This should start printing text like <code class="language-plaintext highlighter-rouge">I heard: [hello world ...]</code> with a timestamp.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell F:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 service call /add_two_ints example_interfaces/srv/AddTwoInts <span class="s2">"{a: 1, b: 2}"</span>

</code></pre></div></div>
<p>If all is well, the output should contain <code class="language-plaintext highlighter-rouge">example_interfaces.srv.AddTwoInts_Response(sum=3)</code></p>

<h3 id="parametrizing-quality-of-service">Parametrizing Quality of Service</h3>
<p>An advantage of ROS 2 over ROS 1 is the possibility to define different Quality of Service settings per topic.
The parameter bridge optionally allows for this as well.
For some topics, like <code class="language-plaintext highlighter-rouge">/tf_static</code> this is actually required, as this is a latching topic in ROS 1.
In ROS 2 with the <code class="language-plaintext highlighter-rouge">parameter_bridge</code>, this requires that topic to be configured as such:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">topics</span><span class="pi">:</span>
  <span class="pi">-</span>
    <span class="na">topic</span><span class="pi">:</span> <span class="s">/tf_static</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">tf2_msgs/msg/TFMessage</span>
    <span class="na">queue_size</span><span class="pi">:</span> <span class="m">1</span>
    <span class="na">qos</span><span class="pi">:</span>
      <span class="na">history</span><span class="pi">:</span> <span class="s">keep_all</span>
      <span class="na">durability</span><span class="pi">:</span> <span class="s">transient_local</span>

</code></pre></div></div>

<p>All other QoS options (as documented here in https://docs.ros.org/en/foxy/Concepts/About-Quality-of-Service-Settings.html) are available:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">topics</span><span class="pi">:</span>
  <span class="pi">-</span>
    <span class="na">topic</span><span class="pi">:</span> <span class="s">/some_ros1_topic</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">std_msgs/msg/String</span>
    <span class="na">queue_size</span><span class="pi">:</span> <span class="m">1</span>
    <span class="na">qos</span><span class="pi">:</span>
      <span class="na">history</span><span class="pi">:</span> <span class="s">keep_last</span>  <span class="c1"># OR keep_all, then you can omit `depth` parameter below</span>
      <span class="na">depth</span><span class="pi">:</span> <span class="m">10</span>  <span class="c1"># Only required when history == keep_last</span>
      <span class="na">reliability</span><span class="pi">:</span> <span class="s">reliable</span>  <span class="c1"># OR best_effort</span>
      <span class="na">durability</span><span class="pi">:</span> <span class="s">transient_local</span>  <span class="c1"># OR volatile</span>
      <span class="na">deadline</span><span class="pi">:</span>
          <span class="na">secs</span><span class="pi">:</span> <span class="m">10</span>
          <span class="na">nsecs</span><span class="pi">:</span> <span class="m">2345</span>
      <span class="na">lifespan</span><span class="pi">:</span>
          <span class="na">secs</span><span class="pi">:</span> <span class="m">20</span>
          <span class="na">nsecs</span><span class="pi">:</span> <span class="m">3456</span>
      <span class="na">liveliness</span><span class="pi">:</span> <span class="s">liveliness_system_default</span>  <span class="c1"># Values from https://design.ros2.org/articles/qos_deadline_liveliness_lifespan.html, eg. LIVELINESS_AUTOMATIC</span>
      <span class="na">liveliness_lease_duration</span><span class="pi">:</span>
          <span class="na">secs</span><span class="pi">:</span> <span class="m">40</span>
          <span class="na">nsecs</span><span class="pi">:</span> <span class="m">5678</span>

</code></pre></div></div>

<p>Note that the <code class="language-plaintext highlighter-rouge">qos</code> section can be omitted entirely and options not set are left default.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>

<p>Contributors must sign-off each commit by adding a <code class="language-plaintext highlighter-rouge">Signed-off-by: ...</code>
line to commit messages to certify that they have the right to submit
the code they are contributing to the project according to the
<a href="https://developercertificate.org/">Developer Certificate of Origin (DCO)</a>.</p>
</div>
              <hr id="rolling-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="rolling-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#rolling-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#rolling-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#rolling-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="rolling-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="rolling-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="rolling-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros1_bridge">ros1_bridge</a> <small>repository</small></h3>
        <span class="label label-default">hacktoberfest</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-ros1_bridge
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-ros1_bridge" role="menuitem" tabindex="-1" href="/r/ros1_bridge/github-ros2-ros1_bridge" data="github-ros2-ros1_bridge">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-ros1_bridge
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>github</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros1_bridge">ros1_bridge</a> <small>repository</small></h3>
        <span class="label label-default">hacktoberfest</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-ros1_bridge
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-ros1_bridge" role="menuitem" tabindex="-1" href="/r/ros1_bridge/github-ros2-ros1_bridge" data="github-ros2-ros1_bridge">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-ros1_bridge
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros1_bridge">ros1_bridge</a> <small>repository</small></h3>
        <span class="label label-default">hacktoberfest</span> 
        
        <a class="label label-primary pkg-label" href="/p/ros1_bridge">ros1_bridge</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-ros1_bridge
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-ros1_bridge" role="menuitem" tabindex="-1" href="/r/ros1_bridge/github-ros2-ros1_bridge" data="github-ros2-ros1_bridge">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-ros1_bridge
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS 2 package that provides bidirectional communication between ROS 1 and ROS 2</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros2/ros1_bridge.git">https://github.com/ros2/ros1_bridge.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">galactic</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2021-01-25
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">hacktoberfest</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ros1_bridge/#galactic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros1_bridge/#galactic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros1_bridge/#galactic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ros1_bridge">ros1_bridge</a></td>
                    <td>0.10.1</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="bridge-communication-between-ros-1-and-ros-2">Bridge communication between ROS 1 and ROS 2</h1>

<p>This package provides a network bridge which enables the exchange of messages between ROS 1 and ROS 2.</p>

<p>The bridge is currently implemented in C++ as at the time the Python API for ROS 2 had not been developed.
Because of this its support is limited to only the message/service types available at compile time of the bridge.
The bridge provided with the prebuilt ROS 2 binaries includes support for common ROS interfaces (messages/services), such as the interface packages listed in the <a href="https://github.com/ros2/common_interfaces">ros2/common_interfaces repository</a> and <code class="language-plaintext highlighter-rouge">tf2_msgs</code>.
See <a href="https://github.com/ros2/ros1_bridge/tree/galactic/doc/index.rst">the documentation</a> for more details on how ROS 1 and ROS 2 interfaces are associated with each other.
If you would like to use a bridge with other interfaces (including your own custom types), you will have to build the bridge from source (instructions below), after building and sourcing your custom types in separate ROS 1 and ROS 2 workspaces.
See <a href="https://github.com/ros2/ros1_bridge/tree/galactic/doc/index.rst">the documentation</a> for an example setup.</p>

<p>For efficiency reasons, topics will only be bridged when matching publisher-subscriber pairs are active for a topic on either side of the bridge.
As a result using <code class="language-plaintext highlighter-rouge">ros2 topic echo &lt;topic-name&gt;</code> doesn’t work but fails with an error message <code class="language-plaintext highlighter-rouge">Could not determine the type for the passed topic</code> if no other subscribers are present since the dynamic bridge hasn’t bridged the topic yet.
As a workaround the topic type can be specified explicitly <code class="language-plaintext highlighter-rouge">ros2 topic echo &lt;topic-name&gt; &lt;topic-type&gt;</code> which triggers the bridging of the topic since the <code class="language-plaintext highlighter-rouge">echo</code> command represents the necessary subscriber.
On the ROS 1 side <code class="language-plaintext highlighter-rouge">rostopic echo</code> doesn’t have an option to specify the topic type explicitly.
Therefore it can’t be used with the dynamic bridge if no other subscribers are present.
As an alternative you can use the <code class="language-plaintext highlighter-rouge">--bridge-all-2to1-topics</code> option to bridge all ROS 2 topics to ROS 1 so that tools such as <code class="language-plaintext highlighter-rouge">rostopic echo</code>, <code class="language-plaintext highlighter-rouge">rostopic list</code> and <code class="language-plaintext highlighter-rouge">rqt</code> will see the topics even if there are no matching ROS 1 subscribers.
Run <code class="language-plaintext highlighter-rouge">ros2 run ros1_bridge dynamic_bridge -- --help</code> for more options.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>In order to run the bridge you need to either:</p>

<ul>
  <li>get <a href="https://github.com/ros2/ros2/releases">prebuilt binaries</a> or</li>
  <li>build the bridge as well as the other ROS 2 packages from source.</li>
</ul>

<p>After that you can run both examples described below.</p>

<p>For all examples you need to source the environment of the install space where the bridge was built or unpacked to.
Additionally you will need to either source the ROS 1 environment or at least set the <code class="language-plaintext highlighter-rouge">ROS_MASTER_URI</code> and run a <code class="language-plaintext highlighter-rouge">roscore</code>.</p>

<p>The following ROS 1 packages are required to build and use the bridge:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">catkin</code></li>
  <li><code class="language-plaintext highlighter-rouge">roscpp</code></li>
  <li>
<code class="language-plaintext highlighter-rouge">roslaunch</code> (for <code class="language-plaintext highlighter-rouge">roscore</code> executable)</li>
  <li><code class="language-plaintext highlighter-rouge">rosmsg</code></li>
  <li><code class="language-plaintext highlighter-rouge">std_msgs</code></li>
  <li>as well as the Python package <code class="language-plaintext highlighter-rouge">rospkg</code>
</li>
</ul>

<p>To run the following examples you will also need these ROS 1 packages:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">rosbash</code> (for <code class="language-plaintext highlighter-rouge">rosrun</code> executable)</li>
  <li><code class="language-plaintext highlighter-rouge">roscpp_tutorials</code></li>
  <li><code class="language-plaintext highlighter-rouge">rospy_tutorials</code></li>
  <li><code class="language-plaintext highlighter-rouge">rostopic</code></li>
  <li><code class="language-plaintext highlighter-rouge">rqt_image_view</code></li>
</ul>

<h3 id="building-the-bridge-from-source">Building the bridge from source</h3>

<p>Before continuing you should have the prerequisites for building ROS 2 from source installed following <a href="https://github.com/ros2/ros2/wiki/Installation">these instructions</a>.</p>

<p>In the past, building this package required patches to ROS 1, but in the latest releases that is no longer the case.
If you run into trouble first make sure you have at least version <code class="language-plaintext highlighter-rouge">1.11.16</code> of <code class="language-plaintext highlighter-rouge">ros_comm</code> and <code class="language-plaintext highlighter-rouge">rosbag</code>.</p>

<p>The bridge uses <code class="language-plaintext highlighter-rouge">pkg-config</code> to find ROS 1 packages.
ROS 2 packages are found through CMake using <code class="language-plaintext highlighter-rouge">find_package()</code>.
Therefore the <code class="language-plaintext highlighter-rouge">CMAKE_PREFIX_PATH</code> must not contain paths from ROS 1 which would overlay ROS 2 packages.</p>

<p>Here are the steps for Linux and OSX.</p>

<p>You should first build everything but the ROS 1 bridge with normal colcon arguments.
We don’t recommend having your ROS 1 environment sourced during this step as it can add other libraries to the path.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>colcon build --symlink-install --packages-skip ros1_bridge

</code></pre></div></div>

<p>Next you need to source the ROS 1 environment, for Linux and ROS Melodic that would be:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>source /opt/ros/melodic/setup.bash
# Or, on OSX, something like:
# . ~/ros_catkin_ws/install_isolated/setup.bash

</code></pre></div></div>

<p>The bridge will be built with support for any message/service packages that are on your path and have an associated mapping between ROS 1 and ROS 2.
Therefore you must add any ROS 1 or ROS 2 workspaces that have message/service packages that you want to be bridged to your path before building the bridge.
This can be done by adding explicit dependencies on the message/service packages to the <code class="language-plaintext highlighter-rouge">package.xml</code> of the bridge, so that <code class="language-plaintext highlighter-rouge">colcon</code> will add them to the path before it builds the bridge.
Alternatively you can do it manually by sourcing the relevant workspaces yourself, e.g.:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># You have already sourced your ROS installation.
# Source your ROS 2 installation:
. &lt;install-space-with-ros2&gt;/local_setup.bash
# And if you have a ROS 1 overlay workspace, something like:
# . &lt;install-space-to-ros1-overlay-ws&gt;/setup.bash
# And if you have a ROS 2 overlay workspace, something like:
# . &lt;install-space-to-ros2-overlay-ws&gt;/local_setup.bash

</code></pre></div></div>

<p>Then build just the ROS 1 bridge:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>colcon build --symlink-install --packages-select ros1_bridge --cmake-force-configure

</code></pre></div></div>

<p><em>Note:</em> If you are building on a memory constrained system you might want to limit the number of parallel jobs by setting e.g. the environment variable <code class="language-plaintext highlighter-rouge">MAKEFLAGS=-j1</code>.</p>

<h2 id="example-1-run-the-bridge-and-the-example-talker-and-listener">Example 1: run the bridge and the example talker and listener</h2>

<p>The talker and listener can be either a ROS 1 or a ROS 2 node.
The bridge will pass the message along transparently.</p>

<p><em>Note:</em> When you are running these demos make sure to only source the indicated workspaces.
You will get errors from most tools if they have both workspaces in their environment.</p>

<h3 id="example-1a-ros-1-talker-and-ros-2-listener">Example 1a: ROS 1 talker and ROS 2 listener</h3>

<p>First we start a ROS 1 <code class="language-plaintext highlighter-rouge">roscore</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Shell A (ROS 1 only):
. /opt/ros/melodic/setup.bash
# Or, on OSX, something like:
# . ~/ros_catkin_ws/install_isolated/setup.bash
roscore

</code></pre></div></div>

<hr>

<p>Then we start the dynamic bridge which will watch the available ROS 1 and ROS 2 topics.
Once a <em>matching</em> topic has been detected it starts to bridge the messages on this topic.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Shell B (ROS 1 + ROS 2):
# Source ROS 1 first:
. /opt/ros/melodic/setup.bash
# Or, on OSX, something like:
# . ~/ros_catkin_ws/install_isolated/setup.bash
# Source ROS 2 next:
. &lt;install-space-with-bridge&gt;/setup.bash
# For example:
# . /opt/ros/dashing/setup.bash
export ROS_MASTER_URI=http://localhost:11311
ros2 run ros1_bridge dynamic_bridge

</code></pre></div></div>

<p>The program will start outputting the currently available topics in ROS 1 and ROS 2 in a regular interval.</p>

<hr>

<p>Now we start the ROS 1 talker.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Shell C:
. /opt/ros/melodic/setup.bash
# Or, on OSX, something like:
# . ~/ros_catkin_ws/install_isolated/setup.bash
rosrun rospy_tutorials talker

</code></pre></div></div>

<p>The ROS 1 node will start printing the published messages to the console.</p>

<hr>

<p>Now we start the ROS 2 listener from the <code class="language-plaintext highlighter-rouge">demo_nodes_cpp</code> ROS 2 package.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Shell D:
. &lt;install-space-with-ros2&gt;/setup.bash
ros2 run demo_nodes_cpp listener

</code></pre></div></div>

<p>The ROS 2 node will start printing the received messages to the console.</p>

<p>When looking at the output in <em>shell B</em> there will be a line stating that the bridge for this topic has been created:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>created 1to2 bridge for topic '/chatter' with ROS 1 type 'std_msgs/String' and ROS 2 type 'std_msgs/String'

</code></pre></div></div>

<p>At the end stop all programs with <code class="language-plaintext highlighter-rouge">Ctrl-C</code>.
Once you stop either the talker or the listener in <em>shell B</em> a line will be stating that the bridge has been torn down:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>removed 1to2 bridge for topic '/chatter'

</code></pre></div></div>

<p>The screenshot shows all the shell windows and their expected content:</p>

<p><img src="https://raw.githubusercontent.com/ros2/ros1_bridge/galactic/doc/ros1_talker_ros2_listener.png" alt="ROS 1 talker and ROS 2 listener"></p>

<h3 id="example-1b-ros-2-talker-and-ros-1-listener">Example 1b: ROS 2 talker and ROS 1 listener</h3>

<p>The steps are very similar to the previous example and therefore only the commands are described.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Shell A:
. /opt/ros/melodic/setup.bash
# Or, on OSX, something like:
# . ~/ros_catkin_ws/install_isolated/setup.bash
roscore

</code></pre></div></div>

<hr>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Shell B:
. /opt/ros/melodic/setup.bash
# Or, on OSX, something like:
# . ~/ros_catkin_ws/install_isolated/setup.bash
. &lt;install-space-with-bridge&gt;/setup.bash
export ROS_MASTER_URI=http://localhost:11311
ros2 run ros1_bridge dynamic_bridge

</code></pre></div></div>

<hr>

<p>Now we start the ROS 2 talker from the <code class="language-plaintext highlighter-rouge">demo_nodes_py</code> ROS 2 package.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Shell C:
. &lt;install-space-with-ros2&gt;/setup.bash
ros2 run demo_nodes_py talker

</code></pre></div></div>

<hr>

<p>Now we start the ROS 1 listener.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Shell D:
. /opt/ros/melodic/setup.bash
# Or, on OSX, something like:
# . ~/ros_catkin_ws/install_isolated/setup.bash
rosrun roscpp_tutorials listener

</code></pre></div></div>

<h2 id="example-2-run-the-bridge-and-exchange-images">Example 2: run the bridge and exchange images</h2>

<p>The second example will demonstrate the bridge passing along bigger and more complicated messages.
A ROS 2 node is publishing images retrieved from a camera and on the ROS 1 side we use <code class="language-plaintext highlighter-rouge">rqt_image_view</code> to render the images in a GUI.
And a ROS 1 publisher can send a message to toggle an option in the ROS 2 node.</p>

<p>First we start a ROS 1 <code class="language-plaintext highlighter-rouge">roscore</code> and the bridge:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Shell A:
. /opt/ros/melodic/setup.bash
# Or, on OSX, something like:
# . ~/ros_catkin_ws/install_isolated/setup.bash
roscore

</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Shell B:
. /opt/ros/melodic/setup.bash
# Or, on OSX, something like:
# . ~/ros_catkin_ws/install_isolated/setup.bash
. &lt;workspace-with-bridge&gt;/install/setup.bash
export ROS_MASTER_URI=http://localhost:11311
ros2 run ros1_bridge dynamic_bridge

</code></pre></div></div>

<hr>

<p>Now we start the ROS 1 GUI:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Shell C:
. /opt/ros/melodic/setup.bash
# Or, on OSX, something like:
# . ~/ros_catkin_ws/install_isolated/setup.bash
rqt_image_view /image

</code></pre></div></div>

<p>–</p>

<p>Now we start the ROS 2 image publisher from the <code class="language-plaintext highlighter-rouge">image_tools</code> ROS 2 package:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Shell D:
. &lt;workspace-with-ros2&gt;/install/setup.bash
ros2 run image_tools cam2image

</code></pre></div></div>

<p>You should see the current images in <code class="language-plaintext highlighter-rouge">rqt_image_view</code> which are coming from the ROS 2 node <code class="language-plaintext highlighter-rouge">cam2image</code> and are being passed along by the bridge.</p>

<p>–</p>

<p>To exercise the bridge in the opposite direction at the same time you can publish a message to the ROS 2 node from ROS 1.
By publishing either <code class="language-plaintext highlighter-rouge">true</code> or <code class="language-plaintext highlighter-rouge">false</code> to the <code class="language-plaintext highlighter-rouge">flip_image</code> topic, the camera node will conditionally flip the image before sending it.
You can either use the <code class="language-plaintext highlighter-rouge">Message Publisher</code> plugin in <code class="language-plaintext highlighter-rouge">rqt</code> to publish a <code class="language-plaintext highlighter-rouge">std_msgs/Bool</code> message on the topic <code class="language-plaintext highlighter-rouge">flip_image</code>, or run one of the two following <code class="language-plaintext highlighter-rouge">rostopic</code> commands:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Shell E:
. /opt/ros/melodic/setup.bash
# Or, on OSX, something like:
# . ~/ros_catkin_ws/install_isolated/setup.bash
rostopic pub -r 1 /flip_image std_msgs/Bool "{data: true}"
rostopic pub -r 1 /flip_image std_msgs/Bool "{data: false}"

</code></pre></div></div>

<p>The screenshot shows all the shell windows and their expected content (it was taken when Indigo was supported - you should use Melodic):</p>

<p><img src="https://raw.githubusercontent.com/ros2/ros1_bridge/galactic/doc/ros2_camera_ros1_rqt.png" alt="ROS 2 camera and ROS 1 rqt"></p>

<h2 id="example-3-run-the-bridge-for-addtwoints-service">Example 3: run the bridge for AddTwoInts service</h2>

<p>In this example we will bridge a service TwoInts from
<a href="https://github.com/ros/ros_tutorials">ros/roscpp_tutorials</a> and AddTwoInts from
<a href="https://github.com/ros2/examples">ros2/roscpp_examples</a>.</p>

<p>While building, ros1_bridge looks for all installed ROS and ROS2 services.
Found services are matched by comparing package name, service name and fields in a request and a response.
If all names are the same in ROS and ROS2 service, the bridge will be created.
It is also possible to pair services manually by creating a yaml file that will include names of corresponding services.
You can find more information <a href="https://github.com/ros2/ros1_bridge/tree/galactic/doc/index.rst">here</a>.</p>

<p>So to make this example work, please make sure that the roscpp_tutorials package
is installed on your system and the environment is set up correctly while you build ros1_bridge.</p>

<p>Launch ROS master</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Shell A:
. &lt;ros-install-dir&gt;/setup.bash
roscore -p 11311

</code></pre></div></div>

<p>Launch dynamic_bridge:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Shell B:
. &lt;ros-install-dir&gt;/setup.bash
. &lt;ros2-install-dir&gt;/setup.bash
export ROS_MASTER_URI=http://localhost:11311
ros2 run ros1_bridge dynamic_bridge

</code></pre></div></div>

<p>Launch TwoInts server:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Shell C:
. &lt;ros-install-dir&gt;/setup.bash
export ROS_MASTER_URI=http://localhost:11311
rosrun roscpp_tutorials add_two_ints_server

</code></pre></div></div>

<p>Launch AddTwoInts client:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Shell D:
. &lt;ros2-install-dir&gt;/setup.bash
ros2 run demo_nodes_cpp add_two_ints_client

</code></pre></div></div>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>

<p>Contributors must sign-off each commit by adding a <code class="language-plaintext highlighter-rouge">Signed-off-by: ...</code>
line to commit messages to certify that they have the right to submit
the code they are contributing to the project according to the
<a href="https://developercertificate.org/">Developer Certificate of Origin (DCO)</a>.</p>
</div>
              <hr id="galactic-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="galactic-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#galactic-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#galactic-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#galactic-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="galactic-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="galactic-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="galactic-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros1_bridge">ros1_bridge</a> <small>repository</small></h3>
        <span class="label label-default">hacktoberfest</span> 
        
        <a class="label label-primary pkg-label" href="/p/ros1_bridge">ros1_bridge</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-ros1_bridge
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-ros1_bridge" role="menuitem" tabindex="-1" href="/r/ros1_bridge/github-ros2-ros1_bridge" data="github-ros2-ros1_bridge">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-ros1_bridge
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS 2 package that provides bidirectional communication between ROS 1 and ROS 2</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros2/ros1_bridge.git">https://github.com/ros2/ros1_bridge.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-03-31
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">hacktoberfest</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ros1_bridge/#iron-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros1_bridge/#iron-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros1_bridge/#iron-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ros1_bridge">ros1_bridge</a></td>
                    <td>0.10.3</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="bridge-communication-between-ros-1-and-ros-2">Bridge communication between ROS 1 and ROS 2</h1>

<p>This package provides a network bridge which enables the exchange of messages between ROS 1 and ROS 2.</p>

<p>The bridge is currently implemented in C++ as at the time the Python API for ROS 2 had not been developed.
Because of this its support is limited to only the message/service types available at compile time of the bridge.
The bridge provided with the prebuilt ROS 2 binaries includes support for common ROS interfaces (messages/services), such as the interface packages listed in the <a href="https://github.com/ros2/common_interfaces">ros2/common_interfaces repository</a> and <code class="language-plaintext highlighter-rouge">tf2_msgs</code>.
See <a href="https://github.com/ros2/ros1_bridge/tree/master/doc/index.rst">the documentation</a> for more details on how ROS 1 and ROS 2 interfaces are associated with each other.
If you would like to use a bridge with other interfaces (including your own custom types), you will have to build the bridge from source (instructions below), after building and sourcing your custom types in separate ROS 1 and ROS 2 workspaces.
See <a href="https://github.com/ros2/ros1_bridge/tree/master/doc/index.rst">the documentation</a> for an example setup.</p>

<p>For efficiency reasons, topics will only be bridged when matching publisher-subscriber pairs are active for a topic on either side of the bridge.
As a result using <code class="language-plaintext highlighter-rouge">ros2 topic echo &lt;topic-name&gt;</code> doesn’t work but fails with an error message <code class="language-plaintext highlighter-rouge">Could not determine the type for the passed topic</code> if no other subscribers are present since the dynamic bridge hasn’t bridged the topic yet.
As a workaround the topic type can be specified explicitly <code class="language-plaintext highlighter-rouge">ros2 topic echo &lt;topic-name&gt; &lt;topic-type&gt;</code> which triggers the bridging of the topic since the <code class="language-plaintext highlighter-rouge">echo</code> command represents the necessary subscriber.
On the ROS 1 side <code class="language-plaintext highlighter-rouge">rostopic echo</code> doesn’t have an option to specify the topic type explicitly.
Therefore it can’t be used with the dynamic bridge if no other subscribers are present.
As an alternative you can use the <code class="language-plaintext highlighter-rouge">--bridge-all-2to1-topics</code> option to bridge all ROS 2 topics to ROS 1 so that tools such as <code class="language-plaintext highlighter-rouge">rostopic echo</code>, <code class="language-plaintext highlighter-rouge">rostopic list</code> and <code class="language-plaintext highlighter-rouge">rqt</code> will see the topics even if there are no matching ROS 1 subscribers.
Run <code class="language-plaintext highlighter-rouge">ros2 run ros1_bridge dynamic_bridge -- --help</code> for more options.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>In order to run the bridge you need to either:</p>

<ul>
  <li>get <a href="https://github.com/ros2/ros2/releases">prebuilt binaries</a> or</li>
  <li>build the bridge as well as the other ROS 2 packages from source.</li>
</ul>

<p>After that you can run both examples described below.</p>

<p>For all examples you need to source the environment of the install space where the bridge was built or unpacked to.
Additionally you will need to either source the ROS 1 environment or at least set the <code class="language-plaintext highlighter-rouge">ROS_MASTER_URI</code> and run a <code class="language-plaintext highlighter-rouge">roscore</code>.</p>

<p>The following ROS 1 packages are required to build and use the bridge:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">catkin</code></li>
  <li><code class="language-plaintext highlighter-rouge">roscpp</code></li>
  <li>
<code class="language-plaintext highlighter-rouge">roslaunch</code> (for <code class="language-plaintext highlighter-rouge">roscore</code> executable)</li>
  <li><code class="language-plaintext highlighter-rouge">rosmsg</code></li>
  <li><code class="language-plaintext highlighter-rouge">std_msgs</code></li>
  <li>as well as the Python package <code class="language-plaintext highlighter-rouge">rospkg</code>
</li>
</ul>

<p>To run the following examples you will also need these ROS 1 packages:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">rosbash</code> (for <code class="language-plaintext highlighter-rouge">rosrun</code> executable)</li>
  <li><code class="language-plaintext highlighter-rouge">roscpp_tutorials</code></li>
  <li><code class="language-plaintext highlighter-rouge">rospy_tutorials</code></li>
  <li><code class="language-plaintext highlighter-rouge">rostopic</code></li>
  <li><code class="language-plaintext highlighter-rouge">rqt_image_view</code></li>
</ul>

<h3 id="prerequisites-for-the-examples-in-this-file">Prerequisites for the examples in this file</h3>

<p>In order to make the examples below portable between versions of ROS, we define two environment variables, <code class="language-plaintext highlighter-rouge">ROS1_INSTALL_PATH</code> and <code class="language-plaintext highlighter-rouge">ROS2_INSTALL_PATH</code>. 
These are defined as the paths to the installation location of their respective ROS versions.</p>

<p>If you installed Noetic in the default location, then the definition of <code class="language-plaintext highlighter-rouge">ROS1_INSTALL_PATH</code> will be <code class="language-plaintext highlighter-rouge">/opt/ros/noetic</code>.</p>

<p>Building the bridge as described below requires you to build all of ROS 2.
We assume that you have downloaded it to <code class="language-plaintext highlighter-rouge">~/ros2_rolling</code>, and that is where you plan on building it.
In this case, <code class="language-plaintext highlighter-rouge">ROS2_INSTALL_PATH</code> will be defined as <code class="language-plaintext highlighter-rouge">~/ros2_rolling/install</code>.</p>

<p>If you’ve chosen to install either or both versions of ROS somewhere else, you will need adjust the definitions below to match your installation paths.</p>

<p>Because these definitions are used continuously throughout this page, it is useful to add the following lines to your shell startup file (<code class="language-plaintext highlighter-rouge">~/.bashrc</code> if you are using <code class="language-plaintext highlighter-rouge">bash</code>, <code class="language-plaintext highlighter-rouge">~/.zshrc</code> if you are using <code class="language-plaintext highlighter-rouge">zsh</code>).
Modify these definitions as appropriate for the versions of ROS that you’re using, and for the shell that you’re using.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">ROS1_INSTALL_PATH</span><span class="o">=</span>/opt/ros/noetic
<span class="nb">export </span><span class="nv">ROS2_INSTALL_PATH</span><span class="o">=</span>~/ros2_rolling/install

</code></pre></div></div>

<p>Note that no trailing ‘/’ character is used in either definition.
If you have problems involving paths, please verify that you have the correct path to the installation location, and that you do not have a trailing ‘/’ in either definition.</p>

<h3 id="building-the-bridge-from-source">Building the bridge from source</h3>

<p>Before continuing you should have the prerequisites for building ROS 2 from source installed following <a href="https://github.com/ros2/ros2/wiki/Installation">these instructions</a>.</p>

<p>In the past, building this package required patches to ROS 1, but in the latest releases that is no longer the case.
If you run into trouble first make sure you have at least version <code class="language-plaintext highlighter-rouge">1.11.16</code> of <code class="language-plaintext highlighter-rouge">ros_comm</code> and <code class="language-plaintext highlighter-rouge">rosbag</code>.</p>

<p>The bridge uses <code class="language-plaintext highlighter-rouge">pkg-config</code> to find ROS 1 packages.
ROS 2 packages are found through CMake using <code class="language-plaintext highlighter-rouge">find_package()</code>.
Therefore the <code class="language-plaintext highlighter-rouge">CMAKE_PREFIX_PATH</code> must not contain paths from ROS 1 which would overlay ROS 2 packages.</p>

<p>Here are the steps for Linux and OSX.</p>

<p>You should first build everything but the ROS 1 bridge with normal colcon arguments.
We don’t recommend having your ROS 1 environment sourced during this step as it can add other libraries to the path.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>colcon build <span class="nt">--symlink-install</span> <span class="nt">--packages-skip</span> ros1_bridge

</code></pre></div></div>

<p>Next you need to source the ROS 1 environment.
If you set the <code class="language-plaintext highlighter-rouge">ROS1_INSTALL_PATH</code> environment variable as described above, then the following will source the correct <code class="language-plaintext highlighter-rouge">setup.bash</code> file.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>

</code></pre></div></div>

<p>The bridge will be built with support for any message/service packages that are on your path and have an associated mapping between ROS 1 and ROS 2.
Therefore you must add any ROS 1 or ROS 2 workspaces that have message/service packages that you want to be bridged to your path before building the bridge.
This can be done by adding explicit dependencies on the message/service packages to the <code class="language-plaintext highlighter-rouge">package.xml</code> of the bridge, so that <code class="language-plaintext highlighter-rouge">colcon</code> will add them to the path before it builds the bridge.
Alternatively you can do it manually by sourcing the relevant workspaces yourself, e.g.:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># You have already sourced your ROS installation.</span>
<span class="c"># Source your ROS 2 installation:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># And if you have a ROS 1 overlay workspace, something like:</span>
<span class="c"># . &lt;install-space-to-ros1-overlay-ws&gt;/setup.bash</span>
<span class="c"># And if you have a ROS 2 overlay workspace, something like:</span>
<span class="c"># . &lt;install-space-to-ros2-overlay-ws&gt;/local_setup.bash</span>

</code></pre></div></div>

<p>Then build just the ROS 1 bridge:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>colcon build <span class="nt">--symlink-install</span> <span class="nt">--packages-select</span> ros1_bridge <span class="nt">--cmake-force-configure</span>

</code></pre></div></div>

<p><em>Note:</em> If you are building on a memory constrained system you might want to limit the number of parallel jobs by setting e.g. the environment variable <code class="language-plaintext highlighter-rouge">MAKEFLAGS=-j1</code>.</p>

<h2 id="example-1-run-the-bridge-and-the-example-talker-and-listener">Example 1: run the bridge and the example talker and listener</h2>

<p>The talker and listener can be either a ROS 1 or a ROS 2 node.
The bridge will pass the message along transparently.</p>

<p><em>Note:</em> When you are running these demos make sure to only source the indicated workspaces.
You will get errors from most tools if they have both workspaces in their environment.</p>

<h3 id="example-1a-ros-1-talker-and-ros-2-listener">Example 1a: ROS 1 talker and ROS 2 listener</h3>

<p>First we start a ROS 1 <code class="language-plaintext highlighter-rouge">roscore</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A (ROS 1 only):</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
roscore

</code></pre></div></div>

<hr>

<p>Then we start the dynamic bridge which will watch the available ROS 1 and ROS 2 topics.
Once a <em>matching</em> topic has been detected it starts to bridge the messages on this topic.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell B (ROS 1 + ROS 2):</span>
<span class="c"># Source ROS 1 first:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
<span class="c"># Source ROS 2 next:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># For example:</span>
<span class="c"># . /opt/ros/dashing/setup.bash</span>
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
ros2 run ros1_bridge dynamic_bridge

</code></pre></div></div>

<p>The program will start outputting the currently available topics in ROS 1 and ROS 2 in a regular interval.</p>

<hr>

<p>Now we start the ROS 1 talker.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell C:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rosrun rospy_tutorials talker

</code></pre></div></div>

<p>The ROS 1 node will start printing the published messages to the console.</p>

<hr>

<p>Now we start the ROS 2 listener from the <code class="language-plaintext highlighter-rouge">demo_nodes_cpp</code> ROS 2 package.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run demo_nodes_cpp listener

</code></pre></div></div>

<p>The ROS 2 node will start printing the received messages to the console.</p>

<p>When looking at the output in <em>shell B</em> there will be a line stating that the bridge for this topic has been created:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>created 1to2 bridge <span class="k">for </span>topic <span class="s1">'/chatter'</span> with ROS 1 <span class="nb">type</span> <span class="s1">'std_msgs/String'</span> and ROS 2 <span class="nb">type</span> <span class="s1">'std_msgs/String'</span>

</code></pre></div></div>

<p>At the end stop all programs with <code class="language-plaintext highlighter-rouge">Ctrl-C</code>.
Once you stop either the talker or the listener in <em>shell B</em> a line will be stating that the bridge has been torn down:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>removed 1to2 bridge <span class="k">for </span>topic <span class="s1">'/chatter'</span>

</code></pre></div></div>

<p>The screenshot shows all the shell windows and their expected content:</p>

<p><img src="https://raw.githubusercontent.com/ros2/ros1_bridge/master/doc/ros1_talker_ros2_listener.png" alt="ROS 1 talker and ROS 2 listener"></p>

<h3 id="example-1b-ros-2-talker-and-ros-1-listener">Example 1b: ROS 2 talker and ROS 1 listener</h3>

<p>The steps are very similar to the previous example and therefore only the commands are described.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
roscore

</code></pre></div></div>

<hr>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell B:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
ros2 run ros1_bridge dynamic_bridge

</code></pre></div></div>

<hr>

<p>Now we start the ROS 2 talker from the <code class="language-plaintext highlighter-rouge">demo_nodes_py</code> ROS 2 package.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell C:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run demo_nodes_py talker

</code></pre></div></div>

<hr>

<p>Now we start the ROS 1 listener.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rosrun roscpp_tutorials listener

</code></pre></div></div>

<h2 id="example-2-run-the-bridge-and-exchange-images">Example 2: run the bridge and exchange images</h2>

<p>The second example will demonstrate the bridge passing along bigger and more complicated messages.
A ROS 2 node is publishing images retrieved from a camera and on the ROS 1 side we use <code class="language-plaintext highlighter-rouge">rqt_image_view</code> to render the images in a GUI.
And a ROS 1 publisher can send a message to toggle an option in the ROS 2 node.</p>

<p>First we start a ROS 1 <code class="language-plaintext highlighter-rouge">roscore</code> and the bridge:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
roscore

</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell B:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/install/setup.bash
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
ros2 run ros1_bridge dynamic_bridge

</code></pre></div></div>

<hr>

<p>Now we start the ROS 1 GUI:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell C:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rqt_image_view /image

</code></pre></div></div>

<hr>

<p>Now we start the ROS 2 image publisher from the <code class="language-plaintext highlighter-rouge">image_tools</code> ROS 2 package:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/install/setup.bash
ros2 run image_tools cam2image

</code></pre></div></div>

<p>You should see the current images in <code class="language-plaintext highlighter-rouge">rqt_image_view</code> which are coming from the ROS 2 node <code class="language-plaintext highlighter-rouge">cam2image</code> and are being passed along by the bridge.</p>

<hr>

<p>To exercise the bridge in the opposite direction at the same time you can publish a message to the ROS 2 node from ROS 1.
By publishing either <code class="language-plaintext highlighter-rouge">true</code> or <code class="language-plaintext highlighter-rouge">false</code> to the <code class="language-plaintext highlighter-rouge">flip_image</code> topic, the camera node will conditionally flip the image before sending it.
You can either use the <code class="language-plaintext highlighter-rouge">Message Publisher</code> plugin in <code class="language-plaintext highlighter-rouge">rqt</code> to publish a <code class="language-plaintext highlighter-rouge">std_msgs/Bool</code> message on the topic <code class="language-plaintext highlighter-rouge">flip_image</code>, or run one of the two following <code class="language-plaintext highlighter-rouge">rostopic</code> commands:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell E:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rostopic pub <span class="nt">-r</span> 1 /flip_image std_msgs/Bool <span class="s2">"{data: true}"</span>
rostopic pub <span class="nt">-r</span> 1 /flip_image std_msgs/Bool <span class="s2">"{data: false}"</span>

</code></pre></div></div>

<p>The screenshot shows all the shell windows and their expected content (it was taken when Indigo was supported - you should use Melodic):</p>

<p><img src="https://raw.githubusercontent.com/ros2/ros1_bridge/master/doc/ros2_camera_ros1_rqt.png" alt="ROS 2 camera and ROS 1 rqt"></p>

<h2 id="example-3-run-the-bridge-for-addtwoints-service">Example 3: run the bridge for AddTwoInts service</h2>

<p>In this example we will bridge a service TwoInts from
<a href="https://github.com/ros/ros_tutorials">ros/roscpp_tutorials</a> and AddTwoInts from
<a href="https://github.com/ros2/examples">ros2/roscpp_examples</a>.</p>

<p>While building, ros1_bridge looks for all installed ROS and ROS2 services.
Found services are matched by comparing package name, service name and fields in a request and a response.
If all names are the same in ROS and ROS2 service, the bridge will be created.
It is also possible to pair services manually by creating a yaml file that will include names of corresponding services.
You can find more information <a href="https://github.com/ros2/ros1_bridge/tree/master/doc/index.rst">here</a>.</p>

<p>So to make this example work, please make sure that the roscpp_tutorials package
is installed on your system and the environment is set up correctly while you build ros1_bridge.</p>

<p>Launch ROS master</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
roscore <span class="nt">-p</span> 11311

</code></pre></div></div>

<p>Launch dynamic_bridge:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell B:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
ros2 run ros1_bridge dynamic_bridge

</code></pre></div></div>

<p>Launch TwoInts server:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell C:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="nb">export </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311
rosrun roscpp_tutorials add_two_ints_server

</code></pre></div></div>

<p>Launch AddTwoInts client:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run demo_nodes_cpp add_two_ints_client

</code></pre></div></div>

<h2 id="example-4-bridge-only-selected-topics-and-services">Example 4: bridge only selected topics and services</h2>
<p>This example expands on example 3 by selecting a subset of topics and services to be bridged.
This is handy when, for example, you have a system that runs most of it’s stuff in either ROS 1 or ROS 2 but needs a few nodes from the ‘opposite’ version of ROS.
Where the <code class="language-plaintext highlighter-rouge">dynamic_bridge</code> bridges all topics and service, the <code class="language-plaintext highlighter-rouge">parameter_bridge</code> uses the ROS 1 parameter server to choose which topics and services are bridged.
<strong>Note</strong>: The service bridge is <strong>monodirectional</strong>. You must use either <code class="language-plaintext highlighter-rouge">services_2_to_1</code> and/or <code class="language-plaintext highlighter-rouge">services_1_to_2</code> to bridge ROS 2 -&gt; ROS 1 or ROS 1 -&gt; ROS 2 services accordingly.
For example, to bridge only the <code class="language-plaintext highlighter-rouge">/chatter</code> topic bidirectionally, and the <code class="language-plaintext highlighter-rouge">/add_two_ints service</code> from ROS 2 to ROS 1 only, create this configuration file, <code class="language-plaintext highlighter-rouge">bridge.yaml</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">topics</span><span class="pi">:</span>
  <span class="pi">-</span>
    <span class="na">topic</span><span class="pi">:</span> <span class="s">/chatter</span>  <span class="c1"># Topic name on both ROS 1 and ROS 2</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">std_msgs/msg/String</span>  <span class="c1"># Type of topic to bridge</span>
    <span class="na">queue_size</span><span class="pi">:</span> <span class="m">1</span>  <span class="c1"># Queue size</span>
<span class="na">services_2_to_1</span><span class="pi">:</span>
  <span class="pi">-</span>
    <span class="na">service</span><span class="pi">:</span> <span class="s">/add_two_ints</span>  <span class="c1"># ROS 1 service name</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">roscpp_tutorials/TwoInts</span>  <span class="c1"># The ROS 1 service type name</span>

</code></pre></div></div>

<p>Start a ROS 1 roscore:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell A (ROS 1 only):</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
roscore

</code></pre></div></div>

<p>Then load the bridge.yaml config file and start the talker to publish on the <code class="language-plaintext highlighter-rouge">/chatter</code> topic:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Shell B: <span class="o">(</span>ROS 1 only<span class="o">)</span>:
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>
rosparam load bridge.yaml

rosrun rospy_tutorials talker

</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Shell C: <span class="o">(</span>ROS 1 only<span class="o">)</span>:
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS1_INSTALL_PATH</span><span class="k">}</span>/setup.bash
<span class="c"># Or, on OSX, something like:</span>
<span class="c"># . ~/ros_catkin_ws/install_isolated/setup.bash</span>

rosrun roscpp_tutorials add_two_ints_server

</code></pre></div></div>

<p>Then, in a few ROS 2 terminals:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell D:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run ros1_bridge parameter_bridge

</code></pre></div></div>

<p>If all is well, the logging shows it is creating bridges for the topic and service and you should be able to call the service and listen to the ROS 1 talker from ROS 2:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell E:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 run demo_nodes_cpp listener

</code></pre></div></div>
<p>This should start printing text like <code class="language-plaintext highlighter-rouge">I heard: [hello world ...]</code> with a timestamp.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell F:</span>
<span class="nb">source</span> <span class="k">${</span><span class="nv">ROS2_INSTALL_PATH</span><span class="k">}</span>/setup.bash
ros2 service call /add_two_ints example_interfaces/srv/AddTwoInts <span class="s2">"{a: 1, b: 2}"</span>

</code></pre></div></div>
<p>If all is well, the output should contain <code class="language-plaintext highlighter-rouge">example_interfaces.srv.AddTwoInts_Response(sum=3)</code></p>

<h3 id="parametrizing-quality-of-service">Parametrizing Quality of Service</h3>
<p>An advantage of ROS 2 over ROS 1 is the possibility to define different Quality of Service settings per topic.
The parameter bridge optionally allows for this as well.
For some topics, like <code class="language-plaintext highlighter-rouge">/tf_static</code> this is actually required, as this is a latching topic in ROS 1.
In ROS 2 with the <code class="language-plaintext highlighter-rouge">parameter_bridge</code>, this requires that topic to be configured as such:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">topics</span><span class="pi">:</span>
  <span class="pi">-</span>
    <span class="na">topic</span><span class="pi">:</span> <span class="s">/tf_static</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">tf2_msgs/msg/TFMessage</span>
    <span class="na">queue_size</span><span class="pi">:</span> <span class="m">1</span>
    <span class="na">qos</span><span class="pi">:</span>
      <span class="na">history</span><span class="pi">:</span> <span class="s">keep_all</span>
      <span class="na">durability</span><span class="pi">:</span> <span class="s">transient_local</span>

</code></pre></div></div>

<p>All other QoS options (as documented here in https://docs.ros.org/en/foxy/Concepts/About-Quality-of-Service-Settings.html) are available:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">topics</span><span class="pi">:</span>
  <span class="pi">-</span>
    <span class="na">topic</span><span class="pi">:</span> <span class="s">/some_ros1_topic</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">std_msgs/msg/String</span>
    <span class="na">queue_size</span><span class="pi">:</span> <span class="m">1</span>
    <span class="na">qos</span><span class="pi">:</span>
      <span class="na">history</span><span class="pi">:</span> <span class="s">keep_last</span>  <span class="c1"># OR keep_all, then you can omit `depth` parameter below</span>
      <span class="na">depth</span><span class="pi">:</span> <span class="m">10</span>  <span class="c1"># Only required when history == keep_last</span>
      <span class="na">reliability</span><span class="pi">:</span> <span class="s">reliable</span>  <span class="c1"># OR best_effort</span>
      <span class="na">durability</span><span class="pi">:</span> <span class="s">transient_local</span>  <span class="c1"># OR volatile</span>
      <span class="na">deadline</span><span class="pi">:</span>
          <span class="na">secs</span><span class="pi">:</span> <span class="m">10</span>
          <span class="na">nsecs</span><span class="pi">:</span> <span class="m">2345</span>
      <span class="na">lifespan</span><span class="pi">:</span>
          <span class="na">secs</span><span class="pi">:</span> <span class="m">20</span>
          <span class="na">nsecs</span><span class="pi">:</span> <span class="m">3456</span>
      <span class="na">liveliness</span><span class="pi">:</span> <span class="s">liveliness_system_default</span>  <span class="c1"># Values from https://design.ros2.org/articles/qos_deadline_liveliness_lifespan.html, eg. LIVELINESS_AUTOMATIC</span>
      <span class="na">liveliness_lease_duration</span><span class="pi">:</span>
          <span class="na">secs</span><span class="pi">:</span> <span class="m">40</span>
          <span class="na">nsecs</span><span class="pi">:</span> <span class="m">5678</span>

</code></pre></div></div>

<p>Note that the <code class="language-plaintext highlighter-rouge">qos</code> section can be omitted entirely and options not set are left default.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>

<p>Contributors must sign-off each commit by adding a <code class="language-plaintext highlighter-rouge">Signed-off-by: ...</code>
line to commit messages to certify that they have the right to submit
the code they are contributing to the project according to the
<a href="https://developercertificate.org/">Developer Certificate of Origin (DCO)</a>.</p>
</div>
              <hr id="iron-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="iron-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#iron-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#iron-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#iron-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="iron-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="iron-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="iron-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros1_bridge">ros1_bridge</a> <small>repository</small></h3>
        <span class="label label-default">hacktoberfest</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-ros1_bridge
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-ros1_bridge" role="menuitem" tabindex="-1" href="/r/ros1_bridge/github-ros2-ros1_bridge" data="github-ros2-ros1_bridge">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-ros1_bridge
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/ros2/ros1_bridge.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
