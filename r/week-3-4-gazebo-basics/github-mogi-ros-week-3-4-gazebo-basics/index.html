<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/week-3-4-gazebo-basics/github-mogi-ros-week-3-4-gazebo-basics/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">week-3-4-gazebo-basics</li>
        <!--<li class="active">week-3-4-gazebo-basics</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-default" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-default" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-default" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-default" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-primary" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class="disabled older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/week-3-4-gazebo-basics">week-3-4-gazebo-basics</a> <small>repository</small></h3>
        <span class="label label-default">gazebo</span> <span class="label label-default">sdf</span> <span class="label label-default">urdf</span> <span class="label label-default">collada</span> <span class="label label-default">harmonic</span> <span class="label label-default">rqt</span> <span class="label label-default">ros2</span> <span class="label label-default">mecanum-drive</span> <span class="label label-default">diff-drive</span> <span class="label label-default">rqt-graph</span> <span class="label label-default">diff-drive-robot</span> <span class="label label-default">skid-steering</span> <span class="label label-default">ros2-jazzy</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mogi-ros-week-3-4-gazebo-basics
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mogi-ros-week-3-4-gazebo-basics" role="menuitem" tabindex="-1" href="/r/week-3-4-gazebo-basics/github-mogi-ros-week-3-4-gazebo-basics" data="github-mogi-ros-week-3-4-gazebo-basics">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mogi-ros-week-3-4-gazebo-basics
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>humble</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/week-3-4-gazebo-basics">week-3-4-gazebo-basics</a> <small>repository</small></h3>
        <span class="label label-default">gazebo</span> <span class="label label-default">sdf</span> <span class="label label-default">urdf</span> <span class="label label-default">collada</span> <span class="label label-default">harmonic</span> <span class="label label-default">rqt</span> <span class="label label-default">ros2</span> <span class="label label-default">mecanum-drive</span> <span class="label label-default">diff-drive</span> <span class="label label-default">rqt-graph</span> <span class="label label-default">diff-drive-robot</span> <span class="label label-default">skid-steering</span> <span class="label label-default">ros2-jazzy</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mogi-ros-week-3-4-gazebo-basics
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mogi-ros-week-3-4-gazebo-basics" role="menuitem" tabindex="-1" href="/r/week-3-4-gazebo-basics/github-mogi-ros-week-3-4-gazebo-basics" data="github-mogi-ros-week-3-4-gazebo-basics">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mogi-ros-week-3-4-gazebo-basics
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jazzy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/week-3-4-gazebo-basics">week-3-4-gazebo-basics</a> <small>repository</small></h3>
        <span class="label label-default">gazebo</span> <span class="label label-default">sdf</span> <span class="label label-default">urdf</span> <span class="label label-default">collada</span> <span class="label label-default">harmonic</span> <span class="label label-default">rqt</span> <span class="label label-default">ros2</span> <span class="label label-default">mecanum-drive</span> <span class="label label-default">diff-drive</span> <span class="label label-default">rqt-graph</span> <span class="label label-default">diff-drive-robot</span> <span class="label label-default">skid-steering</span> <span class="label label-default">ros2-jazzy</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mogi-ros-week-3-4-gazebo-basics
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mogi-ros-week-3-4-gazebo-basics" role="menuitem" tabindex="-1" href="/r/week-3-4-gazebo-basics/github-mogi-ros-week-3-4-gazebo-basics" data="github-mogi-ros-week-3-4-gazebo-basics">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mogi-ros-week-3-4-gazebo-basics
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>kilted</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/week-3-4-gazebo-basics">week-3-4-gazebo-basics</a> <small>repository</small></h3>
        <span class="label label-default">gazebo</span> <span class="label label-default">sdf</span> <span class="label label-default">urdf</span> <span class="label label-default">collada</span> <span class="label label-default">harmonic</span> <span class="label label-default">rqt</span> <span class="label label-default">ros2</span> <span class="label label-default">mecanum-drive</span> <span class="label label-default">diff-drive</span> <span class="label label-default">rqt-graph</span> <span class="label label-default">diff-drive-robot</span> <span class="label label-default">skid-steering</span> <span class="label label-default">ros2-jazzy</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mogi-ros-week-3-4-gazebo-basics
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mogi-ros-week-3-4-gazebo-basics" role="menuitem" tabindex="-1" href="/r/week-3-4-gazebo-basics/github-mogi-ros-week-3-4-gazebo-basics" data="github-mogi-ros-week-3-4-gazebo-basics">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mogi-ros-week-3-4-gazebo-basics
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>rolling</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/week-3-4-gazebo-basics">week-3-4-gazebo-basics</a> <small>repository</small></h3>
        <span class="label label-default">gazebo</span> <span class="label label-default">sdf</span> <span class="label label-default">urdf</span> <span class="label label-default">collada</span> <span class="label label-default">harmonic</span> <span class="label label-default">rqt</span> <span class="label label-default">ros2</span> <span class="label label-default">mecanum-drive</span> <span class="label label-default">diff-drive</span> <span class="label label-default">rqt-graph</span> <span class="label label-default">diff-drive-robot</span> <span class="label label-default">skid-steering</span> <span class="label label-default">ros2-jazzy</span> 
        
        <a class="label label-primary pkg-label" href="/p/bme_gazebo_basics">bme_gazebo_basics</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mogi-ros-week-3-4-gazebo-basics
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mogi-ros-week-3-4-gazebo-basics" role="menuitem" tabindex="-1" href="/r/week-3-4-gazebo-basics/github-mogi-ros-week-3-4-gazebo-basics" data="github-mogi-ros-week-3-4-gazebo-basics">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mogi-ros-week-3-4-gazebo-basics
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Introduction to URDF and Gazebo Harmonic with ROS2 Jazzy</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/mogi-ros/week-3-4-gazebo-basics.git">https://github.com/mogi-ros/week-3-4-gazebo-basics.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-12-17
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNKNOWN
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">gazebo</span> <span class="label label-default">sdf</span> <span class="label label-default">urdf</span> <span class="label label-default">collada</span> <span class="label label-default">harmonic</span> <span class="label label-default">rqt</span> <span class="label label-default">ros2</span> <span class="label label-default">mecanum-drive</span> <span class="label label-default">diff-drive</span> <span class="label label-default">rqt-graph</span> <span class="label label-default">diff-drive-robot</span> <span class="label label-default">skid-steering</span> <span class="label label-default">ros2-jazzy</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/week-3-4-gazebo-basics/#github-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/week-3-4-gazebo-basics/#github-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/week-3-4-gazebo-basics/#github-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/bme_gazebo_basics">bme_gazebo_basics</a></td>
                    <td>1.0.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="week-3-4-gazebo-basics">Week 3-4: Gazebo basics</h1>

<h2 id="this-is-how-far-we-will-get-by-the-end-of-this-lesson">This is how far we will get by the end of this lesson:</h2>
<p><a href="https://youtu.be/FuJuLnJy93g"><img width="600" src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/youtube-gazebo.png"></a></p>

<h1 id="table-of-contents">Table of Contents</h1>
<ol>
  <li><a href="https://github.com/mogi-ros/week-3-4-gazebo-basics/tree/main/#what-is-gazebo">What is Gazebo</a></li>
  <li>
<a href="https://github.com/mogi-ros/week-3-4-gazebo-basics/tree/main/#install-gazebo">Install Gazebo</a><br>
2.1. <a href="https://github.com/mogi-ros/week-3-4-gazebo-basics/tree/main/#run-gazebo-examples">Run Gazebo examples</a>
</li>
  <li><a href="https://github.com/mogi-ros/week-3-4-gazebo-basics/tree/main/#download-ros-package">Download ROS package</a></li>
  <li>
<a href="https://github.com/mogi-ros/week-3-4-gazebo-basics/tree/main/#creating-a-gazebo-world">Creating a Gazebo world</a><br>
4.1. <a href="https://github.com/mogi-ros/week-3-4-gazebo-basics/tree/main/#launch-gazebo-world-from-ros">Launch Gazebo world from ROS</a>
</li>
  <li>
<a href="https://github.com/mogi-ros/week-3-4-gazebo-basics/tree/main/#urdf">URDF</a><br>
5.1. <a href="https://github.com/mogi-ros/week-3-4-gazebo-basics/tree/main/#building-our-robot-1">Building our robot 1</a><br>
5.2. <a href="https://github.com/mogi-ros/week-3-4-gazebo-basics/tree/main/#view-the-robot-in-rviz">View the robot in RViz</a><br>
5.3. <a href="https://github.com/mogi-ros/week-3-4-gazebo-basics/tree/main/#building-our-robot-2">Building our robot 2</a><br>
5.4. <a href="https://github.com/mogi-ros/week-3-4-gazebo-basics/tree/main/#tf-tree">TF Tree</a><br>
5.5. <a href="https://github.com/mogi-ros/week-3-4-gazebo-basics/tree/main/#add-some-colors">Add some colors</a><br>
5.6. <a href="https://github.com/mogi-ros/week-3-4-gazebo-basics/tree/main/#load-the-urdf-in-gazebo">Load the URDF in Gazebo</a>
</li>
  <li>
<a href="https://github.com/mogi-ros/week-3-4-gazebo-basics/tree/main/#gazebo-integration">Gazebo integration</a><br>
6.1. <a href="https://github.com/mogi-ros/week-3-4-gazebo-basics/tree/main/#diff-drive-plugin">Diff drive plugin</a><br>
6.2. <a href="https://github.com/mogi-ros/week-3-4-gazebo-basics/tree/main/#ros-gz-bridge">ROS gz bridge</a><br>
6.3. <a href="https://github.com/mogi-ros/week-3-4-gazebo-basics/tree/main/#driving-around">Driving around</a><br>
6.4. <a href="https://github.com/mogi-ros/week-3-4-gazebo-basics/tree/main/#odometry-and-trajectory-server">Odometry and Trajectory server</a>
</li>
  <li><a href="https://github.com/mogi-ros/week-3-4-gazebo-basics/tree/main/#3d-models">3D models</a></li>
  <li><a href="https://github.com/mogi-ros/week-3-4-gazebo-basics/tree/main/#skid-steer">Skid steer</a></li>
  <li><a href="https://github.com/mogi-ros/week-3-4-gazebo-basics/tree/main/#mecanum-wheel">Mecanum wheel</a></li>
</ol>

<h1 id="what-is-gazebo">What is Gazebo</h1>
<p>Gazebo is a powerful robotics simulation tool that provides a 3D environment for simulating robots, sensors, and objects. It is widely used in the ROS ecosystem for testing and developing robotics algorithms in a realistic virtual environment before deploying them to real hardware.</p>

<p>Gazebo integrates tightly with ROS, enabling simulation and control of robots using ROS topics, services, and actions. In ROS2 with the latest Gazebo releases the integration is facilitated by <code class="language-plaintext highlighter-rouge">ros_gz</code>.</p>

<p>Key Features of Gazebo:</p>

<ul>
  <li>3D Physics Engine:
  Simulates rigid body dynamics, collision detection, and other physics phenomena using engines like ODE, Bullet, and DART.</li>
  <li>Realistic Sensors:
  Simulates cameras, LiDAR, IMUs, GPS, and other sensors with configurable parameters.</li>
  <li>Plugins:
  Extensible via plugins to control robots, customize physics, or add functionality.</li>
  <li>Worlds and Models:
  Enables users to create complex environments with pre-built or custom objects and robots.</li>
</ul>

<p>Besides Gazebo, there are many alternative simulation environments for ROS, but usually the setup of these simulators are more complicated and less documented. Certain simulators also have very high requirements for the GPU.</p>

<table>
  <thead>
    <tr>
      <th><strong>Simulator</strong></th>
      <th><strong>Best For</strong></th>
      <th><strong>Advantages</strong></th>
      <th><strong>Disadvantages</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Gazebo</strong></td>
      <td>General robotics simulation in ROS</td>
      <td>Free, accurate physics, ROS support</td>
      <td>Moderate visuals, resource-heavy</td>
    </tr>
    <tr>
      <td><strong>Unity</strong></td>
      <td>High-fidelity visuals and AI/ML tasks</td>
      <td>Realistic graphics, AI tools</td>
      <td>Steep learning curve, not robotics-specific</td>
    </tr>
    <tr>
      <td><strong>Webots</strong></td>
      <td>Beginner-friendly robotics simulation</td>
      <td>Easy setup, cross-platform</td>
      <td>Limited graphics, less customizable</td>
    </tr>
    <tr>
      <td><strong>Isaac Sim</strong></td>
      <td>High-end AI and robotics simulation</td>
      <td>High-fidelity physics, AI support</td>
      <td>GPU-intensive, complex setup</td>
    </tr>
  </tbody>
</table>

<h1 id="install-gazebo">Install Gazebo</h1>

<p>Before we install Gazebo we have to understand the compatibility between Gazebo versions and ROS distributions.</p>

<table>
  <thead>
    <tr>
      <th><strong>ROS Distribution</strong></th>
      <th><strong>Gazebo Citadel (LTS)</strong></th>
      <th><strong>Gazebo Fortress (LTS)</strong></th>
      <th><strong>Gazebo Garden</strong></th>
      <th><strong>Gazebo Harmonic (LTS)</strong></th>
      <th><strong>Gazebo Ionic</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>ROS 2 Rolling</strong></td>
      <td>❌</td>
      <td>❌</td>
      <td>⚡</td>
      <td>⚡</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><strong>ROS 2 Jazzy (LTS)</strong></td>
      <td>❌</td>
      <td>❌</td>
      <td>⚡</td>
      <td>✅</td>
      <td>❌</td>
    </tr>
    <tr>
      <td><strong>ROS 2 Iron</strong></td>
      <td>❌</td>
      <td>✅</td>
      <td>⚡</td>
      <td>⚡</td>
      <td>❌</td>
    </tr>
    <tr>
      <td><strong>ROS 2 Humble (LTS)</strong></td>
      <td>❌</td>
      <td>✅</td>
      <td>⚡</td>
      <td>⚡</td>
      <td>❌</td>
    </tr>
    <tr>
      <td><strong>ROS 2 Foxy (LTS)</strong></td>
      <td>✅</td>
      <td>❌</td>
      <td>❌</td>
      <td>❌</td>
      <td>❌</td>
    </tr>
    <tr>
      <td><strong>ROS 1 Noetic (LTS)</strong></td>
      <td>✅</td>
      <td>⚡</td>
      <td>❌</td>
      <td>❌</td>
      <td>❌</td>
    </tr>
  </tbody>
</table>

<p>Since we use the latest LTS ROS2 distribution, Jazzy, we need Gazebo Harmonic.</p>

<p>To install Gazebo Harmonic binaries on Ubuntu 24.04 simply follow the steps <a href="https://gazebosim.org/docs/harmonic/install_ubuntu/">on this link</a>.</p>

<p>Once it’s installed we can try it with the following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gz sim shapes.sdf

</code></pre></div></div>

<p>If everything works well you should see the following screen:
<img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/gazebo.png" alt="alt text" title="Shapes.sdf"></p>

<p>If you have a problem with opening this example <code class="language-plaintext highlighter-rouge">shapes.sdf</code> there might be various reasons that requires some debugging skills with Gazebo and Linux.</p>

<ul>
  <li>If you see a <code class="language-plaintext highlighter-rouge">Segmentation fault (Address not mapped to object [(nil)])</code> due to problems with <code class="language-plaintext highlighter-rouge">Qt</code> you can try to set the following environmental variable to force Qt to use X11 instead of Wayland. <a href="https://robotics.stackexchange.com/questions/111547/gazebo-crashes-immediately-segmentation-fault-address-not-mapped-to-object-0">Link</a>
</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nb">export </span><span class="nv">QT_QPA_PLATFORM</span><span class="o">=</span>xcb
    
</code></pre></div></div>

<ul>
  <li>If you run Gazebo in WSL2 or virtual machine the most common problem is with the 3D acceleration with the OGRE2 rendering engine of Gazebo. You can either try disabling HW acceleration (not recommended) or you can switch the older OGRE rendering engine with the following arguments. <a href="https://github.com/gazebosim/gz-sim/issues/1492">Link</a>
</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    gz sim shapes.sdf <span class="nt">--render-engine</span> ogre
    
</code></pre></div></div>

<ul>
  <li>If you run Ubuntu natively on a machine with an integrated Intel GPU and a discrete GPU you can check <a href="https://gazebosim.org/docs/harmonic/troubleshooting/#problems-with-dual-intel-and-nvidia-gpu-systems">this troubleshooting guide</a>.</li>
</ul>

<p>After Gazebo successfully starts we can install the Gazebo ROS integration with the following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>ros-jazzy-ros-gz

</code></pre></div></div>

<p>You can find the official install guide <a href="https://gazebosim.org/docs/harmonic/ros_installation/">here</a>.</p>

<h2 id="run-gazebo-examples">Run Gazebo examples</h2>

<p>Let’s start again the <code class="language-plaintext highlighter-rouge">gz sim shapes.sdf</code> example again and let’s see what is important on the Gazebo GUI:
<img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/gazebo-1.png" alt="alt text" title="Gazebo GUI"></p>

<ol>
  <li>Blue - Start and pause the simulation. By default Gazebo starts the simulation paused but if you add the <code class="language-plaintext highlighter-rouge">-r</code> when you start Gazebo it automatically starts the simulation.</li>
  <li>Cyan - The display shows the real time factor. It should be always close to 100%, if it drops seriously (below 60-70%) it’s recommended to change the simulation step size. We’ll see this later.</li>
  <li>Red - You can add basic shapes or lights here and you can move and rotate them.</li>
  <li>Pink - The model hierarchy, every item in the simulation is shown here, you can check the links (children) of the model, their collision, inertia, etc.</li>
  <li>Green - Detailed information of the selected model in <code class="language-plaintext highlighter-rouge">4.</code> some parameters can be changed most of them are read only.</li>
  <li>Plug-in browser, we’ll open useful tools like <code class="language-plaintext highlighter-rouge">Resource Spawner</code>, <code class="language-plaintext highlighter-rouge">Visualize Lidar</code>, <code class="language-plaintext highlighter-rouge">Image Display</code>, etc.</li>
</ol>

<p>Gazebo has an online model database available <a href="https://app.gazebosim.org/">here</a>, you can browse and download models from here. Normally this online model library is accessible within Gazebo although there might be issues in WSL2 or in virtual machines, so I prepared an offline model library with some basic models.</p>

<p>You can <a href="https://drive.google.com/file/d/1tcfoLFReEW1XNHPUAeLpIz2iZXqQBvo_/view?usp=share_link">download this offline model library</a> from Google Drive.</p>

<p>After download unzip it and place it in the home folder of your user. To let Gazebo know about the offline model library we have to set the <code class="language-plaintext highlighter-rouge">GZ_SIM_RESOURCE_PATH</code> environmental variable, the best is to add it to the <code class="language-plaintext highlighter-rouge">.bashrc</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">GZ_SIM_RESOURCE_PATH</span><span class="o">=</span>~/gazebo_models

</code></pre></div></div>

<p>After setting up the offline model library let’s open the <code class="language-plaintext highlighter-rouge">empty.sdf</code> in Gazebo and add a few models through the <code class="language-plaintext highlighter-rouge">Resource Spawner</code> within the <code class="language-plaintext highlighter-rouge">plug-in browser</code>:
<img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/gazebo-2.png" alt="alt text" title="Gazebo models"></p>

<h1 id="download-ros-package">Download ROS package</h1>

<p>From now, every lesson has a starter package that you can donwload from GitHub. To download the starter package clone the following git repo with the right branch (with the <code class="language-plaintext highlighter-rouge">-b branch</code> flag) to your colcon workspace:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone <span class="nt">-b</span> starter-branch https://github.com/MOGI-ROS/Week-3-4-Gazebo-basics.git

</code></pre></div></div>

<p>Let’s see what’s inside the <code class="language-plaintext highlighter-rouge">bme_gazebo_basics</code> package with the <code class="language-plaintext highlighter-rouge">tree</code> command!</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">.</span>
├── CMakeLists.txt
├── package.xml
├── meshes
│   ├── mecanum_wheel_left.STL
│   ├── mecanum_wheel_right.STL
│   ├── mogi_bot.blend
│   ├── mogi_bot.dae
│   ├── mogi_bot.SLDPRT
│   ├── mogi_bot.STEP
│   ├── mogi_bot.STL
│   ├── wheel.blend
│   ├── wheel.dae
│   ├── wheel.SLDPRT
│   ├── wheel.STEP
│   └── wheel.STL
├── rviz
│   ├── rviz.rviz
│   └── urdf.rviz
├── urdf
│   └──materials.xacro
└── worlds
    ├── empty.sdf
    └── world.sdf

</code></pre></div></div>

<p>There are a few folders that we didn’t met before:</p>
<ul>
  <li>meshes: this folder contains the 3D models in <code class="language-plaintext highlighter-rouge">dae</code> format (collada mesh) that we’ll use later for our robot’s body and wheels. In this lesson it also includes the SolidWorks and Blender models as reference, but it’s not needed for the simulation.</li>
  <li>rviz: pre-configured RViz2 layouts that we can use to display the robot’s model and the environment</li>
  <li>urdf: URDF = Universal Robot Description Format. We’ll create the model of our robots in this folder. It already has a file with color codes and names.</li>
  <li>worlds: we’ll store the Gazebo worlds that we use in the simulation. In the next chapter we learn how to create a Gazebo world.</li>
</ul>

<h1 id="creating-a-gazebo-world">Creating a Gazebo world</h1>

<p>Before we create a new world, let’s see how can we open the example <code class="language-plaintext highlighter-rouge">world.sdf</code>. Let’s navigate to the <code class="language-plaintext highlighter-rouge">worlds</code> folder and run the following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gz sim world.sdf

</code></pre></div></div>

<blockquote>
  <p>In case you have problem with the default OGRE2 rendering engine you can switch to OGRE:</p>

  <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>gz sim world.sdf <span class="nt">--render-engine</span> ogre

</code></pre></div>  </div>
</blockquote>

<p>And it should open the example world I created for this package.
<img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/gazebo-3.png" alt="alt text" title="Gazebo world"></p>

<p>Now let’s switch to the empty template:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gz sim empty.sdf

</code></pre></div></div>

<p>Build a world you like using the resource spawner and in the end save it into the worlds folder with <code class="language-plaintext highlighter-rouge">sdf</code> extension.
<img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/gazebo-4.png" alt="alt text" title="Gazebo world"></p>

<h2 id="launch-gazebo-world-from-ros">Launch Gazebo world from ROS</h2>

<p>After we created the new world file, let’s see how can we launch Gazebo and load the world using ROS. First, let’s create a <code class="language-plaintext highlighter-rouge">launch</code> folder within the package. Inside this folder let’s create a new launch file <code class="language-plaintext highlighter-rouge">world.launch.py</code>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">os</span>
<span class="kn">from</span> <span class="n">ament_index_python.packages</span> <span class="kn">import</span> <span class="n">get_package_share_directory</span>
<span class="kn">from</span> <span class="n">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">from</span> <span class="n">launch.actions</span> <span class="kn">import</span> <span class="n">DeclareLaunchArgument</span><span class="p">,</span> <span class="n">IncludeLaunchDescription</span>
<span class="kn">from</span> <span class="n">launch.launch_description_sources</span> <span class="kn">import</span> <span class="n">PythonLaunchDescriptionSource</span>
<span class="kn">from</span> <span class="n">launch.substitutions</span> <span class="kn">import</span>  <span class="n">LaunchConfiguration</span><span class="p">,</span> <span class="n">PathJoinSubstitution</span><span class="p">,</span> <span class="n">TextSubstitution</span>


<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>

    <span class="n">world_arg</span> <span class="o">=</span> <span class="nc">DeclareLaunchArgument</span><span class="p">(</span>
        <span class="sh">'</span><span class="s">world</span><span class="sh">'</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="sh">'</span><span class="s">world.sdf</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="sh">'</span><span class="s">Name of the Gazebo world file to load</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">pkg_bme_gazebo_basics</span> <span class="o">=</span> <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">bme_gazebo_basics</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">pkg_ros_gz_sim</span> <span class="o">=</span> <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">ros_gz_sim</span><span class="sh">'</span><span class="p">)</span>

    <span class="c1"># Add your own gazebo library path here
</span>    <span class="n">gazebo_models_path</span> <span class="o">=</span> <span class="sh">"</span><span class="s">/home/david/gazebo_models</span><span class="sh">"</span>
    <span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">[</span><span class="sh">"</span><span class="s">GZ_SIM_RESOURCE_PATH</span><span class="sh">"</span><span class="p">]</span> <span class="o">+=</span> <span class="n">os</span><span class="p">.</span><span class="n">pathsep</span> <span class="o">+</span> <span class="n">gazebo_models_path</span>


    <span class="n">gazebo_launch</span> <span class="o">=</span> <span class="nc">IncludeLaunchDescription</span><span class="p">(</span>
        <span class="nc">PythonLaunchDescriptionSource</span><span class="p">(</span>
            <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">pkg_ros_gz_sim</span><span class="p">,</span> <span class="sh">'</span><span class="s">launch</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">gz_sim.launch.py</span><span class="sh">'</span><span class="p">),</span>
        <span class="p">),</span>
        <span class="n">launch_arguments</span><span class="o">=</span><span class="p">{</span><span class="sh">'</span><span class="s">gz_args</span><span class="sh">'</span><span class="p">:</span> <span class="p">[</span><span class="nc">PathJoinSubstitution</span><span class="p">([</span>
            <span class="n">pkg_bme_gazebo_basics</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">worlds</span><span class="sh">'</span><span class="p">,</span>
            <span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">world</span><span class="sh">'</span><span class="p">)</span>
        <span class="p">]),</span>
        <span class="c1">#TextSubstitution(text=' -r -v -v1 --render-engine ogre')],
</span>        <span class="nc">TextSubstitution</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="sh">'</span><span class="s"> -r -v -v1</span><span class="sh">'</span><span class="p">)],</span>
        <span class="sh">'</span><span class="s">on_exit_shutdown</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">true</span><span class="sh">'</span><span class="p">}.</span><span class="nf">items</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="n">launchDescriptionObject</span> <span class="o">=</span> <span class="nc">LaunchDescription</span><span class="p">()</span>

    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">world_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">gazebo_launch</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">launchDescriptionObject</span>

</code></pre></div></div>

<p>This launch file has one argument, the world file’s name - you can change the default value to your new world. It also ensures that the offline Gazebo model folder is added to the environmental variable, and finally it launches Gazebo through the <code class="language-plaintext highlighter-rouge">ros_gz_sim</code> with the right arguments (note that the simulation will start automatically because of the <code class="language-plaintext highlighter-rouge">-r</code> flag).</p>

<blockquote>
  <p>In case you have problem with the default OGRE2 rendering engine you can switch to OGRE as before:</p>

  <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nc">TextSubstitution</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="sh">'</span><span class="s"> -r -v -v1 --render-engine ogre</span><span class="sh">'</span><span class="p">)],</span>

</code></pre></div>  </div>
</blockquote>

<p>Let’s build the workspace - if this is the first time that you build this package source the workspace - and we can launch our file:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_gazebo_basics world.launch.py

</code></pre></div></div>

<h1 id="urdf">URDF</h1>

<p>URDF is Universal Robot Description Format, it’s an XML format for representing a robot model commonly used in ROS, RViz and Gazebo.</p>

<p>However, we still call it URDF, in practice it also includes the functionalaties of <code class="language-plaintext highlighter-rouge">xacro</code>, in its full name XML macros. With <code class="language-plaintext highlighter-rouge">xacro</code> we can define re-usable constants, do basic mathematical calculations and substitute complete blocks of our robots with parametrized macros. It can be useful for example in case of a 6 DoF robot arm where all links and joints are identical with different length, diameter, weight, etc.</p>

<p>A robot description (3D model) in URDF is built up as the tree of links and joints that connects links together. A parent link can have multiple children, but a link can only have a single parent.</p>

<p>In the links we can define the mechanical parameters of the link (weight, inertia), the collision shape for the physical simulation and it’s visual properties (e.g. detailed 3D models).</p>

<p>In the joints we define the parent and child links and we tell to the simulation what kind of joint do we have (fixed, rotation or linear).</p>

<p>For more detailed tutorials you can check out the official documentation <a href="https://docs.ros.org/en/jazzy/Tutorials/Intermediate/URDF/URDF-Main.html">here</a>.</p>

<h2 id="building-our-robot-1">Building our robot 1</h2>

<p>First of all let’s create our robot’s URDF in the <code class="language-plaintext highlighter-rouge">urdf</code> folder with <code class="language-plaintext highlighter-rouge">mogi_bot.urdf</code> name. To start from the bare minimum let’s add the following xml code to the file.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version='1.0'?&gt;</span>

<span class="nt">&lt;robot</span> <span class="na">name=</span><span class="s">"mogi_bot"</span> <span class="na">xmlns:xacro=</span><span class="s">"http://www.ros.org/wiki/xacro"</span><span class="nt">&gt;</span>

  <span class="c">&lt;!-- STEP 1 - Robot footprint --&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">"base_footprint"</span><span class="nt">&gt;&lt;/link&gt;</span>

<span class="nt">&lt;/robot&gt;</span>

</code></pre></div></div>

<p>Now we only have the very first link of our robot without any mechanical, collision or visual properties, there is nothing to see yet.</p>

<p>Let’s add a fix joint and the next link - <code class="language-plaintext highlighter-rouge">base_link</code> - that will be the body of our robot. It’s a 40x20x10cm brick with 15kg, the inertia matrix is calculated from these parameters.
<img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/inertia.png" alt="alt text" title="Robot inertia"></p>

<p>It’s always very important to set realistic values into the inertia matrix, at least the order of magnitude should be in the right range. If the inertia matrix is set to a very unrealistic value it will cause unwanted effects during the physical simulation.</p>

<p>To quickly calculate the inertia matrix from the mechanical parameters you can use various tools, for example <a href="https://www.omnicalculator.com/physics/mass-moment-of-inertia">this online calculator</a>, or you can write a <code class="language-plaintext highlighter-rouge">xacro macro</code> for that.</p>

<blockquote>
  <p>A <code class="language-plaintext highlighter-rouge">xacro</code> for calculating the inertia of a box can be the following:</p>

  <div class="language-xml highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nt">&lt;xacro:macro</span> <span class="na">name=</span><span class="s">"solid_cuboid_inertia"</span> <span class="na">params=</span><span class="s">"m l w h"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;inertia</span> <span class="na">ixx=</span><span class="s">"${(m*(w*w+h*h))/12}"</span> <span class="na">ixy =</span> <span class="s">"0"</span> <span class="na">ixz =</span> <span class="s">"0"</span>
           <span class="na">iyy=</span><span class="s">"${(m*(l*l+h*h))/12}"</span> <span class="na">iyz =</span> <span class="s">"0"</span>
           <span class="na">izz=</span><span class="s">"${(m*(l*l+w*w))/12}"</span>
  <span class="nt">/&gt;</span>
<span class="nt">&lt;/xacro:macro&gt;</span>

</code></pre></div>  </div>
</blockquote>

<p>We always have to think and verify the values if we use <code class="language-plaintext highlighter-rouge">xacro</code>, during these lessons I’ll always use the numeric values for the better understanding. Let’s add the robot body with the above parameters:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c">&lt;!-- STEP 2 - Robot chassis = base_link --&gt;</span>
  <span class="nt">&lt;joint</span> <span class="na">name=</span><span class="s">"base_footprint_joint"</span> <span class="na">type=</span><span class="s">"fixed"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 0 0"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;parent</span> <span class="na">link=</span><span class="s">"base_footprint"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;child</span> <span class="na">link=</span><span class="s">"base_link"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/joint&gt;</span>

  <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'base_link'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;pose&gt;</span>0 0 0.1 0 0 0<span class="nt">&lt;/pose&gt;</span>

    <span class="nt">&lt;inertial&gt;</span>
      <span class="nt">&lt;mass</span> <span class="na">value=</span><span class="s">"15.0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0.0 0 0"</span> <span class="na">rpy=</span><span class="s">" 0 0 0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;inertia</span>
          <span class="na">ixx=</span><span class="s">"0.0625"</span> <span class="na">ixy=</span><span class="s">"0"</span> <span class="na">ixz=</span><span class="s">"0"</span>
          <span class="na">iyy=</span><span class="s">"0.2125"</span> <span class="na">iyz=</span><span class="s">"0"</span>
          <span class="na">izz=</span><span class="s">"0.25"</span>
      <span class="nt">/&gt;</span>
    <span class="nt">&lt;/inertial&gt;</span>

    <span class="nt">&lt;collision</span> <span class="na">name=</span><span class="s">'collision'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">" 0 0 0"</span><span class="nt">/&gt;</span> 
      <span class="nt">&lt;geometry&gt;</span>
        <span class="nt">&lt;box</span> <span class="na">size=</span><span class="s">".4 .2 .1"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
    <span class="nt">&lt;/collision&gt;</span>

    <span class="nt">&lt;visual</span> <span class="na">name=</span><span class="s">'base_link_visual'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">" 0 0 0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;geometry&gt;</span>
        <span class="nt">&lt;box</span> <span class="na">size=</span><span class="s">".4 .2 .1"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
    <span class="nt">&lt;/visual&gt;</span>
  <span class="nt">&lt;/link&gt;</span>

</code></pre></div></div>

<blockquote>
  <p>Links and joints always have to be inside the <robot> tag of the URDF!</robot></p>
</blockquote>

<h2 id="view-the-robot-in-rviz">View the robot in RViz</h2>

<p>Now we have a robot body that we can visualize. ROS provides several powerful tools to visualize various data, we already met <code class="language-plaintext highlighter-rouge">rqt</code> now we meet <code class="language-plaintext highlighter-rouge">RViz</code>.</p>

<p>We can start it with the <code class="language-plaintext highlighter-rouge">rviz2</code> command. Then we can add (1) the <code class="language-plaintext highlighter-rouge">Robot Model</code> view (2), we browse for our URDF file (3) and we type <code class="language-plaintext highlighter-rouge">base_link</code> as Fixed Frame (4).
<img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/rviz.png" alt="alt text" title="RViz"></p>

<p>Although is possible to use RViz like this, it’s not the most convinient way. Later, when we add more links and joints we’ll have the problem that the we don’t have any program running that informs RViz about the right transformation among these links (if the joint isn’t fixed).</p>

<p>Instead of this manual usage of RViz, let’s move all these tasks into a ROS launch file.</p>

<p>We have to install a few packages first:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>ros-jazzy-urdf
<span class="nb">sudo </span>apt <span class="nb">install </span>ros-jazzy-urdf-tutorial 
<span class="nb">sudo </span>apt <span class="nb">install </span>ros-jazzy-urdf-launch

</code></pre></div></div>

<p>Let’s try what can we do with the <code class="language-plaintext highlighter-rouge">urdf-tutorial</code> package:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch urdf_tutorial display.launch.py model:<span class="o">=</span>urdf/01-myfirst.urdf

</code></pre></div></div>

<p>The source of this package is available <a href="https://github.com/ros/urdf_tutorial/tree/ros2">here</a>. This package does exactly what we need, but we cannot build up our tools onto <code class="language-plaintext highlighter-rouge">urdf-tutorial</code>, it’s not suitable, but we can create our own launch file based on this package! Let’s create the <code class="language-plaintext highlighter-rouge">check_urdf.launch.py</code> file in the launch folder with the following content:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">os</span>
<span class="kn">from</span> <span class="n">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">from</span> <span class="n">launch.actions</span> <span class="kn">import</span> <span class="n">DeclareLaunchArgument</span><span class="p">,</span> <span class="n">IncludeLaunchDescription</span>
<span class="kn">from</span> <span class="n">launch.substitutions</span> <span class="kn">import</span> <span class="n">LaunchConfiguration</span><span class="p">,</span> <span class="n">PathJoinSubstitution</span>
<span class="kn">from</span> <span class="n">launch_ros.substitutions</span> <span class="kn">import</span> <span class="n">FindPackageShare</span>


<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
    
    <span class="n">pkg_bme_gazebo_basics</span> <span class="o">=</span> <span class="nc">FindPackageShare</span><span class="p">(</span><span class="sh">'</span><span class="s">bme_gazebo_basics</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">default_rviz_config_path</span> <span class="o">=</span> <span class="nc">PathJoinSubstitution</span><span class="p">([</span><span class="n">pkg_bme_gazebo_basics</span><span class="p">,</span> <span class="sh">'</span><span class="s">rviz</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">urdf.rviz</span><span class="sh">'</span><span class="p">])</span>

    <span class="c1"># Show joint state publisher GUI for joints
</span>    <span class="n">gui_arg</span> <span class="o">=</span> <span class="nc">DeclareLaunchArgument</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">gui</span><span class="sh">'</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="sh">'</span><span class="s">true</span><span class="sh">'</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">true</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">false</span><span class="sh">'</span><span class="p">],</span>
                                    <span class="n">description</span><span class="o">=</span><span class="sh">'</span><span class="s">Flag to enable joint_state_publisher_gui</span><span class="sh">'</span><span class="p">)</span>
    
    <span class="c1"># RViz config file path
</span>    <span class="n">rviz_arg</span> <span class="o">=</span> <span class="nc">DeclareLaunchArgument</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">rvizconfig</span><span class="sh">'</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="n">default_rviz_config_path</span><span class="p">,</span>
                                    <span class="n">description</span><span class="o">=</span><span class="sh">'</span><span class="s">Absolute path to rviz config file</span><span class="sh">'</span><span class="p">)</span>
    

    <span class="c1"># URDF model path within the bme_gazebo_basics package
</span>    <span class="n">model_arg</span> <span class="o">=</span> <span class="nc">DeclareLaunchArgument</span><span class="p">(</span>
        <span class="sh">'</span><span class="s">model</span><span class="sh">'</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="sh">'</span><span class="s">mogi_bot.urdf</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="sh">'</span><span class="s">Name of the URDF description to load</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="c1"># Use built-in ROS2 URDF launch package with our own arguments
</span>    <span class="n">urdf</span> <span class="o">=</span> <span class="nc">IncludeLaunchDescription</span><span class="p">(</span>
        <span class="nc">PathJoinSubstitution</span><span class="p">([</span><span class="nc">FindPackageShare</span><span class="p">(</span><span class="sh">'</span><span class="s">urdf_launch</span><span class="sh">'</span><span class="p">),</span> <span class="sh">'</span><span class="s">launch</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">display.launch.py</span><span class="sh">'</span><span class="p">]),</span>
        <span class="n">launch_arguments</span><span class="o">=</span><span class="p">{</span>
            <span class="sh">'</span><span class="s">urdf_package</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">bme_gazebo_basics</span><span class="sh">'</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">urdf_package_path</span><span class="sh">'</span><span class="p">:</span> <span class="nc">PathJoinSubstitution</span><span class="p">([</span><span class="sh">'</span><span class="s">urdf</span><span class="sh">'</span><span class="p">,</span> <span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">model</span><span class="sh">'</span><span class="p">)]),</span>
            <span class="sh">'</span><span class="s">rviz_config</span><span class="sh">'</span><span class="p">:</span> <span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">rvizconfig</span><span class="sh">'</span><span class="p">),</span>
            <span class="sh">'</span><span class="s">jsp_gui</span><span class="sh">'</span><span class="p">:</span> <span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">gui</span><span class="sh">'</span><span class="p">)}.</span><span class="nf">items</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="n">launchDescriptionObject</span> <span class="o">=</span> <span class="nc">LaunchDescription</span><span class="p">()</span>

    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">gui_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">rviz_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">model_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">urdf</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">launchDescriptionObject</span>

</code></pre></div></div>

<p>From now, in every lesson we’ll create this launch file, because it’s extremely useful during development to visualize our URDF. Build the workspace and let’s try it:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_gazebo_basics check_urdf.launch.py 

</code></pre></div></div>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/rviz-1.png" alt="alt text" title="RViz"></p>

<h2 id="building-our-robot-2">Building our robot 2</h2>

<p>Let’s keep building the differential drive robot by adding the 2 wheels:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c">&lt;!-- STEP 3 - Wheels --&gt;</span>
  <span class="nt">&lt;joint</span> <span class="na">type=</span><span class="s">"continuous"</span> <span class="na">name=</span><span class="s">"left_wheel_joint"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0.15 0"</span> <span class="na">rpy=</span><span class="s">"0 0 0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;child</span> <span class="na">link=</span><span class="s">"left_wheel"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;parent</span> <span class="na">link=</span><span class="s">"base_link"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;axis</span> <span class="na">xyz=</span><span class="s">"0 1 0"</span> <span class="na">rpy=</span><span class="s">"0 0 0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;limit</span> <span class="na">effort=</span><span class="s">"100"</span> <span class="na">velocity=</span><span class="s">"10"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;dynamics</span> <span class="na">damping=</span><span class="s">"1.0"</span> <span class="na">friction=</span><span class="s">"1.0"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/joint&gt;</span>

  <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'left_wheel'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;inertial&gt;</span>
      <span class="nt">&lt;mass</span> <span class="na">value=</span><span class="s">"5.0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 1.5707 1.5707"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;inertia</span>
          <span class="na">ixx=</span><span class="s">"0.014"</span> <span class="na">ixy=</span><span class="s">"0"</span> <span class="na">ixz=</span><span class="s">"0"</span>
          <span class="na">iyy=</span><span class="s">"0.014"</span> <span class="na">iyz=</span><span class="s">"0"</span>
          <span class="na">izz=</span><span class="s">"0.025"</span>
      <span class="nt">/&gt;</span>
    <span class="nt">&lt;/inertial&gt;</span>

    <span class="nt">&lt;collision&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 1.5707 1.5707"</span><span class="nt">/&gt;</span> 
      <span class="nt">&lt;geometry&gt;</span>
        <span class="nt">&lt;cylinder</span> <span class="na">radius=</span><span class="s">".1"</span> <span class="na">length=</span><span class="s">".05"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
    <span class="nt">&lt;/collision&gt;</span>

    <span class="nt">&lt;visual</span> <span class="na">name=</span><span class="s">'left_wheel_visual'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 1.5707 1.5707"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;geometry&gt;</span>
        <span class="nt">&lt;cylinder</span> <span class="na">radius=</span><span class="s">".1"</span> <span class="na">length=</span><span class="s">".05"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
    <span class="nt">&lt;/visual&gt;</span>
  <span class="nt">&lt;/link&gt;</span>

  <span class="nt">&lt;joint</span> <span class="na">type=</span><span class="s">"continuous"</span> <span class="na">name=</span><span class="s">"right_wheel_joint"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 -0.15 0"</span> <span class="na">rpy=</span><span class="s">"0 0 0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;child</span> <span class="na">link=</span><span class="s">"right_wheel"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;parent</span> <span class="na">link=</span><span class="s">"base_link"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;axis</span> <span class="na">xyz=</span><span class="s">"0 1 0"</span> <span class="na">rpy=</span><span class="s">"0 0 0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;limit</span> <span class="na">effort=</span><span class="s">"100"</span> <span class="na">velocity=</span><span class="s">"10"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;dynamics</span> <span class="na">damping=</span><span class="s">"1.0"</span> <span class="na">friction=</span><span class="s">"1.0"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/joint&gt;</span>

  <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'right_wheel'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;inertial&gt;</span>
      <span class="nt">&lt;mass</span> <span class="na">value=</span><span class="s">"5.0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 1.5707 1.5707"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;inertia</span>
          <span class="na">ixx=</span><span class="s">"0.014"</span> <span class="na">ixy=</span><span class="s">"0"</span> <span class="na">ixz=</span><span class="s">"0"</span>
          <span class="na">iyy=</span><span class="s">"0.014"</span> <span class="na">iyz=</span><span class="s">"0"</span>
          <span class="na">izz=</span><span class="s">"0.025"</span>
      <span class="nt">/&gt;</span>
    <span class="nt">&lt;/inertial&gt;</span>

    <span class="nt">&lt;collision&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 1.5707 1.5707"</span><span class="nt">/&gt;</span> 
      <span class="nt">&lt;geometry&gt;</span>
        <span class="nt">&lt;cylinder</span> <span class="na">radius=</span><span class="s">".1"</span> <span class="na">length=</span><span class="s">".05"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
    <span class="nt">&lt;/collision&gt;</span>

    <span class="nt">&lt;visual</span> <span class="na">name=</span><span class="s">'right_wheel_visual'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 1.5707 1.5707"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;geometry&gt;</span>
        <span class="nt">&lt;cylinder</span> <span class="na">radius=</span><span class="s">".1"</span> <span class="na">length=</span><span class="s">".05"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
    <span class="nt">&lt;/visual&gt;</span>
  <span class="nt">&lt;/link&gt;</span>

</code></pre></div></div>

<p>Rebuild the workspace and let’s see it using rviz:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_gazebo_basics check_urdf.launch.py 

</code></pre></div></div>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/rviz-2.png" alt="alt text" title="RViz"></p>

<p>Before we can move forward there is still a problem we have to fix first, the robot needs a caster wheel in the front and another in the back. This time these aren’t separate links and joints but we add it within the <code class="language-plaintext highlighter-rouge">base_link</code>:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;collision</span> <span class="na">name=</span><span class="s">'rear_caster_collision'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"-0.15 0 -0.05"</span> <span class="na">rpy=</span><span class="s">" 0 0 0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;geometry&gt;</span>
        <span class="nt">&lt;sphere</span> <span class="na">radius=</span><span class="s">"0.0499"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
    <span class="nt">&lt;/collision&gt;</span>

    <span class="nt">&lt;visual</span> <span class="na">name=</span><span class="s">'rear_caster_visual'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"-0.15 0 -0.05"</span> <span class="na">rpy=</span><span class="s">" 0 0 0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;geometry&gt;</span>
        <span class="nt">&lt;sphere</span> <span class="na">radius=</span><span class="s">"0.05"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
    <span class="nt">&lt;/visual&gt;</span>

    <span class="nt">&lt;collision</span> <span class="na">name=</span><span class="s">'front_caster_collision'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0.15 0 -0.05"</span> <span class="na">rpy=</span><span class="s">" 0 0 0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;geometry&gt;</span>
        <span class="nt">&lt;sphere</span> <span class="na">radius=</span><span class="s">"0.0499"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
    <span class="nt">&lt;/collision&gt;</span>

    <span class="nt">&lt;visual</span> <span class="na">name=</span><span class="s">'front_caster_visual'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0.15 0 -0.05"</span> <span class="na">rpy=</span><span class="s">" 0 0 0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;geometry&gt;</span>
        <span class="nt">&lt;sphere</span> <span class="na">radius=</span><span class="s">"0.05"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
    <span class="nt">&lt;/visual&gt;</span>

</code></pre></div></div>

<p>After rebuild, let’s see it in RViz.
<img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/rviz-3.png" alt="alt text" title="RViz"></p>

<h2 id="tf-tree">TF Tree</h2>

<p>It’s time to get to know another useful tool of ROS, the <code class="language-plaintext highlighter-rouge">TF Tree</code>. This tool helps visualizing the transformations between the reference frames of the robot. First we need to install the tool:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>ros-jazzy-rqt-tf-tree 

</code></pre></div></div>

<p>After that, let’s view our robot with the previous command in RViz:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_gazebo_basics check_urdf.launch.py

</code></pre></div></div>

<p>and in another terminal let’s run TF Tree:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run rqt_tf_tree rqt_tf_tree

</code></pre></div></div>

<blockquote>
  <p>You might experience an issue during the first start of TF Tree, in this case make sure that this rqt plugin is discovered:</p>

  <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>ros2 run rqt_tf_tree rqt_tf_tree <span class="nt">--force-discover</span>

</code></pre></div>  </div>
</blockquote>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/tf-tree.png" alt="alt text" title="TF Tree"></p>

<h2 id="add-some-colors">Add some colors</h2>

<p>By default everything is rendered in red color in RViz because we were not defining the colors of the links. Let’s color the body of our robot orange and the wheels green. To color a link we have to put a <code class="language-plaintext highlighter-rouge">&lt;material&gt;</code> tag into the <code class="language-plaintext highlighter-rouge">&lt;visual&gt;</code> tag of each links.</p>

<p>We can use the following tags:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;material</span> <span class="na">name=</span><span class="s">"orange"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;material</span> <span class="na">name=</span><span class="s">"green"</span><span class="nt">/&gt;</span>

</code></pre></div></div>

<p>By default RViz won’t be able to understand these color names though, to define these colors we can include the <code class="language-plaintext highlighter-rouge">materials.xacro</code> that is already in the package of this lesson. Add the following import to the very beginning of the URDF within the <code class="language-plaintext highlighter-rouge">&lt;robot&gt;</code> tag:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c">&lt;!-- STEP 4 - RViz colors --&gt;</span>
  <span class="nt">&lt;xacro:include</span> <span class="na">filename=</span><span class="s">"$(find bme_gazebo_basics)/urdf/materials.xacro"</span> <span class="nt">/&gt;</span>

</code></pre></div></div>

<p>Rebuild the workspace and let’s see it in RViz:
<img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/rviz-4.png" alt="alt text" title="RViz"></p>

<h2 id="load-the-urdf-in-gazebo">Load the URDF in Gazebo</h2>

<p>Now we have a robot model that we see in RViz, but RViz is just a visualization tool, even if we can rotate some joints with the <code class="language-plaintext highlighter-rouge">joint_state_publisher_gui</code> it has nothing to do with the physical simulation. To insert our robot model into the Gazebo simulation environment we have to write a new launch file that spawns the robot through the right services of Gazebo.</p>

<p>Let’s create <code class="language-plaintext highlighter-rouge">spawn_robot.launch.py</code> in our launch folder:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">os</span>
<span class="kn">from</span> <span class="n">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">from</span> <span class="n">launch.actions</span> <span class="kn">import</span> <span class="n">DeclareLaunchArgument</span><span class="p">,</span> <span class="n">IncludeLaunchDescription</span>
<span class="kn">from</span> <span class="n">launch.conditions</span> <span class="kn">import</span> <span class="n">IfCondition</span>
<span class="kn">from</span> <span class="n">launch.launch_description_sources</span> <span class="kn">import</span> <span class="n">PythonLaunchDescriptionSource</span>
<span class="kn">from</span> <span class="n">launch.substitutions</span> <span class="kn">import</span> <span class="n">LaunchConfiguration</span><span class="p">,</span> <span class="n">PathJoinSubstitution</span><span class="p">,</span> <span class="n">Command</span>
<span class="kn">from</span> <span class="n">launch_ros.actions</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="kn">from</span> <span class="n">ament_index_python.packages</span> <span class="kn">import</span> <span class="n">get_package_share_directory</span>

<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>

    <span class="n">pkg_bme_gazebo_basics</span> <span class="o">=</span> <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">bme_gazebo_basics</span><span class="sh">'</span><span class="p">)</span>

    <span class="n">gazebo_models_path</span><span class="p">,</span> <span class="n">ignore_last_dir</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="n">pkg_bme_gazebo_basics</span><span class="p">)</span>
    <span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">[</span><span class="sh">"</span><span class="s">GZ_SIM_RESOURCE_PATH</span><span class="sh">"</span><span class="p">]</span> <span class="o">+=</span> <span class="n">os</span><span class="p">.</span><span class="n">pathsep</span> <span class="o">+</span> <span class="n">gazebo_models_path</span>

    <span class="n">rviz_launch_arg</span> <span class="o">=</span> <span class="nc">DeclareLaunchArgument</span><span class="p">(</span>
        <span class="sh">'</span><span class="s">rviz</span><span class="sh">'</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="sh">'</span><span class="s">true</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="sh">'</span><span class="s">Open RViz.</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">world_arg</span> <span class="o">=</span> <span class="nc">DeclareLaunchArgument</span><span class="p">(</span>
        <span class="sh">'</span><span class="s">world</span><span class="sh">'</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="sh">'</span><span class="s">world.sdf</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="sh">'</span><span class="s">Name of the Gazebo world file to load</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">model_arg</span> <span class="o">=</span> <span class="nc">DeclareLaunchArgument</span><span class="p">(</span>
        <span class="sh">'</span><span class="s">model</span><span class="sh">'</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="sh">'</span><span class="s">mogi_bot.urdf</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="sh">'</span><span class="s">Name of the URDF description to load</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="c1"># Define the path to your URDF or Xacro file
</span>    <span class="n">urdf_file_path</span> <span class="o">=</span> <span class="nc">PathJoinSubstitution</span><span class="p">([</span>
        <span class="n">pkg_bme_gazebo_basics</span><span class="p">,</span>  <span class="c1"># Replace with your package name
</span>        <span class="sh">"</span><span class="s">urdf</span><span class="sh">"</span><span class="p">,</span>
        <span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">model</span><span class="sh">'</span><span class="p">)</span>  <span class="c1"># Replace with your URDF or Xacro file
</span>    <span class="p">])</span>

    <span class="n">world_launch</span> <span class="o">=</span> <span class="nc">IncludeLaunchDescription</span><span class="p">(</span>
        <span class="nc">PythonLaunchDescriptionSource</span><span class="p">(</span>
            <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">pkg_bme_gazebo_basics</span><span class="p">,</span> <span class="sh">'</span><span class="s">launch</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">world.launch.py</span><span class="sh">'</span><span class="p">),</span>
        <span class="p">),</span>
        <span class="n">launch_arguments</span><span class="o">=</span><span class="p">{</span>
        <span class="sh">'</span><span class="s">world</span><span class="sh">'</span><span class="p">:</span> <span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">world</span><span class="sh">'</span><span class="p">),</span>
        <span class="p">}.</span><span class="nf">items</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="c1"># Launch rviz
</span>    <span class="n">rviz_node</span> <span class="o">=</span> <span class="nc">Node</span><span class="p">(</span>
        <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">rviz2</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">executable</span><span class="o">=</span><span class="sh">'</span><span class="s">rviz2</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">arguments</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">-d</span><span class="sh">'</span><span class="p">,</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">pkg_bme_gazebo_basics</span><span class="p">,</span> <span class="sh">'</span><span class="s">rviz</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">rviz.rviz</span><span class="sh">'</span><span class="p">)],</span>
        <span class="n">condition</span><span class="o">=</span><span class="nc">IfCondition</span><span class="p">(</span><span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">rviz</span><span class="sh">'</span><span class="p">)),</span>
        <span class="n">parameters</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span><span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">:</span> <span class="bp">True</span><span class="p">},</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># Spawn the URDF model using the `/world/&lt;world_name&gt;/create` service
</span>    <span class="n">spawn_urdf_node</span> <span class="o">=</span> <span class="nc">Node</span><span class="p">(</span>
        <span class="n">package</span><span class="o">=</span><span class="sh">"</span><span class="s">ros_gz_sim</span><span class="sh">"</span><span class="p">,</span>
        <span class="n">executable</span><span class="o">=</span><span class="sh">"</span><span class="s">create</span><span class="sh">"</span><span class="p">,</span>
        <span class="n">arguments</span><span class="o">=</span><span class="p">[</span>
            <span class="sh">"</span><span class="s">-name</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">my_robot</span><span class="sh">"</span><span class="p">,</span>
            <span class="sh">"</span><span class="s">-topic</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">robot_description</span><span class="sh">"</span><span class="p">,</span>
            <span class="sh">"</span><span class="s">-x</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">0.0</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">-y</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">0.0</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">-z</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">0.5</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">-Y</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">0.0</span><span class="sh">"</span>  <span class="c1"># Initial spawn position
</span>        <span class="p">],</span>
        <span class="n">output</span><span class="o">=</span><span class="sh">"</span><span class="s">screen</span><span class="sh">"</span><span class="p">,</span>
        <span class="n">parameters</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span><span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">:</span> <span class="bp">True</span><span class="p">},</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="n">robot_state_publisher_node</span> <span class="o">=</span> <span class="nc">Node</span><span class="p">(</span>
        <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">robot_state_publisher</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">executable</span><span class="o">=</span><span class="sh">'</span><span class="s">robot_state_publisher</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">robot_state_publisher</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">output</span><span class="o">=</span><span class="sh">'</span><span class="s">screen</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">parameters</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span><span class="sh">'</span><span class="s">robot_description</span><span class="sh">'</span><span class="p">:</span> <span class="nc">Command</span><span class="p">([</span><span class="sh">'</span><span class="s">xacro</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s"> </span><span class="sh">'</span><span class="p">,</span> <span class="n">urdf_file_path</span><span class="p">]),</span>
             <span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">:</span> <span class="bp">True</span><span class="p">},</span>
        <span class="p">],</span>
        <span class="n">remappings</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="sh">'</span><span class="s">/tf</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">tf</span><span class="sh">'</span><span class="p">),</span>
            <span class="p">(</span><span class="sh">'</span><span class="s">/tf_static</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">tf_static</span><span class="sh">'</span><span class="p">)</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="n">joint_state_publisher_gui_node</span> <span class="o">=</span> <span class="nc">Node</span><span class="p">(</span>
        <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">joint_state_publisher_gui</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">executable</span><span class="o">=</span><span class="sh">'</span><span class="s">joint_state_publisher_gui</span><span class="sh">'</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">launchDescriptionObject</span> <span class="o">=</span> <span class="nc">LaunchDescription</span><span class="p">()</span>

    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">rviz_launch_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">world_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">model_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">world_launch</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">rviz_node</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">spawn_urdf_node</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">robot_state_publisher_node</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">joint_state_publisher_gui_node</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">launchDescriptionObject</span>

</code></pre></div></div>

<p>This launch file will include the <code class="language-plaintext highlighter-rouge">world.launch.py</code> that we created earlier, so we don’t have to start and load the world into Gazebo separately. It will also open RViz with a pre-configured view. We see 3 new nodes that we didn’t use (or didn’t know that we used) before:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">create</code> node of the <code class="language-plaintext highlighter-rouge">ros_gz_sim</code> package to spawn the robot from the <code class="language-plaintext highlighter-rouge">robot_description</code> topic into a specific location within the simulation.</li>
  <li>
<code class="language-plaintext highlighter-rouge">robot_state_publisher</code> will convert and load the URDF/xacro into the <code class="language-plaintext highlighter-rouge">robot_description</code> topic it’s providing the transformations between the links using static transforms from the URDF and dynamic transforms from real time <code class="language-plaintext highlighter-rouge">joint_states</code> topic</li>
  <li>
<code class="language-plaintext highlighter-rouge">joint_state_publisher_gui</code> is a <code class="language-plaintext highlighter-rouge">joint_state_publisher</code> with the small graphical utility to change joint angles. This node is responsible to update dynamic changes between links through the <code class="language-plaintext highlighter-rouge">joint_states</code> topic</li>
</ul>

<p>Although we didn’t know before, we’ve already used the <code class="language-plaintext highlighter-rouge">robot_state_publisher</code> and <code class="language-plaintext highlighter-rouge">joint_state_publisher_gui</code> through the <code class="language-plaintext highlighter-rouge">urdf_launch</code> package that is the basis of our <code class="language-plaintext highlighter-rouge">check_urdf.launch.py</code>. We can see how these nodes are used in the <code class="language-plaintext highlighter-rouge">description.launch.py</code> and in the <code class="language-plaintext highlighter-rouge">display.launch.py</code> files <a href="https://github.com/ros/urdf_launch/tree/main/launch">here</a>.</p>

<p>We have to rebuild the workspace and we can try this new launch file:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_gazebo_basics spawn_robot.launch.py 

</code></pre></div></div>

<p>Right now, nothing publishes odometry for our robot so let’s change the fixed frame to the <code class="language-plaintext highlighter-rouge">robot_footprint</code> in RViz.</p>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/spawn.png" alt="alt text" title="Spawn robot"></p>

<p>We see that doesn’t matter how we change the wheel joint angles it has no impact on the physical simulation. We did the first step, the robot is spawned into a Gazebo simulation, but the integration just starts from here.</p>

<h1 id="gazebo-integration">Gazebo integration</h1>

<p>To finally drive our robot in the physical simulation we have to do 2 things, adding a Gazebo plugin that can move the differential drive robot and bridging messages between ROS and Gazebo. Let’s start with the first one:</p>

<h2 id="diff-drive-plugin">Diff drive plugin</h2>

<p>Typical differential drive robots are hoverboards, robot vacuum cleaners and robot lawnmovers.</p>

<p>We’ll use <a href="https://gazebosim.org/api/sim/8/classgz_1_1sim_1_1systems_1_1DiffDrive.html">the following Gazebo plugin</a> to drive our robots. The kinematics of the differential robot is very simple, the radius from the center of curvature is <code class="language-plaintext highlighter-rouge">R</code>, the rate of rotation is <code class="language-plaintext highlighter-rouge">ω</code> and the wheel speeds are <code class="language-plaintext highlighter-rouge">Vl</code> and <code class="language-plaintext highlighter-rouge">Vr</code>. The distance between the wheels is <code class="language-plaintext highlighter-rouge">l</code>.</p>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/diff-drive.png" alt="alt text" title="Differential drive"></p>

<p>We can describe the kinematics of the differential drive robot <a href="https://www.cs.columbia.edu/~allen/F17/NOTES/icckinematics.pdf">with the following equations</a>:</p>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/diff-drive-1.png" alt="alt text" title="Differential drive"></p>

<p>There are 3 special cases of the above equations:</p>

<ol>
  <li>
<code class="language-plaintext highlighter-rouge">Vl = Vr</code>, in this case <code class="language-plaintext highlighter-rouge">R</code> is infinite and <code class="language-plaintext highlighter-rouge">ω = 0</code>, the robot is moving straight.</li>
  <li>
<code class="language-plaintext highlighter-rouge">Vl = -Vr</code>, in this case <code class="language-plaintext highlighter-rouge">R = 0</code> and the center of curvature is between the 2 wheels. The robot rotates in place.</li>
  <li>
<code class="language-plaintext highlighter-rouge">Vl = 0</code> or <code class="language-plaintext highlighter-rouge">Vr = 0</code>, in this case <code class="language-plaintext highlighter-rouge">R = l / 2</code>, the center of curvature is the standing wheel.</li>
</ol>

<p>The Gazebo plugin is in one hand responsible for calculating the wheel speeds from the control signal. In the other hand, it also implements inverse kinematics, the robot’s odometry is calculated from the integral of the wheels speeds and the wheel distance.</p>

<p>Let’s create a <code class="language-plaintext highlighter-rouge">mogi_bot.gazebo</code> file in the URDF folder:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;robot&gt;</span>
  <span class="nt">&lt;gazebo&gt;</span>
    <span class="nt">&lt;plugin</span>
        <span class="na">filename=</span><span class="s">"gz-sim-diff-drive-system"</span>
        <span class="na">name=</span><span class="s">"gz::sim::systems::DiffDrive"</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- Topic for the command input --&gt;</span>
        <span class="nt">&lt;topic&gt;</span>/cmd_vel<span class="nt">&lt;/topic&gt;</span>

        <span class="c">&lt;!-- Wheel joints --&gt;</span>
        <span class="nt">&lt;left_joint&gt;</span>left_wheel_joint<span class="nt">&lt;/left_joint&gt;</span>
        <span class="nt">&lt;right_joint&gt;</span>right_wheel_joint<span class="nt">&lt;/right_joint&gt;</span>

        <span class="c">&lt;!-- Wheel parameters --&gt;</span>
        <span class="nt">&lt;wheel_separation&gt;</span>0.3<span class="nt">&lt;/wheel_separation&gt;</span>
        <span class="nt">&lt;wheel_radius&gt;</span>0.1<span class="nt">&lt;/wheel_radius&gt;</span>

        <span class="c">&lt;!-- Control gains and limits (optional) --&gt;</span>
        <span class="nt">&lt;max_velocity&gt;</span>3.0<span class="nt">&lt;/max_velocity&gt;</span>
        <span class="nt">&lt;max_linear_acceleration&gt;</span>1<span class="nt">&lt;/max_linear_acceleration&gt;</span>
        <span class="nt">&lt;min_linear_acceleration&gt;</span>-1<span class="nt">&lt;/min_linear_acceleration&gt;</span>
        <span class="nt">&lt;max_angular_acceleration&gt;</span>2<span class="nt">&lt;/max_angular_acceleration&gt;</span>
        <span class="nt">&lt;min_angular_acceleration&gt;</span>-2<span class="nt">&lt;/min_angular_acceleration&gt;</span>
        <span class="nt">&lt;max_linear_velocity&gt;</span>0.5<span class="nt">&lt;/max_linear_velocity&gt;</span>
        <span class="nt">&lt;min_linear_velocity&gt;</span>-0.5<span class="nt">&lt;/min_linear_velocity&gt;</span>
        <span class="nt">&lt;max_angular_velocity&gt;</span>1<span class="nt">&lt;/max_angular_velocity&gt;</span>
        <span class="nt">&lt;min_angular_velocity&gt;</span>-1<span class="nt">&lt;/min_angular_velocity&gt;</span>
        
        <span class="c">&lt;!-- Other parameters (optional) --&gt;</span>
        <span class="nt">&lt;odom_topic&gt;</span>odom<span class="nt">&lt;/odom_topic&gt;</span>
        <span class="nt">&lt;tf_topic&gt;</span>tf<span class="nt">&lt;/tf_topic&gt;</span>
        <span class="nt">&lt;frame_id&gt;</span>odom<span class="nt">&lt;/frame_id&gt;</span>
        <span class="nt">&lt;child_frame_id&gt;</span>base_footprint<span class="nt">&lt;/child_frame_id&gt;</span>
        <span class="nt">&lt;odom_publish_frequency&gt;</span>30<span class="nt">&lt;/odom_publish_frequency&gt;</span>
    <span class="nt">&lt;/plugin&gt;</span>

    <span class="nt">&lt;plugin</span>
        <span class="na">filename=</span><span class="s">"gz-sim-joint-state-publisher-system"</span>
        <span class="na">name=</span><span class="s">"gz::sim::systems::JointStatePublisher"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;topic&gt;</span>joint_states<span class="nt">&lt;/topic&gt;</span>
        <span class="nt">&lt;joint_name&gt;</span>left_wheel_joint<span class="nt">&lt;/joint_name&gt;</span>
        <span class="nt">&lt;joint_name&gt;</span>right_wheel_joint<span class="nt">&lt;/joint_name&gt;</span>
    <span class="nt">&lt;/plugin&gt;</span>
  <span class="nt">&lt;/gazebo&gt;</span>
<span class="nt">&lt;/robot&gt;</span>

</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">gz-sim-diff-drive-system</code> plugin is handling the differential drive kinematics, and we will use another plugin <code class="language-plaintext highlighter-rouge">gz-sim-joint-state-publisher-system</code> to publish joint states from Gazebo to ROS2.</p>

<p>Let’s include this new file in our robot’s URDF. In the same way how we included the colors, let’s add it to the top of our URDF within the <code class="language-plaintext highlighter-rouge">&lt;robot&gt;</code> tag.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c">&lt;!-- STEP 5 - Gazebo plugin --&gt;</span>
  <span class="nt">&lt;xacro:include</span> <span class="na">filename=</span><span class="s">"$(find bme_gazebo_basics)/urdf/mogi_bot.gazebo"</span> <span class="nt">/&gt;</span>

</code></pre></div></div>

<p>Rebuild the workspace and let’s try it:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_gazebo_basics spawn_robot.launch.py 

</code></pre></div></div>

<p>We see that odometry is still not published for RViz, but at least in Gazebo we can already drive our robot with the <code class="language-plaintext highlighter-rouge">teleop</code> plugin:</p>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/gazebo-5.png" alt="alt text" title="Gazebo robot"></p>

<p>We can try to drive the robot from ROS with the <code class="language-plaintext highlighter-rouge">teleop_twist_keyboard</code> node:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run teleop_twist_keyboard teleop_twist_keyboard 

</code></pre></div></div>

<blockquote>
  <p>If <code class="language-plaintext highlighter-rouge">teleop_twist_keyboard</code> is not installed yet, you can install it with the following command:</p>

  <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>ros-jazzy-teleop-twist-keyboard

</code></pre></div>  </div>
</blockquote>

<p>But - just like the odometry - this message is also not forwarded between ROS and Gazebo.</p>

<h2 id="ros-gz-bridge">ROS gz bridge</h2>

<p>First of all remove the <code class="language-plaintext highlighter-rouge">joint_state_publisher</code> from the <code class="language-plaintext highlighter-rouge">spawn_robot.launch.py</code> because as soon as we can forward the messages between ROS and Gazebo, Gazebo will handle updating the <code class="language-plaintext highlighter-rouge">joint_state</code> topic.</p>

<p>After that we add another node the <code class="language-plaintext highlighter-rouge">parameter_bridge</code> from the <code class="language-plaintext highlighter-rouge">ros_gz_bridge</code> package.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1"># Node to bridge messages like /cmd_vel and /odom
</span>    <span class="n">gz_bridge_node</span> <span class="o">=</span> <span class="nc">Node</span><span class="p">(</span>
        <span class="n">package</span><span class="o">=</span><span class="sh">"</span><span class="s">ros_gz_bridge</span><span class="sh">"</span><span class="p">,</span>
        <span class="n">executable</span><span class="o">=</span><span class="sh">"</span><span class="s">parameter_bridge</span><span class="sh">"</span><span class="p">,</span>
        <span class="n">arguments</span><span class="o">=</span><span class="p">[</span>
            <span class="sh">"</span><span class="s">/clock@rosgraph_msgs/msg/Clock[gz.msgs.Clock</span><span class="sh">"</span><span class="p">,</span>
            <span class="sh">"</span><span class="s">/cmd_vel@geometry_msgs/msg/Twist@gz.msgs.Twist</span><span class="sh">"</span><span class="p">,</span>
            <span class="sh">"</span><span class="s">/odom@nav_msgs/msg/Odometry@gz.msgs.Odometry</span><span class="sh">"</span><span class="p">,</span>
            <span class="sh">"</span><span class="s">/joint_states@sensor_msgs/msg/JointState@gz.msgs.Model</span><span class="sh">"</span><span class="p">,</span>
            <span class="sh">"</span><span class="s">/tf@tf2_msgs/msg/TFMessage@gz.msgs.Pose_V</span><span class="sh">"</span>
        <span class="p">],</span>
        <span class="n">output</span><span class="o">=</span><span class="sh">"</span><span class="s">screen</span><span class="sh">"</span><span class="p">,</span>
        <span class="n">parameters</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span><span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">:</span> <span class="bp">True</span><span class="p">},</span>
        <span class="p">]</span>
    <span class="p">)</span>

</code></pre></div></div>

<blockquote>
  <p>Make sure <code class="language-plaintext highlighter-rouge">ros_gz_bridge</code> is installed!</p>

  <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>ros-jazzy-ros-gz-bridge

</code></pre></div>  </div>
</blockquote>

<p>You can find the detailed documentation of <code class="language-plaintext highlighter-rouge">ros_gz_bridge</code> <a href="https://github.com/gazebosim/ros_gz/tree/ros2/ros_gz_bridge">here</a>. It explains the syntax of bridging topics in details also you can see what kind of messages can be bridged.</p>

<p>We forward the following topics:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">/clock</code>: The topic used for tracking simulation time or any custom time source.</li>
  <li>
<code class="language-plaintext highlighter-rouge">/cmd_vel</code>: We’ll control the simulated robot from this ROS topic.</li>
  <li>
<code class="language-plaintext highlighter-rouge">/odom</code>: Gazebo’s diff drive plugin provides this odometry topic for ROS consumers.</li>
  <li>
<code class="language-plaintext highlighter-rouge">/joint_states</code>: Gazebo’s other plugin provides the dynamic transformation of the wheel joints.</li>
  <li>
<code class="language-plaintext highlighter-rouge">/tf</code>: Gazebo provides the real-time computation of the robot’s pose and the positions of its links, sensors, etc.</li>
</ul>

<blockquote>
  <p>We forward the above messages bi-directionally between ROS2 and Gazebo except <code class="language-plaintext highlighter-rouge">/clock</code>. Clock should be published by Gazebo only if we are using simulated environment, but if another node already publishes to the <code class="language-plaintext highlighter-rouge">/clock</code> topic the bi-directional bridge won’t be created. In the current complexity of the simulation this is not very important, but later this can cause problems. So we have to make sure that <code class="language-plaintext highlighter-rouge">/clock</code> is forwarded only in the Gazebo → ROS2 direction, this we can achieve with using the <code class="language-plaintext highlighter-rouge">[</code> symbol instead of <code class="language-plaintext highlighter-rouge">@</code> in the arguments.</p>
</blockquote>

<p>Don’t forget to add the new node to the <code class="language-plaintext highlighter-rouge">LaunchDescription()</code> object:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">gz_bridge_node</span><span class="p">)</span>

</code></pre></div></div>

<p>Then rebuild the workspace.</p>

<h2 id="driving-around">Driving around</h2>

<p>Now it’s time to launch the simulation:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_gazebo_basics spawn_robot.launch.py 

</code></pre></div></div>

<p>And in another terminal let’s start the <code class="language-plaintext highlighter-rouge">teleop_twist_keyboard</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run teleop_twist_keyboard teleop_twist_keyboard 

</code></pre></div></div>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/gazebo-6.png" alt="alt text" title="Gazebo robot"></p>

<p>The friction between the wheels and the ground plane can be unrealistic so we can adjust it inside our URDF, let’s add the following physical simulation parameters to the end of our URDF before the <code class="language-plaintext highlighter-rouge">&lt;/robot&gt;</code> tag is closed:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c">&lt;!-- STEP 6 - Gazebo frictions and colors --&gt;</span>
  <span class="nt">&lt;gazebo</span> <span class="na">reference=</span><span class="s">"left_wheel"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;mu1&gt;</span>0.2<span class="nt">&lt;/mu1&gt;</span>
    <span class="nt">&lt;mu2&gt;</span>0.2<span class="nt">&lt;/mu2&gt;</span>
    <span class="nt">&lt;kp&gt;</span>1000000.0<span class="nt">&lt;/kp&gt;</span>
    <span class="nt">&lt;kd&gt;</span>100.0<span class="nt">&lt;/kd&gt;</span>
    <span class="nt">&lt;minDepth&gt;</span>0.0001<span class="nt">&lt;/minDepth&gt;</span>
    <span class="nt">&lt;maxVel&gt;</span>1.0<span class="nt">&lt;/maxVel&gt;</span>
  <span class="nt">&lt;/gazebo&gt;</span>

  <span class="nt">&lt;gazebo</span> <span class="na">reference=</span><span class="s">"right_wheel"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;mu1&gt;</span>0.2<span class="nt">&lt;/mu1&gt;</span>
    <span class="nt">&lt;mu2&gt;</span>0.2<span class="nt">&lt;/mu2&gt;</span>
    <span class="nt">&lt;kp&gt;</span>1000000.0<span class="nt">&lt;/kp&gt;</span>
    <span class="nt">&lt;kd&gt;</span>100.0<span class="nt">&lt;/kd&gt;</span>
    <span class="nt">&lt;minDepth&gt;</span>0.0001<span class="nt">&lt;/minDepth&gt;</span>
    <span class="nt">&lt;maxVel&gt;</span>1.0<span class="nt">&lt;/maxVel&gt;</span>
  <span class="nt">&lt;/gazebo&gt;</span>

  <span class="nt">&lt;gazebo</span> <span class="na">reference=</span><span class="s">"base_link"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;mu1&gt;</span>0.000002<span class="nt">&lt;/mu1&gt;</span>
    <span class="nt">&lt;mu2&gt;</span>0.000002<span class="nt">&lt;/mu2&gt;</span>
  <span class="nt">&lt;/gazebo&gt;</span>

</code></pre></div></div>

<h2 id="odometry-and-trajectory-server">Odometry and Trajectory server</h2>

<p>If we use the <code class="language-plaintext highlighter-rouge">rqt_tf_tree</code> tool that we met earlier, we can see an additional transformation between the <code class="language-plaintext highlighter-rouge">robot_footprint</code> and the <code class="language-plaintext highlighter-rouge">odom</code> frame:</p>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/tf-tree-1.png" alt="alt text" title="TF Tree"></p>

<p>I created a node that helps visualizing the odometry and the trajectory of the robot. Clone the following repo into your workspace:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/MOGI-ROS/mogi_trajectory_server

</code></pre></div></div>

<p>Rebuild you worksapce and also source the environment since we added a new package (or simply open a new terminal window and .bashrc does the job).</p>

<p>Then add the node to the <code class="language-plaintext highlighter-rouge">spawn_robot.launch.py</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">trajectory_node</span> <span class="o">=</span> <span class="nc">Node</span><span class="p">(</span>
        <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">mogi_trajectory_server</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">executable</span><span class="o">=</span><span class="sh">'</span><span class="s">mogi_trajectory_server</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">mogi_trajectory_server</span><span class="sh">'</span><span class="p">,</span>
    <span class="p">)</span>

</code></pre></div></div>

<p>And also add it to the <code class="language-plaintext highlighter-rouge">LaunchDescription()</code> object:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">trajectory_node</span><span class="p">)</span>

</code></pre></div></div>

<p>Then launch the simulation:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_gazebo_basics spawn_robot.launch.py 

</code></pre></div></div>

<p>And in another terminal let’s start the <code class="language-plaintext highlighter-rouge">teleop_twist_keyboard</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run teleop_twist_keyboard teleop_twist_keyboard 

</code></pre></div></div>

<p>And let’s see how it looks like in RViz:
<img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/trajectory.png" alt="alt text" title="Trajectory"></p>

<p>We can also see how the nodes are connected to each other using the tool we previously met, <code class="language-plaintext highlighter-rouge">rqt_graph</code>:</p>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/rqt-graph.png" alt="alt text" title="rqt_graph"></p>

<h1 id="3d-models">3D models</h1>

<p>Let’s make our robot visually more appealing with some 3D models. I already created the 3D models that can be found in the <code class="language-plaintext highlighter-rouge">meshes</code> folder. We can either use <code class="language-plaintext highlighter-rouge">.stl</code> files or <code class="language-plaintext highlighter-rouge">.dae</code> collada meshes. I recommend the collada meshes because then we can individually color certain areas of meshes (e.g. the tyre, the hub and spokes in case of the wheel). With <code class="language-plaintext highlighter-rouge">.stl</code> files we can only assign a single color for the model.</p>

<blockquote>
  <p>I’ve made previously a video about creating robot models and worlds in Blender:
<a href="https://youtu.be/K5v3cWsks8w"><img width="600" src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/blender.png"></a></p>
</blockquote>

<p>Creating a model consists of the following recomennded steps:</p>
<ol>
  <li>Create your model in SolidWorks or any other CAD program and save it to an <code class="language-plaintext highlighter-rouge">.stl</code> file.
<img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/mogi-bot.png" alt="alt text" title="mogi bot">
</li>
  <li>Import <code class="language-plaintext highlighter-rouge">.stl</code> to Blender and export it as <code class="language-plaintext highlighter-rouge">.dea</code>, add the model to the URDF and always check it with the <code class="language-plaintext highlighter-rouge">check_urdf.launch.py</code>, usually the scale and the centerpoint of the model isn’t right.
<img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/mogi-bot-1.png" alt="alt text" title="mogi bot">
</li>
  <li>Iteratively rescale and move the model in Blender, always export to the same <code class="language-plaintext highlighter-rouge">.dae</code> file, when everything is in the right place, color the model in Blender as you wish.
<img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/mogi-bot-2.png" alt="alt text" title="mogi bot">
</li>
</ol>

<p>The collada meshes are already available for this robot, so it’s time to replace the box and cylinders in the URDF file:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;visual</span> <span class="na">name=</span><span class="s">'base_link_visual'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">" 0 0 0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;geometry&gt;</span>
        <span class="nt">&lt;mesh</span> <span class="na">filename =</span> <span class="s">"package://bme_gazebo_basics/meshes/mogi_bot.dae"</span><span class="nt">/&gt;</span>
        <span class="c">&lt;!-- &lt;box size=".4 .2 .1"/&gt; --&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
      <span class="c">&lt;!-- &lt;material name="orange"/&gt; --&gt;</span>
    <span class="nt">&lt;/visual&gt;</span>

</code></pre></div></div>

<p>and for both left and right wheels:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;visual</span> <span class="na">name=</span><span class="s">'left_wheel_visual'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 1.5707 1.5707"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;geometry&gt;</span>
        <span class="nt">&lt;mesh</span> <span class="na">filename =</span> <span class="s">"package://bme_gazebo_basics/meshes/wheel.dae"</span><span class="nt">/&gt;</span>
        <span class="c">&lt;!-- &lt;cylinder radius=".1" length=".05"/&gt; --&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
      <span class="c">&lt;!-- &lt;material name="green"/&gt; --&gt;</span>
    <span class="nt">&lt;/visual&gt;</span>

</code></pre></div></div>

<blockquote>
  <p>Note that also <code class="language-plaintext highlighter-rouge">&lt;material&gt;</code> tag is removed, if we don’t remove it, Gazebo will still apply a single color on the model!</p>
</blockquote>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/mogi-bot-3.png" alt="alt text" title="mogi bot"></p>

<h1 id="skid-steer">Skid steer</h1>

<p>To simulate a 4 wheeled skid steer drive first we’ll have to extend our robot with 2 more wheels and we remove the caster wheels. To drive the robot we can use the same diff drive plugin, as it’s described <a href="https://gazebosim.org/api/sim/8/classgz_1_1sim_1_1systems_1_1DiffDrive.html">in its documentation</a>, left and right joint can appear multiple times:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;left_joint&gt;</span>: Name of a joint that controls a left wheel. This element can appear multiple times, and must appear at least once.

</code></pre></div></div>

<p>Let’s create a <code class="language-plaintext highlighter-rouge">mogi_bot_skid_steer.urdf</code> file first in the <code class="language-plaintext highlighter-rouge">urdf</code> folder:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version='1.0'?&gt;</span>

<span class="nt">&lt;robot</span> <span class="na">name=</span><span class="s">"mogi_bot"</span> <span class="na">xmlns:xacro=</span><span class="s">"http://www.ros.org/wiki/xacro"</span><span class="nt">&gt;</span>

  <span class="c">&lt;!-- STEP 5 - Gazebo plugin --&gt;</span>
  <span class="nt">&lt;xacro:include</span> <span class="na">filename=</span><span class="s">"$(find bme_gazebo_basics)/urdf/mogi_bot_skid_steer.gazebo"</span> <span class="nt">/&gt;</span>

  <span class="c">&lt;!-- STEP 4 - RViz colors --&gt;</span>
  <span class="nt">&lt;xacro:include</span> <span class="na">filename=</span><span class="s">"$(find bme_gazebo_basics)/urdf/materials.xacro"</span> <span class="nt">/&gt;</span>

  <span class="c">&lt;!-- STEP 1 - Robot footprint --&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">"base_footprint"</span><span class="nt">&gt;&lt;/link&gt;</span>

  <span class="c">&lt;!-- STEP 2 - Robot chassis = base_link --&gt;</span>
  <span class="nt">&lt;joint</span> <span class="na">name=</span><span class="s">"base_footprint_joint"</span> <span class="na">type=</span><span class="s">"fixed"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 0 0"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;parent</span> <span class="na">link=</span><span class="s">"base_footprint"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;child</span> <span class="na">link=</span><span class="s">"base_link"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/joint&gt;</span>

  <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'base_link'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;pose&gt;</span>0 0 0.1 0 0 0<span class="nt">&lt;/pose&gt;</span>

    <span class="nt">&lt;inertial&gt;</span>
      <span class="nt">&lt;mass</span> <span class="na">value=</span><span class="s">"15.0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0.0 0 0"</span> <span class="na">rpy=</span><span class="s">" 0 0 0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;inertia</span>
          <span class="na">ixx=</span><span class="s">"0.0625"</span> <span class="na">ixy=</span><span class="s">"0"</span> <span class="na">ixz=</span><span class="s">"0"</span>
          <span class="na">iyy=</span><span class="s">"0.2125"</span> <span class="na">iyz=</span><span class="s">"0"</span>
          <span class="na">izz=</span><span class="s">"0.25"</span>
      <span class="nt">/&gt;</span>
    <span class="nt">&lt;/inertial&gt;</span>

    <span class="nt">&lt;collision</span> <span class="na">name=</span><span class="s">'collision'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">" 0 0 0"</span><span class="nt">/&gt;</span> 
      <span class="nt">&lt;geometry&gt;</span>
        <span class="nt">&lt;box</span> <span class="na">size=</span><span class="s">".4 .2 .1"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
    <span class="nt">&lt;/collision&gt;</span>

    <span class="nt">&lt;visual</span> <span class="na">name=</span><span class="s">'base_link_visual'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">" 0 0 0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;geometry&gt;</span>
        <span class="c">&lt;!-- &lt;box size=".4 .2 .1"/&gt; --&gt;</span>
        <span class="nt">&lt;mesh</span> <span class="na">filename =</span> <span class="s">"package://bme_gazebo_basics/meshes/mogi_bot.dae"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
      <span class="c">&lt;!-- &lt;material name="orange"/&gt; --&gt;</span>
    <span class="nt">&lt;/visual&gt;</span>

  <span class="nt">&lt;/link&gt;</span>

  <span class="c">&lt;!-- STEP 3 - Wheels --&gt;</span>
  <span class="nt">&lt;joint</span> <span class="na">type=</span><span class="s">"continuous"</span> <span class="na">name=</span><span class="s">"front_left_wheel_joint"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0.15 0.15 0"</span> <span class="na">rpy=</span><span class="s">"0 0 0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;child</span> <span class="na">link=</span><span class="s">"front_left_wheel"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;parent</span> <span class="na">link=</span><span class="s">"base_link"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;axis</span> <span class="na">xyz=</span><span class="s">"0 1 0"</span> <span class="na">rpy=</span><span class="s">"0 0 0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;limit</span> <span class="na">effort=</span><span class="s">"100"</span> <span class="na">velocity=</span><span class="s">"10"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;dynamics</span> <span class="na">damping=</span><span class="s">"1.0"</span> <span class="na">friction=</span><span class="s">"1.0"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/joint&gt;</span>

  <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'front_left_wheel'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;inertial&gt;</span>
      <span class="nt">&lt;mass</span> <span class="na">value=</span><span class="s">"5.0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 1.5707 1.5707"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;inertia</span>
          <span class="na">ixx=</span><span class="s">"0.014"</span> <span class="na">ixy=</span><span class="s">"0"</span> <span class="na">ixz=</span><span class="s">"0"</span>
          <span class="na">iyy=</span><span class="s">"0.014"</span> <span class="na">iyz=</span><span class="s">"0"</span>
          <span class="na">izz=</span><span class="s">"0.025"</span>
      <span class="nt">/&gt;</span>
    <span class="nt">&lt;/inertial&gt;</span>

    <span class="nt">&lt;collision&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 1.5707 1.5707"</span><span class="nt">/&gt;</span> 
      <span class="nt">&lt;geometry&gt;</span>
        <span class="nt">&lt;cylinder</span> <span class="na">radius=</span><span class="s">".1"</span> <span class="na">length=</span><span class="s">".05"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
    <span class="nt">&lt;/collision&gt;</span>

    <span class="nt">&lt;visual</span> <span class="na">name=</span><span class="s">'front_left_wheel_visual'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 1.5707 1.5707"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;geometry&gt;</span>
        <span class="c">&lt;!-- &lt;cylinder radius=".1" length=".05"/&gt; --&gt;</span>
        <span class="nt">&lt;mesh</span> <span class="na">filename =</span> <span class="s">"package://bme_gazebo_basics/meshes/wheel.dae"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
      <span class="c">&lt;!-- &lt;material name="green"/&gt; --&gt;</span>
    <span class="nt">&lt;/visual&gt;</span>
  <span class="nt">&lt;/link&gt;</span>

  <span class="nt">&lt;joint</span> <span class="na">type=</span><span class="s">"continuous"</span> <span class="na">name=</span><span class="s">"rear_left_wheel_joint"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"-0.15 0.15 0"</span> <span class="na">rpy=</span><span class="s">"0 0 0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;child</span> <span class="na">link=</span><span class="s">"rear_left_wheel"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;parent</span> <span class="na">link=</span><span class="s">"base_link"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;axis</span> <span class="na">xyz=</span><span class="s">"0 1 0"</span> <span class="na">rpy=</span><span class="s">"0 0 0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;limit</span> <span class="na">effort=</span><span class="s">"100"</span> <span class="na">velocity=</span><span class="s">"10"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;dynamics</span> <span class="na">damping=</span><span class="s">"1.0"</span> <span class="na">friction=</span><span class="s">"1.0"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/joint&gt;</span>

  <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'rear_left_wheel'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;inertial&gt;</span>
      <span class="nt">&lt;mass</span> <span class="na">value=</span><span class="s">"5.0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 1.5707 1.5707"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;inertia</span>
          <span class="na">ixx=</span><span class="s">"0.014"</span> <span class="na">ixy=</span><span class="s">"0"</span> <span class="na">ixz=</span><span class="s">"0"</span>
          <span class="na">iyy=</span><span class="s">"0.014"</span> <span class="na">iyz=</span><span class="s">"0"</span>
          <span class="na">izz=</span><span class="s">"0.025"</span>
      <span class="nt">/&gt;</span>
    <span class="nt">&lt;/inertial&gt;</span>

    <span class="nt">&lt;collision&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 1.5707 1.5707"</span><span class="nt">/&gt;</span> 
      <span class="nt">&lt;geometry&gt;</span>
        <span class="nt">&lt;cylinder</span> <span class="na">radius=</span><span class="s">".1"</span> <span class="na">length=</span><span class="s">".05"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
    <span class="nt">&lt;/collision&gt;</span>

    <span class="nt">&lt;visual</span> <span class="na">name=</span><span class="s">'rear_left_wheel_visual'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 1.5707 1.5707"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;geometry&gt;</span>
        <span class="c">&lt;!-- &lt;cylinder radius=".1" length=".05"/&gt; --&gt;</span>
        <span class="nt">&lt;mesh</span> <span class="na">filename =</span> <span class="s">"package://bme_gazebo_basics/meshes/wheel.dae"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
      <span class="c">&lt;!-- &lt;material name="green"/&gt; --&gt;</span>
    <span class="nt">&lt;/visual&gt;</span>
  <span class="nt">&lt;/link&gt;</span>

  <span class="nt">&lt;joint</span> <span class="na">type=</span><span class="s">"continuous"</span> <span class="na">name=</span><span class="s">"front_right_wheel_joint"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0.15 -0.15 0"</span> <span class="na">rpy=</span><span class="s">"0 0 0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;child</span> <span class="na">link=</span><span class="s">"front_right_wheel"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;parent</span> <span class="na">link=</span><span class="s">"base_link"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;axis</span> <span class="na">xyz=</span><span class="s">"0 1 0"</span> <span class="na">rpy=</span><span class="s">"0 0 0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;limit</span> <span class="na">effort=</span><span class="s">"100"</span> <span class="na">velocity=</span><span class="s">"10"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;dynamics</span> <span class="na">damping=</span><span class="s">"1.0"</span> <span class="na">friction=</span><span class="s">"1.0"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/joint&gt;</span>

  <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'front_right_wheel'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;inertial&gt;</span>
      <span class="nt">&lt;mass</span> <span class="na">value=</span><span class="s">"5.0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 1.5707 1.5707"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;inertia</span>
          <span class="na">ixx=</span><span class="s">"0.014"</span> <span class="na">ixy=</span><span class="s">"0"</span> <span class="na">ixz=</span><span class="s">"0"</span>
          <span class="na">iyy=</span><span class="s">"0.014"</span> <span class="na">iyz=</span><span class="s">"0"</span>
          <span class="na">izz=</span><span class="s">"0.025"</span>
      <span class="nt">/&gt;</span>
    <span class="nt">&lt;/inertial&gt;</span>

    <span class="nt">&lt;collision&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 1.5707 1.5707"</span><span class="nt">/&gt;</span> 
      <span class="nt">&lt;geometry&gt;</span>
        <span class="nt">&lt;cylinder</span> <span class="na">radius=</span><span class="s">".1"</span> <span class="na">length=</span><span class="s">".05"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
    <span class="nt">&lt;/collision&gt;</span>

    <span class="nt">&lt;visual</span> <span class="na">name=</span><span class="s">'front_right_wheel_visual'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 1.5707 1.5707"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;geometry&gt;</span>
        <span class="c">&lt;!-- &lt;cylinder radius=".1" length=".05"/&gt; --&gt;</span>
        <span class="nt">&lt;mesh</span> <span class="na">filename =</span> <span class="s">"package://bme_gazebo_basics/meshes/wheel.dae"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
      <span class="c">&lt;!-- &lt;material name="green"/&gt; --&gt;</span>
    <span class="nt">&lt;/visual&gt;</span>
  <span class="nt">&lt;/link&gt;</span>

  <span class="nt">&lt;joint</span> <span class="na">type=</span><span class="s">"continuous"</span> <span class="na">name=</span><span class="s">"rear_right_wheel_joint"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"-0.15 -0.15 0"</span> <span class="na">rpy=</span><span class="s">"0 0 0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;child</span> <span class="na">link=</span><span class="s">"rear_right_wheel"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;parent</span> <span class="na">link=</span><span class="s">"base_link"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;axis</span> <span class="na">xyz=</span><span class="s">"0 1 0"</span> <span class="na">rpy=</span><span class="s">"0 0 0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;limit</span> <span class="na">effort=</span><span class="s">"100"</span> <span class="na">velocity=</span><span class="s">"10"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;dynamics</span> <span class="na">damping=</span><span class="s">"1.0"</span> <span class="na">friction=</span><span class="s">"1.0"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/joint&gt;</span>

  <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'rear_right_wheel'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;inertial&gt;</span>
      <span class="nt">&lt;mass</span> <span class="na">value=</span><span class="s">"5.0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 1.5707 1.5707"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;inertia</span>
          <span class="na">ixx=</span><span class="s">"0.014"</span> <span class="na">ixy=</span><span class="s">"0"</span> <span class="na">ixz=</span><span class="s">"0"</span>
          <span class="na">iyy=</span><span class="s">"0.014"</span> <span class="na">iyz=</span><span class="s">"0"</span>
          <span class="na">izz=</span><span class="s">"0.025"</span>
      <span class="nt">/&gt;</span>
    <span class="nt">&lt;/inertial&gt;</span>

    <span class="nt">&lt;collision&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 1.5707 1.5707"</span><span class="nt">/&gt;</span> 
      <span class="nt">&lt;geometry&gt;</span>
        <span class="nt">&lt;cylinder</span> <span class="na">radius=</span><span class="s">".1"</span> <span class="na">length=</span><span class="s">".05"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
    <span class="nt">&lt;/collision&gt;</span>

    <span class="nt">&lt;visual</span> <span class="na">name=</span><span class="s">'rear_right_wheel_visual'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 1.5707 1.5707"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;geometry&gt;</span>
        <span class="c">&lt;!-- &lt;cylinder radius=".1" length=".05"/&gt; --&gt;</span>
        <span class="nt">&lt;mesh</span> <span class="na">filename =</span> <span class="s">"package://bme_gazebo_basics/meshes/wheel.dae"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
      <span class="c">&lt;!-- &lt;material name="green"/&gt; --&gt;</span>
    <span class="nt">&lt;/visual&gt;</span>
  <span class="nt">&lt;/link&gt;</span>

  <span class="c">&lt;!-- STEP 6 - Gazebo frictions and colors --&gt;</span>
  <span class="nt">&lt;gazebo</span> <span class="na">reference=</span><span class="s">"front_left_wheel"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;mu1&gt;</span>1.5<span class="nt">&lt;/mu1&gt;</span>
    <span class="nt">&lt;mu2&gt;</span>0.7<span class="nt">&lt;/mu2&gt;</span>
    <span class="nt">&lt;kp&gt;</span>200000.0<span class="nt">&lt;/kp&gt;</span>
    <span class="nt">&lt;kd&gt;</span>5000.0<span class="nt">&lt;/kd&gt;</span>
    <span class="nt">&lt;minDepth&gt;</span>0.002<span class="nt">&lt;/minDepth&gt;</span>
    <span class="nt">&lt;maxVel&gt;</span>0.3<span class="nt">&lt;/maxVel&gt;</span>
    <span class="nt">&lt;fdir1&gt;</span>0 1 0<span class="nt">&lt;/fdir1&gt;</span>
    <span class="c">&lt;!-- &lt;material&gt;Gazebo/Green&lt;/material&gt; --&gt;</span>
  <span class="nt">&lt;/gazebo&gt;</span>

  <span class="nt">&lt;gazebo</span> <span class="na">reference=</span><span class="s">"front_right_wheel"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;mu1&gt;</span>1.5<span class="nt">&lt;/mu1&gt;</span>
    <span class="nt">&lt;mu2&gt;</span>0.7<span class="nt">&lt;/mu2&gt;</span>
    <span class="nt">&lt;kp&gt;</span>200000.0<span class="nt">&lt;/kp&gt;</span>
    <span class="nt">&lt;kd&gt;</span>5000.0<span class="nt">&lt;/kd&gt;</span>
    <span class="nt">&lt;minDepth&gt;</span>0.002<span class="nt">&lt;/minDepth&gt;</span>
    <span class="nt">&lt;maxVel&gt;</span>0.3<span class="nt">&lt;/maxVel&gt;</span>
    <span class="nt">&lt;fdir1&gt;</span>0 1 0<span class="nt">&lt;/fdir1&gt;</span>
    <span class="c">&lt;!-- &lt;material&gt;Gazebo/Green&lt;/material&gt; --&gt;</span>
  <span class="nt">&lt;/gazebo&gt;</span>

  <span class="nt">&lt;gazebo</span> <span class="na">reference=</span><span class="s">"rear_left_wheel"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;mu1&gt;</span>1.5<span class="nt">&lt;/mu1&gt;</span>
    <span class="nt">&lt;mu2&gt;</span>0.7<span class="nt">&lt;/mu2&gt;</span>
    <span class="nt">&lt;kp&gt;</span>200000.0<span class="nt">&lt;/kp&gt;</span>
    <span class="nt">&lt;kd&gt;</span>5000.0<span class="nt">&lt;/kd&gt;</span>
    <span class="nt">&lt;minDepth&gt;</span>0.002<span class="nt">&lt;/minDepth&gt;</span>
    <span class="nt">&lt;maxVel&gt;</span>0.3<span class="nt">&lt;/maxVel&gt;</span>
    <span class="nt">&lt;fdir1&gt;</span>0 1 0<span class="nt">&lt;/fdir1&gt;</span>
    <span class="c">&lt;!-- &lt;material&gt;Gazebo/Green&lt;/material&gt; --&gt;</span>
  <span class="nt">&lt;/gazebo&gt;</span>

  <span class="nt">&lt;gazebo</span> <span class="na">reference=</span><span class="s">"rear_right_wheel"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;mu1&gt;</span>1.5<span class="nt">&lt;/mu1&gt;</span>
    <span class="nt">&lt;mu2&gt;</span>0.7<span class="nt">&lt;/mu2&gt;</span>
    <span class="nt">&lt;kp&gt;</span>200000.0<span class="nt">&lt;/kp&gt;</span>
    <span class="nt">&lt;kd&gt;</span>5000.0<span class="nt">&lt;/kd&gt;</span>
    <span class="nt">&lt;minDepth&gt;</span>0.002<span class="nt">&lt;/minDepth&gt;</span>
    <span class="nt">&lt;maxVel&gt;</span>0.3<span class="nt">&lt;/maxVel&gt;</span>
    <span class="nt">&lt;fdir1&gt;</span>0 1 0<span class="nt">&lt;/fdir1&gt;</span>
    <span class="c">&lt;!-- &lt;material&gt;Gazebo/Green&lt;/material&gt; --&gt;</span>
  <span class="nt">&lt;/gazebo&gt;</span>

  <span class="nt">&lt;gazebo</span> <span class="na">reference=</span><span class="s">"base_link"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;mu1&gt;</span>0.000002<span class="nt">&lt;/mu1&gt;</span>
    <span class="nt">&lt;mu2&gt;</span>0.000002<span class="nt">&lt;/mu2&gt;</span>
    <span class="c">&lt;!-- &lt;material&gt;Gazebo/Red&lt;/material&gt; --&gt;</span>
  <span class="nt">&lt;/gazebo&gt;</span>

<span class="nt">&lt;/robot&gt;</span>

</code></pre></div></div>

<p>This time we include <code class="language-plaintext highlighter-rouge">mogi_bot_skid_steer.gazebo</code>, let’s create this file too:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;robot&gt;</span>
  <span class="nt">&lt;gazebo&gt;</span>
    <span class="nt">&lt;plugin</span>
        <span class="na">filename=</span><span class="s">"gz-sim-diff-drive-system"</span>
        <span class="na">name=</span><span class="s">"gz::sim::systems::DiffDrive"</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- Topic for the command input --&gt;</span>
        <span class="nt">&lt;topic&gt;</span>/cmd_vel<span class="nt">&lt;/topic&gt;</span>

        <span class="c">&lt;!-- Wheel joints --&gt;</span>
        <span class="nt">&lt;left_joint&gt;</span>front_left_wheel_joint<span class="nt">&lt;/left_joint&gt;</span>
        <span class="nt">&lt;left_joint&gt;</span>rear_left_wheel_joint<span class="nt">&lt;/left_joint&gt;</span>
        <span class="nt">&lt;right_joint&gt;</span>front_right_wheel_joint<span class="nt">&lt;/right_joint&gt;</span>
        <span class="nt">&lt;right_joint&gt;</span>rear_right_wheel_joint<span class="nt">&lt;/right_joint&gt;</span>

        <span class="c">&lt;!-- Wheel parameters --&gt;</span>
        <span class="nt">&lt;wheel_separation&gt;</span>0.3<span class="nt">&lt;/wheel_separation&gt;</span>
        <span class="nt">&lt;wheel_radius&gt;</span>0.1<span class="nt">&lt;/wheel_radius&gt;</span> 

        <span class="c">&lt;!-- Control gains and limits (optional) --&gt;</span>
        <span class="nt">&lt;max_velocity&gt;</span>3.0<span class="nt">&lt;/max_velocity&gt;</span> 
        <span class="nt">&lt;max_linear_acceleration&gt;</span>1<span class="nt">&lt;/max_linear_acceleration&gt;</span>
        <span class="nt">&lt;min_linear_acceleration&gt;</span>-1<span class="nt">&lt;/min_linear_acceleration&gt;</span>
        <span class="nt">&lt;max_angular_acceleration&gt;</span>2<span class="nt">&lt;/max_angular_acceleration&gt;</span>
        <span class="nt">&lt;min_angular_acceleration&gt;</span>-2<span class="nt">&lt;/min_angular_acceleration&gt;</span>
        <span class="nt">&lt;max_linear_velocity&gt;</span>0.5<span class="nt">&lt;/max_linear_velocity&gt;</span>
        <span class="nt">&lt;min_linear_velocity&gt;</span>-0.5<span class="nt">&lt;/min_linear_velocity&gt;</span>
        <span class="nt">&lt;max_angular_velocity&gt;</span>1<span class="nt">&lt;/max_angular_velocity&gt;</span>
        <span class="nt">&lt;min_angular_velocity&gt;</span>-1<span class="nt">&lt;/min_angular_velocity&gt;</span>
        
        <span class="c">&lt;!-- Other parameters (optional) --&gt;</span>
        <span class="nt">&lt;odom_topic&gt;</span>odom<span class="nt">&lt;/odom_topic&gt;</span> 
        <span class="nt">&lt;tf_topic&gt;</span>tf<span class="nt">&lt;/tf_topic&gt;</span>
        <span class="nt">&lt;frame_id&gt;</span>odom<span class="nt">&lt;/frame_id&gt;</span>
        <span class="nt">&lt;child_frame_id&gt;</span>base_footprint<span class="nt">&lt;/child_frame_id&gt;</span>
        <span class="nt">&lt;odom_publish_frequency&gt;</span>30<span class="nt">&lt;/odom_publish_frequency&gt;</span>
    <span class="nt">&lt;/plugin&gt;</span>

    <span class="nt">&lt;plugin</span>
        <span class="na">filename=</span><span class="s">"gz-sim-joint-state-publisher-system"</span>
        <span class="na">name=</span><span class="s">"gz::sim::systems::JointStatePublisher"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;topic&gt;</span>joint_states<span class="nt">&lt;/topic&gt;</span> <span class="c">&lt;!--from &lt;ros&gt;&lt;remapping&gt; --&gt;</span>
        <span class="nt">&lt;joint_name&gt;</span>front_left_wheel_joint<span class="nt">&lt;/joint_name&gt;</span>
        <span class="nt">&lt;joint_name&gt;</span>front_right_wheel_joint<span class="nt">&lt;/joint_name&gt;</span>
        <span class="nt">&lt;joint_name&gt;</span>rear_left_wheel_joint<span class="nt">&lt;/joint_name&gt;</span>
        <span class="nt">&lt;joint_name&gt;</span>rear_right_wheel_joint<span class="nt">&lt;/joint_name&gt;</span>
    <span class="nt">&lt;/plugin&gt;</span>
  <span class="nt">&lt;/gazebo&gt;</span>
<span class="nt">&lt;/robot&gt;</span>

</code></pre></div></div>

<p>It’s almost identical to the previous diff drive setup but this time we define 4 wheels for both plugins.</p>

<p>Rebuild the workspace, and we can launch with the same launch file, just overriding the model argument:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_gazebo_basics spawn_robot.launch.py model:<span class="o">=</span>mogi_bot_skid_steer.urdf

</code></pre></div></div>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/skid-steer.png" alt="alt text" title="skid steer"></p>

<h1 id="mecanum-wheel">Mecanum wheel</h1>

<p>Mecanum drive is a holonomic wheeled drive system that allows a vehicle to move in any direction (forward, backward, sideways, diagonally, or rotate) without changing the orientation of the wheels. It is commonly used in robotics, AGVs (Automated Guided Vehicles), and other platforms that require advanced maneuverability. It uses special wheels with rollers mounted at a 45-degree angle to the wheel’s axis.</p>

<p>Gazebo has detailed <a href="https://gazebosim.org/api/sim/8/namespacegz_1_1sim_1_1systems.html">documentation for available plugins</a>, specifically to mecanum drive the documentation of the plugin can be found <a href="https://gazebosim.org/api/sim/8/classgz_1_1sim_1_1systems_1_1MecanumDrive.html">here</a>.</p>

<p>Although, from the documentation it seems that mecanum drive is publishing odometry transformation, but unfortunately this feature is not properly implemented in Gazebo Harmonic as it’s mentioned <a href="https://github.com/gazebosim/gz-sim/issues/1619">in this GitHub issue</a>.</p>

<p>To do a workaround until this feature will be properly implemented in the future, we can use another Gazebo plugin, the <a href="https://gazebosim.org/api/sim/8/classgz_1_1sim_1_1systems_1_1OdometryPublisher.html">odometry publisher</a>.</p>

<p>Let’s create a new file in the <code class="language-plaintext highlighter-rouge">urdf</code> folder, <code class="language-plaintext highlighter-rouge">mogi_bot_mecanum.urdf</code>:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version='1.0'?&gt;</span>

<span class="nt">&lt;robot</span> <span class="na">name=</span><span class="s">"mogi_bot"</span> <span class="na">xmlns:xacro=</span><span class="s">"http://www.ros.org/wiki/xacro"</span> <span class="na">xmlns:gz=</span><span class="s">"http://gazebosim.org/schema"</span><span class="nt">&gt;</span>

  <span class="c">&lt;!-- STEP 5 - Gazebo plugin --&gt;</span>
  <span class="nt">&lt;xacro:include</span> <span class="na">filename=</span><span class="s">"$(find bme_gazebo_basics)/urdf/mogi_bot_mecanum.gazebo"</span> <span class="nt">/&gt;</span>

  <span class="c">&lt;!-- STEP 4 - RViz colors --&gt;</span>
  <span class="nt">&lt;xacro:include</span> <span class="na">filename=</span><span class="s">"$(find bme_gazebo_basics)/urdf/materials.xacro"</span> <span class="nt">/&gt;</span>

  <span class="c">&lt;!-- STEP 1 - Robot footprint --&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">"base_footprint"</span><span class="nt">&gt;&lt;/link&gt;</span>

  <span class="c">&lt;!-- STEP 2 - Robot chassis = base_link --&gt;</span>
  <span class="nt">&lt;joint</span> <span class="na">name=</span><span class="s">"base_footprint_joint"</span> <span class="na">type=</span><span class="s">"fixed"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 0 0"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;parent</span> <span class="na">link=</span><span class="s">"base_footprint"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;child</span> <span class="na">link=</span><span class="s">"base_link"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/joint&gt;</span>

  <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'base_link'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;pose&gt;</span>0 0 0.1 0 0 0<span class="nt">&lt;/pose&gt;</span>

    <span class="nt">&lt;inertial&gt;</span>
      <span class="nt">&lt;mass</span> <span class="na">value=</span><span class="s">"15.0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0.0 0 0"</span> <span class="na">rpy=</span><span class="s">" 0 0 0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;inertia</span>
          <span class="na">ixx=</span><span class="s">"0.0625"</span> <span class="na">ixy=</span><span class="s">"0"</span> <span class="na">ixz=</span><span class="s">"0"</span>
          <span class="na">iyy=</span><span class="s">"0.2125"</span> <span class="na">iyz=</span><span class="s">"0"</span>
          <span class="na">izz=</span><span class="s">"0.25"</span>
      <span class="nt">/&gt;</span>
    <span class="nt">&lt;/inertial&gt;</span>

    <span class="nt">&lt;collision&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">" 0 0 0"</span><span class="nt">/&gt;</span> 
      <span class="nt">&lt;geometry&gt;</span>
        <span class="nt">&lt;box</span> <span class="na">size=</span><span class="s">".4 .2 .1"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
    <span class="nt">&lt;/collision&gt;</span>

    <span class="nt">&lt;visual</span> <span class="na">name=</span><span class="s">'base_link_visual'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">" 0 0 0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;geometry&gt;</span>
        <span class="c">&lt;!-- &lt;box size=".4 .2 .1"/&gt; --&gt;</span>
        <span class="nt">&lt;mesh</span> <span class="na">filename =</span> <span class="s">"package://bme_gazebo_basics/meshes/mogi_bot.dae"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
      <span class="c">&lt;!-- &lt;material name="orange"/&gt; --&gt;</span>
    <span class="nt">&lt;/visual&gt;</span>

  <span class="nt">&lt;/link&gt;</span>

  <span class="c">&lt;!-- STEP 3 - Wheels --&gt;</span>
  <span class="nt">&lt;joint</span> <span class="na">type=</span><span class="s">"continuous"</span> <span class="na">name=</span><span class="s">"front_left_wheel_joint"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0.15 0.15 0"</span> <span class="na">rpy=</span><span class="s">"-1.5707 0 0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;child</span> <span class="na">link=</span><span class="s">"front_left_wheel"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;parent</span> <span class="na">link=</span><span class="s">"base_link"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;axis</span> <span class="na">xyz=</span><span class="s">"0 0 1"</span> <span class="na">rpy=</span><span class="s">"0 0 0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;limit</span> <span class="na">effort=</span><span class="s">"10000"</span> <span class="na">velocity=</span><span class="s">"10"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;dynamics</span> <span class="na">damping=</span><span class="s">"1.0"</span> <span class="na">friction=</span><span class="s">"1.0"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/joint&gt;</span>

  <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'front_left_wheel'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;inertial&gt;</span>
      <span class="nt">&lt;mass</span> <span class="na">value=</span><span class="s">"2.0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 0 0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;inertia</span>
          <span class="na">ixx=</span><span class="s">"0.145833"</span> <span class="na">ixy=</span><span class="s">"0"</span> <span class="na">ixz=</span><span class="s">"0"</span>
          <span class="na">iyy=</span><span class="s">"0.145833"</span> <span class="na">iyz=</span><span class="s">"0"</span>
          <span class="na">izz=</span><span class="s">"0.125"</span>
      <span class="nt">/&gt;</span>
    <span class="nt">&lt;/inertial&gt;</span>

    <span class="nt">&lt;collision&gt;</span>
      <span class="nt">&lt;geometry&gt;</span>
        <span class="nt">&lt;sphere</span> <span class="na">radius=</span><span class="s">".1"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
    <span class="nt">&lt;/collision&gt;</span>

    <span class="nt">&lt;visual</span> <span class="na">name=</span><span class="s">'front_left_wheel_visual'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"1.5707 0 0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;geometry&gt;</span>
        <span class="c">&lt;!-- &lt;sphere radius=".1"/&gt; --&gt;</span>
        <span class="nt">&lt;mesh</span> <span class="na">filename=</span><span class="s">"package://bme_gazebo_basics/meshes/mecanum_wheel_left.STL"</span> <span class="na">scale=</span><span class="s">"0.002 .002 0.002"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
      <span class="nt">&lt;material</span> <span class="na">name=</span><span class="s">"green"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/visual&gt;</span>
  <span class="nt">&lt;/link&gt;</span>

  <span class="nt">&lt;joint</span> <span class="na">type=</span><span class="s">"continuous"</span> <span class="na">name=</span><span class="s">"rear_left_wheel_joint"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"-0.15 0.15 0"</span> <span class="na">rpy=</span><span class="s">"-1.5707 0 0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;child</span> <span class="na">link=</span><span class="s">"rear_left_wheel"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;parent</span> <span class="na">link=</span><span class="s">"base_link"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;axis</span> <span class="na">xyz=</span><span class="s">"0 0 1"</span> <span class="na">rpy=</span><span class="s">"0 0 0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;limit</span> <span class="na">effort=</span><span class="s">"10000"</span> <span class="na">velocity=</span><span class="s">"10"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;dynamics</span> <span class="na">damping=</span><span class="s">"1.0"</span> <span class="na">friction=</span><span class="s">"1.0"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/joint&gt;</span>

  <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'rear_left_wheel'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;inertial&gt;</span>
      <span class="nt">&lt;mass</span> <span class="na">value=</span><span class="s">"2.0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 0 0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;inertia</span>
          <span class="na">ixx=</span><span class="s">"0.145833"</span> <span class="na">ixy=</span><span class="s">"0"</span> <span class="na">ixz=</span><span class="s">"0"</span>
          <span class="na">iyy=</span><span class="s">"0.145833"</span> <span class="na">iyz=</span><span class="s">"0"</span>
          <span class="na">izz=</span><span class="s">"0.125"</span>
      <span class="nt">/&gt;</span>
    <span class="nt">&lt;/inertial&gt;</span>

    <span class="nt">&lt;collision&gt;</span>
      <span class="nt">&lt;geometry&gt;</span>
        <span class="nt">&lt;sphere</span> <span class="na">radius=</span><span class="s">".1"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
    <span class="nt">&lt;/collision&gt;</span>

    <span class="nt">&lt;visual</span> <span class="na">name=</span><span class="s">'rear_left_wheel_visual'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"1.5707 0 0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;geometry&gt;</span>
        <span class="c">&lt;!-- &lt;sphere radius=".1"/&gt; --&gt;</span>
        <span class="nt">&lt;mesh</span> <span class="na">filename=</span><span class="s">"package://bme_gazebo_basics/meshes/mecanum_wheel_right.STL"</span> <span class="na">scale=</span><span class="s">"0.002 .002 0.002"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
      <span class="nt">&lt;material</span> <span class="na">name=</span><span class="s">"green"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/visual&gt;</span>
  <span class="nt">&lt;/link&gt;</span>

  <span class="nt">&lt;joint</span> <span class="na">type=</span><span class="s">"continuous"</span> <span class="na">name=</span><span class="s">"front_right_wheel_joint"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0.15 -0.15 0"</span> <span class="na">rpy=</span><span class="s">"-1.5707 0 0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;child</span> <span class="na">link=</span><span class="s">"front_right_wheel"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;parent</span> <span class="na">link=</span><span class="s">"base_link"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;axis</span> <span class="na">xyz=</span><span class="s">"0 0 1"</span> <span class="na">rpy=</span><span class="s">"0 0 0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;limit</span> <span class="na">effort=</span><span class="s">"10000"</span> <span class="na">velocity=</span><span class="s">"10"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;dynamics</span> <span class="na">damping=</span><span class="s">"1.0"</span> <span class="na">friction=</span><span class="s">"1.0"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/joint&gt;</span>

  <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'front_right_wheel'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;inertial&gt;</span>
      <span class="nt">&lt;mass</span> <span class="na">value=</span><span class="s">"2.0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 0 0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;inertia</span>
          <span class="na">ixx=</span><span class="s">"0.145833"</span> <span class="na">ixy=</span><span class="s">"0"</span> <span class="na">ixz=</span><span class="s">"0"</span>
          <span class="na">iyy=</span><span class="s">"0.145833"</span> <span class="na">iyz=</span><span class="s">"0"</span>
          <span class="na">izz=</span><span class="s">"0.125"</span>
      <span class="nt">/&gt;</span>
    <span class="nt">&lt;/inertial&gt;</span>

    <span class="nt">&lt;collision&gt;</span>
      <span class="nt">&lt;geometry&gt;</span>
        <span class="nt">&lt;sphere</span> <span class="na">radius=</span><span class="s">".1"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
    <span class="nt">&lt;/collision&gt;</span>

    <span class="nt">&lt;visual</span> <span class="na">name=</span><span class="s">'front_right_wheel_visual'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"1.5707 0 0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;geometry&gt;</span>
        <span class="c">&lt;!-- &lt;sphere radius=".1"/&gt; --&gt;</span>
        <span class="nt">&lt;mesh</span> <span class="na">filename=</span><span class="s">"package://bme_gazebo_basics/meshes/mecanum_wheel_right.STL"</span> <span class="na">scale=</span><span class="s">"0.002 .002 0.002"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
      <span class="nt">&lt;material</span> <span class="na">name=</span><span class="s">"green"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/visual&gt;</span>
  <span class="nt">&lt;/link&gt;</span>

  <span class="nt">&lt;joint</span> <span class="na">type=</span><span class="s">"continuous"</span> <span class="na">name=</span><span class="s">"rear_right_wheel_joint"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"-0.15 -0.15 0"</span> <span class="na">rpy=</span><span class="s">"-1.5707 0 0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;child</span> <span class="na">link=</span><span class="s">"rear_right_wheel"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;parent</span> <span class="na">link=</span><span class="s">"base_link"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;axis</span> <span class="na">xyz=</span><span class="s">"0 0 1"</span> <span class="na">rpy=</span><span class="s">"0 0 0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;limit</span> <span class="na">effort=</span><span class="s">"10000"</span> <span class="na">velocity=</span><span class="s">"10"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;dynamics</span> <span class="na">damping=</span><span class="s">"1.0"</span> <span class="na">friction=</span><span class="s">"1.0"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/joint&gt;</span>

  <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'rear_right_wheel'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;inertial&gt;</span>
      <span class="nt">&lt;mass</span> <span class="na">value=</span><span class="s">"2.0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"0 0 0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;inertia</span>
          <span class="na">ixx=</span><span class="s">"0.145833"</span> <span class="na">ixy=</span><span class="s">"0"</span> <span class="na">ixz=</span><span class="s">"0"</span>
          <span class="na">iyy=</span><span class="s">"0.145833"</span> <span class="na">iyz=</span><span class="s">"0"</span>
          <span class="na">izz=</span><span class="s">"0.125"</span>
      <span class="nt">/&gt;</span>
    <span class="nt">&lt;/inertial&gt;</span>

    <span class="nt">&lt;collision&gt;</span>
      <span class="nt">&lt;geometry&gt;</span>
        <span class="nt">&lt;sphere</span> <span class="na">radius=</span><span class="s">".1"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
    <span class="nt">&lt;/collision&gt;</span>

    <span class="nt">&lt;visual</span> <span class="na">name=</span><span class="s">'rear_right_wheel_visual'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">"0 0 0"</span> <span class="na">rpy=</span><span class="s">"1.5707 0 0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;geometry&gt;</span>
        <span class="c">&lt;!-- &lt;sphere radius=".1"/&gt; --&gt;</span>
        <span class="nt">&lt;mesh</span> <span class="na">filename=</span><span class="s">"package://bme_gazebo_basics/meshes/mecanum_wheel_left.STL"</span> <span class="na">scale=</span><span class="s">"0.002 .002 0.002"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/geometry&gt;</span>
      <span class="nt">&lt;material</span> <span class="na">name=</span><span class="s">"green"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/visual&gt;</span>
  <span class="nt">&lt;/link&gt;</span>

  <span class="c">&lt;!-- STEP 6 - Gazebo frictions and colors --&gt;</span>
  <span class="nt">&lt;gazebo</span> <span class="na">reference=</span><span class="s">'front_left_wheel'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;collision&gt;</span>
      <span class="nt">&lt;surface&gt;</span>
        <span class="nt">&lt;friction&gt;</span>
          <span class="nt">&lt;ode&gt;</span>
            <span class="nt">&lt;mu&gt;</span>1.5<span class="nt">&lt;/mu&gt;</span>
            <span class="nt">&lt;mu2&gt;</span>0.0<span class="nt">&lt;/mu2&gt;</span>
            <span class="nt">&lt;fdir1</span> <span class="na">gz:expressed_in=</span><span class="s">"base_footprint"</span><span class="nt">&gt;</span>1 -1 0<span class="nt">&lt;/fdir1&gt;</span>
          <span class="nt">&lt;/ode&gt;</span>
        <span class="nt">&lt;/friction&gt;</span>
      <span class="nt">&lt;/surface&gt;</span>
    <span class="nt">&lt;/collision&gt;</span>
  <span class="nt">&lt;/gazebo&gt;</span>

  <span class="nt">&lt;gazebo</span> <span class="na">reference=</span><span class="s">'rear_left_wheel'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;collision&gt;</span>
      <span class="nt">&lt;surface&gt;</span>
        <span class="nt">&lt;friction&gt;</span>
          <span class="nt">&lt;ode&gt;</span>
            <span class="nt">&lt;mu&gt;</span>1.5<span class="nt">&lt;/mu&gt;</span>
            <span class="nt">&lt;mu2&gt;</span>0.0<span class="nt">&lt;/mu2&gt;</span>
            <span class="nt">&lt;fdir1</span> <span class="na">gz:expressed_in=</span><span class="s">"base_footprint"</span><span class="nt">&gt;</span>1 1 0<span class="nt">&lt;/fdir1&gt;</span>
          <span class="nt">&lt;/ode&gt;</span>
        <span class="nt">&lt;/friction&gt;</span>
      <span class="nt">&lt;/surface&gt;</span>
    <span class="nt">&lt;/collision&gt;</span>
  <span class="nt">&lt;/gazebo&gt;</span>

  <span class="nt">&lt;gazebo</span> <span class="na">reference=</span><span class="s">'front_right_wheel'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;collision&gt;</span>
      <span class="nt">&lt;surface&gt;</span>
        <span class="nt">&lt;friction&gt;</span>
          <span class="nt">&lt;ode&gt;</span>
            <span class="nt">&lt;mu&gt;</span>1.5<span class="nt">&lt;/mu&gt;</span>
            <span class="nt">&lt;mu2&gt;</span>0.0<span class="nt">&lt;/mu2&gt;</span>
            <span class="nt">&lt;fdir1</span> <span class="na">gz:expressed_in=</span><span class="s">"base_footprint"</span><span class="nt">&gt;</span>1 1 0<span class="nt">&lt;/fdir1&gt;</span>
          <span class="nt">&lt;/ode&gt;</span>
        <span class="nt">&lt;/friction&gt;</span>
      <span class="nt">&lt;/surface&gt;</span>
    <span class="nt">&lt;/collision&gt;</span>
  <span class="nt">&lt;/gazebo&gt;</span>

  <span class="nt">&lt;gazebo</span> <span class="na">reference=</span><span class="s">'rear_right_wheel'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;collision&gt;</span>
      <span class="nt">&lt;surface&gt;</span>
        <span class="nt">&lt;friction&gt;</span>
          <span class="nt">&lt;ode&gt;</span>
            <span class="nt">&lt;mu&gt;</span>1.5<span class="nt">&lt;/mu&gt;</span>
            <span class="nt">&lt;mu2&gt;</span>0.0<span class="nt">&lt;/mu2&gt;</span>
            <span class="nt">&lt;fdir1</span> <span class="na">gz:expressed_in=</span><span class="s">"base_footprint"</span><span class="nt">&gt;</span>1 -1 0<span class="nt">&lt;/fdir1&gt;</span>
          <span class="nt">&lt;/ode&gt;</span>
        <span class="nt">&lt;/friction&gt;</span>
      <span class="nt">&lt;/surface&gt;</span>
    <span class="nt">&lt;/collision&gt;</span>
  <span class="nt">&lt;/gazebo&gt;</span>

  <span class="nt">&lt;gazebo</span> <span class="na">reference=</span><span class="s">"base_link"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;mu1&gt;</span>0.000002<span class="nt">&lt;/mu1&gt;</span>
    <span class="nt">&lt;mu2&gt;</span>0.000002<span class="nt">&lt;/mu2&gt;</span>
    <span class="c">&lt;!-- &lt;material&gt;Gazebo/Red&lt;/material&gt; --&gt;</span>
  <span class="nt">&lt;/gazebo&gt;</span>

<span class="nt">&lt;/robot&gt;</span>

</code></pre></div></div>

<p>Note that description of friction is more complicated than before, the following line is needed to properly simulate the 45 degree rollers in the wheels:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;fdir1</span> <span class="na">gz:expressed_in=</span><span class="s">"base_footprint"</span><span class="nt">&gt;</span>1 -1 0<span class="nt">&lt;/fdir1&gt;</span>

</code></pre></div></div>

<p>Let’s create <code class="language-plaintext highlighter-rouge">mogi_bot_mecanum.gazebo</code> with the additional <code class="language-plaintext highlighter-rouge">odometry publisher</code> plugin:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;robot&gt;</span>
  <span class="nt">&lt;gazebo&gt;</span>
    <span class="nt">&lt;plugin</span>
      <span class="na">filename=</span><span class="s">"gz-sim-mecanum-drive-system"</span>
      <span class="na">name=</span><span class="s">"gz::sim::systems::MecanumDrive"</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- Topic for the command input --&gt;</span>
      <span class="nt">&lt;topic&gt;</span>cmd_vel<span class="nt">&lt;/topic&gt;</span>

      <span class="c">&lt;!-- Wheel joints --&gt;</span>
      <span class="nt">&lt;front_left_joint&gt;</span>front_left_wheel_joint<span class="nt">&lt;/front_left_joint&gt;</span>
      <span class="nt">&lt;front_right_joint&gt;</span>front_right_wheel_joint<span class="nt">&lt;/front_right_joint&gt;</span>
      <span class="nt">&lt;back_left_joint&gt;</span>rear_left_wheel_joint<span class="nt">&lt;/back_left_joint&gt;</span>
      <span class="nt">&lt;back_right_joint&gt;</span>rear_right_wheel_joint<span class="nt">&lt;/back_right_joint&gt;</span>

      <span class="c">&lt;!-- Wheel parameters --&gt;</span>
      <span class="nt">&lt;wheel_separation&gt;</span>0.3<span class="nt">&lt;/wheel_separation&gt;</span>
      <span class="nt">&lt;wheelbase&gt;</span>0.3<span class="nt">&lt;/wheelbase&gt;</span>
      <span class="nt">&lt;wheel_radius&gt;</span>0.1<span class="nt">&lt;/wheel_radius&gt;</span>

      <span class="c">&lt;!-- Control gains and limits (optional) --&gt;</span>
      <span class="nt">&lt;min_acceleration&gt;</span>-5<span class="nt">&lt;/min_acceleration&gt;</span>
      <span class="nt">&lt;max_acceleration&gt;</span>5<span class="nt">&lt;/max_acceleration&gt;</span>

      <span class="c">&lt;!-- Other parameters (optional) --&gt;</span>
      <span class="nt">&lt;odom_topic&gt;</span>odom<span class="nt">&lt;/odom_topic&gt;</span>
      <span class="nt">&lt;tf_topic&gt;</span>tf<span class="nt">&lt;/tf_topic&gt;</span>
      <span class="nt">&lt;frame_id&gt;</span>odom<span class="nt">&lt;/frame_id&gt;</span>
      <span class="nt">&lt;child_frame_id&gt;</span>base_footprint<span class="nt">&lt;/child_frame_id&gt;</span>
      <span class="nt">&lt;odom_publish_frequency&gt;</span>30<span class="nt">&lt;/odom_publish_frequency&gt;</span>
    <span class="nt">&lt;/plugin&gt;</span>

    <span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"gz::sim::systems::OdometryPublisher"</span> <span class="na">filename=</span><span class="s">"gz-sim-odometry-publisher-system"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;odom_topic&gt;</span>odom<span class="nt">&lt;/odom_topic&gt;</span>
      <span class="nt">&lt;odom_frame&gt;</span>odom<span class="nt">&lt;/odom_frame&gt;</span>
      <span class="nt">&lt;robot_base_frame&gt;</span>base_footprint<span class="nt">&lt;/robot_base_frame&gt;</span>
      <span class="nt">&lt;publish_tf&gt;</span>true<span class="nt">&lt;/publish_tf&gt;</span>
      <span class="nt">&lt;tf_topic&gt;</span>tf<span class="nt">&lt;/tf_topic&gt;</span>
      <span class="nt">&lt;odom_publish_frequency&gt;</span>30<span class="nt">&lt;/odom_publish_frequency&gt;</span>
      <span class="nt">&lt;xyz_offset&gt;</span>0 0 0<span class="nt">&lt;/xyz_offset&gt;</span>
      <span class="nt">&lt;rpy_offset&gt;</span>0 0 0<span class="nt">&lt;/rpy_offset&gt;</span>
    <span class="nt">&lt;/plugin&gt;</span>

    <span class="nt">&lt;plugin</span>
        <span class="na">filename=</span><span class="s">"gz-sim-joint-state-publisher-system"</span>
        <span class="na">name=</span><span class="s">"gz::sim::systems::JointStatePublisher"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;topic&gt;</span>joint_states<span class="nt">&lt;/topic&gt;</span>
        <span class="nt">&lt;joint_name&gt;</span>front_left_wheel_joint<span class="nt">&lt;/joint_name&gt;</span>
        <span class="nt">&lt;joint_name&gt;</span>front_right_wheel_joint<span class="nt">&lt;/joint_name&gt;</span>
        <span class="nt">&lt;joint_name&gt;</span>rear_left_wheel_joint<span class="nt">&lt;/joint_name&gt;</span>
        <span class="nt">&lt;joint_name&gt;</span>rear_right_wheel_joint<span class="nt">&lt;/joint_name&gt;</span>
    <span class="nt">&lt;/plugin&gt;</span>
  <span class="nt">&lt;/gazebo&gt;</span>
<span class="nt">&lt;/robot&gt;</span>

</code></pre></div></div>

<p>Rebuild the workspace, and we can launch with the same launch file as before, just overriding the model argument to the mecanum drive model:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_gazebo_basics spawn_robot.launch.py model:<span class="o">=</span>mogi_bot_mecanum.urdf

</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">teleop_twist_keyboard</code> support the control of holonomic robots, by pressing the <code class="language-plaintext highlighter-rouge">shift</code> key the robot moves sideways instead of turning in place.</p>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-3-4-gazebo-basics/main/./assets/mecanum-wheel.png" alt="alt text" title="mecanum wheel"></p>

</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/week-3-4-gazebo-basics">week-3-4-gazebo-basics</a> <small>repository</small></h3>
        <span class="label label-default">gazebo</span> <span class="label label-default">sdf</span> <span class="label label-default">urdf</span> <span class="label label-default">collada</span> <span class="label label-default">harmonic</span> <span class="label label-default">rqt</span> <span class="label label-default">ros2</span> <span class="label label-default">mecanum-drive</span> <span class="label label-default">diff-drive</span> <span class="label label-default">rqt-graph</span> <span class="label label-default">diff-drive-robot</span> <span class="label label-default">skid-steering</span> <span class="label label-default">ros2-jazzy</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mogi-ros-week-3-4-gazebo-basics
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mogi-ros-week-3-4-gazebo-basics" role="menuitem" tabindex="-1" href="/r/week-3-4-gazebo-basics/github-mogi-ros-week-3-4-gazebo-basics" data="github-mogi-ros-week-3-4-gazebo-basics">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mogi-ros-week-3-4-gazebo-basics
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/week-3-4-gazebo-basics">week-3-4-gazebo-basics</a> <small>repository</small></h3>
        <span class="label label-default">gazebo</span> <span class="label label-default">sdf</span> <span class="label label-default">urdf</span> <span class="label label-default">collada</span> <span class="label label-default">harmonic</span> <span class="label label-default">rqt</span> <span class="label label-default">ros2</span> <span class="label label-default">mecanum-drive</span> <span class="label label-default">diff-drive</span> <span class="label label-default">rqt-graph</span> <span class="label label-default">diff-drive-robot</span> <span class="label label-default">skid-steering</span> <span class="label label-default">ros2-jazzy</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mogi-ros-week-3-4-gazebo-basics
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mogi-ros-week-3-4-gazebo-basics" role="menuitem" tabindex="-1" href="/r/week-3-4-gazebo-basics/github-mogi-ros-week-3-4-gazebo-basics" data="github-mogi-ros-week-3-4-gazebo-basics">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mogi-ros-week-3-4-gazebo-basics
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/week-3-4-gazebo-basics">week-3-4-gazebo-basics</a> <small>repository</small></h3>
        <span class="label label-default">gazebo</span> <span class="label label-default">sdf</span> <span class="label label-default">urdf</span> <span class="label label-default">collada</span> <span class="label label-default">harmonic</span> <span class="label label-default">rqt</span> <span class="label label-default">ros2</span> <span class="label label-default">mecanum-drive</span> <span class="label label-default">diff-drive</span> <span class="label label-default">rqt-graph</span> <span class="label label-default">diff-drive-robot</span> <span class="label label-default">skid-steering</span> <span class="label label-default">ros2-jazzy</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mogi-ros-week-3-4-gazebo-basics
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mogi-ros-week-3-4-gazebo-basics" role="menuitem" tabindex="-1" href="/r/week-3-4-gazebo-basics/github-mogi-ros-week-3-4-gazebo-basics" data="github-mogi-ros-week-3-4-gazebo-basics">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mogi-ros-week-3-4-gazebo-basics
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>iron</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/week-3-4-gazebo-basics">week-3-4-gazebo-basics</a> <small>repository</small></h3>
        <span class="label label-default">gazebo</span> <span class="label label-default">sdf</span> <span class="label label-default">urdf</span> <span class="label label-default">collada</span> <span class="label label-default">harmonic</span> <span class="label label-default">rqt</span> <span class="label label-default">ros2</span> <span class="label label-default">mecanum-drive</span> <span class="label label-default">diff-drive</span> <span class="label label-default">rqt-graph</span> <span class="label label-default">diff-drive-robot</span> <span class="label label-default">skid-steering</span> <span class="label label-default">ros2-jazzy</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mogi-ros-week-3-4-gazebo-basics
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mogi-ros-week-3-4-gazebo-basics" role="menuitem" tabindex="-1" href="/r/week-3-4-gazebo-basics/github-mogi-ros-week-3-4-gazebo-basics" data="github-mogi-ros-week-3-4-gazebo-basics">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mogi-ros-week-3-4-gazebo-basics
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/mogi-ros/week-3-4-gazebo-basics.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
