<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/graceful_controller/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">graceful_controller</li>
        <!--<li class="active">graceful_controller</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-default" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-default" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-default" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-default" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-default" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-primary" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class="disabled older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class=" older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/graceful_controller">graceful_controller</a> <small>repository</small></h3>
        <span class="label label-default">robotics</span> <span class="label label-default">navigation</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mikeferguson-graceful_controller
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mikeferguson-graceful_controller" role="menuitem" tabindex="-1" href="/r/graceful_controller/github-mikeferguson-graceful_controller" data="github-mikeferguson-graceful_controller">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mikeferguson-graceful_controller
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>humble</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/graceful_controller">graceful_controller</a> <small>repository</small></h3>
        <span class="label label-default">robotics</span> <span class="label label-default">navigation</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mikeferguson-graceful_controller
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mikeferguson-graceful_controller" role="menuitem" tabindex="-1" href="/r/graceful_controller/github-mikeferguson-graceful_controller" data="github-mikeferguson-graceful_controller">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mikeferguson-graceful_controller
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jazzy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/graceful_controller">graceful_controller</a> <small>repository</small></h3>
        <span class="label label-default">robotics</span> <span class="label label-default">navigation</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mikeferguson-graceful_controller
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mikeferguson-graceful_controller" role="menuitem" tabindex="-1" href="/r/graceful_controller/github-mikeferguson-graceful_controller" data="github-mikeferguson-graceful_controller">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mikeferguson-graceful_controller
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>kilted</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/graceful_controller">graceful_controller</a> <small>repository</small></h3>
        <span class="label label-default">robotics</span> <span class="label label-default">navigation</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mikeferguson-graceful_controller
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mikeferguson-graceful_controller" role="menuitem" tabindex="-1" href="/r/graceful_controller/github-mikeferguson-graceful_controller" data="github-mikeferguson-graceful_controller">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mikeferguson-graceful_controller
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>rolling</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/graceful_controller">graceful_controller</a> <small>repository</small></h3>
        <span class="label label-default">robotics</span> <span class="label label-default">navigation</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mikeferguson-graceful_controller
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mikeferguson-graceful_controller" role="menuitem" tabindex="-1" href="/r/graceful_controller/github-mikeferguson-graceful_controller" data="github-mikeferguson-graceful_controller">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mikeferguson-graceful_controller
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>github</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/graceful_controller">graceful_controller</a> <small>repository</small></h3>
        <span class="label label-default">robotics</span> <span class="label label-default">navigation</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
        <a class="label label-primary pkg-label" href="/p/graceful_controller">graceful_controller</a>
        
        <a class="label label-primary pkg-label" href="/p/graceful_controller_ros">graceful_controller_ros</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mikeferguson-graceful_controller
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mikeferguson-graceful_controller" role="menuitem" tabindex="-1" href="/r/graceful_controller/github-mikeferguson-graceful_controller" data="github-mikeferguson-graceful_controller">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mikeferguson-graceful_controller
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">A better local controller for ROS Navigation.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/mikeferguson/graceful_controller.git">https://github.com/mikeferguson/graceful_controller.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">ros1</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-10-22
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">robotics</span> <span class="label label-default">navigation</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/graceful_controller/#noetic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/graceful_controller/#noetic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/graceful_controller/#noetic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/graceful_controller">graceful_controller</a></td>
                    <td>0.4.8</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/graceful_controller_ros">graceful_controller_ros</a></td>
                    <td>0.4.8</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="graceful-controller">Graceful Controller</h1>

<p>This implement a controller based on “A Smooth Control Law for Graceful
Motion of Differential Wheeled Mobile Robots in 2D Environments” by Park
and Kuipers, ICRA 2011.</p>

<p>Currently this does not implement section IV.B of the paper (which
describes how to switch between poses along a path). Instead this controller
has a naive approach which attempts to find the farthest pose in the path
which is both A) less than some maximum lookahead distance away, and B)
reachable (without collision) using our control law (as determined by
a forward simulation). We call this the <strong>target_pose</strong>.</p>

<p>There is a more detailed write up of the motiviation behind creating
yet another local controller on
<a href="http://www.robotandchisel.com/2024/10/14/graceful-controller/">my blog</a></p>

<h2 id="ros-topics">ROS Topics</h2>

<p>As with nearly all navigation local controllers, our controller outputs
both a global path and a local path as a <em>nav_msgs::Path</em>.</p>

<p>The “local path” is derived through a forward simulation of where
the robot is expected to travel by iteratively applying the control law.
Unlike the DWA controller, our forward simulation is NOT based on applying
the same command throughout a fixed simulation time, but rather based
on calling our control law multiple times as we forward simulate our
path to the “target pose”. As long as the acceleration limits are
correctly specified, and the robot controllers can execute the velocities
commanded, this will be the true path that the robot will follow.</p>

<p>An additional topic that is unique to our controller is the “target_pose”
topic which is a <em>geometry_msgs::PoseStamped</em>. This is published every
time we compute the command velocity for the robot and tells you which
pose in the global plan we are using for computing the control law. It
is potentially helpful in debugging parameter tuning issues.</p>

<h2 id="parameters">Parameters</h2>

<p>The underlying control law has several parameters which are best described
by the original paper, these include:</p>

<ul>
  <li>
<strong>k1</strong> - controls convergence of control law (slow subsystem). A value of 0 reduces the controller to pure waypoint-following with no curvature. For a high k1 value, theta will be reduced faster than r.</li>
  <li>
<strong>k2</strong> - controls convergence of control law (fast subsystem). A higher value of k2 will reduce the distance of the path to the target, thus decreasing the path’s curvature.</li>
  <li>
<strong>lambda</strong> - controls speed scaling based on curvature. A higher value of lambda results in more sharply peaked curves.</li>
  <li>
<strong>beta</strong> - controls speed scaling based on curvature. A higher value of beta lets the robot’s velocity drop more quickly as K increases. K is the curvature of the path resulting from the control law (based on k1 and k2).</li>
</ul>

<p>Several parameters are used for selecting and simulating the target pose used
to compute the control law:</p>

<ul>
  <li>
<strong>max_lookahead</strong> - the target pose cannot be further than this distance
away from the robot. A good starting value for this is usually about 1m.
Using poses that are further away will generally result in smoother
operations, but simulating poses that are very far away can result in
reduced performance, especially in tight or cluttered environments.
If the controller cannot forward simulate to a pose this far away without
colliding, it will iteratively select a target pose that is closer to the
robot.</li>
  <li>
<strong>min_lookhead</strong> - the target pose cannot be closer than this distance
 away from the robot. This parameter avoids instability when an unexpected
 obstacle appears in the path of the robot by returning failure, which
 typically triggers replanning.</li>
  <li>
<strong>acc_dt</strong> - this parameter is used to set the maximum velocity that the
 control law can use when generating velocities during the path simulation.</li>
</ul>

<p>There are several major “features” that are optional and configured through
one or more parameters:</p>

<ul>
  <li>
<strong>odom_topic</strong> - by setting this parameter to the name of the odometry
topic, the controller will subscribe to the odometry topic and limit
the control law velocities to those that are feasible based on the current
robot velocity. Without odometry, performance will be degraded.</li>
  <li>
<strong>use_vel_topic</strong> - in ROS1 there is no standard way of defining a
“speed limit map”. If this parameter is set to true, the controller will
subscribe to a <em>std_msgs::Float32</em> topic called “max_vel_x” and use this
to supercede our <em>max_vel_x</em> parameter.</li>
  <li>
<strong>initial_rotate_tolerance</strong> - when the robot is pointed in a very
different direction from the path, the control law (depending on k1 and k2)
may generate large sweeping arcs. To avoid this potentially undesired behavior
when the robot begins executing a new path, the controller can produce an
initial in-place rotation to get the robot headed towards the path before it
starts using the control law to follow it. The initial rotate tolerance is
the maximum angular difference (in radians) between robot heading and the
target pose. This feature can be disabled by setting <em>initial_rotate_tolerance</em>
to 0.0.</li>
  <li>
<strong>prefer_final_rotation</strong> - similar to the initial rotation issue many
plans may cause large arcs at the end of a path because the orientation of
the final pose is significantly different from the direction the robot would
drive to follow the path as planned. By setting <em>prefer_final_rotation</em> to
true, the orientation of the final pose will be ignored and the robot will
more closely follow the path as planned and then produce a final in-place
rotation to align the robot heading with the goal.</li>
  <li>
<strong>latch_xy_goal_tolerance</strong> - similar to many other local controllers in ROS,
this will prevent hunting around the goal by latching the XY portion of the
goal when the robot is within the goal tolerance. The robot will then rotate
to the final heading (while possibly being outside of the real XY goal tolerance).</li>
  <li>
<strong>compute_orientations</strong> - if the global planner does not compute orientations
for the poses in the path, this should be set to true.</li>
  <li>
<strong>use_orientation_filter</strong> - since the controller is highly dependent on the
angular heading of the target pose it is important the angular values are
smooth. Some global planners may produce very unsmooth headings due to
discretization error. This optional filuter can be used to smooth
out the orientations of the global path based on the <strong>yaw_filter_tolerance</strong>
and <strong>yaw_gap_tolerance</strong>.</li>
  <li>
<strong>yaw_filter_tolerance</strong> - a higher value here allows a path to be more
zig-zag, a lower filter value will filter out poses whose headings diverge
from an overall “beeline” between the poses around it. units: radians</li>
  <li>
<strong>yaw_gap_tolerance</strong> - this is the maximum distance between poses, and
so even if a pose exceeds the filter tolerance it will not be removed
if the gap between the pose before and after it would exceed this value.
units: meters.</li>
  <li>
<strong>max_x_to_max_theta_scale_factor</strong> - This limits the actual maximum angular
velocity relative to the current maximum x velocity (which is possibly
changing according to the max_vel_x ROS topic). At any moment in time, the
maximum angular velocity is the minimum of the absolute max (max_vel_theta,
see below) and this parameter multiplied by the current maximum x velocity.
This allows enforcing slower rotation in circumstances with lower linear
velocity limits. This parameter’s default value is high, so whne not
configured, angular velocity will be limited only by max_vel_theta.
Units: rad/m, technically.</li>
</ul>

<p>Most of the above parameters can be left to their defaults and work well
on a majority of robots. The following parameters, however, really do
depend on the robot platform itself and must be set as accurately as
possible:</p>

<ul>
  <li>
<strong>acc_lim_x</strong> - this is likely the <strong>most important</strong> parameter to set
properly. If the acceleration limits are overestimated the robot will not
be able to follow the generated commands. During braking, this can cause
the robot to crash into obstacles. Units: meters/sec^2.</li>
  <li>
<strong>acc_lim_theta</strong> - the same notes as for <em>acc_lim_x</em>, but in rad/sec^2.</li>
  <li>
<strong>decel_lim_x</strong> - (new in 0.4.3) this acceleration limit is used only
within the underlying control law. It controls how quickly the robot slows
as it approaches the goal (or an obstacle blocking the path, which causes
the target_pose to be closer). If this is left as the default of 0.0, the
controller will use the same acc_lim_x. Units: meters/sec^2.</li>
  <li>
<strong>max_vel_x</strong> - this is the maximum velocity the controller is allowed to
specify. Units: meters/sec.</li>
  <li>
<strong>min_vel_x</strong> - when the commanded velocities have a high curvature, the
robot is naturally slowed down (see the ICRA paper for details). The minimum
velocity is the lowest velocity that will be generated when not executing
an in-place rotation. Most robots have some amount of friction in their
drivetrain and casters and cannot accurately move forward at speeds below
some threshold, especially if also trying to turn slightly at the same time.
Units: meters/sec.</li>
  <li>
<strong>max_vel_theta</strong> - the absolute maximum rotation velocity that will be
produced by the control law. Units: rad/sec.</li>
  <li>
<strong>min_in_place_vel_theta</strong> - this is the minimum rotation velocity that
will be used for in-place rotations. As with <em>min_vel_x</em>, this is largely
hardware dependent since the robot has some minimum rotational velocity
that can be reliably controlled. Units: rad/sec.</li>
  <li>
<strong>xy_goal_tolerance</strong> - this is the linear distance within which we consider
the goal reached. When <em>prefer_final_rotation</em> is set to true, we will only
generate final rotations once this tolerance is met. Units: meters.</li>
  <li>
<strong>yaw_goal_tolerance</strong> - this is the angular distance within which we consider
the goal reached. Units: radians.</li>
  <li>
<strong>xy_vel_goal_tolerance</strong> - this is the maximum linear velocity the robot
can be moving in order to switch to final in place rotation, latch the
goal, or report that the goal has been reached. This parameter is ignored
if no <strong>odom_topic</strong> is set.</li>
  <li>
<strong>yaw_vel_goal_tolerance</strong> - this is the maximum angular velocity the robot
can be moving in order to switch to final in place rotation, latch the
goal, or report that the goal has been reached. This parameter is ignored
if no <strong>odom_topic</strong> is set.</li>
</ul>

<p>A final feature of the controller is footprint inflation at higher speeds. This
helps avoid collisions by increasing the padding around the robot as the speed
increases. This behavior is controlled by three parameters:</p>

<ul>
  <li>
<strong>scaling_vel_x</strong> - above this speed, the footprint will be scaled up.
units: meters/sec.</li>
  <li>
<strong>scaling_factor</strong> - this is how much the footprint will be scaled when
we are moving at max_vel_x. The actual footprint size will be:
1.0 + scaling_factor * (vel - scaling_vel_x) / (max_vel_x - scaling_vel_x).
By default, this is set to 0.0 and thus disabled.</li>
  <li>
<strong>scaling_step</strong> - this is how much we will drop the simulated velocity
when retrying a particular target_pose.</li>
</ul>

<p>Example: our robot has a max velocity of 1.0 meters/second, <strong>scaling_vel_x</strong>
of 0.5 meters/second, and a <strong>scaling_factor</strong> of 1.0. For a particular
target_pose, if we are simulating the trajectory at 1.0 meters/second, then
the footprint will be multiplied in size by a factor of 2.0. Suppose this
triggers a collision in simulation of the path and that our <strong>scaling_step</strong>
is 0.1 meters/second. The controller will re-simulate at 0.9 meters/second,
and now our footprint will only be scaled by a factor of 1.8. If this were
not collision free, the controller would re-simulate with a velocity of
0.8 meters/second and a scaling of 1.6.</p>

<h2 id="example-config">Example Config</h2>

<p>There is an example configuration for running this controller on the UBR1
in ROS1 simulation in the
<a href="https://github.com/mikeferguson/ubr_reloaded/tree/ros1">ubr_reloaded</a>
repository.</p>

<h2 id="licensing">Licensing</h2>

<p>There are two ROS packages in this repo, with different licenses, since
we’re really trying to blend two license-incompatible code bases:</p>

<ul>
  <li>graceful_controller - is LGPL licensed and is the low-level control
law implementation, as originally implemented in the
<a href="https://github.com/fetchrobotics/fetch_open_auto_dock">fetch_open_auto_dock</a>
package.</li>
  <li>graceful_controller_ros - is BSD licensed and is the actual ROS wrapper
and glue logic to connect to the ROS Navigation stack. It leverages code
from base_local_planner and dwa_local_planner packages in the
<a href="https://github.com/ros-planning/navigation">ROS Navigation</a> stack.</li>
</ul>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/graceful_controller">graceful_controller</a> <small>repository</small></h3>
        <span class="label label-default">robotics</span> <span class="label label-default">navigation</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mikeferguson-graceful_controller
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mikeferguson-graceful_controller" role="menuitem" tabindex="-1" href="/r/graceful_controller/github-mikeferguson-graceful_controller" data="github-mikeferguson-graceful_controller">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mikeferguson-graceful_controller
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/graceful_controller">graceful_controller</a> <small>repository</small></h3>
        <span class="label label-default">robotics</span> <span class="label label-default">navigation</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mikeferguson-graceful_controller
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mikeferguson-graceful_controller" role="menuitem" tabindex="-1" href="/r/graceful_controller/github-mikeferguson-graceful_controller" data="github-mikeferguson-graceful_controller">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mikeferguson-graceful_controller
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>iron</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/graceful_controller">graceful_controller</a> <small>repository</small></h3>
        <span class="label label-default">robotics</span> <span class="label label-default">navigation</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
        <a class="label label-primary pkg-label" href="/p/graceful_controller">graceful_controller</a>
        
        <a class="label label-primary pkg-label" href="/p/graceful_controller_ros">graceful_controller_ros</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mikeferguson-graceful_controller
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mikeferguson-graceful_controller" role="menuitem" tabindex="-1" href="/r/graceful_controller/github-mikeferguson-graceful_controller" data="github-mikeferguson-graceful_controller">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mikeferguson-graceful_controller
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">A better local controller for ROS Navigation.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/mikeferguson/graceful_controller.git">https://github.com/mikeferguson/graceful_controller.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">ros1</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-10-22
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">robotics</span> <span class="label label-default">navigation</span> <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/graceful_controller/#melodic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/graceful_controller/#melodic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/graceful_controller/#melodic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/graceful_controller">graceful_controller</a></td>
                    <td>0.4.8</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/graceful_controller_ros">graceful_controller_ros</a></td>
                    <td>0.4.8</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="graceful-controller">Graceful Controller</h1>

<p>This implement a controller based on “A Smooth Control Law for Graceful
Motion of Differential Wheeled Mobile Robots in 2D Environments” by Park
and Kuipers, ICRA 2011.</p>

<p>Currently this does not implement section IV.B of the paper (which
describes how to switch between poses along a path). Instead this controller
has a naive approach which attempts to find the farthest pose in the path
which is both A) less than some maximum lookahead distance away, and B)
reachable (without collision) using our control law (as determined by
a forward simulation). We call this the <strong>target_pose</strong>.</p>

<p>There is a more detailed write up of the motiviation behind creating
yet another local controller on
<a href="http://www.robotandchisel.com/2024/10/14/graceful-controller/">my blog</a></p>

<h2 id="ros-topics">ROS Topics</h2>

<p>As with nearly all navigation local controllers, our controller outputs
both a global path and a local path as a <em>nav_msgs::Path</em>.</p>

<p>The “local path” is derived through a forward simulation of where
the robot is expected to travel by iteratively applying the control law.
Unlike the DWA controller, our forward simulation is NOT based on applying
the same command throughout a fixed simulation time, but rather based
on calling our control law multiple times as we forward simulate our
path to the “target pose”. As long as the acceleration limits are
correctly specified, and the robot controllers can execute the velocities
commanded, this will be the true path that the robot will follow.</p>

<p>An additional topic that is unique to our controller is the “target_pose”
topic which is a <em>geometry_msgs::PoseStamped</em>. This is published every
time we compute the command velocity for the robot and tells you which
pose in the global plan we are using for computing the control law. It
is potentially helpful in debugging parameter tuning issues.</p>

<h2 id="parameters">Parameters</h2>

<p>The underlying control law has several parameters which are best described
by the original paper, these include:</p>

<ul>
  <li>
<strong>k1</strong> - controls convergence of control law (slow subsystem). A value of 0 reduces the controller to pure waypoint-following with no curvature. For a high k1 value, theta will be reduced faster than r.</li>
  <li>
<strong>k2</strong> - controls convergence of control law (fast subsystem). A higher value of k2 will reduce the distance of the path to the target, thus decreasing the path’s curvature.</li>
  <li>
<strong>lambda</strong> - controls speed scaling based on curvature. A higher value of lambda results in more sharply peaked curves.</li>
  <li>
<strong>beta</strong> - controls speed scaling based on curvature. A higher value of beta lets the robot’s velocity drop more quickly as K increases. K is the curvature of the path resulting from the control law (based on k1 and k2).</li>
</ul>

<p>Several parameters are used for selecting and simulating the target pose used
to compute the control law:</p>

<ul>
  <li>
<strong>max_lookahead</strong> - the target pose cannot be further than this distance
away from the robot. A good starting value for this is usually about 1m.
Using poses that are further away will generally result in smoother
operations, but simulating poses that are very far away can result in
reduced performance, especially in tight or cluttered environments.
If the controller cannot forward simulate to a pose this far away without
colliding, it will iteratively select a target pose that is closer to the
robot.</li>
  <li>
<strong>min_lookhead</strong> - the target pose cannot be closer than this distance
 away from the robot. This parameter avoids instability when an unexpected
 obstacle appears in the path of the robot by returning failure, which
 typically triggers replanning.</li>
  <li>
<strong>acc_dt</strong> - this parameter is used to set the maximum velocity that the
 control law can use when generating velocities during the path simulation.</li>
</ul>

<p>There are several major “features” that are optional and configured through
one or more parameters:</p>

<ul>
  <li>
<strong>odom_topic</strong> - by setting this parameter to the name of the odometry
topic, the controller will subscribe to the odometry topic and limit
the control law velocities to those that are feasible based on the current
robot velocity. Without odometry, performance will be degraded.</li>
  <li>
<strong>use_vel_topic</strong> - in ROS1 there is no standard way of defining a
“speed limit map”. If this parameter is set to true, the controller will
subscribe to a <em>std_msgs::Float32</em> topic called “max_vel_x” and use this
to supercede our <em>max_vel_x</em> parameter.</li>
  <li>
<strong>initial_rotate_tolerance</strong> - when the robot is pointed in a very
different direction from the path, the control law (depending on k1 and k2)
may generate large sweeping arcs. To avoid this potentially undesired behavior
when the robot begins executing a new path, the controller can produce an
initial in-place rotation to get the robot headed towards the path before it
starts using the control law to follow it. The initial rotate tolerance is
the maximum angular difference (in radians) between robot heading and the
target pose. This feature can be disabled by setting <em>initial_rotate_tolerance</em>
to 0.0.</li>
  <li>
<strong>prefer_final_rotation</strong> - similar to the initial rotation issue many
plans may cause large arcs at the end of a path because the orientation of
the final pose is significantly different from the direction the robot would
drive to follow the path as planned. By setting <em>prefer_final_rotation</em> to
true, the orientation of the final pose will be ignored and the robot will
more closely follow the path as planned and then produce a final in-place
rotation to align the robot heading with the goal.</li>
  <li>
<strong>latch_xy_goal_tolerance</strong> - similar to many other local controllers in ROS,
this will prevent hunting around the goal by latching the XY portion of the
goal when the robot is within the goal tolerance. The robot will then rotate
to the final heading (while possibly being outside of the real XY goal tolerance).</li>
  <li>
<strong>compute_orientations</strong> - if the global planner does not compute orientations
for the poses in the path, this should be set to true.</li>
  <li>
<strong>use_orientation_filter</strong> - since the controller is highly dependent on the
angular heading of the target pose it is important the angular values are
smooth. Some global planners may produce very unsmooth headings due to
discretization error. This optional filuter can be used to smooth
out the orientations of the global path based on the <strong>yaw_filter_tolerance</strong>
and <strong>yaw_gap_tolerance</strong>.</li>
  <li>
<strong>yaw_filter_tolerance</strong> - a higher value here allows a path to be more
zig-zag, a lower filter value will filter out poses whose headings diverge
from an overall “beeline” between the poses around it. units: radians</li>
  <li>
<strong>yaw_gap_tolerance</strong> - this is the maximum distance between poses, and
so even if a pose exceeds the filter tolerance it will not be removed
if the gap between the pose before and after it would exceed this value.
units: meters.</li>
  <li>
<strong>max_x_to_max_theta_scale_factor</strong> - This limits the actual maximum angular
velocity relative to the current maximum x velocity (which is possibly
changing according to the max_vel_x ROS topic). At any moment in time, the
maximum angular velocity is the minimum of the absolute max (max_vel_theta,
see below) and this parameter multiplied by the current maximum x velocity.
This allows enforcing slower rotation in circumstances with lower linear
velocity limits. This parameter’s default value is high, so whne not
configured, angular velocity will be limited only by max_vel_theta.
Units: rad/m, technically.</li>
</ul>

<p>Most of the above parameters can be left to their defaults and work well
on a majority of robots. The following parameters, however, really do
depend on the robot platform itself and must be set as accurately as
possible:</p>

<ul>
  <li>
<strong>acc_lim_x</strong> - this is likely the <strong>most important</strong> parameter to set
properly. If the acceleration limits are overestimated the robot will not
be able to follow the generated commands. During braking, this can cause
the robot to crash into obstacles. Units: meters/sec^2.</li>
  <li>
<strong>acc_lim_theta</strong> - the same notes as for <em>acc_lim_x</em>, but in rad/sec^2.</li>
  <li>
<strong>decel_lim_x</strong> - (new in 0.4.3) this acceleration limit is used only
within the underlying control law. It controls how quickly the robot slows
as it approaches the goal (or an obstacle blocking the path, which causes
the target_pose to be closer). If this is left as the default of 0.0, the
controller will use the same acc_lim_x. Units: meters/sec^2.</li>
  <li>
<strong>max_vel_x</strong> - this is the maximum velocity the controller is allowed to
specify. Units: meters/sec.</li>
  <li>
<strong>min_vel_x</strong> - when the commanded velocities have a high curvature, the
robot is naturally slowed down (see the ICRA paper for details). The minimum
velocity is the lowest velocity that will be generated when not executing
an in-place rotation. Most robots have some amount of friction in their
drivetrain and casters and cannot accurately move forward at speeds below
some threshold, especially if also trying to turn slightly at the same time.
Units: meters/sec.</li>
  <li>
<strong>max_vel_theta</strong> - the absolute maximum rotation velocity that will be
produced by the control law. Units: rad/sec.</li>
  <li>
<strong>min_in_place_vel_theta</strong> - this is the minimum rotation velocity that
will be used for in-place rotations. As with <em>min_vel_x</em>, this is largely
hardware dependent since the robot has some minimum rotational velocity
that can be reliably controlled. Units: rad/sec.</li>
  <li>
<strong>xy_goal_tolerance</strong> - this is the linear distance within which we consider
the goal reached. When <em>prefer_final_rotation</em> is set to true, we will only
generate final rotations once this tolerance is met. Units: meters.</li>
  <li>
<strong>yaw_goal_tolerance</strong> - this is the angular distance within which we consider
the goal reached. Units: radians.</li>
  <li>
<strong>xy_vel_goal_tolerance</strong> - this is the maximum linear velocity the robot
can be moving in order to switch to final in place rotation, latch the
goal, or report that the goal has been reached. This parameter is ignored
if no <strong>odom_topic</strong> is set.</li>
  <li>
<strong>yaw_vel_goal_tolerance</strong> - this is the maximum angular velocity the robot
can be moving in order to switch to final in place rotation, latch the
goal, or report that the goal has been reached. This parameter is ignored
if no <strong>odom_topic</strong> is set.</li>
</ul>

<p>A final feature of the controller is footprint inflation at higher speeds. This
helps avoid collisions by increasing the padding around the robot as the speed
increases. This behavior is controlled by three parameters:</p>

<ul>
  <li>
<strong>scaling_vel_x</strong> - above this speed, the footprint will be scaled up.
units: meters/sec.</li>
  <li>
<strong>scaling_factor</strong> - this is how much the footprint will be scaled when
we are moving at max_vel_x. The actual footprint size will be:
1.0 + scaling_factor * (vel - scaling_vel_x) / (max_vel_x - scaling_vel_x).
By default, this is set to 0.0 and thus disabled.</li>
  <li>
<strong>scaling_step</strong> - this is how much we will drop the simulated velocity
when retrying a particular target_pose.</li>
</ul>

<p>Example: our robot has a max velocity of 1.0 meters/second, <strong>scaling_vel_x</strong>
of 0.5 meters/second, and a <strong>scaling_factor</strong> of 1.0. For a particular
target_pose, if we are simulating the trajectory at 1.0 meters/second, then
the footprint will be multiplied in size by a factor of 2.0. Suppose this
triggers a collision in simulation of the path and that our <strong>scaling_step</strong>
is 0.1 meters/second. The controller will re-simulate at 0.9 meters/second,
and now our footprint will only be scaled by a factor of 1.8. If this were
not collision free, the controller would re-simulate with a velocity of
0.8 meters/second and a scaling of 1.6.</p>

<h2 id="example-config">Example Config</h2>

<p>There is an example configuration for running this controller on the UBR1
in ROS1 simulation in the
<a href="https://github.com/mikeferguson/ubr_reloaded/tree/ros1">ubr_reloaded</a>
repository.</p>

<h2 id="licensing">Licensing</h2>

<p>There are two ROS packages in this repo, with different licenses, since
we’re really trying to blend two license-incompatible code bases:</p>

<ul>
  <li>graceful_controller - is LGPL licensed and is the low-level control
law implementation, as originally implemented in the
<a href="https://github.com/fetchrobotics/fetch_open_auto_dock">fetch_open_auto_dock</a>
package.</li>
  <li>graceful_controller_ros - is BSD licensed and is the actual ROS wrapper
and glue logic to connect to the ROS Navigation stack. It leverages code
from base_local_planner and dwa_local_planner packages in the
<a href="https://github.com/ros-planning/navigation">ROS Navigation</a> stack.</li>
</ul>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/mikeferguson/graceful_controller.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
