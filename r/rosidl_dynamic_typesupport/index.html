<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/rosidl_dynamic_typesupport/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">rosidl_dynamic_typesupport</li>
        <!--<li class="active">rosidl_dynamic_typesupport</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-default" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-primary" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-primary" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-primary" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-default" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class=" older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rosidl_dynamic_typesupport">rosidl_dynamic_typesupport</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-rosidl_dynamic_typesupport
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-rosidl_dynamic_typesupport" role="menuitem" tabindex="-1" href="/r/rosidl_dynamic_typesupport/github-ros2-rosidl_dynamic_typesupport" data="github-ros2-rosidl_dynamic_typesupport">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-rosidl_dynamic_typesupport
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>humble</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rosidl_dynamic_typesupport">rosidl_dynamic_typesupport</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/rosidl_dynamic_typesupport">rosidl_dynamic_typesupport</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-rosidl_dynamic_typesupport
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-rosidl_dynamic_typesupport" role="menuitem" tabindex="-1" href="/r/rosidl_dynamic_typesupport/github-ros2-rosidl_dynamic_typesupport" data="github-ros2-rosidl_dynamic_typesupport">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-rosidl_dynamic_typesupport
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Unified Interface for Dynamic (Runtime) Typesupport and Serialization</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros2/rosidl_dynamic_typesupport.git">https://github.com/ros2/rosidl_dynamic_typesupport.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">jazzy</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2023-09-07
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rosidl_dynamic_typesupport/#jazzy-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rosidl_dynamic_typesupport/#jazzy-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rosidl_dynamic_typesupport/#jazzy-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/rosidl_dynamic_typesupport">rosidl_dynamic_typesupport</a></td>
                    <td>0.1.2</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="rosidl_dynamic_typesupport">rosidl_dynamic_typesupport</h1>
<p>Unified Interface for Dynamic (Runtime) Typesupport and Serialization</p>

<p>This library provides a unified interface for creating and reflecting dynamic types and dynamic data based off those types <strong>at runtime</strong>, as well as the utilities that support those objects.</p>

<p>It is meant to be used with serialization support libraries that fulfill the interface.
Properly implemented, a user should be able to, given a serialized buffer, the serialization library used to serialize it, and the buffer’s message/type description, obtain a way to introspect/reflect its contents.</p>

<h2 id="example-usage">Example Usage</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Init Serialization Support (in this case, using FastRTPS)</span>
<span class="n">rosidl_dynamic_typesupport_serialization_support_t</span> <span class="n">serialization_support</span><span class="p">;</span>
  <span class="n">rosidl_dynamic_typesupport_serialization_support_init</span><span class="p">(</span>
    <span class="n">rosidl_dynamic_typesupport_fastrtps_init_serialization_support_impl</span><span class="p">(),</span>
    <span class="n">rosidl_dynamic_typesupport_fastrtps_init_serialization_support_interface</span><span class="p">(),</span>
    <span class="n">rcutils_get_default_allocator</span><span class="p">(),</span>
    <span class="o">&amp;</span><span class="n">serialization_support</span><span class="p">);</span>

<span class="c1">// Configure Dynamic Type Builder</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_t</span> <span class="o">*</span> <span class="n">flat_builder</span> <span class="o">=</span>
  <span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">serialization_support</span><span class="p">,</span> <span class="s">"flat"</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_add_bool_member</span><span class="p">(</span><span class="n">flat_builder</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">"bool_field"</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_add_int32_member</span><span class="p">(</span><span class="n">flat_builder</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">"int32_field"</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_add_string_member</span><span class="p">(</span><span class="n">flat_builder</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s">"string_field"</span><span class="p">);</span>

<span class="c1">// Create Dynamic Type</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_type_t</span> <span class="o">*</span> <span class="n">flat_type</span> <span class="o">=</span>
  <span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_build</span><span class="p">(</span><span class="n">flat_builder</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_fini</span><span class="p">(</span><span class="n">flat_builder</span><span class="p">);</span>

<span class="c1">// Create Dynamic Data</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_t</span> <span class="o">*</span> <span class="n">flat_data</span> <span class="o">=</span>
  <span class="n">rosidl_dynamic_typesupport_dynamic_data_init_from_dynamic_type</span><span class="p">(</span><span class="n">flat_type</span><span class="p">);</span>

<span class="c1">// Dynamic Data Setters</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_set_bool_value</span><span class="p">(</span><span class="n">flat_data</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_set_int32_value</span><span class="p">(</span><span class="n">flat_data</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">42</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_set_string_value</span><span class="p">(</span><span class="n">flat_data</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s">"rar"</span><span class="p">);</span>

<span class="c1">// Dynamic Data Getters</span>
<span class="kt">bool</span> <span class="n">a</span><span class="p">;</span>
<span class="kt">int32_t</span> <span class="n">b</span><span class="p">;</span>
<span class="kt">char</span> <span class="o">*</span> <span class="n">c</span><span class="p">;</span>

<span class="n">rosidl_dynamic_typesupport_dynamic_data_get_bool_value</span><span class="p">(</span><span class="n">flat_data</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">);</span>  <span class="c1">// true</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_get_int32_value</span><span class="p">(</span><span class="n">flat_data</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">);</span>  <span class="c1">// 42</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_get_string_value</span><span class="p">(</span><span class="n">flat_data</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">c</span><span class="p">);</span>  <span class="c1">// "rar"</span>

<span class="c1">// Cleanup</span>
<span class="n">free</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_fini</span><span class="p">(</span><span class="n">flat_data</span><span class="p">);</span>


</code></pre></div></div>

<h2 id="some-terminology">Some Terminology</h2>

<ul>
  <li>Serialization support: What this library provides; A unified, serialization library agnostic interface</li>
  <li>Serialization support library: The implementation of the serialization support interface, which this library calls into</li>
  <li>Type description (aka message description): A description of the buffer that fulfills the <a href="https://design.ros2.org/articles/idl_interface_definition.html">rosidl</a> spec (this typically takes the form of the <code class="language-plaintext highlighter-rouge">TypeDescription</code> struct generated from the <a href="https://github.com/ros2/rcl_interfaces/tree/rolling/type_description_interfaces/msg">type_descripion_interfaces package</a>)</li>
  <li>Dynamic type: The serialization support library’s best-effort internal representation of the type description</li>
  <li>Dynamic type builder: The serialization support library’s means of constructing the dynamic type (on a field-by-field basis)</li>
  <li>Dynamic data: The serialization support library’s internal representation of the serialized buffer, informed by the dynamic type</li>
</ul>

<h3 id="why-dynamic-typesupport">Why <strong>Dynamic</strong> Typesupport?</h3>

<ul>
  <li>Dynamic: This library dynamically changes its internal behavior based off its runtime input (e.g. what serialization library is loaded to be used with it)</li>
  <li>Typesupport: And it supports the creation of, and access of types</li>
</ul>

<p>This package differs from the usual ROS 2 notion of “dynamic” typesupport in that it offers <strong>runtime</strong> functionalities that change based off its input (hence dynamic), rather than compile-time code generation like the “dynamic” <code class="language-plaintext highlighter-rouge">rosidl_typesupport_introspection</code> package does (which generates introspectable typesupports at compile time.)</p>

<p>Furthermore, since this package does not actually generate any code, it is stored separately from the <a href="https://github.com/ros2/rosidl">rosidl repository</a>.</p>

<h2 id="the-serialization-support-interface">The Serialization Support Interface</h2>

<p>The serialization support interface is supposed to be an interface that is generic enough to support run-time type reflection (or in other words, dynamic type support), and is written in <code class="language-plaintext highlighter-rouge">C</code> to allow for easy language binding with any downstream libraries that use it.</p>

<p>Its interface is inspired by <a href="https://design.ros2.org/articles/idl_interface_definition.html">rosidl</a>, and the <a href="https://www.omg.org/spec/DDS-XTypes/1.3/PDF">DDS XTypes 1.3 language bindings spec (pg. 175)</a>, but is still intended to be generic, and so should support non-DDS middlewares.</p>

<p>The Serialization Support includes, for each supported middleware:</p>

<ul>
  <li>Setting type members (dynamic type)
    <ul>
      <li>Note the lack of ability to get type members</li>
    </ul>
  </li>
  <li>Getting and setting data members based off that type (dynamic data)</li>
  <li>Support for sequences and nested members</li>
  <li>Utilities</li>
</ul>

<p>The interface makes heavy use of <code class="language-plaintext highlighter-rouge">void *</code> casting to abstract away any necessary objects used with each serialization library.</p>

<h3 id="a-note-on-proper-usage">A Note On Proper Usage</h3>

<p>The serialization support capabilities of this library are meant to be used alongside a rosidl-compliant description of the message a buffer is meant to represent (the type description).</p>

<p>This is because there is a distinction between the rosidl description of a message, and what a serialization library can describe or express (in its dynamic type.)
As such, the rosidl description should be the sole source of determine what specific dynamic data getter functions are called during the unpacking of the message.
And the serialization support library is in charge of supporting mapping to and from what types it can support, and the rosidl types.</p>

<p>Consider the following, contrived example, where you have a message layout like so:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>int int_field

</code></pre></div></div>

<p>Suppose you had a serialization library that only provisions support for raw bytes.
In that case, the serialization support library written would probably end up treating the <code class="language-plaintext highlighter-rouge">int_field</code> field as raw bytes when constructing its dynamic type, which means that when the message gets deserialized, something must retain the knowledge that the <code class="language-plaintext highlighter-rouge">int_field</code> was supposed to be an <code class="language-plaintext highlighter-rouge">int</code> type.</p>

<p>This is precisely what the type description is for, which a user should programmatically traverse, and use to determine the appropriate <code class="language-plaintext highlighter-rouge">int</code> dynamic data getter to call.
The serialization support library then should implement its <code class="language-plaintext highlighter-rouge">int</code> dynamic data getter to extract the field from the buffer (as raw bytes, since that is what the serialization library supports), and coerce the extracted type (raw bytes) to output an <code class="language-plaintext highlighter-rouge">int</code> value to return.</p>

<p>Additionally, this means that, in order to support such cases, the serialization library must either:</p>

<ul>
  <li>Use the same member/field indexing as is used in the type description</li>
  <li>Have an alternate means to find the field described in the type description (e.g. by matching field names)</li>
</ul>

<p>Note: There was a consideration to populate the dynamic type/data objects with the type description instead.
But as the type description and dynamic type encompasses two subtly different concerns (rosidl compliance, and serialization library specific type support, respectively), it makes sense to keep them separate.
And this is especially true given the fact that users are supposed to use the type description to call the appropriate getters.</p>

<h2 id="type-ids">Type IDs</h2>

<p>The type IDs used by this library (in <code class="language-plaintext highlighter-rouge">types.h</code>) are pulling from the <a href="https://github.com/ros2/rcl_interfaces/tree/rolling/type_description_interfaces/msg">type_descripion_interfaces</a> message definitions.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rosidl_dynamic_typesupport">rosidl_dynamic_typesupport</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/rosidl_dynamic_typesupport">rosidl_dynamic_typesupport</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-rosidl_dynamic_typesupport
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-rosidl_dynamic_typesupport" role="menuitem" tabindex="-1" href="/r/rosidl_dynamic_typesupport/github-ros2-rosidl_dynamic_typesupport" data="github-ros2-rosidl_dynamic_typesupport">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-rosidl_dynamic_typesupport
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Unified Interface for Dynamic (Runtime) Typesupport and Serialization</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros2/rosidl_dynamic_typesupport.git">https://github.com/ros2/rosidl_dynamic_typesupport.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">kilted</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-18
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rosidl_dynamic_typesupport/#kilted-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rosidl_dynamic_typesupport/#kilted-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rosidl_dynamic_typesupport/#kilted-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/rosidl_dynamic_typesupport">rosidl_dynamic_typesupport</a></td>
                    <td>0.3.1</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="rosidl_dynamic_typesupport">rosidl_dynamic_typesupport</h1>
<p>Unified Interface for Dynamic (Runtime) Typesupport and Serialization</p>

<p>This library provides a unified interface for creating and reflecting dynamic types and dynamic data based off those types <strong>at runtime</strong>, as well as the utilities that support those objects.</p>

<p>It is meant to be used with serialization support libraries that fulfill the interface.
Properly implemented, a user should be able to, given a serialized buffer, the serialization library used to serialize it, and the buffer’s message/type description, obtain a way to introspect/reflect its contents.</p>

<h2 id="example-usage">Example Usage</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Init Serialization Support (in this case, using FastRTPS)</span>
<span class="n">rosidl_dynamic_typesupport_serialization_support_t</span> <span class="n">serialization_support</span><span class="p">;</span>
  <span class="n">rosidl_dynamic_typesupport_serialization_support_init</span><span class="p">(</span>
    <span class="n">rosidl_dynamic_typesupport_fastrtps_init_serialization_support_impl</span><span class="p">(),</span>
    <span class="n">rosidl_dynamic_typesupport_fastrtps_init_serialization_support_interface</span><span class="p">(),</span>
    <span class="n">rcutils_get_default_allocator</span><span class="p">(),</span>
    <span class="o">&amp;</span><span class="n">serialization_support</span><span class="p">);</span>

<span class="c1">// Configure Dynamic Type Builder</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_t</span> <span class="o">*</span> <span class="n">flat_builder</span> <span class="o">=</span>
  <span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">serialization_support</span><span class="p">,</span> <span class="s">"flat"</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_add_bool_member</span><span class="p">(</span><span class="n">flat_builder</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">"bool_field"</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_add_int32_member</span><span class="p">(</span><span class="n">flat_builder</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">"int32_field"</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_add_string_member</span><span class="p">(</span><span class="n">flat_builder</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s">"string_field"</span><span class="p">);</span>

<span class="c1">// Create Dynamic Type</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_type_t</span> <span class="o">*</span> <span class="n">flat_type</span> <span class="o">=</span>
  <span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_build</span><span class="p">(</span><span class="n">flat_builder</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_fini</span><span class="p">(</span><span class="n">flat_builder</span><span class="p">);</span>

<span class="c1">// Create Dynamic Data</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_t</span> <span class="o">*</span> <span class="n">flat_data</span> <span class="o">=</span>
  <span class="n">rosidl_dynamic_typesupport_dynamic_data_init_from_dynamic_type</span><span class="p">(</span><span class="n">flat_type</span><span class="p">);</span>

<span class="c1">// Dynamic Data Setters</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_set_bool_value</span><span class="p">(</span><span class="n">flat_data</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_set_int32_value</span><span class="p">(</span><span class="n">flat_data</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">42</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_set_string_value</span><span class="p">(</span><span class="n">flat_data</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s">"rar"</span><span class="p">);</span>

<span class="c1">// Dynamic Data Getters</span>
<span class="kt">bool</span> <span class="n">a</span><span class="p">;</span>
<span class="kt">int32_t</span> <span class="n">b</span><span class="p">;</span>
<span class="kt">char</span> <span class="o">*</span> <span class="n">c</span><span class="p">;</span>

<span class="n">rosidl_dynamic_typesupport_dynamic_data_get_bool_value</span><span class="p">(</span><span class="n">flat_data</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">);</span>  <span class="c1">// true</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_get_int32_value</span><span class="p">(</span><span class="n">flat_data</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">);</span>  <span class="c1">// 42</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_get_string_value</span><span class="p">(</span><span class="n">flat_data</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">c</span><span class="p">);</span>  <span class="c1">// "rar"</span>

<span class="c1">// Cleanup</span>
<span class="n">free</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_fini</span><span class="p">(</span><span class="n">flat_data</span><span class="p">);</span>


</code></pre></div></div>

<h2 id="some-terminology">Some Terminology</h2>

<ul>
  <li>Serialization support: What this library provides; A unified, serialization library agnostic interface</li>
  <li>Serialization support library: The implementation of the serialization support interface, which this library calls into</li>
  <li>Type description (aka message description): A description of the buffer that fulfills the <a href="https://design.ros2.org/articles/idl_interface_definition.html">rosidl</a> spec (this typically takes the form of the <code class="language-plaintext highlighter-rouge">TypeDescription</code> struct generated from the <a href="https://github.com/ros2/rcl_interfaces/tree/rolling/type_description_interfaces/msg">type_descripion_interfaces package</a>)</li>
  <li>Dynamic type: The serialization support library’s best-effort internal representation of the type description</li>
  <li>Dynamic type builder: The serialization support library’s means of constructing the dynamic type (on a field-by-field basis)</li>
  <li>Dynamic data: The serialization support library’s internal representation of the serialized buffer, informed by the dynamic type</li>
</ul>

<h3 id="why-dynamic-typesupport">Why <strong>Dynamic</strong> Typesupport?</h3>

<ul>
  <li>Dynamic: This library dynamically changes its internal behavior based off its runtime input (e.g. what serialization library is loaded to be used with it)</li>
  <li>Typesupport: And it supports the creation of, and access of types</li>
</ul>

<p>This package differs from the usual ROS 2 notion of “dynamic” typesupport in that it offers <strong>runtime</strong> functionalities that change based off its input (hence dynamic), rather than compile-time code generation like the “dynamic” <code class="language-plaintext highlighter-rouge">rosidl_typesupport_introspection</code> package does (which generates introspectable typesupports at compile time.)</p>

<p>Furthermore, since this package does not actually generate any code, it is stored separately from the <a href="https://github.com/ros2/rosidl">rosidl repository</a>.</p>

<h2 id="the-serialization-support-interface">The Serialization Support Interface</h2>

<p>The serialization support interface is supposed to be an interface that is generic enough to support run-time type reflection (or in other words, dynamic type support), and is written in <code class="language-plaintext highlighter-rouge">C</code> to allow for easy language binding with any downstream libraries that use it.</p>

<p>Its interface is inspired by <a href="https://design.ros2.org/articles/idl_interface_definition.html">rosidl</a>, and the <a href="https://www.omg.org/spec/DDS-XTypes/1.3/PDF">DDS XTypes 1.3 language bindings spec (pg. 175)</a>, but is still intended to be generic, and so should support non-DDS middlewares.</p>

<p>The Serialization Support includes, for each supported middleware:</p>

<ul>
  <li>Setting type members (dynamic type)
    <ul>
      <li>Note the lack of ability to get type members</li>
    </ul>
  </li>
  <li>Getting and setting data members based off that type (dynamic data)</li>
  <li>Support for sequences and nested members</li>
  <li>Utilities</li>
</ul>

<p>The interface makes heavy use of <code class="language-plaintext highlighter-rouge">void *</code> casting to abstract away any necessary objects used with each serialization library.</p>

<h3 id="a-note-on-proper-usage">A Note On Proper Usage</h3>

<p>The serialization support capabilities of this library are meant to be used alongside a rosidl-compliant description of the message a buffer is meant to represent (the type description).</p>

<p>This is because there is a distinction between the rosidl description of a message, and what a serialization library can describe or express (in its dynamic type.)
As such, the rosidl description should be the sole source of determine what specific dynamic data getter functions are called during the unpacking of the message.
And the serialization support library is in charge of supporting mapping to and from what types it can support, and the rosidl types.</p>

<p>Consider the following, contrived example, where you have a message layout like so:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>int int_field

</code></pre></div></div>

<p>Suppose you had a serialization library that only provisions support for raw bytes.
In that case, the serialization support library written would probably end up treating the <code class="language-plaintext highlighter-rouge">int_field</code> field as raw bytes when constructing its dynamic type, which means that when the message gets deserialized, something must retain the knowledge that the <code class="language-plaintext highlighter-rouge">int_field</code> was supposed to be an <code class="language-plaintext highlighter-rouge">int</code> type.</p>

<p>This is precisely what the type description is for, which a user should programmatically traverse, and use to determine the appropriate <code class="language-plaintext highlighter-rouge">int</code> dynamic data getter to call.
The serialization support library then should implement its <code class="language-plaintext highlighter-rouge">int</code> dynamic data getter to extract the field from the buffer (as raw bytes, since that is what the serialization library supports), and coerce the extracted type (raw bytes) to output an <code class="language-plaintext highlighter-rouge">int</code> value to return.</p>

<p>Additionally, this means that, in order to support such cases, the serialization library must either:</p>

<ul>
  <li>Use the same member/field indexing as is used in the type description</li>
  <li>Have an alternate means to find the field described in the type description (e.g. by matching field names)</li>
</ul>

<p>Note: There was a consideration to populate the dynamic type/data objects with the type description instead.
But as the type description and dynamic type encompasses two subtly different concerns (rosidl compliance, and serialization library specific type support, respectively), it makes sense to keep them separate.
And this is especially true given the fact that users are supposed to use the type description to call the appropriate getters.</p>

<h2 id="type-ids">Type IDs</h2>

<p>The type IDs used by this library (in <code class="language-plaintext highlighter-rouge">types.h</code>) are pulling from the <a href="https://github.com/ros2/rcl_interfaces/tree/rolling/type_description_interfaces/msg">type_descripion_interfaces</a> message definitions.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rosidl_dynamic_typesupport">rosidl_dynamic_typesupport</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/rosidl_dynamic_typesupport">rosidl_dynamic_typesupport</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-rosidl_dynamic_typesupport
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-rosidl_dynamic_typesupport" role="menuitem" tabindex="-1" href="/r/rosidl_dynamic_typesupport/github-ros2-rosidl_dynamic_typesupport" data="github-ros2-rosidl_dynamic_typesupport">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-rosidl_dynamic_typesupport
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Unified Interface for Dynamic (Runtime) Typesupport and Serialization</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros2/rosidl_dynamic_typesupport.git">https://github.com/ros2/rosidl_dynamic_typesupport.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">rolling</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-24
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rosidl_dynamic_typesupport/#rolling-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rosidl_dynamic_typesupport/#rolling-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rosidl_dynamic_typesupport/#rolling-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/rosidl_dynamic_typesupport">rosidl_dynamic_typesupport</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="rosidl_dynamic_typesupport">rosidl_dynamic_typesupport</h1>
<p>Unified Interface for Dynamic (Runtime) Typesupport and Serialization</p>

<p>This library provides a unified interface for creating and reflecting dynamic types and dynamic data based off those types <strong>at runtime</strong>, as well as the utilities that support those objects.</p>

<p>It is meant to be used with serialization support libraries that fulfill the interface.
Properly implemented, a user should be able to, given a serialized buffer, the serialization library used to serialize it, and the buffer’s message/type description, obtain a way to introspect/reflect its contents.</p>

<h2 id="example-usage">Example Usage</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Init Serialization Support (in this case, using FastRTPS)</span>
<span class="n">rosidl_dynamic_typesupport_serialization_support_t</span> <span class="n">serialization_support</span><span class="p">;</span>
  <span class="n">rosidl_dynamic_typesupport_serialization_support_init</span><span class="p">(</span>
    <span class="n">rosidl_dynamic_typesupport_fastrtps_init_serialization_support_impl</span><span class="p">(),</span>
    <span class="n">rosidl_dynamic_typesupport_fastrtps_init_serialization_support_interface</span><span class="p">(),</span>
    <span class="n">rcutils_get_default_allocator</span><span class="p">(),</span>
    <span class="o">&amp;</span><span class="n">serialization_support</span><span class="p">);</span>

<span class="c1">// Configure Dynamic Type Builder</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_t</span> <span class="o">*</span> <span class="n">flat_builder</span> <span class="o">=</span>
  <span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">serialization_support</span><span class="p">,</span> <span class="s">"flat"</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_add_bool_member</span><span class="p">(</span><span class="n">flat_builder</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">"bool_field"</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_add_int32_member</span><span class="p">(</span><span class="n">flat_builder</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">"int32_field"</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_add_string_member</span><span class="p">(</span><span class="n">flat_builder</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s">"string_field"</span><span class="p">);</span>

<span class="c1">// Create Dynamic Type</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_type_t</span> <span class="o">*</span> <span class="n">flat_type</span> <span class="o">=</span>
  <span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_build</span><span class="p">(</span><span class="n">flat_builder</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_fini</span><span class="p">(</span><span class="n">flat_builder</span><span class="p">);</span>

<span class="c1">// Create Dynamic Data</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_t</span> <span class="o">*</span> <span class="n">flat_data</span> <span class="o">=</span>
  <span class="n">rosidl_dynamic_typesupport_dynamic_data_init_from_dynamic_type</span><span class="p">(</span><span class="n">flat_type</span><span class="p">);</span>

<span class="c1">// Dynamic Data Setters</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_set_bool_value</span><span class="p">(</span><span class="n">flat_data</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_set_int32_value</span><span class="p">(</span><span class="n">flat_data</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">42</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_set_string_value</span><span class="p">(</span><span class="n">flat_data</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s">"rar"</span><span class="p">);</span>

<span class="c1">// Dynamic Data Getters</span>
<span class="kt">bool</span> <span class="n">a</span><span class="p">;</span>
<span class="kt">int32_t</span> <span class="n">b</span><span class="p">;</span>
<span class="kt">char</span> <span class="o">*</span> <span class="n">c</span><span class="p">;</span>

<span class="n">rosidl_dynamic_typesupport_dynamic_data_get_bool_value</span><span class="p">(</span><span class="n">flat_data</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">);</span>  <span class="c1">// true</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_get_int32_value</span><span class="p">(</span><span class="n">flat_data</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">);</span>  <span class="c1">// 42</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_get_string_value</span><span class="p">(</span><span class="n">flat_data</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">c</span><span class="p">);</span>  <span class="c1">// "rar"</span>

<span class="c1">// Cleanup</span>
<span class="n">free</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_fini</span><span class="p">(</span><span class="n">flat_data</span><span class="p">);</span>


</code></pre></div></div>

<h2 id="some-terminology">Some Terminology</h2>

<ul>
  <li>Serialization support: What this library provides; A unified, serialization library agnostic interface</li>
  <li>Serialization support library: The implementation of the serialization support interface, which this library calls into</li>
  <li>Type description (aka message description): A description of the buffer that fulfills the <a href="https://design.ros2.org/articles/idl_interface_definition.html">rosidl</a> spec (this typically takes the form of the <code class="language-plaintext highlighter-rouge">TypeDescription</code> struct generated from the <a href="https://github.com/ros2/rcl_interfaces/tree/rolling/type_description_interfaces/msg">type_descripion_interfaces package</a>)</li>
  <li>Dynamic type: The serialization support library’s best-effort internal representation of the type description</li>
  <li>Dynamic type builder: The serialization support library’s means of constructing the dynamic type (on a field-by-field basis)</li>
  <li>Dynamic data: The serialization support library’s internal representation of the serialized buffer, informed by the dynamic type</li>
</ul>

<h3 id="why-dynamic-typesupport">Why <strong>Dynamic</strong> Typesupport?</h3>

<ul>
  <li>Dynamic: This library dynamically changes its internal behavior based off its runtime input (e.g. what serialization library is loaded to be used with it)</li>
  <li>Typesupport: And it supports the creation of, and access of types</li>
</ul>

<p>This package differs from the usual ROS 2 notion of “dynamic” typesupport in that it offers <strong>runtime</strong> functionalities that change based off its input (hence dynamic), rather than compile-time code generation like the “dynamic” <code class="language-plaintext highlighter-rouge">rosidl_typesupport_introspection</code> package does (which generates introspectable typesupports at compile time.)</p>

<p>Furthermore, since this package does not actually generate any code, it is stored separately from the <a href="https://github.com/ros2/rosidl">rosidl repository</a>.</p>

<h2 id="the-serialization-support-interface">The Serialization Support Interface</h2>

<p>The serialization support interface is supposed to be an interface that is generic enough to support run-time type reflection (or in other words, dynamic type support), and is written in <code class="language-plaintext highlighter-rouge">C</code> to allow for easy language binding with any downstream libraries that use it.</p>

<p>Its interface is inspired by <a href="https://design.ros2.org/articles/idl_interface_definition.html">rosidl</a>, and the <a href="https://www.omg.org/spec/DDS-XTypes/1.3/PDF">DDS XTypes 1.3 language bindings spec (pg. 175)</a>, but is still intended to be generic, and so should support non-DDS middlewares.</p>

<p>The Serialization Support includes, for each supported middleware:</p>

<ul>
  <li>Setting type members (dynamic type)
    <ul>
      <li>Note the lack of ability to get type members</li>
    </ul>
  </li>
  <li>Getting and setting data members based off that type (dynamic data)</li>
  <li>Support for sequences and nested members</li>
  <li>Utilities</li>
</ul>

<p>The interface makes heavy use of <code class="language-plaintext highlighter-rouge">void *</code> casting to abstract away any necessary objects used with each serialization library.</p>

<h3 id="a-note-on-proper-usage">A Note On Proper Usage</h3>

<p>The serialization support capabilities of this library are meant to be used alongside a rosidl-compliant description of the message a buffer is meant to represent (the type description).</p>

<p>This is because there is a distinction between the rosidl description of a message, and what a serialization library can describe or express (in its dynamic type.)
As such, the rosidl description should be the sole source of determine what specific dynamic data getter functions are called during the unpacking of the message.
And the serialization support library is in charge of supporting mapping to and from what types it can support, and the rosidl types.</p>

<p>Consider the following, contrived example, where you have a message layout like so:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>int int_field

</code></pre></div></div>

<p>Suppose you had a serialization library that only provisions support for raw bytes.
In that case, the serialization support library written would probably end up treating the <code class="language-plaintext highlighter-rouge">int_field</code> field as raw bytes when constructing its dynamic type, which means that when the message gets deserialized, something must retain the knowledge that the <code class="language-plaintext highlighter-rouge">int_field</code> was supposed to be an <code class="language-plaintext highlighter-rouge">int</code> type.</p>

<p>This is precisely what the type description is for, which a user should programmatically traverse, and use to determine the appropriate <code class="language-plaintext highlighter-rouge">int</code> dynamic data getter to call.
The serialization support library then should implement its <code class="language-plaintext highlighter-rouge">int</code> dynamic data getter to extract the field from the buffer (as raw bytes, since that is what the serialization library supports), and coerce the extracted type (raw bytes) to output an <code class="language-plaintext highlighter-rouge">int</code> value to return.</p>

<p>Additionally, this means that, in order to support such cases, the serialization library must either:</p>

<ul>
  <li>Use the same member/field indexing as is used in the type description</li>
  <li>Have an alternate means to find the field described in the type description (e.g. by matching field names)</li>
</ul>

<p>Note: There was a consideration to populate the dynamic type/data objects with the type description instead.
But as the type description and dynamic type encompasses two subtly different concerns (rosidl compliance, and serialization library specific type support, respectively), it makes sense to keep them separate.
And this is especially true given the fact that users are supposed to use the type description to call the appropriate getters.</p>

<h2 id="type-ids">Type IDs</h2>

<p>The type IDs used by this library (in <code class="language-plaintext highlighter-rouge">types.h</code>) are pulling from the <a href="https://github.com/ros2/rcl_interfaces/tree/rolling/type_description_interfaces/msg">type_descripion_interfaces</a> message definitions.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rosidl_dynamic_typesupport">rosidl_dynamic_typesupport</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-rosidl_dynamic_typesupport
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-rosidl_dynamic_typesupport" role="menuitem" tabindex="-1" href="/r/rosidl_dynamic_typesupport/github-ros2-rosidl_dynamic_typesupport" data="github-ros2-rosidl_dynamic_typesupport">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-rosidl_dynamic_typesupport
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>github</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rosidl_dynamic_typesupport">rosidl_dynamic_typesupport</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-rosidl_dynamic_typesupport
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-rosidl_dynamic_typesupport" role="menuitem" tabindex="-1" href="/r/rosidl_dynamic_typesupport/github-ros2-rosidl_dynamic_typesupport" data="github-ros2-rosidl_dynamic_typesupport">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-rosidl_dynamic_typesupport
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rosidl_dynamic_typesupport">rosidl_dynamic_typesupport</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-rosidl_dynamic_typesupport
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-rosidl_dynamic_typesupport" role="menuitem" tabindex="-1" href="/r/rosidl_dynamic_typesupport/github-ros2-rosidl_dynamic_typesupport" data="github-ros2-rosidl_dynamic_typesupport">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-rosidl_dynamic_typesupport
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rosidl_dynamic_typesupport">rosidl_dynamic_typesupport</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/rosidl_dynamic_typesupport">rosidl_dynamic_typesupport</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-rosidl_dynamic_typesupport
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-rosidl_dynamic_typesupport" role="menuitem" tabindex="-1" href="/r/rosidl_dynamic_typesupport/github-ros2-rosidl_dynamic_typesupport" data="github-ros2-rosidl_dynamic_typesupport">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-rosidl_dynamic_typesupport
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Unified Interface for Dynamic (Runtime) Typesupport and Serialization</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros2/rosidl_dynamic_typesupport.git">https://github.com/ros2/rosidl_dynamic_typesupport.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">iron</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2023-11-17
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rosidl_dynamic_typesupport/#iron-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rosidl_dynamic_typesupport/#iron-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rosidl_dynamic_typesupport/#iron-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/rosidl_dynamic_typesupport">rosidl_dynamic_typesupport</a></td>
                    <td>0.0.5</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="rosidl_dynamic_typesupport">rosidl_dynamic_typesupport</h1>
<p>Unified Interface for Dynamic (Runtime) Typesupport and Serialization</p>

<p>This library provides a unified interface for creating and reflecting dynamic types and dynamic data based off those types <strong>at runtime</strong>, as well as the utilities that support those objects.</p>

<p>It is meant to be used with serialization support libraries that fulfill the interface.
Properly implemented, a user should be able to, given a serialized buffer, the serialization library used to serialize it, and the buffer’s message/type description, obtain a way to introspect/reflect its contents.</p>

<h2 id="example-usage">Example Usage</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Init Serialization Support (in this case, using FastRTPS)</span>
<span class="n">rosidl_dynamic_typesupport_serialization_support_t</span> <span class="n">serialization_support</span><span class="p">;</span>
  <span class="n">rosidl_dynamic_typesupport_serialization_support_init</span><span class="p">(</span>
    <span class="n">rosidl_dynamic_typesupport_fastrtps_init_serialization_support_impl</span><span class="p">(),</span>
    <span class="n">rosidl_dynamic_typesupport_fastrtps_init_serialization_support_interface</span><span class="p">(),</span>
    <span class="n">rcutils_get_default_allocator</span><span class="p">(),</span>
    <span class="o">&amp;</span><span class="n">serialization_support</span><span class="p">);</span>

<span class="c1">// Configure Dynamic Type Builder</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_t</span> <span class="o">*</span> <span class="n">flat_builder</span> <span class="o">=</span>
  <span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">serialization_support</span><span class="p">,</span> <span class="s">"flat"</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_add_bool_member</span><span class="p">(</span><span class="n">flat_builder</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">"bool_field"</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_add_int32_member</span><span class="p">(</span><span class="n">flat_builder</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">"int32_field"</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_add_string_member</span><span class="p">(</span><span class="n">flat_builder</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s">"string_field"</span><span class="p">);</span>

<span class="c1">// Create Dynamic Type</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_type_t</span> <span class="o">*</span> <span class="n">flat_type</span> <span class="o">=</span>
  <span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_build</span><span class="p">(</span><span class="n">flat_builder</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_type_builder_fini</span><span class="p">(</span><span class="n">flat_builder</span><span class="p">);</span>

<span class="c1">// Create Dynamic Data</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_t</span> <span class="o">*</span> <span class="n">flat_data</span> <span class="o">=</span>
  <span class="n">rosidl_dynamic_typesupport_dynamic_data_init_from_dynamic_type</span><span class="p">(</span><span class="n">flat_type</span><span class="p">);</span>

<span class="c1">// Dynamic Data Setters</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_set_bool_value</span><span class="p">(</span><span class="n">flat_data</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_set_int32_value</span><span class="p">(</span><span class="n">flat_data</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">42</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_set_string_value</span><span class="p">(</span><span class="n">flat_data</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s">"rar"</span><span class="p">);</span>

<span class="c1">// Dynamic Data Getters</span>
<span class="kt">bool</span> <span class="n">a</span><span class="p">;</span>
<span class="kt">int32_t</span> <span class="n">b</span><span class="p">;</span>
<span class="kt">char</span> <span class="o">*</span> <span class="n">c</span><span class="p">;</span>

<span class="n">rosidl_dynamic_typesupport_dynamic_data_get_bool_value</span><span class="p">(</span><span class="n">flat_data</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">);</span>  <span class="c1">// true</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_get_int32_value</span><span class="p">(</span><span class="n">flat_data</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">);</span>  <span class="c1">// 42</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_get_string_value</span><span class="p">(</span><span class="n">flat_data</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">c</span><span class="p">);</span>  <span class="c1">// "rar"</span>

<span class="c1">// Cleanup</span>
<span class="n">free</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
<span class="n">rosidl_dynamic_typesupport_dynamic_data_fini</span><span class="p">(</span><span class="n">flat_data</span><span class="p">);</span>


</code></pre></div></div>

<h2 id="some-terminology">Some Terminology</h2>

<ul>
  <li>Serialization support: What this library provides; A unified, serialization library agnostic interface</li>
  <li>Serialization support library: The implementation of the serialization support interface, which this library calls into</li>
  <li>Type description (aka message description): A description of the buffer that fulfills the <a href="https://design.ros2.org/articles/idl_interface_definition.html">rosidl</a> spec (this typically takes the form of the <code class="language-plaintext highlighter-rouge">TypeDescription</code> struct generated from the <a href="https://github.com/ros2/rcl_interfaces/tree/rolling/type_description_interfaces/msg">type_descripion_interfaces package</a>)</li>
  <li>Dynamic type: The serialization support library’s best-effort internal representation of the type description</li>
  <li>Dynamic type builder: The serialization support library’s means of constructing the dynamic type (on a field-by-field basis)</li>
  <li>Dynamic data: The serialization support library’s internal representation of the serialized buffer, informed by the dynamic type</li>
</ul>

<h3 id="why-dynamic-typesupport">Why <strong>Dynamic</strong> Typesupport?</h3>

<ul>
  <li>Dynamic: This library dynamically changes its internal behavior based off its runtime input (e.g. what serialization library is loaded to be used with it)</li>
  <li>Typesupport: And it supports the creation of, and access of types</li>
</ul>

<p>This package differs from the usual ROS 2 notion of “dynamic” typesupport in that it offers <strong>runtime</strong> functionalities that change based off its input (hence dynamic), rather than compile-time code generation like the “dynamic” <code class="language-plaintext highlighter-rouge">rosidl_typesupport_introspection</code> package does (which generates introspectable typesupports at compile time.)</p>

<p>Furthermore, since this package does not actually generate any code, it is stored separately from the <a href="https://github.com/ros2/rosidl">rosidl repository</a>.</p>

<h2 id="the-serialization-support-interface">The Serialization Support Interface</h2>

<p>The serialization support interface is supposed to be an interface that is generic enough to support run-time type reflection (or in other words, dynamic type support), and is written in <code class="language-plaintext highlighter-rouge">C</code> to allow for easy language binding with any downstream libraries that use it.</p>

<p>Its interface is inspired by <a href="https://design.ros2.org/articles/idl_interface_definition.html">rosidl</a>, and the <a href="https://www.omg.org/spec/DDS-XTypes/1.3/PDF">DDS XTypes 1.3 language bindings spec (pg. 175)</a>, but is still intended to be generic, and so should support non-DDS middlewares.</p>

<p>The Serialization Support includes, for each supported middleware:</p>

<ul>
  <li>Setting type members (dynamic type)
    <ul>
      <li>Note the lack of ability to get type members</li>
    </ul>
  </li>
  <li>Getting and setting data members based off that type (dynamic data)</li>
  <li>Support for sequences and nested members</li>
  <li>Utilities</li>
</ul>

<p>The interface makes heavy use of <code class="language-plaintext highlighter-rouge">void *</code> casting to abstract away any necessary objects used with each serialization library.</p>

<h3 id="a-note-on-proper-usage">A Note On Proper Usage</h3>

<p>The serialization support capabilities of this library are meant to be used alongside a rosidl-compliant description of the message a buffer is meant to represent (the type description).</p>

<p>This is because there is a distinction between the rosidl description of a message, and what a serialization library can describe or express (in its dynamic type.)
As such, the rosidl description should be the sole source of determine what specific dynamic data getter functions are called during the unpacking of the message.
And the serialization support library is in charge of supporting mapping to and from what types it can support, and the rosidl types.</p>

<p>Consider the following, contrived example, where you have a message layout like so:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>int int_field

</code></pre></div></div>

<p>Suppose you had a serialization library that only provisions support for raw bytes.
In that case, the serialization support library written would probably end up treating the <code class="language-plaintext highlighter-rouge">int_field</code> field as raw bytes when constructing its dynamic type, which means that when the message gets deserialized, something must retain the knowledge that the <code class="language-plaintext highlighter-rouge">int_field</code> was supposed to be an <code class="language-plaintext highlighter-rouge">int</code> type.</p>

<p>This is precisely what the type description is for, which a user should programmatically traverse, and use to determine the appropriate <code class="language-plaintext highlighter-rouge">int</code> dynamic data getter to call.
The serialization support library then should implement its <code class="language-plaintext highlighter-rouge">int</code> dynamic data getter to extract the field from the buffer (as raw bytes, since that is what the serialization library supports), and coerce the extracted type (raw bytes) to output an <code class="language-plaintext highlighter-rouge">int</code> value to return.</p>

<p>Additionally, this means that, in order to support such cases, the serialization library must either:</p>

<ul>
  <li>Use the same member/field indexing as is used in the type description</li>
  <li>Have an alternate means to find the field described in the type description (e.g. by matching field names)</li>
</ul>

<p>Note: There was a consideration to populate the dynamic type/data objects with the type description instead.
But as the type description and dynamic type encompasses two subtly different concerns (rosidl compliance, and serialization library specific type support, respectively), it makes sense to keep them separate.
And this is especially true given the fact that users are supposed to use the type description to call the appropriate getters.</p>

<h2 id="type-ids">Type IDs</h2>

<p>The type IDs used by this library (in <code class="language-plaintext highlighter-rouge">types.h</code>) are pulling from the <a href="https://github.com/ros2/rcl_interfaces/tree/rolling/type_description_interfaces/msg">type_descripion_interfaces</a> message definitions.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rosidl_dynamic_typesupport">rosidl_dynamic_typesupport</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-rosidl_dynamic_typesupport
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-rosidl_dynamic_typesupport" role="menuitem" tabindex="-1" href="/r/rosidl_dynamic_typesupport/github-ros2-rosidl_dynamic_typesupport" data="github-ros2-rosidl_dynamic_typesupport">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-rosidl_dynamic_typesupport
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/ros2/rosidl_dynamic_typesupport.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
