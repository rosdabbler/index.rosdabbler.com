<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/ros2_serial_example/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">ros2_serial_example</li>
        <!--<li class="active">ros2_serial_example</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-default" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-default" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-default" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-default" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-primary" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class="disabled older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros2_serial_example">ros2_serial_example</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-osrf-ros2_serial_example
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-osrf-ros2_serial_example" role="menuitem" tabindex="-1" href="/r/ros2_serial_example/github-osrf-ros2_serial_example" data="github-osrf-ros2_serial_example">
                    <span class="glyphicon glyphicon-star"></span>
                    github-osrf-ros2_serial_example
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>humble</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros2_serial_example">ros2_serial_example</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-osrf-ros2_serial_example
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-osrf-ros2_serial_example" role="menuitem" tabindex="-1" href="/r/ros2_serial_example/github-osrf-ros2_serial_example" data="github-osrf-ros2_serial_example">
                    <span class="glyphicon glyphicon-star"></span>
                    github-osrf-ros2_serial_example
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jazzy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros2_serial_example">ros2_serial_example</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-osrf-ros2_serial_example
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-osrf-ros2_serial_example" role="menuitem" tabindex="-1" href="/r/ros2_serial_example/github-osrf-ros2_serial_example" data="github-osrf-ros2_serial_example">
                    <span class="glyphicon glyphicon-star"></span>
                    github-osrf-ros2_serial_example
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>kilted</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros2_serial_example">ros2_serial_example</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-osrf-ros2_serial_example
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-osrf-ros2_serial_example" role="menuitem" tabindex="-1" href="/r/ros2_serial_example/github-osrf-ros2_serial_example" data="github-osrf-ros2_serial_example">
                    <span class="glyphicon glyphicon-star"></span>
                    github-osrf-ros2_serial_example
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>rolling</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros2_serial_example">ros2_serial_example</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/ros2_serial_example">ros2_serial_example</a>
        
        <a class="label label-primary pkg-label" href="/p/ros2_serial_msgs">ros2_serial_msgs</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-osrf-ros2_serial_example
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-osrf-ros2_serial_example" role="menuitem" tabindex="-1" href="/r/ros2_serial_example/github-osrf-ros2_serial_example" data="github-osrf-ros2_serial_example">
                    <span class="glyphicon glyphicon-star"></span>
                    github-osrf-ros2_serial_example
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/osrf/ros2_serial_example.git">https://github.com/osrf/ros2_serial_example.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2022-01-15
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNKNOWN
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ros2_serial_example/#github-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros2_serial_example/#github-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros2_serial_example/#github-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ros2_serial_example">ros2_serial_example</a></td>
                    <td>0.1.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ros2_serial_msgs">ros2_serial_msgs</a></td>
                    <td>0.0.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="ros-2-serial-bridge">ROS 2 serial bridge</h1>

<h2 id="purpose">Purpose</h2>

<p>This repository aims to provide a starting point (and possibly canonical version) of a serial &lt;-&gt; ROS 2 bridge.  The aim of the bridge is to take data to and from a serial port, and present that data on a ROS 2 network.</p>

<p>As of this writing (2019-03-22), there are several other projects in this space:</p>

<ol>
  <li>px4_ros_com - https://github.com/PX4/px4_ros_com</li>
  <li>px4_to_ros - https://github.com/eProsima/px4_to_ros</li>
  <li>microROS - https://github.com/microROS</li>
  <li>microXRCE - https://github.com/eProsima/Micro-XRCE-DDS</li>
  <li>ros2arduino - https://github.com/ROBOTIS-GIT/ros2arduino</li>
</ol>

<p>This project was originally forked out of px4_ros_com, but has since been heavily modified.</p>

<h2 id="theory-of-operation">Theory of operation</h2>

<p>The serial-to-ROS 2 bridge contained in this repository (as the <code class="language-plaintext highlighter-rouge">ros2_to_serial_bridge</code> binary) defines serial framing protocols (the details of which are explained further in <a href="https://github.com/osrf/ros2_serial_example/tree/master/#Serial-Framing-Protocol">Serial Framing Protocol</a>.  Data that is properly framed coming <em>from</em> the serial port is unpacked and sent onto the ROS 2 network.  Conversely, data coming from the ROS 2 network is properly framed and sent <em>to</em> the serial port.  In all cases, the goal is to keep the amount of code on the other end of the serial port low so that this can be used to talk to embedded devices.</p>

<p>To keep the overhead of the serial framing low, there is a fixed-size “topic_ID” sent and received as part of the serial framing protocol.  This “topic_ID” represents a (topic name,topic type) tuple on the ROS 2 network.  By default, the “topic_ID” size is one byte, with 0 and 1 reserved, so that the maximum number of (topic_name,topic_type) tuples on any one bridge is 253.  There is a typedef in the code to increase this, but note that changing this will break serial wire compatibility.  The mapping of topic_ID -&gt; (topic_name,topic_type) is discussed in the next section.</p>

<h2 id="topic-id-to-name-and-type">Topic ID to name and type</h2>

<p>As stated above, the bridge needs to know the mapping of topic IDs to the (topic_name,topic_type) tuple.  It can get this information either via a static YAML configuration file, or dynamically by querying the other side of the serial port.</p>

<h3 id="static-yaml-configuration">Static YAML configuration</h3>

<p>If static YAML configuration is configured, then the topic ID -&gt; (topic_name,topic_type) mapping comes from the file passed to the <code class="language-plaintext highlighter-rouge">ros2_serial_bridge</code> on the command line.  Static YAML configuration can be requested by setting the <code class="language-plaintext highlighter-rouge">dynamic_serial_mapping_ms</code> key in the YAML file to -1.  If static YAML configuration is configured, then no dynamic mapping is applied.</p>

<p>An example YAML file is presented in <a href="https://github.com/osrf/ros2_serial_example/tree/master/ros2_serial_example/config/default_ros2_to_serial_bridge_params.yaml">ros2_serial_example/config/default_ros2_to_serial_bridge_params.yaml</a>.  We’ll gloss over the first part of the file here to concentrate on the topic mappings; see <a href="https://github.com/osrf/ros2_serial_example/tree/master/#YAML-config">YAML config</a> for more information about the rest of the configuration file.</p>

<p>There’s a top-level <code class="language-plaintext highlighter-rouge">topics</code> key, and under that are topic mappings of the form:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;topic_name&gt;:
    serial_mapping: &lt;serial_byte_mapping&gt;
    type: &lt;ROS2_type_mapping&gt;
    direction: [SerialToROS2|ROS2ToSerial]

</code></pre></div></div>

<p>Data coming from the serial port with topic_ID <code class="language-plaintext highlighter-rouge">&lt;serial_byte_mapping&gt;</code> with direction <code class="language-plaintext highlighter-rouge">SerialToROS2</code> will be published on the ROS 2 network on topic <code class="language-plaintext highlighter-rouge">&lt;topic_name&gt;</code> with type <code class="language-plaintext highlighter-rouge">&lt;ROS2_type_mapping&gt;</code>.  Data coming from the ROS 2 network on topic <code class="language-plaintext highlighter-rouge">topic_name</code> with direction <code class="language-plaintext highlighter-rouge">ROS2ToSerial</code> with type <code class="language-plaintext highlighter-rouge">&lt;ROS2_type_mapping&gt;</code> will be framed onto the serial port with mapping <code class="language-plaintext highlighter-rouge">&lt;serial_byte_mapping&gt;</code>.  For maximum disambiguation, a topic_ID is exclusively either <code class="language-plaintext highlighter-rouge">SerialToROS2</code> or <code class="language-plaintext highlighter-rouge">ROS2ToSerial</code>.  This isn’t a fundamental requirement of the protocol, so it could be lifted if necessary.</p>

<h3 id="dynamic-topic-mapping">Dynamic topic mapping</h3>

<p>If dynamic topic mapping is configured, then the topic ID -&gt; (topic_name,topic_type) mapping is queried over the serial port when <code class="language-plaintext highlighter-rouge">ros2_to_serial_bridge</code> starts.  Dynamic topic mapping can be requested by setting the <code class="language-plaintext highlighter-rouge">dynamic_serial_mapping_ms</code> key in the YAML configuration file to 0 or greater.  If 0, then <code class="language-plaintext highlighter-rouge">ros2_to_serial_bridge</code> will try “forever” to get the mapping via the serial port.  If greater than 0, then <code class="language-plaintext highlighter-rouge">ros2_to_serial_bridge</code> will try for that many milliseconds to get the mapping.  If it doesn’t get it in that time, it quits the program.  If dynamic topic mapping is configured, then any static mapping in the YAML configuration file is completely ignored.</p>

<h2 id="supported-types">Supported types</h2>

<p>The message types that the bridge supports must be known at compile time. The CMake variable <code class="language-plaintext highlighter-rouge">ROS2_SERIAL_PKGS</code> is used to add entire packages to the list of supported messages; all messages in the particular package will be built into the bridge. For example, to add in all messages in <code class="language-plaintext highlighter-rouge">std_msgs</code>, <code class="language-plaintext highlighter-rouge">std_msgs</code> would be added to the <code class="language-plaintext highlighter-rouge">ROS2_SERIAL_PKGS</code> variable using this arguments: <code class="language-plaintext highlighter-rouge">--cmake-args -DROS2_SERIAL_PKGS="sensor_msgs"</code>. If you want to add more packages you can use <code class="language-plaintext highlighter-rouge">;</code> to separate them: <code class="language-plaintext highlighter-rouge">--cmake-args -DROS2_SERIAL_PKGS="sensor_msgs;px4_msgs"</code>. Each package type added to the bridge consumes more compile time and more on-disk space. The memory usage depends on which message types are setup during the topic mapping phase above. Note that if the topic mapping specifies a type that has not been compiled into <code class="language-plaintext highlighter-rouge">ros2_to_serial_bridge</code>, that topic will just be ignored.</p>

<h2 id="using-the-code-in-this-repository">Using the code in this repository</h2>

<h3 id="build">Build</h3>

<ol>
  <li>Install ROS 2 (https://index.ros.org/doc/ros2/Installation/).</li>
  <li>Source the ROS 2 installation (either <code class="language-plaintext highlighter-rouge">/opt/ros/&lt;rosdistro&gt;/setup.bash</code> if installing from binaries, or <code class="language-plaintext highlighter-rouge">ros2_ws/install/setup.bash</code> if building from source):
    <ol>
      <li><code class="language-plaintext highlighter-rouge">source /opt/ros/crystal/setup.bash</code></li>
    </ol>
  </li>
  <li>Make a new workspace and clone this repository into it:
    <ol>
      <li><code class="language-plaintext highlighter-rouge">mkdir -p ros2_serial_example_ws/src</code></li>
      <li><code class="language-plaintext highlighter-rouge">cd ros2_serial_example/src</code></li>
      <li><code class="language-plaintext highlighter-rouge">git clone https://github.com/osrf/ros2_serial_example.git</code></li>
      <li><code class="language-plaintext highlighter-rouge">cd ..</code></li>
    </ol>
  </li>
  <li>Build the local workspace:
    <ol>
      <li><code class="language-plaintext highlighter-rouge">colcon build --cmake-args -DROS2_SERIAL_PKGS="sensor_msgs;px4_msgs"</code></li>
    </ol>
  </li>
  <li>Source the local workspace:
    <ol>
      <li><code class="language-plaintext highlighter-rouge">source install/local_setup.bash</code></li>
    </ol>
  </li>
</ol>

<h3 id="run">Run</h3>

<p>In terminal one:</p>

<p><code class="language-plaintext highlighter-rouge">socat -d -d pty,raw,echo=0 pty,raw,echo=0</code></p>

<p>socat will print two ptys out like /dev/pts/25 and /dev/pts/26; put the first one in the config file src/ros2_serial_example/ros2_serial_example/config/default_ros2_to_serial_bridge_params.yaml, and we’ll use the second one below.</p>

<p>In terminal two, run the serial &lt;-&gt; RTPS bridge:</p>

<p><code class="language-plaintext highlighter-rouge">./install/ros2_serial_example/lib/ros2_serial_example/ros2_to_serial_bridge __params:=src/ros2_serial_example/ros2_serial_example/config/default_ros2_to_serial_bridge_params.yaml</code></p>

<p>In terminal three, send some data into the serial port that will show up in the ROS 2 network:</p>

<p><code class="language-plaintext highlighter-rouge">./install/ros2_serial_example/lib/ros2_serial_example/dummy_serial -d /dev/pts/26</code></p>

<p>Also in terminal three, send some data from the ROS 2 network that will end up on the serial port:</p>

<p><code class="language-plaintext highlighter-rouge">ros2 topic pub -1 /another std_msgs/String "{data: 'hello'}"</code></p>

<h2 id="serial-framing-protocol">Serial Framing Protocol</h2>

<p>The current <code class="language-plaintext highlighter-rouge">ros2_to_serial_bridge</code> features two selectable serial protocols for transferring data over the serial link.  Both are intended to be simple and low overhead for the other end of the serial port to encode and decode (potentially a microcontroller).  The two supported protocols are:</p>

<ol>
  <li>px4 - This protocol exists for 100% compatibility with the https://github.com/PX4/px4_ros_com project.  On the wire, the protocol looks like this (the vertical bars are octet separators and not actually part of the protocol):</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt;|topic_ID|seq|len_high|len_low|CRC_high|CRC_low|payload_start...payload_end|

</code></pre></div></div>

<p>The benefit to this protocol is that it is fairly simple, and provides some payload verification (via the CRC).  However, it suffers from the ability to disambiguate arbitrary data in the payload from another message (think about trying to send <code class="language-plaintext highlighter-rouge">&gt;&gt;&gt;</code> in the message body).</p>

<ol>
  <li>cobs - This protocol exists to fix the problems with the px4 protocol above.  On the wire, it looks like:</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>COBS(|topic_ID|len_high|len_low|CRC_high|CRC_low|payload_start...payload_end|)0x0

</code></pre></div></div>

<p>The COBS “stuffing” maps the 0-255 range of the octets into 1-255, leaving 0 available as an end-of-frame marker; see https://en.wikipedia.org/wiki/Consistent_Overhead_Byte_Stuffing .  With this protocol, it is easy to jump into the “middle” of a stream, and only lose one message; it is also possible to tunnel COBS over COBS.  Unless compatibility with PX4 is required, this protocol should be preferred.</p>

<h2 id="yaml-config">YAML Config</h2>

<p>The YAML configuration file for the <code class="language-plaintext highlighter-rouge">ros2_to_serial_bridge</code> has a number of parameters that control how the bridge works:</p>

<ul>
  <li>
    <p>backend_comms - The type of comms layer to use for the “backend” communication (that is, the communication that is not ROS 2, which is considered frontend).  This is either ‘uart’ to use serial, or ‘udp’ to use a UDP socket.</p>
  </li>
  <li>
    <p>device - The /dev serial device to use to connect to the serial port.  This will be something like <code class="language-plaintext highlighter-rouge">/dev/ttyACM0</code> for USB-to-serial ports, or <code class="language-plaintext highlighter-rouge">/dev/pts/6</code> for “emulated” serial ports.  This is only used when backend_comms is ‘uart’.</p>
  </li>
  <li>
    <p>baudrate - The baudrate to configure on the above device.  To skip baudrate configuration, set this to 0.  This is only used when backend_comms is ‘uart’.</p>
  </li>
  <li>
    <p>udp_recv_port - The UDP port to use for receiving data.  This number must be between 1 and 65535 (inclusive).  This is only used when backend_comms is ‘udp’.</p>
  </li>
  <li>
    <p>udp_send_port - The UDP prot to use for sending data.  This number must be between 1 and 65535 (inclusive).  This is only used when backend_comms is ‘udp’.</p>
  </li>
  <li>
    <p>read_poll_ms - How many milliseconds to wait for new data to come in from the serial port.  Larger numbers can use slightly less CPU time, but affect the responsiveness of the program.  A value of 100 milliseconds is a good compromise between CPU time and responsiveness.</p>
  </li>
  <li>
    <p>ring_buffer_size - The number of bytes to use for the internal ring buffer for receiving data from the serial port.  Larger numbers allow larger messages to be taken from the serial port at the expense of memory.</p>
  </li>
  <li>
    <p>write_sleep_ms: How many milliseconds to sleep in between servicing ROS 2 callbacks.  Larger numbers will result in less CPU usage but also some latency in delivering data from ROS 2 to the serial port.  A value of 4 milliseconds is a good compromise between CPU time and latency.  It is not recommended to set this value larger than 100 milliseconds, as that can cause the application to feel sluggish.</p>
  </li>
  <li>
    <p>dynamic_serial_mapping_ms - How many milliseconds to wait on startup to get the dynamic ROS2-to-serial mapping from the serial port (see <a href="https://github.com/osrf/ros2_serial_example/tree/master/#Dynamic-topic-mapping">Dynamic topic mapping</a> for more information).  If less than 0, dynamic mapping is disabled and the topics specified in the YAML configuration file are used.  If exactly 0, the bridge will wait forever for the serial side to respond, but note that no data transfer of topic data will start happening until this succeeds.  If greater than 0, wait that many milliseconds for a response from the serial port before failing to start.  If this number is greater than or equal to 0, the topics configured in the YAML file are completely ignored.</p>
  </li>
  <li>
    <p>backend_protocol - One of ‘px4’ or ‘cobs’.  See <a href="https://github.com/osrf/ros2_serial_example/tree/master/#Serial-Framing-Protocol">Serial Framing Protocol</a> for more information.</p>
  </li>
  <li>
    <p>topics - The list of topics to use if dynamic_serial_mapping_ms is less than 0.  See <a href="https://github.com/osrf/ros2_serial_example/tree/master/#Static-YAML-configuration">Static YAML configuration</a> for more information.</p>
  </li>
</ul>

<h2 id="code-generation-for-the-bridge">Code generation for the bridge</h2>

<p>The way that the compile process generates code for the bridge is slightly complicated, so this section aims to shed some light on that process.</p>

<ol>
  <li>
    <p>The list of packages (<code class="language-plaintext highlighter-rouge">_packages</code>) and individual messages (<code class="language-plaintext highlighter-rouge">_msgs</code>) to generate type support for are collected by <a href="https://github.com/osrf/ros2_serial_example/tree/master/ros2_serial_example/CMakeLists.txt">CMakeLists.txt</a> and passed to a <a href="https://github.com/osrf/ros2_serial_example/tree/master/ros2_serial_example/generate_ros2_topics.py">python script</a> via <code class="language-plaintext highlighter-rouge">execute_process</code>.  At this point, the python script just returns the list of files that <em>would</em> be generated, but doesn’t do any generation (this is so we can properly add dependencies to later CMake steps).</p>
  </li>
  <li>
    <p>The <a href="https://github.com/osrf/ros2_serial_example/tree/master/ros2_serial_example/generate_ros2_topics.py">python script</a> that will eventually generate the type support via <code class="language-plaintext highlighter-rouge">add_custom_command</code> is created, with outputs corresponding to the list of files we got in the last step.</p>
  </li>
  <li>
    <p>The <a href="https://github.com/osrf/ros2_serial_example/tree/master/ros2_serial_example/CMakeLists.txt">CMakeLists.txt</a> collects the message package dependencies for the bridge.  The message package dependencies are a combination of the packages specified in <code class="language-plaintext highlighter-rouge">_packages</code> plus the implied packages from the individual messages (basically the part before the first /).</p>
  </li>
  <li>
    <p>Now the bridge targets are configured, where the bridge sources consist of the generated files from above plus any bridge-specific sources.  The dependencies for the bridge are also set to the dependencies generated above.</p>
  </li>
  <li>
    <p>When the <code class="language-plaintext highlighter-rouge">ros2_to_serial_bridge</code> target is built, it will first run the dependency to generate the message type support.  This runs the <a href="https://github.com/osrf/ros2_serial_example/tree/master/ros2_serial_example/generate_ros2_topics.py">python script</a>, which will actually generate the sources at this point.</p>
  </li>
  <li>
    <p>The rest of the compilation will happen, with the generated sources getting included into the build and into the final <code class="language-plaintext highlighter-rouge">ros2_to_serial_bridge</code> binary.</p>
  </li>
</ol>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros2_serial_example">ros2_serial_example</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-osrf-ros2_serial_example
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-osrf-ros2_serial_example" role="menuitem" tabindex="-1" href="/r/ros2_serial_example/github-osrf-ros2_serial_example" data="github-osrf-ros2_serial_example">
                    <span class="glyphicon glyphicon-star"></span>
                    github-osrf-ros2_serial_example
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros2_serial_example">ros2_serial_example</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-osrf-ros2_serial_example
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-osrf-ros2_serial_example" role="menuitem" tabindex="-1" href="/r/ros2_serial_example/github-osrf-ros2_serial_example" data="github-osrf-ros2_serial_example">
                    <span class="glyphicon glyphicon-star"></span>
                    github-osrf-ros2_serial_example
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros2_serial_example">ros2_serial_example</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-osrf-ros2_serial_example
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-osrf-ros2_serial_example" role="menuitem" tabindex="-1" href="/r/ros2_serial_example/github-osrf-ros2_serial_example" data="github-osrf-ros2_serial_example">
                    <span class="glyphicon glyphicon-star"></span>
                    github-osrf-ros2_serial_example
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>iron</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros2_serial_example">ros2_serial_example</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-osrf-ros2_serial_example
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-osrf-ros2_serial_example" role="menuitem" tabindex="-1" href="/r/ros2_serial_example/github-osrf-ros2_serial_example" data="github-osrf-ros2_serial_example">
                    <span class="glyphicon glyphicon-star"></span>
                    github-osrf-ros2_serial_example
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/osrf/ros2_serial_example.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
