<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/rc_genicam_api/github-roboception-rc_genicam_api/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">rc_genicam_api</li>
        <!--<li class="active">rc_genicam_api</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-primary" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-primary" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-primary" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-primary" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-default" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-primary" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class=" older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class=" older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class=" older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rc_genicam_api">rc_genicam_api</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/rc_genicam_api">rc_genicam_api</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-roboception-rc_genicam_api
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-roboception-rc_genicam_api" role="menuitem" tabindex="-1" href="/r/rc_genicam_api/github-roboception-rc_genicam_api" data="github-roboception-rc_genicam_api">
                    <span class="glyphicon glyphicon-star"></span>
                    github-roboception-rc_genicam_api
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Roboception convenience layer around GenICam and GigE Vision.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/roboception/rc_genicam_api.git">https://github.com/roboception/rc_genicam_api.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-12-02
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rc_genicam_api/#humble-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rc_genicam_api/#humble-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rc_genicam_api/#humble-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/rc_genicam_api">rc_genicam_api</a></td>
                    <td>2.7.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="roboception-genicam-convenience-layer">Roboception GenICam Convenience Layer</h1>

<p>This package combines the Roboception convenience layer for images with the
GenICam reference implementation and a GigE Vision transport layer. It is a
self contained package that permits configuration and image streaming of
GenICam / GigE Vision 2.0 compatible cameras like the Roboception rc_visard.
The API is based on C++ 11 and can be compiled under Linux and Windows.</p>

<p>This package also provides some tools that can be called from the command line
for discovering cameras, changing their configuration and streaming images.</p>

<p><strong>Prebuilt binaries can be downloaded on the <a href="https://github.com/roboception/rc_genicam_api/releases">releases</a> page.</strong></p>

<h2 id="contents">Contents</h2>

<ul>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#minimum-requirements">Minimum Requirements</a></li>
  <li>
<a href="https://github.com/roboception/rc_genicam_api/tree/master/#compiling-and-installing">Compiling and Installing</a>
    <ul>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#linux">Linux</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#windows">Windows</a></li>
    </ul>
  </li>
  <li>
<a href="https://github.com/roboception/rc_genicam_api/tree/master/#description-of-tools">Description of Tools</a>
    <ul>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_info">gc_info</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_config">gc_config</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_stream">gc_stream</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_pointcloud">gc_pointcloud</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_file">gc_file</a></li>
    </ul>
  </li>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#definition-of-device-id">Definition of Device ID</a></li>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#finding-the-transport-layer">Finding the Transport Layer</a></li>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#network-optimization-under-linux">Network Optimization under Linux</a></li>
</ul>

<h2 id="minimum-requirements">Minimum Requirements</h2>

<ul>
  <li>Linux x64 / i86: gcc &gt;= 4.8</li>
  <li>ARMhf: gcc &gt;= 4.9.4</li>
  <li>Linux AArch64: gcc &gt;= 5.4</li>
  <li>Windows 10: Visual Studio &gt;= VC140</li>
</ul>

<h2 id="compiling-and-installing">Compiling and Installing</h2>

<h3 id="linux">Linux</h3>

<p>Building follows the standard cmake build flow. Please make sure to set the
install path <em>before</em> compiling. Otherwise it can happen that the transport
layer is not found when calling the tools.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd &lt;main-directory&gt;
mkdir build
cd build
cmake -DCMAKE_INSTALL_PREFIX=&lt;install-directory&gt; ..
make
make install
</code></pre></div></div>

<h4 id="bash-completion">Bash completion</h4>

<p>To install bash completion, configure cmake with <code class="language-plaintext highlighter-rouge">-DINSTALL_COMPLETION=ON</code></p>

<h4 id="debian-package">Debian package</h4>

<p>A Debian package can be built with e.g.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd &lt;main-directory&gt;
mkdir build
cd build
cmake -DCMAKE_INSTALL_PREFIX=/usr ..
make
make package
</code></pre></div></div>

<h3 id="windows">Windows</h3>

<p>The main directory contains the script build_win.bat. Execute this script
in the <strong>Visual Studio Developer Command Prompt</strong> for building the package.
Alternatively, you can use cmake manually to generate a build project for
compilation with your favorite compiler.</p>

<p>NOTE: For using the libraries in own projects, define the symbol
<code class="language-plaintext highlighter-rouge">GENICAM_NO_AUTO_IMPLIB</code> in your project file to avoid linker problems with the
GenICam libraries.</p>

<h2 id="description-of-tools">Description of Tools</h2>

<p>The tools do not offer a graphical user interface. They are meant to be called
from a shell (e.g. Power Shell under Windows) or script and controlled by
command line parameters. Calling the tools without any parameters prints a help
text on the standard output.</p>

<p>NOTE: If any tool returns the error <code class="language-plaintext highlighter-rouge">No transport layers found in path ...</code>,
then read the section ‘Transport Layer’ below.</p>

<h3 id="gc_info">gc_info</h3>

<p>Lists all available systems (i.e. transport layers), interfaces and devices
with some information. If a device ID is given on the command line, then the
complete GenICam nodemap with all parameters and their current values are
listed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_info -h | -l | ([-o &lt;xml-output-file&gt;] [&lt;interface-id&gt;:]&lt;device-id&gt;[?&lt;node&gt;] [&lt;key&gt;=&lt;value&gt;] ...)

Provides information about GenICam transport layers, interfaces and devices.

Options:
-h   Prints help information and exits
-l   List all all available devices on all interfaces
-o   Filename to store XML description from specified device

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device
&lt;node&gt;         Optional name of category or parameter to be reported
&lt;key&gt;=&lt;value&gt;  Optional GenICam parameters to be changed in the given order before reporting

</code></pre></div></div>

<h3 id="gc_config">gc_config</h3>

<p>Can be used to list network specific information of GenICam compatible GigE
Vision 2 cameras. The network settings as well as all other parameters
provided via GenICam can be changed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_config -h | -l | ([&lt;interface-id&gt;:]&lt;device-id&gt; &lt;options&gt; ...)

Configuration of a GigE Vision device via GenICam.

-h             Prints help information and exits
-l             Lists all available GigE Vision devices

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device

Options:
-n &lt;id&gt;        Set user defined id
-d 1|0         Switch DHCP on or off
-p 1|0         Switch persistent IP on or off
-t 1|0         Switch precision time protocol (ptp) on or off
-i &lt;ip&gt;        Set persistent IP address
-s &lt;ip&gt;        Set subnet mask for persistent IP address
-g &lt;ip&gt;        Set default gateway for persistent IP address
--iponly       Show current IP of device instead of full summary
&lt;key&gt;=&lt;value&gt;  Optional GenICam parameters to be changed in the given order

</code></pre></div></div>

<h3 id="gc_stream">gc_stream</h3>

<p>This tool shows how to configure and stream images from a camera. GenICam
features can be configured directly from the command line. Images will be
stored in PGM or PPM format, depending on the image format.</p>

<p>Streams of the Roboception rc_visard can be enabled or disabled directly on
the command line by setting the appropriate GenICam parameters. The following
command enables intensity images, disables disparity images and stores 10
images:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_stream &lt;ID&gt; ComponentSelector=Intensity ComponentEnable=1 ComponentSelector=Disparity ComponentEnable=0 n=10

</code></pre></div></div>

<p>NOTE: Many image viewers can display PGM and PPM format. The sv tool of
<a href="https://github.com/roboception/cvkit">cvkit</a> can also be used.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_stream -h | [-f &lt;fmt&gt;] [-t] [&lt;interface-id&gt;:]&lt;device-id&gt; [n=&lt;n&gt;] [&lt;key&gt;=&lt;value&gt;] ...

Stores images from the specified device after applying the given optional GenICam parameters.

Options:
-h         Prints help information and exits
-t         Testmode, which does not store images and provides extended statistics
-f pnm|png Format for storing images. Default is pnm

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device
n=&lt;n&gt;          Optional number of images to be received (default is 1)
&lt;key&gt;=&lt;value&gt;  Optional GenICam parameters to be changed in the given order

</code></pre></div></div>

<h3 id="gc_pointcloud">gc_pointcloud</h3>

<p>This tool streams the left image, disparity, confidence and error from a
Roboception rc_visard sensor. It takes the first set of time synchronous
images, computes a colored point cloud and stores it in PLY ASCII format.
This tool demonstrates how to synchronize different images according to
their timestamps.</p>

<p>NOTE: PLY is a standard format for scanned 3D data that can be read by many
programs. The plyv tool of <a href="https://github.com/roboception/cvkit">cvkit</a> can
also be used for visualization.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_pointcloud -h | [-o &lt;output-filename&gt;] [&lt;interface-id&gt;:]&lt;device-id&gt;

Gets the first synchronized image set of the Roboception rc_visard, consisting
of left, disparity, confidence and error image, creates a point cloud and
stores it in ply ascii format.

Options:
-h        Prints help information and exits
-o &lt;file&gt; Set name of output file (default is 'rc_visard_&lt;timestamp&gt;.ply')

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device

</code></pre></div></div>

<h3 id="gc_file">gc_file</h3>

<p>This tool can be used to upload and download a file into the persistent user
space of an industrial camera.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tools/gc_file -h | [&lt;interface-id&gt;:]&lt;device-id&gt; -f | (&lt;device-file&gt; [-w|-r &lt;file&gt;])

Downloading or uploading a file via GenICam.

-h            Prints help information and exits
-f            Lists names of files on the device
-w &lt;file&gt;     Writes the given local file into the selected file on the device
-r &lt;file&gt;     Reads the selected file on the device and stores it as local file

The selected file is printed on std out if none of -f, -w and -r are given.

</code></pre></div></div>

<h2 id="definition-of-device-id">Definition of Device ID</h2>

<p>There are multiple ways of specifying an ID to identify a device.</p>

<ol>
  <li>
    <p>The serial number of the device serves as ID.
Example: <code class="language-plaintext highlighter-rouge">02911931</code></p>
  </li>
  <li>
    <p>The given ID can also be a user defined name. The user defined name is set
to <code class="language-plaintext highlighter-rouge">rc_visard</code> by default and can be changed with:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>gc_config &lt;ID&gt; -n &lt;user-defined-name&gt;
</code></pre></div>    </div>

    <p>This way of identifying a device can fail if there is more than one device
with the same name. No device is returned in this case.</p>

    <p>If the user defined name contains one or more colons, it must be preceded by
a colon (e.g. <code class="language-plaintext highlighter-rouge">:my:name</code>) or an interface ID (see below).</p>
  </li>
  <li>
    <p>The device ID of the GenTL producer (see <code class="language-plaintext highlighter-rouge">Transport Layer</code> section below)
may also be used. This ID is unique, but not persistent as it depends on the
implementation of the GenTL producer. Thus, it can change after software
updates. It often encodes the MAC address of the sensor in some way.</p>

    <p>Example: <code class="language-plaintext highlighter-rouge">00_14_2d_2c_6e_bb</code></p>
  </li>
</ol>

<p>All three options can be seen in the output of <code class="language-plaintext highlighter-rouge">gc_config -l</code>.</p>

<h3 id="optional-interface-id-prefix">Optional Interface ID prefix</h3>

<p>If the given ID contains a colon (i.e. <code class="language-plaintext highlighter-rouge">:</code>), the part before the (first)
colon is interpreted as interface ID and the part after the first colon is
treated as device ID. This is the format that <code class="language-plaintext highlighter-rouge">gc_config -l</code> shows. A device
with the given ID is only sought on the specified interface. This can be
useful if there are several ways to reach a device from a host computer,
e.g. via wireless and wired network connection, but a certain connection
type (e.g. wired) is preferred due to higher bandwidth and lower latency.</p>

<p>Examples: <code class="language-plaintext highlighter-rouge">eth0:00_14_2d_2c_6e_bb</code>, <code class="language-plaintext highlighter-rouge">eth1:02911931</code> or <code class="language-plaintext highlighter-rouge">wlan0:rc_visard</code></p>

<p>A colon at the beginning of the ID effectively defines an empty interface ID
which triggers looking on all interfaces.</p>

<p>If the given ID does not contain a colon, the ID is interpreted as the
device ID itself and is sought throughout all interfaces as well.</p>

<h2 id="finding-the-transport-layer">Finding the Transport Layer</h2>

<p>The communication to the device is done through a so called transport layer
(i.e. GenTL producer version 1.5 or higher). This package provides and installs
a default transport layer that implements the GigE Vision protocol for
connecting to the Roboception rc_visard. According to the GenICam
specification, the transport layer has the suffix ‘.cti’. The environment
variable <code class="language-plaintext highlighter-rouge">GENICAM_GENTL32_PATH</code> (for 32 bit applications) or <code class="language-plaintext highlighter-rouge">GENICAM_GENTL64_PATH</code>
(for 64 bit applications) must contain a list of paths that contain transport
layers. All transport layers are provided as systems to the application.</p>

<p>For convenience, if the environment variable is not defined or empty, it is
internally defined with the install path of the provided transport layer (as
known at compile time!). If the package is not installed, the install path is
changed after compilation or the package is moved to another location after
installation, then the transport layer may not be found. In this case, the
tools shows an error like e.g.:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'No transport layers found in path /usr/lib/rc_genicam_api'
</code></pre></div></div>

<p>In this case, the corresponding environment variable (see above) must be set to
the directory in which the transport layer (i.e. file with suffix ‘.cti’)
resides.</p>

<p>Under Windows, as second fall back additionally to the install path, the
directory of the executable is also added to the environment variable. Thus,
the install directory can be moved, as long as the cti file stays in the same
directory as the executable.</p>

<h2 id="network-optimization-under-linux">Network Optimization under Linux</h2>

<p>When images are received at a lower rate than set/exepected the most
likely problem is that this (user space) library cannot read the many UDP
packets fast enough resulting in incomplete image buffers.</p>

<h3 id="test-script">Test Script</h3>

<p>The <code class="language-plaintext highlighter-rouge">net_perf_check.sh</code> script performs some simple checks and should be run
while or after streaming images via GigE Vision.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./net_perf_check.sh --help
</code></pre></div></div>

<h3 id="jumbo-frames">Jumbo Frames</h3>

<p>First of all increasing the UDP packet size (using jubo frames) is strongly
recommended! Increase the MTU of your network interface to 9000, e.g.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo ifconfig eth0 mtu 9000
</code></pre></div></div>

<p>Also make sure that all network devices/switches between your host and the
sensor support this.</p>

<h3 id="sysctl-settings">sysctl settings</h3>

<p>There are several Linux sysctl options that can be modified to increase
performance for the GigE Vision usecase.</p>

<p>These values can be changed during runtime with <code class="language-plaintext highlighter-rouge">sysctl</code> or written to
<code class="language-plaintext highlighter-rouge">/etc/sysctl.conf</code> for persistence across reboots.</p>

<h4 id="rmem_max">rmem_max</h4>

<p>If the number of UDP receive buffer errors increases while streaming, increasing the
socket receive buffer size usually fixes the problem.</p>

<p>Check the errors with <code class="language-plaintext highlighter-rouge">net_perf_check.sh</code> or</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>netstat -us | grep errors
</code></pre></div></div>

<p>Increase max receive buffer size:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl -w net.core.rmem_max=33554432
</code></pre></div></div>

<h4 id="softirq">softirq</h4>

<p>Changing these values is usually not necessary, but can help if the kernel
is already dropping packets.</p>

<p>Check with <code class="language-plaintext highlighter-rouge">net_perf_check.sh</code> and increase the values if needed:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl -w net.core.netdev_max_backlog=2000
sudo sysctl -w net.core.netdev_budget=600
</code></pre></div></div>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rc_genicam_api">rc_genicam_api</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/rc_genicam_api">rc_genicam_api</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-roboception-rc_genicam_api
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-roboception-rc_genicam_api" role="menuitem" tabindex="-1" href="/r/rc_genicam_api/github-roboception-rc_genicam_api" data="github-roboception-rc_genicam_api">
                    <span class="glyphicon glyphicon-star"></span>
                    github-roboception-rc_genicam_api
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Roboception convenience layer around GenICam and GigE Vision.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/roboception/rc_genicam_api.git">https://github.com/roboception/rc_genicam_api.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-12-02
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rc_genicam_api/#jazzy-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rc_genicam_api/#jazzy-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rc_genicam_api/#jazzy-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/rc_genicam_api">rc_genicam_api</a></td>
                    <td>2.7.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="roboception-genicam-convenience-layer">Roboception GenICam Convenience Layer</h1>

<p>This package combines the Roboception convenience layer for images with the
GenICam reference implementation and a GigE Vision transport layer. It is a
self contained package that permits configuration and image streaming of
GenICam / GigE Vision 2.0 compatible cameras like the Roboception rc_visard.
The API is based on C++ 11 and can be compiled under Linux and Windows.</p>

<p>This package also provides some tools that can be called from the command line
for discovering cameras, changing their configuration and streaming images.</p>

<p><strong>Prebuilt binaries can be downloaded on the <a href="https://github.com/roboception/rc_genicam_api/releases">releases</a> page.</strong></p>

<h2 id="contents">Contents</h2>

<ul>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#minimum-requirements">Minimum Requirements</a></li>
  <li>
<a href="https://github.com/roboception/rc_genicam_api/tree/master/#compiling-and-installing">Compiling and Installing</a>
    <ul>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#linux">Linux</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#windows">Windows</a></li>
    </ul>
  </li>
  <li>
<a href="https://github.com/roboception/rc_genicam_api/tree/master/#description-of-tools">Description of Tools</a>
    <ul>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_info">gc_info</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_config">gc_config</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_stream">gc_stream</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_pointcloud">gc_pointcloud</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_file">gc_file</a></li>
    </ul>
  </li>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#definition-of-device-id">Definition of Device ID</a></li>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#finding-the-transport-layer">Finding the Transport Layer</a></li>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#network-optimization-under-linux">Network Optimization under Linux</a></li>
</ul>

<h2 id="minimum-requirements">Minimum Requirements</h2>

<ul>
  <li>Linux x64 / i86: gcc &gt;= 4.8</li>
  <li>ARMhf: gcc &gt;= 4.9.4</li>
  <li>Linux AArch64: gcc &gt;= 5.4</li>
  <li>Windows 10: Visual Studio &gt;= VC140</li>
</ul>

<h2 id="compiling-and-installing">Compiling and Installing</h2>

<h3 id="linux">Linux</h3>

<p>Building follows the standard cmake build flow. Please make sure to set the
install path <em>before</em> compiling. Otherwise it can happen that the transport
layer is not found when calling the tools.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd &lt;main-directory&gt;
mkdir build
cd build
cmake -DCMAKE_INSTALL_PREFIX=&lt;install-directory&gt; ..
make
make install
</code></pre></div></div>

<h4 id="bash-completion">Bash completion</h4>

<p>To install bash completion, configure cmake with <code class="language-plaintext highlighter-rouge">-DINSTALL_COMPLETION=ON</code></p>

<h4 id="debian-package">Debian package</h4>

<p>A Debian package can be built with e.g.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd &lt;main-directory&gt;
mkdir build
cd build
cmake -DCMAKE_INSTALL_PREFIX=/usr ..
make
make package
</code></pre></div></div>

<h3 id="windows">Windows</h3>

<p>The main directory contains the script build_win.bat. Execute this script
in the <strong>Visual Studio Developer Command Prompt</strong> for building the package.
Alternatively, you can use cmake manually to generate a build project for
compilation with your favorite compiler.</p>

<p>NOTE: For using the libraries in own projects, define the symbol
<code class="language-plaintext highlighter-rouge">GENICAM_NO_AUTO_IMPLIB</code> in your project file to avoid linker problems with the
GenICam libraries.</p>

<h2 id="description-of-tools">Description of Tools</h2>

<p>The tools do not offer a graphical user interface. They are meant to be called
from a shell (e.g. Power Shell under Windows) or script and controlled by
command line parameters. Calling the tools without any parameters prints a help
text on the standard output.</p>

<p>NOTE: If any tool returns the error <code class="language-plaintext highlighter-rouge">No transport layers found in path ...</code>,
then read the section ‘Transport Layer’ below.</p>

<h3 id="gc_info">gc_info</h3>

<p>Lists all available systems (i.e. transport layers), interfaces and devices
with some information. If a device ID is given on the command line, then the
complete GenICam nodemap with all parameters and their current values are
listed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_info -h | -l | ([-o &lt;xml-output-file&gt;] [&lt;interface-id&gt;:]&lt;device-id&gt;[?&lt;node&gt;] [&lt;key&gt;=&lt;value&gt;] ...)

Provides information about GenICam transport layers, interfaces and devices.

Options:
-h   Prints help information and exits
-l   List all all available devices on all interfaces
-o   Filename to store XML description from specified device

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device
&lt;node&gt;         Optional name of category or parameter to be reported
&lt;key&gt;=&lt;value&gt;  Optional GenICam parameters to be changed in the given order before reporting

</code></pre></div></div>

<h3 id="gc_config">gc_config</h3>

<p>Can be used to list network specific information of GenICam compatible GigE
Vision 2 cameras. The network settings as well as all other parameters
provided via GenICam can be changed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_config -h | -l | ([&lt;interface-id&gt;:]&lt;device-id&gt; &lt;options&gt; ...)

Configuration of a GigE Vision device via GenICam.

-h             Prints help information and exits
-l             Lists all available GigE Vision devices

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device

Options:
-n &lt;id&gt;        Set user defined id
-d 1|0         Switch DHCP on or off
-p 1|0         Switch persistent IP on or off
-t 1|0         Switch precision time protocol (ptp) on or off
-i &lt;ip&gt;        Set persistent IP address
-s &lt;ip&gt;        Set subnet mask for persistent IP address
-g &lt;ip&gt;        Set default gateway for persistent IP address
--iponly       Show current IP of device instead of full summary
&lt;key&gt;=&lt;value&gt;  Optional GenICam parameters to be changed in the given order

</code></pre></div></div>

<h3 id="gc_stream">gc_stream</h3>

<p>This tool shows how to configure and stream images from a camera. GenICam
features can be configured directly from the command line. Images will be
stored in PGM or PPM format, depending on the image format.</p>

<p>Streams of the Roboception rc_visard can be enabled or disabled directly on
the command line by setting the appropriate GenICam parameters. The following
command enables intensity images, disables disparity images and stores 10
images:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_stream &lt;ID&gt; ComponentSelector=Intensity ComponentEnable=1 ComponentSelector=Disparity ComponentEnable=0 n=10

</code></pre></div></div>

<p>NOTE: Many image viewers can display PGM and PPM format. The sv tool of
<a href="https://github.com/roboception/cvkit">cvkit</a> can also be used.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_stream -h | [-f &lt;fmt&gt;] [-t] [&lt;interface-id&gt;:]&lt;device-id&gt; [n=&lt;n&gt;] [&lt;key&gt;=&lt;value&gt;] ...

Stores images from the specified device after applying the given optional GenICam parameters.

Options:
-h         Prints help information and exits
-t         Testmode, which does not store images and provides extended statistics
-f pnm|png Format for storing images. Default is pnm

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device
n=&lt;n&gt;          Optional number of images to be received (default is 1)
&lt;key&gt;=&lt;value&gt;  Optional GenICam parameters to be changed in the given order

</code></pre></div></div>

<h3 id="gc_pointcloud">gc_pointcloud</h3>

<p>This tool streams the left image, disparity, confidence and error from a
Roboception rc_visard sensor. It takes the first set of time synchronous
images, computes a colored point cloud and stores it in PLY ASCII format.
This tool demonstrates how to synchronize different images according to
their timestamps.</p>

<p>NOTE: PLY is a standard format for scanned 3D data that can be read by many
programs. The plyv tool of <a href="https://github.com/roboception/cvkit">cvkit</a> can
also be used for visualization.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_pointcloud -h | [-o &lt;output-filename&gt;] [&lt;interface-id&gt;:]&lt;device-id&gt;

Gets the first synchronized image set of the Roboception rc_visard, consisting
of left, disparity, confidence and error image, creates a point cloud and
stores it in ply ascii format.

Options:
-h        Prints help information and exits
-o &lt;file&gt; Set name of output file (default is 'rc_visard_&lt;timestamp&gt;.ply')

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device

</code></pre></div></div>

<h3 id="gc_file">gc_file</h3>

<p>This tool can be used to upload and download a file into the persistent user
space of an industrial camera.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tools/gc_file -h | [&lt;interface-id&gt;:]&lt;device-id&gt; -f | (&lt;device-file&gt; [-w|-r &lt;file&gt;])

Downloading or uploading a file via GenICam.

-h            Prints help information and exits
-f            Lists names of files on the device
-w &lt;file&gt;     Writes the given local file into the selected file on the device
-r &lt;file&gt;     Reads the selected file on the device and stores it as local file

The selected file is printed on std out if none of -f, -w and -r are given.

</code></pre></div></div>

<h2 id="definition-of-device-id">Definition of Device ID</h2>

<p>There are multiple ways of specifying an ID to identify a device.</p>

<ol>
  <li>
    <p>The serial number of the device serves as ID.
Example: <code class="language-plaintext highlighter-rouge">02911931</code></p>
  </li>
  <li>
    <p>The given ID can also be a user defined name. The user defined name is set
to <code class="language-plaintext highlighter-rouge">rc_visard</code> by default and can be changed with:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>gc_config &lt;ID&gt; -n &lt;user-defined-name&gt;
</code></pre></div>    </div>

    <p>This way of identifying a device can fail if there is more than one device
with the same name. No device is returned in this case.</p>

    <p>If the user defined name contains one or more colons, it must be preceded by
a colon (e.g. <code class="language-plaintext highlighter-rouge">:my:name</code>) or an interface ID (see below).</p>
  </li>
  <li>
    <p>The device ID of the GenTL producer (see <code class="language-plaintext highlighter-rouge">Transport Layer</code> section below)
may also be used. This ID is unique, but not persistent as it depends on the
implementation of the GenTL producer. Thus, it can change after software
updates. It often encodes the MAC address of the sensor in some way.</p>

    <p>Example: <code class="language-plaintext highlighter-rouge">00_14_2d_2c_6e_bb</code></p>
  </li>
</ol>

<p>All three options can be seen in the output of <code class="language-plaintext highlighter-rouge">gc_config -l</code>.</p>

<h3 id="optional-interface-id-prefix">Optional Interface ID prefix</h3>

<p>If the given ID contains a colon (i.e. <code class="language-plaintext highlighter-rouge">:</code>), the part before the (first)
colon is interpreted as interface ID and the part after the first colon is
treated as device ID. This is the format that <code class="language-plaintext highlighter-rouge">gc_config -l</code> shows. A device
with the given ID is only sought on the specified interface. This can be
useful if there are several ways to reach a device from a host computer,
e.g. via wireless and wired network connection, but a certain connection
type (e.g. wired) is preferred due to higher bandwidth and lower latency.</p>

<p>Examples: <code class="language-plaintext highlighter-rouge">eth0:00_14_2d_2c_6e_bb</code>, <code class="language-plaintext highlighter-rouge">eth1:02911931</code> or <code class="language-plaintext highlighter-rouge">wlan0:rc_visard</code></p>

<p>A colon at the beginning of the ID effectively defines an empty interface ID
which triggers looking on all interfaces.</p>

<p>If the given ID does not contain a colon, the ID is interpreted as the
device ID itself and is sought throughout all interfaces as well.</p>

<h2 id="finding-the-transport-layer">Finding the Transport Layer</h2>

<p>The communication to the device is done through a so called transport layer
(i.e. GenTL producer version 1.5 or higher). This package provides and installs
a default transport layer that implements the GigE Vision protocol for
connecting to the Roboception rc_visard. According to the GenICam
specification, the transport layer has the suffix ‘.cti’. The environment
variable <code class="language-plaintext highlighter-rouge">GENICAM_GENTL32_PATH</code> (for 32 bit applications) or <code class="language-plaintext highlighter-rouge">GENICAM_GENTL64_PATH</code>
(for 64 bit applications) must contain a list of paths that contain transport
layers. All transport layers are provided as systems to the application.</p>

<p>For convenience, if the environment variable is not defined or empty, it is
internally defined with the install path of the provided transport layer (as
known at compile time!). If the package is not installed, the install path is
changed after compilation or the package is moved to another location after
installation, then the transport layer may not be found. In this case, the
tools shows an error like e.g.:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'No transport layers found in path /usr/lib/rc_genicam_api'
</code></pre></div></div>

<p>In this case, the corresponding environment variable (see above) must be set to
the directory in which the transport layer (i.e. file with suffix ‘.cti’)
resides.</p>

<p>Under Windows, as second fall back additionally to the install path, the
directory of the executable is also added to the environment variable. Thus,
the install directory can be moved, as long as the cti file stays in the same
directory as the executable.</p>

<h2 id="network-optimization-under-linux">Network Optimization under Linux</h2>

<p>When images are received at a lower rate than set/exepected the most
likely problem is that this (user space) library cannot read the many UDP
packets fast enough resulting in incomplete image buffers.</p>

<h3 id="test-script">Test Script</h3>

<p>The <code class="language-plaintext highlighter-rouge">net_perf_check.sh</code> script performs some simple checks and should be run
while or after streaming images via GigE Vision.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./net_perf_check.sh --help
</code></pre></div></div>

<h3 id="jumbo-frames">Jumbo Frames</h3>

<p>First of all increasing the UDP packet size (using jubo frames) is strongly
recommended! Increase the MTU of your network interface to 9000, e.g.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo ifconfig eth0 mtu 9000
</code></pre></div></div>

<p>Also make sure that all network devices/switches between your host and the
sensor support this.</p>

<h3 id="sysctl-settings">sysctl settings</h3>

<p>There are several Linux sysctl options that can be modified to increase
performance for the GigE Vision usecase.</p>

<p>These values can be changed during runtime with <code class="language-plaintext highlighter-rouge">sysctl</code> or written to
<code class="language-plaintext highlighter-rouge">/etc/sysctl.conf</code> for persistence across reboots.</p>

<h4 id="rmem_max">rmem_max</h4>

<p>If the number of UDP receive buffer errors increases while streaming, increasing the
socket receive buffer size usually fixes the problem.</p>

<p>Check the errors with <code class="language-plaintext highlighter-rouge">net_perf_check.sh</code> or</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>netstat -us | grep errors
</code></pre></div></div>

<p>Increase max receive buffer size:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl -w net.core.rmem_max=33554432
</code></pre></div></div>

<h4 id="softirq">softirq</h4>

<p>Changing these values is usually not necessary, but can help if the kernel
is already dropping packets.</p>

<p>Check with <code class="language-plaintext highlighter-rouge">net_perf_check.sh</code> and increase the values if needed:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl -w net.core.netdev_max_backlog=2000
sudo sysctl -w net.core.netdev_budget=600
</code></pre></div></div>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rc_genicam_api">rc_genicam_api</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/rc_genicam_api">rc_genicam_api</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-roboception-rc_genicam_api
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-roboception-rc_genicam_api" role="menuitem" tabindex="-1" href="/r/rc_genicam_api/github-roboception-rc_genicam_api" data="github-roboception-rc_genicam_api">
                    <span class="glyphicon glyphicon-star"></span>
                    github-roboception-rc_genicam_api
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Roboception convenience layer around GenICam and GigE Vision.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/roboception/rc_genicam_api.git">https://github.com/roboception/rc_genicam_api.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-12-02
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rc_genicam_api/#kilted-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rc_genicam_api/#kilted-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rc_genicam_api/#kilted-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/rc_genicam_api">rc_genicam_api</a></td>
                    <td>2.7.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="roboception-genicam-convenience-layer">Roboception GenICam Convenience Layer</h1>

<p>This package combines the Roboception convenience layer for images with the
GenICam reference implementation and a GigE Vision transport layer. It is a
self contained package that permits configuration and image streaming of
GenICam / GigE Vision 2.0 compatible cameras like the Roboception rc_visard.
The API is based on C++ 11 and can be compiled under Linux and Windows.</p>

<p>This package also provides some tools that can be called from the command line
for discovering cameras, changing their configuration and streaming images.</p>

<p><strong>Prebuilt binaries can be downloaded on the <a href="https://github.com/roboception/rc_genicam_api/releases">releases</a> page.</strong></p>

<h2 id="contents">Contents</h2>

<ul>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#minimum-requirements">Minimum Requirements</a></li>
  <li>
<a href="https://github.com/roboception/rc_genicam_api/tree/master/#compiling-and-installing">Compiling and Installing</a>
    <ul>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#linux">Linux</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#windows">Windows</a></li>
    </ul>
  </li>
  <li>
<a href="https://github.com/roboception/rc_genicam_api/tree/master/#description-of-tools">Description of Tools</a>
    <ul>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_info">gc_info</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_config">gc_config</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_stream">gc_stream</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_pointcloud">gc_pointcloud</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_file">gc_file</a></li>
    </ul>
  </li>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#definition-of-device-id">Definition of Device ID</a></li>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#finding-the-transport-layer">Finding the Transport Layer</a></li>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#network-optimization-under-linux">Network Optimization under Linux</a></li>
</ul>

<h2 id="minimum-requirements">Minimum Requirements</h2>

<ul>
  <li>Linux x64 / i86: gcc &gt;= 4.8</li>
  <li>ARMhf: gcc &gt;= 4.9.4</li>
  <li>Linux AArch64: gcc &gt;= 5.4</li>
  <li>Windows 10: Visual Studio &gt;= VC140</li>
</ul>

<h2 id="compiling-and-installing">Compiling and Installing</h2>

<h3 id="linux">Linux</h3>

<p>Building follows the standard cmake build flow. Please make sure to set the
install path <em>before</em> compiling. Otherwise it can happen that the transport
layer is not found when calling the tools.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd &lt;main-directory&gt;
mkdir build
cd build
cmake -DCMAKE_INSTALL_PREFIX=&lt;install-directory&gt; ..
make
make install
</code></pre></div></div>

<h4 id="bash-completion">Bash completion</h4>

<p>To install bash completion, configure cmake with <code class="language-plaintext highlighter-rouge">-DINSTALL_COMPLETION=ON</code></p>

<h4 id="debian-package">Debian package</h4>

<p>A Debian package can be built with e.g.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd &lt;main-directory&gt;
mkdir build
cd build
cmake -DCMAKE_INSTALL_PREFIX=/usr ..
make
make package
</code></pre></div></div>

<h3 id="windows">Windows</h3>

<p>The main directory contains the script build_win.bat. Execute this script
in the <strong>Visual Studio Developer Command Prompt</strong> for building the package.
Alternatively, you can use cmake manually to generate a build project for
compilation with your favorite compiler.</p>

<p>NOTE: For using the libraries in own projects, define the symbol
<code class="language-plaintext highlighter-rouge">GENICAM_NO_AUTO_IMPLIB</code> in your project file to avoid linker problems with the
GenICam libraries.</p>

<h2 id="description-of-tools">Description of Tools</h2>

<p>The tools do not offer a graphical user interface. They are meant to be called
from a shell (e.g. Power Shell under Windows) or script and controlled by
command line parameters. Calling the tools without any parameters prints a help
text on the standard output.</p>

<p>NOTE: If any tool returns the error <code class="language-plaintext highlighter-rouge">No transport layers found in path ...</code>,
then read the section ‘Transport Layer’ below.</p>

<h3 id="gc_info">gc_info</h3>

<p>Lists all available systems (i.e. transport layers), interfaces and devices
with some information. If a device ID is given on the command line, then the
complete GenICam nodemap with all parameters and their current values are
listed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_info -h | -l | ([-o &lt;xml-output-file&gt;] [&lt;interface-id&gt;:]&lt;device-id&gt;[?&lt;node&gt;] [&lt;key&gt;=&lt;value&gt;] ...)

Provides information about GenICam transport layers, interfaces and devices.

Options:
-h   Prints help information and exits
-l   List all all available devices on all interfaces
-o   Filename to store XML description from specified device

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device
&lt;node&gt;         Optional name of category or parameter to be reported
&lt;key&gt;=&lt;value&gt;  Optional GenICam parameters to be changed in the given order before reporting

</code></pre></div></div>

<h3 id="gc_config">gc_config</h3>

<p>Can be used to list network specific information of GenICam compatible GigE
Vision 2 cameras. The network settings as well as all other parameters
provided via GenICam can be changed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_config -h | -l | ([&lt;interface-id&gt;:]&lt;device-id&gt; &lt;options&gt; ...)

Configuration of a GigE Vision device via GenICam.

-h             Prints help information and exits
-l             Lists all available GigE Vision devices

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device

Options:
-n &lt;id&gt;        Set user defined id
-d 1|0         Switch DHCP on or off
-p 1|0         Switch persistent IP on or off
-t 1|0         Switch precision time protocol (ptp) on or off
-i &lt;ip&gt;        Set persistent IP address
-s &lt;ip&gt;        Set subnet mask for persistent IP address
-g &lt;ip&gt;        Set default gateway for persistent IP address
--iponly       Show current IP of device instead of full summary
&lt;key&gt;=&lt;value&gt;  Optional GenICam parameters to be changed in the given order

</code></pre></div></div>

<h3 id="gc_stream">gc_stream</h3>

<p>This tool shows how to configure and stream images from a camera. GenICam
features can be configured directly from the command line. Images will be
stored in PGM or PPM format, depending on the image format.</p>

<p>Streams of the Roboception rc_visard can be enabled or disabled directly on
the command line by setting the appropriate GenICam parameters. The following
command enables intensity images, disables disparity images and stores 10
images:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_stream &lt;ID&gt; ComponentSelector=Intensity ComponentEnable=1 ComponentSelector=Disparity ComponentEnable=0 n=10

</code></pre></div></div>

<p>NOTE: Many image viewers can display PGM and PPM format. The sv tool of
<a href="https://github.com/roboception/cvkit">cvkit</a> can also be used.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_stream -h | [-f &lt;fmt&gt;] [-t] [&lt;interface-id&gt;:]&lt;device-id&gt; [n=&lt;n&gt;] [&lt;key&gt;=&lt;value&gt;] ...

Stores images from the specified device after applying the given optional GenICam parameters.

Options:
-h         Prints help information and exits
-t         Testmode, which does not store images and provides extended statistics
-f pnm|png Format for storing images. Default is pnm

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device
n=&lt;n&gt;          Optional number of images to be received (default is 1)
&lt;key&gt;=&lt;value&gt;  Optional GenICam parameters to be changed in the given order

</code></pre></div></div>

<h3 id="gc_pointcloud">gc_pointcloud</h3>

<p>This tool streams the left image, disparity, confidence and error from a
Roboception rc_visard sensor. It takes the first set of time synchronous
images, computes a colored point cloud and stores it in PLY ASCII format.
This tool demonstrates how to synchronize different images according to
their timestamps.</p>

<p>NOTE: PLY is a standard format for scanned 3D data that can be read by many
programs. The plyv tool of <a href="https://github.com/roboception/cvkit">cvkit</a> can
also be used for visualization.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_pointcloud -h | [-o &lt;output-filename&gt;] [&lt;interface-id&gt;:]&lt;device-id&gt;

Gets the first synchronized image set of the Roboception rc_visard, consisting
of left, disparity, confidence and error image, creates a point cloud and
stores it in ply ascii format.

Options:
-h        Prints help information and exits
-o &lt;file&gt; Set name of output file (default is 'rc_visard_&lt;timestamp&gt;.ply')

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device

</code></pre></div></div>

<h3 id="gc_file">gc_file</h3>

<p>This tool can be used to upload and download a file into the persistent user
space of an industrial camera.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tools/gc_file -h | [&lt;interface-id&gt;:]&lt;device-id&gt; -f | (&lt;device-file&gt; [-w|-r &lt;file&gt;])

Downloading or uploading a file via GenICam.

-h            Prints help information and exits
-f            Lists names of files on the device
-w &lt;file&gt;     Writes the given local file into the selected file on the device
-r &lt;file&gt;     Reads the selected file on the device and stores it as local file

The selected file is printed on std out if none of -f, -w and -r are given.

</code></pre></div></div>

<h2 id="definition-of-device-id">Definition of Device ID</h2>

<p>There are multiple ways of specifying an ID to identify a device.</p>

<ol>
  <li>
    <p>The serial number of the device serves as ID.
Example: <code class="language-plaintext highlighter-rouge">02911931</code></p>
  </li>
  <li>
    <p>The given ID can also be a user defined name. The user defined name is set
to <code class="language-plaintext highlighter-rouge">rc_visard</code> by default and can be changed with:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>gc_config &lt;ID&gt; -n &lt;user-defined-name&gt;
</code></pre></div>    </div>

    <p>This way of identifying a device can fail if there is more than one device
with the same name. No device is returned in this case.</p>

    <p>If the user defined name contains one or more colons, it must be preceded by
a colon (e.g. <code class="language-plaintext highlighter-rouge">:my:name</code>) or an interface ID (see below).</p>
  </li>
  <li>
    <p>The device ID of the GenTL producer (see <code class="language-plaintext highlighter-rouge">Transport Layer</code> section below)
may also be used. This ID is unique, but not persistent as it depends on the
implementation of the GenTL producer. Thus, it can change after software
updates. It often encodes the MAC address of the sensor in some way.</p>

    <p>Example: <code class="language-plaintext highlighter-rouge">00_14_2d_2c_6e_bb</code></p>
  </li>
</ol>

<p>All three options can be seen in the output of <code class="language-plaintext highlighter-rouge">gc_config -l</code>.</p>

<h3 id="optional-interface-id-prefix">Optional Interface ID prefix</h3>

<p>If the given ID contains a colon (i.e. <code class="language-plaintext highlighter-rouge">:</code>), the part before the (first)
colon is interpreted as interface ID and the part after the first colon is
treated as device ID. This is the format that <code class="language-plaintext highlighter-rouge">gc_config -l</code> shows. A device
with the given ID is only sought on the specified interface. This can be
useful if there are several ways to reach a device from a host computer,
e.g. via wireless and wired network connection, but a certain connection
type (e.g. wired) is preferred due to higher bandwidth and lower latency.</p>

<p>Examples: <code class="language-plaintext highlighter-rouge">eth0:00_14_2d_2c_6e_bb</code>, <code class="language-plaintext highlighter-rouge">eth1:02911931</code> or <code class="language-plaintext highlighter-rouge">wlan0:rc_visard</code></p>

<p>A colon at the beginning of the ID effectively defines an empty interface ID
which triggers looking on all interfaces.</p>

<p>If the given ID does not contain a colon, the ID is interpreted as the
device ID itself and is sought throughout all interfaces as well.</p>

<h2 id="finding-the-transport-layer">Finding the Transport Layer</h2>

<p>The communication to the device is done through a so called transport layer
(i.e. GenTL producer version 1.5 or higher). This package provides and installs
a default transport layer that implements the GigE Vision protocol for
connecting to the Roboception rc_visard. According to the GenICam
specification, the transport layer has the suffix ‘.cti’. The environment
variable <code class="language-plaintext highlighter-rouge">GENICAM_GENTL32_PATH</code> (for 32 bit applications) or <code class="language-plaintext highlighter-rouge">GENICAM_GENTL64_PATH</code>
(for 64 bit applications) must contain a list of paths that contain transport
layers. All transport layers are provided as systems to the application.</p>

<p>For convenience, if the environment variable is not defined or empty, it is
internally defined with the install path of the provided transport layer (as
known at compile time!). If the package is not installed, the install path is
changed after compilation or the package is moved to another location after
installation, then the transport layer may not be found. In this case, the
tools shows an error like e.g.:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'No transport layers found in path /usr/lib/rc_genicam_api'
</code></pre></div></div>

<p>In this case, the corresponding environment variable (see above) must be set to
the directory in which the transport layer (i.e. file with suffix ‘.cti’)
resides.</p>

<p>Under Windows, as second fall back additionally to the install path, the
directory of the executable is also added to the environment variable. Thus,
the install directory can be moved, as long as the cti file stays in the same
directory as the executable.</p>

<h2 id="network-optimization-under-linux">Network Optimization under Linux</h2>

<p>When images are received at a lower rate than set/exepected the most
likely problem is that this (user space) library cannot read the many UDP
packets fast enough resulting in incomplete image buffers.</p>

<h3 id="test-script">Test Script</h3>

<p>The <code class="language-plaintext highlighter-rouge">net_perf_check.sh</code> script performs some simple checks and should be run
while or after streaming images via GigE Vision.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./net_perf_check.sh --help
</code></pre></div></div>

<h3 id="jumbo-frames">Jumbo Frames</h3>

<p>First of all increasing the UDP packet size (using jubo frames) is strongly
recommended! Increase the MTU of your network interface to 9000, e.g.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo ifconfig eth0 mtu 9000
</code></pre></div></div>

<p>Also make sure that all network devices/switches between your host and the
sensor support this.</p>

<h3 id="sysctl-settings">sysctl settings</h3>

<p>There are several Linux sysctl options that can be modified to increase
performance for the GigE Vision usecase.</p>

<p>These values can be changed during runtime with <code class="language-plaintext highlighter-rouge">sysctl</code> or written to
<code class="language-plaintext highlighter-rouge">/etc/sysctl.conf</code> for persistence across reboots.</p>

<h4 id="rmem_max">rmem_max</h4>

<p>If the number of UDP receive buffer errors increases while streaming, increasing the
socket receive buffer size usually fixes the problem.</p>

<p>Check the errors with <code class="language-plaintext highlighter-rouge">net_perf_check.sh</code> or</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>netstat -us | grep errors
</code></pre></div></div>

<p>Increase max receive buffer size:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl -w net.core.rmem_max=33554432
</code></pre></div></div>

<h4 id="softirq">softirq</h4>

<p>Changing these values is usually not necessary, but can help if the kernel
is already dropping packets.</p>

<p>Check with <code class="language-plaintext highlighter-rouge">net_perf_check.sh</code> and increase the values if needed:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl -w net.core.netdev_max_backlog=2000
sudo sysctl -w net.core.netdev_budget=600
</code></pre></div></div>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rc_genicam_api">rc_genicam_api</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/rc_genicam_api">rc_genicam_api</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-roboception-rc_genicam_api
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-roboception-rc_genicam_api" role="menuitem" tabindex="-1" href="/r/rc_genicam_api/github-roboception-rc_genicam_api" data="github-roboception-rc_genicam_api">
                    <span class="glyphicon glyphicon-star"></span>
                    github-roboception-rc_genicam_api
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Roboception convenience layer around GenICam and GigE Vision.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/roboception/rc_genicam_api.git">https://github.com/roboception/rc_genicam_api.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-12-02
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rc_genicam_api/#rolling-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rc_genicam_api/#rolling-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rc_genicam_api/#rolling-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/rc_genicam_api">rc_genicam_api</a></td>
                    <td>2.7.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="roboception-genicam-convenience-layer">Roboception GenICam Convenience Layer</h1>

<p>This package combines the Roboception convenience layer for images with the
GenICam reference implementation and a GigE Vision transport layer. It is a
self contained package that permits configuration and image streaming of
GenICam / GigE Vision 2.0 compatible cameras like the Roboception rc_visard.
The API is based on C++ 11 and can be compiled under Linux and Windows.</p>

<p>This package also provides some tools that can be called from the command line
for discovering cameras, changing their configuration and streaming images.</p>

<p><strong>Prebuilt binaries can be downloaded on the <a href="https://github.com/roboception/rc_genicam_api/releases">releases</a> page.</strong></p>

<h2 id="contents">Contents</h2>

<ul>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#minimum-requirements">Minimum Requirements</a></li>
  <li>
<a href="https://github.com/roboception/rc_genicam_api/tree/master/#compiling-and-installing">Compiling and Installing</a>
    <ul>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#linux">Linux</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#windows">Windows</a></li>
    </ul>
  </li>
  <li>
<a href="https://github.com/roboception/rc_genicam_api/tree/master/#description-of-tools">Description of Tools</a>
    <ul>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_info">gc_info</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_config">gc_config</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_stream">gc_stream</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_pointcloud">gc_pointcloud</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_file">gc_file</a></li>
    </ul>
  </li>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#definition-of-device-id">Definition of Device ID</a></li>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#finding-the-transport-layer">Finding the Transport Layer</a></li>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#network-optimization-under-linux">Network Optimization under Linux</a></li>
</ul>

<h2 id="minimum-requirements">Minimum Requirements</h2>

<ul>
  <li>Linux x64 / i86: gcc &gt;= 4.8</li>
  <li>ARMhf: gcc &gt;= 4.9.4</li>
  <li>Linux AArch64: gcc &gt;= 5.4</li>
  <li>Windows 10: Visual Studio &gt;= VC140</li>
</ul>

<h2 id="compiling-and-installing">Compiling and Installing</h2>

<h3 id="linux">Linux</h3>

<p>Building follows the standard cmake build flow. Please make sure to set the
install path <em>before</em> compiling. Otherwise it can happen that the transport
layer is not found when calling the tools.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd &lt;main-directory&gt;
mkdir build
cd build
cmake -DCMAKE_INSTALL_PREFIX=&lt;install-directory&gt; ..
make
make install
</code></pre></div></div>

<h4 id="bash-completion">Bash completion</h4>

<p>To install bash completion, configure cmake with <code class="language-plaintext highlighter-rouge">-DINSTALL_COMPLETION=ON</code></p>

<h4 id="debian-package">Debian package</h4>

<p>A Debian package can be built with e.g.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd &lt;main-directory&gt;
mkdir build
cd build
cmake -DCMAKE_INSTALL_PREFIX=/usr ..
make
make package
</code></pre></div></div>

<h3 id="windows">Windows</h3>

<p>The main directory contains the script build_win.bat. Execute this script
in the <strong>Visual Studio Developer Command Prompt</strong> for building the package.
Alternatively, you can use cmake manually to generate a build project for
compilation with your favorite compiler.</p>

<p>NOTE: For using the libraries in own projects, define the symbol
<code class="language-plaintext highlighter-rouge">GENICAM_NO_AUTO_IMPLIB</code> in your project file to avoid linker problems with the
GenICam libraries.</p>

<h2 id="description-of-tools">Description of Tools</h2>

<p>The tools do not offer a graphical user interface. They are meant to be called
from a shell (e.g. Power Shell under Windows) or script and controlled by
command line parameters. Calling the tools without any parameters prints a help
text on the standard output.</p>

<p>NOTE: If any tool returns the error <code class="language-plaintext highlighter-rouge">No transport layers found in path ...</code>,
then read the section ‘Transport Layer’ below.</p>

<h3 id="gc_info">gc_info</h3>

<p>Lists all available systems (i.e. transport layers), interfaces and devices
with some information. If a device ID is given on the command line, then the
complete GenICam nodemap with all parameters and their current values are
listed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_info -h | -l | ([-o &lt;xml-output-file&gt;] [&lt;interface-id&gt;:]&lt;device-id&gt;[?&lt;node&gt;] [&lt;key&gt;=&lt;value&gt;] ...)

Provides information about GenICam transport layers, interfaces and devices.

Options:
-h   Prints help information and exits
-l   List all all available devices on all interfaces
-o   Filename to store XML description from specified device

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device
&lt;node&gt;         Optional name of category or parameter to be reported
&lt;key&gt;=&lt;value&gt;  Optional GenICam parameters to be changed in the given order before reporting

</code></pre></div></div>

<h3 id="gc_config">gc_config</h3>

<p>Can be used to list network specific information of GenICam compatible GigE
Vision 2 cameras. The network settings as well as all other parameters
provided via GenICam can be changed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_config -h | -l | ([&lt;interface-id&gt;:]&lt;device-id&gt; &lt;options&gt; ...)

Configuration of a GigE Vision device via GenICam.

-h             Prints help information and exits
-l             Lists all available GigE Vision devices

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device

Options:
-n &lt;id&gt;        Set user defined id
-d 1|0         Switch DHCP on or off
-p 1|0         Switch persistent IP on or off
-t 1|0         Switch precision time protocol (ptp) on or off
-i &lt;ip&gt;        Set persistent IP address
-s &lt;ip&gt;        Set subnet mask for persistent IP address
-g &lt;ip&gt;        Set default gateway for persistent IP address
--iponly       Show current IP of device instead of full summary
&lt;key&gt;=&lt;value&gt;  Optional GenICam parameters to be changed in the given order

</code></pre></div></div>

<h3 id="gc_stream">gc_stream</h3>

<p>This tool shows how to configure and stream images from a camera. GenICam
features can be configured directly from the command line. Images will be
stored in PGM or PPM format, depending on the image format.</p>

<p>Streams of the Roboception rc_visard can be enabled or disabled directly on
the command line by setting the appropriate GenICam parameters. The following
command enables intensity images, disables disparity images and stores 10
images:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_stream &lt;ID&gt; ComponentSelector=Intensity ComponentEnable=1 ComponentSelector=Disparity ComponentEnable=0 n=10

</code></pre></div></div>

<p>NOTE: Many image viewers can display PGM and PPM format. The sv tool of
<a href="https://github.com/roboception/cvkit">cvkit</a> can also be used.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_stream -h | [-f &lt;fmt&gt;] [-t] [&lt;interface-id&gt;:]&lt;device-id&gt; [n=&lt;n&gt;] [&lt;key&gt;=&lt;value&gt;] ...

Stores images from the specified device after applying the given optional GenICam parameters.

Options:
-h         Prints help information and exits
-t         Testmode, which does not store images and provides extended statistics
-f pnm|png Format for storing images. Default is pnm

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device
n=&lt;n&gt;          Optional number of images to be received (default is 1)
&lt;key&gt;=&lt;value&gt;  Optional GenICam parameters to be changed in the given order

</code></pre></div></div>

<h3 id="gc_pointcloud">gc_pointcloud</h3>

<p>This tool streams the left image, disparity, confidence and error from a
Roboception rc_visard sensor. It takes the first set of time synchronous
images, computes a colored point cloud and stores it in PLY ASCII format.
This tool demonstrates how to synchronize different images according to
their timestamps.</p>

<p>NOTE: PLY is a standard format for scanned 3D data that can be read by many
programs. The plyv tool of <a href="https://github.com/roboception/cvkit">cvkit</a> can
also be used for visualization.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_pointcloud -h | [-o &lt;output-filename&gt;] [&lt;interface-id&gt;:]&lt;device-id&gt;

Gets the first synchronized image set of the Roboception rc_visard, consisting
of left, disparity, confidence and error image, creates a point cloud and
stores it in ply ascii format.

Options:
-h        Prints help information and exits
-o &lt;file&gt; Set name of output file (default is 'rc_visard_&lt;timestamp&gt;.ply')

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device

</code></pre></div></div>

<h3 id="gc_file">gc_file</h3>

<p>This tool can be used to upload and download a file into the persistent user
space of an industrial camera.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tools/gc_file -h | [&lt;interface-id&gt;:]&lt;device-id&gt; -f | (&lt;device-file&gt; [-w|-r &lt;file&gt;])

Downloading or uploading a file via GenICam.

-h            Prints help information and exits
-f            Lists names of files on the device
-w &lt;file&gt;     Writes the given local file into the selected file on the device
-r &lt;file&gt;     Reads the selected file on the device and stores it as local file

The selected file is printed on std out if none of -f, -w and -r are given.

</code></pre></div></div>

<h2 id="definition-of-device-id">Definition of Device ID</h2>

<p>There are multiple ways of specifying an ID to identify a device.</p>

<ol>
  <li>
    <p>The serial number of the device serves as ID.
Example: <code class="language-plaintext highlighter-rouge">02911931</code></p>
  </li>
  <li>
    <p>The given ID can also be a user defined name. The user defined name is set
to <code class="language-plaintext highlighter-rouge">rc_visard</code> by default and can be changed with:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>gc_config &lt;ID&gt; -n &lt;user-defined-name&gt;
</code></pre></div>    </div>

    <p>This way of identifying a device can fail if there is more than one device
with the same name. No device is returned in this case.</p>

    <p>If the user defined name contains one or more colons, it must be preceded by
a colon (e.g. <code class="language-plaintext highlighter-rouge">:my:name</code>) or an interface ID (see below).</p>
  </li>
  <li>
    <p>The device ID of the GenTL producer (see <code class="language-plaintext highlighter-rouge">Transport Layer</code> section below)
may also be used. This ID is unique, but not persistent as it depends on the
implementation of the GenTL producer. Thus, it can change after software
updates. It often encodes the MAC address of the sensor in some way.</p>

    <p>Example: <code class="language-plaintext highlighter-rouge">00_14_2d_2c_6e_bb</code></p>
  </li>
</ol>

<p>All three options can be seen in the output of <code class="language-plaintext highlighter-rouge">gc_config -l</code>.</p>

<h3 id="optional-interface-id-prefix">Optional Interface ID prefix</h3>

<p>If the given ID contains a colon (i.e. <code class="language-plaintext highlighter-rouge">:</code>), the part before the (first)
colon is interpreted as interface ID and the part after the first colon is
treated as device ID. This is the format that <code class="language-plaintext highlighter-rouge">gc_config -l</code> shows. A device
with the given ID is only sought on the specified interface. This can be
useful if there are several ways to reach a device from a host computer,
e.g. via wireless and wired network connection, but a certain connection
type (e.g. wired) is preferred due to higher bandwidth and lower latency.</p>

<p>Examples: <code class="language-plaintext highlighter-rouge">eth0:00_14_2d_2c_6e_bb</code>, <code class="language-plaintext highlighter-rouge">eth1:02911931</code> or <code class="language-plaintext highlighter-rouge">wlan0:rc_visard</code></p>

<p>A colon at the beginning of the ID effectively defines an empty interface ID
which triggers looking on all interfaces.</p>

<p>If the given ID does not contain a colon, the ID is interpreted as the
device ID itself and is sought throughout all interfaces as well.</p>

<h2 id="finding-the-transport-layer">Finding the Transport Layer</h2>

<p>The communication to the device is done through a so called transport layer
(i.e. GenTL producer version 1.5 or higher). This package provides and installs
a default transport layer that implements the GigE Vision protocol for
connecting to the Roboception rc_visard. According to the GenICam
specification, the transport layer has the suffix ‘.cti’. The environment
variable <code class="language-plaintext highlighter-rouge">GENICAM_GENTL32_PATH</code> (for 32 bit applications) or <code class="language-plaintext highlighter-rouge">GENICAM_GENTL64_PATH</code>
(for 64 bit applications) must contain a list of paths that contain transport
layers. All transport layers are provided as systems to the application.</p>

<p>For convenience, if the environment variable is not defined or empty, it is
internally defined with the install path of the provided transport layer (as
known at compile time!). If the package is not installed, the install path is
changed after compilation or the package is moved to another location after
installation, then the transport layer may not be found. In this case, the
tools shows an error like e.g.:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'No transport layers found in path /usr/lib/rc_genicam_api'
</code></pre></div></div>

<p>In this case, the corresponding environment variable (see above) must be set to
the directory in which the transport layer (i.e. file with suffix ‘.cti’)
resides.</p>

<p>Under Windows, as second fall back additionally to the install path, the
directory of the executable is also added to the environment variable. Thus,
the install directory can be moved, as long as the cti file stays in the same
directory as the executable.</p>

<h2 id="network-optimization-under-linux">Network Optimization under Linux</h2>

<p>When images are received at a lower rate than set/exepected the most
likely problem is that this (user space) library cannot read the many UDP
packets fast enough resulting in incomplete image buffers.</p>

<h3 id="test-script">Test Script</h3>

<p>The <code class="language-plaintext highlighter-rouge">net_perf_check.sh</code> script performs some simple checks and should be run
while or after streaming images via GigE Vision.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./net_perf_check.sh --help
</code></pre></div></div>

<h3 id="jumbo-frames">Jumbo Frames</h3>

<p>First of all increasing the UDP packet size (using jubo frames) is strongly
recommended! Increase the MTU of your network interface to 9000, e.g.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo ifconfig eth0 mtu 9000
</code></pre></div></div>

<p>Also make sure that all network devices/switches between your host and the
sensor support this.</p>

<h3 id="sysctl-settings">sysctl settings</h3>

<p>There are several Linux sysctl options that can be modified to increase
performance for the GigE Vision usecase.</p>

<p>These values can be changed during runtime with <code class="language-plaintext highlighter-rouge">sysctl</code> or written to
<code class="language-plaintext highlighter-rouge">/etc/sysctl.conf</code> for persistence across reboots.</p>

<h4 id="rmem_max">rmem_max</h4>

<p>If the number of UDP receive buffer errors increases while streaming, increasing the
socket receive buffer size usually fixes the problem.</p>

<p>Check the errors with <code class="language-plaintext highlighter-rouge">net_perf_check.sh</code> or</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>netstat -us | grep errors
</code></pre></div></div>

<p>Increase max receive buffer size:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl -w net.core.rmem_max=33554432
</code></pre></div></div>

<h4 id="softirq">softirq</h4>

<p>Changing these values is usually not necessary, but can help if the kernel
is already dropping packets.</p>

<p>Check with <code class="language-plaintext highlighter-rouge">net_perf_check.sh</code> and increase the values if needed:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl -w net.core.netdev_max_backlog=2000
sudo sysctl -w net.core.netdev_budget=600
</code></pre></div></div>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rc_genicam_api">rc_genicam_api</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-roboception-rc_genicam_api
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-roboception-rc_genicam_api" role="menuitem" tabindex="-1" href="/r/rc_genicam_api/github-roboception-rc_genicam_api" data="github-roboception-rc_genicam_api">
                    <span class="glyphicon glyphicon-star"></span>
                    github-roboception-rc_genicam_api
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>github</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rc_genicam_api">rc_genicam_api</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/rc_genicam_api">rc_genicam_api</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-roboception-rc_genicam_api
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-roboception-rc_genicam_api" role="menuitem" tabindex="-1" href="/r/rc_genicam_api/github-roboception-rc_genicam_api" data="github-roboception-rc_genicam_api">
                    <span class="glyphicon glyphicon-star"></span>
                    github-roboception-rc_genicam_api
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Roboception convenience layer around GenICam and GigE Vision.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/roboception/rc_genicam_api.git">https://github.com/roboception/rc_genicam_api.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-12-02
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rc_genicam_api/#noetic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rc_genicam_api/#noetic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rc_genicam_api/#noetic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/rc_genicam_api">rc_genicam_api</a></td>
                    <td>2.7.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="roboception-genicam-convenience-layer">Roboception GenICam Convenience Layer</h1>

<p>This package combines the Roboception convenience layer for images with the
GenICam reference implementation and a GigE Vision transport layer. It is a
self contained package that permits configuration and image streaming of
GenICam / GigE Vision 2.0 compatible cameras like the Roboception rc_visard.
The API is based on C++ 11 and can be compiled under Linux and Windows.</p>

<p>This package also provides some tools that can be called from the command line
for discovering cameras, changing their configuration and streaming images.</p>

<p><strong>Prebuilt binaries can be downloaded on the <a href="https://github.com/roboception/rc_genicam_api/releases">releases</a> page.</strong></p>

<h2 id="contents">Contents</h2>

<ul>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#minimum-requirements">Minimum Requirements</a></li>
  <li>
<a href="https://github.com/roboception/rc_genicam_api/tree/master/#compiling-and-installing">Compiling and Installing</a>
    <ul>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#linux">Linux</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#windows">Windows</a></li>
    </ul>
  </li>
  <li>
<a href="https://github.com/roboception/rc_genicam_api/tree/master/#description-of-tools">Description of Tools</a>
    <ul>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_info">gc_info</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_config">gc_config</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_stream">gc_stream</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_pointcloud">gc_pointcloud</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_file">gc_file</a></li>
    </ul>
  </li>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#definition-of-device-id">Definition of Device ID</a></li>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#finding-the-transport-layer">Finding the Transport Layer</a></li>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#network-optimization-under-linux">Network Optimization under Linux</a></li>
</ul>

<h2 id="minimum-requirements">Minimum Requirements</h2>

<ul>
  <li>Linux x64 / i86: gcc &gt;= 4.8</li>
  <li>ARMhf: gcc &gt;= 4.9.4</li>
  <li>Linux AArch64: gcc &gt;= 5.4</li>
  <li>Windows 10: Visual Studio &gt;= VC140</li>
</ul>

<h2 id="compiling-and-installing">Compiling and Installing</h2>

<h3 id="linux">Linux</h3>

<p>Building follows the standard cmake build flow. Please make sure to set the
install path <em>before</em> compiling. Otherwise it can happen that the transport
layer is not found when calling the tools.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd &lt;main-directory&gt;
mkdir build
cd build
cmake -DCMAKE_INSTALL_PREFIX=&lt;install-directory&gt; ..
make
make install
</code></pre></div></div>

<h4 id="bash-completion">Bash completion</h4>

<p>To install bash completion, configure cmake with <code class="language-plaintext highlighter-rouge">-DINSTALL_COMPLETION=ON</code></p>

<h4 id="debian-package">Debian package</h4>

<p>A Debian package can be built with e.g.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd &lt;main-directory&gt;
mkdir build
cd build
cmake -DCMAKE_INSTALL_PREFIX=/usr ..
make
make package
</code></pre></div></div>

<h3 id="windows">Windows</h3>

<p>The main directory contains the script build_win.bat. Execute this script
in the <strong>Visual Studio Developer Command Prompt</strong> for building the package.
Alternatively, you can use cmake manually to generate a build project for
compilation with your favorite compiler.</p>

<p>NOTE: For using the libraries in own projects, define the symbol
<code class="language-plaintext highlighter-rouge">GENICAM_NO_AUTO_IMPLIB</code> in your project file to avoid linker problems with the
GenICam libraries.</p>

<h2 id="description-of-tools">Description of Tools</h2>

<p>The tools do not offer a graphical user interface. They are meant to be called
from a shell (e.g. Power Shell under Windows) or script and controlled by
command line parameters. Calling the tools without any parameters prints a help
text on the standard output.</p>

<p>NOTE: If any tool returns the error <code class="language-plaintext highlighter-rouge">No transport layers found in path ...</code>,
then read the section ‘Transport Layer’ below.</p>

<h3 id="gc_info">gc_info</h3>

<p>Lists all available systems (i.e. transport layers), interfaces and devices
with some information. If a device ID is given on the command line, then the
complete GenICam nodemap with all parameters and their current values are
listed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_info -h | -l | ([-o &lt;xml-output-file&gt;] [&lt;interface-id&gt;:]&lt;device-id&gt;[?&lt;node&gt;] [&lt;key&gt;=&lt;value&gt;] ...)

Provides information about GenICam transport layers, interfaces and devices.

Options:
-h   Prints help information and exits
-l   List all all available devices on all interfaces
-o   Filename to store XML description from specified device

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device
&lt;node&gt;         Optional name of category or parameter to be reported
&lt;key&gt;=&lt;value&gt;  Optional GenICam parameters to be changed in the given order before reporting

</code></pre></div></div>

<h3 id="gc_config">gc_config</h3>

<p>Can be used to list network specific information of GenICam compatible GigE
Vision 2 cameras. The network settings as well as all other parameters
provided via GenICam can be changed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_config -h | -l | ([&lt;interface-id&gt;:]&lt;device-id&gt; &lt;options&gt; ...)

Configuration of a GigE Vision device via GenICam.

-h             Prints help information and exits
-l             Lists all available GigE Vision devices

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device

Options:
-n &lt;id&gt;        Set user defined id
-d 1|0         Switch DHCP on or off
-p 1|0         Switch persistent IP on or off
-t 1|0         Switch precision time protocol (ptp) on or off
-i &lt;ip&gt;        Set persistent IP address
-s &lt;ip&gt;        Set subnet mask for persistent IP address
-g &lt;ip&gt;        Set default gateway for persistent IP address
--iponly       Show current IP of device instead of full summary
&lt;key&gt;=&lt;value&gt;  Optional GenICam parameters to be changed in the given order

</code></pre></div></div>

<h3 id="gc_stream">gc_stream</h3>

<p>This tool shows how to configure and stream images from a camera. GenICam
features can be configured directly from the command line. Images will be
stored in PGM or PPM format, depending on the image format.</p>

<p>Streams of the Roboception rc_visard can be enabled or disabled directly on
the command line by setting the appropriate GenICam parameters. The following
command enables intensity images, disables disparity images and stores 10
images:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_stream &lt;ID&gt; ComponentSelector=Intensity ComponentEnable=1 ComponentSelector=Disparity ComponentEnable=0 n=10

</code></pre></div></div>

<p>NOTE: Many image viewers can display PGM and PPM format. The sv tool of
<a href="https://github.com/roboception/cvkit">cvkit</a> can also be used.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_stream -h | [-f &lt;fmt&gt;] [-t] [&lt;interface-id&gt;:]&lt;device-id&gt; [n=&lt;n&gt;] [&lt;key&gt;=&lt;value&gt;] ...

Stores images from the specified device after applying the given optional GenICam parameters.

Options:
-h         Prints help information and exits
-t         Testmode, which does not store images and provides extended statistics
-f pnm|png Format for storing images. Default is pnm

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device
n=&lt;n&gt;          Optional number of images to be received (default is 1)
&lt;key&gt;=&lt;value&gt;  Optional GenICam parameters to be changed in the given order

</code></pre></div></div>

<h3 id="gc_pointcloud">gc_pointcloud</h3>

<p>This tool streams the left image, disparity, confidence and error from a
Roboception rc_visard sensor. It takes the first set of time synchronous
images, computes a colored point cloud and stores it in PLY ASCII format.
This tool demonstrates how to synchronize different images according to
their timestamps.</p>

<p>NOTE: PLY is a standard format for scanned 3D data that can be read by many
programs. The plyv tool of <a href="https://github.com/roboception/cvkit">cvkit</a> can
also be used for visualization.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_pointcloud -h | [-o &lt;output-filename&gt;] [&lt;interface-id&gt;:]&lt;device-id&gt;

Gets the first synchronized image set of the Roboception rc_visard, consisting
of left, disparity, confidence and error image, creates a point cloud and
stores it in ply ascii format.

Options:
-h        Prints help information and exits
-o &lt;file&gt; Set name of output file (default is 'rc_visard_&lt;timestamp&gt;.ply')

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device

</code></pre></div></div>

<h3 id="gc_file">gc_file</h3>

<p>This tool can be used to upload and download a file into the persistent user
space of an industrial camera.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tools/gc_file -h | [&lt;interface-id&gt;:]&lt;device-id&gt; -f | (&lt;device-file&gt; [-w|-r &lt;file&gt;])

Downloading or uploading a file via GenICam.

-h            Prints help information and exits
-f            Lists names of files on the device
-w &lt;file&gt;     Writes the given local file into the selected file on the device
-r &lt;file&gt;     Reads the selected file on the device and stores it as local file

The selected file is printed on std out if none of -f, -w and -r are given.

</code></pre></div></div>

<h2 id="definition-of-device-id">Definition of Device ID</h2>

<p>There are multiple ways of specifying an ID to identify a device.</p>

<ol>
  <li>
    <p>The serial number of the device serves as ID.
Example: <code class="language-plaintext highlighter-rouge">02911931</code></p>
  </li>
  <li>
    <p>The given ID can also be a user defined name. The user defined name is set
to <code class="language-plaintext highlighter-rouge">rc_visard</code> by default and can be changed with:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>gc_config &lt;ID&gt; -n &lt;user-defined-name&gt;
</code></pre></div>    </div>

    <p>This way of identifying a device can fail if there is more than one device
with the same name. No device is returned in this case.</p>

    <p>If the user defined name contains one or more colons, it must be preceded by
a colon (e.g. <code class="language-plaintext highlighter-rouge">:my:name</code>) or an interface ID (see below).</p>
  </li>
  <li>
    <p>The device ID of the GenTL producer (see <code class="language-plaintext highlighter-rouge">Transport Layer</code> section below)
may also be used. This ID is unique, but not persistent as it depends on the
implementation of the GenTL producer. Thus, it can change after software
updates. It often encodes the MAC address of the sensor in some way.</p>

    <p>Example: <code class="language-plaintext highlighter-rouge">00_14_2d_2c_6e_bb</code></p>
  </li>
</ol>

<p>All three options can be seen in the output of <code class="language-plaintext highlighter-rouge">gc_config -l</code>.</p>

<h3 id="optional-interface-id-prefix">Optional Interface ID prefix</h3>

<p>If the given ID contains a colon (i.e. <code class="language-plaintext highlighter-rouge">:</code>), the part before the (first)
colon is interpreted as interface ID and the part after the first colon is
treated as device ID. This is the format that <code class="language-plaintext highlighter-rouge">gc_config -l</code> shows. A device
with the given ID is only sought on the specified interface. This can be
useful if there are several ways to reach a device from a host computer,
e.g. via wireless and wired network connection, but a certain connection
type (e.g. wired) is preferred due to higher bandwidth and lower latency.</p>

<p>Examples: <code class="language-plaintext highlighter-rouge">eth0:00_14_2d_2c_6e_bb</code>, <code class="language-plaintext highlighter-rouge">eth1:02911931</code> or <code class="language-plaintext highlighter-rouge">wlan0:rc_visard</code></p>

<p>A colon at the beginning of the ID effectively defines an empty interface ID
which triggers looking on all interfaces.</p>

<p>If the given ID does not contain a colon, the ID is interpreted as the
device ID itself and is sought throughout all interfaces as well.</p>

<h2 id="finding-the-transport-layer">Finding the Transport Layer</h2>

<p>The communication to the device is done through a so called transport layer
(i.e. GenTL producer version 1.5 or higher). This package provides and installs
a default transport layer that implements the GigE Vision protocol for
connecting to the Roboception rc_visard. According to the GenICam
specification, the transport layer has the suffix ‘.cti’. The environment
variable <code class="language-plaintext highlighter-rouge">GENICAM_GENTL32_PATH</code> (for 32 bit applications) or <code class="language-plaintext highlighter-rouge">GENICAM_GENTL64_PATH</code>
(for 64 bit applications) must contain a list of paths that contain transport
layers. All transport layers are provided as systems to the application.</p>

<p>For convenience, if the environment variable is not defined or empty, it is
internally defined with the install path of the provided transport layer (as
known at compile time!). If the package is not installed, the install path is
changed after compilation or the package is moved to another location after
installation, then the transport layer may not be found. In this case, the
tools shows an error like e.g.:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'No transport layers found in path /usr/lib/rc_genicam_api'
</code></pre></div></div>

<p>In this case, the corresponding environment variable (see above) must be set to
the directory in which the transport layer (i.e. file with suffix ‘.cti’)
resides.</p>

<p>Under Windows, as second fall back additionally to the install path, the
directory of the executable is also added to the environment variable. Thus,
the install directory can be moved, as long as the cti file stays in the same
directory as the executable.</p>

<h2 id="network-optimization-under-linux">Network Optimization under Linux</h2>

<p>When images are received at a lower rate than set/exepected the most
likely problem is that this (user space) library cannot read the many UDP
packets fast enough resulting in incomplete image buffers.</p>

<h3 id="test-script">Test Script</h3>

<p>The <code class="language-plaintext highlighter-rouge">net_perf_check.sh</code> script performs some simple checks and should be run
while or after streaming images via GigE Vision.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./net_perf_check.sh --help
</code></pre></div></div>

<h3 id="jumbo-frames">Jumbo Frames</h3>

<p>First of all increasing the UDP packet size (using jubo frames) is strongly
recommended! Increase the MTU of your network interface to 9000, e.g.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo ifconfig eth0 mtu 9000
</code></pre></div></div>

<p>Also make sure that all network devices/switches between your host and the
sensor support this.</p>

<h3 id="sysctl-settings">sysctl settings</h3>

<p>There are several Linux sysctl options that can be modified to increase
performance for the GigE Vision usecase.</p>

<p>These values can be changed during runtime with <code class="language-plaintext highlighter-rouge">sysctl</code> or written to
<code class="language-plaintext highlighter-rouge">/etc/sysctl.conf</code> for persistence across reboots.</p>

<h4 id="rmem_max">rmem_max</h4>

<p>If the number of UDP receive buffer errors increases while streaming, increasing the
socket receive buffer size usually fixes the problem.</p>

<p>Check the errors with <code class="language-plaintext highlighter-rouge">net_perf_check.sh</code> or</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>netstat -us | grep errors
</code></pre></div></div>

<p>Increase max receive buffer size:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl -w net.core.rmem_max=33554432
</code></pre></div></div>

<h4 id="softirq">softirq</h4>

<p>Changing these values is usually not necessary, but can help if the kernel
is already dropping packets.</p>

<p>Check with <code class="language-plaintext highlighter-rouge">net_perf_check.sh</code> and increase the values if needed:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl -w net.core.netdev_max_backlog=2000
sudo sysctl -w net.core.netdev_budget=600
</code></pre></div></div>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rc_genicam_api">rc_genicam_api</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/rc_genicam_api">rc_genicam_api</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-roboception-rc_genicam_api
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-roboception-rc_genicam_api" role="menuitem" tabindex="-1" href="/r/rc_genicam_api/github-roboception-rc_genicam_api" data="github-roboception-rc_genicam_api">
                    <span class="glyphicon glyphicon-star"></span>
                    github-roboception-rc_genicam_api
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Roboception convenience layer around GenICam and GigE Vision.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/roboception/rc_genicam_api.git">https://github.com/roboception/rc_genicam_api.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-12-02
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rc_genicam_api/#galactic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rc_genicam_api/#galactic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rc_genicam_api/#galactic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/rc_genicam_api">rc_genicam_api</a></td>
                    <td>2.7.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="roboception-genicam-convenience-layer">Roboception GenICam Convenience Layer</h1>

<p>This package combines the Roboception convenience layer for images with the
GenICam reference implementation and a GigE Vision transport layer. It is a
self contained package that permits configuration and image streaming of
GenICam / GigE Vision 2.0 compatible cameras like the Roboception rc_visard.
The API is based on C++ 11 and can be compiled under Linux and Windows.</p>

<p>This package also provides some tools that can be called from the command line
for discovering cameras, changing their configuration and streaming images.</p>

<p><strong>Prebuilt binaries can be downloaded on the <a href="https://github.com/roboception/rc_genicam_api/releases">releases</a> page.</strong></p>

<h2 id="contents">Contents</h2>

<ul>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#minimum-requirements">Minimum Requirements</a></li>
  <li>
<a href="https://github.com/roboception/rc_genicam_api/tree/master/#compiling-and-installing">Compiling and Installing</a>
    <ul>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#linux">Linux</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#windows">Windows</a></li>
    </ul>
  </li>
  <li>
<a href="https://github.com/roboception/rc_genicam_api/tree/master/#description-of-tools">Description of Tools</a>
    <ul>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_info">gc_info</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_config">gc_config</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_stream">gc_stream</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_pointcloud">gc_pointcloud</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_file">gc_file</a></li>
    </ul>
  </li>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#definition-of-device-id">Definition of Device ID</a></li>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#finding-the-transport-layer">Finding the Transport Layer</a></li>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#network-optimization-under-linux">Network Optimization under Linux</a></li>
</ul>

<h2 id="minimum-requirements">Minimum Requirements</h2>

<ul>
  <li>Linux x64 / i86: gcc &gt;= 4.8</li>
  <li>ARMhf: gcc &gt;= 4.9.4</li>
  <li>Linux AArch64: gcc &gt;= 5.4</li>
  <li>Windows 10: Visual Studio &gt;= VC140</li>
</ul>

<h2 id="compiling-and-installing">Compiling and Installing</h2>

<h3 id="linux">Linux</h3>

<p>Building follows the standard cmake build flow. Please make sure to set the
install path <em>before</em> compiling. Otherwise it can happen that the transport
layer is not found when calling the tools.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd &lt;main-directory&gt;
mkdir build
cd build
cmake -DCMAKE_INSTALL_PREFIX=&lt;install-directory&gt; ..
make
make install
</code></pre></div></div>

<h4 id="bash-completion">Bash completion</h4>

<p>To install bash completion, configure cmake with <code class="language-plaintext highlighter-rouge">-DINSTALL_COMPLETION=ON</code></p>

<h4 id="debian-package">Debian package</h4>

<p>A Debian package can be built with e.g.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd &lt;main-directory&gt;
mkdir build
cd build
cmake -DCMAKE_INSTALL_PREFIX=/usr ..
make
make package
</code></pre></div></div>

<h3 id="windows">Windows</h3>

<p>The main directory contains the script build_win.bat. Execute this script
in the <strong>Visual Studio Developer Command Prompt</strong> for building the package.
Alternatively, you can use cmake manually to generate a build project for
compilation with your favorite compiler.</p>

<p>NOTE: For using the libraries in own projects, define the symbol
<code class="language-plaintext highlighter-rouge">GENICAM_NO_AUTO_IMPLIB</code> in your project file to avoid linker problems with the
GenICam libraries.</p>

<h2 id="description-of-tools">Description of Tools</h2>

<p>The tools do not offer a graphical user interface. They are meant to be called
from a shell (e.g. Power Shell under Windows) or script and controlled by
command line parameters. Calling the tools without any parameters prints a help
text on the standard output.</p>

<p>NOTE: If any tool returns the error <code class="language-plaintext highlighter-rouge">No transport layers found in path ...</code>,
then read the section ‘Transport Layer’ below.</p>

<h3 id="gc_info">gc_info</h3>

<p>Lists all available systems (i.e. transport layers), interfaces and devices
with some information. If a device ID is given on the command line, then the
complete GenICam nodemap with all parameters and their current values are
listed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_info -h | -l | ([-o &lt;xml-output-file&gt;] [&lt;interface-id&gt;:]&lt;device-id&gt;[?&lt;node&gt;] [&lt;key&gt;=&lt;value&gt;] ...)

Provides information about GenICam transport layers, interfaces and devices.

Options:
-h   Prints help information and exits
-l   List all all available devices on all interfaces
-o   Filename to store XML description from specified device

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device
&lt;node&gt;         Optional name of category or parameter to be reported
&lt;key&gt;=&lt;value&gt;  Optional GenICam parameters to be changed in the given order before reporting

</code></pre></div></div>

<h3 id="gc_config">gc_config</h3>

<p>Can be used to list network specific information of GenICam compatible GigE
Vision 2 cameras. The network settings as well as all other parameters
provided via GenICam can be changed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_config -h | -l | ([&lt;interface-id&gt;:]&lt;device-id&gt; &lt;options&gt; ...)

Configuration of a GigE Vision device via GenICam.

-h             Prints help information and exits
-l             Lists all available GigE Vision devices

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device

Options:
-n &lt;id&gt;        Set user defined id
-d 1|0         Switch DHCP on or off
-p 1|0         Switch persistent IP on or off
-t 1|0         Switch precision time protocol (ptp) on or off
-i &lt;ip&gt;        Set persistent IP address
-s &lt;ip&gt;        Set subnet mask for persistent IP address
-g &lt;ip&gt;        Set default gateway for persistent IP address
--iponly       Show current IP of device instead of full summary
&lt;key&gt;=&lt;value&gt;  Optional GenICam parameters to be changed in the given order

</code></pre></div></div>

<h3 id="gc_stream">gc_stream</h3>

<p>This tool shows how to configure and stream images from a camera. GenICam
features can be configured directly from the command line. Images will be
stored in PGM or PPM format, depending on the image format.</p>

<p>Streams of the Roboception rc_visard can be enabled or disabled directly on
the command line by setting the appropriate GenICam parameters. The following
command enables intensity images, disables disparity images and stores 10
images:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_stream &lt;ID&gt; ComponentSelector=Intensity ComponentEnable=1 ComponentSelector=Disparity ComponentEnable=0 n=10

</code></pre></div></div>

<p>NOTE: Many image viewers can display PGM and PPM format. The sv tool of
<a href="https://github.com/roboception/cvkit">cvkit</a> can also be used.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_stream -h | [-f &lt;fmt&gt;] [-t] [&lt;interface-id&gt;:]&lt;device-id&gt; [n=&lt;n&gt;] [&lt;key&gt;=&lt;value&gt;] ...

Stores images from the specified device after applying the given optional GenICam parameters.

Options:
-h         Prints help information and exits
-t         Testmode, which does not store images and provides extended statistics
-f pnm|png Format for storing images. Default is pnm

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device
n=&lt;n&gt;          Optional number of images to be received (default is 1)
&lt;key&gt;=&lt;value&gt;  Optional GenICam parameters to be changed in the given order

</code></pre></div></div>

<h3 id="gc_pointcloud">gc_pointcloud</h3>

<p>This tool streams the left image, disparity, confidence and error from a
Roboception rc_visard sensor. It takes the first set of time synchronous
images, computes a colored point cloud and stores it in PLY ASCII format.
This tool demonstrates how to synchronize different images according to
their timestamps.</p>

<p>NOTE: PLY is a standard format for scanned 3D data that can be read by many
programs. The plyv tool of <a href="https://github.com/roboception/cvkit">cvkit</a> can
also be used for visualization.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_pointcloud -h | [-o &lt;output-filename&gt;] [&lt;interface-id&gt;:]&lt;device-id&gt;

Gets the first synchronized image set of the Roboception rc_visard, consisting
of left, disparity, confidence and error image, creates a point cloud and
stores it in ply ascii format.

Options:
-h        Prints help information and exits
-o &lt;file&gt; Set name of output file (default is 'rc_visard_&lt;timestamp&gt;.ply')

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device

</code></pre></div></div>

<h3 id="gc_file">gc_file</h3>

<p>This tool can be used to upload and download a file into the persistent user
space of an industrial camera.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tools/gc_file -h | [&lt;interface-id&gt;:]&lt;device-id&gt; -f | (&lt;device-file&gt; [-w|-r &lt;file&gt;])

Downloading or uploading a file via GenICam.

-h            Prints help information and exits
-f            Lists names of files on the device
-w &lt;file&gt;     Writes the given local file into the selected file on the device
-r &lt;file&gt;     Reads the selected file on the device and stores it as local file

The selected file is printed on std out if none of -f, -w and -r are given.

</code></pre></div></div>

<h2 id="definition-of-device-id">Definition of Device ID</h2>

<p>There are multiple ways of specifying an ID to identify a device.</p>

<ol>
  <li>
    <p>The serial number of the device serves as ID.
Example: <code class="language-plaintext highlighter-rouge">02911931</code></p>
  </li>
  <li>
    <p>The given ID can also be a user defined name. The user defined name is set
to <code class="language-plaintext highlighter-rouge">rc_visard</code> by default and can be changed with:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>gc_config &lt;ID&gt; -n &lt;user-defined-name&gt;
</code></pre></div>    </div>

    <p>This way of identifying a device can fail if there is more than one device
with the same name. No device is returned in this case.</p>

    <p>If the user defined name contains one or more colons, it must be preceded by
a colon (e.g. <code class="language-plaintext highlighter-rouge">:my:name</code>) or an interface ID (see below).</p>
  </li>
  <li>
    <p>The device ID of the GenTL producer (see <code class="language-plaintext highlighter-rouge">Transport Layer</code> section below)
may also be used. This ID is unique, but not persistent as it depends on the
implementation of the GenTL producer. Thus, it can change after software
updates. It often encodes the MAC address of the sensor in some way.</p>

    <p>Example: <code class="language-plaintext highlighter-rouge">00_14_2d_2c_6e_bb</code></p>
  </li>
</ol>

<p>All three options can be seen in the output of <code class="language-plaintext highlighter-rouge">gc_config -l</code>.</p>

<h3 id="optional-interface-id-prefix">Optional Interface ID prefix</h3>

<p>If the given ID contains a colon (i.e. <code class="language-plaintext highlighter-rouge">:</code>), the part before the (first)
colon is interpreted as interface ID and the part after the first colon is
treated as device ID. This is the format that <code class="language-plaintext highlighter-rouge">gc_config -l</code> shows. A device
with the given ID is only sought on the specified interface. This can be
useful if there are several ways to reach a device from a host computer,
e.g. via wireless and wired network connection, but a certain connection
type (e.g. wired) is preferred due to higher bandwidth and lower latency.</p>

<p>Examples: <code class="language-plaintext highlighter-rouge">eth0:00_14_2d_2c_6e_bb</code>, <code class="language-plaintext highlighter-rouge">eth1:02911931</code> or <code class="language-plaintext highlighter-rouge">wlan0:rc_visard</code></p>

<p>A colon at the beginning of the ID effectively defines an empty interface ID
which triggers looking on all interfaces.</p>

<p>If the given ID does not contain a colon, the ID is interpreted as the
device ID itself and is sought throughout all interfaces as well.</p>

<h2 id="finding-the-transport-layer">Finding the Transport Layer</h2>

<p>The communication to the device is done through a so called transport layer
(i.e. GenTL producer version 1.5 or higher). This package provides and installs
a default transport layer that implements the GigE Vision protocol for
connecting to the Roboception rc_visard. According to the GenICam
specification, the transport layer has the suffix ‘.cti’. The environment
variable <code class="language-plaintext highlighter-rouge">GENICAM_GENTL32_PATH</code> (for 32 bit applications) or <code class="language-plaintext highlighter-rouge">GENICAM_GENTL64_PATH</code>
(for 64 bit applications) must contain a list of paths that contain transport
layers. All transport layers are provided as systems to the application.</p>

<p>For convenience, if the environment variable is not defined or empty, it is
internally defined with the install path of the provided transport layer (as
known at compile time!). If the package is not installed, the install path is
changed after compilation or the package is moved to another location after
installation, then the transport layer may not be found. In this case, the
tools shows an error like e.g.:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'No transport layers found in path /usr/lib/rc_genicam_api'
</code></pre></div></div>

<p>In this case, the corresponding environment variable (see above) must be set to
the directory in which the transport layer (i.e. file with suffix ‘.cti’)
resides.</p>

<p>Under Windows, as second fall back additionally to the install path, the
directory of the executable is also added to the environment variable. Thus,
the install directory can be moved, as long as the cti file stays in the same
directory as the executable.</p>

<h2 id="network-optimization-under-linux">Network Optimization under Linux</h2>

<p>When images are received at a lower rate than set/exepected the most
likely problem is that this (user space) library cannot read the many UDP
packets fast enough resulting in incomplete image buffers.</p>

<h3 id="test-script">Test Script</h3>

<p>The <code class="language-plaintext highlighter-rouge">net_perf_check.sh</code> script performs some simple checks and should be run
while or after streaming images via GigE Vision.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./net_perf_check.sh --help
</code></pre></div></div>

<h3 id="jumbo-frames">Jumbo Frames</h3>

<p>First of all increasing the UDP packet size (using jubo frames) is strongly
recommended! Increase the MTU of your network interface to 9000, e.g.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo ifconfig eth0 mtu 9000
</code></pre></div></div>

<p>Also make sure that all network devices/switches between your host and the
sensor support this.</p>

<h3 id="sysctl-settings">sysctl settings</h3>

<p>There are several Linux sysctl options that can be modified to increase
performance for the GigE Vision usecase.</p>

<p>These values can be changed during runtime with <code class="language-plaintext highlighter-rouge">sysctl</code> or written to
<code class="language-plaintext highlighter-rouge">/etc/sysctl.conf</code> for persistence across reboots.</p>

<h4 id="rmem_max">rmem_max</h4>

<p>If the number of UDP receive buffer errors increases while streaming, increasing the
socket receive buffer size usually fixes the problem.</p>

<p>Check the errors with <code class="language-plaintext highlighter-rouge">net_perf_check.sh</code> or</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>netstat -us | grep errors
</code></pre></div></div>

<p>Increase max receive buffer size:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl -w net.core.rmem_max=33554432
</code></pre></div></div>

<h4 id="softirq">softirq</h4>

<p>Changing these values is usually not necessary, but can help if the kernel
is already dropping packets.</p>

<p>Check with <code class="language-plaintext highlighter-rouge">net_perf_check.sh</code> and increase the values if needed:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl -w net.core.netdev_max_backlog=2000
sudo sysctl -w net.core.netdev_budget=600
</code></pre></div></div>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rc_genicam_api">rc_genicam_api</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/rc_genicam_api">rc_genicam_api</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-roboception-rc_genicam_api
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-roboception-rc_genicam_api" role="menuitem" tabindex="-1" href="/r/rc_genicam_api/github-roboception-rc_genicam_api" data="github-roboception-rc_genicam_api">
                    <span class="glyphicon glyphicon-star"></span>
                    github-roboception-rc_genicam_api
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Roboception convenience layer around GenICam and GigE Vision.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/roboception/rc_genicam_api.git">https://github.com/roboception/rc_genicam_api.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-12-02
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rc_genicam_api/#iron-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rc_genicam_api/#iron-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rc_genicam_api/#iron-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/rc_genicam_api">rc_genicam_api</a></td>
                    <td>2.7.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="roboception-genicam-convenience-layer">Roboception GenICam Convenience Layer</h1>

<p>This package combines the Roboception convenience layer for images with the
GenICam reference implementation and a GigE Vision transport layer. It is a
self contained package that permits configuration and image streaming of
GenICam / GigE Vision 2.0 compatible cameras like the Roboception rc_visard.
The API is based on C++ 11 and can be compiled under Linux and Windows.</p>

<p>This package also provides some tools that can be called from the command line
for discovering cameras, changing their configuration and streaming images.</p>

<p><strong>Prebuilt binaries can be downloaded on the <a href="https://github.com/roboception/rc_genicam_api/releases">releases</a> page.</strong></p>

<h2 id="contents">Contents</h2>

<ul>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#minimum-requirements">Minimum Requirements</a></li>
  <li>
<a href="https://github.com/roboception/rc_genicam_api/tree/master/#compiling-and-installing">Compiling and Installing</a>
    <ul>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#linux">Linux</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#windows">Windows</a></li>
    </ul>
  </li>
  <li>
<a href="https://github.com/roboception/rc_genicam_api/tree/master/#description-of-tools">Description of Tools</a>
    <ul>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_info">gc_info</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_config">gc_config</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_stream">gc_stream</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_pointcloud">gc_pointcloud</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_file">gc_file</a></li>
    </ul>
  </li>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#definition-of-device-id">Definition of Device ID</a></li>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#finding-the-transport-layer">Finding the Transport Layer</a></li>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#network-optimization-under-linux">Network Optimization under Linux</a></li>
</ul>

<h2 id="minimum-requirements">Minimum Requirements</h2>

<ul>
  <li>Linux x64 / i86: gcc &gt;= 4.8</li>
  <li>ARMhf: gcc &gt;= 4.9.4</li>
  <li>Linux AArch64: gcc &gt;= 5.4</li>
  <li>Windows 10: Visual Studio &gt;= VC140</li>
</ul>

<h2 id="compiling-and-installing">Compiling and Installing</h2>

<h3 id="linux">Linux</h3>

<p>Building follows the standard cmake build flow. Please make sure to set the
install path <em>before</em> compiling. Otherwise it can happen that the transport
layer is not found when calling the tools.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd &lt;main-directory&gt;
mkdir build
cd build
cmake -DCMAKE_INSTALL_PREFIX=&lt;install-directory&gt; ..
make
make install
</code></pre></div></div>

<h4 id="bash-completion">Bash completion</h4>

<p>To install bash completion, configure cmake with <code class="language-plaintext highlighter-rouge">-DINSTALL_COMPLETION=ON</code></p>

<h4 id="debian-package">Debian package</h4>

<p>A Debian package can be built with e.g.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd &lt;main-directory&gt;
mkdir build
cd build
cmake -DCMAKE_INSTALL_PREFIX=/usr ..
make
make package
</code></pre></div></div>

<h3 id="windows">Windows</h3>

<p>The main directory contains the script build_win.bat. Execute this script
in the <strong>Visual Studio Developer Command Prompt</strong> for building the package.
Alternatively, you can use cmake manually to generate a build project for
compilation with your favorite compiler.</p>

<p>NOTE: For using the libraries in own projects, define the symbol
<code class="language-plaintext highlighter-rouge">GENICAM_NO_AUTO_IMPLIB</code> in your project file to avoid linker problems with the
GenICam libraries.</p>

<h2 id="description-of-tools">Description of Tools</h2>

<p>The tools do not offer a graphical user interface. They are meant to be called
from a shell (e.g. Power Shell under Windows) or script and controlled by
command line parameters. Calling the tools without any parameters prints a help
text on the standard output.</p>

<p>NOTE: If any tool returns the error <code class="language-plaintext highlighter-rouge">No transport layers found in path ...</code>,
then read the section ‘Transport Layer’ below.</p>

<h3 id="gc_info">gc_info</h3>

<p>Lists all available systems (i.e. transport layers), interfaces and devices
with some information. If a device ID is given on the command line, then the
complete GenICam nodemap with all parameters and their current values are
listed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_info -h | -l | ([-o &lt;xml-output-file&gt;] [&lt;interface-id&gt;:]&lt;device-id&gt;[?&lt;node&gt;] [&lt;key&gt;=&lt;value&gt;] ...)

Provides information about GenICam transport layers, interfaces and devices.

Options:
-h   Prints help information and exits
-l   List all all available devices on all interfaces
-o   Filename to store XML description from specified device

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device
&lt;node&gt;         Optional name of category or parameter to be reported
&lt;key&gt;=&lt;value&gt;  Optional GenICam parameters to be changed in the given order before reporting

</code></pre></div></div>

<h3 id="gc_config">gc_config</h3>

<p>Can be used to list network specific information of GenICam compatible GigE
Vision 2 cameras. The network settings as well as all other parameters
provided via GenICam can be changed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_config -h | -l | ([&lt;interface-id&gt;:]&lt;device-id&gt; &lt;options&gt; ...)

Configuration of a GigE Vision device via GenICam.

-h             Prints help information and exits
-l             Lists all available GigE Vision devices

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device

Options:
-n &lt;id&gt;        Set user defined id
-d 1|0         Switch DHCP on or off
-p 1|0         Switch persistent IP on or off
-t 1|0         Switch precision time protocol (ptp) on or off
-i &lt;ip&gt;        Set persistent IP address
-s &lt;ip&gt;        Set subnet mask for persistent IP address
-g &lt;ip&gt;        Set default gateway for persistent IP address
--iponly       Show current IP of device instead of full summary
&lt;key&gt;=&lt;value&gt;  Optional GenICam parameters to be changed in the given order

</code></pre></div></div>

<h3 id="gc_stream">gc_stream</h3>

<p>This tool shows how to configure and stream images from a camera. GenICam
features can be configured directly from the command line. Images will be
stored in PGM or PPM format, depending on the image format.</p>

<p>Streams of the Roboception rc_visard can be enabled or disabled directly on
the command line by setting the appropriate GenICam parameters. The following
command enables intensity images, disables disparity images and stores 10
images:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_stream &lt;ID&gt; ComponentSelector=Intensity ComponentEnable=1 ComponentSelector=Disparity ComponentEnable=0 n=10

</code></pre></div></div>

<p>NOTE: Many image viewers can display PGM and PPM format. The sv tool of
<a href="https://github.com/roboception/cvkit">cvkit</a> can also be used.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_stream -h | [-f &lt;fmt&gt;] [-t] [&lt;interface-id&gt;:]&lt;device-id&gt; [n=&lt;n&gt;] [&lt;key&gt;=&lt;value&gt;] ...

Stores images from the specified device after applying the given optional GenICam parameters.

Options:
-h         Prints help information and exits
-t         Testmode, which does not store images and provides extended statistics
-f pnm|png Format for storing images. Default is pnm

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device
n=&lt;n&gt;          Optional number of images to be received (default is 1)
&lt;key&gt;=&lt;value&gt;  Optional GenICam parameters to be changed in the given order

</code></pre></div></div>

<h3 id="gc_pointcloud">gc_pointcloud</h3>

<p>This tool streams the left image, disparity, confidence and error from a
Roboception rc_visard sensor. It takes the first set of time synchronous
images, computes a colored point cloud and stores it in PLY ASCII format.
This tool demonstrates how to synchronize different images according to
their timestamps.</p>

<p>NOTE: PLY is a standard format for scanned 3D data that can be read by many
programs. The plyv tool of <a href="https://github.com/roboception/cvkit">cvkit</a> can
also be used for visualization.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_pointcloud -h | [-o &lt;output-filename&gt;] [&lt;interface-id&gt;:]&lt;device-id&gt;

Gets the first synchronized image set of the Roboception rc_visard, consisting
of left, disparity, confidence and error image, creates a point cloud and
stores it in ply ascii format.

Options:
-h        Prints help information and exits
-o &lt;file&gt; Set name of output file (default is 'rc_visard_&lt;timestamp&gt;.ply')

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device

</code></pre></div></div>

<h3 id="gc_file">gc_file</h3>

<p>This tool can be used to upload and download a file into the persistent user
space of an industrial camera.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tools/gc_file -h | [&lt;interface-id&gt;:]&lt;device-id&gt; -f | (&lt;device-file&gt; [-w|-r &lt;file&gt;])

Downloading or uploading a file via GenICam.

-h            Prints help information and exits
-f            Lists names of files on the device
-w &lt;file&gt;     Writes the given local file into the selected file on the device
-r &lt;file&gt;     Reads the selected file on the device and stores it as local file

The selected file is printed on std out if none of -f, -w and -r are given.

</code></pre></div></div>

<h2 id="definition-of-device-id">Definition of Device ID</h2>

<p>There are multiple ways of specifying an ID to identify a device.</p>

<ol>
  <li>
    <p>The serial number of the device serves as ID.
Example: <code class="language-plaintext highlighter-rouge">02911931</code></p>
  </li>
  <li>
    <p>The given ID can also be a user defined name. The user defined name is set
to <code class="language-plaintext highlighter-rouge">rc_visard</code> by default and can be changed with:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>gc_config &lt;ID&gt; -n &lt;user-defined-name&gt;
</code></pre></div>    </div>

    <p>This way of identifying a device can fail if there is more than one device
with the same name. No device is returned in this case.</p>

    <p>If the user defined name contains one or more colons, it must be preceded by
a colon (e.g. <code class="language-plaintext highlighter-rouge">:my:name</code>) or an interface ID (see below).</p>
  </li>
  <li>
    <p>The device ID of the GenTL producer (see <code class="language-plaintext highlighter-rouge">Transport Layer</code> section below)
may also be used. This ID is unique, but not persistent as it depends on the
implementation of the GenTL producer. Thus, it can change after software
updates. It often encodes the MAC address of the sensor in some way.</p>

    <p>Example: <code class="language-plaintext highlighter-rouge">00_14_2d_2c_6e_bb</code></p>
  </li>
</ol>

<p>All three options can be seen in the output of <code class="language-plaintext highlighter-rouge">gc_config -l</code>.</p>

<h3 id="optional-interface-id-prefix">Optional Interface ID prefix</h3>

<p>If the given ID contains a colon (i.e. <code class="language-plaintext highlighter-rouge">:</code>), the part before the (first)
colon is interpreted as interface ID and the part after the first colon is
treated as device ID. This is the format that <code class="language-plaintext highlighter-rouge">gc_config -l</code> shows. A device
with the given ID is only sought on the specified interface. This can be
useful if there are several ways to reach a device from a host computer,
e.g. via wireless and wired network connection, but a certain connection
type (e.g. wired) is preferred due to higher bandwidth and lower latency.</p>

<p>Examples: <code class="language-plaintext highlighter-rouge">eth0:00_14_2d_2c_6e_bb</code>, <code class="language-plaintext highlighter-rouge">eth1:02911931</code> or <code class="language-plaintext highlighter-rouge">wlan0:rc_visard</code></p>

<p>A colon at the beginning of the ID effectively defines an empty interface ID
which triggers looking on all interfaces.</p>

<p>If the given ID does not contain a colon, the ID is interpreted as the
device ID itself and is sought throughout all interfaces as well.</p>

<h2 id="finding-the-transport-layer">Finding the Transport Layer</h2>

<p>The communication to the device is done through a so called transport layer
(i.e. GenTL producer version 1.5 or higher). This package provides and installs
a default transport layer that implements the GigE Vision protocol for
connecting to the Roboception rc_visard. According to the GenICam
specification, the transport layer has the suffix ‘.cti’. The environment
variable <code class="language-plaintext highlighter-rouge">GENICAM_GENTL32_PATH</code> (for 32 bit applications) or <code class="language-plaintext highlighter-rouge">GENICAM_GENTL64_PATH</code>
(for 64 bit applications) must contain a list of paths that contain transport
layers. All transport layers are provided as systems to the application.</p>

<p>For convenience, if the environment variable is not defined or empty, it is
internally defined with the install path of the provided transport layer (as
known at compile time!). If the package is not installed, the install path is
changed after compilation or the package is moved to another location after
installation, then the transport layer may not be found. In this case, the
tools shows an error like e.g.:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'No transport layers found in path /usr/lib/rc_genicam_api'
</code></pre></div></div>

<p>In this case, the corresponding environment variable (see above) must be set to
the directory in which the transport layer (i.e. file with suffix ‘.cti’)
resides.</p>

<p>Under Windows, as second fall back additionally to the install path, the
directory of the executable is also added to the environment variable. Thus,
the install directory can be moved, as long as the cti file stays in the same
directory as the executable.</p>

<h2 id="network-optimization-under-linux">Network Optimization under Linux</h2>

<p>When images are received at a lower rate than set/exepected the most
likely problem is that this (user space) library cannot read the many UDP
packets fast enough resulting in incomplete image buffers.</p>

<h3 id="test-script">Test Script</h3>

<p>The <code class="language-plaintext highlighter-rouge">net_perf_check.sh</code> script performs some simple checks and should be run
while or after streaming images via GigE Vision.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./net_perf_check.sh --help
</code></pre></div></div>

<h3 id="jumbo-frames">Jumbo Frames</h3>

<p>First of all increasing the UDP packet size (using jubo frames) is strongly
recommended! Increase the MTU of your network interface to 9000, e.g.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo ifconfig eth0 mtu 9000
</code></pre></div></div>

<p>Also make sure that all network devices/switches between your host and the
sensor support this.</p>

<h3 id="sysctl-settings">sysctl settings</h3>

<p>There are several Linux sysctl options that can be modified to increase
performance for the GigE Vision usecase.</p>

<p>These values can be changed during runtime with <code class="language-plaintext highlighter-rouge">sysctl</code> or written to
<code class="language-plaintext highlighter-rouge">/etc/sysctl.conf</code> for persistence across reboots.</p>

<h4 id="rmem_max">rmem_max</h4>

<p>If the number of UDP receive buffer errors increases while streaming, increasing the
socket receive buffer size usually fixes the problem.</p>

<p>Check the errors with <code class="language-plaintext highlighter-rouge">net_perf_check.sh</code> or</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>netstat -us | grep errors
</code></pre></div></div>

<p>Increase max receive buffer size:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl -w net.core.rmem_max=33554432
</code></pre></div></div>

<h4 id="softirq">softirq</h4>

<p>Changing these values is usually not necessary, but can help if the kernel
is already dropping packets.</p>

<p>Check with <code class="language-plaintext highlighter-rouge">net_perf_check.sh</code> and increase the values if needed:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl -w net.core.netdev_max_backlog=2000
sudo sysctl -w net.core.netdev_budget=600
</code></pre></div></div>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rc_genicam_api">rc_genicam_api</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/rc_genicam_api">rc_genicam_api</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-roboception-rc_genicam_api
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-roboception-rc_genicam_api" role="menuitem" tabindex="-1" href="/r/rc_genicam_api/github-roboception-rc_genicam_api" data="github-roboception-rc_genicam_api">
                    <span class="glyphicon glyphicon-star"></span>
                    github-roboception-rc_genicam_api
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Roboception convenience layer around GenICam and GigE Vision.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/roboception/rc_genicam_api.git">https://github.com/roboception/rc_genicam_api.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-12-02
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rc_genicam_api/#melodic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rc_genicam_api/#melodic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rc_genicam_api/#melodic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/rc_genicam_api">rc_genicam_api</a></td>
                    <td>2.7.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="roboception-genicam-convenience-layer">Roboception GenICam Convenience Layer</h1>

<p>This package combines the Roboception convenience layer for images with the
GenICam reference implementation and a GigE Vision transport layer. It is a
self contained package that permits configuration and image streaming of
GenICam / GigE Vision 2.0 compatible cameras like the Roboception rc_visard.
The API is based on C++ 11 and can be compiled under Linux and Windows.</p>

<p>This package also provides some tools that can be called from the command line
for discovering cameras, changing their configuration and streaming images.</p>

<p><strong>Prebuilt binaries can be downloaded on the <a href="https://github.com/roboception/rc_genicam_api/releases">releases</a> page.</strong></p>

<h2 id="contents">Contents</h2>

<ul>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#minimum-requirements">Minimum Requirements</a></li>
  <li>
<a href="https://github.com/roboception/rc_genicam_api/tree/master/#compiling-and-installing">Compiling and Installing</a>
    <ul>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#linux">Linux</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#windows">Windows</a></li>
    </ul>
  </li>
  <li>
<a href="https://github.com/roboception/rc_genicam_api/tree/master/#description-of-tools">Description of Tools</a>
    <ul>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_info">gc_info</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_config">gc_config</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_stream">gc_stream</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_pointcloud">gc_pointcloud</a></li>
      <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#gc_file">gc_file</a></li>
    </ul>
  </li>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#definition-of-device-id">Definition of Device ID</a></li>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#finding-the-transport-layer">Finding the Transport Layer</a></li>
  <li><a href="https://github.com/roboception/rc_genicam_api/tree/master/#network-optimization-under-linux">Network Optimization under Linux</a></li>
</ul>

<h2 id="minimum-requirements">Minimum Requirements</h2>

<ul>
  <li>Linux x64 / i86: gcc &gt;= 4.8</li>
  <li>ARMhf: gcc &gt;= 4.9.4</li>
  <li>Linux AArch64: gcc &gt;= 5.4</li>
  <li>Windows 10: Visual Studio &gt;= VC140</li>
</ul>

<h2 id="compiling-and-installing">Compiling and Installing</h2>

<h3 id="linux">Linux</h3>

<p>Building follows the standard cmake build flow. Please make sure to set the
install path <em>before</em> compiling. Otherwise it can happen that the transport
layer is not found when calling the tools.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd &lt;main-directory&gt;
mkdir build
cd build
cmake -DCMAKE_INSTALL_PREFIX=&lt;install-directory&gt; ..
make
make install
</code></pre></div></div>

<h4 id="bash-completion">Bash completion</h4>

<p>To install bash completion, configure cmake with <code class="language-plaintext highlighter-rouge">-DINSTALL_COMPLETION=ON</code></p>

<h4 id="debian-package">Debian package</h4>

<p>A Debian package can be built with e.g.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd &lt;main-directory&gt;
mkdir build
cd build
cmake -DCMAKE_INSTALL_PREFIX=/usr ..
make
make package
</code></pre></div></div>

<h3 id="windows">Windows</h3>

<p>The main directory contains the script build_win.bat. Execute this script
in the <strong>Visual Studio Developer Command Prompt</strong> for building the package.
Alternatively, you can use cmake manually to generate a build project for
compilation with your favorite compiler.</p>

<p>NOTE: For using the libraries in own projects, define the symbol
<code class="language-plaintext highlighter-rouge">GENICAM_NO_AUTO_IMPLIB</code> in your project file to avoid linker problems with the
GenICam libraries.</p>

<h2 id="description-of-tools">Description of Tools</h2>

<p>The tools do not offer a graphical user interface. They are meant to be called
from a shell (e.g. Power Shell under Windows) or script and controlled by
command line parameters. Calling the tools without any parameters prints a help
text on the standard output.</p>

<p>NOTE: If any tool returns the error <code class="language-plaintext highlighter-rouge">No transport layers found in path ...</code>,
then read the section ‘Transport Layer’ below.</p>

<h3 id="gc_info">gc_info</h3>

<p>Lists all available systems (i.e. transport layers), interfaces and devices
with some information. If a device ID is given on the command line, then the
complete GenICam nodemap with all parameters and their current values are
listed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_info -h | -l | ([-o &lt;xml-output-file&gt;] [&lt;interface-id&gt;:]&lt;device-id&gt;[?&lt;node&gt;] [&lt;key&gt;=&lt;value&gt;] ...)

Provides information about GenICam transport layers, interfaces and devices.

Options:
-h   Prints help information and exits
-l   List all all available devices on all interfaces
-o   Filename to store XML description from specified device

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device
&lt;node&gt;         Optional name of category or parameter to be reported
&lt;key&gt;=&lt;value&gt;  Optional GenICam parameters to be changed in the given order before reporting

</code></pre></div></div>

<h3 id="gc_config">gc_config</h3>

<p>Can be used to list network specific information of GenICam compatible GigE
Vision 2 cameras. The network settings as well as all other parameters
provided via GenICam can be changed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_config -h | -l | ([&lt;interface-id&gt;:]&lt;device-id&gt; &lt;options&gt; ...)

Configuration of a GigE Vision device via GenICam.

-h             Prints help information and exits
-l             Lists all available GigE Vision devices

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device

Options:
-n &lt;id&gt;        Set user defined id
-d 1|0         Switch DHCP on or off
-p 1|0         Switch persistent IP on or off
-t 1|0         Switch precision time protocol (ptp) on or off
-i &lt;ip&gt;        Set persistent IP address
-s &lt;ip&gt;        Set subnet mask for persistent IP address
-g &lt;ip&gt;        Set default gateway for persistent IP address
--iponly       Show current IP of device instead of full summary
&lt;key&gt;=&lt;value&gt;  Optional GenICam parameters to be changed in the given order

</code></pre></div></div>

<h3 id="gc_stream">gc_stream</h3>

<p>This tool shows how to configure and stream images from a camera. GenICam
features can be configured directly from the command line. Images will be
stored in PGM or PPM format, depending on the image format.</p>

<p>Streams of the Roboception rc_visard can be enabled or disabled directly on
the command line by setting the appropriate GenICam parameters. The following
command enables intensity images, disables disparity images and stores 10
images:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_stream &lt;ID&gt; ComponentSelector=Intensity ComponentEnable=1 ComponentSelector=Disparity ComponentEnable=0 n=10

</code></pre></div></div>

<p>NOTE: Many image viewers can display PGM and PPM format. The sv tool of
<a href="https://github.com/roboception/cvkit">cvkit</a> can also be used.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_stream -h | [-f &lt;fmt&gt;] [-t] [&lt;interface-id&gt;:]&lt;device-id&gt; [n=&lt;n&gt;] [&lt;key&gt;=&lt;value&gt;] ...

Stores images from the specified device after applying the given optional GenICam parameters.

Options:
-h         Prints help information and exits
-t         Testmode, which does not store images and provides extended statistics
-f pnm|png Format for storing images. Default is pnm

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device
n=&lt;n&gt;          Optional number of images to be received (default is 1)
&lt;key&gt;=&lt;value&gt;  Optional GenICam parameters to be changed in the given order

</code></pre></div></div>

<h3 id="gc_pointcloud">gc_pointcloud</h3>

<p>This tool streams the left image, disparity, confidence and error from a
Roboception rc_visard sensor. It takes the first set of time synchronous
images, computes a colored point cloud and stores it in PLY ASCII format.
This tool demonstrates how to synchronize different images according to
their timestamps.</p>

<p>NOTE: PLY is a standard format for scanned 3D data that can be read by many
programs. The plyv tool of <a href="https://github.com/roboception/cvkit">cvkit</a> can
also be used for visualization.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gc_pointcloud -h | [-o &lt;output-filename&gt;] [&lt;interface-id&gt;:]&lt;device-id&gt;

Gets the first synchronized image set of the Roboception rc_visard, consisting
of left, disparity, confidence and error image, creates a point cloud and
stores it in ply ascii format.

Options:
-h        Prints help information and exits
-o &lt;file&gt; Set name of output file (default is 'rc_visard_&lt;timestamp&gt;.ply')

Parameters:
&lt;interface-id&gt; Optional GenICam ID of interface for connecting to the device
&lt;device-id&gt;    GenICam device ID, serial number or user defined name of device

</code></pre></div></div>

<h3 id="gc_file">gc_file</h3>

<p>This tool can be used to upload and download a file into the persistent user
space of an industrial camera.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tools/gc_file -h | [&lt;interface-id&gt;:]&lt;device-id&gt; -f | (&lt;device-file&gt; [-w|-r &lt;file&gt;])

Downloading or uploading a file via GenICam.

-h            Prints help information and exits
-f            Lists names of files on the device
-w &lt;file&gt;     Writes the given local file into the selected file on the device
-r &lt;file&gt;     Reads the selected file on the device and stores it as local file

The selected file is printed on std out if none of -f, -w and -r are given.

</code></pre></div></div>

<h2 id="definition-of-device-id">Definition of Device ID</h2>

<p>There are multiple ways of specifying an ID to identify a device.</p>

<ol>
  <li>
    <p>The serial number of the device serves as ID.
Example: <code class="language-plaintext highlighter-rouge">02911931</code></p>
  </li>
  <li>
    <p>The given ID can also be a user defined name. The user defined name is set
to <code class="language-plaintext highlighter-rouge">rc_visard</code> by default and can be changed with:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>gc_config &lt;ID&gt; -n &lt;user-defined-name&gt;
</code></pre></div>    </div>

    <p>This way of identifying a device can fail if there is more than one device
with the same name. No device is returned in this case.</p>

    <p>If the user defined name contains one or more colons, it must be preceded by
a colon (e.g. <code class="language-plaintext highlighter-rouge">:my:name</code>) or an interface ID (see below).</p>
  </li>
  <li>
    <p>The device ID of the GenTL producer (see <code class="language-plaintext highlighter-rouge">Transport Layer</code> section below)
may also be used. This ID is unique, but not persistent as it depends on the
implementation of the GenTL producer. Thus, it can change after software
updates. It often encodes the MAC address of the sensor in some way.</p>

    <p>Example: <code class="language-plaintext highlighter-rouge">00_14_2d_2c_6e_bb</code></p>
  </li>
</ol>

<p>All three options can be seen in the output of <code class="language-plaintext highlighter-rouge">gc_config -l</code>.</p>

<h3 id="optional-interface-id-prefix">Optional Interface ID prefix</h3>

<p>If the given ID contains a colon (i.e. <code class="language-plaintext highlighter-rouge">:</code>), the part before the (first)
colon is interpreted as interface ID and the part after the first colon is
treated as device ID. This is the format that <code class="language-plaintext highlighter-rouge">gc_config -l</code> shows. A device
with the given ID is only sought on the specified interface. This can be
useful if there are several ways to reach a device from a host computer,
e.g. via wireless and wired network connection, but a certain connection
type (e.g. wired) is preferred due to higher bandwidth and lower latency.</p>

<p>Examples: <code class="language-plaintext highlighter-rouge">eth0:00_14_2d_2c_6e_bb</code>, <code class="language-plaintext highlighter-rouge">eth1:02911931</code> or <code class="language-plaintext highlighter-rouge">wlan0:rc_visard</code></p>

<p>A colon at the beginning of the ID effectively defines an empty interface ID
which triggers looking on all interfaces.</p>

<p>If the given ID does not contain a colon, the ID is interpreted as the
device ID itself and is sought throughout all interfaces as well.</p>

<h2 id="finding-the-transport-layer">Finding the Transport Layer</h2>

<p>The communication to the device is done through a so called transport layer
(i.e. GenTL producer version 1.5 or higher). This package provides and installs
a default transport layer that implements the GigE Vision protocol for
connecting to the Roboception rc_visard. According to the GenICam
specification, the transport layer has the suffix ‘.cti’. The environment
variable <code class="language-plaintext highlighter-rouge">GENICAM_GENTL32_PATH</code> (for 32 bit applications) or <code class="language-plaintext highlighter-rouge">GENICAM_GENTL64_PATH</code>
(for 64 bit applications) must contain a list of paths that contain transport
layers. All transport layers are provided as systems to the application.</p>

<p>For convenience, if the environment variable is not defined or empty, it is
internally defined with the install path of the provided transport layer (as
known at compile time!). If the package is not installed, the install path is
changed after compilation or the package is moved to another location after
installation, then the transport layer may not be found. In this case, the
tools shows an error like e.g.:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'No transport layers found in path /usr/lib/rc_genicam_api'
</code></pre></div></div>

<p>In this case, the corresponding environment variable (see above) must be set to
the directory in which the transport layer (i.e. file with suffix ‘.cti’)
resides.</p>

<p>Under Windows, as second fall back additionally to the install path, the
directory of the executable is also added to the environment variable. Thus,
the install directory can be moved, as long as the cti file stays in the same
directory as the executable.</p>

<h2 id="network-optimization-under-linux">Network Optimization under Linux</h2>

<p>When images are received at a lower rate than set/exepected the most
likely problem is that this (user space) library cannot read the many UDP
packets fast enough resulting in incomplete image buffers.</p>

<h3 id="test-script">Test Script</h3>

<p>The <code class="language-plaintext highlighter-rouge">net_perf_check.sh</code> script performs some simple checks and should be run
while or after streaming images via GigE Vision.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./net_perf_check.sh --help
</code></pre></div></div>

<h3 id="jumbo-frames">Jumbo Frames</h3>

<p>First of all increasing the UDP packet size (using jubo frames) is strongly
recommended! Increase the MTU of your network interface to 9000, e.g.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo ifconfig eth0 mtu 9000
</code></pre></div></div>

<p>Also make sure that all network devices/switches between your host and the
sensor support this.</p>

<h3 id="sysctl-settings">sysctl settings</h3>

<p>There are several Linux sysctl options that can be modified to increase
performance for the GigE Vision usecase.</p>

<p>These values can be changed during runtime with <code class="language-plaintext highlighter-rouge">sysctl</code> or written to
<code class="language-plaintext highlighter-rouge">/etc/sysctl.conf</code> for persistence across reboots.</p>

<h4 id="rmem_max">rmem_max</h4>

<p>If the number of UDP receive buffer errors increases while streaming, increasing the
socket receive buffer size usually fixes the problem.</p>

<p>Check the errors with <code class="language-plaintext highlighter-rouge">net_perf_check.sh</code> or</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>netstat -us | grep errors
</code></pre></div></div>

<p>Increase max receive buffer size:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl -w net.core.rmem_max=33554432
</code></pre></div></div>

<h4 id="softirq">softirq</h4>

<p>Changing these values is usually not necessary, but can help if the kernel
is already dropping packets.</p>

<p>Check with <code class="language-plaintext highlighter-rouge">net_perf_check.sh</code> and increase the values if needed:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl -w net.core.netdev_max_backlog=2000
sudo sysctl -w net.core.netdev_budget=600
</code></pre></div></div>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/roboception/rc_genicam_api.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
