<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/amazon-eks-autonomous-driving-data-service/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">amazon-eks-autonomous-driving-data-service</li>
        <!--<li class="active">amazon-eks-autonomous-driving-data-service</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-default" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-default" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-default" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-default" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-primary" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class="disabled older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/amazon-eks-autonomous-driving-data-service">amazon-eks-autonomous-driving-data-service</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-aws-samples-amazon-eks-autonomous-driving-data-service
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-aws-samples-amazon-eks-autonomous-driving-data-service" role="menuitem" tabindex="-1" href="/r/amazon-eks-autonomous-driving-data-service/github-aws-samples-amazon-eks-autonomous-driving-data-service" data="github-aws-samples-amazon-eks-autonomous-driving-data-service">
                    <span class="glyphicon glyphicon-star"></span>
                    github-aws-samples-amazon-eks-autonomous-driving-data-service
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>humble</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/amazon-eks-autonomous-driving-data-service">amazon-eks-autonomous-driving-data-service</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-aws-samples-amazon-eks-autonomous-driving-data-service
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-aws-samples-amazon-eks-autonomous-driving-data-service" role="menuitem" tabindex="-1" href="/r/amazon-eks-autonomous-driving-data-service/github-aws-samples-amazon-eks-autonomous-driving-data-service" data="github-aws-samples-amazon-eks-autonomous-driving-data-service">
                    <span class="glyphicon glyphicon-star"></span>
                    github-aws-samples-amazon-eks-autonomous-driving-data-service
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jazzy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/amazon-eks-autonomous-driving-data-service">amazon-eks-autonomous-driving-data-service</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-aws-samples-amazon-eks-autonomous-driving-data-service
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-aws-samples-amazon-eks-autonomous-driving-data-service" role="menuitem" tabindex="-1" href="/r/amazon-eks-autonomous-driving-data-service/github-aws-samples-amazon-eks-autonomous-driving-data-service" data="github-aws-samples-amazon-eks-autonomous-driving-data-service">
                    <span class="glyphicon glyphicon-star"></span>
                    github-aws-samples-amazon-eks-autonomous-driving-data-service
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>kilted</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/amazon-eks-autonomous-driving-data-service">amazon-eks-autonomous-driving-data-service</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-aws-samples-amazon-eks-autonomous-driving-data-service
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-aws-samples-amazon-eks-autonomous-driving-data-service" role="menuitem" tabindex="-1" href="/r/amazon-eks-autonomous-driving-data-service/github-aws-samples-amazon-eks-autonomous-driving-data-service" data="github-aws-samples-amazon-eks-autonomous-driving-data-service">
                    <span class="glyphicon glyphicon-star"></span>
                    github-aws-samples-amazon-eks-autonomous-driving-data-service
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>rolling</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/amazon-eks-autonomous-driving-data-service">amazon-eks-autonomous-driving-data-service</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/a2d2_msgs">a2d2_msgs</a>
        
        <a class="label label-primary pkg-label" href="/p/fordav_msgs">fordav_msgs</a>
        
        <a class="label label-primary pkg-label" href="/p/fordav_pointcloud">fordav_pointcloud</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-aws-samples-amazon-eks-autonomous-driving-data-service
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-aws-samples-amazon-eks-autonomous-driving-data-service" role="menuitem" tabindex="-1" href="/r/amazon-eks-autonomous-driving-data-service/github-aws-samples-amazon-eks-autonomous-driving-data-service" data="github-aws-samples-amazon-eks-autonomous-driving-data-service">
                    <span class="glyphicon glyphicon-star"></span>
                    github-aws-samples-amazon-eks-autonomous-driving-data-service
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service.git">https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-13
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNKNOWN
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/amazon-eks-autonomous-driving-data-service/#github-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/amazon-eks-autonomous-driving-data-service/#github-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/amazon-eks-autonomous-driving-data-service/#github-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/a2d2_msgs">a2d2_msgs</a></td>
                    <td>1.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/fordav_msgs">fordav_msgs</a></td>
                    <td>1.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/fordav_pointcloud">fordav_pointcloud</a></td>
                    <td>1.0.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="autonomous-driving-data-service-adds">Autonomous Driving Data Service (ADDS)</h1>

<h2 id="overview">Overview</h2>

<p>ADDS is a <a href="https://www.ros.org/">ROS</a> based data service for replaying selected drive scenes from multimodal driving datasets. The multimodal dataset used with ADDS is typically gathered during the development of advanced driver assistance systems (ADAS), or autonomous driving systems (ADS), and comprises of 2D image, 3D point cloud and vehicle bus data.</p>

<p>One common reason for replaying drive data is to visualize the data. ADDS supports visualization of replayed data using any ROS visualization tool, for example <a href="https://foxglove.dev/">Foxglove studio</a>.</p>

<p>ADDS is supported on <a href="http://wiki.ros.org/noetic/Installation">ROS 1 <code class="language-plaintext highlighter-rouge">noetic</code></a>, and <a href="https://docs.ros.org/en/humble/index.html">ROS 2 <code class="language-plaintext highlighter-rouge">humble</code></a>. ADDS is pre-configured to use <a href="https://www.a2d2.audi/a2d2/en.html">Audi Autonomous Driving Dataset (A2D2)</a> and <a href="https://registry.opendata.aws/ford-multi-av-seasonal/">Ford Multi-AV Seasonal Dataset</a>. <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#extending-adds-to-other-datasets">ADDS can be extended</a> to other autonomous driving datasets.</p>

<p>In the following sections, we describe the ADDS <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#logical-dataset-design">logical dataset design</a> and <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#runtime-services">runtime data services</a>. This is followed by a <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#step-by-step-tutorial">step-by-step tutorial</a> for building and using ADDS with A2D2 dataset. Finally, we discuss <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#extending-adds-to-other-datasets">extending ADDS to other datasets</a>.</p>

<h2 id="logical-dataset-design">Logical dataset design</h2>

<p>Any multimodal dataset used with ADDS is assumed to contain drive data gathered from a <em>homogeneous</em> vehicle fleet. By <em>homogeneous</em>, we mean that all the vehicles in the fleet have the same vehicle sensor array configuration and vehicle bus data attributes. Each vehicle in the fleet can have distinct calibration data for the sensor array configuration.</p>

<p>Each ADDS runtime instance serves one multimodal dataset. To serve multiple datasets, you need corresponding number of ADDS runtime instances.</p>

<p>Each multimodal dataset is comprised of multimodal <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#frame-data">frame</a> and <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#tabular-data">tabular</a> data.</p>

<h3 id="frame-data">Frame data</h3>

<p>The serialized multimodal data acquired in the vehicle in some file-format, for example, <a href="https://www.asam.net/project-detail/asam-mdf-image-radar-lidar-sensor-logging/">MDF 4</a>, <a href="https://mcap.dev/">MCAP</a>, or <a href="http://wiki.ros.org/Bags">Ros bag</a>, must be decomposed into discreet timestamped 2D image and 3D point cloud data frames, and the frames must be stored in an Amazon S3 bucket under some <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/using-prefixes.html">bucket prefix</a>.</p>

<p>The workflow for decomposing the serialized data and storing it in S3 is not prescribed by ADDS.  For many public datasets, for example <a href="https://aws.amazon.com/marketplace/pp/prodview-ktq4gcovho2i4?sr=0-1&amp;ref_=beagle&amp;applicationId=AWSMPContessa#resources">A2D2: Audi Autonomous Driving Dataset</a>, and <a href="https://registry.opendata.aws/ford-multi-av-seasonal/">Ford Multi-AV Seasonal Dataset</a>, the serialized data has already been decomposed into discreet data frames. However, for these types of public datasets, one may still need to extract the discreet data frames from compressed archives (e.g. Zip or Tar files), and upload them to the ADDS S3 bucket.</p>

<p>For the discreet data frames stored in the S3 bucket, we need a fast retrieval mechanism so we can replay the data frames on-demand. For that purpose, we build a data frame <em>manifest</em> and store it in an <a href="https://docs.aws.amazon.com/redshift/">Amazon Redshift</a> database table: This is described in detail in <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#drive-data">drive data</a>. The manifest contains pointers to the data frames stored in S3 bucket.  For the A2D2 dataset, the extraction and loading of the <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#drive-data">drive data</a> is done automatically during the <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#step-by-step-tutorial">step-by-step tutorial</a>.</p>

<p>The vehicle bus data is stored in an Amazon Redshift table and is described in <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#vehicle-bus-data">vehicle bus data</a>.</p>

<h3 id="tabular-data">Tabular data</h3>

<p>Each logical multimodal dataset must use a distinct <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_Schemas_and_tables.html">Amazon Redshift named schema</a>. Below, we describe the data definition language (DDL) for creating the required Amazon Redshift tables within a given logical dataset’s <code class="language-plaintext highlighter-rouge">schema_name</code>.</p>

<p>For the A2D2 dataset, we use <code class="language-plaintext highlighter-rouge">a2d2</code> as the Redshift schema name, and all the required tables are created automatically during the <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#step-by-step-tutorial">step-by-step tutorial</a>.</p>

<p><a href="https://docs.aws.amazon.com/redshift/latest/dg/c_best-practices-defining-constraints.html">Amazon Redshift does not impose <em>Primary</em> and <em>Foreign</em> key constraints</a>. This point is especially important to understand so you can avoid duplication of data in Redshift tables when you <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#extending-adds-to-other-datasets">extend ADDS to other datasets</a>.</p>

<h4 id="vehicle-data">Vehicle data</h4>

<p>Vehicle data is stored in <code class="language-plaintext highlighter-rouge">schema_name.vehicle</code> table. The DDL for the table is shown below::</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CREATE TABLE IF NOT EXISTS schema_name.vehicle
(
	vehicleid VARCHAR(255) NOT NULL ENCODE lzo,
	description VARCHAR(255) ENCODE lzo,
	PRIMARY KEY (vehicleid)
)
DISTSTYLE ALL;
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">vehicleid</code> refers to the required unique vehicle identifier. The <code class="language-plaintext highlighter-rouge">description</code> is optional.</p>

<p>For the A2D2 dataset, the vehicle data is automatically loaded into the <code class="language-plaintext highlighter-rouge">a2d2.vehicle</code> table from <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/a2d2/data/vehicle.csv">vehicle.csv</a> during the <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#step-by-step-tutorial">step-by-step tutorial</a>.</p>

<h4 id="sensor-data">Sensor data</h4>

<p>Sensor data is stored in <code class="language-plaintext highlighter-rouge">schema_name.sensor</code> table. The DDL for the table is shown below::</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CREATE TABLE IF NOT EXISTS schema_name.sensor
(
	sensorid VARCHAR(255) NOT NULL ENCODE lzo,
	description VARCHAR(255) ENCODE lzo,
	PRIMARY KEY (sensorid)
)
DISTSTYLE ALL;
</code></pre></div></div>

<p>Each <code class="language-plaintext highlighter-rouge">sensorid</code> must be unique in a dataset and must refer to a sensor in the <em>homogeneous</em> vehicle sensor array configuration. The <code class="language-plaintext highlighter-rouge">description</code> is optional.</p>

<p>The implicit <code class="language-plaintext highlighter-rouge">sensorid</code> value <code class="language-plaintext highlighter-rouge">Bus</code> is <strong>reserved</strong> and denotes vehicle bus: This implicit value is <em>not</em> stored in the <code class="language-plaintext highlighter-rouge">schema_name.sensor</code> table.</p>

<p>For the A2D2 dataset, the sensor data is automatically loaded into the <code class="language-plaintext highlighter-rouge">a2d2.sensor</code> table from <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/a2d2/data/sensors.csv">sensors.csv</a> during the <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#step-by-step-tutorial">step-by-step tutorial</a>.</p>

<h4 id="drive-data">Drive data</h4>

<p>Image and point cloud data frames must be stored in an Amazon S3 bucket. Pointers to the S3 data frames must be stored in the <code class="language-plaintext highlighter-rouge">schema_name.drive_data</code> table. The DDL for the table is shown below:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>create table
schema_name.drive_data
(
	vehicle_id varchar(255) encode Text255 not NULL,
	scene_id varchar(255) encode Text255 not NULL,
	sensor_id varchar(255) encode Text255 not NULL,
	data_ts BIGINT not NULL sortkey,
	s3_bucket VARCHAR(255) encode lzo NOT NULL,
	s3_key varchar(255) encode lzo NOT NULL,
	primary key(vehicle_id, scene_id, sensor_id, data_ts),
	FOREIGN KEY(vehicle_id) references a2d2.vehicle(vehicleid),
	FOREIGN KEY(sensor_id) references a2d2.sensor(sensorid)
)
DISTSTYLE AUTO;
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">scene_id</code> is an arbitrary identifier for a unique drive scene.</p>

<p>The <code class="language-plaintext highlighter-rouge">data_ts</code> is the acquisition timestamp for a discreet data frame and is typically measured in <a href="https://en.wikipedia.org/wiki/International_Atomic_Time">international atomic time (TAI)</a>.</p>

<p>The <code class="language-plaintext highlighter-rouge">s3_bucket</code> is the name of the Amazon S3 bucket, and the <code class="language-plaintext highlighter-rouge">s3_key</code> is the <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/UsingObjects.html">key</a> for the data frame stored in the S3 bucket.</p>

<p>For the A2D2 dataset, the drive data is automatically loaded into the <code class="language-plaintext highlighter-rouge">a2d2.drive_data</code> table during the <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#step-by-step-tutorial">step-by-step tutorial</a>.</p>

<h4 id="vehicle-bus-data">Vehicle bus data</h4>

<p>To allow for the variation of the vehicle bus data across different datasets, the <code class="language-plaintext highlighter-rouge">schema_name.bus_data</code> table may define different columns across different datasets, but must have the same composite <em>primary key</em>, as detailed below. The DDL for the table is shown below, where the ellipsis (…) indicate dataset specific columns for storing the vehicle bus data.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>create table schema_name.bus_data
(
	vehicle_id varchar(255) encode Text255 not NULL,
	scene_id varchar(255) encode Text255 not NULL,
	data_ts BIGINT not NULL sortkey,
	
	... 

	primary key(vehicle_id, scene_id, data_ts),
	FOREIGN KEY(vehicle_id) references schema_name.vehicle(vehicleid)
)
DISTSTYLE AUTO;
</code></pre></div></div>

<p>For example, the DDL for the <code class="language-plaintext highlighter-rouge">a2d2.bus_data</code> table is shown below:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CREATE TABLE IF NOT EXISTS a2d2.bus_data 
( 
	vehicle_id varchar(255) encode Text255 not NULL, 
	scene_id varchar(255) encode Text255 not NULL, 
	data_ts BIGINT not NULL sortkey, 
	acceleration_x FLOAT4 not NULL, 
	acceleration_y FLOAT4 not NULL, 
	acceleration_z FLOAT4 not NULL, 
	accelerator_pedal FLOAT4 not NULL, 
	accelerator_pedal_gradient_sign SMALLINT not NULL, 
	angular_velocity_omega_x FLOAT4 not NULL, 
	angular_velocity_omega_y FLOAT4 not NULL, 
	angular_velocity_omega_z FLOAT4 not NULL, 
	brake_pressure FLOAT4 not NULL, 
	distance_pulse_front_left FLOAT4 not NULL, 
	distance_pulse_front_right FLOAT4 not NULL, 
	distance_pulse_rear_left FLOAT4 not NULL, 
	distance_pulse_rear_right FLOAT4 not NULL, 
	latitude_degree FLOAT4 not NULL, 
	latitude_direction SMALLINT not NULL, 
	longitude_degree FLOAT4 not NULL, 
	longitude_direction SMALLINT not NULL, 
	pitch_angle FLOAT4 not NULL, 
	roll_angle FLOAT4 not NULL, 
	steering_angle_calculated FLOAT4 not NULL, 
	steering_angle_calculated_sign SMALLINT not NULL, 
	vehicle_speed FLOAT4 not NULL, 
	primary key(vehicle_id, scene_id, data_ts), 
	FOREIGN KEY(vehicle_id) references a2d2.vehicle(vehicleid) 
) DISTSTYLE AUTO;
</code></pre></div></div>

<p>For the A2D2 dataset, the vehicle bus data is automatically loaded into the <code class="language-plaintext highlighter-rouge">a2d2.bus_data</code> table during the <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#step-by-step-tutorial">step-by-step tutorial</a>.</p>

<h2 id="runtime-services">Runtime services</h2>

<p>ADDS runtime services are deployed as <a href="https://kubernetes.io/docs/concepts/workloads/pods/">Kubernetes Deployments</a> in an <a href="https://aws.amazon.com/eks/">Amazon EKS</a> cluster. ADDS auto-scales using <a href="https://docs.aws.amazon.com/eks/latest/userguide/horizontal-pod-autoscaler.html">Horizontal Pod Autoscaler</a>, and <a href="https://docs.aws.amazon.com/eks/latest/userguide/cluster-autoscaler.html">Cluster Autoscaler</a>.</p>

<p>Concretely, there are two manifestations for the ADDS runtime services:</p>

<ol>
  <li>Rosbridge data service</li>
  <li>Kafka data service</li>
</ol>

<h3 id="rosbridge-data-service">Rosbridge data service</h3>

<p>Rosbridge data service uses <a href="http://wiki.ros.org/rosbridge_suite"><code class="language-plaintext highlighter-rouge">rosbridge</code></a> as the communication channel. The data client connects to the data service via the <code class="language-plaintext highlighter-rouge">rosbridge</code> web-socket. The data client sends the data request for sensor data on a pre-defined ROS topic, and the data service responds by publishing the requested sensor data on the requested ROS topics. If requested, the data service can serve the response data as ROS bags.</p>

<p>The data client for Rosbridge data service can be any ROS visualization tool that can communicate with <code class="language-plaintext highlighter-rouge">rosbridge</code>, for example, <a href="https://foxglove.dev/">Foxglove Studio</a>.</p>

<h3 id="kafka-data-service">Kafka data service</h3>

<p>Kafka data service uses <a href="https://kafka.apache.org/">Apache Kafka</a> as the communication channel. The data client sends the data request for sensor data on a pre-defined Kafka topic. The request includes the name of a Kafka response topic. The data service stages the response ROS bag(s) in the ROS bag store and responds with each ROS bag location on the Kafka response topic.</p>

<p>The data client for Kafka data service is a standalone <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/adds/src/kafka_data_client.py">Python application</a> that runs on the desktop and is used in conjunction with <a href="http://wiki.ros.org/rviz"><code class="language-plaintext highlighter-rouge">rviz</code></a> visualization tool. The Python application plays back the response ROS bag files on the local ROS server on the desktop, and the <code class="language-plaintext highlighter-rouge">rviz</code> tool is used to visualize the playback.</p>

<p><img src="https://raw.githubusercontent.com/aws-samples/amazon-eks-autonomous-driving-data-service/master/images/system-arch.jpeg" alt="High-level system architecture"></p>

<p><em>Figure 1. High-level system architecture for the data service</em></p>

<p>The data service runtime uses <a href="https://aws.amazon.com/eks/">Amazon Elastic Kubernetes Service (EKS)</a>.  Raw sensor data store and ROS bag store can be configured to use <a href="https://aws.amazon.com/s3/">Amazon S3</a>, <a href="https://aws.amazon.com/fsx/">Amazon FSx for Lustre</a>, or <a href="https://aws.amazon.com/efs/">Amazon Elastic File System (EFS)</a>. Raw data manifest store uses <a href="https://aws.amazon.com/redshift/redshift-serverless/">Amazon Redshift Serverless</a>. The data processing workflow for building and loading the raw data manifest uses <a href="https://aws.amazon.com/batch/">AWS Batch</a> with <a href="https://aws.amazon.com/fargate/">Amazon Fargate</a>, <a href="https://aws.amazon.com/step-functions/">AWS Step Functions</a>, and <a href="https://aws.amazon.com/glue/">Amazon Glue</a>. <a href="https://aws.amazon.com/msk/">Amazon Managed Streaming for Apache Kafka (MSK)</a> provides the communication channel for the Kafka data service.</p>

<p>The tutorial below walks-through the Rosbridge service, and, optionally, the Kafka service. The Rosbridge service feature set is a super set of the Kafka service.</p>

<h3 id="data-request-for-sensor-data">Data request for sensor data</h3>

<p>Concretely, imagine the data client wants to request drive scene  data from <a href="https://www.a2d2.audi/a2d2/en.html">Audi Autonomous Driving Dataset (A2D2)</a> for vehicle id <code class="language-plaintext highlighter-rouge">a2d2</code>, drive scene id <code class="language-plaintext highlighter-rouge">20190401145936</code>, starting at timestamp <code class="language-plaintext highlighter-rouge">1554121593909500</code> (microseconds) , and stopping at timestamp <code class="language-plaintext highlighter-rouge">1554122334971448</code> (microseconds). The data client wants the response to include data <strong>only</strong> from the <code class="language-plaintext highlighter-rouge">front-left camera</code> in <code class="language-plaintext highlighter-rouge">sensor_msgs/Image</code> ROS data type, and the <code class="language-plaintext highlighter-rouge">front-left lidar</code> in <code class="language-plaintext highlighter-rouge">sensor_msgs/PointCloud2</code> ROS data type. The data client wants the response data to be staged on Amazon FSx for Lustre file system, partitioned across multiple ROS bag files. Such a data request can be encoded in a JSON object, as shown below:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
	"vehicle_id": "a2d2",
	"scene_id": "20190401145936",
	"sensor_id": ["lidar/front_left", "camera/front_left"],
	"start_ts": 1554121593909500, 
	"stop_ts": 1554122334971448,
	"ros_topic": {"lidar/front_left": "/a2d2/lidar/front_left", 
			"camera/front_left": "/a2d2/camera/front_left"},
	"data_type": {"lidar/front_left": "sensor_msgs/PointCloud2",
			"camera/front_left": "sensor_msgs/Image"},
	"step": 1000000,
	"accept": "fsx/multipart/rosbag",
	"preview": false,
	...
}
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">sensor_id</code> values are keys in <code class="language-plaintext highlighter-rouge">ros_topic</code> and <code class="language-plaintext highlighter-rouge">data_type</code> maps that map the sensors to ROS topics, and ROS data types, respectively. For a detailed description of each request field shown in the example above, see <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#RequestFields">data request fields</a>.</p>

<h2 id="step-by-step-tutorial">Step-by-step tutorial</h2>

<h3 id="overview-1">Overview</h3>

<p>In this tutorial, we use <a href="https://www.a2d2.audi/a2d2/en.html">A2D2 autonomous driving dataset</a>. The high-level outline of the tutorial is as follows:</p>

<ol>
  <li><a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#prerequisites">Prerequisites</a></li>
  <li><a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#configure-data-service">Configure data service</a></li>
  <li><a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#build-dataset">Build dataset</a></li>
  <li><a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#run-rosbridge-data-service">Run Rosbridge data service</a></li>
  <li><a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#run-rosbridge-data-client">Run Rosbridge data client</a></li>
</ol>

<p>You may optionally run Kafka service:</p>

<ol>
  <li><a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#run-kafka-data-service">Run Kafka data service</a></li>
  <li><a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#run-kafka-data-client">Run Kafka data client</a></li>
</ol>

<h3 id="prerequisites">Prerequisites</h3>
<p>This tutorial assumes you have an <a href="https://aws.amazon.com/account/">AWS Account</a>, and you have <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_job-functions.html">system administrator job function</a> access to the AWS Management Console.</p>

<p>To get started:</p>

<ul>
  <li>Select your <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-zones.html">AWS Region</a>. The AWS Regions supported by this project include, us-east-1, us-east-2, us-west-2, eu-west-1, eu-central-1, ap-southeast-1, ap-southeast-2, ap-northeast-1, ap-northeast-2, and ap-south-1. The <a href="https://registry.opendata.aws/aev-a2d2/">A2D2</a> dataset used in this tutorial is stored in  <code class="language-plaintext highlighter-rouge">eu-central-1</code>.</li>
  <li>If you do not already have an Amazon EC2 key pair, <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html#prepare-key-pair">create a new Amazon EC2 key pair</a>. You need the key pair name to specify the <code class="language-plaintext highlighter-rouge">KeyName</code> parameter when creating the AWS CloudFormation stack below.</li>
  <li>You need an <a href="https://aws.amazon.com/s3/">Amazon S3</a> bucket in your selected AWS region. If you don’t have one, <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/create-bucket-overview.html">create a new Amazon S3 bucket</a> in the selected AWS region. You  use the S3 bucket name to specify the <code class="language-plaintext highlighter-rouge">S3Bucket</code> parameter in the stack. The bucket is used to store the <a href="https://www.a2d2.audi/a2d2/en.html">A2D2</a> data.</li>
  <li>Use the <a href="http://checkip.amazonaws.com/">public internet address</a> of your laptop as the base value for the <a href="https://docs.aws.amazon.com/vpc/latest/userguide/VPC_SecurityGroups.html">CIDR</a> to specify <code class="language-plaintext highlighter-rouge">DesktopRemoteAccessCIDR</code> parameter in the CloudFormation stack you create below.</li>
  <li>For all passwords used in this tutorial, we recommend using <em>strong</em> passwords using the best-practices recommended for <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_passwords_change-root.html">AWS root account user password</a>.</li>
</ul>

<h3 id="configure-data-service">Configure data service</h3>

<h4 id="create-aws-cloudformation-stack">Create AWS CloudFormation Stack</h4>
<p>The <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/Welcome.html">AWS CloudFormation</a> template <code class="language-plaintext highlighter-rouge">cfn/mozart.yml</code> in this repository creates <a href="https://aws.amazon.com/iam/">AWS Identity and Access Management (IAM)</a> resources, so when you <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-console-create-stack.html">create the CloudFormation Stack using the console</a>, in the <strong>Review</strong> step, you must check 
<strong>I acknowledge that AWS CloudFormation might create IAM resources.</strong></p>

<p>Create a new AWS CloudFormation stack using the <code class="language-plaintext highlighter-rouge">cfn/mozart.yml</code> template. The stack input parameters you must specify are described below:</p>

<table>
  <thead>
    <tr>
      <th>Parameter Name</th>
      <th>Parameter Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>KeyPairName</td>
      <td>This is a <em>required</em> parameter whereby you select the Amazon EC2 key pair name used for SSH access to the desktop. You must have access to the selected key pair’s private key to connect to your desktop.</td>
    </tr>
    <tr>
      <td>RedshiftMasterUserPassword</td>
      <td>This is a <em>required</em> parameter whereby you specify the Redshift database master user password.</td>
    </tr>
    <tr>
      <td>DesktopRemoteAccessCIDR</td>
      <td>This is a <em>required</em> parameter whereby you specify the public IP CIDR range from where you need remote access to your graphics desktop, e.g. 1.2.3.4/32, or 7.8.0.0/16.</td>
    </tr>
    <tr>
      <td>DesktopInstanceType</td>
      <td>This is a required parameter whereby you select an Amazon EC2 instance type for the ROS desktop. The default value, <code class="language-plaintext highlighter-rouge">g4dn.xlarge</code>, may not be available for your selected region, in which case, we recommend you try  one of the other available instance types.</td>
    </tr>
    <tr>
      <td>S3Bucket</td>
      <td>This is a <em>required</em> parameter whereby you specify the name of the Amazon S3 bucket to store your data. <strong>The S3 bucket must already exist.</strong>
</td>
    </tr>
  </tbody>
</table>

<p>For all other stack input parameters, default values are recommended during first walkthrough. See complete list of all the <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#InputParams">template input parameters</a> below.</p>

<h4 id="key-aws-resources">Key AWS resources</h4>

<p>The key resources in the CloudFormation stack are listed below:</p>

<ul>
  <li>A ROS desktop EC2 instance (default type <code class="language-plaintext highlighter-rouge">g4dn.xlarge</code>)</li>
  <li>An Amazon EKS cluster with 2 <a href="https://docs.aws.amazon.com/eks/latest/userguide/managed-node-groups.html">managed node groups</a>: <code class="language-plaintext highlighter-rouge">system-nodegroup</code>, and <code class="language-plaintext highlighter-rouge">work-nodegroup</code>. Both maanged node groups auto-scale as needed.</li>
  <li>Amazon <a href="https://aws.amazon.com/redshift/redshift-serverless/">Redshift Serverless</a> workgroup and namespace</li>
  <li>An Amazon <a href="https://aws.amazon.com/efs/">EFS</a> file system</li>
</ul>

<p>If you choose to run the optional Kafka data service and client, following additional resources are created:</p>

<ul>
  <li>An Amazon <a href="https://aws.amazon.com/msk/">MSK</a> cluster with 3 broker nodes (default type <code class="language-plaintext highlighter-rouge">kafka.m5.large</code>)</li>
  <li>An Amazon <a href="https://aws.amazon.com/fsx/lustre/">Fsx for Lustre</a> file system (default size 7,200  GiB)</li>
</ul>

<h4 id="connect-to-the-graphics-desktop-using-ssh">Connect to the graphics desktop using SSH</h4>

<ul>
  <li>Once the stack status in CloudFormation console is <code class="language-plaintext highlighter-rouge">CREATE_COMPLETE</code>, find the desktop instance launched in your stack in the Amazon EC2 console, and <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstancesLinux.html">connect to the instance using SSH</a> as user <code class="language-plaintext highlighter-rouge">ubuntu</code>, using your SSH key pair.</li>
  <li>When you connect to the desktop using SSH, and you see the message <code class="language-plaintext highlighter-rouge">"Cloud init in progress. Machine will REBOOT after cloud init is complete!!"</code>, disconnect and try later after about 20 minutes. The desktop installs the NICE DCV server on first-time startup, and reboots after the install is complete.</li>
  <li>If you see the message <code class="language-plaintext highlighter-rouge">NICE DCV server is enabled!</code>, run the command <code class="language-plaintext highlighter-rouge">sudo passwd ubuntu</code> to set a new password for user <code class="language-plaintext highlighter-rouge">ubuntu</code>. Now you are ready to connect to the desktop using the <a href="https://docs.aws.amazon.com/dcv/latest/userguide/client.html">NICE DCV client</a>
</li>
</ul>

<h4 id="connect-to-the-graphics-desktop-using-nice-dcv-client">Connect to the graphics desktop using NICE DCV Client</h4>
<ul>
  <li>Download and install the <a href="https://docs.aws.amazon.com/dcv/latest/userguide/client.html">NICE DCV client</a> on your laptop.</li>
  <li>Use the NICE DCV Client to login to the desktop as user <code class="language-plaintext highlighter-rouge">ubuntu</code>
</li>
  <li>When you first login to the desktop using the NICE DCV client, you are asked if you would like to upgrade the OS version. <strong>Do not upgrade the OS version</strong>.</li>
</ul>

<p>Now you are ready to proceed with the following steps. For all the commands in this tutorial, we assume the <em>working directory</em> to be ` ~/amazon-eks-autonomous-driving-data-service` on the graphics desktop.</p>

<h4 id="configure-eks-cluster-access">Configure EKS cluster access</h4>

<p>In this step, you will be prompted for <a href="https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html">AWS credentials</a> for the <strong>IAM user</strong> you used to create the AWS CloudFormation stack, above. If you instead used an <strong>IAM role</strong> to create the stack, you must first manually <a href="https://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/setup-credentials.html">setup the AWS credentials</a> in the <code class="language-plaintext highlighter-rouge">~/.aws/credentials</code> file with the following fields:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[default]
aws_access_key_id=
aws_secret_access_key=
aws_session_token=
</code></pre></div></div>

<p>The AWS credentials are used one-time to enable EKS cluster access from the ROS desktop, and are <em>automatically</em> <em>removed</em> at the end of this step. After setting up the credentials, in the <em>working directory</em>, run the command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./scripts/configure-eks-auth.sh
</code></pre></div></div>

<p>At the successful execution of this command, you <em>must</em> see <code class="language-plaintext highlighter-rouge">AWS Credentials Removed</code>.</p>

<h4 id="setup-developer-environment">Setup developer environment</h4>

<p>To setup the developer environment, in the <em>working directory</em>, run the command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./scripts/setup-dev.sh
</code></pre></div></div>

<p>This step also builds and pushes the data service container image into <a href="https://aws.amazon.com/ecr/">Amazon ECR</a>.</p>

<h3 id="build-dataset">Build dataset</h3>

<p>In this tutorial, we use <a href="https://www.a2d2.audi/a2d2/en.html">A2D2 autonomous driving dataset</a> dataset. This dataset is stored in compressed TAR format in <code class="language-plaintext highlighter-rouge">aev-autonomous-driving-dataset</code> S3 bucket in <code class="language-plaintext highlighter-rouge">eu-central-1</code>. We need to extract the A2D2 dataset into the S3 bucket for your stack, build the raw data manifest, and load the manifest into the raw data manifest store. To execute these steps, we use an <a href="https://docs.aws.amazon.com/step-functions/latest/dg/welcome.html">AWS Step Functions</a> state machine. To run the AWS Step Functions state machine, run the following command in the <em>working directory</em>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./scripts/a2d2-etl-steps.sh
</code></pre></div></div>

<p>The time to complete this step depends on many variable factors, including the choice of your AWS region, and may take anywhere from 12 - 24 hours, or possibly longer.  The AWS Region <code class="language-plaintext highlighter-rouge">eu-central-1</code> takes the least amount of time for this step because the A2D2 data set is located in this region.</p>

<p><strong>Note:</strong> If you have already run <code class="language-plaintext highlighter-rouge">./scripts/a2d2-etl-steps.sh</code> before in another CloudFormation stack that uses the same Amazon S3 bucket as your current stack, you can complete this step in less than 30 minutes by running the following script, instead:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./scripts/a2d2-etl-steps-skip-raw.sh
</code></pre></div></div>

<p>Note the <code class="language-plaintext highlighter-rouge">executionArn</code> of the state machine execution in the output of the previous command. To check the status the status of the execution, use following command, replacing <code class="language-plaintext highlighter-rouge">executionArn</code> below with your value:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws stepfunctions describe-execution --execution-arn executionArn
</code></pre></div></div>

<h3 id="run-rosbridge-data-service">Run Rosbridge data service</h3>

<p>To deploy the <code class="language-plaintext highlighter-rouge">a2d2-rosbridge</code> data service, run the following command in the <em>working directory</em>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>helm install --debug a2d2-rosbridge ./a2d2/charts/a2d2-rosbridge/
</code></pre></div></div>

<p>To verify that the <code class="language-plaintext highlighter-rouge">a2d2-rosbridge</code> deployment is running, run the command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get pods -n a2d2
</code></pre></div></div>

<p>This service provides a <code class="language-plaintext highlighter-rouge">Kubernetes service</code> for data client connection. To find the DNS endpoint for the service, run the command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get svc -n a2d2
</code></pre></div></div>

<p>The service takes approximately 5 minutes to be ready after it is started, so you may not be able to connect to the service right away.</p>

<h3 id="run-rosbridge-data-client">Run Rosbridge data client</h3>

<p>To publish data requests and visualize the response data, open <a href="https://foxglove.dev/">Foxglove Studio</a> on the desktop client, and sign-in using your <a href="https://foxglove.dev/">Foxglove Studio</a> sign-up credentials. Connect Foxglove Studio to your Rosbridge service. In Foxglove Studio, import example layout file <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/a2d2/config/rosbridge/foxglove/a2d2-ex1.json">a2d2/config/rosbridge/foxglove/a2d2-ex1.json</a>. Publish the data request, and wait for approximately 60 seconds to visualize the response.</p>

<p>The data request is published on the pre-defined ROS topic <code class="language-plaintext highlighter-rouge">/mozart/data_request</code>. Notice the <code class="language-plaintext highlighter-rouge">accept</code> field is set to <code class="language-plaintext highlighter-rouge">rosmsg</code>, which means the data for each requested sensor is directly published on its mapped ROS topic specified in the <code class="language-plaintext highlighter-rouge">ros_topic</code> map field. More examples can be found under <code class="language-plaintext highlighter-rouge">a2d2/config/rosbridge/foxglove/</code> folder.</p>

<p>You can exercise <em>control</em> on a running data request by publishing ROS messages on the pre-defined ROS topic <code class="language-plaintext highlighter-rouge">/mozart/data_request/control</code>. For example, to <em>pause</em> the request, you can publish:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{ "data": "{ \"command\": \"pause\" }" }
</code></pre></div></div>

<p>To <em>resume</em> the request, you can publish:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{ "data": "{ \"command\": \"play\" }" }
</code></pre></div></div>

<p>To <em>stop</em> the request, you can publish:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{ "data": "{ \"command\": \"stop\" }" }
</code></pre></div></div>

<p>When you are done with the Rosbridge data service, stop it by executing the command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>helm uninstall a2d2-rosbridge
</code></pre></div></div>

<h3 id="optional-run-kafka-data-service">(Optional) Run Kafka data service</h3>

<p>Update the CloudFormation stack to set the parameter <code class="language-plaintext highlighter-rouge">DataClientType</code> to <code class="language-plaintext highlighter-rouge">KafkaAndRosBridge</code>, and <code class="language-plaintext highlighter-rouge">FsxForLustre</code> to <code class="language-plaintext highlighter-rouge">enabled</code>. After CloudFormation update is completed, run the following command in the <em>working directory</em>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./scripts/setup-dev.sh
</code></pre></div></div>

<p>To deploy the <code class="language-plaintext highlighter-rouge">a2d2-data-service</code> Kafka service, run the following command in the <em>working directory</em>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>helm install --debug a2d2-data-service ./a2d2/charts/a2d2-data-service/
</code></pre></div></div>

<p>To verify that the <code class="language-plaintext highlighter-rouge">a2d2-data-service</code> deployment is running, run the command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get pods -n a2d2
</code></pre></div></div>

<p>The data service can be configured to use S3, FSx for Lustre, or EFS (see <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#PreloadEFS">Preload A2D2 data from S3 to EFS</a> ) as the raw sensor data store. The default raw data store is <code class="language-plaintext highlighter-rouge">fsx</code>, if FSx for Lustre is enabled (see <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#InputParams"><code class="language-plaintext highlighter-rouge">FSxForLustre</code></a> parameter), else it is <code class="language-plaintext highlighter-rouge">s3</code>.</p>

<p>Below is the Helm chart configuration for various raw data store options, with recommended Kubernetes resource requests for pod <code class="language-plaintext highlighter-rouge">memory</code> and <code class="language-plaintext highlighter-rouge">cpu</code>. This configuration is used in <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/a2d2/charts/a2d2-data-service/values.yaml"><code class="language-plaintext highlighter-rouge">a2d2/charts/a2d2-data-service/values.yaml</code></a>:</p>

<table>
  <thead>
    <tr>
      <th>Data source input</th>
      <th>
<code class="language-plaintext highlighter-rouge">values.yaml</code> Configuration</th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td> </td>
      <td>
<code class="language-plaintext highlighter-rouge">fsx</code> (default)</td>
      <td>
<code class="language-plaintext highlighter-rouge">a2d2.requests.memory: "72Gi"</code> <br> <code class="language-plaintext highlighter-rouge">a2d2.requests.cpu: "8000m"</code> <br> <code class="language-plaintext highlighter-rouge">configMap.data_store.input: "fsx"</code>
</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">efs</code></td>
      <td>
<code class="language-plaintext highlighter-rouge">a2d2.requests.memory: "32Gi"</code> <br> <code class="language-plaintext highlighter-rouge">a2d2.requests.cpu: "1000m"</code> <br> <code class="language-plaintext highlighter-rouge">configMap.data_store.input: "efs"</code>
</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">s3</code></td>
      <td>
<code class="language-plaintext highlighter-rouge">a2d2.requests.memory: "8Gi"</code> <br> <code class="language-plaintext highlighter-rouge">a2d2.requests.cpu: "1000m"</code> <br> <code class="language-plaintext highlighter-rouge">configMap.data_store.input: "s3"</code>
</td>
    </tr>
  </tbody>
</table>

<p>For matching data staging options in data client request, see <code class="language-plaintext highlighter-rouge">request.accept</code> field in <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#RequestFields">data request fields</a>.</p>

<h3 id="optional-run-kafka-data-client">(Optional) Run Kafka data client</h3>

<p>To visualize the response data, we use <a href="https://github.com/ros2/rviz">rviz2</a> tool on the graphics desktop. Open a terminal on the desktop, and run <code class="language-plaintext highlighter-rouge">rviz2</code> (<code class="language-plaintext highlighter-rouge">rviz</code> for ROS 1).</p>

<p>In the <code class="language-plaintext highlighter-rouge">rviz2</code> tool, use <strong>File&gt;Open Config</strong> to select  <code class="language-plaintext highlighter-rouge">/home/ubuntu/amazon-eks-autonomous-driving-data-service/a2d2/config/rviz2/a2d2.rviz</code> as the <code class="language-plaintext highlighter-rouge">rviz</code> configuration. You should see <code class="language-plaintext highlighter-rouge">rviz2</code> tool configured with two windows for visualizing response data: image data on the left, and point cloud data on the right. This <code class="language-plaintext highlighter-rouge">rviz2</code> configuration is specific to the examples we run below.</p>

<p>To run the Kafka data client with an example data request, run the following command in the <em>working directory</em>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python ./a2d2/src/data_client.py --config ./a2d2/config/c-config-ex1.json
</code></pre></div></div>

<p>After a brief delay, you should be able to <em>preview</em> the response data in the <code class="language-plaintext highlighter-rouge">rviz2</code> tool.</p>

<p>To <em>preview</em> data from a different drive scene, execute:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python ./a2d2/src/data_client.py --config ./a2d2/config/c-config-ex2.json 
</code></pre></div></div>

<p>You can set <code class="language-plaintext highlighter-rouge">"preview": false</code> in the data client config files, and run the above commands again to view the complete response.</p>

<p>The data client exits automatically at the end of each successful run. You can use CTRL+C to exit the data client manually.</p>

<p>When you are done with the Kafka data service, stop it by executing the command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>helm uninstall a2d2-data-service
</code></pre></div></div>

<h3 id="-preload-a2d2-data-from-s3-to-efs">
<a name="PreloadEFS"></a> Preload A2D2 data from S3 to EFS</h3>

<p>This step can be executed anytime after <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#configure-data-service">Configure data service</a>. and is required <strong>only</strong> if you plan to configure the data service to use EFS as the raw data store, otherwise, it may be safely skipped. Execute following command to start preloading data from your S3 bucket to the EFS file system:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl apply -n a2d2 -f a2d2/efs/stage-data-a2d2.yaml
</code></pre></div></div>

<p>To check if the step is complete, execute:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get pods stage-efs-a2d2 -n a2d2
</code></pre></div></div>

<p>If the pod is still <code class="language-plaintext highlighter-rouge">Running</code>, the step has not yet completed. This step takes approximately 6.5 hours to complete.</p>

<h2 id="extending-adds-to-other-datasets">Extending ADDS to other datasets</h2>

<p>This section describes how to extend ADDS to work with datasets other than <code class="language-plaintext highlighter-rouge">a2d2</code>. We recommend reading the entire section before executing any of the steps in this section.</p>

<p>First, we must select a dataset name for the dataset you wish to add to ADDS. The dataset name should start with a letter, be all lowercase, and only contain alphanumeric characters. For the purposes of this documentation, we assume you want to add a dataset named <code class="language-plaintext highlighter-rouge">ds1</code>. To add a new dataset to ADDS, for example dataset <code class="language-plaintext highlighter-rouge">ds1</code>, start by executing following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./scripts/add-dataset.sh ds1
</code></pre></div></div>

<p>The above command copies the <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/a2d2/">a2d2</a> folder to <code class="language-plaintext highlighter-rouge">ds1</code> folder, and customizes the files in the <code class="language-plaintext highlighter-rouge">ds1</code> folder to the extent automatically possible. This command also copies <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/adds/src/a2d2_ros_util.py">a2d2_ros_util.py</a> to <code class="language-plaintext highlighter-rouge">adds/src/ds1_ros_util.py</code>, ready for your customization. You must complete the customization of the new dataset following the steps below:</p>

<ol>
  <li><a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#identify-vehicle-bus-data-attributes">Identify vehicle bus data attributes</a></li>
  <li><a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#create-redshift-schema-and-tables">Create Redshift schema and tables</a></li>
  <li><a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#load-vehicle-and-sensor-data">Load vehicle and sensor data</a></li>
  <li><a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#extract-and-load-vehicle-drive-and-bus-data">Extract and upload vehicle drive and bus data</a></li>
  <li><a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#define-vehicle-bus-ros-message">Define vehicle bus ROS message</a></li>
  <li><a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#extend-rosutil">Extend <code class="language-plaintext highlighter-rouge">RosUtil</code></a></li>
  <li><a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#specify-calibration-data-path">Specify calibration data path</a></li>
  <li><a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#customize-data-client-configuration-files">Customize data client configuration files</a></li>
  <li><a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#apply-tutorial-steps-to-your-dataset">Apply tutorial steps to your dataset</a></li>
</ol>

<h3 id="identify-vehicle-bus-data-attributes">Identify vehicle bus data attributes</h3>

<p>To extend ADDS to other datasets, you must identify the vehicle bus data attributes for your vehicle fleet. You will need this information to define the <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#vehicle-bus-data">vehicle bus data</a> table columns, and for <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#define-vehicle-bus-ros-message">defining a new custom ROS message</a> for your vehicle bus data.</p>

<h3 id="create-redshift-schema-and-tables">Create Redshift schema and tables</h3>

<p>Create a <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_Schemas_and_tables.html">Redshift schema</a> for your dataset.  Choose the dataset Redshift schema name the same as the dataset name, for example, <code class="language-plaintext highlighter-rouge">ds1</code>: This is not a hard requirement, but this will make customization for your dataset much simpler.</p>

<p>Create the Redshift tables <code class="language-plaintext highlighter-rouge">ds1.vehicle</code>, <code class="language-plaintext highlighter-rouge">ds1.sensor</code>, and <code class="language-plaintext highlighter-rouge">ds1.drive_data</code>,  using the DDL files in the folder <code class="language-plaintext highlighter-rouge">ds1/ddl/</code>.</p>

<p>Recall, when creating the DDL for <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#vehicle-bus-data">vehicle bus data</a> table, you must define the table columns corresponding to the specific attributes in <em>your vehicle bus data</em>, while maintaining the <em>prescribed</em> primary key. Therefore, modify <code class="language-plaintext highlighter-rouge">ds1/ddl/bus_data.ddl</code> for your vehicle bus data, and create <code class="language-plaintext highlighter-rouge">ds1.bus_data</code> table.</p>

<h3 id="load-vehicle-and-sensor-data">Load vehicle and sensor data</h3>

<p>Load data into the <code class="language-plaintext highlighter-rouge">ds1.vehicle</code> and <code class="language-plaintext highlighter-rouge">ds1.sensor</code> tables.</p>

<p>See <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/a2d2/data/vehicle.csv">vehicle.csv</a> and <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/a2d2/data/sensors.csv">sensors.csv</a> for A2D2 vehicle and sensor data, but note that your data may be be different, and will depend on your vehicle and sensor identifiers. It is recommended that you use user-friendly names to identify the vehicles and sensors, since they appear in each data request.</p>

<h3 id="extract-and-load-vehicle-drive-and-bus-data">Extract and load vehicle drive and bus data</h3>

<p>This is the step where you decompose the serialized data acquired in the vehicle into discreet timestamped 2D image and 3D point cloud data frames, and upload the data frames into the ADDS S3 bucket. You must also build a manifest for the data frames, and upload the manifest to the <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#drive-data">drive data</a> table.</p>

<p>You may want to use an automated workflow to implement this step. In AWS, you have the option of using <a href="https://aws.amazon.com/step-functions/">AWS Step Functions</a>, or <a href="https://aws.amazon.com/managed-workflows-for-apache-airflow/">Amazon Managed Workflows for Apache Airflow (MWAA)</a> for orchestrating the workflow. You may also find <a href="https://aws.amazon.com/batch/">AWS Batch</a> useful in implementing various steps in the workflow. For example, for the A2D2 dataset, we use AWS Step Functions and AWS Batch to extract and upload the <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#drive-data">drive data</a> and the <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#vehicle-bus-data">vehicle bus data</a>.</p>

<p>You may want to combine the steps <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#create-redshift-schema-and-tables">Create Redshift schema and tables</a>, <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#load-vehicle-and-sensor-data">Load vehicle and sensor data</a> and this step in a single script (see, for example, <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/scripts/a2d2-etl-steps.sh">scripts/a2d2-etl-steps.sh</a> used for A2D2 dataset).</p>

<h3 id="define-vehicle-bus-ros-message">Define vehicle bus ROS message</h3>

<p>Next, define a <a href="https://docs.ros.org/en/crystal/Tutorials/Custom-ROS2-Interfaces.html">custom ROS 2 message</a> for encapsulating your vehicle bus data. You may create a <a href="http://wiki.ros.org/ROS/Tutorials/CreatingMsgAndSrv">custom ROS 1 message</a>, if you plan to use ROS 1.</p>

<p>For example, for A2D2 dataset, the custom vehicle bus ROS 2 message, <code class="language-plaintext highlighter-rouge">a2d2_msgs/Bus</code>, is defined in <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/adds/colcon_ws/src/a2d2_msgs/">adds/colcon_ws/src/a2d2_msgs/</a>, and for ROS 1 in <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/adds/catkin_ws/src/a2d2_msgs/">adds/catkin_ws/src/a2d2_msgs/</a>.</p>

<p>Keeping with our assumed dataset name, you could define the custom vehicle bus ROS 2 message in <code class="language-plaintext highlighter-rouge">adds/colcon_ws/src/ds1_msgs/</code>, and for ROS 1 in <code class="language-plaintext highlighter-rouge">adds/catkin_ws/src/ds1_msgs/</code>.</p>

<h3 id="extend-rosutil">Extend <code class="language-plaintext highlighter-rouge">RosUtil</code>
</h3>

<p>In this step, you must extend the <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/adds/src/common/ros_util.py">RosUtil</a> <a href="https://docs.python.org/3/library/abc.html">abc</a> class to implement the <em>abstract</em> methods. For example, for the A2D2 dataset, we implement the Python class <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/adds/src/a2d2_ros_util.py">a2d2_ros_util.DatasetRosUtil</a> to extend the abstract <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/adds/src/common/ros_util.py">RosUtil</a> class.</p>

<p>Keeping our assumed dataset name, modify <code class="language-plaintext highlighter-rouge">adds/src/ds1_ros_util.py</code> to implement the <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/adds/src/common/ros_util.py">RosUtil</a> abstract class for <code class="language-plaintext highlighter-rouge">ds1</code> dataset. Note, the extended class you implement must be placed under <code class="language-plaintext highlighter-rouge">adds/src</code>.</p>

<h3 id="specify-calibration-data-path">Specify calibration data path</h3>

<p>Next, we need to customize the Helm charts used to run ADDS with your dataset. Most of the customization has already been done automatically. You only need to customize  the values in <code class="language-plaintext highlighter-rouge">calibration</code> fields in <code class="language-plaintext highlighter-rouge">ds1/charts/ds1-data-service/values.yaml</code> and <code class="language-plaintext highlighter-rouge">ds1/charts/ds1-rosbridge/values.yaml</code> files. For example, A2D2 dataset uses following <code class="language-plaintext highlighter-rouge">calibration</code> fields:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>configMap:
{
	...

	"calibration": {
		"cal_bucket": "",
		"cal_key": "a2d2/cams_lidars.json"
	}
}
</code></pre></div></div>

<p>Leave the <code class="language-plaintext highlighter-rouge">calibration.cal_bucket</code> as shown above.</p>

<p>The <code class="language-plaintext highlighter-rouge">cal_key</code> must point to the bucket prefix where your vehicle calibration data is stored. The <code class="language-plaintext highlighter-rouge">cal_key</code> may point to a calibration file, as in the example above, or to an S3 bucket folder: This is dependent on how you store your vehicle calibration data. The python class implemented in <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#extend-rosutil">Extend <code class="language-plaintext highlighter-rouge">RosUtil</code></a> uses the calibration data to implement its abstract methods.</p>

<h3 id="customize-data-client-configuration-files">Customize data client configuration files</h3>

<p>You must customize the <code class="language-plaintext highlighter-rouge">"requests"</code> in the data client JSON configuration files under <code class="language-plaintext highlighter-rouge">ds1/config</code> to work with your dataset. We will explain this customization using the example of <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/a2d2/config/c-config-ex1.json">c-config-ex1.json</a>, which makes a data request for <code class="language-plaintext highlighter-rouge">a2d2</code> data:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"requests": [{
	"kafka_topic": "a2d2", 
	"vehicle_id": "a2d2",
	"scene_id": "20190401121727",
	"sensor_id": ["bus", "lidar/front_left", "camera/front_left"],
	"start_ts": 1554115465612291, 
	"stop_ts": 1554115765612291,
	"ros_topic": {"bus": "/a2d2/bus", "lidar/front_left": "/a2d2/lidar/front_left", 
			"camera/front_left": "/a2d2/camera/front_left"},
	"data_type": {"bus": "a2d2_msgs/Bus", "lidar/front_left": "sensor_msgs/PointCloud2",
			"camera/front_left": "sensor_msgs/Image"},
	"step": 1000000,
	"accept": "fsx/multipart/rosbag",
	"preview": true
}]
</code></pre></div></div>

<p>All the fields above need to be customized for your dataset. For example, your <code class="language-plaintext highlighter-rouge">kafka_topic</code> value will be <code class="language-plaintext highlighter-rouge">ds1</code>. Your <code class="language-plaintext highlighter-rouge">vehicle_id</code> will depend on the values in the <code class="language-plaintext highlighter-rouge">ds1.vehicle</code> table. your <code class="language-plaintext highlighter-rouge">sensor_id</code> values (except for the implicit value <code class="language-plaintext highlighter-rouge">bus</code>, which is always the same for all datasets) will depend on the values in the <code class="language-plaintext highlighter-rouge">ds1.sensor</code>  table. The Ros message data type for your bus data will be different. Your <code class="language-plaintext highlighter-rouge">scene_id</code> will be different. Your <code class="language-plaintext highlighter-rouge">start_ts</code> and <code class="language-plaintext highlighter-rouge">stop_ts</code> values will be different. Your <code class="language-plaintext highlighter-rouge">ros_topic</code> values may be different. You will need to customize all these values so you can request data from <code class="language-plaintext highlighter-rouge">ds1</code> dataset.</p>

<h3 id="apply-tutorial-steps-to-your-dataset">Apply tutorial steps to your dataset</h3>

<p>Next, walk-through the <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#step-by-step-tutorial">step-by-step tutorial</a>, but starting with the step <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#setup-developer-environment">Setup developer environment</a>. You will need to make following changes to the tutorial steps, so you can use ADDS with <code class="language-plaintext highlighter-rouge">ds1</code> dataset:</p>

<ul>
  <li>Instead of <code class="language-plaintext highlighter-rouge">a2d2</code>, use <code class="language-plaintext highlighter-rouge">ds1</code>.</li>
  <li>In <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#build-dataset">Build dataset</a> step, you will need to  execute your ETL script instead of <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/scripts/a2d2-etl-steps.sh">scripts/a2d2-etl-steps.sh</a> so you can launch your workflow to upload your data into S3 and Redshift tables.</li>
</ul>

<h2 id="deleting-the-aws-cloudformation-stack">Deleting the AWS CloudFormation stack</h2>

<p>When you no longer need the ADDS data service, you may delete the AWS CloudFormation stack from the AWS CloudFormation console. Deleting the CloudFormation stack deletes all the resources in the stack (including FSx for Lustre and EFS), <em>except for the Amazon S3 bucket</em>.</p>

<h2 id="-reference">
<a name="Reference"></a> Reference</h2>

<h3 id="-data-client-request-fields">
<a name="RequestFields"></a> Data client request fields</h3>
<p>Below, we explain the semantics of the various fields in the data client request JSON object.</p>

<table>
  <thead>
    <tr>
      <th>Request field name</th>
      <th>Request field description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">servers</code></td>
      <td>The <code class="language-plaintext highlighter-rouge">servers</code> identify the <a href="https://aws.amazon.com/msk/">AWS MSK</a> Kafka cluster endpoint.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">delay</code></td>
      <td>The <code class="language-plaintext highlighter-rouge">delay</code> specifies the delay in seconds that the data client delays sending the request. Default value is <code class="language-plaintext highlighter-rouge">0</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_time</code></td>
      <td>(Optional) The <code class="language-plaintext highlighter-rouge">use_time</code> specifies whether to use the <code class="language-plaintext highlighter-rouge">received</code>  time, or <code class="language-plaintext highlighter-rouge">header</code> time when playing back the received messages. Default value is <code class="language-plaintext highlighter-rouge">received</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">requests</code></td>
      <td>The JSON document sent by the client to the data service must include an array of one or more data <code class="language-plaintext highlighter-rouge">request</code> objects.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">request.kafka_topic</code></td>
      <td>For Kafka data service only. The <code class="language-plaintext highlighter-rouge">kafka_topic</code> specifies the Kafka topic on which the data request is sent from the client to the Kafka data service.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">request.vehicle_id</code></td>
      <td>The <code class="language-plaintext highlighter-rouge">vehicle_id</code> is used to identify the relevant drive scene dataset.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">request.scene_id</code></td>
      <td>The <code class="language-plaintext highlighter-rouge">scene_id</code> identifies the drive scene of interest, which in this example is <code class="language-plaintext highlighter-rouge">20190401145936</code>, which in this example is a string representing the date and time of the drive scene, but in general could be any unique value.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">request.start_ts</code></td>
      <td>The <code class="language-plaintext highlighter-rouge">start_ts</code> (microseconds) specifies the start timestamp for the drive scene data request.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">request.stop_ts</code></td>
      <td>The <code class="language-plaintext highlighter-rouge">stop_ts</code> (microseconds) specifies the stop timestamp for the drive scene data request.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">request.ros_topic</code></td>
      <td>The <code class="language-plaintext highlighter-rouge">ros_topic</code> is a map from <code class="language-plaintext highlighter-rouge">sensor ids</code> in the vehicle to ROS topics.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">request.data_type</code></td>
      <td>The <code class="language-plaintext highlighter-rouge">data_type</code> is a map from <code class="language-plaintext highlighter-rouge">sensor ids</code> to ROS data types.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">request.step</code></td>
      <td>The <code class="language-plaintext highlighter-rouge">step</code> is the discreet time interval (microseconds) used to discretize the timespan between <code class="language-plaintext highlighter-rouge">start_ts</code> and <code class="language-plaintext highlighter-rouge">stop_ts</code>. If <code class="language-plaintext highlighter-rouge">request.accept</code> value contains <code class="language-plaintext highlighter-rouge">multipart</code>, the data service responds with a  ROS bag for each discreet <code class="language-plaintext highlighter-rouge">step</code>: See <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#AcceptValues">possible values</a> below.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">request.accept</code></td>
      <td>The <code class="language-plaintext highlighter-rouge">accept</code> specifies the response data staging format acceptable to the client: See <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/#AcceptValues">possible values</a> below.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">request.image</code></td>
      <td>(Optional) The value <code class="language-plaintext highlighter-rouge">undistorted</code> undistorts the camera image. Undistoring an image slows down the image frame rate. Default value is <code class="language-plaintext highlighter-rouge">original</code> distorted image.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">request.lidar_view</code></td>
      <td>(Optional) The value <code class="language-plaintext highlighter-rouge">vehicle</code> transforms lidar points to <code class="language-plaintext highlighter-rouge">vehicle</code> frame of reference view. Default value is <code class="language-plaintext highlighter-rouge">camera</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">request.preview</code></td>
      <td>If the <code class="language-plaintext highlighter-rouge">preview</code> field is set to <code class="language-plaintext highlighter-rouge">true</code>, the data service returns requested data over a single time <code class="language-plaintext highlighter-rouge">step</code> starting from <code class="language-plaintext highlighter-rouge">start_ts</code> , and ignores the <code class="language-plaintext highlighter-rouge">stop_ts</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">request.no_playback</code></td>
      <td>(Optional) This only applies to Kafka data client. If the <code class="language-plaintext highlighter-rouge">no_playback</code> field is set to <code class="language-plaintext highlighter-rouge">true</code>, the data client <em>does not playback</em> the response ROS bags. Default value is <code class="language-plaintext highlighter-rouge">false</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">request.storage_id</code></td>
      <td>For ROS2 only. The storage id of <code class="language-plaintext highlighter-rouge">rosbag2</code> storage plugin. The default value is <code class="language-plaintext highlighter-rouge">mcap</code>. (See <a href="https://github.com/ros-tooling/rosbag2_storage_mcap">rosbag2_storage_mcap</a> )</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">request.storage_preset_profile</code></td>
      <td>For ROS2 only. The storage preset profile of <code class="language-plaintext highlighter-rouge">rosbag2</code> storage plugin. The default value is <code class="language-plaintext highlighter-rouge">zstd_fast</code>. (See <a href="https://github.com/ros-tooling/rosbag2_storage_mcap">rosbag2_storage_mcap</a> )</td>
    </tr>
  </tbody>
</table>

<h4 id="--possible-requestaccept-field-values">
<a name="AcceptValues"></a>  Possible <code class="language-plaintext highlighter-rouge">request.accept</code> field values</h4>

<p>Rosbridge data service publishes response data on ROS topic <code class="language-plaintext highlighter-rouge">/mozart/data_response</code> for all values of <code class="language-plaintext highlighter-rouge">request.accept</code> shown below, except <code class="language-plaintext highlighter-rouge">rosmsg</code>.</p>

<table>
  <thead>
    <tr>
      <th>
<code class="language-plaintext highlighter-rouge">request.accept</code> value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">rosmsg</code></td>
      <td>For Rosbridge data service only. Publish response data on the requested ROS topics.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">fsx/multipart/rosbag</code></td>
      <td>Stage response data on Amazon FSx for Lustre in multiple ROS bags.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">efs/multipart/rosbag</code></td>
      <td>Stage response data on Amazon EFS in multiple ROS bags.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">s3/multipart/rosbag</code></td>
      <td>Stage response data on Amazon S3 in multiple ROS bags.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">fsx/singlepart/rosbag</code></td>
      <td>Stage response data on Amazon FSx for Lustre in a single ROS bag.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">efs/singlepart/rosbag</code></td>
      <td>Stage response data on Amazon EFS in a single ROS bag.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">s3/singlepart/rosbag</code></td>
      <td>Stage response data on Amazon S3 in a single ROS bag.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">manifest</code></td>
      <td>Respond with a manifest of S3 paths to raw data.</td>
    </tr>
  </tbody>
</table>

<h3 id="-aws-cloudformation-template-input-parameters">
<a name="InputParams"></a> AWS CloudFormation template input parameters</h3>
<p>This repository provides an <a href="https://aws.amazon.com/cloudformation/">AWS CloudFormation</a> template that is used to create the required stack.</p>

<p>Below, we describe the AWS CloudFormation <a href="https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service/tree/master/cfn/mozart.yml">template</a> input parameters. Desktop below refers to the NICE DCV enabled high-performance graphics desktop that acts as the data service client in this tutorial.</p>

<table>
  <thead>
    <tr>
      <th>Parameter Name</th>
      <th>Parameter Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>DesktopInstanceType</td>
      <td>This is a <strong>required</strong> parameter whereby you select an Amazon EC2 instance type for the desktop running in AWS cloud. Default value is <code class="language-plaintext highlighter-rouge">g4dn.xlarge</code>.</td>
    </tr>
    <tr>
      <td>DesktopEbsVolumeSize</td>
      <td>This is a <strong>required</strong> parameter whereby you specify the size of the root EBS volume (default size is 200 GB) on the desktop. Typically, the default size is sufficient.</td>
    </tr>
    <tr>
      <td>DesktopEbsVolumeType</td>
      <td>This is a <strong>required</strong> parameter whereby you select the <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-volume-types.html">EBS volume type</a> (default is gp3).</td>
    </tr>
    <tr>
      <td>DesktopHasPublicIpAddress</td>
      <td>This is a <strong>required</strong> parameter whereby you select whether a Public Ip Address be associated with the Desktop.  Default value is <code class="language-plaintext highlighter-rouge">true</code>.</td>
    </tr>
    <tr>
      <td>DesktopRemoteAccessCIDR</td>
      <td>This parameter specifies the public IP CIDR range from where you need remote access to your client desktop, e.g. 1.2.3.4/32, or 7.8.0.0/16.</td>
    </tr>
    <tr>
      <td>DesktopType</td>
      <td>This parameter specifies support for <code class="language-plaintext highlighter-rouge">Graphical</code> desktop with NICE-DCV server enabled, or <code class="language-plaintext highlighter-rouge">Headless</code> desktop with NICE-DCV server disabled. Default value is <code class="language-plaintext highlighter-rouge">Graphical</code>.</td>
    </tr>
    <tr>
      <td>DataClientType</td>
      <td>This parameter specifies support for <code class="language-plaintext highlighter-rouge">RosBridge</code>, and <code class="language-plaintext highlighter-rouge">KafkaAndRosBridge</code>. Default value is <code class="language-plaintext highlighter-rouge">RosBridge</code>.</td>
    </tr>
    <tr>
      <td>EKSEncryptSecrets</td>
      <td>This is a <strong>required</strong> parameter whereby you select if encryption of EKS secrets is <code class="language-plaintext highlighter-rouge">Enabled</code>. Default value is <code class="language-plaintext highlighter-rouge">Enabled</code>.</td>
    </tr>
    <tr>
      <td>EKSEncryptSecretsKmsKeyArn</td>
      <td>This is an <em>optional</em> advanced parameter whereby you specify the <a href="https://aws.amazon.com/kms/">AWS KMS</a> key ARN that is used to encrypt EKS secrets. Leave blank to create a new KMS key.</td>
    </tr>
    <tr>
      <td>EKSNodeVolumeSizeGiB</td>
      <td>This is a <strong>required</strong> parameter whereby you specify EKS Node group instance EBS volume size. Default value is 200 GiB.</td>
    </tr>
    <tr>
      <td>EKSSystemNodeGroupCapacityType</td>
      <td>This is a <strong>required</strong> parameter whereby you specify EKS system node group capacity type: <code class="language-plaintext highlighter-rouge">SPOT</code>, or <code class="language-plaintext highlighter-rouge">ON_DEMAND</code>. Default value is <code class="language-plaintext highlighter-rouge">SPOT</code>
</td>
    </tr>
    <tr>
      <td>EKSSystemNodeGroupInstanceType</td>
      <td>This is a <strong>required</strong> parameter whereby you specify EKS system node group instance types as a comma separated list. Default value is <code class="language-plaintext highlighter-rouge">"t3a.small,t3a.medium,t3a.large,m5a.large,m7a.large"</code>
</td>
    </tr>
    <tr>
      <td>EKSWorkNodeGroupCapacityType</td>
      <td>This is a <strong>required</strong> parameter whereby you specify EKS work node group capacity type: <code class="language-plaintext highlighter-rouge">SPOT</code>, or <code class="language-plaintext highlighter-rouge">ON_DEMAND</code>. Default value is <code class="language-plaintext highlighter-rouge">SPOT</code>
</td>
    </tr>
    <tr>
      <td>EKSWorkNodeGroupInstanceType</td>
      <td>This is a <strong>required</strong> parameter whereby you specify EKS work node group instance types as a comma separated list. Default value is <code class="language-plaintext highlighter-rouge">"m5a.8xlarge,m5.8xlarge,m5n.8xlarge,m7a.8xlarge,r5n.8xlarge"</code>
</td>
    </tr>
    <tr>
      <td>EKSWorkNodeGroupMaxSize</td>
      <td>This is a <strong>required</strong> parameter whereby you specify EKS work node group maximum size. Default value is 16 nodes. Cluster auto-scaler scales this node group as needed.</td>
    </tr>
    <tr>
      <td>FargateComputeType</td>
      <td>This is a <strong>required</strong> parameter whereby you specify Fargate compute environment type. Allowed values are <code class="language-plaintext highlighter-rouge">FARGATE_SPOT</code> and <code class="language-plaintext highlighter-rouge">FARGATE</code>. Default value is <code class="language-plaintext highlighter-rouge">FARGATE_SPOT</code>.</td>
    </tr>
    <tr>
      <td>FargateComputeMax</td>
      <td>This is a <strong>required</strong> parameter whereby you specify maximum size of Fargate compute environment in vCpus. Default value is <code class="language-plaintext highlighter-rouge">1024</code>.</td>
    </tr>
    <tr>
      <td>FSxForLustre</td>
      <td>This is a <strong>required</strong> parameter whereby you specify whether FSx for Lustre is <code class="language-plaintext highlighter-rouge">enabled</code>, or <code class="language-plaintext highlighter-rouge">disabled</code>. Default value is <code class="language-plaintext highlighter-rouge">disabled</code>.</td>
    </tr>
    <tr>
      <td>FSxStorageCapacityGiB</td>
      <td>This is a <strong>required</strong> parameter whereby you specify the FSx Storage capacity, which must be in multiples of <code class="language-plaintext highlighter-rouge">2400 GiB</code>. Default value is <code class="language-plaintext highlighter-rouge">7200 GiB</code>.</td>
    </tr>
    <tr>
      <td>FSxS3ImportPrefix</td>
      <td>This is an <em>optional</em> advanced parameter whereby you specify FSx S3 bucket path prefix for importing data from S3 bucket. Leave blank to import the complete bucket.</td>
    </tr>
    <tr>
      <td>KeyPairName</td>
      <td>This is a <strong>required</strong> parameter whereby you select the Amazon EC2 key pair name used for SSH access to the desktop. You must have access to the selected key pair’s private key to connect to your desktop.</td>
    </tr>
    <tr>
      <td>KubectlVersion</td>
      <td>This is a <strong>required</strong> parameter whereby you specify EKS <code class="language-plaintext highlighter-rouge">kubectl</code> version. Default value is <code class="language-plaintext highlighter-rouge">1.28.3/2023-11-14</code>.</td>
    </tr>
    <tr>
      <td>KubernetesVersion</td>
      <td>This is a <strong>required</strong> parameter whereby you specify EKS cluster version. Default value is <code class="language-plaintext highlighter-rouge">1.28</code>.</td>
    </tr>
    <tr>
      <td>MSKBrokerNodeType</td>
      <td>This is a <strong>required</strong> parameter whereby you specify the type of node to be provisioned for AWS MSK Broker.</td>
    </tr>
    <tr>
      <td>MSKNumberOfNodes</td>
      <td>This is a <strong>required</strong> parameter whereby you specify the number of MSK Broker nodes, which must be &gt;= 2.</td>
    </tr>
    <tr>
      <td>PrivateSubnet1CIDR</td>
      <td>This is a <strong>required</strong> parameter whereby you specify the Private Subnet1 CIDR in Vpc CIDR. Default value is <code class="language-plaintext highlighter-rouge">172.30.64.0/18</code>.</td>
    </tr>
    <tr>
      <td>PrivateSubnet2CIDR</td>
      <td>This is a <strong>required</strong> parameter whereby you specify the Private Subnet2 CIDR in Vpc CIDR. Default value is <code class="language-plaintext highlighter-rouge">172.30.128.0/18</code>.</td>
    </tr>
    <tr>
      <td>PrivateSubnet3CIDR</td>
      <td>This is a <strong>required</strong> parameter whereby you specify the Private Subnet3 CIDR in Vpc CIDR. Default value is <code class="language-plaintext highlighter-rouge">172.30.192.0/18</code>.</td>
    </tr>
    <tr>
      <td>PublicSubnet1CIDR</td>
      <td>This is a <strong>required</strong> parameter whereby you specify the Public Subnet1 CIDR  in Vpc CIDR. Default value is <code class="language-plaintext highlighter-rouge">172.30.0.0/24</code>.</td>
    </tr>
    <tr>
      <td>PublicSubnet2CIDR</td>
      <td>This is a <strong>required</strong> parameter whereby you specify the Public Subnet2 CIDR  in Vpc CIDR. Default value is <code class="language-plaintext highlighter-rouge">172.30.1.0/24</code>.</td>
    </tr>
    <tr>
      <td>PublicSubnet3CIDR</td>
      <td>This is a <strong>required</strong> parameter whereby you specify the Public Subnet3 CIDR  in Vpc CIDR. Default value is <code class="language-plaintext highlighter-rouge">172.30.2.0/24</code>.</td>
    </tr>
    <tr>
      <td>RedshiftNamespace</td>
      <td>This is a <strong>required</strong> parameter whereby you specify the Redshift Serverless namespace. Default value is <code class="language-plaintext highlighter-rouge">mozart</code>.</td>
    </tr>
    <tr>
      <td>RedshiftWorkgroup</td>
      <td>This is a <strong>required</strong> parameter whereby you specify the Redshift Serverless workgroup. Default value is <code class="language-plaintext highlighter-rouge">mozart</code>.</td>
    </tr>
    <tr>
      <td>RedshiftServerlessBaseCapacity</td>
      <td>This is a <strong>required</strong> parameter whereby you specify the Redshift Serverless base capacity in DPUs. Default value is <code class="language-plaintext highlighter-rouge">128</code>.</td>
    </tr>
    <tr>
      <td>RedshiftDatabaseName</td>
      <td>This is a <strong>required</strong> parameter whereby you specify the name of the Redshift database. Default value is <code class="language-plaintext highlighter-rouge">mozart</code>.</td>
    </tr>
    <tr>
      <td>RedshiftMasterUsername</td>
      <td>This is a <strong>required</strong> parameter whereby you specify the name Redshift Master user name. Default value is <code class="language-plaintext highlighter-rouge">admin</code>.</td>
    </tr>
    <tr>
      <td>RedshiftMasterUserPassword</td>
      <td>This is a <strong>required</strong> parameter whereby you specify the name Redshift Master user password.</td>
    </tr>
    <tr>
      <td>RosVersion</td>
      <td>This is a <strong>required</strong> parameter whereby you specify the version of <a href="https://ros.org/">ROS</a>. The supported versions are <code class="language-plaintext highlighter-rouge">melodic</code> on Ubuntu Bionic,  <code class="language-plaintext highlighter-rouge">noetic</code>  on Ubuntu Focal, and <code class="language-plaintext highlighter-rouge">humble</code> on Ubuntu Jammy. Default value is <code class="language-plaintext highlighter-rouge">humble</code>.</td>
    </tr>
    <tr>
      <td>S3Bucket</td>
      <td>This is a <strong>required</strong> parameter whereby you specify the name of the Amazon S3 bucket to store your data.</td>
    </tr>
    <tr>
      <td>UbuntuAMI</td>
      <td>This is an <em>optional</em> advanced parameter whereby you specify Ubuntu AMI (18.04 or 20.04).</td>
    </tr>
    <tr>
      <td>VpcCIDR</td>
      <td>This is a <strong>required</strong> parameter whereby you specify the <a href="https://aws.amazon.com/vpc/?vpc-blogs.sort-by=item.additionalFields.createdDate&amp;vpc-blogs.sort-order=desc">Amazon VPC</a> CIDR for the VPC created in the stack. Default value is 172.30.0.0/16. If you change this value, all the subnet parameters above may need to be set, as well.</td>
    </tr>
  </tbody>
</table>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/amazon-eks-autonomous-driving-data-service">amazon-eks-autonomous-driving-data-service</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-aws-samples-amazon-eks-autonomous-driving-data-service
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-aws-samples-amazon-eks-autonomous-driving-data-service" role="menuitem" tabindex="-1" href="/r/amazon-eks-autonomous-driving-data-service/github-aws-samples-amazon-eks-autonomous-driving-data-service" data="github-aws-samples-amazon-eks-autonomous-driving-data-service">
                    <span class="glyphicon glyphicon-star"></span>
                    github-aws-samples-amazon-eks-autonomous-driving-data-service
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/amazon-eks-autonomous-driving-data-service">amazon-eks-autonomous-driving-data-service</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-aws-samples-amazon-eks-autonomous-driving-data-service
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-aws-samples-amazon-eks-autonomous-driving-data-service" role="menuitem" tabindex="-1" href="/r/amazon-eks-autonomous-driving-data-service/github-aws-samples-amazon-eks-autonomous-driving-data-service" data="github-aws-samples-amazon-eks-autonomous-driving-data-service">
                    <span class="glyphicon glyphicon-star"></span>
                    github-aws-samples-amazon-eks-autonomous-driving-data-service
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/amazon-eks-autonomous-driving-data-service">amazon-eks-autonomous-driving-data-service</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-aws-samples-amazon-eks-autonomous-driving-data-service
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-aws-samples-amazon-eks-autonomous-driving-data-service" role="menuitem" tabindex="-1" href="/r/amazon-eks-autonomous-driving-data-service/github-aws-samples-amazon-eks-autonomous-driving-data-service" data="github-aws-samples-amazon-eks-autonomous-driving-data-service">
                    <span class="glyphicon glyphicon-star"></span>
                    github-aws-samples-amazon-eks-autonomous-driving-data-service
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>iron</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/amazon-eks-autonomous-driving-data-service">amazon-eks-autonomous-driving-data-service</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-aws-samples-amazon-eks-autonomous-driving-data-service
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-aws-samples-amazon-eks-autonomous-driving-data-service" role="menuitem" tabindex="-1" href="/r/amazon-eks-autonomous-driving-data-service/github-aws-samples-amazon-eks-autonomous-driving-data-service" data="github-aws-samples-amazon-eks-autonomous-driving-data-service">
                    <span class="glyphicon glyphicon-star"></span>
                    github-aws-samples-amazon-eks-autonomous-driving-data-service
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/aws-samples/amazon-eks-autonomous-driving-data-service.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
