<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/rosbag2/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">rosbag2</li>
        <!--<li class="active">rosbag2</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-primary" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-primary" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-primary" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-primary" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-default" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class=" older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class=" older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rosbag2">rosbag2</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/mcap_vendor">mcap_vendor</a>
        
        <a class="label label-primary pkg-label" href="/p/ros2bag">ros2bag</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2">rosbag2</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_compression">rosbag2_compression</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_compression_zstd">rosbag2_compression_zstd</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_cpp">rosbag2_cpp</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_interfaces">rosbag2_interfaces</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_performance_benchmarking">rosbag2_performance_benchmarking</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_py">rosbag2_py</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_storage">rosbag2_storage</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_storage_default_plugins">rosbag2_storage_default_plugins</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_storage_mcap">rosbag2_storage_mcap</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_storage_mcap_testdata">rosbag2_storage_mcap_testdata</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_test_common">rosbag2_test_common</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_tests">rosbag2_tests</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_transport">rosbag2_transport</a>
        
        <a class="label label-primary pkg-label" href="/p/shared_queues_vendor">shared_queues_vendor</a>
        
        <a class="label label-primary pkg-label" href="/p/sqlite3_vendor">sqlite3_vendor</a>
        
        <a class="label label-primary pkg-label" href="/p/zstd_vendor">zstd_vendor</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-rosbag2
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-rosbag2" role="menuitem" tabindex="-1" href="/r/rosbag2/github-ros2-rosbag2" data="github-ros2-rosbag2">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-rosbag2
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros2/rosbag2.git">https://github.com/ros2/rosbag2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">humble</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-03-26
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rosbag2/#humble-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rosbag2/#humble-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rosbag2/#humble-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/mcap_vendor">mcap_vendor</a></td>
                    <td>0.15.14</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ros2bag">ros2bag</a></td>
                    <td>0.15.14</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2">rosbag2</a></td>
                    <td>0.15.14</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_compression">rosbag2_compression</a></td>
                    <td>0.15.14</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_compression_zstd">rosbag2_compression_zstd</a></td>
                    <td>0.15.14</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_cpp">rosbag2_cpp</a></td>
                    <td>0.15.14</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_interfaces">rosbag2_interfaces</a></td>
                    <td>0.15.14</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_performance_benchmarking">rosbag2_performance_benchmarking</a></td>
                    <td>0.15.14</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_py">rosbag2_py</a></td>
                    <td>0.15.14</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_storage">rosbag2_storage</a></td>
                    <td>0.15.14</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_storage_default_plugins">rosbag2_storage_default_plugins</a></td>
                    <td>0.15.14</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_storage_mcap">rosbag2_storage_mcap</a></td>
                    <td>0.15.14</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_storage_mcap_testdata">rosbag2_storage_mcap_testdata</a></td>
                    <td>0.15.14</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_test_common">rosbag2_test_common</a></td>
                    <td>0.15.14</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_tests">rosbag2_tests</a></td>
                    <td>0.15.14</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_transport">rosbag2_transport</a></td>
                    <td>0.15.14</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/shared_queues_vendor">shared_queues_vendor</a></td>
                    <td>0.15.14</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/sqlite3_vendor">sqlite3_vendor</a></td>
                    <td>0.15.14</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/zstd_vendor">zstd_vendor</a></td>
                    <td>0.15.14</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="rosbag2">rosbag2</h1>
<p><img src="https://img.shields.io/github/license/ros2/rosbag2" alt="License">
<a href="https://github.com/ros2/rosbag2/actions"><img src="https://github.com/ros2/rosbag2/workflows/Test%20rosbag2/badge.svg" alt="GitHub Action Status"></a></p>

<p>Repository for implementing rosbag2 as described in its corresponding <a href="https://github.com/ros2/design/blob/ros2bags/articles/rosbags.md">design article</a>.</p>

<h2 id="installation-instructions">Installation instructions</h2>

<h2 id="debian-packages">Debian packages</h2>

<p>rosbag2 packages are available via debian packages and thus can be installed via</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ export CHOOSE_ROS_DISTRO=crystal # rosbag2 is available starting from crystal
$ sudo apt-get install ros-$CHOOSE_ROS_DISTRO-ros2bag ros-$CHOOSE_ROS_DISTRO-rosbag2*

</code></pre></div></div>

<p>Note that the above command installs all packages related to rosbag2.
This also includes the plugin for <a href="https://github.com/ros2/rosbag2_bag_v2">reading ROS1 bag files</a>, which brings a hard dependency on the <a href="https://github.com/ros2/ros1_bridge">ros1_bridge</a> with it and therefore ROS1 packages.
If you want to install only the ROS2 related packages for rosbag, please use the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ export CHOOSE_ROS_DISTRO=crystal # rosbag2 is available starting from crystal
$ sudo apt-get install ros-$CHOOSE_ROS_DISTRO-ros2bag ros-$CHOOSE_ROS_DISTRO-rosbag2-transport

</code></pre></div></div>

<h2 id="build-from-source">Build from source</h2>

<p>It is recommended to create a new overlay workspace on top of your current ROS 2 installation.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ mkdir -p ~/rosbag_ws/src
$ cd ~/rosbag_ws/src

</code></pre></div></div>

<p>Clone this repository into the source folder:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git clone https://github.com/ros2/rosbag2.git

</code></pre></div></div>
<p><strong>[Note]</strong>: if you are only building rosbag2 on top of a Debian Installation of ROS2, please git clone the branch following your current ROS2 distribution.</p>

<p>Then build all the packages with this command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ colcon build [--merge-install]

</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">--merge-install</code> flag is optional and installs all packages into one folder rather than isolated folders for each package.</p>

<h4 id="executing-tests">Executing tests</h4>

<p>The tests can be run using the following commands:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ colcon test [--merge-install]
$ colcon test-result --verbose

</code></pre></div></div>

<p>The first command executes the test and the second command displays the errors (if any).</p>

<h2 id="using-rosbag2">Using rosbag2</h2>

<p>rosbag2 is part of the ROS 2 command line interfaces.
This repo introduces a new verb called <code class="language-plaintext highlighter-rouge">bag</code> and thus serves as the entry point of using rosbag2.
As of the time of writing, there are three commands available for <code class="language-plaintext highlighter-rouge">ros2 bag</code>:</p>

<ul>
  <li>record</li>
  <li>play</li>
  <li>info</li>
</ul>

<h3 id="recording-data">Recording data</h3>

<p>In order to record all topics currently available in the system:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag record -a

</code></pre></div></div>

<p>The command above will record all available topics and discovers new topics as they appear while recording.
This auto-discovery of new topics can be disabled by given the command line argument <code class="language-plaintext highlighter-rouge">--no-discovery</code>.</p>

<p>To record a set of predefined topics, one can specify them on the command line explicitly.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag record &lt;topic1&gt; &lt;topic2&gt; … &lt;topicN&gt;

</code></pre></div></div>

<p>The specified topics don’t necessarily have to be present at start time.
The discovery function will automatically recognize if one of the specified topics appeared.
In the same fashion, this auto discovery can be disabled with <code class="language-plaintext highlighter-rouge">--no-discovery</code>.</p>

<p>If not further specified, <code class="language-plaintext highlighter-rouge">ros2 bag record</code> will create a new folder named to the current time stamp and stores all data within this folder.
A user defined name can be given with <code class="language-plaintext highlighter-rouge">-o, --output</code>.</p>

<h4 id="simulation-time">Simulation time</h4>

<p>In ROS 2, “simulation time” refers to publishing a clock value on the <code class="language-plaintext highlighter-rouge">/clock</code> topic, instead of using the system clock to tell time.
By passing <code class="language-plaintext highlighter-rouge">--use-sim-time</code> argument to <code class="language-plaintext highlighter-rouge">ros2 bag record</code>, we turn on this option for the recording node.
Messages written to the bag will use the latest received value of <code class="language-plaintext highlighter-rouge">/clock</code> for the timestamp of the recorded message.</p>

<p>Note: Until the first <code class="language-plaintext highlighter-rouge">/clock</code> message is received, the recorder will not write any messages.
Before that message is received, the time is 0, which leads to a significant time jump once simulation time begins, making the bag essentially unplayable if messages are written first with time 0 and then time N from <code class="language-plaintext highlighter-rouge">/clock</code>.</p>

<h4 id="splitting-recorded-bag-files">Splitting recorded bag files</h4>

<p>rosbag2 offers the capability to split bag files when they reach a maximum size or after a specified duration. By default rosbag2 will record all data into a single bag file, but this can be changed using the CLI options.</p>

<p><em>Splitting by size</em>: <code class="language-plaintext highlighter-rouge">ros2 bag record -a -b 100000</code> will split the bag files when they become greater than 100 kilobytes. Note: the batch size’s units are in bytes and must be greater than <code class="language-plaintext highlighter-rouge">86016</code>. This option defaults to <code class="language-plaintext highlighter-rouge">0</code>, which means data is written to a single file.</p>

<p><em>Splitting by time</em>: <code class="language-plaintext highlighter-rouge">ros2 bag record -a -d 9000</code> will split the bag files after a duration of <code class="language-plaintext highlighter-rouge">9000</code> seconds. This option defaults to <code class="language-plaintext highlighter-rouge">0</code>, which means data is written to a single file.</p>

<p>If both splitting by size and duration are enabled, the bag will split at whichever threshold is reached first.</p>

<h4 id="recording-with-compression">Recording with compression</h4>

<p>By default rosbag2 does not record with compression enabled. However, compression can be specified using the following CLI options.</p>

<p>For example, <code class="language-plaintext highlighter-rouge">ros2 bag record -a --compression-mode file --compression-format zstd</code> will record all topics and compress each file using the <a href="https://github.com/facebook/zstd">zstd</a> compressor.</p>

<p>Currently, the only <code class="language-plaintext highlighter-rouge">compression-format</code> available is <code class="language-plaintext highlighter-rouge">zstd</code>. Both the mode and format options default to <code class="language-plaintext highlighter-rouge">none</code>. To use a compression format, a compression mode must be specified, where the currently supported modes are compress by <code class="language-plaintext highlighter-rouge">file</code> or compress by <code class="language-plaintext highlighter-rouge">message</code>.</p>

<p>It is recommended to use this feature with the splitting options.</p>

<h4 id="recording-with-a-storage-configuration">Recording with a storage configuration</h4>

<p>Storage configuration can be specified in a YAML file passed through the <code class="language-plaintext highlighter-rouge">--storage-config-file</code> option.
This can be used to optimize performance for specific use-cases.</p>

<p>For the default storage plugin (sqlite3), the file has a following syntax:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>read:
  pragmas: &lt;list of pragma settings for read-only&gt;
write:
  pragmas: &lt;list of pragma settings for read/write&gt;

</code></pre></div></div>

<p>By default, SQLite settings are significantly optimized for performance.
This might have consequences of bag data being corrupted after an application or system-level crash.
This consideration only applies to current bagfile in case bag splitting is on (through <code class="language-plaintext highlighter-rouge">--max-bag-*</code> parameters).
If increased crash-caused corruption resistance is necessary, use <code class="language-plaintext highlighter-rouge">resilient</code> option for <code class="language-plaintext highlighter-rouge">--storage-preset-profile</code> setting.</p>

<p>Settings are fully exposed to the user and should be applied with understanding.
Please refer to <a href="https://www.sqlite.org/pragma.html">documentation of pragmas</a>.</p>

<p>An example configuration file could look like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>write:
  pragmas: ["journal_mode = MEMORY", "synchronous = OFF", "schema.cache_size = 1000", "schema.page_size = 4096"]


</code></pre></div></div>

<h3 id="replaying-data">Replaying data</h3>

<p>After recording data, the next logical step is to replay this data:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag play &lt;bag_file&gt;

</code></pre></div></div>

<p>The bag file is by default set to the folder name where the data was previously recorded in.</p>

<h4 id="controlling-playback-via-services">Controlling playback via services</h4>

<p>The Rosbag2 player provides the following services for remote control, which can be called via <code class="language-plaintext highlighter-rouge">ros2 service</code> commandline or from your nodes,</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">~/burst [rosbag2_interfaces/srv/Burst]</code>
    <ul>
      <li>Can only be used while player is paused, publishes <code class="language-plaintext highlighter-rouge">num_messages</code> in order as fast as possible, moving forward the play head.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/get_rate [rosbag2_interfaces/srv/GetRate]</code>
    <ul>
      <li>Return the current playback rate.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/is_paused [rosbag2_interfaces/srv/IsPaused]</code>
    <ul>
      <li>Return whether playback is paused.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/pause [rosbag2_interfaces/srv/Pause]</code>
    <ul>
      <li>Pause playback. Has no effect if already paused.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/play [rosbag2_interfaces/srv/Play]</code>
    <ul>
      <li>Play from a starting offset timestamp, either until the end, an ending timestamp or for a set duration. Only works when stopped (not paused).</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/play_next [rosbag2_interfaces/srv/PlayNext]</code>
    <ul>
      <li>Play a single next message from the bag. Only works while paused.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/resume [rosbag2_interfaces/srv/Resume]</code>
    <ul>
      <li>Resume playback if paused.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/seek [rosbag2_interfaces/srv/Seek]</code>
    <ul>
      <li>Change the play head to the specified timestamp. Can be forward or backward in time, the next played message is the next immediately after the seeked timestamp.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/set_rate [rosbag2_interfaces/srv/SetRate]</code>
    <ul>
      <li>Sets the rate of playback, for example 2.0 will play messages twice as fast.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/toggle_paused [rosbag2_interfaces/srv/TogglePaused]</code>
    <ul>
      <li>Pause if playing, resume if paused.</li>
    </ul>
  </li>
</ul>

<h3 id="analyzing-data">Analyzing data</h3>

<p>The recorded data can be analyzed by displaying some meta information about it:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag info &lt;bag_file&gt;

</code></pre></div></div>

<p>You should see something along these lines:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Files:             demo_strings.db3
Bag size:          44.5 KiB
Storage id:        sqlite3
Duration:          8.501s
Start:             Nov 28 2018 18:02:18.600 (1543456938.600)
End                Nov 28 2018 18:02:27.102 (1543456947.102)
Messages:          27
Topic information: Topic: /chatter | Type: std_msgs/String | Count: 9 | Serialization Format: cdr
                   Topic: /my_chatter | Type: std_msgs/String | Count: 18 | Serialization Format: cdr

</code></pre></div></div>

<h3 id="converting-bags">Converting bags</h3>

<p>Rosbag2 provides a tool <code class="language-plaintext highlighter-rouge">ros2 bag convert</code> (or, <code class="language-plaintext highlighter-rouge">rosbag2_transport::bag_rewrite</code> in the C++ API).
This allows the user to take one or more input bags, and write them out to one or more output bags with new settings.
This flexible feature enables the following features:</p>
<ul>
  <li>Merge (multiple input bags, one output bag)</li>
  <li>Split top-level bags (one input bag, multiple output bags)</li>
  <li>Split internal files (by time or size - one input bag with fewer internal files, one output bag with more, smaller, internal files)</li>
  <li>Compress/Decompress (output bag(s) with different compression settings than the input(s))</li>
  <li>Serialization format conversion</li>
  <li>… and more!</li>
</ul>

<p>Here is an example command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 bag convert --input /path/to/bag1 --input /path/to/bag2 storage_id --output-options output_options.yaml

</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">--input</code> argument may be specified any number of times, and takes 1 or 2 values.
The first value is the URI of the input bag.
If a second value is supplied, it specifies the storage implementation of the bag.
If no storage implementation is specified, rosbag2 will try to determine it automatically from the bag.</p>

<p>The <code class="language-plaintext highlighter-rouge">--output-options</code> argument must point to the URI of a YAML file specifying the full recording configuration for each bag to output (<code class="language-plaintext highlighter-rouge">StorageOptions</code> + <code class="language-plaintext highlighter-rouge">RecordOptions</code>).
This file must contain a top-level key <code class="language-plaintext highlighter-rouge">output_bags</code>, which contains a list of these objects.</p>

<p>The only required value in the output bags is <code class="language-plaintext highlighter-rouge">uri</code> and <code class="language-plaintext highlighter-rouge">storage_id</code>. All other values are options (however, if no topic selection is specified, this output bag will be empty!).</p>

<p>This example notes all fields that can have an effect, with a comment on the required ones.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>output_bags
- uri: /output/bag1  # required
  storage_id: sqlite3  # required
  max_bagfile_size: 0
  max_bagfile_duration: 0
  storage_preset_profile: ""
  storage_config_uri: ""
  all: false
  topics: []
  rmw_serialization_format: ""  # defaults to using the format of the input topic
  regex: ""
  exclude: ""
  compression_mode: ""
  compression_format: ""
  compression_queue_size: 1
  compression_threads: 0
  include_hidden_topics: false
  include_unpublished_topics: false

</code></pre></div></div>

<p>Example merge:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag convert -i bag1 -i bag2 -o out.yaml

# out.yaml
output_bags:
- uri: merged_bag
  storage_id: sqlite3
  all: true

</code></pre></div></div>

<p>Example split:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag convert -i bag1 -o out.yaml

# out.yaml
output_bags:
- uri: split1
  storage_id: sqlite3
  topics: [/topic1, /topic2]
- uri: split2
  storage_id: sqlite3
  topics: [/topic3]

</code></pre></div></div>

<p>Example compress:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag convert -i bag1 -o out.yaml

# out.yaml
output_bags:
- uri: compressed
  storage_id: sqlite3
  all: true
  compression_mode: file
  compression_format: zstd

</code></pre></div></div>

<h3 id="overriding-qos-profiles">Overriding QoS Profiles</h3>

<p>When starting a recording or playback workflow, you can pass a YAML file that contains QoS profile settings for a specific topic.
The YAML schema for the profile overrides is a dictionary of topic names with key/value pairs for each QoS policy.
Below is an example profile set to the default ROS2 QoS settings.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">/topic_name</span><span class="pi">:</span>
  <span class="na">history</span><span class="pi">:</span> <span class="s">keep_last</span>
  <span class="na">depth</span><span class="pi">:</span> <span class="m">10</span>
  <span class="na">reliability</span><span class="pi">:</span> <span class="s">reliable</span>
  <span class="na">durability</span><span class="pi">:</span> <span class="s">volatile</span>
  <span class="na">deadline</span><span class="pi">:</span>
    <span class="c1"># unspecified/infinity</span>
    <span class="na">sec</span><span class="pi">:</span> <span class="m">0</span>
    <span class="na">nsec</span><span class="pi">:</span> <span class="m">0</span>
  <span class="na">lifespan</span><span class="pi">:</span>
    <span class="c1"># unspecified/infinity</span>
    <span class="na">sec</span><span class="pi">:</span> <span class="m">0</span>
    <span class="na">nsec</span><span class="pi">:</span> <span class="m">0</span>
  <span class="na">liveliness</span><span class="pi">:</span> <span class="s">system_default</span>
  <span class="na">liveliness_lease_duration</span><span class="pi">:</span>
    <span class="c1"># unspecified/infinity</span>
    <span class="na">sec</span><span class="pi">:</span> <span class="m">0</span>
    <span class="na">nsec</span><span class="pi">:</span> <span class="m">0</span>
  <span class="na">avoid_ros_namespace_conventions</span><span class="pi">:</span> <span class="kc">false</span>

</code></pre></div></div>

<p>You can then use the override by specifying the <code class="language-plaintext highlighter-rouge">--qos-profile-overrides-path</code> argument in the CLI:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Record</span>
ros2 bag record <span class="nt">--qos-profile-overrides-path</span> override.yaml <span class="nt">-a</span> <span class="nt">-o</span> my_bag
<span class="c"># Playback</span>
ros2 bag play <span class="nt">--qos-profile-overrides-path</span> override.yaml my_bag

</code></pre></div></div>

<p>See <a href="https://docs.ros.org/en/rolling/Guides/Overriding-QoS-Policies-For-Recording-And-Playback.html">the official QoS override tutorial</a> and <a href="https://docs.ros.org/en/rolling/Concepts/About-Quality-of-Service-Settings.html">“About QoS Settings”</a> for more detail.</p>

<h3 id="using-in-launch">Using in launch</h3>

<p>We can invoke the command line tool from a ROS launch script as an <em>executable</em> (not a <em>node</em> action).
For example, to launch the command to record all topics you can use the following launch script:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;launch&gt;</span>
  <span class="nt">&lt;executable</span> <span class="na">cmd=</span><span class="s">"ros2 bag record -a"</span> <span class="na">output=</span><span class="s">"screen"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/launch&gt;</span>

</code></pre></div></div>

<p>Here’s the equivalent Python launch script:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">launch</span>


<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">launch</span><span class="p">.</span><span class="nc">LaunchDescription</span><span class="p">([</span>
        <span class="n">launch</span><span class="p">.</span><span class="n">actions</span><span class="p">.</span><span class="nc">ExecuteProcess</span><span class="p">(</span>
            <span class="n">cmd</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">ros2</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">bag</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">record</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">-a</span><span class="sh">'</span><span class="p">],</span>
            <span class="n">output</span><span class="o">=</span><span class="sh">'</span><span class="s">screen</span><span class="sh">'</span>
        <span class="p">)</span>
    <span class="p">])</span>

</code></pre></div></div>

<p>Use the <code class="language-plaintext highlighter-rouge">ros2 launch</code> command line tool to launch either of the above launch scripts.
For example, if we named the above XML launch script, <code class="language-plaintext highlighter-rouge">record_all.launch.xml</code>:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ros2 launch record_all.launch.xml

</code></pre></div></div>

<h2 id="storage-format-plugin-architecture">Storage format plugin architecture</h2>

<p>Looking at the output of the <code class="language-plaintext highlighter-rouge">ros2 bag info</code> command, we can see a field called <code class="language-plaintext highlighter-rouge">storage id:</code>.
rosbag2 specifically was designed to support multiple storage formats.
This allows a flexible adaptation of various storage formats depending on individual use cases.
As of now, this repository comes with two storage plugins.
The first plugin, sqlite3 is chosen by default.
If not specified otherwise, rosbag2 will store and replay all recorded data in an SQLite3 database.</p>

<p>In order to use a specified (non-default) storage format plugin, rosbag2 has a command line argument for it:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag &lt;record&gt; | &lt;play&gt; | &lt;info&gt; -s &lt;sqlite3&gt; | &lt;rosbag2_v2&gt; | &lt;custom_plugin&gt;

</code></pre></div></div>

<p>Have a look at each of the individual plugins for further information.</p>

<h2 id="serialization-format-plugin-architecture">Serialization format plugin architecture</h2>

<p>Looking further at the output of <code class="language-plaintext highlighter-rouge">ros2 bag info</code>, we can see another field attached to each topic called <code class="language-plaintext highlighter-rouge">Serialization Format</code>.
By design, ROS 2 is middleware agnostic and thus can leverage multiple communication frameworks.
The default middleware for ROS 2 is DDS which has <code class="language-plaintext highlighter-rouge">cdr</code> as its default binary serialization format.
However, other middleware implementation might have different formats.
If not specified, <code class="language-plaintext highlighter-rouge">ros2 bag record -a</code> will record all data in the middleware specific format.
This however also means that such a bag file can’t easily be replayed with another middleware format.</p>

<p>rosbag2 implements a serialization format plugin architecture which allows the user the specify a certain serialization format.
When specified, rosbag2 looks for a suitable converter to transform the native middleware protocol to the target format.
This also allows to record data in a native format to optimize for speed, but to convert or transform the recorded data into a middleware agnostic serialization format.</p>

<p>By default, rosbag2 can convert from and to CDR as it’s the default serialization format for ROS 2.</p>

</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>

<p>Contributors must sign-off each commit by adding a <code class="language-plaintext highlighter-rouge">Signed-off-by: ...</code>
line to commit messages to certify that they have the right to submit
the code they are contributing to the project according to the
<a href="https://developercertificate.org/">Developer Certificate of Origin (DCO)</a>.</p>
</div>
              <hr id="humble-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="humble-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#humble-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#humble-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#humble-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="humble-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="humble-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="humble-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rosbag2">rosbag2</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/liblz4_vendor">liblz4_vendor</a>
        
        <a class="label label-primary pkg-label" href="/p/mcap_vendor">mcap_vendor</a>
        
        <a class="label label-primary pkg-label" href="/p/ros2bag">ros2bag</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2">rosbag2</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_compression">rosbag2_compression</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_compression_zstd">rosbag2_compression_zstd</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_cpp">rosbag2_cpp</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_examples_cpp">rosbag2_examples_cpp</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_examples_py">rosbag2_examples_py</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_interfaces">rosbag2_interfaces</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_performance_benchmarking">rosbag2_performance_benchmarking</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_performance_benchmarking_msgs">rosbag2_performance_benchmarking_msgs</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_py">rosbag2_py</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_storage">rosbag2_storage</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_storage_default_plugins">rosbag2_storage_default_plugins</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_storage_mcap">rosbag2_storage_mcap</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_storage_sqlite3">rosbag2_storage_sqlite3</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_test_common">rosbag2_test_common</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_test_msgdefs">rosbag2_test_msgdefs</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_tests">rosbag2_tests</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_transport">rosbag2_transport</a>
        
        <a class="label label-primary pkg-label" href="/p/shared_queues_vendor">shared_queues_vendor</a>
        
        <a class="label label-primary pkg-label" href="/p/sqlite3_vendor">sqlite3_vendor</a>
        
        <a class="label label-primary pkg-label" href="/p/zstd_vendor">zstd_vendor</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-rosbag2
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-rosbag2" role="menuitem" tabindex="-1" href="/r/rosbag2/github-ros2-rosbag2" data="github-ros2-rosbag2">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-rosbag2
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros2/rosbag2.git">https://github.com/ros2/rosbag2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">jazzy</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-26
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rosbag2/#jazzy-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rosbag2/#jazzy-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rosbag2/#jazzy-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/liblz4_vendor">liblz4_vendor</a></td>
                    <td>0.26.7</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/mcap_vendor">mcap_vendor</a></td>
                    <td>0.26.7</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ros2bag">ros2bag</a></td>
                    <td>0.26.7</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2">rosbag2</a></td>
                    <td>0.26.7</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_compression">rosbag2_compression</a></td>
                    <td>0.26.7</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_compression_zstd">rosbag2_compression_zstd</a></td>
                    <td>0.26.7</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_cpp">rosbag2_cpp</a></td>
                    <td>0.26.7</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_examples_cpp">rosbag2_examples_cpp</a></td>
                    <td>0.26.7</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_examples_py">rosbag2_examples_py</a></td>
                    <td>0.26.7</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_interfaces">rosbag2_interfaces</a></td>
                    <td>0.26.7</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_performance_benchmarking">rosbag2_performance_benchmarking</a></td>
                    <td>0.26.7</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_performance_benchmarking_msgs">rosbag2_performance_benchmarking_msgs</a></td>
                    <td>0.26.7</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_py">rosbag2_py</a></td>
                    <td>0.26.7</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_storage">rosbag2_storage</a></td>
                    <td>0.26.7</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_storage_default_plugins">rosbag2_storage_default_plugins</a></td>
                    <td>0.26.7</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_storage_mcap">rosbag2_storage_mcap</a></td>
                    <td>0.26.7</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_storage_sqlite3">rosbag2_storage_sqlite3</a></td>
                    <td>0.26.7</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_test_common">rosbag2_test_common</a></td>
                    <td>0.26.7</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_test_msgdefs">rosbag2_test_msgdefs</a></td>
                    <td>0.26.7</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_tests">rosbag2_tests</a></td>
                    <td>0.26.7</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_transport">rosbag2_transport</a></td>
                    <td>0.26.7</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/shared_queues_vendor">shared_queues_vendor</a></td>
                    <td>0.26.7</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/sqlite3_vendor">sqlite3_vendor</a></td>
                    <td>0.26.7</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/zstd_vendor">zstd_vendor</a></td>
                    <td>0.26.7</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="rosbag2">Rosbag2</h1>
<p><img src="https://img.shields.io/github/license/ros2/rosbag2" alt="License">
<a href="https://github.com/ros2/rosbag2/actions"><img src="https://github.com/ros2/rosbag2/workflows/Test%20rosbag2/badge.svg" alt="GitHub Action Status"></a></p>

<p>Rosbag2 — the tool for recording and playback of communications in ROS 2 systems.</p>

<p>This is the ROS 2 successor of https://wiki.ros.org/rosbag.</p>

<p>A “rosbag” is simply a file full of timestamped messages. The first goal of the tool is efficient recording, to support complex systems in real time. Its second goal is efficent playback, to allow for viewing and using recorded data.</p>

<p>For historical context, see the original <a href="https://github.com/ros2/design/blob/ros2bags/articles/rosbags.md">design article</a> that kicked off the project.</p>

<p>This README has a lot of information. You may want to jump directly to:</p>
<ul>
  <li><a href="https://github.com/ros2/rosbag2/tree/jazzy/#installation">Installation</a></li>
  <li><a href="https://github.com/ros2/rosbag2/tree/jazzy/#usage">Usage</a></li>
  <li><a href="https://github.com/ros2/rosbag2/tree/jazzy/#tips-and-tricks">Tips and Tricks</a></li>
</ul>

<h2 id="installation">Installation</h2>

<h3 id="debian-packages">Debian packages</h3>

<p>Rosbag2 packages are available via debian packages, and will already be included with any <code class="language-plaintext highlighter-rouge">-ros-base</code> installation (which is included within <code class="language-plaintext highlighter-rouge">-desktop</code>)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ export ROS_DISTRO=humble
$ sudo apt-get install ros-$ROS_DISTRO-rosbag2

</code></pre></div></div>

<h3 id="other-binaries">Other binaries</h3>

<p>You can follow the instructions at http://docs.ros.org/en/humble/Installation/Alternatives/Ubuntu-Install-Binary.html (or for your chosen distro), and Rosbag2 will be included in that installation.</p>

<h3 id="build-from-source">Build from source</h3>

<p>To build from source, follow the instructions in <a href="https://github.com/ros2/rosbag2/tree/jazzy/DEVELOPING.md">DEVELOPING.md</a></p>

<h2 id="using-rosbag2-">Using rosbag2 <a id="usage"></a>
</h2>

<p>Rosbag2 is part of the ROS 2 command line interface as <code class="language-plaintext highlighter-rouge">ros2 bag</code>.
These verbs are available for <code class="language-plaintext highlighter-rouge">ros2 bag</code>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ros2 bag burst</code></li>
  <li><a href="https://github.com/ros2/rosbag2/tree/jazzy/#convert"><code class="language-plaintext highlighter-rouge">ros2 bag convert</code></a></li>
  <li><a href="https://github.com/ros2/rosbag2/tree/jazzy/#info"><code class="language-plaintext highlighter-rouge">ros2 bag info</code></a></li>
  <li><code class="language-plaintext highlighter-rouge">ros2 bag list</code></li>
  <li><a href="https://github.com/ros2/rosbag2/tree/jazzy/#play"><code class="language-plaintext highlighter-rouge">ros2 bag play</code></a></li>
  <li><a href="https://github.com/ros2/rosbag2/tree/jazzy/#record"><code class="language-plaintext highlighter-rouge">ros2 bag record</code></a></li>
  <li><code class="language-plaintext highlighter-rouge">ros2 bag reindex</code></li>
</ul>

<p>For up-to-date information on the available options for each, use <code class="language-plaintext highlighter-rouge">ros2 bag &lt;verb&gt; --help</code>.</p>

<p>Moreover, <code class="language-plaintext highlighter-rouge">rosbag2_transport::Player</code> and <code class="language-plaintext highlighter-rouge">rosbag2_transport::Recorder</code> components can be instantiated in <code class="language-plaintext highlighter-rouge">rclcpp</code> component containers, which makes possible to use intra-process communication for greater efficiency.
See <a href="https://github.com/ros2/rosbag2/tree/jazzy/#composition">composition</a> section for details.</p>

<h3 id="recording-data-">Recording data <a id="record"></a>
</h3>

<p>In order to record all topics currently available in the system:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag record -a

</code></pre></div></div>

<p>The command above will record all available topics and discovers new topics as they appear while recording.
This auto-discovery of new topics can be disabled by given the command line argument <code class="language-plaintext highlighter-rouge">--no-discovery</code>.</p>

<p>To record a set of predefined topics, one can specify them on the command line explicitly.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag record &lt;topic1&gt; &lt;topic2&gt; … &lt;topicN&gt;

</code></pre></div></div>

<p>The specified topics don’t necessarily have to be present at start time.
The discovery function will automatically recognize if one of the specified topics appeared.
In the same fashion, this auto discovery can be disabled with <code class="language-plaintext highlighter-rouge">--no-discovery</code>.</p>

<p>If not further specified, <code class="language-plaintext highlighter-rouge">ros2 bag record</code> will create a new folder named to the current time stamp and stores all data within this folder.
A user defined name can be given with <code class="language-plaintext highlighter-rouge">-o, --output</code>.</p>

<h4 id="simulation-time">Simulation time</h4>

<p>In ROS 2, “simulation time” refers to publishing a clock value on the <code class="language-plaintext highlighter-rouge">/clock</code> topic, instead of using the system clock to tell time.
By passing <code class="language-plaintext highlighter-rouge">--use-sim-time</code> argument to <code class="language-plaintext highlighter-rouge">ros2 bag record</code>, we turn on this option for the recording node.
Messages written to the bag will use the latest received value of <code class="language-plaintext highlighter-rouge">/clock</code> for the timestamp of the recorded message.</p>

<p>Note: Until the first <code class="language-plaintext highlighter-rouge">/clock</code> message is received, the recorder will not write any messages.
Before that message is received, the time is 0, which leads to a significant time jump once simulation time begins, making the bag essentially unplayable if messages are written first with time 0 and then time N from <code class="language-plaintext highlighter-rouge">/clock</code>.</p>

<h4 id="splitting-files-during-recording">Splitting files during recording</h4>

<p>Rosbag2 offers the capability to split bag files when they reach a maximum size or after a specified duration. By default Rosbag2 will record all data into a single bag file, but this can be changed using the CLI options.</p>

<p><em>Splitting by size</em>: <code class="language-plaintext highlighter-rouge">ros2 bag record -a -b 100000</code> will split the bag files when they become greater than 100 kilobytes. Note: the batch size’s units are in bytes and must be greater than <code class="language-plaintext highlighter-rouge">86016</code>. This option defaults to <code class="language-plaintext highlighter-rouge">0</code>, which means data is written to a single file.</p>

<p><em>Splitting by time</em>: <code class="language-plaintext highlighter-rouge">ros2 bag record -a -d 9000</code> will split the bag files after a duration of <code class="language-plaintext highlighter-rouge">9000</code> seconds. This option defaults to <code class="language-plaintext highlighter-rouge">0</code>, which means data is written to a single file.</p>

<p>If both splitting by size and duration are enabled, the bag will split at whichever threshold is reached first.</p>

<h4 id="recording-with-compression">Recording with compression</h4>

<p>By default Rosbag2 does not record with compression enabled. However, compression can be specified using the following CLI options.</p>

<p>For example, <code class="language-plaintext highlighter-rouge">ros2 bag record -a --compression-mode file --compression-format zstd</code> will record all topics and compress each file using the <a href="https://github.com/facebook/zstd">zstd</a> compressor.</p>

<p>Currently, the only <code class="language-plaintext highlighter-rouge">compression-format</code> available is <code class="language-plaintext highlighter-rouge">zstd</code>. Both the mode and format options default to <code class="language-plaintext highlighter-rouge">none</code>. To use a compression format, a compression mode must be specified, where the currently supported modes are compress by <code class="language-plaintext highlighter-rouge">file</code> or compress by <code class="language-plaintext highlighter-rouge">message</code>.</p>

<p>It is recommended to use this feature with the splitting options.</p>

<p><strong>Note</strong>: Some storage plugins may have their own compression methods, which are separate from the Rosbag2 compression specified by the CLI options <code class="language-plaintext highlighter-rouge">--compression-mode</code> and <code class="language-plaintext highlighter-rouge">--compression-format</code>. Notably, the MCAP file format offered by the <code class="language-plaintext highlighter-rouge">rosbag2_storage_mcap</code> storage plugin supports compression in a way that produces files that are still indexable (whereas using the Rosbag2 compression will not). To utilize storage plugin specific compression or other options, see <a href="https://github.com/ros2/rosbag2/tree/jazzy/#record-storage-config">Recording with a storage configuration</a>.</p>

<h4 id="recording-with-a-storage-configuration-">Recording with a storage configuration <a id="record-storage-config"></a>
</h4>

<p>Storage configuration can be specified in a YAML file passed through the <code class="language-plaintext highlighter-rouge">--storage-config-file</code> option.
This can be used to optimize performance for specific use cases.</p>

<p>See storage plugin documentation for more detail:</p>
<ul>
  <li><a href="https://github.com/ros2/rosbag2/tree/jazzy/rosbag2_storage_mcap/README.md#writer-configuration">mcap</a></li>
  <li><a href="https://github.com/ros2/rosbag2/tree/jazzy/rosbag2_storage_sqlite3/README.md#storage-configuration-file">sqlite3</a></li>
</ul>

<h4 id="controlling-recordings-via-services">Controlling recordings via services</h4>

<p>The Rosbag2 recorder provides the following services for remote control, which can be called via <code class="language-plaintext highlighter-rouge">ros2 service</code> commandline, or from your nodes:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">~/is_paused [rosbag2_interfaces/srv/IsPaused]</code>
    <ul>
      <li>Returns whether recording is currently paused.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/pause [rosbag2_interfaces/srv/Pause]</code>
    <ul>
      <li>Pauses recording. All messages that have already arrived will be written, but all messages that arrive after pausing will be discarded. Has no effect if already paused. Takes no arguments.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/resume [rosbag2_interfaces/srv/Resume]</code>
    <ul>
      <li>Resume recording if paused. Has no effect if not paused. Takes no arguments.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/split_bagfile [rosbag2_interfaces/srv/SplitBagfile]</code>
    <ul>
      <li>Triggers a split to a new file, even if none of the configured split criteria (such as <code class="language-plaintext highlighter-rouge">--max-bag-size</code> or <code class="language-plaintext highlighter-rouge">--max-bag-duration</code>) have been met yet</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/snapshot [rosbag2_interfaces/srv/Snapshot]</code>
    <ul>
      <li>enabled if <code class="language-plaintext highlighter-rouge">--snapshot-mode</code> is specified. Takes no arguments, triggers a snapshot.</li>
    </ul>
  </li>
</ul>

<h4 id="snapshot-mode">Snapshot mode</h4>

<p>The Recorder provides a “snapshot mode”, enabled via <code class="language-plaintext highlighter-rouge">--snapshot-mode</code> or <code class="language-plaintext highlighter-rouge">StorageOptions.snapshot_mode</code>, which does not write messages to disk as they come in, but instead keeps an in-memory circular buffer of size <code class="language-plaintext highlighter-rouge">--max-cache-size</code>.
This entire buffer can be dumped to disk on request, saving data only in specified circumstances such as a detected error condition or point of interest, capturing the “last N bytes” of incoming data, therefore making sure that you can trigger snapshot after the fact of the event.</p>

<p>The snapshot is taken by calling the <code class="language-plaintext highlighter-rouge">~/snapshot</code> service on the recorder, described previously.</p>

<h3 id="replaying-data-">Replaying data <a id="play"></a>
</h3>

<p>When you have a recorded bag, you can use Rosbag2 to play it back:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag play &lt;bag&gt;

</code></pre></div></div>

<p>The bag argument can be a directory containing <code class="language-plaintext highlighter-rouge">metadata.yaml</code> and one or more storage files, or to a single storage file such as <code class="language-plaintext highlighter-rouge">.mcap</code> or <code class="language-plaintext highlighter-rouge">.db3</code>.
The Player will automatically detect which storage implementation to use for playing.</p>

<p>To play back multiple bags:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag play &lt;bag1&gt; -i &lt;bag2&gt; -i &lt;bag3&gt;

</code></pre></div></div>

<p>Messages from all provided bags will be played in order, based on their original recording reception timestamps.</p>

<h4 id="controlling-playback-via-services">Controlling playback via services</h4>

<p>The Rosbag2 player provides the following services for remote control, which can be called via <code class="language-plaintext highlighter-rouge">ros2 service</code> commandline or from your nodes,</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">~/burst [rosbag2_interfaces/srv/Burst]</code>
    <ul>
      <li>Can only be used while player is paused, publishes <code class="language-plaintext highlighter-rouge">num_messages</code> in order as fast as possible, moving forward the play head.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/get_rate [rosbag2_interfaces/srv/GetRate]</code>
    <ul>
      <li>Return the current playback rate.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/is_paused [rosbag2_interfaces/srv/IsPaused]</code>
    <ul>
      <li>Return whether playback is paused.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/pause [rosbag2_interfaces/srv/Pause]</code>
    <ul>
      <li>Pause playback. Has no effect if already paused.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/play [rosbag2_interfaces/srv/Play]</code>
    <ul>
      <li>Play from a starting offset timestamp, either until the end, an ending timestamp or for a set duration. Only works when stopped (not paused).</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/play_next [rosbag2_interfaces/srv/PlayNext]</code>
    <ul>
      <li>Play a single next message from the bag. Only works while paused.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/resume [rosbag2_interfaces/srv/Resume]</code>
    <ul>
      <li>Resume playback if paused.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/seek [rosbag2_interfaces/srv/Seek]</code>
    <ul>
      <li>Change the play head to the specified timestamp. Can be forward or backward in time, the next played message is the next immediately after the seeked timestamp.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/set_rate [rosbag2_interfaces/srv/SetRate]</code>
    <ul>
      <li>Sets the rate of playback, for example 2.0 will play messages twice as fast.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/stop [rosbag2_interfaces/srv/Stop]</code>
    <ul>
      <li>Stop the player, putting the play head in “undefined position” outside the bag. Must call <code class="language-plaintext highlighter-rouge">play</code> before other operations can be done.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/toggle_paused [rosbag2_interfaces/srv/TogglePaused]</code>
    <ul>
      <li>Pause if playing, resume if paused.</li>
    </ul>
  </li>
</ul>

<h3 id="analyzing-data-">Analyzing data <a id="info"></a>
</h3>

<p>The recorded data can be analyzed by displaying some meta information about it:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag info &lt;bag_file&gt;

</code></pre></div></div>

<p>You should see something along these lines:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Files:             demo_strings.db3
Bag size:          44.5 KiB
Storage id:        sqlite3
Duration:          8.501s
Start:             Nov 28 2018 18:02:18.600 (1543456938.600)
End                Nov 28 2018 18:02:27.102 (1543456947.102)
Messages:          27
Topic information: Topic: /chatter | Type: std_msgs/String | Count: 9 | Serialization Format: cdr
                   Topic: /my_chatter | Type: std_msgs/String | Count: 18 | Serialization Format: cdr

</code></pre></div></div>

<h3 id="converting-bags-merge-split-etc-">Converting bags (merge, split, etc.) <a id="convert"></a>
</h3>

<p>Rosbag2 provides a tool <code class="language-plaintext highlighter-rouge">ros2 bag convert</code> (or, <code class="language-plaintext highlighter-rouge">rosbag2_transport::bag_rewrite</code> in the C++ API).
This allows the user to take one or more input bags, and write them out to one or more output bags with new settings.
This flexible feature enables the following features:</p>
<ul>
  <li>Merge (multiple input bags, one output bag)</li>
  <li>Split top-level bags (one input bag, multiple output bags)</li>
  <li>Split internal files (by time or size - one input bag with fewer internal files, one output bag with more, smaller, internal files)</li>
  <li>Compress/Decompress (output bag(s) with different compression settings than the input(s))</li>
  <li>Serialization format conversion</li>
  <li>… and more!</li>
</ul>

<p>Here is an example command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 bag convert --input /path/to/bag1 --input /path/to/bag2 storage_id --output-options output_options.yaml

</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">--input</code> argument may be specified any number of times, and takes 1 or 2 values.
The first value is the URI of the input bag.
If a second value is supplied, it specifies the storage implementation of the bag.
If no storage implementation is specified, Rosbag2 will try to determine it automatically from the bag.</p>

<p>The <code class="language-plaintext highlighter-rouge">--output-options</code> argument must point to the URI of a YAML file specifying the full recording configuration for each bag to output (<code class="language-plaintext highlighter-rouge">StorageOptions</code> + <code class="language-plaintext highlighter-rouge">RecordOptions</code>).
This file must contain a top-level key <code class="language-plaintext highlighter-rouge">output_bags</code>, which contains a list of these objects.</p>

<p>The only required value in the output bags is <code class="language-plaintext highlighter-rouge">uri</code> and <code class="language-plaintext highlighter-rouge">storage_id</code>. All other values are options (however, if no topic selection is specified, this output bag will be empty!).</p>

<p>This example notes all fields that can have an effect, with a comment on the required ones.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>output_bags:
- uri: /output/bag1  # required
  storage_id: ""  # will use the default storage plugin, if unspecified
  max_bagfile_size: 0
  max_bagfile_duration: 0
  storage_preset_profile: ""
  storage_config_uri: ""
  # optional filter for msg time t [nsec since epoch]:  start_time_ns &lt;= t &lt;= end_time_ns
  # start_time_ns: 1744227144744197147
  # end_time_ns: 1744227145734665546
  all_topics: false
  topics: []
  topic_types: []
  all_services: false
  services: []
  rmw_serialization_format: ""  # defaults to using the format of the input topic
  regex: ""
  exclude_regex: ""
  exclude_topics: []
  exclude_topic_types: []
  exclude_services: []
  compression_mode: ""
  compression_format: ""
  compression_queue_size: 1
  compression_threads: 0
  include_hidden_topics: false
  include_unpublished_topics: false

</code></pre></div></div>

<p>Example merge:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag convert -i bag1 -i bag2 -o out.yaml

# out.yaml
output_bags:
- uri: merged_bag
  all_topics: true
  all_services: true

</code></pre></div></div>

<p>Example split:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag convert -i bag1 -o out.yaml

# out.yaml
output_bags:
- uri: split1
  topics: [/topic1, /topic2]
- uri: split2
  topics: [/topic3]

</code></pre></div></div>

<p>Example compress:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag convert -i bag1 -o out.yaml

# out.yaml
output_bags:
- uri: compressed
  all_topics: true
  all_services: true
  compression_mode: file
  compression_format: zstd

</code></pre></div></div>

<h3 id="overriding-qos-profiles">Overriding QoS Profiles</h3>

<p>When starting a recording or playback, you can pass a YAML file that contains QoS profile settings for a specific topic.
The YAML schema for the profile overrides is a dictionary of topic names with key/value pairs for each QoS policy.
Below is an example profile set to the default ROS2 QoS settings.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">/topic_name</span><span class="pi">:</span>
  <span class="na">history</span><span class="pi">:</span> <span class="s">keep_last</span>
  <span class="na">depth</span><span class="pi">:</span> <span class="m">10</span>
  <span class="na">reliability</span><span class="pi">:</span> <span class="s">reliable</span>
  <span class="na">durability</span><span class="pi">:</span> <span class="s">volatile</span>
  <span class="na">deadline</span><span class="pi">:</span>
    <span class="c1"># unspecified/infinity</span>
    <span class="na">sec</span><span class="pi">:</span> <span class="m">0</span>
    <span class="na">nsec</span><span class="pi">:</span> <span class="m">0</span>
  <span class="na">lifespan</span><span class="pi">:</span>
    <span class="c1"># unspecified/infinity</span>
    <span class="na">sec</span><span class="pi">:</span> <span class="m">0</span>
    <span class="na">nsec</span><span class="pi">:</span> <span class="m">0</span>
  <span class="na">liveliness</span><span class="pi">:</span> <span class="s">system_default</span>
  <span class="na">liveliness_lease_duration</span><span class="pi">:</span>
    <span class="c1"># unspecified/infinity</span>
    <span class="na">sec</span><span class="pi">:</span> <span class="m">0</span>
    <span class="na">nsec</span><span class="pi">:</span> <span class="m">0</span>
  <span class="na">avoid_ros_namespace_conventions</span><span class="pi">:</span> <span class="kc">false</span>

</code></pre></div></div>

<p>You can then use the override by specifying the <code class="language-plaintext highlighter-rouge">--qos-profile-overrides-path</code> argument in the CLI:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Record</span>
ros2 bag record <span class="nt">--qos-profile-overrides-path</span> override.yaml <span class="nt">-a</span> <span class="nt">-o</span> my_bag
<span class="c"># Playback</span>
ros2 bag play <span class="nt">--qos-profile-overrides-path</span> override.yaml my_bag

</code></pre></div></div>

<p>See <a href="https://docs.ros.org/en/rolling/Guides/Overriding-QoS-Policies-For-Recording-And-Playback.html">the official QoS override tutorial</a> and <a href="https://docs.ros.org/en/rolling/Concepts/About-Quality-of-Service-Settings.html">“About QoS Settings”</a> for more detail.</p>

<h3 id="using-in-launch">Using in launch</h3>

<p>We can invoke the command line tool from a ROS launch script as an <em>executable</em> (not a <em>node</em> action).
For example, to launch the command to record all topics you can use the following launch script:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;launch&gt;</span>
  <span class="nt">&lt;executable</span> <span class="na">cmd=</span><span class="s">"ros2 bag record -a"</span> <span class="na">output=</span><span class="s">"screen"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/launch&gt;</span>

</code></pre></div></div>

<p>Here’s the equivalent Python launch script:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">launch</span>


<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">launch</span><span class="p">.</span><span class="nc">LaunchDescription</span><span class="p">([</span>
        <span class="n">launch</span><span class="p">.</span><span class="n">actions</span><span class="p">.</span><span class="nc">ExecuteProcess</span><span class="p">(</span>
            <span class="n">cmd</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">ros2</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">bag</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">record</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">-a</span><span class="sh">'</span><span class="p">],</span>
            <span class="n">output</span><span class="o">=</span><span class="sh">'</span><span class="s">screen</span><span class="sh">'</span>
        <span class="p">)</span>
    <span class="p">])</span>

</code></pre></div></div>

<p>Use the <code class="language-plaintext highlighter-rouge">ros2 launch</code> command line tool to launch either of the above launch scripts.
For example, if we named the above XML launch script, <code class="language-plaintext highlighter-rouge">record_all.launch.xml</code>:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ros2 launch record_all.launch.xml

</code></pre></div></div>

<p>You can also invoke the <code class="language-plaintext highlighter-rouge">play</code> and <code class="language-plaintext highlighter-rouge">record</code> functionalities provided by <code class="language-plaintext highlighter-rouge">rosbag2_transport</code> package as nodes.
The advantage to use this invocation strategy is that the Python layer handling the <code class="language-plaintext highlighter-rouge">ros2 bag</code> CLI is completely skipped.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">launch</span>

<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">launch</span><span class="p">.</span><span class="nc">LaunchDescription</span><span class="p">([</span>
        <span class="n">launch</span><span class="p">.</span><span class="n">actions</span><span class="p">.</span><span class="nc">Node</span><span class="p">(</span>
            <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">rosbag2_transport</span><span class="sh">'</span><span class="p">,</span>
            <span class="n">executable</span><span class="o">=</span><span class="sh">'</span><span class="s">player</span><span class="sh">'</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">player</span><span class="sh">'</span><span class="p">,</span>
            <span class="n">output</span><span class="o">=</span><span class="sh">"</span><span class="s">screen</span><span class="sh">"</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="sh">"</span><span class="s">/path/to/params.yaml</span><span class="sh">"</span><span class="p">],</span>
        <span class="p">)</span>
    <span class="p">])</span>

</code></pre></div></div>

<h3 id="using-recorder-and-player-as-composable-nodes-">Using recorder and player as composable nodes <a id="composition"></a>
</h3>

<p>Play and record are fundamental tasks of Rosbag2. However, playing or recording data at high rates may have limitations (e.g. spurious packet drops) due to one of the following:</p>
<ul>
  <li>low network bandwidth</li>
  <li>high CPU load</li>
  <li>slow mass memory</li>
  <li>ROS 2 middleware serialization/deserialization delays &amp; overhead</li>
</ul>

<p>ROS 2 C++ nodes can benefit from intra-process communication to partially or completely bypass network transport of messages between two nodes.</p>

<p>Multiple <em>components</em> can be <em>composed</em>, either <a href="https://docs.ros.org/en/rolling/Tutorials/Intermediate/Composition.html#compile-time-composition-with-hardcoded-nodes">statically</a> or <a href="https://docs.ros.org/en/rolling/Tutorials/Intermediate/Composition.html#run-time-composition-using-ros-services-with-a-publisher-and-subscriber">dynamically</a>: all the composed component will share the same address space because they will be loaded in a single process.</p>

<p>A prerequirement is for each C++ node to be <a href="https://docs.ros.org/en/rolling/Concepts/Intermediate/About-Composition.html?highlight=composition"><em>composable</em></a> and to follow the <a href="https://docs.ros.org/en/rolling/Tutorials/Demos/Intra-Process-Communication.html?highlight=intra">guidelines</a> for efficient publishing &amp; subscription.</p>

<p>With the above requirements met, the user can:</p>
<ul>
  <li>compose multiple nodes together</li>
  <li>explicitly enable intra-process communication</li>
</ul>

<p>Whenever a publisher and a subscriber on the same topic belong to the same <em>composed</em> process, and intra-process is enabled for both, <code class="language-plaintext highlighter-rouge">rclcpp</code> completely bypasses RMW layer and below transport layer (i.e. DDS). Instead, messages are shared via process memory and <em>potentially</em> never copied. Some exception hold, so please have a look to the <a href="https://docs.ros.org/en/rolling/Tutorials/Demos/Intra-Process-Communication.html?highlight=intra">IPC guidelines</a>.</p>

<p>Here is an example of Python launchfile composition. Notice that composable container components do not expect YAML files to be directly passed to them: parameters have to be “dumped” out from the YAML file (if you have one). A suggestion of possible implementation is offered as a starting point.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">launch</span>
<span class="kn">import</span> <span class="n">launch_ros</span>
<span class="kn">import</span> <span class="n">yaml</span>

<span class="sh">'''</span><span class="s">
Used to load parameters for composable nodes from a standard param file
</span><span class="sh">'''</span>
<span class="k">def</span> <span class="nf">dump_params</span><span class="p">(</span><span class="n">param_file_path</span><span class="p">,</span> <span class="n">node_name</span><span class="p">):</span>
    <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">param_file_path</span><span class="p">,</span> <span class="sh">'</span><span class="s">r</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">yaml</span><span class="p">.</span><span class="nf">safe_load</span><span class="p">(</span><span class="nb">file</span><span class="p">)[</span><span class="n">node_name</span><span class="p">][</span><span class="sh">'</span><span class="s">ros__parameters</span><span class="sh">'</span><span class="p">]]</span>

<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">launch</span><span class="p">.</span><span class="nc">LaunchDescription</span><span class="p">([</span>
        <span class="n">launch</span><span class="p">.</span><span class="n">actions</span><span class="p">.</span><span class="nc">ComposableNodeContainer</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">composable_container</span><span class="sh">'</span><span class="p">,</span>
            <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">rclcpp_components</span><span class="sh">'</span><span class="p">,</span>
            <span class="n">executable</span><span class="o">=</span><span class="sh">'</span><span class="s">component_container</span><span class="sh">'</span><span class="p">,</span>
            <span class="n">composable_node_descriptions</span><span class="o">=</span><span class="p">[</span>
                <span class="n">launch_ros</span><span class="p">.</span><span class="n">descriptions</span><span class="p">.</span><span class="nc">ComposableNode</span><span class="p">(</span>
                    <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">rosbag2_transport</span><span class="sh">'</span><span class="p">,</span>
                    <span class="n">plugin</span><span class="o">=</span><span class="sh">'</span><span class="s">rosbag2_transport::Player</span><span class="sh">'</span><span class="p">,</span>
                    <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">player</span><span class="sh">'</span><span class="p">,</span>
                    <span class="n">parameters</span><span class="o">=</span><span class="nf">dump_params</span><span class="p">(</span><span class="sh">"</span><span class="s">/path/to/params.yaml</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">player</span><span class="sh">"</span><span class="p">),</span>
                    <span class="n">extra_arguments</span><span class="o">=</span><span class="p">[{</span><span class="sh">'</span><span class="s">use_intra_process_comms</span><span class="sh">'</span><span class="p">:</span> <span class="bp">True</span><span class="p">}]</span>
                <span class="p">),</span>
                <span class="c1"># your other components here
</span>            <span class="p">]</span>
        <span class="p">)</span>
    <span class="p">])</span>
<span class="p">}</span>

</code></pre></div></div>

<p>Here’s an example YAML configuration for both composable player and recorder:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">recorder</span><span class="pi">:</span>
  <span class="na">ros__parameters</span><span class="pi">:</span>
    <span class="na">use_sim_time</span><span class="pi">:</span> <span class="kc">false</span>
    <span class="na">record</span><span class="pi">:</span>
      <span class="na">all</span><span class="pi">:</span> <span class="kc">true</span>
      <span class="na">is_discovery_disabled</span><span class="pi">:</span> <span class="kc">false</span>
      <span class="na">topic_polling_interval</span><span class="pi">:</span>
        <span class="na">sec</span><span class="pi">:</span> <span class="m">0</span>
        <span class="na">nsec</span><span class="pi">:</span> <span class="m">10000000</span>
      <span class="na">include_hidden_topics</span><span class="pi">:</span> <span class="kc">true</span>
      <span class="na">ignore_leaf_topics</span><span class="pi">:</span> <span class="kc">false</span>
      <span class="na">start_paused</span><span class="pi">:</span> <span class="kc">false</span>

    <span class="na">storage</span><span class="pi">:</span>
      <span class="na">uri</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/path/to/destination/folder"</span>
      <span class="na">storage_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">sqlite3"</span>
      <span class="na">max_cache_size</span><span class="pi">:</span> <span class="m">20000000</span>

</code></pre></div></div>
<p>and</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">player</span><span class="pi">:</span>
  <span class="na">ros__parameters</span><span class="pi">:</span>
    <span class="na">play</span><span class="pi">:</span>
      <span class="na">read_ahead_queue_size</span><span class="pi">:</span> <span class="m">1000</span>
      <span class="na">node_prefix</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
      <span class="na">rate</span><span class="pi">:</span> <span class="m">1.0</span>
      <span class="na">loop</span><span class="pi">:</span> <span class="kc">false</span>
      <span class="c1"># Negative timestamps will make the playback to not stop.</span>
      <span class="na">playback_duration</span><span class="pi">:</span>
        <span class="na">sec</span><span class="pi">:</span> <span class="s">-1</span>
        <span class="na">nsec</span><span class="pi">:</span> <span class="m">00000000</span>
      <span class="na">start_paused</span><span class="pi">:</span> <span class="kc">false</span>

    <span class="na">storage</span><span class="pi">:</span>
      <span class="na">uri</span><span class="pi">:</span> <span class="s2">"</span><span class="s">path/to/rosbag/file"</span>
      <span class="na">storage_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">mcap"</span>
      <span class="na">storage_config_uri</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>

</code></pre></div></div>

<p>For a full list of available parameters, you can refer to <a href="https://github.com/ros2/rosbag2/tree/jazzy/rosbag2_transport/test/resources/player_node_params.yaml"><code class="language-plaintext highlighter-rouge">player</code></a> and <a href="https://github.com/ros2/rosbag2/tree/jazzy/rosbag2_transport/test/resources/recorder_node_params.yaml"><code class="language-plaintext highlighter-rouge">recorder</code></a> configurations from the <code class="language-plaintext highlighter-rouge">test</code> folder of <code class="language-plaintext highlighter-rouge">rosbag2_transport</code>.</p>

<h2 id="plugin-implementation">Plugin implementation</h2>

<h3 id="storage-format-plugin-architecture">Storage format plugin architecture</h3>

<p>Looking at the output of the <code class="language-plaintext highlighter-rouge">ros2 bag info</code> command, we can see a field <code class="language-plaintext highlighter-rouge">Storage id:</code>.
Rosbag2 was designed to support multiple storage formats to adapt to individual use cases.
This repository provides two storage plugins, <code class="language-plaintext highlighter-rouge">mcap</code> and <code class="language-plaintext highlighter-rouge">sqlite3</code>.
The default is <code class="language-plaintext highlighter-rouge">mcap</code>, which is provided to code by <a href="https://github.com/ros2/rosbag2/tree/jazzy/rosbag2_storage/include/rosbag2_storage/default_storage_id.hpp"><code class="language-plaintext highlighter-rouge">rosbag2_storage::get_default_storage_id()</code></a> and defined in <a href="https://github.com/ros2/rosbag2/tree/jazzy/rosbag2_storage/src/rosbag2_storage/default_storage_id.cpp#L21"><code class="language-plaintext highlighter-rouge">default_storage_id.cpp</code></a></p>

<p>If not specified otherwise, Rosbag2 will write data using the default plugin.</p>

<p>In order to use a specified (non-default) storage format plugin, Rosbag2 has a command line argument <code class="language-plaintext highlighter-rouge">--storage</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag record --storage &lt;storage_id&gt;

</code></pre></div></div>

<p>Bag reading commands can detect the storage plugin automatically, but if for any reason you want to force a specific plugin to read a bag, you can use the <code class="language-plaintext highlighter-rouge">--storage</code> option on any <code class="language-plaintext highlighter-rouge">ros2 bag</code> verb.</p>

<p>To write your own Rosbag2 storage implementation, refer to <a href="https://github.com/ros2/rosbag2/tree/jazzy/docs/storage_plugin_development.md">Storage Plugin Development</a></p>

<h3 id="serialization-format-plugin-architecture">Serialization format plugin architecture</h3>

<p>Looking further at the output of <code class="language-plaintext highlighter-rouge">ros2 bag info</code>, we can see another field attached to each topic called <code class="language-plaintext highlighter-rouge">Serialization Format</code>.
By design, ROS 2 is middleware agnostic and thus can leverage multiple communication frameworks.
The default middleware for ROS 2 is DDS which has <code class="language-plaintext highlighter-rouge">cdr</code> as its default binary serialization format.
However, other middleware implementation might have different formats.
If not specified, <code class="language-plaintext highlighter-rouge">ros2 bag record -a</code> will record all data in the middleware specific format.
This however also means that such a bag file can’t easily be replayed with another middleware format.</p>

<p>Rosbag2 implements a serialization format plugin architecture which allows the user the specify a certain serialization format.
When specified, Rosbag2 looks for a suitable converter to transform the native middleware protocol to the target format.
This also allows to record data in a native format to optimize for speed, but to convert or transform the recorded data into a middleware agnostic serialization format.</p>

<p>By default, Rosbag2 can convert from and to CDR as it’s the default serialization format for ROS 2.</p>

<h2 id="tips-and-tricks">Tips and Tricks</h2>

<h3 id="record-bags-to-a-custom-base-directory">Record bags to a custom base directory</h3>

<p>If you want to send bagfiles to a different directory than the current working directory, like so</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/my/bag/base_dir
├── rosbag2_2025_02_21-15_35_35
|   ├── metadata.yaml
│   └── rosbag2_2025_02_21-15_35_35_0.mcap
└── rosbag2_2025_02_21-15_37_17
    ├── metadata.yaml
    └── rosbag2_2025_02_21-15_37_17_0.mcap

</code></pre></div></div>

<p>This can be accomplished without features in Rosbag2 itself.</p>

<p>In shell:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">pushd</span> /my/bag/base_dir <span class="o">&amp;&amp;</span> ros2 bag record ...

</code></pre></div></div>

<p>In launch:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">ExecuteProcess</span><span class="p">(</span>
  <span class="n">cmd</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">ros2</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">bag</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">record</span><span class="sh">'</span><span class="p">,</span> <span class="p">...],</span>
  <span class="n">cwd</span><span class="o">=</span><span class="n">my_base_dir</span><span class="p">,</span>
<span class="p">),</span>

<span class="n">You</span> <span class="n">can</span> <span class="n">fully</span> <span class="n">customize</span> <span class="n">the</span> <span class="n">output</span> <span class="n">bag</span> <span class="n">name</span><span class="p">,</span> <span class="n">without</span> <span class="nb">any</span> <span class="n">Rosbag2</span> <span class="n">special</span> <span class="n">features</span><span class="p">.</span>

<span class="n">For</span> <span class="n">example</span><span class="p">,</span> <span class="n">you</span> <span class="n">want</span> <span class="n">a</span> <span class="n">timestamp</span> <span class="n">on</span> <span class="n">the</span> <span class="n">bag</span> <span class="n">directory</span> <span class="n">name</span><span class="p">,</span> <span class="n">but</span> <span class="n">want</span> <span class="n">a</span> <span class="n">custom</span> <span class="n">prefix</span> <span class="n">instead</span> <span class="n">of</span> <span class="sb">`rosbag2_`</span><span class="p">.</span>


<span class="sb">``</span><span class="err">`</span><span class="n">bash</span>
<span class="err">$</span> <span class="n">ros2</span> <span class="n">bag</span> <span class="n">record</span> <span class="o">-</span><span class="n">a</span> <span class="o">-</span><span class="n">o</span> <span class="n">mybag_</span><span class="sh">"</span><span class="s">$(date +</span><span class="sh">"</span><span class="o">%</span><span class="n">Y_</span><span class="o">%</span><span class="n">m_</span><span class="o">%</span><span class="n">d</span><span class="o">-%</span><span class="n">H_</span><span class="o">%</span><span class="n">M_</span><span class="o">%</span><span class="n">S</span><span class="sh">"</span><span class="s">)</span><span class="sh">"</span>
<span class="p">...</span> <span class="n">creates</span> <span class="n">e</span><span class="p">.</span><span class="n">g</span><span class="p">.</span> <span class="n">mybag_2025_02_21</span><span class="o">-</span><span class="mi">15_35_35</span>

</code></pre></div></div>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>

<p>Contributors must sign-off each commit by adding a <code class="language-plaintext highlighter-rouge">Signed-off-by: ...</code>
line to commit messages to certify that they have the right to submit
the code they are contributing to the project according to the
<a href="https://developercertificate.org/">Developer Certificate of Origin (DCO)</a>.</p>
</div>
              <hr id="jazzy-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="jazzy-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#jazzy-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#jazzy-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#jazzy-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="jazzy-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="jazzy-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="jazzy-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rosbag2">rosbag2</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/liblz4_vendor">liblz4_vendor</a>
        
        <a class="label label-primary pkg-label" href="/p/mcap_vendor">mcap_vendor</a>
        
        <a class="label label-primary pkg-label" href="/p/ros2bag">ros2bag</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2">rosbag2</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_compression">rosbag2_compression</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_compression_zstd">rosbag2_compression_zstd</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_cpp">rosbag2_cpp</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_examples_cpp">rosbag2_examples_cpp</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_examples_py">rosbag2_examples_py</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_interfaces">rosbag2_interfaces</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_performance_benchmarking">rosbag2_performance_benchmarking</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_performance_benchmarking_msgs">rosbag2_performance_benchmarking_msgs</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_py">rosbag2_py</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_storage">rosbag2_storage</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_storage_default_plugins">rosbag2_storage_default_plugins</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_storage_mcap">rosbag2_storage_mcap</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_storage_sqlite3">rosbag2_storage_sqlite3</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_test_common">rosbag2_test_common</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_test_msgdefs">rosbag2_test_msgdefs</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_tests">rosbag2_tests</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_transport">rosbag2_transport</a>
        
        <a class="label label-primary pkg-label" href="/p/sqlite3_vendor">sqlite3_vendor</a>
        
        <a class="label label-primary pkg-label" href="/p/zstd_vendor">zstd_vendor</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-rosbag2
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-rosbag2" role="menuitem" tabindex="-1" href="/r/rosbag2/github-ros2-rosbag2" data="github-ros2-rosbag2">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-rosbag2
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros2/rosbag2.git">https://github.com/ros2/rosbag2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">kilted</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-26
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rosbag2/#kilted-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rosbag2/#kilted-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rosbag2/#kilted-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/liblz4_vendor">liblz4_vendor</a></td>
                    <td>0.32.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/mcap_vendor">mcap_vendor</a></td>
                    <td>0.32.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ros2bag">ros2bag</a></td>
                    <td>0.32.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2">rosbag2</a></td>
                    <td>0.32.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_compression">rosbag2_compression</a></td>
                    <td>0.32.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_compression_zstd">rosbag2_compression_zstd</a></td>
                    <td>0.32.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_cpp">rosbag2_cpp</a></td>
                    <td>0.32.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_examples_cpp">rosbag2_examples_cpp</a></td>
                    <td>0.32.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_examples_py">rosbag2_examples_py</a></td>
                    <td>0.32.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_interfaces">rosbag2_interfaces</a></td>
                    <td>0.32.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_performance_benchmarking">rosbag2_performance_benchmarking</a></td>
                    <td>0.32.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_performance_benchmarking_msgs">rosbag2_performance_benchmarking_msgs</a></td>
                    <td>0.32.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_py">rosbag2_py</a></td>
                    <td>0.32.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_storage">rosbag2_storage</a></td>
                    <td>0.32.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_storage_default_plugins">rosbag2_storage_default_plugins</a></td>
                    <td>0.32.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_storage_mcap">rosbag2_storage_mcap</a></td>
                    <td>0.32.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_storage_sqlite3">rosbag2_storage_sqlite3</a></td>
                    <td>0.32.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_test_common">rosbag2_test_common</a></td>
                    <td>0.32.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_test_msgdefs">rosbag2_test_msgdefs</a></td>
                    <td>0.32.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_tests">rosbag2_tests</a></td>
                    <td>0.32.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_transport">rosbag2_transport</a></td>
                    <td>0.32.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/sqlite3_vendor">sqlite3_vendor</a></td>
                    <td>0.32.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/zstd_vendor">zstd_vendor</a></td>
                    <td>0.32.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="rosbag2">Rosbag2</h1>
<p><img src="https://img.shields.io/github/license/ros2/rosbag2" alt="License">
<a href="https://github.com/ros2/rosbag2/actions"><img src="https://github.com/ros2/rosbag2/workflows/Test%20rosbag2/badge.svg" alt="GitHub Action Status"></a></p>

<p>Rosbag2 — the tool for recording and playback of communications in ROS 2 systems.</p>

<p>This is the ROS 2 successor of https://wiki.ros.org/rosbag.</p>

<p>A “rosbag” is simply a file full of timestamped messages. The first goal of the tool is efficient recording, to support complex systems in real time. Its second goal is efficent playback, to allow for viewing and using recorded data.</p>

<p>For historical context, see the original <a href="https://github.com/ros2/design/blob/ros2bags/articles/rosbags.md">design article</a> that kicked off the project.</p>

<p>This README has a lot of information. You may want to jump directly to:</p>
<ul>
  <li><a href="https://github.com/ros2/rosbag2/tree/kilted/#installation">Installation</a></li>
  <li><a href="https://github.com/ros2/rosbag2/tree/kilted/#usage">Usage</a></li>
  <li><a href="https://github.com/ros2/rosbag2/tree/kilted/#tips-and-tricks">Tips and Tricks</a></li>
</ul>

<h2 id="installation">Installation</h2>

<h3 id="debian-packages">Debian packages</h3>

<p>Rosbag2 packages are available via debian packages, and will already be included with any <code class="language-plaintext highlighter-rouge">-ros-base</code> installation (which is included within <code class="language-plaintext highlighter-rouge">-desktop</code>)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ export ROS_DISTRO=humble
$ sudo apt-get install ros-$ROS_DISTRO-rosbag2

</code></pre></div></div>

<h3 id="other-binaries">Other binaries</h3>

<p>You can follow the instructions at http://docs.ros.org/en/humble/Installation/Alternatives/Ubuntu-Install-Binary.html (or for your chosen distro), and Rosbag2 will be included in that installation.</p>

<h3 id="build-from-source">Build from source</h3>

<p>To build from source, follow the instructions in <a href="https://github.com/ros2/rosbag2/tree/kilted/DEVELOPING.md">DEVELOPING.md</a></p>

<h2 id="using-rosbag2-">Using rosbag2 <a id="usage"></a>
</h2>

<p>Rosbag2 is part of the ROS 2 command line interface as <code class="language-plaintext highlighter-rouge">ros2 bag</code>.
These verbs are available for <code class="language-plaintext highlighter-rouge">ros2 bag</code>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ros2 bag burst</code></li>
  <li><a href="https://github.com/ros2/rosbag2/tree/kilted/#convert"><code class="language-plaintext highlighter-rouge">ros2 bag convert</code></a></li>
  <li><a href="https://github.com/ros2/rosbag2/tree/kilted/#info"><code class="language-plaintext highlighter-rouge">ros2 bag info</code></a></li>
  <li><code class="language-plaintext highlighter-rouge">ros2 bag list</code></li>
  <li><a href="https://github.com/ros2/rosbag2/tree/kilted/#play"><code class="language-plaintext highlighter-rouge">ros2 bag play</code></a></li>
  <li><a href="https://github.com/ros2/rosbag2/tree/kilted/#record"><code class="language-plaintext highlighter-rouge">ros2 bag record</code></a></li>
  <li><code class="language-plaintext highlighter-rouge">ros2 bag reindex</code></li>
</ul>

<p>For up-to-date information on the available options for each, use <code class="language-plaintext highlighter-rouge">ros2 bag &lt;verb&gt; --help</code>.</p>

<p>Moreover, <code class="language-plaintext highlighter-rouge">rosbag2_transport::Player</code> and <code class="language-plaintext highlighter-rouge">rosbag2_transport::Recorder</code> components can be instantiated in <code class="language-plaintext highlighter-rouge">rclcpp</code> component containers, which makes possible to use intra-process communication for greater efficiency.
See <a href="https://github.com/ros2/rosbag2/tree/kilted/#composition">composition</a> section for details.</p>

<h3 id="recording-data-">Recording data <a id="record"></a>
</h3>

<p>In order to record all topics currently available in the system:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag record -a

</code></pre></div></div>

<p>The command above will record all available topics and discovers new topics as they appear while recording.
This auto-discovery of new topics can be disabled by given the command line argument <code class="language-plaintext highlighter-rouge">--no-discovery</code>.</p>

<p>To record a set of predefined topics, one can specify them on the command line explicitly.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag record &lt;topic1&gt; &lt;topic2&gt; … &lt;topicN&gt;

</code></pre></div></div>

<p>The specified topics don’t necessarily have to be present at start time.
The discovery function will automatically recognize if one of the specified topics appeared.
In the same fashion, this auto discovery can be disabled with <code class="language-plaintext highlighter-rouge">--no-discovery</code>.</p>

<p>If not further specified, <code class="language-plaintext highlighter-rouge">ros2 bag record</code> will create a new folder named to the current time stamp and stores all data within this folder.
A user defined name can be given with <code class="language-plaintext highlighter-rouge">-o, --output</code>.</p>

<h4 id="simulation-time">Simulation time</h4>

<p>In ROS 2, “simulation time” refers to publishing a clock value on the <code class="language-plaintext highlighter-rouge">/clock</code> topic, instead of using the system clock to tell time.
By passing <code class="language-plaintext highlighter-rouge">--use-sim-time</code> argument to <code class="language-plaintext highlighter-rouge">ros2 bag record</code>, we turn on this option for the recording node.
Messages written to the bag will use the latest received value of <code class="language-plaintext highlighter-rouge">/clock</code> for the timestamp of the recorded message.</p>

<p>Note: Until the first <code class="language-plaintext highlighter-rouge">/clock</code> message is received, the recorder will not write any messages.
Before that message is received, the time is 0, which leads to a significant time jump once simulation time begins, making the bag essentially unplayable if messages are written first with time 0 and then time N from <code class="language-plaintext highlighter-rouge">/clock</code>.</p>

<h4 id="splitting-files-during-recording">Splitting files during recording</h4>

<p>Rosbag2 offers the capability to split bag files when they reach a maximum size or after a specified duration. By default Rosbag2 will record all data into a single bag file, but this can be changed using the CLI options.</p>

<p><em>Splitting by size</em>: <code class="language-plaintext highlighter-rouge">ros2 bag record -a -b 100000</code> will split the bag files when they become greater than 100 kilobytes. Note: the batch size’s units are in bytes and must be greater than <code class="language-plaintext highlighter-rouge">86016</code>. This option defaults to <code class="language-plaintext highlighter-rouge">0</code>, which means data is written to a single file.</p>

<p><em>Splitting by time</em>: <code class="language-plaintext highlighter-rouge">ros2 bag record -a -d 9000</code> will split the bag files after a duration of <code class="language-plaintext highlighter-rouge">9000</code> seconds. This option defaults to <code class="language-plaintext highlighter-rouge">0</code>, which means data is written to a single file.</p>

<p>If both splitting by size and duration are enabled, the bag will split at whichever threshold is reached first.</p>

<h4 id="recording-with-compression">Recording with compression</h4>

<p>By default Rosbag2 does not record with compression enabled. However, compression can be specified using the following CLI options.</p>

<p>For example, <code class="language-plaintext highlighter-rouge">ros2 bag record -a --compression-mode file --compression-format zstd</code> will record all topics and compress each file using the <a href="https://github.com/facebook/zstd">zstd</a> compressor.</p>

<p>Currently, the only <code class="language-plaintext highlighter-rouge">compression-format</code> available is <code class="language-plaintext highlighter-rouge">zstd</code>. Both the mode and format options default to <code class="language-plaintext highlighter-rouge">none</code>. To use a compression format, a compression mode must be specified, where the currently supported modes are compress by <code class="language-plaintext highlighter-rouge">file</code> or compress by <code class="language-plaintext highlighter-rouge">message</code>.</p>

<p>It is recommended to use this feature with the splitting options.</p>

<p><strong>Note</strong>: Some storage plugins may have their own compression methods, which are separate from the Rosbag2 compression specified by the CLI options <code class="language-plaintext highlighter-rouge">--compression-mode</code> and <code class="language-plaintext highlighter-rouge">--compression-format</code>. Notably, the MCAP file format offered by the <code class="language-plaintext highlighter-rouge">rosbag2_storage_mcap</code> storage plugin supports compression in a way that produces files that are still indexable (whereas using the Rosbag2 compression will not). To utilize storage plugin specific compression or other options, see <a href="https://github.com/ros2/rosbag2/tree/kilted/#record-storage-config">Recording with a storage configuration</a>.</p>

<h4 id="recording-with-a-storage-configuration-">Recording with a storage configuration <a id="record-storage-config"></a>
</h4>

<p>Storage configuration can be specified in a YAML file passed through the <code class="language-plaintext highlighter-rouge">--storage-config-file</code> option.
This can be used to optimize performance for specific use cases.</p>

<p>See storage plugin documentation for more detail:</p>
<ul>
  <li><a href="https://github.com/ros2/rosbag2/tree/kilted/rosbag2_storage_mcap/README.md#writer-configuration">mcap</a></li>
  <li><a href="https://github.com/ros2/rosbag2/tree/kilted/rosbag2_storage_sqlite3/README.md#storage-configuration-file">sqlite3</a></li>
</ul>

<h4 id="controlling-recordings-via-services">Controlling recordings via services</h4>

<p>The Rosbag2 recorder provides the following services for remote control, which can be called via <code class="language-plaintext highlighter-rouge">ros2 service</code> commandline, or from your nodes:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">~/is_paused [rosbag2_interfaces/srv/IsPaused]</code>
    <ul>
      <li>Returns whether recording is currently paused.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/pause [rosbag2_interfaces/srv/Pause]</code>
    <ul>
      <li>Pauses recording. All messages that have already arrived will be written, but all messages that arrive after pausing will be discarded. Has no effect if already paused. Takes no arguments.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/resume [rosbag2_interfaces/srv/Resume]</code>
    <ul>
      <li>Resume recording if paused. Has no effect if not paused. Takes no arguments.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/split_bagfile [rosbag2_interfaces/srv/SplitBagfile]</code>
    <ul>
      <li>Triggers a split to a new file, even if none of the configured split criteria (such as <code class="language-plaintext highlighter-rouge">--max-bag-size</code> or <code class="language-plaintext highlighter-rouge">--max-bag-duration</code>) have been met yet</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/snapshot [rosbag2_interfaces/srv/Snapshot]</code>
    <ul>
      <li>enabled if <code class="language-plaintext highlighter-rouge">--snapshot-mode</code> is specified. Takes no arguments, triggers a snapshot.</li>
    </ul>
  </li>
</ul>

<h4 id="snapshot-mode">Snapshot mode</h4>

<p>The Recorder provides a “snapshot mode”, enabled via <code class="language-plaintext highlighter-rouge">--snapshot-mode</code> or <code class="language-plaintext highlighter-rouge">StorageOptions.snapshot_mode</code>, which does not write messages to disk as they come in, but instead keeps an in-memory circular buffer of size <code class="language-plaintext highlighter-rouge">--max-cache-size</code>.
This entire buffer can be dumped to disk on request, saving data only in specified circumstances such as a detected error condition or point of interest, capturing the “last N bytes” of incoming data, therefore making sure that you can trigger snapshot after the fact of the event.</p>

<p>The snapshot is taken by calling the <code class="language-plaintext highlighter-rouge">~/snapshot</code> service on the recorder, described previously.</p>

<h3 id="replaying-data-">Replaying data <a id="play"></a>
</h3>

<p>When you have a recorded bag, you can use Rosbag2 to play it back:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag play &lt;bag&gt;

</code></pre></div></div>

<p>The bag argument can be a directory containing <code class="language-plaintext highlighter-rouge">metadata.yaml</code> and one or more storage files, or
to a single storage file such as <code class="language-plaintext highlighter-rouge">.mcap</code> or <code class="language-plaintext highlighter-rouge">.db3</code>.
The Player will automatically detect which storage implementation to use for playing.
A progress bar to track the playback progress will be displayed in the terminal by default.</p>

<p>To play back multiple bags:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag play &lt;bag1&gt; -i &lt;bag2&gt; -i &lt;bag3&gt;

</code></pre></div></div>

<p>Messages from all provided bags will be played in order, based on their original recording
reception timestamps.</p>

<p>Options:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">--topics</code>:
Space-delimited list of topics to play.</li>
  <li>
<code class="language-plaintext highlighter-rouge">--services</code>:
Space-delimited list of services to play.</li>
  <li>
<code class="language-plaintext highlighter-rouge">--actions</code>:
Space-delimited list of actions to play.</li>
  <li>
<code class="language-plaintext highlighter-rouge">-e,--regex</code>:
Play only topics and services matches with regular expression.</li>
  <li>
<code class="language-plaintext highlighter-rouge">-x,--exclude-regex</code>:
Regular expressions to exclude topics and services from replay.</li>
  <li>
<code class="language-plaintext highlighter-rouge">--exclude-topics</code>:
Space-delimited list of topics not to play.</li>
  <li>
<code class="language-plaintext highlighter-rouge">--exclude-services</code>:
Space-delimited list of services not to play.</li>
  <li>
<code class="language-plaintext highlighter-rouge">--exclude-actions</code>:
Space-delimited list of actions not to play.</li>
  <li>
<code class="language-plaintext highlighter-rouge">--message-order {received,sent}</code>:
The reference to use for bag message chronological ordering.
Choices: reception timestamp (<code class="language-plaintext highlighter-rouge">received</code>), publication timestamp (<code class="language-plaintext highlighter-rouge">sent</code>).
Default: reception timestamp.</li>
  <li>
<code class="language-plaintext highlighter-rouge">--progress-bar-update-rate [Hz]</code>:
Print a progress bar for the playback with a specified maximum update rate in times per second
(Hz). Negative values mark an update for every published message, while a zero value disables
the progress bar. Default is 3 Hz.</li>
  <li>
<code class="language-plaintext highlighter-rouge">--progress-bar-separation-lines</code>:
The number of lines to separate the progress bar from the rest of the playback player output.
It prevents mixing external log messages with the progress bar string. Default to 2.</li>
</ul>

<p>For more options, run with <code class="language-plaintext highlighter-rouge">--help</code>.</p>

<h4 id="playback-action-messages-as-action-client">Playback action messages as action client</h4>

<p>If you want Rosbag2 to replay recorded action messages in the role of an action client, you need to specify the –send-actions-as-client parameter.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag play --send-actions-as-client &lt;bag&gt;

</code></pre></div></div>
<p>Rosbag2 will send recorded goal request, cancel request and result request to action server.<br>
For more information, please refer to https://github.com/ros2/rosbag2/blob/rolling/docs/design/rosbag2_record_replay_action.md.</p>

<h4 id="controlling-playback-via-services">Controlling playback via services</h4>

<p>The Rosbag2 player provides the following services for remote control, which can be called via <code class="language-plaintext highlighter-rouge">ros2 service</code> commandline or from your nodes,</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">~/burst [rosbag2_interfaces/srv/Burst]</code>
    <ul>
      <li>Can only be used while player is paused, publishes <code class="language-plaintext highlighter-rouge">num_messages</code> in order as fast as possible, moving forward the play head.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/get_rate [rosbag2_interfaces/srv/GetRate]</code>
    <ul>
      <li>Return the current playback rate.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/is_paused [rosbag2_interfaces/srv/IsPaused]</code>
    <ul>
      <li>Return whether playback is paused.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/pause [rosbag2_interfaces/srv/Pause]</code>
    <ul>
      <li>Pause playback. Has no effect if already paused.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/play [rosbag2_interfaces/srv/Play]</code>
    <ul>
      <li>Play from a starting offset timestamp, either until the end, an ending timestamp or for a set duration. Only works when stopped (not paused).</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/play_next [rosbag2_interfaces/srv/PlayNext]</code>
    <ul>
      <li>Play a single next message from the bag. Only works while paused.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/resume [rosbag2_interfaces/srv/Resume]</code>
    <ul>
      <li>Resume playback if paused.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/seek [rosbag2_interfaces/srv/Seek]</code>
    <ul>
      <li>Change the play head to the specified timestamp. Can be forward or backward in time, the next played message is the next immediately after the seeked timestamp.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/set_rate [rosbag2_interfaces/srv/SetRate]</code>
    <ul>
      <li>Sets the rate of playback, for example 2.0 will play messages twice as fast.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/stop [rosbag2_interfaces/srv/Stop]</code>
    <ul>
      <li>Stop the player, putting the play head in “undefined position” outside the bag. Must call <code class="language-plaintext highlighter-rouge">play</code> before other operations can be done.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/toggle_paused [rosbag2_interfaces/srv/TogglePaused]</code>
    <ul>
      <li>Pause if playing, resume if paused.</li>
    </ul>
  </li>
</ul>

<h3 id="analyzing-data-">Analyzing data <a id="info"></a>
</h3>

<p>The recorded data can be analyzed by displaying some meta information about it:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag info &lt;bag_file&gt;

</code></pre></div></div>

<p>You should see something along these lines:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Files:             demo_strings.db3
Bag size:          44.5 KiB
Storage id:        sqlite3
Duration:          8.501s
Start:             Nov 28 2018 18:02:18.600 (1543456938.600)
End                Nov 28 2018 18:02:27.102 (1543456947.102)
Messages:          27
Topic information: Topic: /chatter | Type: std_msgs/String | Count: 9 | Serialization Format: cdr
                   Topic: /my_chatter | Type: std_msgs/String | Count: 18 | Serialization Format: cdr

</code></pre></div></div>

<h3 id="converting-bags-merge-split-etc-">Converting bags (merge, split, etc.) <a id="convert"></a>
</h3>

<p>Rosbag2 provides a tool <code class="language-plaintext highlighter-rouge">ros2 bag convert</code> (or, <code class="language-plaintext highlighter-rouge">rosbag2_transport::bag_rewrite</code> in the C++ API).
This allows the user to take one or more input bags, and write them out to one or more output bags with new settings.
This flexible feature enables the following features:</p>
<ul>
  <li>Merge (multiple input bags, one output bag)</li>
  <li>Split top-level bags (one input bag, multiple output bags)</li>
  <li>Split internal files (by time or size - one input bag with fewer internal files, one output bag with more, smaller, internal files)</li>
  <li>Compress/Decompress (output bag(s) with different compression settings than the input(s))</li>
  <li>Serialization format conversion</li>
  <li>… and more!</li>
</ul>

<p>Here is an example command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 bag convert --input /path/to/bag1 --input /path/to/bag2 storage_id --output-options output_options.yaml

</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">--input</code> argument may be specified any number of times, and takes 1 or 2 values.
The first value is the URI of the input bag.
If a second value is supplied, it specifies the storage implementation of the bag.
If no storage implementation is specified, Rosbag2 will try to determine it automatically from the bag.</p>

<p>The <code class="language-plaintext highlighter-rouge">--output-options</code> argument must point to the URI of a YAML file specifying the full recording configuration for each bag to output (<code class="language-plaintext highlighter-rouge">StorageOptions</code> + <code class="language-plaintext highlighter-rouge">RecordOptions</code>).
This file must contain a top-level key <code class="language-plaintext highlighter-rouge">output_bags</code>, which contains a list of these objects.</p>

<p>The only required value in the output bags is <code class="language-plaintext highlighter-rouge">uri</code> and <code class="language-plaintext highlighter-rouge">storage_id</code>. All other values are options (however, if no topic selection is specified, this output bag will be empty!).</p>

<p>This example notes all fields that can have an effect, with a comment on the required ones.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>output_bags:
- uri: /output/bag1  # required
  storage_id: ""  # will use the default storage plugin, if unspecified
  max_bagfile_size: 0
  max_bagfile_duration: 0
  storage_preset_profile: ""
  storage_config_uri: ""
  # optional filter for msg time t [nsec since epoch]:  start_time_ns &lt;= t &lt;= end_time_ns
  # start_time_ns: 1744227144744197147
  # end_time_ns: 1744227145734665546
  all_topics: false
  topics: []
  topic_types: []
  all_services: false
  services: []
  all_actions: false
  actions: []
  rmw_serialization_format: ""  # defaults to using the format of the input topic
  regex: ""
  exclude_regex: ""
  exclude_topics: []
  exclude_topic_types: []
  exclude_services: []
  exclude_actions: []
  compression_mode: ""
  compression_format: ""
  compression_queue_size: 1
  compression_threads: 0
  include_hidden_topics: false
  include_unpublished_topics: false

</code></pre></div></div>

<p>Example merge:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag convert -i bag1 -i bag2 -o out.yaml

# out.yaml
output_bags:
- uri: merged_bag
  all_topics: true
  all_services: true

</code></pre></div></div>

<p>Example split:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag convert -i bag1 -o out.yaml

# out.yaml
output_bags:
- uri: split1
  topics: [/topic1, /topic2]
- uri: split2
  topics: [/topic3]

</code></pre></div></div>

<p>Example compress:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag convert -i bag1 -o out.yaml

# out.yaml
output_bags:
- uri: compressed
  all_topics: true
  all_services: true
  compression_mode: file
  compression_format: zstd

</code></pre></div></div>

<h3 id="overriding-qos-profiles">Overriding QoS Profiles</h3>

<p>When starting a recording or playback, you can pass a YAML file that contains QoS profile settings for a specific topic.
The YAML schema for the profile overrides is a dictionary of topic names with key/value pairs for each QoS policy.
Below is an example profile set to the default ROS2 QoS settings.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">/topic_name</span><span class="pi">:</span>
  <span class="na">history</span><span class="pi">:</span> <span class="s">keep_last</span>
  <span class="na">depth</span><span class="pi">:</span> <span class="m">10</span>
  <span class="na">reliability</span><span class="pi">:</span> <span class="s">reliable</span>
  <span class="na">durability</span><span class="pi">:</span> <span class="s">volatile</span>
  <span class="na">deadline</span><span class="pi">:</span>
    <span class="c1"># unspecified/infinity</span>
    <span class="na">sec</span><span class="pi">:</span> <span class="m">0</span>
    <span class="na">nsec</span><span class="pi">:</span> <span class="m">0</span>
  <span class="na">lifespan</span><span class="pi">:</span>
    <span class="c1"># unspecified/infinity</span>
    <span class="na">sec</span><span class="pi">:</span> <span class="m">0</span>
    <span class="na">nsec</span><span class="pi">:</span> <span class="m">0</span>
  <span class="na">liveliness</span><span class="pi">:</span> <span class="s">system_default</span>
  <span class="na">liveliness_lease_duration</span><span class="pi">:</span>
    <span class="c1"># unspecified/infinity</span>
    <span class="na">sec</span><span class="pi">:</span> <span class="m">0</span>
    <span class="na">nsec</span><span class="pi">:</span> <span class="m">0</span>
  <span class="na">avoid_ros_namespace_conventions</span><span class="pi">:</span> <span class="kc">false</span>

</code></pre></div></div>

<p>You can then use the override by specifying the <code class="language-plaintext highlighter-rouge">--qos-profile-overrides-path</code> argument in the CLI:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Record</span>
ros2 bag record <span class="nt">--qos-profile-overrides-path</span> override.yaml <span class="nt">-a</span> <span class="nt">-o</span> my_bag
<span class="c"># Playback</span>
ros2 bag play <span class="nt">--qos-profile-overrides-path</span> override.yaml my_bag

</code></pre></div></div>

<p>See <a href="https://docs.ros.org/en/rolling/Guides/Overriding-QoS-Policies-For-Recording-And-Playback.html">the official QoS override tutorial</a> and <a href="https://docs.ros.org/en/rolling/Concepts/About-Quality-of-Service-Settings.html">“About QoS Settings”</a> for more detail.</p>

<h3 id="using-in-launch">Using in launch</h3>

<p>We can invoke the command line tool from a ROS launch script as an <em>executable</em> (not a <em>node</em> action).
For example, to launch the command to record all topics you can use the following launch script:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;launch&gt;</span>
  <span class="nt">&lt;executable</span> <span class="na">cmd=</span><span class="s">"ros2 bag record -a"</span> <span class="na">output=</span><span class="s">"screen"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/launch&gt;</span>

</code></pre></div></div>

<p>Here’s the equivalent Python launch script:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">launch</span>


<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">launch</span><span class="p">.</span><span class="nc">LaunchDescription</span><span class="p">([</span>
        <span class="n">launch</span><span class="p">.</span><span class="n">actions</span><span class="p">.</span><span class="nc">ExecuteProcess</span><span class="p">(</span>
            <span class="n">cmd</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">ros2</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">bag</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">record</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">-a</span><span class="sh">'</span><span class="p">],</span>
            <span class="n">output</span><span class="o">=</span><span class="sh">'</span><span class="s">screen</span><span class="sh">'</span>
        <span class="p">)</span>
    <span class="p">])</span>

</code></pre></div></div>

<p>Use the <code class="language-plaintext highlighter-rouge">ros2 launch</code> command line tool to launch either of the above launch scripts.
For example, if we named the above XML launch script, <code class="language-plaintext highlighter-rouge">record_all.launch.xml</code>:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ros2 launch record_all.launch.xml

</code></pre></div></div>

<p>You can also invoke the <code class="language-plaintext highlighter-rouge">play</code> and <code class="language-plaintext highlighter-rouge">record</code> functionalities provided by <code class="language-plaintext highlighter-rouge">rosbag2_transport</code> package as nodes.
The advantage to use this invocation strategy is that the Python layer handling the <code class="language-plaintext highlighter-rouge">ros2 bag</code> CLI is completely skipped.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">launch</span>

<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">launch</span><span class="p">.</span><span class="nc">LaunchDescription</span><span class="p">([</span>
        <span class="n">launch</span><span class="p">.</span><span class="n">actions</span><span class="p">.</span><span class="nc">Node</span><span class="p">(</span>
            <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">rosbag2_transport</span><span class="sh">'</span><span class="p">,</span>
            <span class="n">executable</span><span class="o">=</span><span class="sh">'</span><span class="s">player</span><span class="sh">'</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">player</span><span class="sh">'</span><span class="p">,</span>
            <span class="n">output</span><span class="o">=</span><span class="sh">"</span><span class="s">screen</span><span class="sh">"</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="sh">"</span><span class="s">/path/to/params.yaml</span><span class="sh">"</span><span class="p">],</span>
        <span class="p">)</span>
    <span class="p">])</span>

</code></pre></div></div>

<h3 id="using-recorder-and-player-as-composable-nodes-">Using recorder and player as composable nodes <a id="composition"></a>
</h3>

<p>Play and record are fundamental tasks of Rosbag2. However, playing or recording data at high rates may have limitations (e.g. spurious packet drops) due to one of the following:</p>
<ul>
  <li>low network bandwidth</li>
  <li>high CPU load</li>
  <li>slow mass memory</li>
  <li>ROS 2 middleware serialization/deserialization delays &amp; overhead</li>
</ul>

<p>ROS 2 C++ nodes can benefit from intra-process communication to partially or completely bypass network transport of messages between two nodes.</p>

<p>Multiple <em>components</em> can be <em>composed</em>, either <a href="https://docs.ros.org/en/rolling/Tutorials/Intermediate/Composition.html#compile-time-composition-with-hardcoded-nodes">statically</a> or <a href="https://docs.ros.org/en/rolling/Tutorials/Intermediate/Composition.html#run-time-composition-using-ros-services-with-a-publisher-and-subscriber">dynamically</a>: all the composed component will share the same address space because they will be loaded in a single process.</p>

<p>A prerequirement is for each C++ node to be <a href="https://docs.ros.org/en/rolling/Concepts/Intermediate/About-Composition.html?highlight=composition"><em>composable</em></a> and to follow the <a href="https://docs.ros.org/en/rolling/Tutorials/Demos/Intra-Process-Communication.html?highlight=intra">guidelines</a> for efficient publishing &amp; subscription.</p>

<p>With the above requirements met, the user can:</p>
<ul>
  <li>compose multiple nodes together</li>
  <li>explicitly enable intra-process communication</li>
</ul>

<p>Whenever a publisher and a subscriber on the same topic belong to the same <em>composed</em> process, and intra-process is enabled for both, <code class="language-plaintext highlighter-rouge">rclcpp</code> completely bypasses RMW layer and below transport layer (i.e. DDS). Instead, messages are shared via process memory and <em>potentially</em> never copied. Some exception hold, so please have a look to the <a href="https://docs.ros.org/en/rolling/Tutorials/Demos/Intra-Process-Communication.html?highlight=intra">IPC guidelines</a>.</p>

<p>Here is an example of Python launchfile composition. Notice that composable container components do not expect YAML files to be directly passed to them: parameters have to be “dumped” out from the YAML file (if you have one). A suggestion of possible implementation is offered as a starting point.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">launch</span>
<span class="kn">import</span> <span class="n">launch_ros</span>
<span class="kn">import</span> <span class="n">yaml</span>

<span class="sh">'''</span><span class="s">
Used to load parameters for composable nodes from a standard param file
</span><span class="sh">'''</span>
<span class="k">def</span> <span class="nf">dump_params</span><span class="p">(</span><span class="n">param_file_path</span><span class="p">,</span> <span class="n">node_name</span><span class="p">):</span>
    <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">param_file_path</span><span class="p">,</span> <span class="sh">'</span><span class="s">r</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">yaml</span><span class="p">.</span><span class="nf">safe_load</span><span class="p">(</span><span class="nb">file</span><span class="p">)[</span><span class="n">node_name</span><span class="p">][</span><span class="sh">'</span><span class="s">ros__parameters</span><span class="sh">'</span><span class="p">]]</span>

<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">launch</span><span class="p">.</span><span class="nc">LaunchDescription</span><span class="p">([</span>
        <span class="n">launch</span><span class="p">.</span><span class="n">actions</span><span class="p">.</span><span class="nc">ComposableNodeContainer</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">composable_container</span><span class="sh">'</span><span class="p">,</span>
            <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">rclcpp_components</span><span class="sh">'</span><span class="p">,</span>
            <span class="n">executable</span><span class="o">=</span><span class="sh">'</span><span class="s">component_container</span><span class="sh">'</span><span class="p">,</span>
            <span class="n">composable_node_descriptions</span><span class="o">=</span><span class="p">[</span>
                <span class="n">launch_ros</span><span class="p">.</span><span class="n">descriptions</span><span class="p">.</span><span class="nc">ComposableNode</span><span class="p">(</span>
                    <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">rosbag2_transport</span><span class="sh">'</span><span class="p">,</span>
                    <span class="n">plugin</span><span class="o">=</span><span class="sh">'</span><span class="s">rosbag2_transport::Player</span><span class="sh">'</span><span class="p">,</span>
                    <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">player</span><span class="sh">'</span><span class="p">,</span>
                    <span class="n">parameters</span><span class="o">=</span><span class="nf">dump_params</span><span class="p">(</span><span class="sh">"</span><span class="s">/path/to/params.yaml</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">player</span><span class="sh">"</span><span class="p">),</span>
                    <span class="n">extra_arguments</span><span class="o">=</span><span class="p">[{</span><span class="sh">'</span><span class="s">use_intra_process_comms</span><span class="sh">'</span><span class="p">:</span> <span class="bp">True</span><span class="p">}]</span>
                <span class="p">),</span>
                <span class="c1"># your other components here
</span>            <span class="p">]</span>
        <span class="p">)</span>
    <span class="p">])</span>
<span class="p">}</span>

</code></pre></div></div>

<p>Here’s an example YAML configuration for both composable player and recorder:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">recorder</span><span class="pi">:</span>
  <span class="na">ros__parameters</span><span class="pi">:</span>
    <span class="na">use_sim_time</span><span class="pi">:</span> <span class="kc">false</span>
    <span class="na">record</span><span class="pi">:</span>
      <span class="na">all</span><span class="pi">:</span> <span class="kc">true</span>
      <span class="na">is_discovery_disabled</span><span class="pi">:</span> <span class="kc">false</span>
      <span class="na">topic_polling_interval</span><span class="pi">:</span>
        <span class="na">sec</span><span class="pi">:</span> <span class="m">0</span>
        <span class="na">nsec</span><span class="pi">:</span> <span class="m">10000000</span>
      <span class="na">include_hidden_topics</span><span class="pi">:</span> <span class="kc">true</span>
      <span class="na">ignore_leaf_topics</span><span class="pi">:</span> <span class="kc">false</span>
      <span class="na">start_paused</span><span class="pi">:</span> <span class="kc">false</span>

    <span class="na">storage</span><span class="pi">:</span>
      <span class="na">uri</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/path/to/destination/folder"</span>
      <span class="na">storage_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">sqlite3"</span>
      <span class="na">max_cache_size</span><span class="pi">:</span> <span class="m">20000000</span>

</code></pre></div></div>
<p>and</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">player</span><span class="pi">:</span>
  <span class="na">ros__parameters</span><span class="pi">:</span>
    <span class="na">play</span><span class="pi">:</span>
      <span class="na">read_ahead_queue_size</span><span class="pi">:</span> <span class="m">1000</span>
      <span class="na">node_prefix</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
      <span class="na">rate</span><span class="pi">:</span> <span class="m">1.0</span>
      <span class="na">loop</span><span class="pi">:</span> <span class="kc">false</span>
      <span class="c1"># Negative timestamps will make the playback to not stop.</span>
      <span class="na">playback_duration</span><span class="pi">:</span>
        <span class="na">sec</span><span class="pi">:</span> <span class="s">-1</span>
        <span class="na">nsec</span><span class="pi">:</span> <span class="m">00000000</span>
      <span class="na">start_paused</span><span class="pi">:</span> <span class="kc">false</span>

    <span class="na">storage</span><span class="pi">:</span>
      <span class="na">uri</span><span class="pi">:</span> <span class="s2">"</span><span class="s">path/to/rosbag/file"</span>
      <span class="na">storage_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">mcap"</span>
      <span class="na">storage_config_uri</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>

</code></pre></div></div>

<p>For a full list of available parameters, you can refer to <a href="https://github.com/ros2/rosbag2/tree/kilted/rosbag2_transport/test/resources/player_node_params.yaml"><code class="language-plaintext highlighter-rouge">player</code></a> and <a href="https://github.com/ros2/rosbag2/tree/kilted/rosbag2_transport/test/resources/recorder_node_params.yaml"><code class="language-plaintext highlighter-rouge">recorder</code></a> configurations from the <code class="language-plaintext highlighter-rouge">test</code> folder of <code class="language-plaintext highlighter-rouge">rosbag2_transport</code>.</p>

<h2 id="plugin-implementation">Plugin implementation</h2>

<h3 id="storage-format-plugin-architecture">Storage format plugin architecture</h3>

<p>Looking at the output of the <code class="language-plaintext highlighter-rouge">ros2 bag info</code> command, we can see a field <code class="language-plaintext highlighter-rouge">Storage id:</code>.
Rosbag2 was designed to support multiple storage formats to adapt to individual use cases.
This repository provides two storage plugins, <code class="language-plaintext highlighter-rouge">mcap</code> and <code class="language-plaintext highlighter-rouge">sqlite3</code>.
The default is <code class="language-plaintext highlighter-rouge">mcap</code>, which is provided to code by <a href="https://github.com/ros2/rosbag2/tree/kilted/rosbag2_storage/include/rosbag2_storage/default_storage_id.hpp"><code class="language-plaintext highlighter-rouge">rosbag2_storage::get_default_storage_id()</code></a> and defined in <a href="https://github.com/ros2/rosbag2/tree/kilted/rosbag2_storage/src/rosbag2_storage/default_storage_id.cpp#L21"><code class="language-plaintext highlighter-rouge">default_storage_id.cpp</code></a></p>

<p>If not specified otherwise, Rosbag2 will write data using the default plugin.</p>

<p>In order to use a specified (non-default) storage format plugin, Rosbag2 has a command line argument <code class="language-plaintext highlighter-rouge">--storage</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag record --storage &lt;storage_id&gt;

</code></pre></div></div>

<p>Bag reading commands can detect the storage plugin automatically, but if for any reason you want to force a specific plugin to read a bag, you can use the <code class="language-plaintext highlighter-rouge">--storage</code> option on any <code class="language-plaintext highlighter-rouge">ros2 bag</code> verb.</p>

<p>To write your own Rosbag2 storage implementation, refer to <a href="https://github.com/ros2/rosbag2/tree/kilted/docs/storage_plugin_development.md">Storage Plugin Development</a></p>

<h3 id="serialization-format-plugin-architecture">Serialization format plugin architecture</h3>

<p>Looking further at the output of <code class="language-plaintext highlighter-rouge">ros2 bag info</code>, we can see another field attached to each topic called <code class="language-plaintext highlighter-rouge">Serialization Format</code>.
By design, ROS 2 is middleware agnostic and thus can leverage multiple communication frameworks.
The default middleware for ROS 2 is DDS which has <code class="language-plaintext highlighter-rouge">cdr</code> as its default binary serialization format.
However, other middleware implementation might have different formats.
If not specified, <code class="language-plaintext highlighter-rouge">ros2 bag record -a</code> will record all data in the middleware specific format.
This however also means that such a bag file can’t easily be replayed with another middleware format.</p>

<p>Rosbag2 implements a serialization format plugin architecture which allows the user the specify a certain serialization format.
When specified, Rosbag2 looks for a suitable converter to transform the native middleware protocol to the target format.
This also allows to record data in a native format to optimize for speed, but to convert or transform the recorded data into a middleware agnostic serialization format.</p>

<p>By default, Rosbag2 can convert from and to CDR as it’s the default serialization format for ROS 2.</p>

<h2 id="tips-and-tricks">Tips and Tricks</h2>

<h3 id="record-bags-to-a-custom-base-directory">Record bags to a custom base directory</h3>

<p>If you want to send bagfiles to a different directory than the current working directory, like so</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/my/bag/base_dir
├── rosbag2_2025_02_21-15_35_35
|   ├── metadata.yaml
│   └── rosbag2_2025_02_21-15_35_35_0.mcap
└── rosbag2_2025_02_21-15_37_17
    ├── metadata.yaml
    └── rosbag2_2025_02_21-15_37_17_0.mcap

</code></pre></div></div>

<p>This can be accomplished without features in Rosbag2 itself.</p>

<p>In shell:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">pushd</span> /my/bag/base_dir <span class="o">&amp;&amp;</span> ros2 bag record ...

</code></pre></div></div>

<p>In launch:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">ExecuteProcess</span><span class="p">(</span>
  <span class="n">cmd</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">ros2</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">bag</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">record</span><span class="sh">'</span><span class="p">,</span> <span class="p">...],</span>
  <span class="n">cwd</span><span class="o">=</span><span class="n">my_base_dir</span><span class="p">,</span>
<span class="p">),</span>

<span class="n">You</span> <span class="n">can</span> <span class="n">fully</span> <span class="n">customize</span> <span class="n">the</span> <span class="n">output</span> <span class="n">bag</span> <span class="n">name</span><span class="p">,</span> <span class="n">without</span> <span class="nb">any</span> <span class="n">Rosbag2</span> <span class="n">special</span> <span class="n">features</span><span class="p">.</span>

<span class="n">For</span> <span class="n">example</span><span class="p">,</span> <span class="n">you</span> <span class="n">want</span> <span class="n">a</span> <span class="n">timestamp</span> <span class="n">on</span> <span class="n">the</span> <span class="n">bag</span> <span class="n">directory</span> <span class="n">name</span><span class="p">,</span> <span class="n">but</span> <span class="n">want</span> <span class="n">a</span> <span class="n">custom</span> <span class="n">prefix</span> <span class="n">instead</span> <span class="n">of</span> <span class="sb">`rosbag2_`</span><span class="p">.</span>


<span class="sb">``</span><span class="err">`</span><span class="n">bash</span>
<span class="err">$</span> <span class="n">ros2</span> <span class="n">bag</span> <span class="n">record</span> <span class="o">-</span><span class="n">a</span> <span class="o">-</span><span class="n">o</span> <span class="n">mybag_</span><span class="sh">"</span><span class="s">$(date +</span><span class="sh">"</span><span class="o">%</span><span class="n">Y_</span><span class="o">%</span><span class="n">m_</span><span class="o">%</span><span class="n">d</span><span class="o">-%</span><span class="n">H_</span><span class="o">%</span><span class="n">M_</span><span class="o">%</span><span class="n">S</span><span class="sh">"</span><span class="s">)</span><span class="sh">"</span>
<span class="p">...</span> <span class="n">creates</span> <span class="n">e</span><span class="p">.</span><span class="n">g</span><span class="p">.</span> <span class="n">mybag_2025_02_21</span><span class="o">-</span><span class="mi">15_35_35</span>

</code></pre></div></div>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>

<p>Contributors must sign-off each commit by adding a <code class="language-plaintext highlighter-rouge">Signed-off-by: ...</code>
line to commit messages to certify that they have the right to submit
the code they are contributing to the project according to the
<a href="https://developercertificate.org/">Developer Certificate of Origin (DCO)</a>.</p>
</div>
              <hr id="kilted-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="kilted-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#kilted-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#kilted-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#kilted-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="kilted-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="kilted-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="kilted-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rosbag2">rosbag2</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/liblz4_vendor">liblz4_vendor</a>
        
        <a class="label label-primary pkg-label" href="/p/mcap_vendor">mcap_vendor</a>
        
        <a class="label label-primary pkg-label" href="/p/ros2bag">ros2bag</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2">rosbag2</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_compression">rosbag2_compression</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_compression_zstd">rosbag2_compression_zstd</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_cpp">rosbag2_cpp</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_examples_cpp">rosbag2_examples_cpp</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_examples_py">rosbag2_examples_py</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_interfaces">rosbag2_interfaces</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_performance_benchmarking">rosbag2_performance_benchmarking</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_performance_benchmarking_msgs">rosbag2_performance_benchmarking_msgs</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_py">rosbag2_py</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_storage">rosbag2_storage</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_storage_default_plugins">rosbag2_storage_default_plugins</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_storage_mcap">rosbag2_storage_mcap</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_storage_sqlite3">rosbag2_storage_sqlite3</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_test_common">rosbag2_test_common</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_test_msgdefs">rosbag2_test_msgdefs</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_tests">rosbag2_tests</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_transport">rosbag2_transport</a>
        
        <a class="label label-primary pkg-label" href="/p/sqlite3_vendor">sqlite3_vendor</a>
        
        <a class="label label-primary pkg-label" href="/p/zstd_vendor">zstd_vendor</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-rosbag2
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-rosbag2" role="menuitem" tabindex="-1" href="/r/rosbag2/github-ros2-rosbag2" data="github-ros2-rosbag2">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-rosbag2
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros2/rosbag2.git">https://github.com/ros2/rosbag2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">rolling</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-05-01
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rosbag2/#rolling-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rosbag2/#rolling-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rosbag2/#rolling-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/liblz4_vendor">liblz4_vendor</a></td>
                    <td>0.33.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/mcap_vendor">mcap_vendor</a></td>
                    <td>0.33.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ros2bag">ros2bag</a></td>
                    <td>0.33.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2">rosbag2</a></td>
                    <td>0.33.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_compression">rosbag2_compression</a></td>
                    <td>0.33.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_compression_zstd">rosbag2_compression_zstd</a></td>
                    <td>0.33.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_cpp">rosbag2_cpp</a></td>
                    <td>0.33.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_examples_cpp">rosbag2_examples_cpp</a></td>
                    <td>0.33.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_examples_py">rosbag2_examples_py</a></td>
                    <td>0.33.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_interfaces">rosbag2_interfaces</a></td>
                    <td>0.33.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_performance_benchmarking">rosbag2_performance_benchmarking</a></td>
                    <td>0.33.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_performance_benchmarking_msgs">rosbag2_performance_benchmarking_msgs</a></td>
                    <td>0.33.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_py">rosbag2_py</a></td>
                    <td>0.33.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_storage">rosbag2_storage</a></td>
                    <td>0.33.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_storage_default_plugins">rosbag2_storage_default_plugins</a></td>
                    <td>0.33.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_storage_mcap">rosbag2_storage_mcap</a></td>
                    <td>0.33.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_storage_sqlite3">rosbag2_storage_sqlite3</a></td>
                    <td>0.33.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_test_common">rosbag2_test_common</a></td>
                    <td>0.33.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_test_msgdefs">rosbag2_test_msgdefs</a></td>
                    <td>0.33.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_tests">rosbag2_tests</a></td>
                    <td>0.33.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_transport">rosbag2_transport</a></td>
                    <td>0.33.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/sqlite3_vendor">sqlite3_vendor</a></td>
                    <td>0.33.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/zstd_vendor">zstd_vendor</a></td>
                    <td>0.33.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="rosbag2">Rosbag2</h1>
<p><img src="https://img.shields.io/github/license/ros2/rosbag2" alt="License">
<a href="https://github.com/ros2/rosbag2/actions"><img src="https://github.com/ros2/rosbag2/workflows/Test%20rosbag2/badge.svg" alt="GitHub Action Status"></a></p>

<p>Rosbag2 — the tool for recording and playback of communications in ROS 2 systems.</p>

<p>This is the ROS 2 successor of https://wiki.ros.org/rosbag.</p>

<p>A “rosbag” is simply a file full of timestamped messages. The first goal of the tool is efficient recording, to support complex systems in real time. Its second goal is efficent playback, to allow for viewing and using recorded data.</p>

<p>For historical context, see the original <a href="https://github.com/ros2/design/blob/ros2bags/articles/rosbags.md">design article</a> that kicked off the project.</p>

<p>This README has a lot of information. You may want to jump directly to:</p>
<ul>
  <li><a href="https://github.com/ros2/rosbag2/tree/rolling/#installation">Installation</a></li>
  <li><a href="https://github.com/ros2/rosbag2/tree/rolling/#usage">Usage</a></li>
  <li><a href="https://github.com/ros2/rosbag2/tree/rolling/#tips-and-tricks">Tips and Tricks</a></li>
</ul>

<h2 id="installation">Installation</h2>

<h3 id="debian-packages">Debian packages</h3>

<p>Rosbag2 packages are available via debian packages, and will already be included with any <code class="language-plaintext highlighter-rouge">-ros-base</code> installation (which is included within <code class="language-plaintext highlighter-rouge">-desktop</code>)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ export ROS_DISTRO=humble
$ sudo apt-get install ros-$ROS_DISTRO-rosbag2

</code></pre></div></div>

<h3 id="other-binaries">Other binaries</h3>

<p>You can follow the instructions at http://docs.ros.org/en/humble/Installation/Alternatives/Ubuntu-Install-Binary.html (or for your chosen distro), and Rosbag2 will be included in that installation.</p>

<h3 id="build-from-source">Build from source</h3>

<p>To build from source, follow the instructions in <a href="https://github.com/ros2/rosbag2/tree/rolling/DEVELOPING.md">DEVELOPING.md</a></p>

<h2 id="using-rosbag2-">Using rosbag2 <a id="usage"></a>
</h2>

<p>Rosbag2 is part of the ROS 2 command line interface as <code class="language-plaintext highlighter-rouge">ros2 bag</code>.
These verbs are available for <code class="language-plaintext highlighter-rouge">ros2 bag</code>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ros2 bag burst</code></li>
  <li><a href="https://github.com/ros2/rosbag2/tree/rolling/#convert"><code class="language-plaintext highlighter-rouge">ros2 bag convert</code></a></li>
  <li><a href="https://github.com/ros2/rosbag2/tree/rolling/#info"><code class="language-plaintext highlighter-rouge">ros2 bag info</code></a></li>
  <li><code class="language-plaintext highlighter-rouge">ros2 bag list</code></li>
  <li><a href="https://github.com/ros2/rosbag2/tree/rolling/#play"><code class="language-plaintext highlighter-rouge">ros2 bag play</code></a></li>
  <li><a href="https://github.com/ros2/rosbag2/tree/rolling/#record"><code class="language-plaintext highlighter-rouge">ros2 bag record</code></a></li>
  <li><code class="language-plaintext highlighter-rouge">ros2 bag reindex</code></li>
</ul>

<p>For up-to-date information on the available options for each, use <code class="language-plaintext highlighter-rouge">ros2 bag &lt;verb&gt; --help</code>.</p>

<p>Moreover, <code class="language-plaintext highlighter-rouge">rosbag2_transport::Player</code> and <code class="language-plaintext highlighter-rouge">rosbag2_transport::Recorder</code> components can be instantiated in <code class="language-plaintext highlighter-rouge">rclcpp</code> component containers, which makes possible to use intra-process communication for greater efficiency.
See <a href="https://github.com/ros2/rosbag2/tree/rolling/#composition">composition</a> section for details.</p>

<h3 id="recording-data-">Recording data <a id="record"></a>
</h3>

<p>In order to record all topics currently available in the system:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag record -a

</code></pre></div></div>

<p>The command above will record all available topics and discovers new topics as they appear while recording.
This auto-discovery of new topics can be disabled by given the command line argument <code class="language-plaintext highlighter-rouge">--no-discovery</code>.</p>

<p>To record a set of predefined topics, one can specify them on the command line explicitly.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag record &lt;topic1&gt; &lt;topic2&gt; … &lt;topicN&gt;

</code></pre></div></div>

<p>The specified topics don’t necessarily have to be present at start time.
The discovery function will automatically recognize if one of the specified topics appeared.
In the same fashion, this auto discovery can be disabled with <code class="language-plaintext highlighter-rouge">--no-discovery</code>.</p>

<p>If not further specified, <code class="language-plaintext highlighter-rouge">ros2 bag record</code> will create a new folder named to the current time stamp and stores all data within this folder.
A user defined name can be given with <code class="language-plaintext highlighter-rouge">-o, --output</code>.</p>

<h4 id="simulation-time">Simulation time</h4>

<p>In ROS 2, “simulation time” refers to publishing a clock value on the <code class="language-plaintext highlighter-rouge">/clock</code> topic, instead of using the system clock to tell time.
By passing <code class="language-plaintext highlighter-rouge">--use-sim-time</code> argument to <code class="language-plaintext highlighter-rouge">ros2 bag record</code>, we turn on this option for the recording node.
Messages written to the bag will use the latest received value of <code class="language-plaintext highlighter-rouge">/clock</code> for the timestamp of the recorded message.</p>

<p>Note: Until the first <code class="language-plaintext highlighter-rouge">/clock</code> message is received, the recorder will not write any messages.
Before that message is received, the time is 0, which leads to a significant time jump once simulation time begins, making the bag essentially unplayable if messages are written first with time 0 and then time N from <code class="language-plaintext highlighter-rouge">/clock</code>.</p>

<h4 id="splitting-files-during-recording">Splitting files during recording</h4>

<p>Rosbag2 offers the capability to split bag files when they reach a maximum size or after a specified duration. By default Rosbag2 will record all data into a single bag file, but this can be changed using the CLI options.</p>

<p><em>Splitting by size</em>: <code class="language-plaintext highlighter-rouge">ros2 bag record -a -b 100000</code> will split the bag files when they become greater than 100 kilobytes. Note: the batch size’s units are in bytes and must be greater than <code class="language-plaintext highlighter-rouge">86016</code>. This option defaults to <code class="language-plaintext highlighter-rouge">0</code>, which means data is written to a single file.</p>

<p><em>Splitting by time</em>: <code class="language-plaintext highlighter-rouge">ros2 bag record -a -d 9000</code> will split the bag files after a duration of <code class="language-plaintext highlighter-rouge">9000</code> seconds. This option defaults to <code class="language-plaintext highlighter-rouge">0</code>, which means data is written to a single file.</p>

<p>If both splitting by size and duration are enabled, the bag will split at whichever threshold is reached first.</p>

<h4 id="recording-with-compression">Recording with compression</h4>

<p>By default Rosbag2 does not record with compression enabled. However, compression can be specified using the following CLI options.</p>

<p>For example, <code class="language-plaintext highlighter-rouge">ros2 bag record -a --compression-mode file --compression-format zstd</code> will record all topics and compress each file using the <a href="https://github.com/facebook/zstd">zstd</a> compressor.</p>

<p>Currently, the only <code class="language-plaintext highlighter-rouge">compression-format</code> available is <code class="language-plaintext highlighter-rouge">zstd</code>. Both the mode and format options default to <code class="language-plaintext highlighter-rouge">none</code>. To use a compression format, a compression mode must be specified, where the currently supported modes are compress by <code class="language-plaintext highlighter-rouge">file</code> or compress by <code class="language-plaintext highlighter-rouge">message</code>.</p>

<p>It is recommended to use this feature with the splitting options.</p>

<p><strong>Note</strong>: Some storage plugins may have their own compression methods, which are separate from the Rosbag2 compression specified by the CLI options <code class="language-plaintext highlighter-rouge">--compression-mode</code> and <code class="language-plaintext highlighter-rouge">--compression-format</code>. Notably, the MCAP file format offered by the <code class="language-plaintext highlighter-rouge">rosbag2_storage_mcap</code> storage plugin supports compression in a way that produces files that are still indexable (whereas using the Rosbag2 compression will not). To utilize storage plugin specific compression or other options, see <a href="https://github.com/ros2/rosbag2/tree/rolling/#record-storage-config">Recording with a storage configuration</a>.</p>

<h4 id="recording-with-a-storage-configuration-">Recording with a storage configuration <a id="record-storage-config"></a>
</h4>

<p>Storage configuration can be specified in a YAML file passed through the <code class="language-plaintext highlighter-rouge">--storage-config-file</code> option.
This can be used to optimize performance for specific use cases.</p>

<p>See storage plugin documentation for more detail:</p>
<ul>
  <li><a href="https://github.com/ros2/rosbag2/tree/rolling/rosbag2_storage_mcap/README.md#writer-configuration">mcap</a></li>
  <li><a href="https://github.com/ros2/rosbag2/tree/rolling/rosbag2_storage_sqlite3/README.md#storage-configuration-file">sqlite3</a></li>
</ul>

<h4 id="controlling-recordings-via-services">Controlling recordings via services</h4>

<p>The Rosbag2 recorder provides the following services for remote control, which can be called via <code class="language-plaintext highlighter-rouge">ros2 service</code> commandline, or from your nodes:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">~/is_paused [rosbag2_interfaces/srv/IsPaused]</code>
    <ul>
      <li>Returns whether recording is currently paused.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/pause [rosbag2_interfaces/srv/Pause]</code>
    <ul>
      <li>Pauses recording. All messages that have already arrived will be written, but all messages that arrive after pausing will be discarded. Has no effect if already paused. Takes no arguments.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/resume [rosbag2_interfaces/srv/Resume]</code>
    <ul>
      <li>Resume recording if paused. Has no effect if not paused. Takes no arguments.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/split_bagfile [rosbag2_interfaces/srv/SplitBagfile]</code>
    <ul>
      <li>Triggers a split to a new file, even if none of the configured split criteria (such as <code class="language-plaintext highlighter-rouge">--max-bag-size</code> or <code class="language-plaintext highlighter-rouge">--max-bag-duration</code>) have been met yet</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/snapshot [rosbag2_interfaces/srv/Snapshot]</code>
    <ul>
      <li>enabled if <code class="language-plaintext highlighter-rouge">--snapshot-mode</code> is specified. Takes no arguments, triggers a snapshot.</li>
    </ul>
  </li>
</ul>

<h4 id="snapshot-mode">Snapshot mode</h4>

<p>The Recorder provides a “snapshot mode”, enabled via <code class="language-plaintext highlighter-rouge">--snapshot-mode</code> or <code class="language-plaintext highlighter-rouge">StorageOptions.snapshot_mode</code>, which does not write messages to disk as they come in, but instead keeps an in-memory circular buffer of size <code class="language-plaintext highlighter-rouge">--max-cache-size</code>.
This entire buffer can be dumped to disk on request, saving data only in specified circumstances such as a detected error condition or point of interest, capturing the “last N bytes” of incoming data, therefore making sure that you can trigger snapshot after the fact of the event.</p>

<p>The snapshot is taken by calling the <code class="language-plaintext highlighter-rouge">~/snapshot</code> service on the recorder, described previously.</p>

<h3 id="replaying-data-">Replaying data <a id="play"></a>
</h3>

<p>When you have a recorded bag, you can use Rosbag2 to play it back:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag play &lt;bag&gt;

</code></pre></div></div>

<p>The bag argument can be a directory containing <code class="language-plaintext highlighter-rouge">metadata.yaml</code> and one or more storage files, or
to a single storage file such as <code class="language-plaintext highlighter-rouge">.mcap</code> or <code class="language-plaintext highlighter-rouge">.db3</code>.
The Player will automatically detect which storage implementation to use for playing.
A progress bar to track the playback progress will be displayed in the terminal by default.</p>

<p>To play back multiple bags:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag play &lt;bag1&gt; -i &lt;bag2&gt; -i &lt;bag3&gt;

</code></pre></div></div>

<p>Messages from all provided bags will be played in order, based on their original recording
reception timestamps.</p>

<p>Options:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">--topics</code>:
Space-delimited list of topics to play.</li>
  <li>
<code class="language-plaintext highlighter-rouge">--services</code>:
Space-delimited list of services to play.</li>
  <li>
<code class="language-plaintext highlighter-rouge">--actions</code>:
Space-delimited list of actions to play.</li>
  <li>
<code class="language-plaintext highlighter-rouge">-e,--regex</code>:
Play only topics and services matches with regular expression.</li>
  <li>
<code class="language-plaintext highlighter-rouge">-x,--exclude-regex</code>:
Regular expressions to exclude topics and services from replay.</li>
  <li>
<code class="language-plaintext highlighter-rouge">--exclude-topics</code>:
Space-delimited list of topics not to play.</li>
  <li>
<code class="language-plaintext highlighter-rouge">--exclude-services</code>:
Space-delimited list of services not to play.</li>
  <li>
<code class="language-plaintext highlighter-rouge">--exclude-actions</code>:
Space-delimited list of actions not to play.</li>
  <li>
<code class="language-plaintext highlighter-rouge">--message-order {received,sent}</code>:
The reference to use for bag message chronological ordering.
Choices: reception timestamp (<code class="language-plaintext highlighter-rouge">received</code>), publication timestamp (<code class="language-plaintext highlighter-rouge">sent</code>).
Default: reception timestamp.</li>
  <li>
<code class="language-plaintext highlighter-rouge">--progress-bar-update-rate [Hz]</code>:
Print a progress bar for the playback with a specified maximum update rate in times per second
(Hz). Negative values mark an update for every published message, while a zero value disables
the progress bar. Default is 3 Hz.</li>
  <li>
<code class="language-plaintext highlighter-rouge">--progress-bar-separation-lines</code>:
The number of lines to separate the progress bar from the rest of the playback player output.
It prevents mixing external log messages with the progress bar string. Default to 2.</li>
</ul>

<p>For more options, run with <code class="language-plaintext highlighter-rouge">--help</code>.</p>

<h4 id="playback-action-messages-as-action-client">Playback action messages as action client</h4>

<p>If you want Rosbag2 to replay recorded action messages in the role of an action client, you need to specify the –send-actions-as-client parameter.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag play --send-actions-as-client &lt;bag&gt;

</code></pre></div></div>
<p>Rosbag2 will send recorded goal request, cancel request and result request to action server.<br>
For more information, please refer to https://github.com/ros2/rosbag2/blob/rolling/docs/design/rosbag2_record_replay_action.md.</p>

<h4 id="controlling-playback-via-services">Controlling playback via services</h4>

<p>The Rosbag2 player provides the following services for remote control, which can be called via <code class="language-plaintext highlighter-rouge">ros2 service</code> commandline or from your nodes,</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">~/burst [rosbag2_interfaces/srv/Burst]</code>
    <ul>
      <li>Can only be used while player is paused, publishes <code class="language-plaintext highlighter-rouge">num_messages</code> in order as fast as possible, moving forward the play head.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/get_rate [rosbag2_interfaces/srv/GetRate]</code>
    <ul>
      <li>Return the current playback rate.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/is_paused [rosbag2_interfaces/srv/IsPaused]</code>
    <ul>
      <li>Return whether playback is paused.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/pause [rosbag2_interfaces/srv/Pause]</code>
    <ul>
      <li>Pause playback. Has no effect if already paused.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/play [rosbag2_interfaces/srv/Play]</code>
    <ul>
      <li>Play from a starting offset timestamp, either until the end, an ending timestamp or for a set duration. Only works when stopped (not paused).</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/play_next [rosbag2_interfaces/srv/PlayNext]</code>
    <ul>
      <li>Play a single next message from the bag. Only works while paused.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/resume [rosbag2_interfaces/srv/Resume]</code>
    <ul>
      <li>Resume playback if paused.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/seek [rosbag2_interfaces/srv/Seek]</code>
    <ul>
      <li>Change the play head to the specified timestamp. Can be forward or backward in time, the next played message is the next immediately after the seeked timestamp.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/set_rate [rosbag2_interfaces/srv/SetRate]</code>
    <ul>
      <li>Sets the rate of playback, for example 2.0 will play messages twice as fast.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/stop [rosbag2_interfaces/srv/Stop]</code>
    <ul>
      <li>Stop the player, putting the play head in “undefined position” outside the bag. Must call <code class="language-plaintext highlighter-rouge">play</code> before other operations can be done.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">~/toggle_paused [rosbag2_interfaces/srv/TogglePaused]</code>
    <ul>
      <li>Pause if playing, resume if paused.</li>
    </ul>
  </li>
</ul>

<h3 id="analyzing-data-">Analyzing data <a id="info"></a>
</h3>

<p>The recorded data can be analyzed by displaying some meta information about it:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag info &lt;bag_file&gt;

</code></pre></div></div>

<p>You should see something along these lines:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Files:             demo_strings.db3
Bag size:          44.5 KiB
Storage id:        sqlite3
Duration:          8.501s
Start:             Nov 28 2018 18:02:18.600 (1543456938.600)
End                Nov 28 2018 18:02:27.102 (1543456947.102)
Messages:          27
Topic information: Topic: /chatter | Type: std_msgs/String | Count: 9 | Serialization Format: cdr
                   Topic: /my_chatter | Type: std_msgs/String | Count: 18 | Serialization Format: cdr

</code></pre></div></div>

<h3 id="converting-bags-merge-split-etc-">Converting bags (merge, split, etc.) <a id="convert"></a>
</h3>

<p>Rosbag2 provides a tool <code class="language-plaintext highlighter-rouge">ros2 bag convert</code> (or, <code class="language-plaintext highlighter-rouge">rosbag2_transport::bag_rewrite</code> in the C++ API).
This allows the user to take one or more input bags, and write them out to one or more output bags with new settings.
This flexible feature enables the following features:</p>
<ul>
  <li>Merge (multiple input bags, one output bag)</li>
  <li>Split top-level bags (one input bag, multiple output bags)</li>
  <li>Split internal files (by time or size - one input bag with fewer internal files, one output bag with more, smaller, internal files)</li>
  <li>Compress/Decompress (output bag(s) with different compression settings than the input(s))</li>
  <li>Serialization format conversion</li>
  <li>… and more!</li>
</ul>

<p>Here is an example command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 bag convert --input /path/to/bag1 --input /path/to/bag2 storage_id --output-options output_options.yaml

</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">--input</code> argument may be specified any number of times, and takes 1 or 2 values.
The first value is the URI of the input bag.
If a second value is supplied, it specifies the storage implementation of the bag.
If no storage implementation is specified, Rosbag2 will try to determine it automatically from the bag.</p>

<p>The <code class="language-plaintext highlighter-rouge">--output-options</code> argument must point to the URI of a YAML file specifying the full recording configuration for each bag to output (<code class="language-plaintext highlighter-rouge">StorageOptions</code> + <code class="language-plaintext highlighter-rouge">RecordOptions</code>).
This file must contain a top-level key <code class="language-plaintext highlighter-rouge">output_bags</code>, which contains a list of these objects.</p>

<p>The only required value in the output bags is <code class="language-plaintext highlighter-rouge">uri</code> and <code class="language-plaintext highlighter-rouge">storage_id</code>. All other values are options (however, if no topic selection is specified, this output bag will be empty!).</p>

<p>This example notes all fields that can have an effect, with a comment on the required ones.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>output_bags:
- uri: /output/bag1  # required
  storage_id: ""  # will use the default storage plugin, if unspecified
  max_bagfile_size: 0
  max_bagfile_duration: 0
  storage_preset_profile: ""
  storage_config_uri: ""
  # optional filter for msg time t [nsec since epoch]:  start_time_ns &lt;= t &lt;= end_time_ns
  # start_time_ns: 1744227144744197147
  # end_time_ns: 1744227145734665546
  all_topics: false
  topics: []
  topic_types: []
  all_services: false
  services: []
  all_actions: false
  actions: []
  rmw_serialization_format: ""  # defaults to using the format of the input topic
  regex: ""
  exclude_regex: ""
  exclude_topics: []
  exclude_topic_types: []
  exclude_services: []
  exclude_actions: []
  compression_mode: ""
  compression_format: ""
  compression_queue_size: 1
  compression_threads: 0
  include_hidden_topics: false
  include_unpublished_topics: false

</code></pre></div></div>

<p>Example merge:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag convert -i bag1 -i bag2 -o out.yaml

# out.yaml
output_bags:
- uri: merged_bag
  all_topics: true
  all_services: true

</code></pre></div></div>

<p>Example split:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag convert -i bag1 -o out.yaml

# out.yaml
output_bags:
- uri: split1
  topics: [/topic1, /topic2]
- uri: split2
  topics: [/topic3]

</code></pre></div></div>

<p>Example compress:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag convert -i bag1 -o out.yaml

# out.yaml
output_bags:
- uri: compressed
  all_topics: true
  all_services: true
  compression_mode: file
  compression_format: zstd

</code></pre></div></div>

<h3 id="overriding-qos-profiles">Overriding QoS Profiles</h3>

<p>When starting a recording or playback, you can pass a YAML file that contains QoS profile settings for a specific topic.
The YAML schema for the profile overrides is a dictionary of topic names with key/value pairs for each QoS policy.
Below is an example profile set to the default ROS2 QoS settings.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">/topic_name</span><span class="pi">:</span>
  <span class="na">history</span><span class="pi">:</span> <span class="s">keep_last</span>
  <span class="na">depth</span><span class="pi">:</span> <span class="m">10</span>
  <span class="na">reliability</span><span class="pi">:</span> <span class="s">reliable</span>
  <span class="na">durability</span><span class="pi">:</span> <span class="s">volatile</span>
  <span class="na">deadline</span><span class="pi">:</span>
    <span class="c1"># unspecified/infinity</span>
    <span class="na">sec</span><span class="pi">:</span> <span class="m">0</span>
    <span class="na">nsec</span><span class="pi">:</span> <span class="m">0</span>
  <span class="na">lifespan</span><span class="pi">:</span>
    <span class="c1"># unspecified/infinity</span>
    <span class="na">sec</span><span class="pi">:</span> <span class="m">0</span>
    <span class="na">nsec</span><span class="pi">:</span> <span class="m">0</span>
  <span class="na">liveliness</span><span class="pi">:</span> <span class="s">system_default</span>
  <span class="na">liveliness_lease_duration</span><span class="pi">:</span>
    <span class="c1"># unspecified/infinity</span>
    <span class="na">sec</span><span class="pi">:</span> <span class="m">0</span>
    <span class="na">nsec</span><span class="pi">:</span> <span class="m">0</span>
  <span class="na">avoid_ros_namespace_conventions</span><span class="pi">:</span> <span class="kc">false</span>

</code></pre></div></div>

<p>You can then use the override by specifying the <code class="language-plaintext highlighter-rouge">--qos-profile-overrides-path</code> argument in the CLI:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Record</span>
ros2 bag record <span class="nt">--qos-profile-overrides-path</span> override.yaml <span class="nt">-a</span> <span class="nt">-o</span> my_bag
<span class="c"># Playback</span>
ros2 bag play <span class="nt">--qos-profile-overrides-path</span> override.yaml my_bag

</code></pre></div></div>

<p>See <a href="https://docs.ros.org/en/rolling/Guides/Overriding-QoS-Policies-For-Recording-And-Playback.html">the official QoS override tutorial</a> and <a href="https://docs.ros.org/en/rolling/Concepts/About-Quality-of-Service-Settings.html">“About QoS Settings”</a> for more detail.</p>

<h3 id="using-in-launch">Using in launch</h3>

<p>We can invoke the command line tool from a ROS launch script as an <em>executable</em> (not a <em>node</em> action).
For example, to launch the command to record all topics you can use the following launch script:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;launch&gt;</span>
  <span class="nt">&lt;executable</span> <span class="na">cmd=</span><span class="s">"ros2 bag record -a"</span> <span class="na">output=</span><span class="s">"screen"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/launch&gt;</span>

</code></pre></div></div>

<p>Here’s the equivalent Python launch script:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">launch</span>


<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">launch</span><span class="p">.</span><span class="nc">LaunchDescription</span><span class="p">([</span>
        <span class="n">launch</span><span class="p">.</span><span class="n">actions</span><span class="p">.</span><span class="nc">ExecuteProcess</span><span class="p">(</span>
            <span class="n">cmd</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">ros2</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">bag</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">record</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">-a</span><span class="sh">'</span><span class="p">],</span>
            <span class="n">output</span><span class="o">=</span><span class="sh">'</span><span class="s">screen</span><span class="sh">'</span>
        <span class="p">)</span>
    <span class="p">])</span>

</code></pre></div></div>

<p>Use the <code class="language-plaintext highlighter-rouge">ros2 launch</code> command line tool to launch either of the above launch scripts.
For example, if we named the above XML launch script, <code class="language-plaintext highlighter-rouge">record_all.launch.xml</code>:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ros2 launch record_all.launch.xml

</code></pre></div></div>

<p>You can also invoke the <code class="language-plaintext highlighter-rouge">play</code> and <code class="language-plaintext highlighter-rouge">record</code> functionalities provided by <code class="language-plaintext highlighter-rouge">rosbag2_transport</code> package as nodes.
The advantage to use this invocation strategy is that the Python layer handling the <code class="language-plaintext highlighter-rouge">ros2 bag</code> CLI is completely skipped.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">launch</span>

<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">launch</span><span class="p">.</span><span class="nc">LaunchDescription</span><span class="p">([</span>
        <span class="n">launch</span><span class="p">.</span><span class="n">actions</span><span class="p">.</span><span class="nc">Node</span><span class="p">(</span>
            <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">rosbag2_transport</span><span class="sh">'</span><span class="p">,</span>
            <span class="n">executable</span><span class="o">=</span><span class="sh">'</span><span class="s">player</span><span class="sh">'</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">player</span><span class="sh">'</span><span class="p">,</span>
            <span class="n">output</span><span class="o">=</span><span class="sh">"</span><span class="s">screen</span><span class="sh">"</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="sh">"</span><span class="s">/path/to/params.yaml</span><span class="sh">"</span><span class="p">],</span>
        <span class="p">)</span>
    <span class="p">])</span>

</code></pre></div></div>

<h3 id="using-recorder-and-player-as-composable-nodes-">Using recorder and player as composable nodes <a id="composition"></a>
</h3>

<p>Play and record are fundamental tasks of Rosbag2. However, playing or recording data at high rates may have limitations (e.g. spurious packet drops) due to one of the following:</p>
<ul>
  <li>low network bandwidth</li>
  <li>high CPU load</li>
  <li>slow mass memory</li>
  <li>ROS 2 middleware serialization/deserialization delays &amp; overhead</li>
</ul>

<p>ROS 2 C++ nodes can benefit from intra-process communication to partially or completely bypass network transport of messages between two nodes.</p>

<p>Multiple <em>components</em> can be <em>composed</em>, either <a href="https://docs.ros.org/en/rolling/Tutorials/Intermediate/Composition.html#compile-time-composition-with-hardcoded-nodes">statically</a> or <a href="https://docs.ros.org/en/rolling/Tutorials/Intermediate/Composition.html#run-time-composition-using-ros-services-with-a-publisher-and-subscriber">dynamically</a>: all the composed component will share the same address space because they will be loaded in a single process.</p>

<p>A prerequirement is for each C++ node to be <a href="https://docs.ros.org/en/rolling/Concepts/Intermediate/About-Composition.html?highlight=composition"><em>composable</em></a> and to follow the <a href="https://docs.ros.org/en/rolling/Tutorials/Demos/Intra-Process-Communication.html?highlight=intra">guidelines</a> for efficient publishing &amp; subscription.</p>

<p>With the above requirements met, the user can:</p>
<ul>
  <li>compose multiple nodes together</li>
  <li>explicitly enable intra-process communication</li>
</ul>

<p>Whenever a publisher and a subscriber on the same topic belong to the same <em>composed</em> process, and intra-process is enabled for both, <code class="language-plaintext highlighter-rouge">rclcpp</code> completely bypasses RMW layer and below transport layer (i.e. DDS). Instead, messages are shared via process memory and <em>potentially</em> never copied. Some exception hold, so please have a look to the <a href="https://docs.ros.org/en/rolling/Tutorials/Demos/Intra-Process-Communication.html?highlight=intra">IPC guidelines</a>.</p>

<p>Here is an example of Python launchfile composition. Notice that composable container components do not expect YAML files to be directly passed to them: parameters have to be “dumped” out from the YAML file (if you have one). A suggestion of possible implementation is offered as a starting point.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">launch</span>
<span class="kn">import</span> <span class="n">launch_ros</span>
<span class="kn">import</span> <span class="n">yaml</span>

<span class="sh">'''</span><span class="s">
Used to load parameters for composable nodes from a standard param file
</span><span class="sh">'''</span>
<span class="k">def</span> <span class="nf">dump_params</span><span class="p">(</span><span class="n">param_file_path</span><span class="p">,</span> <span class="n">node_name</span><span class="p">):</span>
    <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">param_file_path</span><span class="p">,</span> <span class="sh">'</span><span class="s">r</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">yaml</span><span class="p">.</span><span class="nf">safe_load</span><span class="p">(</span><span class="nb">file</span><span class="p">)[</span><span class="n">node_name</span><span class="p">][</span><span class="sh">'</span><span class="s">ros__parameters</span><span class="sh">'</span><span class="p">]]</span>

<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">launch</span><span class="p">.</span><span class="nc">LaunchDescription</span><span class="p">([</span>
        <span class="n">launch</span><span class="p">.</span><span class="n">actions</span><span class="p">.</span><span class="nc">ComposableNodeContainer</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">composable_container</span><span class="sh">'</span><span class="p">,</span>
            <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">rclcpp_components</span><span class="sh">'</span><span class="p">,</span>
            <span class="n">executable</span><span class="o">=</span><span class="sh">'</span><span class="s">component_container</span><span class="sh">'</span><span class="p">,</span>
            <span class="n">composable_node_descriptions</span><span class="o">=</span><span class="p">[</span>
                <span class="n">launch_ros</span><span class="p">.</span><span class="n">descriptions</span><span class="p">.</span><span class="nc">ComposableNode</span><span class="p">(</span>
                    <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">rosbag2_transport</span><span class="sh">'</span><span class="p">,</span>
                    <span class="n">plugin</span><span class="o">=</span><span class="sh">'</span><span class="s">rosbag2_transport::Player</span><span class="sh">'</span><span class="p">,</span>
                    <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">player</span><span class="sh">'</span><span class="p">,</span>
                    <span class="n">parameters</span><span class="o">=</span><span class="nf">dump_params</span><span class="p">(</span><span class="sh">"</span><span class="s">/path/to/params.yaml</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">player</span><span class="sh">"</span><span class="p">),</span>
                    <span class="n">extra_arguments</span><span class="o">=</span><span class="p">[{</span><span class="sh">'</span><span class="s">use_intra_process_comms</span><span class="sh">'</span><span class="p">:</span> <span class="bp">True</span><span class="p">}]</span>
                <span class="p">),</span>
                <span class="c1"># your other components here
</span>            <span class="p">]</span>
        <span class="p">)</span>
    <span class="p">])</span>
<span class="p">}</span>

</code></pre></div></div>

<p>Here’s an example YAML configuration for both composable player and recorder:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">recorder</span><span class="pi">:</span>
  <span class="na">ros__parameters</span><span class="pi">:</span>
    <span class="na">use_sim_time</span><span class="pi">:</span> <span class="kc">false</span>
    <span class="na">record</span><span class="pi">:</span>
      <span class="na">all</span><span class="pi">:</span> <span class="kc">true</span>
      <span class="na">is_discovery_disabled</span><span class="pi">:</span> <span class="kc">false</span>
      <span class="na">topic_polling_interval</span><span class="pi">:</span>
        <span class="na">sec</span><span class="pi">:</span> <span class="m">0</span>
        <span class="na">nsec</span><span class="pi">:</span> <span class="m">10000000</span>
      <span class="na">include_hidden_topics</span><span class="pi">:</span> <span class="kc">true</span>
      <span class="na">ignore_leaf_topics</span><span class="pi">:</span> <span class="kc">false</span>
      <span class="na">start_paused</span><span class="pi">:</span> <span class="kc">false</span>

    <span class="na">storage</span><span class="pi">:</span>
      <span class="na">uri</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/path/to/destination/folder"</span>
      <span class="na">storage_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">sqlite3"</span>
      <span class="na">max_cache_size</span><span class="pi">:</span> <span class="m">20000000</span>

</code></pre></div></div>
<p>and</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">player</span><span class="pi">:</span>
  <span class="na">ros__parameters</span><span class="pi">:</span>
    <span class="na">play</span><span class="pi">:</span>
      <span class="na">read_ahead_queue_size</span><span class="pi">:</span> <span class="m">1000</span>
      <span class="na">node_prefix</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
      <span class="na">rate</span><span class="pi">:</span> <span class="m">1.0</span>
      <span class="na">loop</span><span class="pi">:</span> <span class="kc">false</span>
      <span class="c1"># Negative timestamps will make the playback to not stop.</span>
      <span class="na">playback_duration</span><span class="pi">:</span>
        <span class="na">sec</span><span class="pi">:</span> <span class="s">-1</span>
        <span class="na">nsec</span><span class="pi">:</span> <span class="m">00000000</span>
      <span class="na">start_paused</span><span class="pi">:</span> <span class="kc">false</span>

    <span class="na">storage</span><span class="pi">:</span>
      <span class="na">uri</span><span class="pi">:</span> <span class="s2">"</span><span class="s">path/to/rosbag/file"</span>
      <span class="na">storage_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">mcap"</span>
      <span class="na">storage_config_uri</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>

</code></pre></div></div>

<p>For a full list of available parameters, you can refer to <a href="https://github.com/ros2/rosbag2/tree/rolling/rosbag2_transport/test/resources/player_node_params.yaml"><code class="language-plaintext highlighter-rouge">player</code></a> and <a href="https://github.com/ros2/rosbag2/tree/rolling/rosbag2_transport/test/resources/recorder_node_params.yaml"><code class="language-plaintext highlighter-rouge">recorder</code></a> configurations from the <code class="language-plaintext highlighter-rouge">test</code> folder of <code class="language-plaintext highlighter-rouge">rosbag2_transport</code>.</p>

<h2 id="plugin-implementation">Plugin implementation</h2>

<h3 id="storage-format-plugin-architecture">Storage format plugin architecture</h3>

<p>Looking at the output of the <code class="language-plaintext highlighter-rouge">ros2 bag info</code> command, we can see a field <code class="language-plaintext highlighter-rouge">Storage id:</code>.
Rosbag2 was designed to support multiple storage formats to adapt to individual use cases.
This repository provides two storage plugins, <code class="language-plaintext highlighter-rouge">mcap</code> and <code class="language-plaintext highlighter-rouge">sqlite3</code>.
The default is <code class="language-plaintext highlighter-rouge">mcap</code>, which is provided to code by <a href="https://github.com/ros2/rosbag2/tree/rolling/rosbag2_storage/include/rosbag2_storage/default_storage_id.hpp"><code class="language-plaintext highlighter-rouge">rosbag2_storage::get_default_storage_id()</code></a> and defined in <a href="https://github.com/ros2/rosbag2/tree/rolling/rosbag2_storage/src/rosbag2_storage/default_storage_id.cpp#L21"><code class="language-plaintext highlighter-rouge">default_storage_id.cpp</code></a></p>

<p>If not specified otherwise, Rosbag2 will write data using the default plugin.</p>

<p>In order to use a specified (non-default) storage format plugin, Rosbag2 has a command line argument <code class="language-plaintext highlighter-rouge">--storage</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag record --storage &lt;storage_id&gt;

</code></pre></div></div>

<p>Bag reading commands can detect the storage plugin automatically, but if for any reason you want to force a specific plugin to read a bag, you can use the <code class="language-plaintext highlighter-rouge">--storage</code> option on any <code class="language-plaintext highlighter-rouge">ros2 bag</code> verb.</p>

<p>To write your own Rosbag2 storage implementation, refer to <a href="https://github.com/ros2/rosbag2/tree/rolling/docs/storage_plugin_development.md">Storage Plugin Development</a></p>

<h3 id="serialization-format-plugin-architecture">Serialization format plugin architecture</h3>

<p>Looking further at the output of <code class="language-plaintext highlighter-rouge">ros2 bag info</code>, we can see another field attached to each topic called <code class="language-plaintext highlighter-rouge">Serialization Format</code>.
By design, ROS 2 is middleware agnostic and thus can leverage multiple communication frameworks.
The default middleware for ROS 2 is DDS which has <code class="language-plaintext highlighter-rouge">cdr</code> as its default binary serialization format.
However, other middleware implementation might have different formats.
If not specified, <code class="language-plaintext highlighter-rouge">ros2 bag record -a</code> will record all data in the middleware specific format.
This however also means that such a bag file can’t easily be replayed with another middleware format.</p>

<p>Rosbag2 implements a serialization format plugin architecture which allows the user the specify a certain serialization format.
When specified, Rosbag2 looks for a suitable converter to transform the native middleware protocol to the target format.
This also allows to record data in a native format to optimize for speed, but to convert or transform the recorded data into a middleware agnostic serialization format.</p>

<p>By default, Rosbag2 can convert from and to CDR as it’s the default serialization format for ROS 2.</p>

<h2 id="tips-and-tricks">Tips and Tricks</h2>

<h3 id="record-bags-to-a-custom-base-directory">Record bags to a custom base directory</h3>

<p>If you want to send bagfiles to a different directory than the current working directory, like so</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/my/bag/base_dir
├── rosbag2_2025_02_21-15_35_35
|   ├── metadata.yaml
│   └── rosbag2_2025_02_21-15_35_35_0.mcap
└── rosbag2_2025_02_21-15_37_17
    ├── metadata.yaml
    └── rosbag2_2025_02_21-15_37_17_0.mcap

</code></pre></div></div>

<p>This can be accomplished without features in Rosbag2 itself.</p>

<p>In shell:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">pushd</span> /my/bag/base_dir <span class="o">&amp;&amp;</span> ros2 bag record ...

</code></pre></div></div>

<p>In launch:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">ExecuteProcess</span><span class="p">(</span>
  <span class="n">cmd</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">ros2</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">bag</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">record</span><span class="sh">'</span><span class="p">,</span> <span class="p">...],</span>
  <span class="n">cwd</span><span class="o">=</span><span class="n">my_base_dir</span><span class="p">,</span>
<span class="p">),</span>

<span class="n">You</span> <span class="n">can</span> <span class="n">fully</span> <span class="n">customize</span> <span class="n">the</span> <span class="n">output</span> <span class="n">bag</span> <span class="n">name</span><span class="p">,</span> <span class="n">without</span> <span class="nb">any</span> <span class="n">Rosbag2</span> <span class="n">special</span> <span class="n">features</span><span class="p">.</span>

<span class="n">For</span> <span class="n">example</span><span class="p">,</span> <span class="n">you</span> <span class="n">want</span> <span class="n">a</span> <span class="n">timestamp</span> <span class="n">on</span> <span class="n">the</span> <span class="n">bag</span> <span class="n">directory</span> <span class="n">name</span><span class="p">,</span> <span class="n">but</span> <span class="n">want</span> <span class="n">a</span> <span class="n">custom</span> <span class="n">prefix</span> <span class="n">instead</span> <span class="n">of</span> <span class="sb">`rosbag2_`</span><span class="p">.</span>


<span class="sb">``</span><span class="err">`</span><span class="n">bash</span>
<span class="err">$</span> <span class="n">ros2</span> <span class="n">bag</span> <span class="n">record</span> <span class="o">-</span><span class="n">a</span> <span class="o">-</span><span class="n">o</span> <span class="n">mybag_</span><span class="sh">"</span><span class="s">$(date +</span><span class="sh">"</span><span class="o">%</span><span class="n">Y_</span><span class="o">%</span><span class="n">m_</span><span class="o">%</span><span class="n">d</span><span class="o">-%</span><span class="n">H_</span><span class="o">%</span><span class="n">M_</span><span class="o">%</span><span class="n">S</span><span class="sh">"</span><span class="s">)</span><span class="sh">"</span>
<span class="p">...</span> <span class="n">creates</span> <span class="n">e</span><span class="p">.</span><span class="n">g</span><span class="p">.</span> <span class="n">mybag_2025_02_21</span><span class="o">-</span><span class="mi">15_35_35</span>

</code></pre></div></div>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>

<p>Contributors must sign-off each commit by adding a <code class="language-plaintext highlighter-rouge">Signed-off-by: ...</code>
line to commit messages to certify that they have the right to submit
the code they are contributing to the project according to the
<a href="https://developercertificate.org/">Developer Certificate of Origin (DCO)</a>.</p>
</div>
              <hr id="rolling-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="rolling-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#rolling-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#rolling-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#rolling-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="rolling-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="rolling-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="rolling-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rosbag2">rosbag2</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-rosbag2
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-rosbag2" role="menuitem" tabindex="-1" href="/r/rosbag2/github-ros2-rosbag2" data="github-ros2-rosbag2">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-rosbag2
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>github</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rosbag2">rosbag2</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-rosbag2
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-rosbag2" role="menuitem" tabindex="-1" href="/r/rosbag2/github-ros2-rosbag2" data="github-ros2-rosbag2">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-rosbag2
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rosbag2">rosbag2</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/ros2bag">ros2bag</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2">rosbag2</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_compression">rosbag2_compression</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_compression_zstd">rosbag2_compression_zstd</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_cpp">rosbag2_cpp</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_interfaces">rosbag2_interfaces</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_performance_benchmarking">rosbag2_performance_benchmarking</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_py">rosbag2_py</a>
        
        <a class="label label-primary pkg-label" href="/p/bag_recorder_nodes">bag_recorder_nodes</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_storage">rosbag2_storage</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_storage_default_plugins">rosbag2_storage_default_plugins</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_test_common">rosbag2_test_common</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_tests">rosbag2_tests</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_transport">rosbag2_transport</a>
        
        <a class="label label-primary pkg-label" href="/p/shared_queues_vendor">shared_queues_vendor</a>
        
        <a class="label label-primary pkg-label" href="/p/sqlite3_vendor">sqlite3_vendor</a>
        
        <a class="label label-primary pkg-label" href="/p/zstd_vendor">zstd_vendor</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-rosbag2
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-rosbag2" role="menuitem" tabindex="-1" href="/r/rosbag2/github-ros2-rosbag2" data="github-ros2-rosbag2">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-rosbag2
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros2/rosbag2.git">https://github.com/ros2/rosbag2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">galactic</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2022-09-29
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rosbag2/#galactic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rosbag2/#galactic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rosbag2/#galactic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ros2bag">ros2bag</a></td>
                    <td>0.9.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2">rosbag2</a></td>
                    <td>0.9.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_compression">rosbag2_compression</a></td>
                    <td>0.9.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_compression_zstd">rosbag2_compression_zstd</a></td>
                    <td>0.9.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_cpp">rosbag2_cpp</a></td>
                    <td>0.9.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_interfaces">rosbag2_interfaces</a></td>
                    <td>0.9.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_performance_benchmarking">rosbag2_performance_benchmarking</a></td>
                    <td>0.9.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_py">rosbag2_py</a></td>
                    <td>0.9.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/bag_recorder_nodes">bag_recorder_nodes</a></td>
                    <td>0.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_storage">rosbag2_storage</a></td>
                    <td>0.9.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_storage_default_plugins">rosbag2_storage_default_plugins</a></td>
                    <td>0.9.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_test_common">rosbag2_test_common</a></td>
                    <td>0.9.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_tests">rosbag2_tests</a></td>
                    <td>0.9.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_transport">rosbag2_transport</a></td>
                    <td>0.9.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/shared_queues_vendor">shared_queues_vendor</a></td>
                    <td>0.9.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/sqlite3_vendor">sqlite3_vendor</a></td>
                    <td>0.9.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/zstd_vendor">zstd_vendor</a></td>
                    <td>0.9.2</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="rosbag2">rosbag2</h1>
<p><img src="https://img.shields.io/github/license/ros2/rosbag2" alt="License">
<a href="https://github.com/ros2/rosbag2/actions"><img src="https://github.com/ros2/rosbag2/workflows/Test%20rosbag2/badge.svg" alt="GitHub Action Status"></a></p>

<p>Repository for implementing rosbag2 as described in its corresponding <a href="https://github.com/ros2/design/blob/ros2bags/articles/rosbags.md">design article</a>.</p>

<h2 id="installation-instructions">Installation instructions</h2>

<h2 id="debian-packages">Debian packages</h2>

<p>rosbag2 packages are available via debian packages and thus can be installed via</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ export CHOOSE_ROS_DISTRO=crystal # rosbag2 is available starting from crystal
$ sudo apt-get install ros-$CHOOSE_ROS_DISTRO-ros2bag ros-$CHOOSE_ROS_DISTRO-rosbag2*

</code></pre></div></div>

<p>Note that the above command installs all packages related to rosbag2.
This also includes the plugin for <a href="https://github.com/ros2/rosbag2_bag_v2">reading ROS1 bag files</a>, which brings a hard dependency on the <a href="https://github.com/ros2/ros1_bridge">ros1_bridge</a> with it and therefore ROS1 packages.
If you want to install only the ROS2 related packages for rosbag, please use the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ export CHOOSE_ROS_DISTRO=crystal # rosbag2 is available starting from crystal
$ sudo apt-get install ros-$CHOOSE_ROS_DISTRO-ros2bag ros-$CHOOSE_ROS_DISTRO-rosbag2-transport

</code></pre></div></div>

<h2 id="build-from-source">Build from source</h2>

<p>It is recommended to create a new overlay workspace on top of your current ROS 2 installation.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ mkdir -p ~/rosbag_ws/src
$ cd ~/rosbag_ws/src

</code></pre></div></div>

<p>Clone this repository into the source folder:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git clone https://github.com/ros2/rosbag2.git

</code></pre></div></div>
<p><strong>[Note]</strong>: if you are only building rosbag2 on top of a Debian Installation of ROS2, please git clone the branch following your current ROS2 distribution.</p>

<p>Then build all the packages with this command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ colcon build [--merge-install]

</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">--merge-install</code> flag is optional and installs all packages into one folder rather than isolated folders for each package.</p>

<h4 id="executing-tests">Executing tests</h4>

<p>The tests can be run using the following commands:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ colcon test [--merge-install]
$ colcon test-result --verbose

</code></pre></div></div>

<p>The first command executes the test and the second command displays the errors (if any).</p>

<h2 id="using-rosbag2">Using rosbag2</h2>

<p>rosbag2 is part of the ROS 2 command line interfaces.
This repo introduces a new verb called <code class="language-plaintext highlighter-rouge">bag</code> and thus serves as the entry point of using rosbag2.
As of the time of writing, there are three commands available for <code class="language-plaintext highlighter-rouge">ros2 bag</code>:</p>

<ul>
  <li>record</li>
  <li>play</li>
  <li>info</li>
</ul>

<h3 id="recording-data">Recording data</h3>

<p>In order to record all topics currently available in the system:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag record -a

</code></pre></div></div>

<p>The command above will record all available topics and discovers new topics as they appear while recording.
This auto-discovery of new topics can be disabled by given the command line argument <code class="language-plaintext highlighter-rouge">--no-discovery</code>.</p>

<p>To record a set of predefined topics, one can specify them on the command line explicitly.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag record &lt;topic1&gt; &lt;topic2&gt; … &lt;topicN&gt;

</code></pre></div></div>

<p>The specified topics don’t necessarily have to be present at start time.
The discovery function will automatically recognize if one of the specified topics appeared.
In the same fashion, this auto discovery can be disabled with <code class="language-plaintext highlighter-rouge">--no-discovery</code>.</p>

<p>If not further specified, <code class="language-plaintext highlighter-rouge">ros2 bag record</code> will create a new folder named to the current time stamp and stores all data within this folder.
A user defined name can be given with <code class="language-plaintext highlighter-rouge">-o, --output</code>.</p>

<h4 id="splitting-recorded-bag-files">Splitting recorded bag files</h4>

<p>rosbag2 offers the capability to split bag files when they reach a maximum size or after a specified duration. By default rosbag2 will record all data into a single bag file, but this can be changed using the CLI options.</p>

<p><em>Splitting by size</em>: <code class="language-plaintext highlighter-rouge">ros2 bag record -a -b 100000</code> will split the bag files when they become greater than 100 kilobytes. Note: the batch size’s units are in bytes and must be greater than <code class="language-plaintext highlighter-rouge">86016</code>. This option defaults to <code class="language-plaintext highlighter-rouge">0</code>, which means data is written to a single file.</p>

<p><em>Splitting by time</em>: <code class="language-plaintext highlighter-rouge">ros2 bag record -a -d 9000</code> will split the bag files after a duration of <code class="language-plaintext highlighter-rouge">9000</code> seconds. This option defaults to <code class="language-plaintext highlighter-rouge">0</code>, which means data is written to a single file.</p>

<p>If both splitting by size and duration are enabled, the bag will split at whichever threshold is reached first.</p>

<h4 id="recording-with-compression">Recording with compression</h4>

<p>By default rosbag2 does not record with compression enabled. However, compression can be specified using the following CLI options.</p>

<p>For example, <code class="language-plaintext highlighter-rouge">ros2 bag record -a --compression-mode file --compression-format zstd</code> will record all topics and compress each file using the <a href="https://github.com/facebook/zstd">zstd</a> compressor.</p>

<p>Currently, the only <code class="language-plaintext highlighter-rouge">compression-format</code> available is <code class="language-plaintext highlighter-rouge">zstd</code>. Both the mode and format options default to <code class="language-plaintext highlighter-rouge">none</code>. To use a compression format, a compression mode must be specified, where the currently supported modes are compress by <code class="language-plaintext highlighter-rouge">file</code> or compress by <code class="language-plaintext highlighter-rouge">message</code>.</p>

<p>It is recommended to use this feature with the splitting options.</p>

<h4 id="recording-with-a-storage-configuration">Recording with a storage configuration</h4>

<p>Storage configuration can be specified in a YAML file passed through the <code class="language-plaintext highlighter-rouge">--storage-config-file</code> option.
This can be used to optimize performance for specific use-cases.</p>

<p>For the default storage plugin (sqlite3), the file has a following syntax:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>read:
  pragmas: &lt;list of pragma settings for read-only&gt;
write:
  pragmas: &lt;list of pragma settings for read/write&gt;

</code></pre></div></div>

<p>By default, SQLite settings are significantly optimized for performance.
This might have consequences of bag data being corrupted after an application or system-level crash.
This consideration only applies to current bagfile in case bag splitting is on (through <code class="language-plaintext highlighter-rouge">--max-bag-*</code> parameters).
If increased crash-caused corruption resistance is necessary, use <code class="language-plaintext highlighter-rouge">resilient</code> option for <code class="language-plaintext highlighter-rouge">--storage-preset-profile</code> setting.</p>

<p>Settings are fully exposed to the user and should be applied with understanding.
Please refer to <a href="https://www.sqlite.org/pragma.html">documentation of pragmas</a>.</p>

<p>An example configuration file could look like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>write:
  pragmas: ["journal_mode = MEMORY", "synchronous = OFF", "schema.cache_size = 1000", "schema.page_size = 4096"]


</code></pre></div></div>

<h3 id="replaying-data">Replaying data</h3>

<p>After recording data, the next logical step is to replay this data:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag play &lt;bag_file&gt;

</code></pre></div></div>

<p>The bag file is by default set to the folder name where the data was previously recorded in.</p>

<h3 id="analyzing-data">Analyzing data</h3>

<p>The recorded data can be analyzed by displaying some meta information about it:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag info &lt;bag_file&gt;

</code></pre></div></div>

<p>You should see something along these lines:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Files:             demo_strings.db3
Bag size:          44.5 KiB
Storage id:        sqlite3
Duration:          8.501s
Start:             Nov 28 2018 18:02:18.600 (1543456938.600)
End                Nov 28 2018 18:02:27.102 (1543456947.102)
Messages:          27
Topic information: Topic: /chatter | Type: std_msgs/String | Count: 9 | Serialization Format: cdr
                   Topic: /my_chatter | Type: std_msgs/String | Count: 18 | Serialization Format: cdr

</code></pre></div></div>

<h3 id="overriding-qos-profiles">Overriding QoS Profiles</h3>

<p>When starting a recording or playback workflow, you can pass a YAML file that contains QoS profile settings for a specific topic.
The YAML schema for the profile overrides is a dictionary of topic names with key/value pairs for each QoS policy.
Below is an example profile set to the default ROS2 QoS settings.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">/topic_name</span><span class="pi">:</span>
  <span class="na">history</span><span class="pi">:</span> <span class="s">keep_last</span>
  <span class="na">depth</span><span class="pi">:</span> <span class="m">10</span>
  <span class="na">reliability</span><span class="pi">:</span> <span class="s">reliable</span>
  <span class="na">durability</span><span class="pi">:</span> <span class="s">volatile</span>
  <span class="na">deadline</span><span class="pi">:</span>
    <span class="c1"># unspecified/infinity</span>
    <span class="na">sec</span><span class="pi">:</span> <span class="m">0</span>
    <span class="na">nsec</span><span class="pi">:</span> <span class="m">0</span>
  <span class="na">lifespan</span><span class="pi">:</span>
    <span class="c1"># unspecified/infinity</span>
    <span class="na">sec</span><span class="pi">:</span> <span class="m">0</span>
    <span class="na">nsec</span><span class="pi">:</span> <span class="m">0</span>
  <span class="na">liveliness</span><span class="pi">:</span> <span class="s">system_default</span>
  <span class="na">liveliness_lease_duration</span><span class="pi">:</span>
    <span class="c1"># unspecified/infinity</span>
    <span class="na">sec</span><span class="pi">:</span> <span class="m">0</span>
    <span class="na">nsec</span><span class="pi">:</span> <span class="m">0</span>
  <span class="na">avoid_ros_namespace_conventions</span><span class="pi">:</span> <span class="kc">false</span>

</code></pre></div></div>

<p>You can then use the override by specifying the <code class="language-plaintext highlighter-rouge">--qos-profile-overrides-path</code> argument in the CLI:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Record</span>
ros2 bag record <span class="nt">--qos-profile-overrides-path</span> override.yaml <span class="nt">-a</span> <span class="nt">-o</span> my_bag
<span class="c"># Playback</span>
ros2 bag play <span class="nt">--qos-profile-overrides-path</span> override.yaml my_bag

</code></pre></div></div>

<p>See <a href="https://docs.ros.org/en/rolling/Guides/Overriding-QoS-Policies-For-Recording-And-Playback.html">the official QoS override tutorial</a> and <a href="https://docs.ros.org/en/rolling/Concepts/About-Quality-of-Service-Settings.html">“About QoS Settings”</a> for more detail.</p>

<h3 id="using-in-launch">Using in launch</h3>

<p>We can invoke the command line tool from a ROS launch script as an <em>executable</em> (not a <em>node</em> action).
For example, to launch the command to record all topics you can use the following launch script:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;launch&gt;</span>
  <span class="nt">&lt;executable</span> <span class="na">cmd=</span><span class="s">"ros2 bag record -a"</span> <span class="na">output=</span><span class="s">"screen"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/launch&gt;</span>

</code></pre></div></div>

<p>Here’s the equivalent Python launch script:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">launch</span>


<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">launch</span><span class="p">.</span><span class="nc">LaunchDescription</span><span class="p">([</span>
        <span class="n">launch</span><span class="p">.</span><span class="n">actions</span><span class="p">.</span><span class="nc">ExecuteProcess</span><span class="p">(</span>
            <span class="n">cmd</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">ros2</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">bag</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">record</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">-a</span><span class="sh">'</span><span class="p">],</span>
            <span class="n">output</span><span class="o">=</span><span class="sh">'</span><span class="s">screen</span><span class="sh">'</span>
        <span class="p">)</span>
    <span class="p">])</span>

</code></pre></div></div>

<p>Use the <code class="language-plaintext highlighter-rouge">ros2 launch</code> command line tool to launch either of the above launch scripts.
For example, if we named the above XML launch script, <code class="language-plaintext highlighter-rouge">record_all.launch.xml</code>:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ros2 launch record_all.launch.xml

</code></pre></div></div>

<h2 id="storage-format-plugin-architecture">Storage format plugin architecture</h2>

<p>Looking at the output of the <code class="language-plaintext highlighter-rouge">ros2 bag info</code> command, we can see a field called <code class="language-plaintext highlighter-rouge">storage id:</code>.
rosbag2 specifically was designed to support multiple storage formats.
This allows a flexible adaptation of various storage formats depending on individual use cases.
As of now, this repository comes with two storage plugins.
The first plugin, sqlite3 is chosen by default.
If not specified otherwise, rosbag2 will store and replay all recorded data in an SQLite3 database.</p>

<p>In order to use a specified (non-default) storage format plugin, rosbag2 has a command line argument for it:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag &lt;record&gt; | &lt;play&gt; | &lt;info&gt; -s &lt;sqlite3&gt; | &lt;rosbag2_v2&gt; | &lt;custom_plugin&gt;

</code></pre></div></div>

<p>Have a look at each of the individual plugins for further information.</p>

<h2 id="serialization-format-plugin-architecture">Serialization format plugin architecture</h2>

<p>Looking further at the output of <code class="language-plaintext highlighter-rouge">ros2 bag info</code>, we can see another field attached to each topic called <code class="language-plaintext highlighter-rouge">Serialization Format</code>.
By design, ROS 2 is middleware agnostic and thus can leverage multiple communication frameworks.
The default middleware for ROS 2 is DDS which has <code class="language-plaintext highlighter-rouge">cdr</code> as its default binary serialization format.
However, other middleware implementation might have different formats.
If not specified, <code class="language-plaintext highlighter-rouge">ros2 bag record -a</code> will record all data in the middleware specific format.
This however also means that such a bag file can’t easily be replayed with another middleware format.</p>

<p>rosbag2 implements a serialization format plugin architecture which allows the user the specify a certain serialization format.
When specified, rosbag2 looks for a suitable converter to transform the native middleware protocol to the target format.
This also allows to record data in a native format to optimize for speed, but to convert or transform the recorded data into a middleware agnostic serialization format.</p>

<p>By default, rosbag2 can convert from and to CDR as it’s the default serialization format for ROS 2.</p>

</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>

<p>Contributors must sign-off each commit by adding a <code class="language-plaintext highlighter-rouge">Signed-off-by: ...</code>
line to commit messages to certify that they have the right to submit
the code they are contributing to the project according to the
<a href="https://developercertificate.org/">Developer Certificate of Origin (DCO)</a>.</p>
</div>
              <hr id="galactic-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="galactic-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#galactic-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#galactic-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#galactic-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="galactic-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="galactic-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="galactic-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rosbag2">rosbag2</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/mcap_vendor">mcap_vendor</a>
        
        <a class="label label-primary pkg-label" href="/p/ros2bag">ros2bag</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2">rosbag2</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_compression">rosbag2_compression</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_compression_zstd">rosbag2_compression_zstd</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_cpp">rosbag2_cpp</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_examples_cpp">rosbag2_examples_cpp</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_examples_py">rosbag2_examples_py</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_interfaces">rosbag2_interfaces</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_performance_benchmarking">rosbag2_performance_benchmarking</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_performance_benchmarking_msgs">rosbag2_performance_benchmarking_msgs</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_py">rosbag2_py</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_storage">rosbag2_storage</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_storage_default_plugins">rosbag2_storage_default_plugins</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_storage_mcap">rosbag2_storage_mcap</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_storage_sqlite3">rosbag2_storage_sqlite3</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_test_common">rosbag2_test_common</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_test_msgdefs">rosbag2_test_msgdefs</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_tests">rosbag2_tests</a>
        
        <a class="label label-primary pkg-label" href="/p/rosbag2_transport">rosbag2_transport</a>
        
        <a class="label label-primary pkg-label" href="/p/shared_queues_vendor">shared_queues_vendor</a>
        
        <a class="label label-primary pkg-label" href="/p/sqlite3_vendor">sqlite3_vendor</a>
        
        <a class="label label-primary pkg-label" href="/p/zstd_vendor">zstd_vendor</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-rosbag2
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-rosbag2" role="menuitem" tabindex="-1" href="/r/rosbag2/github-ros2-rosbag2" data="github-ros2-rosbag2">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-rosbag2
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros2/rosbag2.git">https://github.com/ros2/rosbag2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">iron</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-11-11
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rosbag2/#iron-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rosbag2/#iron-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rosbag2/#iron-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/mcap_vendor">mcap_vendor</a></td>
                    <td>0.22.8</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ros2bag">ros2bag</a></td>
                    <td>0.22.8</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2">rosbag2</a></td>
                    <td>0.22.8</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_compression">rosbag2_compression</a></td>
                    <td>0.22.8</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_compression_zstd">rosbag2_compression_zstd</a></td>
                    <td>0.22.8</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_cpp">rosbag2_cpp</a></td>
                    <td>0.22.8</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_examples_cpp">rosbag2_examples_cpp</a></td>
                    <td>0.22.8</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_examples_py">rosbag2_examples_py</a></td>
                    <td>0.22.8</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_interfaces">rosbag2_interfaces</a></td>
                    <td>0.22.8</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_performance_benchmarking">rosbag2_performance_benchmarking</a></td>
                    <td>0.22.8</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_performance_benchmarking_msgs">rosbag2_performance_benchmarking_msgs</a></td>
                    <td>0.22.8</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_py">rosbag2_py</a></td>
                    <td>0.22.8</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_storage">rosbag2_storage</a></td>
                    <td>0.22.8</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_storage_default_plugins">rosbag2_storage_default_plugins</a></td>
                    <td>0.22.8</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_storage_mcap">rosbag2_storage_mcap</a></td>
                    <td>0.22.8</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_storage_sqlite3">rosbag2_storage_sqlite3</a></td>
                    <td>0.22.8</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_test_common">rosbag2_test_common</a></td>
                    <td>0.22.8</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_test_msgdefs">rosbag2_test_msgdefs</a></td>
                    <td>0.22.8</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_tests">rosbag2_tests</a></td>
                    <td>0.22.8</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rosbag2_transport">rosbag2_transport</a></td>
                    <td>0.22.8</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/shared_queues_vendor">shared_queues_vendor</a></td>
                    <td>0.22.8</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/sqlite3_vendor">sqlite3_vendor</a></td>
                    <td>0.22.8</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/zstd_vendor">zstd_vendor</a></td>
                    <td>0.22.8</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="rosbag2">rosbag2</h1>
<p><img src="https://img.shields.io/github/license/ros2/rosbag2" alt="License">
<a href="https://github.com/ros2/rosbag2/actions"><img src="https://github.com/ros2/rosbag2/workflows/Test%20rosbag2/badge.svg" alt="GitHub Action Status"></a></p>

<p>Repository for implementing rosbag2 as described in its corresponding <a href="https://github.com/ros2/design/blob/ros2bags/articles/rosbags.md">design article</a>.</p>

<h2 id="installation-instructions">Installation instructions</h2>

<h2 id="debian-packages">Debian packages</h2>

<p>rosbag2 packages are available via debian packages and thus can be installed via</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ export CHOOSE_ROS_DISTRO=crystal # rosbag2 is available starting from crystal
$ sudo apt-get install ros-$CHOOSE_ROS_DISTRO-ros2bag ros-$CHOOSE_ROS_DISTRO-rosbag2*

</code></pre></div></div>

<p>Note that the above command installs all packages related to rosbag2.
This also includes the plugin for <a href="https://github.com/ros2/rosbag2_bag_v2">reading ROS1 bag files</a>, which brings a hard dependency on the <a href="https://github.com/ros2/ros1_bridge">ros1_bridge</a> with it and therefore ROS1 packages.
If you want to install only the ROS2 related packages for rosbag, please use the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ export CHOOSE_ROS_DISTRO=crystal # rosbag2 is available starting from crystal
$ sudo apt-get install ros-$CHOOSE_ROS_DISTRO-ros2bag ros-$CHOOSE_ROS_DISTRO-rosbag2-transport

</code></pre></div></div>

<h2 id="build-from-source">Build from source</h2>

<p>It is recommended to create a new overlay workspace on top of your current ROS 2 installation.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ mkdir -p ~/rosbag_ws/src
$ cd ~/rosbag_ws/src

</code></pre></div></div>

<p>Clone this repository into the source folder:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git clone https://github.com/ros2/rosbag2.git

</code></pre></div></div>
<p><strong>[Note]</strong>: if you are only building rosbag2 on top of a Debian Installation of ROS2, please git clone the branch following your current ROS2 distribution.</p>

<p>Then build all the packages with this command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ colcon build [--merge-install]

</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">--merge-install</code> flag is optional and installs all packages into one folder rather than isolated folders for each package.</p>

<h4 id="executing-tests">Executing tests</h4>

<p>The tests can be run using the following commands:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ colcon test [--merge-install]
$ colcon test-result --verbose

</code></pre></div></div>

<p>The first command executes the test and the second command displays the errors (if any).</p>

<h2 id="using-rosbag2">Using rosbag2</h2>

<p>rosbag2 is part of the ROS 2 command line interfaces.
This repo introduces a new verb called <code class="language-plaintext highlighter-rouge">bag</code> and thus serves as the entry point of using rosbag2.
As of the time of writing, there are three commands available for <code class="language-plaintext highlighter-rouge">ros2 bag</code>:</p>

<ul>
  <li>record</li>
  <li>play</li>
  <li>info</li>
</ul>

<h3 id="recording-data">Recording data</h3>

<p>In order to record all topics currently available in the system:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag record -a

</code></pre></div></div>

<p>The command above will record all available topics and discovers new topics as they appear while recording.
This auto-discovery of new topics can be disabled by given the command line argument <code class="language-plaintext highlighter-rouge">--no-discovery</code>.</p>

<p>To record a set of predefined topics, one can specify them on the command line explicitly.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag record &lt;topic1&gt; &lt;topic2&gt; … &lt;topicN&gt;

</code></pre></div></div>

<p>The specified topics don’t necessarily have to be present at start time.
The discovery function will automatically recognize if one of the specified topics appeared.
In the same fashion, this auto discovery can be disabled with <code class="language-plaintext highlighter-rouge">--no-discovery</code>.</p>

<p>If not further specified, <code class="language-plaintext highlighter-rouge">ros2 bag record</code> will create a new folder named to the current time stamp and stores all data within this folder.
A user defined name can be given with <code class="language-plaintext highlighter-rouge">-o, --output</code>.</p>

<h4 id="simulation-time">Simulation time</h4>

<p>In ROS 2, “simulation time” refers to publishing a clock value on the <code class="language-plaintext highlighter-rouge">/clock</code> topic, instead of using the system clock to tell time.
By passing <code class="language-plaintext highlighter-rouge">--use-sim-time</code> argument to <code class="language-plaintext highlighter-rouge">ros2 bag record</code>, we turn on this option for the recording node.
Messages written to the bag will use the latest received value of <code class="language-plaintext highlighter-rouge">/clock</code> for the timestamp of the recorded message.</p>

<p>Note: Until the first <code class="language-plaintext highlighter-rouge">/clock</code> message is received, the recorder will not write any messages.
Before that message is received, the time is 0, which leads to a significant time jump once simulation time begins, making the bag essentially unplayable if messages are written first with time 0 and then time N from <code class="language-plaintext highlighter-rouge">/clock</code>.</p>

<h4 id="splitting-recorded-bag-files">Splitting recorded bag files</h4>

<p>rosbag2 offers the capability to split bag files when they reach a maximum size or after a specified duration. By default rosbag2 will record all data into a single bag file, but this can be changed using the CLI options.</p>

<p><em>Splitting by size</em>: <code class="language-plaintext highlighter-rouge">ros2 bag record -a -b 100000</code> will split the bag files when they become greater than 100 kilobytes. Note: the batch size’s units are in bytes and must be greater than <code class="language-plaintext highlighter-rouge">86016</code>. This option defaults to <code class="language-plaintext highlighter-rouge">0</code>, which means data is written to a single file.</p>

<p><em>Splitting by time</em>: <code class="language-plaintext highlighter-rouge">ros2 bag record -a -d 9000</code> will split the bag files after a duration of <code class="language-plaintext highlighter-rouge">9000</code> seconds. This option defaults to <code class="language-plaintext highlighter-rouge">0</code>, which means data is written to a single file.</p>

<p>If both splitting by size and duration are enabled, the bag will split at whichever threshold is reached first.</p>

<h4 id="recording-with-compression">Recording with compression</h4>

<p>By default rosbag2 does not record with compression enabled. However, compression can be specified using the following CLI options.</p>

<p>For example, <code class="language-plaintext highlighter-rouge">ros2 bag record -a --compression-mode file --compression-format zstd</code> will record all topics and compress each file using the <a href="https://github.com/facebook/zstd">zstd</a> compressor.</p>

<p>Currently, the only <code class="language-plaintext highlighter-rouge">compression-format</code> available is <code class="language-plaintext highlighter-rouge">zstd</code>. Both the mode and format options default to <code class="language-plaintext highlighter-rouge">none</code>. To use a compression format, a compression mode must be specified, where the currently supported modes are compress by <code class="language-plaintext highlighter-rouge">file</code> or compress by <code class="language-plaintext highlighter-rouge">message</code>.</p>

<p>It is recommended to use this feature with the splitting options.</p>

<h4 id="recording-with-a-storage-configuration">Recording with a storage configuration</h4>

<p>Storage configuration can be specified in a YAML file passed through the <code class="language-plaintext highlighter-rouge">--storage-config-file</code> option.
This can be used to optimize performance for specific use cases.</p>

<p>See storage plugin documentation for more detail:</p>
<ul>
  <li><a href="https://github.com/ros2/rosbag2/tree/iron/rosbag2_storage_mcap/README.md#writer-configuration">mcap</a></li>
  <li><a href="https://github.com/ros2/rosbag2/tree/iron/rosbag2_storage_sqlite3/README.md#storage-configuration-file">sqlite3</a></li>
</ul>

<h3 id="replaying-data">Replaying data</h3>

<p>After recording data, the next logical step is to replay this data:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag play &lt;bag_file&gt;

</code></pre></div></div>

<p>The bag file is by default set to the folder name where the data was previously recorded in.</p>

<h3 id="analyzing-data">Analyzing data</h3>

<p>The recorded data can be analyzed by displaying some meta information about it:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag info &lt;bag_file&gt;

</code></pre></div></div>

<p>You should see something along these lines:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Files:             demo_strings.db3
Bag size:          44.5 KiB
Storage id:        sqlite3
Duration:          8.501s
Start:             Nov 28 2018 18:02:18.600 (1543456938.600)
End                Nov 28 2018 18:02:27.102 (1543456947.102)
Messages:          27
Topic information: Topic: /chatter | Type: std_msgs/String | Count: 9 | Serialization Format: cdr
                   Topic: /my_chatter | Type: std_msgs/String | Count: 18 | Serialization Format: cdr

</code></pre></div></div>

<h3 id="converting-bags">Converting bags</h3>

<p>Rosbag2 provides a tool <code class="language-plaintext highlighter-rouge">ros2 bag convert</code> (or, <code class="language-plaintext highlighter-rouge">rosbag2_transport::bag_rewrite</code> in the C++ API).
This allows the user to take one or more input bags, and write them out to one or more output bags with new settings.
This flexible feature enables the following features:</p>
<ul>
  <li>Merge (multiple input bags, one output bag)</li>
  <li>Split top-level bags (one input bag, multiple output bags)</li>
  <li>Split internal files (by time or size - one input bag with fewer internal files, one output bag with more, smaller, internal files)</li>
  <li>Compress/Decompress (output bag(s) with different compression settings than the input(s))</li>
  <li>Serialization format conversion</li>
  <li>… and more!</li>
</ul>

<p>Here is an example command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 bag convert --input /path/to/bag1 --input /path/to/bag2 storage_id --output-options output_options.yaml

</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">--input</code> argument may be specified any number of times, and takes 1 or 2 values.
The first value is the URI of the input bag.
If a second value is supplied, it specifies the storage implementation of the bag.
If no storage implementation is specified, rosbag2 will try to determine it automatically from the bag.</p>

<p>The <code class="language-plaintext highlighter-rouge">--output-options</code> argument must point to the URI of a YAML file specifying the full recording configuration for each bag to output (<code class="language-plaintext highlighter-rouge">StorageOptions</code> + <code class="language-plaintext highlighter-rouge">RecordOptions</code>).
This file must contain a top-level key <code class="language-plaintext highlighter-rouge">output_bags</code>, which contains a list of these objects.</p>

<p>The only required value in the output bags is <code class="language-plaintext highlighter-rouge">uri</code> and <code class="language-plaintext highlighter-rouge">storage_id</code>. All other values are options (however, if no topic selection is specified, this output bag will be empty!).</p>

<p>This example notes all fields that can have an effect, with a comment on the required ones.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>output_bags:
- uri: /output/bag1  # required
  storage_id: ""  # will use the default storage plugin, if unspecified
  max_bagfile_size: 0
  max_bagfile_duration: 0
  storage_preset_profile: ""
  storage_config_uri: ""
  all: false
  topics: []
  rmw_serialization_format: ""  # defaults to using the format of the input topic
  regex: ""
  exclude: ""
  compression_mode: ""
  compression_format: ""
  compression_queue_size: 1
  compression_threads: 0
  include_hidden_topics: false
  include_unpublished_topics: false

</code></pre></div></div>

<p>Example merge:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag convert -i bag1 -i bag2 -o out.yaml

# out.yaml
output_bags:
- uri: merged_bag
  all: true

</code></pre></div></div>

<p>Example split:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag convert -i bag1 -o out.yaml

# out.yaml
output_bags:
- uri: split1
  topics: [/topic1, /topic2]
- uri: split2
  topics: [/topic3]

</code></pre></div></div>

<p>Example compress:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag convert -i bag1 -o out.yaml

# out.yaml
output_bags:
- uri: compressed
  all: true
  compression_mode: file
  compression_format: zstd

</code></pre></div></div>

<h3 id="overriding-qos-profiles">Overriding QoS Profiles</h3>

<p>When starting a recording or playback workflow, you can pass a YAML file that contains QoS profile settings for a specific topic.
The YAML schema for the profile overrides is a dictionary of topic names with key/value pairs for each QoS policy.
Below is an example profile set to the default ROS2 QoS settings.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">/topic_name</span><span class="pi">:</span>
  <span class="na">history</span><span class="pi">:</span> <span class="s">keep_last</span>
  <span class="na">depth</span><span class="pi">:</span> <span class="m">10</span>
  <span class="na">reliability</span><span class="pi">:</span> <span class="s">reliable</span>
  <span class="na">durability</span><span class="pi">:</span> <span class="s">volatile</span>
  <span class="na">deadline</span><span class="pi">:</span>
    <span class="c1"># unspecified/infinity</span>
    <span class="na">sec</span><span class="pi">:</span> <span class="m">0</span>
    <span class="na">nsec</span><span class="pi">:</span> <span class="m">0</span>
  <span class="na">lifespan</span><span class="pi">:</span>
    <span class="c1"># unspecified/infinity</span>
    <span class="na">sec</span><span class="pi">:</span> <span class="m">0</span>
    <span class="na">nsec</span><span class="pi">:</span> <span class="m">0</span>
  <span class="na">liveliness</span><span class="pi">:</span> <span class="s">system_default</span>
  <span class="na">liveliness_lease_duration</span><span class="pi">:</span>
    <span class="c1"># unspecified/infinity</span>
    <span class="na">sec</span><span class="pi">:</span> <span class="m">0</span>
    <span class="na">nsec</span><span class="pi">:</span> <span class="m">0</span>
  <span class="na">avoid_ros_namespace_conventions</span><span class="pi">:</span> <span class="kc">false</span>

</code></pre></div></div>

<p>You can then use the override by specifying the <code class="language-plaintext highlighter-rouge">--qos-profile-overrides-path</code> argument in the CLI:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Record</span>
ros2 bag record <span class="nt">--qos-profile-overrides-path</span> override.yaml <span class="nt">-a</span> <span class="nt">-o</span> my_bag
<span class="c"># Playback</span>
ros2 bag play <span class="nt">--qos-profile-overrides-path</span> override.yaml my_bag

</code></pre></div></div>

<p>See <a href="https://docs.ros.org/en/rolling/Guides/Overriding-QoS-Policies-For-Recording-And-Playback.html">the official QoS override tutorial</a> and <a href="https://docs.ros.org/en/rolling/Concepts/About-Quality-of-Service-Settings.html">“About QoS Settings”</a> for more detail.</p>

<h3 id="using-in-launch">Using in launch</h3>

<p>We can invoke the command line tool from a ROS launch script as an <em>executable</em> (not a <em>node</em> action).
For example, to launch the command to record all topics you can use the following launch script:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;launch&gt;</span>
  <span class="nt">&lt;executable</span> <span class="na">cmd=</span><span class="s">"ros2 bag record -a"</span> <span class="na">output=</span><span class="s">"screen"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/launch&gt;</span>

</code></pre></div></div>

<p>Here’s the equivalent Python launch script:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">launch</span>


<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">launch</span><span class="p">.</span><span class="nc">LaunchDescription</span><span class="p">([</span>
        <span class="n">launch</span><span class="p">.</span><span class="n">actions</span><span class="p">.</span><span class="nc">ExecuteProcess</span><span class="p">(</span>
            <span class="n">cmd</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">ros2</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">bag</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">record</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">-a</span><span class="sh">'</span><span class="p">],</span>
            <span class="n">output</span><span class="o">=</span><span class="sh">'</span><span class="s">screen</span><span class="sh">'</span>
        <span class="p">)</span>
    <span class="p">])</span>

</code></pre></div></div>

<p>Use the <code class="language-plaintext highlighter-rouge">ros2 launch</code> command line tool to launch either of the above launch scripts.
For example, if we named the above XML launch script, <code class="language-plaintext highlighter-rouge">record_all.launch.xml</code>:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ros2 launch record_all.launch.xml

</code></pre></div></div>

<h2 id="storage-format-plugin-architecture">Storage format plugin architecture</h2>

<p>Looking at the output of the <code class="language-plaintext highlighter-rouge">ros2 bag info</code> command, we can see a field <code class="language-plaintext highlighter-rouge">Storage id:</code>.
Rosbag2 was designed to support multiple storage formats to adapt to individual use cases.
This repository provides two storage plugins, <code class="language-plaintext highlighter-rouge">mcap</code> and <code class="language-plaintext highlighter-rouge">sqlite3</code>.
The default is <code class="language-plaintext highlighter-rouge">mcap</code>, which is provided to code by <a href="https://github.com/ros2/rosbag2/tree/iron/rosbag2_storage/include/rosbag2_storage/default_storage_id.hpp"><code class="language-plaintext highlighter-rouge">rosbag2_storage::get_default_storage_id()</code></a> and defined in <a href="https://github.com/ros2/rosbag2/tree/iron/rosbag2_storage/src/rosbag2_storage/default_storage_id.cpp#L21"><code class="language-plaintext highlighter-rouge">default_storage_id.cpp</code></a></p>

<p>If not specified otherwise, rosbag2 will write data using the default plugin.</p>

<p>In order to use a specified (non-default) storage format plugin, rosbag2 has a command line argument <code class="language-plaintext highlighter-rouge">--storage</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ros2 bag record --storage &lt;storage_id&gt;

</code></pre></div></div>

<p>Bag reading commands can detect the storage plugin automatically, but if for any reason you want to force a specific plugin to read a bag, you can use the <code class="language-plaintext highlighter-rouge">--storage</code> option on any <code class="language-plaintext highlighter-rouge">ros2 bag</code> verb.</p>

<p>To write your own Rosbag2 storage implementation, refer to <a href="https://github.com/ros2/rosbag2/tree/iron/docs/storage_plugin_development.md">this document describing that process</a></p>

<h2 id="serialization-format-plugin-architecture">Serialization format plugin architecture</h2>

<p>Looking further at the output of <code class="language-plaintext highlighter-rouge">ros2 bag info</code>, we can see another field attached to each topic called <code class="language-plaintext highlighter-rouge">Serialization Format</code>.
By design, ROS 2 is middleware agnostic and thus can leverage multiple communication frameworks.
The default middleware for ROS 2 is DDS which has <code class="language-plaintext highlighter-rouge">cdr</code> as its default binary serialization format.
However, other middleware implementation might have different formats.
If not specified, <code class="language-plaintext highlighter-rouge">ros2 bag record -a</code> will record all data in the middleware specific format.
This however also means that such a bag file can’t easily be replayed with another middleware format.</p>

<p>rosbag2 implements a serialization format plugin architecture which allows the user the specify a certain serialization format.
When specified, rosbag2 looks for a suitable converter to transform the native middleware protocol to the target format.
This also allows to record data in a native format to optimize for speed, but to convert or transform the recorded data into a middleware agnostic serialization format.</p>

<p>By default, rosbag2 can convert from and to CDR as it’s the default serialization format for ROS 2.</p>

</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>

<p>Contributors must sign-off each commit by adding a <code class="language-plaintext highlighter-rouge">Signed-off-by: ...</code>
line to commit messages to certify that they have the right to submit
the code they are contributing to the project according to the
<a href="https://developercertificate.org/">Developer Certificate of Origin (DCO)</a>.</p>
</div>
              <hr id="iron-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="iron-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#iron-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#iron-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#iron-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="iron-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="iron-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="iron-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rosbag2">rosbag2</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros2-rosbag2
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros2-rosbag2" role="menuitem" tabindex="-1" href="/r/rosbag2/github-ros2-rosbag2" data="github-ros2-rosbag2">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros2-rosbag2
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/ros2/rosbag2.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
