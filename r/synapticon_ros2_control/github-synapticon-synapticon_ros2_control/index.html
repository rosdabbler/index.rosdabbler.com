<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/synapticon_ros2_control/github-synapticon-synapticon_ros2_control/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">synapticon_ros2_control</li>
        <!--<li class="active">synapticon_ros2_control</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-primary" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-primary" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-primary" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-primary" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-default" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class="disabled older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/synapticon_ros2_control">synapticon_ros2_control</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/synapticon_ros2_control">synapticon_ros2_control</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-synapticon-synapticon_ros2_control
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-synapticon-synapticon_ros2_control" role="menuitem" tabindex="-1" href="/r/synapticon_ros2_control/github-synapticon-synapticon_ros2_control" data="github-synapticon-synapticon_ros2_control">
                    <span class="glyphicon glyphicon-star"></span>
                    github-synapticon-synapticon_ros2_control
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">A ros2_control interface for Synapticon motor drivers</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/synapticon/synapticon_ros2_control.git">https://github.com/synapticon/synapticon_ros2_control.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-03-27
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/synapticon_ros2_control/#humble-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/synapticon_ros2_control/#humble-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/synapticon_ros2_control/#humble-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/synapticon_ros2_control">synapticon_ros2_control</a></td>
                    <td>0.1.2</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="controlling-synapticon-devices-using-the-ros2-package">Controlling Synapticon Devices Using the ROS2 Package</h1>

<h2 id="description">Description</h2>

<p>This repository provides an example of how to use Synapticon drives (SOMANET Node, SOMANET Circulo and SOMANET Integro) in CSP (Cyclic Sync Position), CSV (Cyclic Sync Velocity), and CST (Cyclic Sync Torque) modes using the ROS2 package. It utilizes <code class="language-plaintext highlighter-rouge">SOEM Ethercat Master</code>. The ROS 2 package was originally developed by Andy Zelenak. Synapticon GmbH added examples, simulation, and extended instructions for easier installation, as well as support for containerization using Docker.</p>

<p><img src="https://raw.githubusercontent.com/synapticon/synapticon_ros2_control/main/doc/images/rviz.png" alt="RVIZ Screenshot of dual motor test setup"></p>

<h2 id="table-of-contents">Table of Contents</h2>

<ol>
  <li><a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#1-intention">Intention</a></li>
  <li>
<a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2-overview">Overview</a>
    <ul>
      <li>2.1. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#21-hardware">Hardware</a>
</li>
      <li>2.2. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#22-software">Software</a>
        <ul>
          <li>2.2.1. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#221-ubuntu-with-ros2">Ubuntu with ROS2</a>
            <ul>
              <li>2.2.1.1. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2211-ros2-installation">ROS2 Installation</a>
</li>
              <li>2.2.1.2. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2212-synapticon-package-installation">Synapticon Package Installation</a>
</li>
              <li>2.2.1.3. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2213-demo">Demo</a>
</li>
              <li>2.2.1.4. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2214-running-without-sudo-optional">Running Without Sudo (Optional)</a>
</li>
            </ul>
          </li>
          <li>2.2.2. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#222-isolated-environment-docker">Isolated Environment (Docker)</a>
            <ul>
              <li>2.2.2.1. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2221-docker-installation">Docker Installation</a>
</li>
              <li>2.2.2.2. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2222-synapticon-package-installation">Synapticon Package Installation</a>
</li>
              <li>2.2.2.3. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2223-demo">Demo</a>
</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#3-disclaimer">Disclaimer</a></li>
</ol>

<h2 id="1-intention">1. Intention</h2>

<p>The intention of this document is to provide instructions on how to quickly begin Synapticon Devices with the ROS2 package using the Synapticon library. Additionally, in order to make it compatible with other Linux distributions, corresponding Docker images are provided.</p>

<h2 id="2-overview">2. Overview</h2>

<p>The following subsections briefly demonstrate hardware and software required for using Synapticon devices with this package.</p>

<h3 id="21-hardware">2.1. Hardware</h3>

<p>In the figure below, a block diagram of the wiring used in this setup is provided. Drives can be used once the parameters are configured with <a href="https://www.synapticon.com/en/products/oblac-drives">OBLAC tools</a>. Detailed instructions and wiring diagrams for all the devices are available on the <a href="https://www.synapticon.com/en/support/dokumentation">Synapticon Web site</a> documentation. The package allows daisy chaining of all the Synapticon drives in any order as indicated in the image below.</p>

<p><img src="https://raw.githubusercontent.com/synapticon/synapticon_ros2_control/main/doc/images/hardware.jpg" alt="Hardware layout"></p>

<h3 id="22-software">2.2. Software</h3>

<p>In this demo, two scenarios are considered:</p>
<ul>
  <li>Ubuntu 22.04 or 24.04 is installed on the system and ROS2 (humble, rolling or jazzy) together with the Synapticon package will be installed on that system</li>
  <li>The user wants to run the package in an isolated environment (Docker)</li>
</ul>

<h4 id="221-ubuntu-with-ros2">2.2.1. Ubuntu with ROS2</h4>

<p>To install ROS2 on your Ubuntu machine, follow the steps from <a href="https://docs.ros.org/en/humble/Installation/Ubuntu-Install-Debs.html">ros.org</a> and install the full version. The minimal version can also be installed; however, if simulation is desired, RViZ must additionally be installed.  After the installation, some configuration steps as described <a href="https://docs.ros.org/en/humble/Tutorials/Beginner-CLI-Tools/Configuring-ROS2-Environment.html">here</a> are required. For the completeness of the demo, the commands in the following subsection are copied from the above website and should be executed for the ROS2 installation.</p>

<h5 id="2211-ros2-installation">2.2.1.1. ROS2 Installation</h5>

<p>To ensure that locale supports UTF-8, run the following commands:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt <span class="nb">install </span>locales
<span class="nb">sudo </span>locale-gen en_US en_US.UTF-8
<span class="nb">sudo </span>update-locale <span class="nv">LC_ALL</span><span class="o">=</span>en_US.UTF-8 <span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8
<span class="nb">export </span><span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8

</code></pre></div></div>
<p>Enable Ubuntu Universe repository:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>software-properties-common
<span class="nb">sudo </span>add-apt-repository universe

</code></pre></div></div>
<p>Add GPG key:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt <span class="nb">install </span>curl <span class="nt">-y</span>
<span class="nb">sudo </span>curl <span class="nt">-sSL</span> https://raw.githubusercontent.com/ros/rosdistro/master/ros.key <span class="nt">-o</span> /usr/share/keyrings/ros-archive-keyring.gpg

</code></pre></div></div>
<p>Add repository to the sources:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"deb [arch=</span><span class="si">$(</span>dpkg <span class="nt">--print-architecture</span><span class="si">)</span><span class="s2"> signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu </span><span class="si">$(</span><span class="nb">.</span> /etc/os-release <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="nv">$UBUNTU_CODENAME</span><span class="si">)</span><span class="s2"> main"</span> | <span class="nb">sudo tee</span> /etc/apt/sources.list.d/ros2.list <span class="o">&gt;</span> /dev/null

</code></pre></div></div>
<p>Update apt cache:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update

</code></pre></div></div>
<p>This command updates the packages on your system. Note that if the commands after this work, skip this step.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt upgrade

</code></pre></div></div>
<p>Finally, install ROS and compilers (replace <code class="language-plaintext highlighter-rouge">ROS_DISTRO</code> with the desired ROS distribution - humble, jazzy or rolling):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>ros-ROS_DISTRO-desktop
<span class="nb">sudo </span>apt <span class="nb">install </span>ros-dev-tools

</code></pre></div></div>
<p>After the installation is complete, add the following line to the end of <code class="language-plaintext highlighter-rouge">/home/USER/.bashrc</code> file (replace <code class="language-plaintext highlighter-rouge">ROS_DISTRO</code> with the desired ROS distribution - humble, jazzy or rolling):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> /opt/ros/ROS_DISTRO/setup.bash

</code></pre></div></div>
<p>In order for ROS2 to not interfere with the communication on other ports, we set the Domain ID (detailed information is available <a href="https://docs.ros.org/en/humble/Concepts/Intermediate/About-Domain-ID.html">here</a>).  For this demo, we just used ROS_DOMAIN_ID=1. To do so, add the following at the end of <code class="language-plaintext highlighter-rouge">/home/$USER/.bashrc</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">ROS_DOMAIN_ID</span><span class="o">=</span>1

</code></pre></div></div>
<p>After this, close and reopen all your terminals.
To verify the installation, open two terminals and run:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run demo_nodes_cpp talker
ros2 run demo_nodes_py listener

</code></pre></div></div>
<p>If the nodes are communicating, the installation was successful.</p>

<h5 id="2212-synapticon-package-installation">2.2.1.2. Synapticon Package Installation</h5>

<p><strong>OPTION 1:</strong> Installing from Source</p>

<p>Create an ROS2 workspace:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> <span class="nt">-p</span> ~/ros2_ws/src
<span class="nb">cd</span> ~/ros2_ws/src

</code></pre></div></div>
<p>Clone the Synapticon package:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/synapticon/synapticon_ros2_control

</code></pre></div></div>
<p>Install build tools:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>python3-colcon-common-extensions

</code></pre></div></div>
<p>Build the package:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/ros2_ws
rosdep <span class="nb">install</span> <span class="nt">--from-paths</span> src <span class="nt">-y</span> <span class="nt">--ignore-src</span>
colcon build

</code></pre></div></div>
<p>Additionally, you can source the workspace by adding the following line to the <code class="language-plaintext highlighter-rouge">/home/USER/.bashrc</code> file above the line where the ROS installation was sourced (above this line: <code class="language-plaintext highlighter-rouge">source /opt/ros/ROS_DISTRO/setup.bash</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> /home/USER/ros2_ws/install/setup.bash

</code></pre></div></div>

<p><strong>OPTION 2:</strong> Binary Installation</p>

<p>If required, add the ROS repository (this occurs only once):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>software-properties-common 
<span class="nb">sudo </span>add-apt-repository universe 
<span class="nb">sudo </span>apt update

</code></pre></div></div>
<p>Install the Synapticon package (replace ROS_DISTRO with the ROS distribution you want - humble, jazzy or rolling):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>ros-ROS_DISTRO-synapticon-ros2-control

</code></pre></div></div>

<p>Make sure rosdep is initialized and updated:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>rosdep init 
rosdep update

</code></pre></div></div>

<p>Install its dependencies:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rosdep <span class="nb">install </span>synapticon_ros2_control

</code></pre></div></div>
<p>The package will get installed to <code class="language-plaintext highlighter-rouge">/opt/ros/ROS_DISTRO/share/synapticon_ros2_control/</code>.</p>

<p><strong>VERIFICATION</strong></p>

<p>The ethernet device name, to which the drive is connected, is required. This could be checked with the <code class="language-plaintext highlighter-rouge">ifconfig</code> command. Ethernet adapters usually start with <code class="language-plaintext highlighter-rouge">en</code>. To check if the master could be run and if the slaves are found, execute the following  in the terminal (replace <code class="language-plaintext highlighter-rouge">YOUR_ETHERNET_INTERFACE</code> with the one found with <code class="language-plaintext highlighter-rouge">ifconfig</code>). 
If you installed from source:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> ./home/<span class="nv">$USER</span>/ros2_ws/install/synapticon_ros2_control/bin/torque_control_executable YOUR_ETHERNET_INTERFACE

</code></pre></div></div>
<p>or if you installed using the binary installation (replace <code class="language-plaintext highlighter-rouge">ROS_DISTRO</code> with the desired ROS distribution - humble, jazzy or rolling):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> ./opt/ros/ROS_DISTRO/share/synapticon_ros2_control/bin/torque_control_executable YOUR_ETHERNET_INTERFACE

</code></pre></div></div>
<p>Before running other scripts, stop this one by CTRL+C (or wait - it will shutdown automatically after a while).</p>

<h5 id="2213-demo">2.2.1.3. Demo</h5>
<p>For turning the motor in different modes, five terminals are required and in all of them execute:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> <span class="nt">-i</span>
<span class="nb">source</span> /home/YOUR_USER/.bashrc

</code></pre></div></div>
<ul>
  <li>Terminal 1:</li>
</ul>

<p>If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control elevated_permissions_1_dof.launch.py

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control elevated_permissions_2_dof.launch.py

</code></pre></div></div>
<ul>
  <li>Terminal 2:</li>
</ul>

<p>If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control single_dof.launch.py eth_device:<span class="o">=</span>YOUR_ETHERNET_DEVICE

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control two_dof.launch.py eth_device:<span class="o">=</span>YOUR_ETHERNET_DEVICE

</code></pre></div></div>
<ul>
  <li>Terminal 3 - to show the running controllers</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 control list_controllers

</code></pre></div></div>
<p>(Information does not automatically refresh - it can be refreshed each M seconds 
using <code class="language-plaintext highlighter-rouge">watch -n M ros2 control list_controllers</code>)</p>
<ul>
  <li>Running motors with different controllers:</li>
</ul>

<p>CSV (Cyclic Sync Velocity) mode:</p>

<p>Terminal 4 to turn on the controller :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['forward_velocity_controller'], deactivate_controllers: []}"</span>

</code></pre></div></div>
<p>Terminal 5 to create a publisher:</p>

<p>If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_velocity_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100]

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_velocity_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100,100]

</code></pre></div></div>
<p>Stopping it: CTRL+C on Terminal 5 and in Terminal 4:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['quick_stop_controller'], deactivate_controllers: ['forward_velocity_controller']}"</span>

</code></pre></div></div>
<ul>
  <li>CSP (Cyclic Sync Position) mode:</li>
</ul>

<p>Terminal 4 to turn on the controller :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['forward_position_controller'], deactivate_controllers: [quick_stop_controller]}"</span>

</code></pre></div></div>
<p>Terminal 5 to create a publisher:</p>

<p>If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_position_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>140]

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_position_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>140, 140]

</code></pre></div></div>
<p>Stopping it: CTRL+C on Terminal 5 and in Terminal 4:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['quick_stop_controller'], deactivate_controllers: ['forward_position_controller']}"</span>

</code></pre></div></div>

<ul>
  <li>CST (Cyclic Sync Torque) mode:</li>
</ul>

<p>Terminal 4 to turn on the controller :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['forward_torque_controller'], deactivate_controllers: [quick_stop_controller]}"</span>	

</code></pre></div></div>
<p>Terminal 5 to create a publisher (value is in per mille of torque):</p>

<p>If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_torque_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100]	

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_torque_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100, 100]	

</code></pre></div></div>
<p>Stopping it: CTRL+C on Terminal 5 and in Terminal 4:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['quick_stop_controller'], deactivate_controllers: ['forward_torque_controller']}"</span>

</code></pre></div></div>
<h5 id="2214-running-without-sudo-optional">2.2.1.4. Running Without Sudo (Optional)</h5>

<p>To run the example without using <code class="language-plaintext highlighter-rouge">sudo</code>, create:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo touch</span> /etc/systemd/system/ros2_control_node.service

</code></pre></div></div>
<p>and use the text editor to paste the following into that file. Note that <code class="language-plaintext highlighter-rouge">YOUR_USER</code>, <code class="language-plaintext highlighter-rouge">ROS_DISTRO</code>, <code class="language-plaintext highlighter-rouge">pythonX.XX</code> and <code class="language-plaintext highlighter-rouge">elevated_permissions_X_dof.launch.py</code> must be replaced with the correct data.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>Unit]
<span class="nv">Description</span><span class="o">=</span>Launch ros2_control_node with socket permissions

<span class="o">[</span>Service]
<span class="nv">Type</span><span class="o">=</span>simple
<span class="nv">User</span><span class="o">=</span>YOUR_USER
<span class="nv">ExecStartPre</span><span class="o">=</span>/bin/bash <span class="nt">-c</span> <span class="s1">'source /opt/ros/ROS_DISTRO/setup.bash; source /home/YOUR_USER/.bashrc; source /home/YOUR_USER/ros2_ws/install/setup.bash'</span>
<span class="c"># Write the user environment to file, for debugging</span>
<span class="c">#ExecStartPre=/bin/bash -c 'env &gt; /home/YOUR_USER/Documents/ros_env_before_start.txt'</span>

<span class="c"># This is essentially a copy of my normal user env</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"AMENT_PREFIX_PATH=/home/YOUR_USER/ros2_ws/install/synapticon_ros2_control:/opt/ros/ROS_DISTRO"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"HOME=/home/YOUR_USER"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"LD_LIBRARY_PATH=/opt/ros/ROS_DISTRO/opt/rviz_ogre_vendor/lib:/opt/ros/ROS_DISTRO/lib/x86_64-linux-gnu:/opt/ros/ROS_DISTRO/lib"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"PATH=/opt/ros/ROS_DISTRO/bin:/usr/lib/ccache:/home/YOUR_USER/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/snap/bin"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"PYTHONPATH=/opt/ros/ROS_DISTRO/lib/pythonX.XX/site-packages:/opt/ros/ROS_DISTRO/local/lib/pythonX.XX/dist-packages"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"ROS_DISTRO=ROS_DISTRO"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"ROS_DOMAIN_ID=1"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"ROS_PYTHON_VERSION=3"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"ROS_VERSION=2"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"ROSCONSOLE_FORMAT=[</span><span class="k">${</span><span class="nv">severity</span><span class="k">}</span><span class="s2">] - </span><span class="k">${</span><span class="nv">node</span><span class="k">}</span><span class="s2">: [</span><span class="k">${</span><span class="nv">time</span><span class="k">}</span><span class="s2">] </span><span class="k">${</span><span class="nv">message</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"USER=YOUR_USER"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"USERNAME=YOUR_USER"</span>

<span class="nv">ExecStart</span><span class="o">=</span>/opt/ros/ROS_DISTRO/bin/ros2 launch synapticon_ros2_control elevated_permissions_X_dof.launch.py
<span class="nv">AmbientCapabilities</span><span class="o">=</span>CAP_NET_RAW

<span class="o">[</span>Install]
<span class="nv">WantedBy</span><span class="o">=</span>multi-user.target

</code></pre></div></div>
<p>Save the file, restart the daemon:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl daemon-reload

</code></pre></div></div>
<p>and start the service:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl restart ros2_control_node.service

</code></pre></div></div>
<p>To check the service status and see the ROS console logging:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl status ros2_control_node.service

</code></pre></div></div>
<p>Now, the example can be run by these two commands:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl restart ros2_control_node.service

</code></pre></div></div>
<p>and, if running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control single_dof.launch.py eth_device:<span class="o">=</span>YOUR_ETHERNET_DEVICE

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control two_dof.launch.py eth_device:<span class="o">=</span>YOUR_ETHERNET_DEVICE

</code></pre></div></div>
<p>Changing the controllers and publishing the desired position/velocity/torque can be now executed without sudo.
To stop the <code class="language-plaintext highlighter-rouge">ros2_control_node</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl stop ros2_control_node.service

</code></pre></div></div>

<h4 id="222-isolated-environment-docker">2.2.2. Isolated Environment (Docker)</h4>

<p>For users with different Linux distributions or those preferring an isolated environment, Docker can be used. Installation steps can be found in the <a href="https://docs.docker.com/engine/install/ubuntu/">Docker Documentation</a>. Installation instructions are also provided below:</p>

<h5 id="2221-docker-installation">2.2.2.1. Docker Installation</h5>

<p>Install Docker and add the user to the Docker group:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> docker.io
<span class="nb">sudo </span>groupadd docker
<span class="nb">sudo </span>usermod <span class="nt">-aG</span> docker <span class="nv">$USER</span>

</code></pre></div></div>
<h5 id="2222-synapticon-package-installation">2.2.2.2. Synapticon Package Installation</h5>
<p>With the following command, the Docker image can be pulled (replace <code class="language-plaintext highlighter-rouge">ROS_DISTRO</code> with the desired ROS_distribution - humble, jazzy or rolling):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull ghcr.io/synapticon/synapticon_ros2_control:ROS_DISTRO

</code></pre></div></div>
<p>To allow Docker containers to output the screen on your system, which is required for RViZ, execute this on the host system:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xhost +

</code></pre></div></div>
<p>For the first execution of the program, we build container named <code class="language-plaintext highlighter-rouge">ros2_container</code> from the downloaded docker image (replace <code class="language-plaintext highlighter-rouge">ROS_DISTRO</code> with the desired ROS_distribution - humble, jazzy or rolling):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-it</span> <span class="nt">-v</span> /var/run/dbus/system_bus_socket:/var/run/dbus/system_bus_socket <span class="nt">-v</span> /tmp/.X11-unix:/tmp/.X11-unix <span class="nt">--ipc</span><span class="o">=</span>host <span class="nt">-e</span> <span class="nv">DISPLAY</span><span class="o">=</span><span class="nv">$DISPLAY</span>  <span class="nt">--network</span><span class="o">=</span>host <span class="nt">--env</span> <span class="nv">QT_X11_NO_MITSHM</span><span class="o">=</span>1 <span class="nt">--privileged</span> <span class="nt">--name</span> ros2_container ghcr.io/synapticon/synapticon_ros2_control:ROS_DISTRO

</code></pre></div></div>
<p>Now, the container is running. For all other occurrences, start the container using:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker start ros2_container

</code></pre></div></div>
<p>For opening a new terminal in the running container, use:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker <span class="nb">exec</span> <span class="nt">-it</span> ros2_container bash

</code></pre></div></div>
<p>and, once it opens, source the ROS2 environment using</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> /root/.bashrc

</code></pre></div></div>
<p>To check if the master could be run and if the slaves are found, in the container terminal execute:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./install/synapticon_ros2_control/bin/torque_control_executable

</code></pre></div></div>
<p>Before running other scripts, stop this one by CTRL+C (or wait, it will shutdown automatically after a while).</p>

<h5 id="2223-demo">2.2.2.3. Demo</h5>

<p>Connect the Synapticon device configured with OBLAC Tools to your ethernet port as shown in Figure 1. For the demo, run five terminals in the container (<code class="language-plaintext highlighter-rouge">docker exec -it ros2_container bash</code> and <code class="language-plaintext highlighter-rouge">source /root/.bashrc</code>)</p>

<ul>
  <li>Terminal 1
If you are running the demo with one motor:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control elevated_permissions_1_dof.launch.py

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control elevated_permissions_2_dof.launch.py

</code></pre></div></div>
<ul>
  <li>Terminal 2 - this one will open RViZ. If it fails, xhost + was not executed on your host machine. By spinning the motor by hand, movement should be seen in RViZ.
If you are running the demo with one motor:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control single_dof.launch.py eth_device:<span class="o">=</span>YOUR_ETHERNET_DEVICE

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control two_dof.launch.py eth_device:<span class="o">=</span>YOUR_ETHERNET_DEVICE

</code></pre></div></div>
<ul>
  <li>Terminal 3 - to show the running controllers:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 control list_controllers

</code></pre></div></div>
<p>(Information does not automatically refresh - it can be refreshed each M seconds 
using <code class="language-plaintext highlighter-rouge">watch -n M ros2 control list_controllers</code>)</p>

<ul>
  <li>Running motors with different controllers:
CSV (Cyclic Sync Velocity) mode:</li>
</ul>

<p>Terminal 4 to turn on the controller :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['forward_velocity_controller'], deactivate_controllers: []}"</span>

</code></pre></div></div>
<p>Terminal 5 to create a publisher:
If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_velocity_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100]

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_velocity_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100,100]

</code></pre></div></div>
<p>Stopping it: CTRL+C on Terminal 5 and in Terminal 4:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['quick_stop_controller'], deactivate_controllers: ['forward_velocity_controller']}"</span>

</code></pre></div></div>
<ul>
  <li>CSP (Cyclic Sync Position) mode:</li>
</ul>

<p>Terminal 4 to turn on the controller :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['forward_position_controller'], deactivate_controllers: [quick_stop_controller]}"</span>

</code></pre></div></div>
<p>Terminal 5 to create a publisher:
If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_position_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>140]

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_position_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>140, 140]

</code></pre></div></div>
<p>Stopping it: CTRL+C on Terminal 5 and in Terminal 4:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['quick_stop_controller'], deactivate_controllers: ['forward_position_controller']}"</span>

</code></pre></div></div>

<ul>
  <li>CST (Cyclic Sync Torque) mode:</li>
</ul>

<p>Terminal 4 to turn on the controller :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['forward_torque_controller'], deactivate_controllers: [quick_stop_controller]}"</span>	

</code></pre></div></div>
<p>Terminal 5 to create a publisher (value is in per mille of torque):
If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_torque_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100]	

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_torque_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100, 100]	

</code></pre></div></div>
<p>Stopping it: CTRL+C on Terminal 5 and in Terminal 4:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['quick_stop_controller'], deactivate_controllers: ['forward_torque_controller']}"</span>

</code></pre></div></div>

<h2 id="3-disclaimer">3. Disclaimer</h2>

<p>This repository is an example of how to use SOMANET drives with ROS2 (humble, jazzy and rolling). It does not guarantee compatibility with the latest ROS versions or SOMANET firmware. The included code is for demonstration purposes only. Synapticon GmbH refuses any responsibility for any problem or damage by using the example configuration and code!</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/synapticon_ros2_control">synapticon_ros2_control</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/synapticon_ros2_control">synapticon_ros2_control</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-synapticon-synapticon_ros2_control
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-synapticon-synapticon_ros2_control" role="menuitem" tabindex="-1" href="/r/synapticon_ros2_control/github-synapticon-synapticon_ros2_control" data="github-synapticon-synapticon_ros2_control">
                    <span class="glyphicon glyphicon-star"></span>
                    github-synapticon-synapticon_ros2_control
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">A ros2_control interface for Synapticon motor drivers</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/synapticon/synapticon_ros2_control.git">https://github.com/synapticon/synapticon_ros2_control.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-03-27
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/synapticon_ros2_control/#jazzy-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/synapticon_ros2_control/#jazzy-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/synapticon_ros2_control/#jazzy-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/synapticon_ros2_control">synapticon_ros2_control</a></td>
                    <td>0.1.2</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="controlling-synapticon-devices-using-the-ros2-package">Controlling Synapticon Devices Using the ROS2 Package</h1>

<h2 id="description">Description</h2>

<p>This repository provides an example of how to use Synapticon drives (SOMANET Node, SOMANET Circulo and SOMANET Integro) in CSP (Cyclic Sync Position), CSV (Cyclic Sync Velocity), and CST (Cyclic Sync Torque) modes using the ROS2 package. It utilizes <code class="language-plaintext highlighter-rouge">SOEM Ethercat Master</code>. The ROS 2 package was originally developed by Andy Zelenak. Synapticon GmbH added examples, simulation, and extended instructions for easier installation, as well as support for containerization using Docker.</p>

<p><img src="https://raw.githubusercontent.com/synapticon/synapticon_ros2_control/main/doc/images/rviz.png" alt="RVIZ Screenshot of dual motor test setup"></p>

<h2 id="table-of-contents">Table of Contents</h2>

<ol>
  <li><a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#1-intention">Intention</a></li>
  <li>
<a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2-overview">Overview</a>
    <ul>
      <li>2.1. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#21-hardware">Hardware</a>
</li>
      <li>2.2. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#22-software">Software</a>
        <ul>
          <li>2.2.1. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#221-ubuntu-with-ros2">Ubuntu with ROS2</a>
            <ul>
              <li>2.2.1.1. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2211-ros2-installation">ROS2 Installation</a>
</li>
              <li>2.2.1.2. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2212-synapticon-package-installation">Synapticon Package Installation</a>
</li>
              <li>2.2.1.3. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2213-demo">Demo</a>
</li>
              <li>2.2.1.4. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2214-running-without-sudo-optional">Running Without Sudo (Optional)</a>
</li>
            </ul>
          </li>
          <li>2.2.2. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#222-isolated-environment-docker">Isolated Environment (Docker)</a>
            <ul>
              <li>2.2.2.1. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2221-docker-installation">Docker Installation</a>
</li>
              <li>2.2.2.2. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2222-synapticon-package-installation">Synapticon Package Installation</a>
</li>
              <li>2.2.2.3. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2223-demo">Demo</a>
</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#3-disclaimer">Disclaimer</a></li>
</ol>

<h2 id="1-intention">1. Intention</h2>

<p>The intention of this document is to provide instructions on how to quickly begin Synapticon Devices with the ROS2 package using the Synapticon library. Additionally, in order to make it compatible with other Linux distributions, corresponding Docker images are provided.</p>

<h2 id="2-overview">2. Overview</h2>

<p>The following subsections briefly demonstrate hardware and software required for using Synapticon devices with this package.</p>

<h3 id="21-hardware">2.1. Hardware</h3>

<p>In the figure below, a block diagram of the wiring used in this setup is provided. Drives can be used once the parameters are configured with <a href="https://www.synapticon.com/en/products/oblac-drives">OBLAC tools</a>. Detailed instructions and wiring diagrams for all the devices are available on the <a href="https://www.synapticon.com/en/support/dokumentation">Synapticon Web site</a> documentation. The package allows daisy chaining of all the Synapticon drives in any order as indicated in the image below.</p>

<p><img src="https://raw.githubusercontent.com/synapticon/synapticon_ros2_control/main/doc/images/hardware.jpg" alt="Hardware layout"></p>

<h3 id="22-software">2.2. Software</h3>

<p>In this demo, two scenarios are considered:</p>
<ul>
  <li>Ubuntu 22.04 or 24.04 is installed on the system and ROS2 (humble, rolling or jazzy) together with the Synapticon package will be installed on that system</li>
  <li>The user wants to run the package in an isolated environment (Docker)</li>
</ul>

<h4 id="221-ubuntu-with-ros2">2.2.1. Ubuntu with ROS2</h4>

<p>To install ROS2 on your Ubuntu machine, follow the steps from <a href="https://docs.ros.org/en/humble/Installation/Ubuntu-Install-Debs.html">ros.org</a> and install the full version. The minimal version can also be installed; however, if simulation is desired, RViZ must additionally be installed.  After the installation, some configuration steps as described <a href="https://docs.ros.org/en/humble/Tutorials/Beginner-CLI-Tools/Configuring-ROS2-Environment.html">here</a> are required. For the completeness of the demo, the commands in the following subsection are copied from the above website and should be executed for the ROS2 installation.</p>

<h5 id="2211-ros2-installation">2.2.1.1. ROS2 Installation</h5>

<p>To ensure that locale supports UTF-8, run the following commands:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt <span class="nb">install </span>locales
<span class="nb">sudo </span>locale-gen en_US en_US.UTF-8
<span class="nb">sudo </span>update-locale <span class="nv">LC_ALL</span><span class="o">=</span>en_US.UTF-8 <span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8
<span class="nb">export </span><span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8

</code></pre></div></div>
<p>Enable Ubuntu Universe repository:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>software-properties-common
<span class="nb">sudo </span>add-apt-repository universe

</code></pre></div></div>
<p>Add GPG key:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt <span class="nb">install </span>curl <span class="nt">-y</span>
<span class="nb">sudo </span>curl <span class="nt">-sSL</span> https://raw.githubusercontent.com/ros/rosdistro/master/ros.key <span class="nt">-o</span> /usr/share/keyrings/ros-archive-keyring.gpg

</code></pre></div></div>
<p>Add repository to the sources:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"deb [arch=</span><span class="si">$(</span>dpkg <span class="nt">--print-architecture</span><span class="si">)</span><span class="s2"> signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu </span><span class="si">$(</span><span class="nb">.</span> /etc/os-release <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="nv">$UBUNTU_CODENAME</span><span class="si">)</span><span class="s2"> main"</span> | <span class="nb">sudo tee</span> /etc/apt/sources.list.d/ros2.list <span class="o">&gt;</span> /dev/null

</code></pre></div></div>
<p>Update apt cache:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update

</code></pre></div></div>
<p>This command updates the packages on your system. Note that if the commands after this work, skip this step.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt upgrade

</code></pre></div></div>
<p>Finally, install ROS and compilers (replace <code class="language-plaintext highlighter-rouge">ROS_DISTRO</code> with the desired ROS distribution - humble, jazzy or rolling):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>ros-ROS_DISTRO-desktop
<span class="nb">sudo </span>apt <span class="nb">install </span>ros-dev-tools

</code></pre></div></div>
<p>After the installation is complete, add the following line to the end of <code class="language-plaintext highlighter-rouge">/home/USER/.bashrc</code> file (replace <code class="language-plaintext highlighter-rouge">ROS_DISTRO</code> with the desired ROS distribution - humble, jazzy or rolling):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> /opt/ros/ROS_DISTRO/setup.bash

</code></pre></div></div>
<p>In order for ROS2 to not interfere with the communication on other ports, we set the Domain ID (detailed information is available <a href="https://docs.ros.org/en/humble/Concepts/Intermediate/About-Domain-ID.html">here</a>).  For this demo, we just used ROS_DOMAIN_ID=1. To do so, add the following at the end of <code class="language-plaintext highlighter-rouge">/home/$USER/.bashrc</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">ROS_DOMAIN_ID</span><span class="o">=</span>1

</code></pre></div></div>
<p>After this, close and reopen all your terminals.
To verify the installation, open two terminals and run:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run demo_nodes_cpp talker
ros2 run demo_nodes_py listener

</code></pre></div></div>
<p>If the nodes are communicating, the installation was successful.</p>

<h5 id="2212-synapticon-package-installation">2.2.1.2. Synapticon Package Installation</h5>

<p><strong>OPTION 1:</strong> Installing from Source</p>

<p>Create an ROS2 workspace:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> <span class="nt">-p</span> ~/ros2_ws/src
<span class="nb">cd</span> ~/ros2_ws/src

</code></pre></div></div>
<p>Clone the Synapticon package:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/synapticon/synapticon_ros2_control

</code></pre></div></div>
<p>Install build tools:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>python3-colcon-common-extensions

</code></pre></div></div>
<p>Build the package:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/ros2_ws
rosdep <span class="nb">install</span> <span class="nt">--from-paths</span> src <span class="nt">-y</span> <span class="nt">--ignore-src</span>
colcon build

</code></pre></div></div>
<p>Additionally, you can source the workspace by adding the following line to the <code class="language-plaintext highlighter-rouge">/home/USER/.bashrc</code> file above the line where the ROS installation was sourced (above this line: <code class="language-plaintext highlighter-rouge">source /opt/ros/ROS_DISTRO/setup.bash</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> /home/USER/ros2_ws/install/setup.bash

</code></pre></div></div>

<p><strong>OPTION 2:</strong> Binary Installation</p>

<p>If required, add the ROS repository (this occurs only once):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>software-properties-common 
<span class="nb">sudo </span>add-apt-repository universe 
<span class="nb">sudo </span>apt update

</code></pre></div></div>
<p>Install the Synapticon package (replace ROS_DISTRO with the ROS distribution you want - humble, jazzy or rolling):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>ros-ROS_DISTRO-synapticon-ros2-control

</code></pre></div></div>

<p>Make sure rosdep is initialized and updated:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>rosdep init 
rosdep update

</code></pre></div></div>

<p>Install its dependencies:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rosdep <span class="nb">install </span>synapticon_ros2_control

</code></pre></div></div>
<p>The package will get installed to <code class="language-plaintext highlighter-rouge">/opt/ros/ROS_DISTRO/share/synapticon_ros2_control/</code>.</p>

<p><strong>VERIFICATION</strong></p>

<p>The ethernet device name, to which the drive is connected, is required. This could be checked with the <code class="language-plaintext highlighter-rouge">ifconfig</code> command. Ethernet adapters usually start with <code class="language-plaintext highlighter-rouge">en</code>. To check if the master could be run and if the slaves are found, execute the following  in the terminal (replace <code class="language-plaintext highlighter-rouge">YOUR_ETHERNET_INTERFACE</code> with the one found with <code class="language-plaintext highlighter-rouge">ifconfig</code>). 
If you installed from source:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> ./home/<span class="nv">$USER</span>/ros2_ws/install/synapticon_ros2_control/bin/torque_control_executable YOUR_ETHERNET_INTERFACE

</code></pre></div></div>
<p>or if you installed using the binary installation (replace <code class="language-plaintext highlighter-rouge">ROS_DISTRO</code> with the desired ROS distribution - humble, jazzy or rolling):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> ./opt/ros/ROS_DISTRO/share/synapticon_ros2_control/bin/torque_control_executable YOUR_ETHERNET_INTERFACE

</code></pre></div></div>
<p>Before running other scripts, stop this one by CTRL+C (or wait - it will shutdown automatically after a while).</p>

<h5 id="2213-demo">2.2.1.3. Demo</h5>
<p>For turning the motor in different modes, five terminals are required and in all of them execute:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> <span class="nt">-i</span>
<span class="nb">source</span> /home/YOUR_USER/.bashrc

</code></pre></div></div>
<ul>
  <li>Terminal 1:</li>
</ul>

<p>If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control elevated_permissions_1_dof.launch.py

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control elevated_permissions_2_dof.launch.py

</code></pre></div></div>
<ul>
  <li>Terminal 2:</li>
</ul>

<p>If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control single_dof.launch.py eth_device:<span class="o">=</span>YOUR_ETHERNET_DEVICE

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control two_dof.launch.py eth_device:<span class="o">=</span>YOUR_ETHERNET_DEVICE

</code></pre></div></div>
<ul>
  <li>Terminal 3 - to show the running controllers</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 control list_controllers

</code></pre></div></div>
<p>(Information does not automatically refresh - it can be refreshed each M seconds 
using <code class="language-plaintext highlighter-rouge">watch -n M ros2 control list_controllers</code>)</p>
<ul>
  <li>Running motors with different controllers:</li>
</ul>

<p>CSV (Cyclic Sync Velocity) mode:</p>

<p>Terminal 4 to turn on the controller :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['forward_velocity_controller'], deactivate_controllers: []}"</span>

</code></pre></div></div>
<p>Terminal 5 to create a publisher:</p>

<p>If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_velocity_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100]

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_velocity_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100,100]

</code></pre></div></div>
<p>Stopping it: CTRL+C on Terminal 5 and in Terminal 4:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['quick_stop_controller'], deactivate_controllers: ['forward_velocity_controller']}"</span>

</code></pre></div></div>
<ul>
  <li>CSP (Cyclic Sync Position) mode:</li>
</ul>

<p>Terminal 4 to turn on the controller :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['forward_position_controller'], deactivate_controllers: [quick_stop_controller]}"</span>

</code></pre></div></div>
<p>Terminal 5 to create a publisher:</p>

<p>If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_position_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>140]

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_position_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>140, 140]

</code></pre></div></div>
<p>Stopping it: CTRL+C on Terminal 5 and in Terminal 4:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['quick_stop_controller'], deactivate_controllers: ['forward_position_controller']}"</span>

</code></pre></div></div>

<ul>
  <li>CST (Cyclic Sync Torque) mode:</li>
</ul>

<p>Terminal 4 to turn on the controller :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['forward_torque_controller'], deactivate_controllers: [quick_stop_controller]}"</span>	

</code></pre></div></div>
<p>Terminal 5 to create a publisher (value is in per mille of torque):</p>

<p>If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_torque_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100]	

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_torque_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100, 100]	

</code></pre></div></div>
<p>Stopping it: CTRL+C on Terminal 5 and in Terminal 4:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['quick_stop_controller'], deactivate_controllers: ['forward_torque_controller']}"</span>

</code></pre></div></div>
<h5 id="2214-running-without-sudo-optional">2.2.1.4. Running Without Sudo (Optional)</h5>

<p>To run the example without using <code class="language-plaintext highlighter-rouge">sudo</code>, create:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo touch</span> /etc/systemd/system/ros2_control_node.service

</code></pre></div></div>
<p>and use the text editor to paste the following into that file. Note that <code class="language-plaintext highlighter-rouge">YOUR_USER</code>, <code class="language-plaintext highlighter-rouge">ROS_DISTRO</code>, <code class="language-plaintext highlighter-rouge">pythonX.XX</code> and <code class="language-plaintext highlighter-rouge">elevated_permissions_X_dof.launch.py</code> must be replaced with the correct data.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>Unit]
<span class="nv">Description</span><span class="o">=</span>Launch ros2_control_node with socket permissions

<span class="o">[</span>Service]
<span class="nv">Type</span><span class="o">=</span>simple
<span class="nv">User</span><span class="o">=</span>YOUR_USER
<span class="nv">ExecStartPre</span><span class="o">=</span>/bin/bash <span class="nt">-c</span> <span class="s1">'source /opt/ros/ROS_DISTRO/setup.bash; source /home/YOUR_USER/.bashrc; source /home/YOUR_USER/ros2_ws/install/setup.bash'</span>
<span class="c"># Write the user environment to file, for debugging</span>
<span class="c">#ExecStartPre=/bin/bash -c 'env &gt; /home/YOUR_USER/Documents/ros_env_before_start.txt'</span>

<span class="c"># This is essentially a copy of my normal user env</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"AMENT_PREFIX_PATH=/home/YOUR_USER/ros2_ws/install/synapticon_ros2_control:/opt/ros/ROS_DISTRO"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"HOME=/home/YOUR_USER"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"LD_LIBRARY_PATH=/opt/ros/ROS_DISTRO/opt/rviz_ogre_vendor/lib:/opt/ros/ROS_DISTRO/lib/x86_64-linux-gnu:/opt/ros/ROS_DISTRO/lib"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"PATH=/opt/ros/ROS_DISTRO/bin:/usr/lib/ccache:/home/YOUR_USER/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/snap/bin"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"PYTHONPATH=/opt/ros/ROS_DISTRO/lib/pythonX.XX/site-packages:/opt/ros/ROS_DISTRO/local/lib/pythonX.XX/dist-packages"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"ROS_DISTRO=ROS_DISTRO"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"ROS_DOMAIN_ID=1"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"ROS_PYTHON_VERSION=3"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"ROS_VERSION=2"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"ROSCONSOLE_FORMAT=[</span><span class="k">${</span><span class="nv">severity</span><span class="k">}</span><span class="s2">] - </span><span class="k">${</span><span class="nv">node</span><span class="k">}</span><span class="s2">: [</span><span class="k">${</span><span class="nv">time</span><span class="k">}</span><span class="s2">] </span><span class="k">${</span><span class="nv">message</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"USER=YOUR_USER"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"USERNAME=YOUR_USER"</span>

<span class="nv">ExecStart</span><span class="o">=</span>/opt/ros/ROS_DISTRO/bin/ros2 launch synapticon_ros2_control elevated_permissions_X_dof.launch.py
<span class="nv">AmbientCapabilities</span><span class="o">=</span>CAP_NET_RAW

<span class="o">[</span>Install]
<span class="nv">WantedBy</span><span class="o">=</span>multi-user.target

</code></pre></div></div>
<p>Save the file, restart the daemon:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl daemon-reload

</code></pre></div></div>
<p>and start the service:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl restart ros2_control_node.service

</code></pre></div></div>
<p>To check the service status and see the ROS console logging:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl status ros2_control_node.service

</code></pre></div></div>
<p>Now, the example can be run by these two commands:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl restart ros2_control_node.service

</code></pre></div></div>
<p>and, if running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control single_dof.launch.py eth_device:<span class="o">=</span>YOUR_ETHERNET_DEVICE

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control two_dof.launch.py eth_device:<span class="o">=</span>YOUR_ETHERNET_DEVICE

</code></pre></div></div>
<p>Changing the controllers and publishing the desired position/velocity/torque can be now executed without sudo.
To stop the <code class="language-plaintext highlighter-rouge">ros2_control_node</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl stop ros2_control_node.service

</code></pre></div></div>

<h4 id="222-isolated-environment-docker">2.2.2. Isolated Environment (Docker)</h4>

<p>For users with different Linux distributions or those preferring an isolated environment, Docker can be used. Installation steps can be found in the <a href="https://docs.docker.com/engine/install/ubuntu/">Docker Documentation</a>. Installation instructions are also provided below:</p>

<h5 id="2221-docker-installation">2.2.2.1. Docker Installation</h5>

<p>Install Docker and add the user to the Docker group:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> docker.io
<span class="nb">sudo </span>groupadd docker
<span class="nb">sudo </span>usermod <span class="nt">-aG</span> docker <span class="nv">$USER</span>

</code></pre></div></div>
<h5 id="2222-synapticon-package-installation">2.2.2.2. Synapticon Package Installation</h5>
<p>With the following command, the Docker image can be pulled (replace <code class="language-plaintext highlighter-rouge">ROS_DISTRO</code> with the desired ROS_distribution - humble, jazzy or rolling):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull ghcr.io/synapticon/synapticon_ros2_control:ROS_DISTRO

</code></pre></div></div>
<p>To allow Docker containers to output the screen on your system, which is required for RViZ, execute this on the host system:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xhost +

</code></pre></div></div>
<p>For the first execution of the program, we build container named <code class="language-plaintext highlighter-rouge">ros2_container</code> from the downloaded docker image (replace <code class="language-plaintext highlighter-rouge">ROS_DISTRO</code> with the desired ROS_distribution - humble, jazzy or rolling):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-it</span> <span class="nt">-v</span> /var/run/dbus/system_bus_socket:/var/run/dbus/system_bus_socket <span class="nt">-v</span> /tmp/.X11-unix:/tmp/.X11-unix <span class="nt">--ipc</span><span class="o">=</span>host <span class="nt">-e</span> <span class="nv">DISPLAY</span><span class="o">=</span><span class="nv">$DISPLAY</span>  <span class="nt">--network</span><span class="o">=</span>host <span class="nt">--env</span> <span class="nv">QT_X11_NO_MITSHM</span><span class="o">=</span>1 <span class="nt">--privileged</span> <span class="nt">--name</span> ros2_container ghcr.io/synapticon/synapticon_ros2_control:ROS_DISTRO

</code></pre></div></div>
<p>Now, the container is running. For all other occurrences, start the container using:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker start ros2_container

</code></pre></div></div>
<p>For opening a new terminal in the running container, use:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker <span class="nb">exec</span> <span class="nt">-it</span> ros2_container bash

</code></pre></div></div>
<p>and, once it opens, source the ROS2 environment using</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> /root/.bashrc

</code></pre></div></div>
<p>To check if the master could be run and if the slaves are found, in the container terminal execute:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./install/synapticon_ros2_control/bin/torque_control_executable

</code></pre></div></div>
<p>Before running other scripts, stop this one by CTRL+C (or wait, it will shutdown automatically after a while).</p>

<h5 id="2223-demo">2.2.2.3. Demo</h5>

<p>Connect the Synapticon device configured with OBLAC Tools to your ethernet port as shown in Figure 1. For the demo, run five terminals in the container (<code class="language-plaintext highlighter-rouge">docker exec -it ros2_container bash</code> and <code class="language-plaintext highlighter-rouge">source /root/.bashrc</code>)</p>

<ul>
  <li>Terminal 1
If you are running the demo with one motor:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control elevated_permissions_1_dof.launch.py

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control elevated_permissions_2_dof.launch.py

</code></pre></div></div>
<ul>
  <li>Terminal 2 - this one will open RViZ. If it fails, xhost + was not executed on your host machine. By spinning the motor by hand, movement should be seen in RViZ.
If you are running the demo with one motor:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control single_dof.launch.py eth_device:<span class="o">=</span>YOUR_ETHERNET_DEVICE

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control two_dof.launch.py eth_device:<span class="o">=</span>YOUR_ETHERNET_DEVICE

</code></pre></div></div>
<ul>
  <li>Terminal 3 - to show the running controllers:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 control list_controllers

</code></pre></div></div>
<p>(Information does not automatically refresh - it can be refreshed each M seconds 
using <code class="language-plaintext highlighter-rouge">watch -n M ros2 control list_controllers</code>)</p>

<ul>
  <li>Running motors with different controllers:
CSV (Cyclic Sync Velocity) mode:</li>
</ul>

<p>Terminal 4 to turn on the controller :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['forward_velocity_controller'], deactivate_controllers: []}"</span>

</code></pre></div></div>
<p>Terminal 5 to create a publisher:
If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_velocity_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100]

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_velocity_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100,100]

</code></pre></div></div>
<p>Stopping it: CTRL+C on Terminal 5 and in Terminal 4:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['quick_stop_controller'], deactivate_controllers: ['forward_velocity_controller']}"</span>

</code></pre></div></div>
<ul>
  <li>CSP (Cyclic Sync Position) mode:</li>
</ul>

<p>Terminal 4 to turn on the controller :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['forward_position_controller'], deactivate_controllers: [quick_stop_controller]}"</span>

</code></pre></div></div>
<p>Terminal 5 to create a publisher:
If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_position_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>140]

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_position_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>140, 140]

</code></pre></div></div>
<p>Stopping it: CTRL+C on Terminal 5 and in Terminal 4:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['quick_stop_controller'], deactivate_controllers: ['forward_position_controller']}"</span>

</code></pre></div></div>

<ul>
  <li>CST (Cyclic Sync Torque) mode:</li>
</ul>

<p>Terminal 4 to turn on the controller :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['forward_torque_controller'], deactivate_controllers: [quick_stop_controller]}"</span>	

</code></pre></div></div>
<p>Terminal 5 to create a publisher (value is in per mille of torque):
If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_torque_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100]	

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_torque_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100, 100]	

</code></pre></div></div>
<p>Stopping it: CTRL+C on Terminal 5 and in Terminal 4:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['quick_stop_controller'], deactivate_controllers: ['forward_torque_controller']}"</span>

</code></pre></div></div>

<h2 id="3-disclaimer">3. Disclaimer</h2>

<p>This repository is an example of how to use SOMANET drives with ROS2 (humble, jazzy and rolling). It does not guarantee compatibility with the latest ROS versions or SOMANET firmware. The included code is for demonstration purposes only. Synapticon GmbH refuses any responsibility for any problem or damage by using the example configuration and code!</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/synapticon_ros2_control">synapticon_ros2_control</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/synapticon_ros2_control">synapticon_ros2_control</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-synapticon-synapticon_ros2_control
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-synapticon-synapticon_ros2_control" role="menuitem" tabindex="-1" href="/r/synapticon_ros2_control/github-synapticon-synapticon_ros2_control" data="github-synapticon-synapticon_ros2_control">
                    <span class="glyphicon glyphicon-star"></span>
                    github-synapticon-synapticon_ros2_control
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">A ros2_control interface for Synapticon motor drivers</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/synapticon/synapticon_ros2_control.git">https://github.com/synapticon/synapticon_ros2_control.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-03-27
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/synapticon_ros2_control/#kilted-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/synapticon_ros2_control/#kilted-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/synapticon_ros2_control/#kilted-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/synapticon_ros2_control">synapticon_ros2_control</a></td>
                    <td>0.1.2</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="controlling-synapticon-devices-using-the-ros2-package">Controlling Synapticon Devices Using the ROS2 Package</h1>

<h2 id="description">Description</h2>

<p>This repository provides an example of how to use Synapticon drives (SOMANET Node, SOMANET Circulo and SOMANET Integro) in CSP (Cyclic Sync Position), CSV (Cyclic Sync Velocity), and CST (Cyclic Sync Torque) modes using the ROS2 package. It utilizes <code class="language-plaintext highlighter-rouge">SOEM Ethercat Master</code>. The ROS 2 package was originally developed by Andy Zelenak. Synapticon GmbH added examples, simulation, and extended instructions for easier installation, as well as support for containerization using Docker.</p>

<p><img src="https://raw.githubusercontent.com/synapticon/synapticon_ros2_control/main/doc/images/rviz.png" alt="RVIZ Screenshot of dual motor test setup"></p>

<h2 id="table-of-contents">Table of Contents</h2>

<ol>
  <li><a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#1-intention">Intention</a></li>
  <li>
<a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2-overview">Overview</a>
    <ul>
      <li>2.1. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#21-hardware">Hardware</a>
</li>
      <li>2.2. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#22-software">Software</a>
        <ul>
          <li>2.2.1. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#221-ubuntu-with-ros2">Ubuntu with ROS2</a>
            <ul>
              <li>2.2.1.1. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2211-ros2-installation">ROS2 Installation</a>
</li>
              <li>2.2.1.2. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2212-synapticon-package-installation">Synapticon Package Installation</a>
</li>
              <li>2.2.1.3. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2213-demo">Demo</a>
</li>
              <li>2.2.1.4. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2214-running-without-sudo-optional">Running Without Sudo (Optional)</a>
</li>
            </ul>
          </li>
          <li>2.2.2. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#222-isolated-environment-docker">Isolated Environment (Docker)</a>
            <ul>
              <li>2.2.2.1. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2221-docker-installation">Docker Installation</a>
</li>
              <li>2.2.2.2. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2222-synapticon-package-installation">Synapticon Package Installation</a>
</li>
              <li>2.2.2.3. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2223-demo">Demo</a>
</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#3-disclaimer">Disclaimer</a></li>
</ol>

<h2 id="1-intention">1. Intention</h2>

<p>The intention of this document is to provide instructions on how to quickly begin Synapticon Devices with the ROS2 package using the Synapticon library. Additionally, in order to make it compatible with other Linux distributions, corresponding Docker images are provided.</p>

<h2 id="2-overview">2. Overview</h2>

<p>The following subsections briefly demonstrate hardware and software required for using Synapticon devices with this package.</p>

<h3 id="21-hardware">2.1. Hardware</h3>

<p>In the figure below, a block diagram of the wiring used in this setup is provided. Drives can be used once the parameters are configured with <a href="https://www.synapticon.com/en/products/oblac-drives">OBLAC tools</a>. Detailed instructions and wiring diagrams for all the devices are available on the <a href="https://www.synapticon.com/en/support/dokumentation">Synapticon Web site</a> documentation. The package allows daisy chaining of all the Synapticon drives in any order as indicated in the image below.</p>

<p><img src="https://raw.githubusercontent.com/synapticon/synapticon_ros2_control/main/doc/images/hardware.jpg" alt="Hardware layout"></p>

<h3 id="22-software">2.2. Software</h3>

<p>In this demo, two scenarios are considered:</p>
<ul>
  <li>Ubuntu 22.04 or 24.04 is installed on the system and ROS2 (humble, rolling or jazzy) together with the Synapticon package will be installed on that system</li>
  <li>The user wants to run the package in an isolated environment (Docker)</li>
</ul>

<h4 id="221-ubuntu-with-ros2">2.2.1. Ubuntu with ROS2</h4>

<p>To install ROS2 on your Ubuntu machine, follow the steps from <a href="https://docs.ros.org/en/humble/Installation/Ubuntu-Install-Debs.html">ros.org</a> and install the full version. The minimal version can also be installed; however, if simulation is desired, RViZ must additionally be installed.  After the installation, some configuration steps as described <a href="https://docs.ros.org/en/humble/Tutorials/Beginner-CLI-Tools/Configuring-ROS2-Environment.html">here</a> are required. For the completeness of the demo, the commands in the following subsection are copied from the above website and should be executed for the ROS2 installation.</p>

<h5 id="2211-ros2-installation">2.2.1.1. ROS2 Installation</h5>

<p>To ensure that locale supports UTF-8, run the following commands:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt <span class="nb">install </span>locales
<span class="nb">sudo </span>locale-gen en_US en_US.UTF-8
<span class="nb">sudo </span>update-locale <span class="nv">LC_ALL</span><span class="o">=</span>en_US.UTF-8 <span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8
<span class="nb">export </span><span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8

</code></pre></div></div>
<p>Enable Ubuntu Universe repository:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>software-properties-common
<span class="nb">sudo </span>add-apt-repository universe

</code></pre></div></div>
<p>Add GPG key:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt <span class="nb">install </span>curl <span class="nt">-y</span>
<span class="nb">sudo </span>curl <span class="nt">-sSL</span> https://raw.githubusercontent.com/ros/rosdistro/master/ros.key <span class="nt">-o</span> /usr/share/keyrings/ros-archive-keyring.gpg

</code></pre></div></div>
<p>Add repository to the sources:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"deb [arch=</span><span class="si">$(</span>dpkg <span class="nt">--print-architecture</span><span class="si">)</span><span class="s2"> signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu </span><span class="si">$(</span><span class="nb">.</span> /etc/os-release <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="nv">$UBUNTU_CODENAME</span><span class="si">)</span><span class="s2"> main"</span> | <span class="nb">sudo tee</span> /etc/apt/sources.list.d/ros2.list <span class="o">&gt;</span> /dev/null

</code></pre></div></div>
<p>Update apt cache:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update

</code></pre></div></div>
<p>This command updates the packages on your system. Note that if the commands after this work, skip this step.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt upgrade

</code></pre></div></div>
<p>Finally, install ROS and compilers (replace <code class="language-plaintext highlighter-rouge">ROS_DISTRO</code> with the desired ROS distribution - humble, jazzy or rolling):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>ros-ROS_DISTRO-desktop
<span class="nb">sudo </span>apt <span class="nb">install </span>ros-dev-tools

</code></pre></div></div>
<p>After the installation is complete, add the following line to the end of <code class="language-plaintext highlighter-rouge">/home/USER/.bashrc</code> file (replace <code class="language-plaintext highlighter-rouge">ROS_DISTRO</code> with the desired ROS distribution - humble, jazzy or rolling):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> /opt/ros/ROS_DISTRO/setup.bash

</code></pre></div></div>
<p>In order for ROS2 to not interfere with the communication on other ports, we set the Domain ID (detailed information is available <a href="https://docs.ros.org/en/humble/Concepts/Intermediate/About-Domain-ID.html">here</a>).  For this demo, we just used ROS_DOMAIN_ID=1. To do so, add the following at the end of <code class="language-plaintext highlighter-rouge">/home/$USER/.bashrc</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">ROS_DOMAIN_ID</span><span class="o">=</span>1

</code></pre></div></div>
<p>After this, close and reopen all your terminals.
To verify the installation, open two terminals and run:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run demo_nodes_cpp talker
ros2 run demo_nodes_py listener

</code></pre></div></div>
<p>If the nodes are communicating, the installation was successful.</p>

<h5 id="2212-synapticon-package-installation">2.2.1.2. Synapticon Package Installation</h5>

<p><strong>OPTION 1:</strong> Installing from Source</p>

<p>Create an ROS2 workspace:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> <span class="nt">-p</span> ~/ros2_ws/src
<span class="nb">cd</span> ~/ros2_ws/src

</code></pre></div></div>
<p>Clone the Synapticon package:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/synapticon/synapticon_ros2_control

</code></pre></div></div>
<p>Install build tools:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>python3-colcon-common-extensions

</code></pre></div></div>
<p>Build the package:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/ros2_ws
rosdep <span class="nb">install</span> <span class="nt">--from-paths</span> src <span class="nt">-y</span> <span class="nt">--ignore-src</span>
colcon build

</code></pre></div></div>
<p>Additionally, you can source the workspace by adding the following line to the <code class="language-plaintext highlighter-rouge">/home/USER/.bashrc</code> file above the line where the ROS installation was sourced (above this line: <code class="language-plaintext highlighter-rouge">source /opt/ros/ROS_DISTRO/setup.bash</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> /home/USER/ros2_ws/install/setup.bash

</code></pre></div></div>

<p><strong>OPTION 2:</strong> Binary Installation</p>

<p>If required, add the ROS repository (this occurs only once):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>software-properties-common 
<span class="nb">sudo </span>add-apt-repository universe 
<span class="nb">sudo </span>apt update

</code></pre></div></div>
<p>Install the Synapticon package (replace ROS_DISTRO with the ROS distribution you want - humble, jazzy or rolling):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>ros-ROS_DISTRO-synapticon-ros2-control

</code></pre></div></div>

<p>Make sure rosdep is initialized and updated:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>rosdep init 
rosdep update

</code></pre></div></div>

<p>Install its dependencies:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rosdep <span class="nb">install </span>synapticon_ros2_control

</code></pre></div></div>
<p>The package will get installed to <code class="language-plaintext highlighter-rouge">/opt/ros/ROS_DISTRO/share/synapticon_ros2_control/</code>.</p>

<p><strong>VERIFICATION</strong></p>

<p>The ethernet device name, to which the drive is connected, is required. This could be checked with the <code class="language-plaintext highlighter-rouge">ifconfig</code> command. Ethernet adapters usually start with <code class="language-plaintext highlighter-rouge">en</code>. To check if the master could be run and if the slaves are found, execute the following  in the terminal (replace <code class="language-plaintext highlighter-rouge">YOUR_ETHERNET_INTERFACE</code> with the one found with <code class="language-plaintext highlighter-rouge">ifconfig</code>). 
If you installed from source:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> ./home/<span class="nv">$USER</span>/ros2_ws/install/synapticon_ros2_control/bin/torque_control_executable YOUR_ETHERNET_INTERFACE

</code></pre></div></div>
<p>or if you installed using the binary installation (replace <code class="language-plaintext highlighter-rouge">ROS_DISTRO</code> with the desired ROS distribution - humble, jazzy or rolling):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> ./opt/ros/ROS_DISTRO/share/synapticon_ros2_control/bin/torque_control_executable YOUR_ETHERNET_INTERFACE

</code></pre></div></div>
<p>Before running other scripts, stop this one by CTRL+C (or wait - it will shutdown automatically after a while).</p>

<h5 id="2213-demo">2.2.1.3. Demo</h5>
<p>For turning the motor in different modes, five terminals are required and in all of them execute:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> <span class="nt">-i</span>
<span class="nb">source</span> /home/YOUR_USER/.bashrc

</code></pre></div></div>
<ul>
  <li>Terminal 1:</li>
</ul>

<p>If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control elevated_permissions_1_dof.launch.py

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control elevated_permissions_2_dof.launch.py

</code></pre></div></div>
<ul>
  <li>Terminal 2:</li>
</ul>

<p>If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control single_dof.launch.py eth_device:<span class="o">=</span>YOUR_ETHERNET_DEVICE

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control two_dof.launch.py eth_device:<span class="o">=</span>YOUR_ETHERNET_DEVICE

</code></pre></div></div>
<ul>
  <li>Terminal 3 - to show the running controllers</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 control list_controllers

</code></pre></div></div>
<p>(Information does not automatically refresh - it can be refreshed each M seconds 
using <code class="language-plaintext highlighter-rouge">watch -n M ros2 control list_controllers</code>)</p>
<ul>
  <li>Running motors with different controllers:</li>
</ul>

<p>CSV (Cyclic Sync Velocity) mode:</p>

<p>Terminal 4 to turn on the controller :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['forward_velocity_controller'], deactivate_controllers: []}"</span>

</code></pre></div></div>
<p>Terminal 5 to create a publisher:</p>

<p>If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_velocity_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100]

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_velocity_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100,100]

</code></pre></div></div>
<p>Stopping it: CTRL+C on Terminal 5 and in Terminal 4:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['quick_stop_controller'], deactivate_controllers: ['forward_velocity_controller']}"</span>

</code></pre></div></div>
<ul>
  <li>CSP (Cyclic Sync Position) mode:</li>
</ul>

<p>Terminal 4 to turn on the controller :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['forward_position_controller'], deactivate_controllers: [quick_stop_controller]}"</span>

</code></pre></div></div>
<p>Terminal 5 to create a publisher:</p>

<p>If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_position_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>140]

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_position_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>140, 140]

</code></pre></div></div>
<p>Stopping it: CTRL+C on Terminal 5 and in Terminal 4:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['quick_stop_controller'], deactivate_controllers: ['forward_position_controller']}"</span>

</code></pre></div></div>

<ul>
  <li>CST (Cyclic Sync Torque) mode:</li>
</ul>

<p>Terminal 4 to turn on the controller :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['forward_torque_controller'], deactivate_controllers: [quick_stop_controller]}"</span>	

</code></pre></div></div>
<p>Terminal 5 to create a publisher (value is in per mille of torque):</p>

<p>If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_torque_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100]	

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_torque_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100, 100]	

</code></pre></div></div>
<p>Stopping it: CTRL+C on Terminal 5 and in Terminal 4:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['quick_stop_controller'], deactivate_controllers: ['forward_torque_controller']}"</span>

</code></pre></div></div>
<h5 id="2214-running-without-sudo-optional">2.2.1.4. Running Without Sudo (Optional)</h5>

<p>To run the example without using <code class="language-plaintext highlighter-rouge">sudo</code>, create:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo touch</span> /etc/systemd/system/ros2_control_node.service

</code></pre></div></div>
<p>and use the text editor to paste the following into that file. Note that <code class="language-plaintext highlighter-rouge">YOUR_USER</code>, <code class="language-plaintext highlighter-rouge">ROS_DISTRO</code>, <code class="language-plaintext highlighter-rouge">pythonX.XX</code> and <code class="language-plaintext highlighter-rouge">elevated_permissions_X_dof.launch.py</code> must be replaced with the correct data.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>Unit]
<span class="nv">Description</span><span class="o">=</span>Launch ros2_control_node with socket permissions

<span class="o">[</span>Service]
<span class="nv">Type</span><span class="o">=</span>simple
<span class="nv">User</span><span class="o">=</span>YOUR_USER
<span class="nv">ExecStartPre</span><span class="o">=</span>/bin/bash <span class="nt">-c</span> <span class="s1">'source /opt/ros/ROS_DISTRO/setup.bash; source /home/YOUR_USER/.bashrc; source /home/YOUR_USER/ros2_ws/install/setup.bash'</span>
<span class="c"># Write the user environment to file, for debugging</span>
<span class="c">#ExecStartPre=/bin/bash -c 'env &gt; /home/YOUR_USER/Documents/ros_env_before_start.txt'</span>

<span class="c"># This is essentially a copy of my normal user env</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"AMENT_PREFIX_PATH=/home/YOUR_USER/ros2_ws/install/synapticon_ros2_control:/opt/ros/ROS_DISTRO"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"HOME=/home/YOUR_USER"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"LD_LIBRARY_PATH=/opt/ros/ROS_DISTRO/opt/rviz_ogre_vendor/lib:/opt/ros/ROS_DISTRO/lib/x86_64-linux-gnu:/opt/ros/ROS_DISTRO/lib"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"PATH=/opt/ros/ROS_DISTRO/bin:/usr/lib/ccache:/home/YOUR_USER/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/snap/bin"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"PYTHONPATH=/opt/ros/ROS_DISTRO/lib/pythonX.XX/site-packages:/opt/ros/ROS_DISTRO/local/lib/pythonX.XX/dist-packages"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"ROS_DISTRO=ROS_DISTRO"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"ROS_DOMAIN_ID=1"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"ROS_PYTHON_VERSION=3"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"ROS_VERSION=2"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"ROSCONSOLE_FORMAT=[</span><span class="k">${</span><span class="nv">severity</span><span class="k">}</span><span class="s2">] - </span><span class="k">${</span><span class="nv">node</span><span class="k">}</span><span class="s2">: [</span><span class="k">${</span><span class="nv">time</span><span class="k">}</span><span class="s2">] </span><span class="k">${</span><span class="nv">message</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"USER=YOUR_USER"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"USERNAME=YOUR_USER"</span>

<span class="nv">ExecStart</span><span class="o">=</span>/opt/ros/ROS_DISTRO/bin/ros2 launch synapticon_ros2_control elevated_permissions_X_dof.launch.py
<span class="nv">AmbientCapabilities</span><span class="o">=</span>CAP_NET_RAW

<span class="o">[</span>Install]
<span class="nv">WantedBy</span><span class="o">=</span>multi-user.target

</code></pre></div></div>
<p>Save the file, restart the daemon:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl daemon-reload

</code></pre></div></div>
<p>and start the service:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl restart ros2_control_node.service

</code></pre></div></div>
<p>To check the service status and see the ROS console logging:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl status ros2_control_node.service

</code></pre></div></div>
<p>Now, the example can be run by these two commands:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl restart ros2_control_node.service

</code></pre></div></div>
<p>and, if running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control single_dof.launch.py eth_device:<span class="o">=</span>YOUR_ETHERNET_DEVICE

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control two_dof.launch.py eth_device:<span class="o">=</span>YOUR_ETHERNET_DEVICE

</code></pre></div></div>
<p>Changing the controllers and publishing the desired position/velocity/torque can be now executed without sudo.
To stop the <code class="language-plaintext highlighter-rouge">ros2_control_node</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl stop ros2_control_node.service

</code></pre></div></div>

<h4 id="222-isolated-environment-docker">2.2.2. Isolated Environment (Docker)</h4>

<p>For users with different Linux distributions or those preferring an isolated environment, Docker can be used. Installation steps can be found in the <a href="https://docs.docker.com/engine/install/ubuntu/">Docker Documentation</a>. Installation instructions are also provided below:</p>

<h5 id="2221-docker-installation">2.2.2.1. Docker Installation</h5>

<p>Install Docker and add the user to the Docker group:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> docker.io
<span class="nb">sudo </span>groupadd docker
<span class="nb">sudo </span>usermod <span class="nt">-aG</span> docker <span class="nv">$USER</span>

</code></pre></div></div>
<h5 id="2222-synapticon-package-installation">2.2.2.2. Synapticon Package Installation</h5>
<p>With the following command, the Docker image can be pulled (replace <code class="language-plaintext highlighter-rouge">ROS_DISTRO</code> with the desired ROS_distribution - humble, jazzy or rolling):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull ghcr.io/synapticon/synapticon_ros2_control:ROS_DISTRO

</code></pre></div></div>
<p>To allow Docker containers to output the screen on your system, which is required for RViZ, execute this on the host system:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xhost +

</code></pre></div></div>
<p>For the first execution of the program, we build container named <code class="language-plaintext highlighter-rouge">ros2_container</code> from the downloaded docker image (replace <code class="language-plaintext highlighter-rouge">ROS_DISTRO</code> with the desired ROS_distribution - humble, jazzy or rolling):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-it</span> <span class="nt">-v</span> /var/run/dbus/system_bus_socket:/var/run/dbus/system_bus_socket <span class="nt">-v</span> /tmp/.X11-unix:/tmp/.X11-unix <span class="nt">--ipc</span><span class="o">=</span>host <span class="nt">-e</span> <span class="nv">DISPLAY</span><span class="o">=</span><span class="nv">$DISPLAY</span>  <span class="nt">--network</span><span class="o">=</span>host <span class="nt">--env</span> <span class="nv">QT_X11_NO_MITSHM</span><span class="o">=</span>1 <span class="nt">--privileged</span> <span class="nt">--name</span> ros2_container ghcr.io/synapticon/synapticon_ros2_control:ROS_DISTRO

</code></pre></div></div>
<p>Now, the container is running. For all other occurrences, start the container using:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker start ros2_container

</code></pre></div></div>
<p>For opening a new terminal in the running container, use:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker <span class="nb">exec</span> <span class="nt">-it</span> ros2_container bash

</code></pre></div></div>
<p>and, once it opens, source the ROS2 environment using</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> /root/.bashrc

</code></pre></div></div>
<p>To check if the master could be run and if the slaves are found, in the container terminal execute:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./install/synapticon_ros2_control/bin/torque_control_executable

</code></pre></div></div>
<p>Before running other scripts, stop this one by CTRL+C (or wait, it will shutdown automatically after a while).</p>

<h5 id="2223-demo">2.2.2.3. Demo</h5>

<p>Connect the Synapticon device configured with OBLAC Tools to your ethernet port as shown in Figure 1. For the demo, run five terminals in the container (<code class="language-plaintext highlighter-rouge">docker exec -it ros2_container bash</code> and <code class="language-plaintext highlighter-rouge">source /root/.bashrc</code>)</p>

<ul>
  <li>Terminal 1
If you are running the demo with one motor:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control elevated_permissions_1_dof.launch.py

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control elevated_permissions_2_dof.launch.py

</code></pre></div></div>
<ul>
  <li>Terminal 2 - this one will open RViZ. If it fails, xhost + was not executed on your host machine. By spinning the motor by hand, movement should be seen in RViZ.
If you are running the demo with one motor:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control single_dof.launch.py eth_device:<span class="o">=</span>YOUR_ETHERNET_DEVICE

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control two_dof.launch.py eth_device:<span class="o">=</span>YOUR_ETHERNET_DEVICE

</code></pre></div></div>
<ul>
  <li>Terminal 3 - to show the running controllers:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 control list_controllers

</code></pre></div></div>
<p>(Information does not automatically refresh - it can be refreshed each M seconds 
using <code class="language-plaintext highlighter-rouge">watch -n M ros2 control list_controllers</code>)</p>

<ul>
  <li>Running motors with different controllers:
CSV (Cyclic Sync Velocity) mode:</li>
</ul>

<p>Terminal 4 to turn on the controller :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['forward_velocity_controller'], deactivate_controllers: []}"</span>

</code></pre></div></div>
<p>Terminal 5 to create a publisher:
If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_velocity_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100]

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_velocity_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100,100]

</code></pre></div></div>
<p>Stopping it: CTRL+C on Terminal 5 and in Terminal 4:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['quick_stop_controller'], deactivate_controllers: ['forward_velocity_controller']}"</span>

</code></pre></div></div>
<ul>
  <li>CSP (Cyclic Sync Position) mode:</li>
</ul>

<p>Terminal 4 to turn on the controller :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['forward_position_controller'], deactivate_controllers: [quick_stop_controller]}"</span>

</code></pre></div></div>
<p>Terminal 5 to create a publisher:
If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_position_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>140]

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_position_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>140, 140]

</code></pre></div></div>
<p>Stopping it: CTRL+C on Terminal 5 and in Terminal 4:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['quick_stop_controller'], deactivate_controllers: ['forward_position_controller']}"</span>

</code></pre></div></div>

<ul>
  <li>CST (Cyclic Sync Torque) mode:</li>
</ul>

<p>Terminal 4 to turn on the controller :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['forward_torque_controller'], deactivate_controllers: [quick_stop_controller]}"</span>	

</code></pre></div></div>
<p>Terminal 5 to create a publisher (value is in per mille of torque):
If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_torque_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100]	

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_torque_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100, 100]	

</code></pre></div></div>
<p>Stopping it: CTRL+C on Terminal 5 and in Terminal 4:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['quick_stop_controller'], deactivate_controllers: ['forward_torque_controller']}"</span>

</code></pre></div></div>

<h2 id="3-disclaimer">3. Disclaimer</h2>

<p>This repository is an example of how to use SOMANET drives with ROS2 (humble, jazzy and rolling). It does not guarantee compatibility with the latest ROS versions or SOMANET firmware. The included code is for demonstration purposes only. Synapticon GmbH refuses any responsibility for any problem or damage by using the example configuration and code!</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/synapticon_ros2_control">synapticon_ros2_control</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/synapticon_ros2_control">synapticon_ros2_control</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-synapticon-synapticon_ros2_control
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-synapticon-synapticon_ros2_control" role="menuitem" tabindex="-1" href="/r/synapticon_ros2_control/github-synapticon-synapticon_ros2_control" data="github-synapticon-synapticon_ros2_control">
                    <span class="glyphicon glyphicon-star"></span>
                    github-synapticon-synapticon_ros2_control
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">A ros2_control interface for Synapticon motor drivers</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/synapticon/synapticon_ros2_control.git">https://github.com/synapticon/synapticon_ros2_control.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-03-27
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/synapticon_ros2_control/#rolling-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/synapticon_ros2_control/#rolling-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/synapticon_ros2_control/#rolling-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/synapticon_ros2_control">synapticon_ros2_control</a></td>
                    <td>0.1.2</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="controlling-synapticon-devices-using-the-ros2-package">Controlling Synapticon Devices Using the ROS2 Package</h1>

<h2 id="description">Description</h2>

<p>This repository provides an example of how to use Synapticon drives (SOMANET Node, SOMANET Circulo and SOMANET Integro) in CSP (Cyclic Sync Position), CSV (Cyclic Sync Velocity), and CST (Cyclic Sync Torque) modes using the ROS2 package. It utilizes <code class="language-plaintext highlighter-rouge">SOEM Ethercat Master</code>. The ROS 2 package was originally developed by Andy Zelenak. Synapticon GmbH added examples, simulation, and extended instructions for easier installation, as well as support for containerization using Docker.</p>

<p><img src="https://raw.githubusercontent.com/synapticon/synapticon_ros2_control/main/doc/images/rviz.png" alt="RVIZ Screenshot of dual motor test setup"></p>

<h2 id="table-of-contents">Table of Contents</h2>

<ol>
  <li><a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#1-intention">Intention</a></li>
  <li>
<a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2-overview">Overview</a>
    <ul>
      <li>2.1. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#21-hardware">Hardware</a>
</li>
      <li>2.2. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#22-software">Software</a>
        <ul>
          <li>2.2.1. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#221-ubuntu-with-ros2">Ubuntu with ROS2</a>
            <ul>
              <li>2.2.1.1. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2211-ros2-installation">ROS2 Installation</a>
</li>
              <li>2.2.1.2. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2212-synapticon-package-installation">Synapticon Package Installation</a>
</li>
              <li>2.2.1.3. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2213-demo">Demo</a>
</li>
              <li>2.2.1.4. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2214-running-without-sudo-optional">Running Without Sudo (Optional)</a>
</li>
            </ul>
          </li>
          <li>2.2.2. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#222-isolated-environment-docker">Isolated Environment (Docker)</a>
            <ul>
              <li>2.2.2.1. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2221-docker-installation">Docker Installation</a>
</li>
              <li>2.2.2.2. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2222-synapticon-package-installation">Synapticon Package Installation</a>
</li>
              <li>2.2.2.3. <a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#2223-demo">Demo</a>
</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="https://github.com/synapticon/synapticon_ros2_control/tree/main/#3-disclaimer">Disclaimer</a></li>
</ol>

<h2 id="1-intention">1. Intention</h2>

<p>The intention of this document is to provide instructions on how to quickly begin Synapticon Devices with the ROS2 package using the Synapticon library. Additionally, in order to make it compatible with other Linux distributions, corresponding Docker images are provided.</p>

<h2 id="2-overview">2. Overview</h2>

<p>The following subsections briefly demonstrate hardware and software required for using Synapticon devices with this package.</p>

<h3 id="21-hardware">2.1. Hardware</h3>

<p>In the figure below, a block diagram of the wiring used in this setup is provided. Drives can be used once the parameters are configured with <a href="https://www.synapticon.com/en/products/oblac-drives">OBLAC tools</a>. Detailed instructions and wiring diagrams for all the devices are available on the <a href="https://www.synapticon.com/en/support/dokumentation">Synapticon Web site</a> documentation. The package allows daisy chaining of all the Synapticon drives in any order as indicated in the image below.</p>

<p><img src="https://raw.githubusercontent.com/synapticon/synapticon_ros2_control/main/doc/images/hardware.jpg" alt="Hardware layout"></p>

<h3 id="22-software">2.2. Software</h3>

<p>In this demo, two scenarios are considered:</p>
<ul>
  <li>Ubuntu 22.04 or 24.04 is installed on the system and ROS2 (humble, rolling or jazzy) together with the Synapticon package will be installed on that system</li>
  <li>The user wants to run the package in an isolated environment (Docker)</li>
</ul>

<h4 id="221-ubuntu-with-ros2">2.2.1. Ubuntu with ROS2</h4>

<p>To install ROS2 on your Ubuntu machine, follow the steps from <a href="https://docs.ros.org/en/humble/Installation/Ubuntu-Install-Debs.html">ros.org</a> and install the full version. The minimal version can also be installed; however, if simulation is desired, RViZ must additionally be installed.  After the installation, some configuration steps as described <a href="https://docs.ros.org/en/humble/Tutorials/Beginner-CLI-Tools/Configuring-ROS2-Environment.html">here</a> are required. For the completeness of the demo, the commands in the following subsection are copied from the above website and should be executed for the ROS2 installation.</p>

<h5 id="2211-ros2-installation">2.2.1.1. ROS2 Installation</h5>

<p>To ensure that locale supports UTF-8, run the following commands:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt <span class="nb">install </span>locales
<span class="nb">sudo </span>locale-gen en_US en_US.UTF-8
<span class="nb">sudo </span>update-locale <span class="nv">LC_ALL</span><span class="o">=</span>en_US.UTF-8 <span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8
<span class="nb">export </span><span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8

</code></pre></div></div>
<p>Enable Ubuntu Universe repository:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>software-properties-common
<span class="nb">sudo </span>add-apt-repository universe

</code></pre></div></div>
<p>Add GPG key:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt <span class="nb">install </span>curl <span class="nt">-y</span>
<span class="nb">sudo </span>curl <span class="nt">-sSL</span> https://raw.githubusercontent.com/ros/rosdistro/master/ros.key <span class="nt">-o</span> /usr/share/keyrings/ros-archive-keyring.gpg

</code></pre></div></div>
<p>Add repository to the sources:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"deb [arch=</span><span class="si">$(</span>dpkg <span class="nt">--print-architecture</span><span class="si">)</span><span class="s2"> signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu </span><span class="si">$(</span><span class="nb">.</span> /etc/os-release <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="nv">$UBUNTU_CODENAME</span><span class="si">)</span><span class="s2"> main"</span> | <span class="nb">sudo tee</span> /etc/apt/sources.list.d/ros2.list <span class="o">&gt;</span> /dev/null

</code></pre></div></div>
<p>Update apt cache:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update

</code></pre></div></div>
<p>This command updates the packages on your system. Note that if the commands after this work, skip this step.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt upgrade

</code></pre></div></div>
<p>Finally, install ROS and compilers (replace <code class="language-plaintext highlighter-rouge">ROS_DISTRO</code> with the desired ROS distribution - humble, jazzy or rolling):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>ros-ROS_DISTRO-desktop
<span class="nb">sudo </span>apt <span class="nb">install </span>ros-dev-tools

</code></pre></div></div>
<p>After the installation is complete, add the following line to the end of <code class="language-plaintext highlighter-rouge">/home/USER/.bashrc</code> file (replace <code class="language-plaintext highlighter-rouge">ROS_DISTRO</code> with the desired ROS distribution - humble, jazzy or rolling):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> /opt/ros/ROS_DISTRO/setup.bash

</code></pre></div></div>
<p>In order for ROS2 to not interfere with the communication on other ports, we set the Domain ID (detailed information is available <a href="https://docs.ros.org/en/humble/Concepts/Intermediate/About-Domain-ID.html">here</a>).  For this demo, we just used ROS_DOMAIN_ID=1. To do so, add the following at the end of <code class="language-plaintext highlighter-rouge">/home/$USER/.bashrc</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">ROS_DOMAIN_ID</span><span class="o">=</span>1

</code></pre></div></div>
<p>After this, close and reopen all your terminals.
To verify the installation, open two terminals and run:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run demo_nodes_cpp talker
ros2 run demo_nodes_py listener

</code></pre></div></div>
<p>If the nodes are communicating, the installation was successful.</p>

<h5 id="2212-synapticon-package-installation">2.2.1.2. Synapticon Package Installation</h5>

<p><strong>OPTION 1:</strong> Installing from Source</p>

<p>Create an ROS2 workspace:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> <span class="nt">-p</span> ~/ros2_ws/src
<span class="nb">cd</span> ~/ros2_ws/src

</code></pre></div></div>
<p>Clone the Synapticon package:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/synapticon/synapticon_ros2_control

</code></pre></div></div>
<p>Install build tools:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>python3-colcon-common-extensions

</code></pre></div></div>
<p>Build the package:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/ros2_ws
rosdep <span class="nb">install</span> <span class="nt">--from-paths</span> src <span class="nt">-y</span> <span class="nt">--ignore-src</span>
colcon build

</code></pre></div></div>
<p>Additionally, you can source the workspace by adding the following line to the <code class="language-plaintext highlighter-rouge">/home/USER/.bashrc</code> file above the line where the ROS installation was sourced (above this line: <code class="language-plaintext highlighter-rouge">source /opt/ros/ROS_DISTRO/setup.bash</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> /home/USER/ros2_ws/install/setup.bash

</code></pre></div></div>

<p><strong>OPTION 2:</strong> Binary Installation</p>

<p>If required, add the ROS repository (this occurs only once):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>software-properties-common 
<span class="nb">sudo </span>add-apt-repository universe 
<span class="nb">sudo </span>apt update

</code></pre></div></div>
<p>Install the Synapticon package (replace ROS_DISTRO with the ROS distribution you want - humble, jazzy or rolling):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>ros-ROS_DISTRO-synapticon-ros2-control

</code></pre></div></div>

<p>Make sure rosdep is initialized and updated:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>rosdep init 
rosdep update

</code></pre></div></div>

<p>Install its dependencies:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rosdep <span class="nb">install </span>synapticon_ros2_control

</code></pre></div></div>
<p>The package will get installed to <code class="language-plaintext highlighter-rouge">/opt/ros/ROS_DISTRO/share/synapticon_ros2_control/</code>.</p>

<p><strong>VERIFICATION</strong></p>

<p>The ethernet device name, to which the drive is connected, is required. This could be checked with the <code class="language-plaintext highlighter-rouge">ifconfig</code> command. Ethernet adapters usually start with <code class="language-plaintext highlighter-rouge">en</code>. To check if the master could be run and if the slaves are found, execute the following  in the terminal (replace <code class="language-plaintext highlighter-rouge">YOUR_ETHERNET_INTERFACE</code> with the one found with <code class="language-plaintext highlighter-rouge">ifconfig</code>). 
If you installed from source:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> ./home/<span class="nv">$USER</span>/ros2_ws/install/synapticon_ros2_control/bin/torque_control_executable YOUR_ETHERNET_INTERFACE

</code></pre></div></div>
<p>or if you installed using the binary installation (replace <code class="language-plaintext highlighter-rouge">ROS_DISTRO</code> with the desired ROS distribution - humble, jazzy or rolling):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> ./opt/ros/ROS_DISTRO/share/synapticon_ros2_control/bin/torque_control_executable YOUR_ETHERNET_INTERFACE

</code></pre></div></div>
<p>Before running other scripts, stop this one by CTRL+C (or wait - it will shutdown automatically after a while).</p>

<h5 id="2213-demo">2.2.1.3. Demo</h5>
<p>For turning the motor in different modes, five terminals are required and in all of them execute:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> <span class="nt">-i</span>
<span class="nb">source</span> /home/YOUR_USER/.bashrc

</code></pre></div></div>
<ul>
  <li>Terminal 1:</li>
</ul>

<p>If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control elevated_permissions_1_dof.launch.py

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control elevated_permissions_2_dof.launch.py

</code></pre></div></div>
<ul>
  <li>Terminal 2:</li>
</ul>

<p>If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control single_dof.launch.py eth_device:<span class="o">=</span>YOUR_ETHERNET_DEVICE

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control two_dof.launch.py eth_device:<span class="o">=</span>YOUR_ETHERNET_DEVICE

</code></pre></div></div>
<ul>
  <li>Terminal 3 - to show the running controllers</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 control list_controllers

</code></pre></div></div>
<p>(Information does not automatically refresh - it can be refreshed each M seconds 
using <code class="language-plaintext highlighter-rouge">watch -n M ros2 control list_controllers</code>)</p>
<ul>
  <li>Running motors with different controllers:</li>
</ul>

<p>CSV (Cyclic Sync Velocity) mode:</p>

<p>Terminal 4 to turn on the controller :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['forward_velocity_controller'], deactivate_controllers: []}"</span>

</code></pre></div></div>
<p>Terminal 5 to create a publisher:</p>

<p>If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_velocity_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100]

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_velocity_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100,100]

</code></pre></div></div>
<p>Stopping it: CTRL+C on Terminal 5 and in Terminal 4:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['quick_stop_controller'], deactivate_controllers: ['forward_velocity_controller']}"</span>

</code></pre></div></div>
<ul>
  <li>CSP (Cyclic Sync Position) mode:</li>
</ul>

<p>Terminal 4 to turn on the controller :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['forward_position_controller'], deactivate_controllers: [quick_stop_controller]}"</span>

</code></pre></div></div>
<p>Terminal 5 to create a publisher:</p>

<p>If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_position_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>140]

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_position_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>140, 140]

</code></pre></div></div>
<p>Stopping it: CTRL+C on Terminal 5 and in Terminal 4:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['quick_stop_controller'], deactivate_controllers: ['forward_position_controller']}"</span>

</code></pre></div></div>

<ul>
  <li>CST (Cyclic Sync Torque) mode:</li>
</ul>

<p>Terminal 4 to turn on the controller :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['forward_torque_controller'], deactivate_controllers: [quick_stop_controller]}"</span>	

</code></pre></div></div>
<p>Terminal 5 to create a publisher (value is in per mille of torque):</p>

<p>If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_torque_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100]	

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_torque_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100, 100]	

</code></pre></div></div>
<p>Stopping it: CTRL+C on Terminal 5 and in Terminal 4:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['quick_stop_controller'], deactivate_controllers: ['forward_torque_controller']}"</span>

</code></pre></div></div>
<h5 id="2214-running-without-sudo-optional">2.2.1.4. Running Without Sudo (Optional)</h5>

<p>To run the example without using <code class="language-plaintext highlighter-rouge">sudo</code>, create:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo touch</span> /etc/systemd/system/ros2_control_node.service

</code></pre></div></div>
<p>and use the text editor to paste the following into that file. Note that <code class="language-plaintext highlighter-rouge">YOUR_USER</code>, <code class="language-plaintext highlighter-rouge">ROS_DISTRO</code>, <code class="language-plaintext highlighter-rouge">pythonX.XX</code> and <code class="language-plaintext highlighter-rouge">elevated_permissions_X_dof.launch.py</code> must be replaced with the correct data.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>Unit]
<span class="nv">Description</span><span class="o">=</span>Launch ros2_control_node with socket permissions

<span class="o">[</span>Service]
<span class="nv">Type</span><span class="o">=</span>simple
<span class="nv">User</span><span class="o">=</span>YOUR_USER
<span class="nv">ExecStartPre</span><span class="o">=</span>/bin/bash <span class="nt">-c</span> <span class="s1">'source /opt/ros/ROS_DISTRO/setup.bash; source /home/YOUR_USER/.bashrc; source /home/YOUR_USER/ros2_ws/install/setup.bash'</span>
<span class="c"># Write the user environment to file, for debugging</span>
<span class="c">#ExecStartPre=/bin/bash -c 'env &gt; /home/YOUR_USER/Documents/ros_env_before_start.txt'</span>

<span class="c"># This is essentially a copy of my normal user env</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"AMENT_PREFIX_PATH=/home/YOUR_USER/ros2_ws/install/synapticon_ros2_control:/opt/ros/ROS_DISTRO"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"HOME=/home/YOUR_USER"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"LD_LIBRARY_PATH=/opt/ros/ROS_DISTRO/opt/rviz_ogre_vendor/lib:/opt/ros/ROS_DISTRO/lib/x86_64-linux-gnu:/opt/ros/ROS_DISTRO/lib"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"PATH=/opt/ros/ROS_DISTRO/bin:/usr/lib/ccache:/home/YOUR_USER/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/snap/bin"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"PYTHONPATH=/opt/ros/ROS_DISTRO/lib/pythonX.XX/site-packages:/opt/ros/ROS_DISTRO/local/lib/pythonX.XX/dist-packages"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"ROS_DISTRO=ROS_DISTRO"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"ROS_DOMAIN_ID=1"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"ROS_PYTHON_VERSION=3"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"ROS_VERSION=2"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"ROSCONSOLE_FORMAT=[</span><span class="k">${</span><span class="nv">severity</span><span class="k">}</span><span class="s2">] - </span><span class="k">${</span><span class="nv">node</span><span class="k">}</span><span class="s2">: [</span><span class="k">${</span><span class="nv">time</span><span class="k">}</span><span class="s2">] </span><span class="k">${</span><span class="nv">message</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"USER=YOUR_USER"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"USERNAME=YOUR_USER"</span>

<span class="nv">ExecStart</span><span class="o">=</span>/opt/ros/ROS_DISTRO/bin/ros2 launch synapticon_ros2_control elevated_permissions_X_dof.launch.py
<span class="nv">AmbientCapabilities</span><span class="o">=</span>CAP_NET_RAW

<span class="o">[</span>Install]
<span class="nv">WantedBy</span><span class="o">=</span>multi-user.target

</code></pre></div></div>
<p>Save the file, restart the daemon:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl daemon-reload

</code></pre></div></div>
<p>and start the service:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl restart ros2_control_node.service

</code></pre></div></div>
<p>To check the service status and see the ROS console logging:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl status ros2_control_node.service

</code></pre></div></div>
<p>Now, the example can be run by these two commands:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl restart ros2_control_node.service

</code></pre></div></div>
<p>and, if running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control single_dof.launch.py eth_device:<span class="o">=</span>YOUR_ETHERNET_DEVICE

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control two_dof.launch.py eth_device:<span class="o">=</span>YOUR_ETHERNET_DEVICE

</code></pre></div></div>
<p>Changing the controllers and publishing the desired position/velocity/torque can be now executed without sudo.
To stop the <code class="language-plaintext highlighter-rouge">ros2_control_node</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl stop ros2_control_node.service

</code></pre></div></div>

<h4 id="222-isolated-environment-docker">2.2.2. Isolated Environment (Docker)</h4>

<p>For users with different Linux distributions or those preferring an isolated environment, Docker can be used. Installation steps can be found in the <a href="https://docs.docker.com/engine/install/ubuntu/">Docker Documentation</a>. Installation instructions are also provided below:</p>

<h5 id="2221-docker-installation">2.2.2.1. Docker Installation</h5>

<p>Install Docker and add the user to the Docker group:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> docker.io
<span class="nb">sudo </span>groupadd docker
<span class="nb">sudo </span>usermod <span class="nt">-aG</span> docker <span class="nv">$USER</span>

</code></pre></div></div>
<h5 id="2222-synapticon-package-installation">2.2.2.2. Synapticon Package Installation</h5>
<p>With the following command, the Docker image can be pulled (replace <code class="language-plaintext highlighter-rouge">ROS_DISTRO</code> with the desired ROS_distribution - humble, jazzy or rolling):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull ghcr.io/synapticon/synapticon_ros2_control:ROS_DISTRO

</code></pre></div></div>
<p>To allow Docker containers to output the screen on your system, which is required for RViZ, execute this on the host system:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xhost +

</code></pre></div></div>
<p>For the first execution of the program, we build container named <code class="language-plaintext highlighter-rouge">ros2_container</code> from the downloaded docker image (replace <code class="language-plaintext highlighter-rouge">ROS_DISTRO</code> with the desired ROS_distribution - humble, jazzy or rolling):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-it</span> <span class="nt">-v</span> /var/run/dbus/system_bus_socket:/var/run/dbus/system_bus_socket <span class="nt">-v</span> /tmp/.X11-unix:/tmp/.X11-unix <span class="nt">--ipc</span><span class="o">=</span>host <span class="nt">-e</span> <span class="nv">DISPLAY</span><span class="o">=</span><span class="nv">$DISPLAY</span>  <span class="nt">--network</span><span class="o">=</span>host <span class="nt">--env</span> <span class="nv">QT_X11_NO_MITSHM</span><span class="o">=</span>1 <span class="nt">--privileged</span> <span class="nt">--name</span> ros2_container ghcr.io/synapticon/synapticon_ros2_control:ROS_DISTRO

</code></pre></div></div>
<p>Now, the container is running. For all other occurrences, start the container using:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker start ros2_container

</code></pre></div></div>
<p>For opening a new terminal in the running container, use:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker <span class="nb">exec</span> <span class="nt">-it</span> ros2_container bash

</code></pre></div></div>
<p>and, once it opens, source the ROS2 environment using</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> /root/.bashrc

</code></pre></div></div>
<p>To check if the master could be run and if the slaves are found, in the container terminal execute:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./install/synapticon_ros2_control/bin/torque_control_executable

</code></pre></div></div>
<p>Before running other scripts, stop this one by CTRL+C (or wait, it will shutdown automatically after a while).</p>

<h5 id="2223-demo">2.2.2.3. Demo</h5>

<p>Connect the Synapticon device configured with OBLAC Tools to your ethernet port as shown in Figure 1. For the demo, run five terminals in the container (<code class="language-plaintext highlighter-rouge">docker exec -it ros2_container bash</code> and <code class="language-plaintext highlighter-rouge">source /root/.bashrc</code>)</p>

<ul>
  <li>Terminal 1
If you are running the demo with one motor:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control elevated_permissions_1_dof.launch.py

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control elevated_permissions_2_dof.launch.py

</code></pre></div></div>
<ul>
  <li>Terminal 2 - this one will open RViZ. If it fails, xhost + was not executed on your host machine. By spinning the motor by hand, movement should be seen in RViZ.
If you are running the demo with one motor:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control single_dof.launch.py eth_device:<span class="o">=</span>YOUR_ETHERNET_DEVICE

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch synapticon_ros2_control two_dof.launch.py eth_device:<span class="o">=</span>YOUR_ETHERNET_DEVICE

</code></pre></div></div>
<ul>
  <li>Terminal 3 - to show the running controllers:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 control list_controllers

</code></pre></div></div>
<p>(Information does not automatically refresh - it can be refreshed each M seconds 
using <code class="language-plaintext highlighter-rouge">watch -n M ros2 control list_controllers</code>)</p>

<ul>
  <li>Running motors with different controllers:
CSV (Cyclic Sync Velocity) mode:</li>
</ul>

<p>Terminal 4 to turn on the controller :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['forward_velocity_controller'], deactivate_controllers: []}"</span>

</code></pre></div></div>
<p>Terminal 5 to create a publisher:
If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_velocity_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100]

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_velocity_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100,100]

</code></pre></div></div>
<p>Stopping it: CTRL+C on Terminal 5 and in Terminal 4:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['quick_stop_controller'], deactivate_controllers: ['forward_velocity_controller']}"</span>

</code></pre></div></div>
<ul>
  <li>CSP (Cyclic Sync Position) mode:</li>
</ul>

<p>Terminal 4 to turn on the controller :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['forward_position_controller'], deactivate_controllers: [quick_stop_controller]}"</span>

</code></pre></div></div>
<p>Terminal 5 to create a publisher:
If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_position_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>140]

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_position_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>140, 140]

</code></pre></div></div>
<p>Stopping it: CTRL+C on Terminal 5 and in Terminal 4:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['quick_stop_controller'], deactivate_controllers: ['forward_position_controller']}"</span>

</code></pre></div></div>

<ul>
  <li>CST (Cyclic Sync Torque) mode:</li>
</ul>

<p>Terminal 4 to turn on the controller :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['forward_torque_controller'], deactivate_controllers: [quick_stop_controller]}"</span>	

</code></pre></div></div>
<p>Terminal 5 to create a publisher (value is in per mille of torque):
If you are running the demo with one motor:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_torque_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100]	

</code></pre></div></div>
<p>If you are running the demo with two motors:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /forward_torque_controller/commands std_msgs/msg/Float64MultiArray data:<span class="se">\ </span><span class="o">[</span>100, 100]	

</code></pre></div></div>
<p>Stopping it: CTRL+C on Terminal 5 and in Terminal 4:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 service call /controller_manager/switch_controller controller_manager_msgs/srv/SwitchController <span class="s2">"{activate_controllers: ['quick_stop_controller'], deactivate_controllers: ['forward_torque_controller']}"</span>

</code></pre></div></div>

<h2 id="3-disclaimer">3. Disclaimer</h2>

<p>This repository is an example of how to use SOMANET drives with ROS2 (humble, jazzy and rolling). It does not guarantee compatibility with the latest ROS versions or SOMANET firmware. The included code is for demonstration purposes only. Synapticon GmbH refuses any responsibility for any problem or damage by using the example configuration and code!</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/synapticon_ros2_control">synapticon_ros2_control</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-synapticon-synapticon_ros2_control
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-synapticon-synapticon_ros2_control" role="menuitem" tabindex="-1" href="/r/synapticon_ros2_control/github-synapticon-synapticon_ros2_control" data="github-synapticon-synapticon_ros2_control">
                    <span class="glyphicon glyphicon-star"></span>
                    github-synapticon-synapticon_ros2_control
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>github</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/synapticon_ros2_control">synapticon_ros2_control</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-synapticon-synapticon_ros2_control
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-synapticon-synapticon_ros2_control" role="menuitem" tabindex="-1" href="/r/synapticon_ros2_control/github-synapticon-synapticon_ros2_control" data="github-synapticon-synapticon_ros2_control">
                    <span class="glyphicon glyphicon-star"></span>
                    github-synapticon-synapticon_ros2_control
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/synapticon_ros2_control">synapticon_ros2_control</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-synapticon-synapticon_ros2_control
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-synapticon-synapticon_ros2_control" role="menuitem" tabindex="-1" href="/r/synapticon_ros2_control/github-synapticon-synapticon_ros2_control" data="github-synapticon-synapticon_ros2_control">
                    <span class="glyphicon glyphicon-star"></span>
                    github-synapticon-synapticon_ros2_control
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/synapticon_ros2_control">synapticon_ros2_control</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-synapticon-synapticon_ros2_control
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-synapticon-synapticon_ros2_control" role="menuitem" tabindex="-1" href="/r/synapticon_ros2_control/github-synapticon-synapticon_ros2_control" data="github-synapticon-synapticon_ros2_control">
                    <span class="glyphicon glyphicon-star"></span>
                    github-synapticon-synapticon_ros2_control
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>iron</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/synapticon_ros2_control">synapticon_ros2_control</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-synapticon-synapticon_ros2_control
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-synapticon-synapticon_ros2_control" role="menuitem" tabindex="-1" href="/r/synapticon_ros2_control/github-synapticon-synapticon_ros2_control" data="github-synapticon-synapticon_ros2_control">
                    <span class="glyphicon glyphicon-star"></span>
                    github-synapticon-synapticon_ros2_control
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/synapticon/synapticon_ros2_control.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
