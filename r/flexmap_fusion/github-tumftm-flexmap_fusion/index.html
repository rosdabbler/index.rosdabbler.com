<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/flexmap_fusion/github-tumftm-flexmap_fusion/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">flexmap_fusion</li>
        <!--<li class="active">flexmap_fusion</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-default" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-default" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-default" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-default" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-primary" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class="disabled older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/flexmap_fusion">flexmap_fusion</a> <small>repository</small></h3>
        <span class="label label-default">mapping</span> <span class="label label-default">point-cloud</span> <span class="label label-default">georeferencing</span> <span class="label label-default">ros2</span> <span class="label label-default">autoware</span> <span class="label label-default">lanelet2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tumftm-flexmap_fusion
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tumftm-flexmap_fusion" role="menuitem" tabindex="-1" href="/r/flexmap_fusion/github-tumftm-flexmap_fusion" data="github-tumftm-flexmap_fusion">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tumftm-flexmap_fusion
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>humble</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/flexmap_fusion">flexmap_fusion</a> <small>repository</small></h3>
        <span class="label label-default">mapping</span> <span class="label label-default">point-cloud</span> <span class="label label-default">georeferencing</span> <span class="label label-default">ros2</span> <span class="label label-default">autoware</span> <span class="label label-default">lanelet2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tumftm-flexmap_fusion
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tumftm-flexmap_fusion" role="menuitem" tabindex="-1" href="/r/flexmap_fusion/github-tumftm-flexmap_fusion" data="github-tumftm-flexmap_fusion">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tumftm-flexmap_fusion
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jazzy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/flexmap_fusion">flexmap_fusion</a> <small>repository</small></h3>
        <span class="label label-default">mapping</span> <span class="label label-default">point-cloud</span> <span class="label label-default">georeferencing</span> <span class="label label-default">ros2</span> <span class="label label-default">autoware</span> <span class="label label-default">lanelet2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tumftm-flexmap_fusion
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tumftm-flexmap_fusion" role="menuitem" tabindex="-1" href="/r/flexmap_fusion/github-tumftm-flexmap_fusion" data="github-tumftm-flexmap_fusion">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tumftm-flexmap_fusion
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>kilted</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/flexmap_fusion">flexmap_fusion</a> <small>repository</small></h3>
        <span class="label label-default">mapping</span> <span class="label label-default">point-cloud</span> <span class="label label-default">georeferencing</span> <span class="label label-default">ros2</span> <span class="label label-default">autoware</span> <span class="label label-default">lanelet2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tumftm-flexmap_fusion
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tumftm-flexmap_fusion" role="menuitem" tabindex="-1" href="/r/flexmap_fusion/github-tumftm-flexmap_fusion" data="github-tumftm-flexmap_fusion">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tumftm-flexmap_fusion
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>rolling</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/flexmap_fusion">flexmap_fusion</a> <small>repository</small></h3>
        <span class="label label-default">mapping</span> <span class="label label-default">point-cloud</span> <span class="label label-default">georeferencing</span> <span class="label label-default">ros2</span> <span class="label label-default">autoware</span> <span class="label label-default">lanelet2</span> 
        
        <a class="label label-primary pkg-label" href="/p/flexmap_fusion">flexmap_fusion</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tumftm-flexmap_fusion
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tumftm-flexmap_fusion" role="menuitem" tabindex="-1" href="/r/flexmap_fusion/github-tumftm-flexmap_fusion" data="github-tumftm-flexmap_fusion">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tumftm-flexmap_fusion
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS 2 Autoware Tool for Map Georeferencing and OSM Fusion</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/tumftm/flexmap_fusion.git">https://github.com/tumftm/flexmap_fusion.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-07-15
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNKNOWN
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">mapping</span> <span class="label label-default">point-cloud</span> <span class="label label-default">georeferencing</span> <span class="label label-default">ros2</span> <span class="label label-default">autoware</span> <span class="label label-default">lanelet2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/flexmap_fusion/#github-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/flexmap_fusion/#github-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/flexmap_fusion/#github-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/flexmap_fusion">flexmap_fusion</a></td>
                    <td>0.0.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="flexmap-fusion">FlexMap Fusion</h1>
<p><a href="https://www.linux.org/"><img src="https://img.shields.io/badge/os-linux-blue.svg" alt="Linux"></a>
<a href="https://www.docker.com/"><img src="https://badgen.net/badge/icon/docker?icon=docker&amp;label" alt="Docker"></a>
<a href="https://docs.ros.org/en/humble/index.html"><img src="https://img.shields.io/badge/ros2-humble-blue.svg" alt="ROS2humble"></a></p>

<h2 id="overview">Overview</h2>
<p><img src="https://raw.githubusercontent.com/tumftm/flexmap_fusion/main/doc/img/pipeline_offline_mapping.png" alt="image">
<em>Offline Mapping Pipeline developed at the Institute of Automotive Technology</em></p>
<ul>
  <li>ROS2 package for the improvement/extension of lanelet2 maps with data from <a href="https://github.com/tumftm/flexmap_fusion/tree/main/openstreetmap.org/">OpenStreetMap</a> and their georeferencing with GNSS data</li>
  <li>The package is designed for the application in an offline mapping pipeline developed at the Institute of Automotive Technology of the Technical University of Munich</li>
  <li>The package consists of the three modules “Map Alignment”, “Map Conflation” and “Georeferencing”, that are explained in more detail in the image below and the documentation of the single modules
<img src="https://raw.githubusercontent.com/tumftm/flexmap_fusion/main/doc/img/conflation_tool.png" alt="image">
<em>Overview of the single modules of the FlexMap Fusion tool</em>
</li>
  <li>The following functionalities are included
    <ul>
      <li>georeferencing of the lanelet2 map based on the transformation calculated by the vehicle ego trajectory from GNSS and the SLAM-trajectory</li>
      <li>fusion of semantic information from <a href="https://github.com/tumftm/flexmap_fusion/tree/main/openstreetmap.org/">OpenStreetMap</a> into the lanelet2 map (generated from point cloud map data)</li>
      <li>modular expandability to include additional semantic information</li>
      <li>possibility to apply georeferencing step on the point cloud map resulting from the SLAM process and used for the generation of the lanelet map</li>
      <li>extensive visualization within RVIZ2</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>[!NOTE]<br>
If you’re more interested in georeferencing a 3D pointcloud map, check out <a href="https://github.com/TUMFTM/FlexCloud">FlexCloud</a>, a further development of the georeferencing stage supporting fast 2D and 3D rubber-sheeting with Delauny-Triangulations.</p>
</blockquote>

<details>
<summary> <h2> 🐋 Docker Setup </h2> </summary>

### Package Design
This package is designed as a standalone ROS2 package. It was developed with ROS2 humble. For easier handling of dependencies, a docker environment is provided that sets up everything and builds the package.
As the package is designed for use in combination with [Autoware](https://github.com/autowarefoundation/autoware), the source code can also be build within the [Autoware](https://github.com/autowarefoundation/autoware) docker environment.

### Setup

1. Clone the repository by running
   
```bash
   git clone git@github.com:TUMFTM/FlexMap_Fusion.git
   
```
2. Go to the root directory of the repository
   
```bash
   cd FlexMap_Fusion/
   
```
3. Build the docker image
   
```bash
   ./docker/build_docker.sh  
   
```
4. Run the container and mount your data by appending the directory containing your data:
   
```bash
   ./docker/run_docker.sh /your/local/directory/data
   
```
</details>

<details> 
<summary> <h2> 🖥 How to Use the Package </h2> </summary>

* the package contains two executables with corresponding ROS2 launch file:
  * lanelet2_osm
    * provide all functionality described in the publication and the pipeline overview
    * additional possibility to georeference the point cloud map corresponding to the lanelet map, but without its visualization  
  * kiss_icp_georef
    * provides the possibility to georeference the SLAM poses and the corresponding point cloud map withouth the need of a lanelet map as input (-&gt; no conflation with [OpenStreetMap](openstreetmap.org/))
    * provides visualization of the point cloud map in RVIZ2
   
* in the following, the sections are split between the two executables (however, keep in mind that kiss_icp_georef just provides a subset of the functions of lanelet2_osm)
<details> 
<summary> <h3> 📄 lanelet2_osm &lt;/h2&gt; &lt;/summary&gt;
   
1. Necessary input parameters:
   - `traj_path` =&gt; path to GPS trajectory of the vehicle (format: txt-file with lat, lon)
   - `poses_path` =&gt; path to SLAM trajectory of the vehicle (KITTI-format, trajectories don't have to be synchronized over time)
   - `map_path` =&gt; path to lanelet2 map corresponding to trajectories (map can have missing elements/attributes, only when using node `lanelet2_osm`)
   - `out_path` =&gt; path to save the modified lanelet map (DEFAULT: /lanelet2_map.osm, only when using node `lanelet2_osm`)
   - if you want to georeference the point cloud map corresponding to the lanelet2 map with the same set of control points:
      - set the parameter `transform_pcd` in the config file to `true`
      - adjust the path to the point cloud map (parameter `pcd_path`)
      - the georeferenced point cloud map will be saved in the current working directory (if you'd like to specify a different path, see `kiss_icp_georef`
2. Start the package
   - it is recommended to directly use the provided ROS launch file as it starts the package itself and the visualization in RVIZ:
   - replace the filepaths and run the following command inside the docker container:

   
```bash
       ros2 launch flexmap_fusion lanelet2_osm.launch.py traj_path:=<path-to-gps-trajectory> poses_path:=<path-to-slam-trajectory>  map_path:=<path-to-lanelet-map> out_path:=<path-to-save-output-map>
   
```
   - the launch file directly links to the corresponding parameter file in `/config/`.
   - To directly run the package with the provided test files from the Docker root directory, use the following command:
   
```bash
        ros2 launch flexmap_fusion lanelet2_osm.launch.py traj_path:=./src/flexmap_fusion/test/route_1_GPS.txt poses_path:=./src/flexmap_fusion/test/route1_pose_kitti.txt  map_path:=./src/flexmap_fusion/test/lanelet2_route_1.osm out_path:=lanelet2_map_georef.osm
   
```

3. Select control points
   - after the trajectories are loaded and the target trajectory is aligned to the master trajectory by the Umeyama algorithm, you are asked in the command window to select control points for the rubber-sheet transformation (the amount of points can be configured in the config file).
   - select the desired points using the `Publish Point` button in RVIZ and follow the instructions in the command window.
4. Inspect results
   - results of the rubber-sheet transformation &amp; lanelet map are visualized
   - see table for explanation of single topics

| Topic | Description |
| ----------- | ----------- |
| `/lof/map/osm_map_markers` | Street network downloaded from [OpenStreetMap](openstreetmap.org/). |
| `/lof/map/ll_map_markers` | Lanelet2-map enriched with attributes from [OpenStreetMap](openstreetmap.org/); Lanelets are colorized based on agreement between adjacent lanelets and lanes-tag of [OpenStreetMap](openstreetmap.org/). |
| `/lof/map/ll_map_new_markers` | Lanelet2-map enriched with attributes from [OpenStreetMap](openstreetmap.org/); Lanelets that are likely to be wrong were removed by the module "Deletion of Lanelet Fragments". |
| `/lof/traj/traj_master_markers` | Master trajectory -&gt; to be defined in config-file (usually GNSS-trajectory) |
| `/lof/traj/traj_target_markers` | original target rajectory (usually SLAM-trajectory) |
| `/lof/traj/traj_align_markers` | target trajectory aligned to master with [Umeyama](https://web.stanford.edu/class/cs273/refs/umeyama.pdf)-algorithm |
| `/lof/traj/traj_rs_markers` | target trajectory after [rubber-sheet](https://www.tandfonline.com/doi/abs/10.1559/152304085783915135)-transformation based on control points |
| `/lof/rs/geom_markers` | geometric information from rubber-sheeting (control points and constructed triangles) |
| `/clicked_point` | last 2 selected points by user to indicate chosen control points |
| `/lof/confl/geom_markers` | geometric information regarding conflation process (collapsed lanelet-map, buffers, matches) |

   - Inspect results and modify parameters if desired.
5. Manually finalize lanelet map
   - open a manual editor for lanelet2 maps (e.g. [VectorMapBuilder](https://tools.tier4.jp/feature/vector_map_builder_ll2/)) in parallel to RVIZ
   - import the exported map from `out_path`
   - close gaps in lanelet map and correct other mistakes based on visualization of map agreement with [OpenStreetMap](openstreetmap.org/) in RVIZ

&lt;/details&gt;

<details> 
<summary> <h3> 📄 kiss_icp_georef &lt;/h2&gt; &lt;/summary&gt;
   
1. Necessary input parameters:
   - `traj_path` =&gt; path to GPS trajectory of the vehicle (format: txt-file with lat, lon)
   - `poses_path` =&gt; path to SLAM trajectory of the vehicle (KITTI-format, trajectories don't have to be synchronized over time)
   - `pcd_path` =&gt; path to pcd map corresponding to poses trajectory
   - `pcd_out_path` =&gt; path to saved the georeferenced point cloud map (DEFAULT: /pcd_map_georef.pcd)
2. Start the package
   - it is recommended to directly use the provided ROS launch file that starts the package itself and the visualization in RVIZ:

   
```bash
       ros2 launch flexmap_fusion kiss_icp_georef.launch.py traj_path:=<path-to-gps-trajectory> poses_path:=<path-to-slam-trajectory>  pcd_path:=<path-to-pcd-map> pcd_out_path:=<path-to-save-pcd-map>
   
```

   - the launch file directly links to the corresponding parameter file in `/config/`.

3. Select control points
   - after the trajectories are loaded and the target trajectory is roughly aligned to the master trajectory you are asked in the command window to select control points for the rubber-sheet transformation (the amount of points can be configured in the config file).
   - select the desired points using the `Publish Point` button in RVIZ and follow the instructions in the console.
4. Inspect results
   - results of the rubber-sheet transformation &amp; the resulting, transformed point cloud map are visualized.
   - see table for explanation of single topics

| Topic | Description |
| ----------- | ----------- |
| `/lof/traj/traj_master_markers` | Master trajectory -&gt; to be defined in config-file (either GNSS- or SLAM trajectory) |
| `/lof/traj/traj_target_markers` | original target rajectory -&gt; depending on selected master trajectory (either GNSS- or SLAM trajectory) |
| `/lof/traj/traj_align_markers` | target trajectory aligned to master with [Umeyama](https://web.stanford.edu/class/cs273/refs/umeyama.pdf) transformation or [PCL ICP](https://pointclouds.org/documentation/classpcl_1_1_iterative_closest_point.html) |
| `/lof/traj/traj_rs_markers` | target trajectory after [rubber-sheet](https://www.tandfonline.com/doi/abs/10.1559/152304085783915135)-transformation |
| `/lof/rs/geom_markers` | geometric information from rubber-sheeting (control points and constructed triangles) |
| `/clicked_point` | last 2 selected points by user to indicate chosen control point |
| `/lof/rs/pcd_map` | transformed point cloud map (only when using `kiss_icp_georef`) |

   - Inspect results and modify parameters if desired.
&lt;/details&gt;

* the parameter files for both executables are located in `/config`
* see the comments within the single `.param.yaml`-files for detailed explanations on the parameters
* to modify the parameters inside the container and view their current value, python-executables are provided:
   * to view the current value of a parameter, run
   
```bash
      get_param.py <config_file_name> <param_name>
   
```
   inside the container. 
   * to modify a parameter, run
   
```bash
      config_param.py <config_file_name> <param_name> <param_value> <param_type>
   
```
   inside the container. Supported parameter types are `str`, `int`, `float` and `bool`. See the current value for the right choice, otherwise the node will crash.
   * Example:
   Set amount of control points for rubber-sheeting:
   
```bash
      config_param.py lanelet2_osm.param.yaml rs_num_controlPoints 10 int
   
```
   Check effect:
   
```bash
      get_param.py lanelet2_osm.param.yaml rs_num_controlPoints
   
```

&lt;/details&gt;

<details>
<summary> <h2> 📈 Test Data </h2> </summary> (GPS trajectory). The SLAM poses were generated by [KISS-ICP](https://github.com/PRBonn/kiss-icp) in combination with [interactive SLAM](https://github.com/SMRT-AIST/interactive_slam). The lanelet2-map was created manually with [VectorMapBuilder](https://tools.tier4.jp/feature/vector_map_builder_ll2/) by TieriV.

</details>

<details>
<summary> <h2> 🔧 Modules </h2> </summary>

Detailed documentation of the functionality behind the single modules can be found below.

1. [Geometric Alignment](doc/alignment.md)

2. [Preprocessing](doc/preprocessing.md)

3. [Matching](doc/matching.md)

4. [Conflation](doc/conflation.md)

5. [Georeferencing](doc/georef.md)

6. [Analysis](doc/analysis.md)

</details>

<details>
<summary> <h2> 📇 Contact Info </h2> </summary>

[Maximilian Leitenstern](mailto:maxi.leitenstern@tum.de),
Institute of Automotive Technology,
School of Engineering and Design,
Technical University of Munich,
85748 Garching,
Germany

[Florian Sauerbeck](mailto:florian.sauerbeck@tum.de),
Institute of Automotive Technology,
School of Engineering and Design,
Technical University of Munich,
85748 Garching,
Germany

[Dominik Kulmer](mailto:dominik.kulmer@tum.de),
Institute of Automotive Technology,
School of Engineering and Design,
Technical University of Munich,
85748 Garching,
Germany
</details>

<details>
<summary> <h2> 📃 Citation </h2> </summary>
   
If you use this repository for any academic work, please cite our original paper:


```bibtex
@misc{leitenstern2024flexmap,
      title={FlexMap Fusion: Georeferencing and Automated Conflation of HD Maps with OpenStreetMap}, 
      author={Maximilian Leitenstern and Florian Sauerbeck and Dominik Kulmer and Johannes Betz},
      year={2024},
      eprint={2404.10879},
      archivePrefix={arXiv},
      primaryClass={cs.RO}
}

```
</details>
</param_type></param_value></param_name></config_file_name></param_name></config_file_name></path-to-save-pcd-map></path-to-pcd-map></path-to-slam-trajectory></path-to-gps-trajectory>
</h3></summary></details></path-to-save-output-map></path-to-lanelet-map></path-to-slam-trajectory></path-to-gps-trajectory>
</h3></summary></details></details>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/flexmap_fusion">flexmap_fusion</a> <small>repository</small></h3>
        <span class="label label-default">mapping</span> <span class="label label-default">point-cloud</span> <span class="label label-default">georeferencing</span> <span class="label label-default">ros2</span> <span class="label label-default">autoware</span> <span class="label label-default">lanelet2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tumftm-flexmap_fusion
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tumftm-flexmap_fusion" role="menuitem" tabindex="-1" href="/r/flexmap_fusion/github-tumftm-flexmap_fusion" data="github-tumftm-flexmap_fusion">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tumftm-flexmap_fusion
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/flexmap_fusion">flexmap_fusion</a> <small>repository</small></h3>
        <span class="label label-default">mapping</span> <span class="label label-default">point-cloud</span> <span class="label label-default">georeferencing</span> <span class="label label-default">ros2</span> <span class="label label-default">autoware</span> <span class="label label-default">lanelet2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tumftm-flexmap_fusion
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tumftm-flexmap_fusion" role="menuitem" tabindex="-1" href="/r/flexmap_fusion/github-tumftm-flexmap_fusion" data="github-tumftm-flexmap_fusion">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tumftm-flexmap_fusion
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/flexmap_fusion">flexmap_fusion</a> <small>repository</small></h3>
        <span class="label label-default">mapping</span> <span class="label label-default">point-cloud</span> <span class="label label-default">georeferencing</span> <span class="label label-default">ros2</span> <span class="label label-default">autoware</span> <span class="label label-default">lanelet2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tumftm-flexmap_fusion
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tumftm-flexmap_fusion" role="menuitem" tabindex="-1" href="/r/flexmap_fusion/github-tumftm-flexmap_fusion" data="github-tumftm-flexmap_fusion">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tumftm-flexmap_fusion
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>iron</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/flexmap_fusion">flexmap_fusion</a> <small>repository</small></h3>
        <span class="label label-default">mapping</span> <span class="label label-default">point-cloud</span> <span class="label label-default">georeferencing</span> <span class="label label-default">ros2</span> <span class="label label-default">autoware</span> <span class="label label-default">lanelet2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tumftm-flexmap_fusion
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tumftm-flexmap_fusion" role="menuitem" tabindex="-1" href="/r/flexmap_fusion/github-tumftm-flexmap_fusion" data="github-tumftm-flexmap_fusion">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tumftm-flexmap_fusion
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/tumftm/flexmap_fusion.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
