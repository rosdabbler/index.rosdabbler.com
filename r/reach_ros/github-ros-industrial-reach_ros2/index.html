<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/reach_ros/github-ros-industrial-reach_ros2/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">reach_ros</li>
        <!--<li class="active">reach_ros</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-primary" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-primary" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-primary" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-primary" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-default" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class="disabled older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/reach_ros">reach_ros</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/reach_ros">reach_ros</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-industrial-reach_ros2
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-industrial-reach_ros" role="menuitem" tabindex="-1" href="/r/reach_ros/github-ros-industrial-reach_ros" data="github-ros-industrial-reach_ros">
                    <span class="glyphicon glyphicon-none"></span>
                    github-ros-industrial-reach_ros
                  </a>
                </li>
              
                <li role="presentation">
                  <a id="github-ros-industrial-reach_ros2" role="menuitem" tabindex="-1" href="/r/reach_ros/github-ros-industrial-reach_ros2" data="github-ros-industrial-reach_ros2">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-industrial-reach_ros2
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS2 packages for REACH</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-industrial/reach_ros2.git">https://github.com/ros-industrial/reach_ros2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-03-06
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/reach_ros/#humble-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/reach_ros/#humble-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/reach_ros/#humble-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/reach_ros">reach_ros</a></td>
                    <td>1.4.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="reach-ros-plugins">REACH ROS Plugins</h1>
<p><img src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" alt="">
<a href="https://github.com/ros-industrial/reach_ros2/actions/workflows/ubuntu.yml"><img src="https://github.com/ros-industrial/reach_ros2/actions/workflows/ubuntu.yml/badge.svg" alt="Ubuntu"></a></p>

<p>This package contains the ROS2-based plugin implemenations of REACH kinematics, evaluation, and display interfaces</p>

<p><img src="https://raw.githubusercontent.com/ros-industrial/reach_ros2/master/demo/docs/reach_study_demo.gif" alt="REACH ROS"></p>

<h2 id="installation">Installation</h2>
<p>First, clone the repository into a <code class="language-plaintext highlighter-rouge">colcon</code> workspace</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/reach_ws/src
git clone https://github.com/ros-industrial/reach_ros2.git
<span class="nb">cd</span> ..

</code></pre></div></div>

<p>Install the dependencies</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vcs import src &lt; src/reach_ros2/dependencies.repos
rosdep <span class="nb">install</span> <span class="nt">--from-paths</span> src <span class="nt">--ignore-src</span> <span class="nt">-r</span> <span class="nt">-y</span>

</code></pre></div></div>

<p>Build the repository</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>colcon build --symlink-install

</code></pre></div></div>

<h2 id="demo">Demo</h2>
<p>A simple demonstration of the capability of this repository is provided in the <code class="language-plaintext highlighter-rouge">demo</code> sub-directory.
See the <a href="https://github.com/ros-industrial/reach_ros2/tree/master/demo/README.md">instructions</a> for details on how to launch the demo from ROS 2 and see the <a href="https://github.com/ros-industrial/reach_ros2/tree/master/demo/python/README.md">Python instructions</a> to see how you can use the Python interface to launch studies.</p>

<h2 id="usage">Usage</h2>
<p>Use the following steps to run a reach study with a robot using the ROS1 infrastructure and plugins.</p>

<ol>
  <li>Create any files describing your robot system required by the REACH plugins (e.g., URDF, SRDF, kinematics file, joint limits file, etc.)</li>
  <li>Create a mesh model of the workpiece
    <blockquote>
      <p>Note: the origin of this model should align with the kinematic base frame of the robot</p>
    </blockquote>
  </li>
  <li>Create a point cloud of the target points on the workpiece
    <ul>
      <li>This point cloud can be generated using a command line tool from PCL 1.8:</li>
    </ul>
  </li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      pcl_mesh_sampling &lt;workpiece_mesh&gt;.ply &lt;output_cloud&gt;.pcd -n_samples &lt;number of samples&gt; -leaf_size &lt;leaf_size&gt; -write_normals true
      
</code></pre></div></div>
<ol>
  <li>Create a configuration YAML file defining the parameters of the reach study and the configuration of the interface plugins (see <a href="https://github.com/ros-industrial/reach_ros2/tree/master/demo/config/reach_study.yaml">this demo example</a>)</li>
  <li>Run the setup launch file</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    ros2 launch reach_ros setup.launch robot_description_file:=&lt;path_to_URDF&gt;
    
</code></pre></div></div>
<ol>
  <li>Run the reach study analysis</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    ros2 launch reach_ros start.launch \
      robot_description_file:=&lt;path_to_URDF&gt; \
      robot_description_semantic_file:=&lt;path_to_SRDF&gt; \
      robot_description_kinematics_file:=&lt;path_to_kinematics.yaml&gt; \
      robot_description_joint_limits_file:=&lt;path_to_joint_limits.yaml&gt; \
      config_file:=&lt;config_file.yaml&gt; \
      config_name:=&lt;arbitrary_config&gt; \
      results_dir:=&lt;arbitrary_results_directory&gt;
    
</code></pre></div></div>

<h2 id="evaluation-plugins">Evaluation Plugins</h2>

<h3 id="manipulability">Manipulability</h3>

<p>This plugin uses MoveIt! to calculate the manipulability of a robot pose. Higher manipulability results in a higher pose score. Range: [0, inf)</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>The name of the planning group with which to evaluate the manipulability of a given robot pose</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">jacobian_row_subset</code></strong> (optional)
    <ul>
      <li>The indices of the rows of the Jacobian to use when evaluating the manipulability. The row indices should be on [0, 6) and correspond to the output space [x, y, z, rx, ry, rz]</li>
      <li>Ex. <code class="language-plaintext highlighter-rouge">jacobian_row_subset: [0, 1, 2]  # position manipulability only</code>
</li>
    </ul>
  </li>
</ul>

<h3 id="manipulability-scaled">Manipulability Scaled</h3>

<p>This plugin uses MoveIt! to calculate the manipulability of a robot pose divided by the characteristic length of the motion group.
The characteristic length is computed by walking from the base link to the tip link of the motion group and summing the distances between adjacent links.
Higher scaled manipulability results in a higher pose score. Range: [0, inf)</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>The name of the planning group with which to evaluate the manipulability of a given robot pose</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">jacobian_row_subset</code></strong> (optional)
    <ul>
      <li>The indices of the rows of the Jacobian to use when evaluating the manipulability. The row indices should be on [0, 6) and correspond to the output space [x, y, z, rx, ry, rz]</li>
      <li>Ex. <code class="language-plaintext highlighter-rouge">jacobian_row_subset: [0, 1, 2]  # position manipulability only</code>
</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">excluded_links</code></strong> (optional)
    <ul>
      <li>The names of links contained in the motion group that should not contribute to the characteristic length</li>
    </ul>
  </li>
</ul>

<h3 id="manipulability-ratio">Manipulability Ratio</h3>

<p>This plugin uses MoveIt! to calculate the manipulability of a robot pose and evaluate a score. The score is calculated as the ratio of the smallest manipulability value to the largest manipulability value.
The larger this ratio, the more uniform the dexterity and the higher the score. Range [0, 1]</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>The name of the planning group with which to evaluate the manipulability of a given robot pose</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">jacobian_row_subset</code></strong> (optional)
    <ul>
      <li>The indices of the rows of the Jacobian to use when evaluating the manipulability. The row indices should be on [0, 6) and correspond to the output space [x, y, z, rx, ry, rz]</li>
      <li>Ex. <code class="language-plaintext highlighter-rouge">jacobian_row_subset: [0, 1, 2]  # position manipulability only</code>
</li>
    </ul>
  </li>
</ul>

<h3 id="distance-penalty">Distance Penalty</h3>

<p>This plugin uses the MoveIt! collision environment to calculate the distance to closest collision
for a robot pose. That distance value is then used to score the robot pose. Larger distance to closest collision
results in higher pose score. Range: [0, 1]</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>The name of the planning group to be used to solve the robot’s inverse kinematics</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">distance_threshold</code></strong>
    <ul>
      <li>The distance between 2 closest surfaces to collision under which an inverse kinematics solution will be considered invalid</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_filename</code></strong> (optional)
    <ul>
      <li>The filename (in ROS package URI format) of the reach object mesh to be used to do collision checking</li>
      <li>Example: `package://<your_package>/<folder>/<filename>.stl</filename></folder></your_package>
</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_frame</code></strong> (optional)
    <ul>
      <li>The TF frame to which the collision mesh should be attached</li>
      <li>If left unspecified, the collision mesh will be attached to the kinematic base frame associated with <code class="language-plaintext highlighter-rouge">planning_group</code>
</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">touch_links</code></strong>
    <ul>
      <li>The names of the robot links with which the reach object mesh is allowed to collide</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">exponent</code></strong>
    <ul>
      <li>score = min(abs(closest_distance_to_collision / distance_threshold), 1.0)^exponent.</li>
    </ul>
  </li>
</ul>

<h3 id="joint-penalty">Joint Penalty</h3>

<p>This plugin uses the MoveIt! robot model to calculate a robot pose score based on how much the pose deviates
from the center of the joint range. Robot poses that are closer to the center of the joint range result in higher pose scores. Range: [0, 1]</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>The name of the planning_group with which to evaluate the joint penalty</li>
    </ul>
  </li>
</ul>

<h2 id="ik-solvers">IK Solvers</h2>

<h3 id="moveit-ik-solver">MoveIt! IK Solver</h3>

<p>This plugin uses MoveIt! kinematics solvers and collision checking to produce collision aware IK solutions</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>Name of the planning group</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">distance_threshold</code></strong>
    <ul>
      <li>The distance from nearest collision at which to invalidate an IK solution. For example, if this parameter is
set to 0.1m, then IK solutions whose distance to nearest collision is less than 0.1m will be invalidated</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_filename</code></strong> (optional)
    <ul>
      <li>The file path to the collision mesh model of the workpiece, in the <code class="language-plaintext highlighter-rouge">package://</code> or ‘file://’ URI format</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_frame</code></strong> (optional)
    <ul>
      <li>The TF frame to which the collision mesh should be attached</li>
      <li>If left unspecified, the collision mesh will be attached to the kinematic base frame associated with <code class="language-plaintext highlighter-rouge">planning_group</code>
</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">touch_links</code></strong>
    <ul>
      <li>The TF links that are allowed to be in contact with the collision mesh</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">evaluation_plugin</code></strong>
    <ul>
      <li>The name (and parameters) of the evaluation plugin to be used to score IK solution poses</li>
    </ul>
  </li>
</ul>

<h3 id="discretized-moveit-ik-solver">Discretized MoveIt! IK Solver</h3>

<p>This plugin performs the same function as the MoveIt! IK solver plugin above, but calculates IK solutions for
a target that has been discretized about its Z-axis by an input angle. The pose with the best score is returned.</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>Name of the planning group</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">distance_threshold</code></strong>
    <ul>
      <li>The distance from nearest collision at which to invalidate an IK solution. For example, if this parameter is
set to 0.1m, then IK solutions whose distance to nearest collision is less than 0.1m will be invalidated</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_filename</code></strong> (optional)
    <ul>
      <li>The file path to the collision mesh model of the workpiece, in the <code class="language-plaintext highlighter-rouge">package://</code> or ‘file://’ URI format</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_frame</code></strong> (optional)
    <ul>
      <li>The TF frame to which the collision mesh should be attached</li>
      <li>If left unspecified, the collision mesh will be attached to the kinematic base frame associated with <code class="language-plaintext highlighter-rouge">planning_group</code>
</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">touch_links</code></strong>
    <ul>
      <li>The TF links that are allowed to be in contact with the collision mesh</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">evaluation_plugin</code></strong>
    <ul>
      <li>The name (and parameters) of the evaluation plugin to be used to score IK solution poses</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">discretization_angle</code></strong>
    <ul>
      <li>The angle (between 0 and pi, in radians) with which to sample each target pose about the Z-axis</li>
    </ul>
  </li>
</ul>

<h2 id="display-plugins">Display Plugins</h2>

<h3 id="ros-reach-display">ROS Reach Display</h3>

<p>This plugin publishes joint state and visualization markers to display the results of the reach study.
The markers are interactive:</p>
<ul>
  <li>Left-clicking on a marker will change the robot position to the IK solution
    <ul>
      <li>This works by publishing a <code class="language-plaintext highlighter-rouge">sensor_msgs/JointState</code> message to the <code class="language-plaintext highlighter-rouge">reach_joints</code> topic, which is a source topic for the <code class="language-plaintext highlighter-rouge">joint_state_publisher</code>
</li>
    </ul>
  </li>
  <li>Right-clicking on the marker will bring up a context menu that displays the score of the reach target</li>
</ul>

<p>The markers are colorized with a heat-map, where red represents the highest scores (i.e., hottest) and blue represents the lowest scores (i.e., coldest).
Unreachable points are colorized black. There are two methods for computing the values for the heat map:</p>
<ol>
  <li>By default, the values for the heat map are computed as the ratio of the individual scores to the maximum score.
  Thus if the scores of the reach study are all fairly consistent and close to the maximum, then the colors of the markers will be mostly red (with the target with the maximum score being the deepest hue of red).
  If the scores of the reach study targets differ greatly, more variation in color will be seen.
  Usually this method produces the most meaningful display.</li>
  <li>The values can also be computed using the “full color range”, where the scores are fully normalized before colorization.
  The lowest score (regardless of value) is always displayed as the deepest hue of blue and the the highest score is always shown as the deepest hue of red.
  This is valuable for highlighting differences in reachability but can be misleading due to the normalization of the scores.</li>
</ol>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_filename</code></strong>
    <ul>
      <li>The file path to the collision mesh model of the workpiece, in the <code class="language-plaintext highlighter-rouge">package://</code> or <code class="language-plaintext highlighter-rouge">file://</code> URI format</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_frame</code></strong>
    <ul>
      <li>The TF frame to which the collision mesh should be attached</li>
      <li>If left unspecified, the collision mesh will be attached to <code class="language-plaintext highlighter-rouge">kinematic_base_frame</code>
</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">kinematic_base_frame</code></strong>
    <ul>
      <li>The base frame of the kinematic tree in which to display the interactive markers</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">marker_scale</code></strong>
    <ul>
      <li>The length (in meters) of the arrow markers representing the target Cartesian points</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">use_full_color_range</code></strong> (optional, default: False)
    <ul>
      <li>Colorize the heat map using the full range of colors (such that the target with the lowest score is the deepest hue of blue, and the target with the highest score is the deepest hue of red)</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">hue_low_score</code></strong> (optional, default: 270.0)
    <ul>
      <li>Allows changing the default heatmap style coloring to a different color scale in HSV space (e.g. <code class="language-plaintext highlighter-rouge">hue_low_score: 0.0, hue_high_score: 180.0</code> will lead to a red to green color scale).</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">hue_high_score</code></strong> (optional, default: 0.0)
    <ul>
      <li>See <code class="language-plaintext highlighter-rouge">hue_low_score</code> for an explanation.</li>
    </ul>
  </li>
</ul>

<h2 id="target-pose-generator-plugins">Target Pose Generator Plugins</h2>

<h3 id="transformed-point-cloud-target-pose-generator">Transformed Point Cloud Target Pose Generator</h3>

<p>This plugin inherits <code class="language-plaintext highlighter-rouge">reach::PointCloudTargetPoseGenerator</code>, which creates target reach study waypoints from a point cloud file with normals, and transforms the point cloud points into a desired URDF frame (typically the kinematic base frame of the robot).</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">pcd_file</code></strong>
    <ul>
      <li>The path to the point cloud file (.pcd format), in the <code class="language-plaintext highlighter-rouge">package://</code> or <code class="language-plaintext highlighter-rouge">file://</code> URI</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">points_frame</code></strong>
    <ul>
      <li>The frame of the URDF to which the point cloud points are relative (i.e. the origin frame of the point cloud)</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">target_frame</code></strong>
    <ul>
      <li>The frame into which the point cloud points should be transformed for the reach study purposes. This should be the kinematic base frame of the robot</li>
    </ul>
  </li>
</ul>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/reach_ros">reach_ros</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/reach_ros">reach_ros</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-industrial-reach_ros2
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-industrial-reach_ros" role="menuitem" tabindex="-1" href="/r/reach_ros/github-ros-industrial-reach_ros" data="github-ros-industrial-reach_ros">
                    <span class="glyphicon glyphicon-none"></span>
                    github-ros-industrial-reach_ros
                  </a>
                </li>
              
                <li role="presentation">
                  <a id="github-ros-industrial-reach_ros2" role="menuitem" tabindex="-1" href="/r/reach_ros/github-ros-industrial-reach_ros2" data="github-ros-industrial-reach_ros2">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-industrial-reach_ros2
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS2 packages for REACH</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-industrial/reach_ros2.git">https://github.com/ros-industrial/reach_ros2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-03-06
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/reach_ros/#jazzy-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/reach_ros/#jazzy-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/reach_ros/#jazzy-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/reach_ros">reach_ros</a></td>
                    <td>1.4.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="reach-ros-plugins">REACH ROS Plugins</h1>
<p><img src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" alt="">
<a href="https://github.com/ros-industrial/reach_ros2/actions/workflows/ubuntu.yml"><img src="https://github.com/ros-industrial/reach_ros2/actions/workflows/ubuntu.yml/badge.svg" alt="Ubuntu"></a></p>

<p>This package contains the ROS2-based plugin implemenations of REACH kinematics, evaluation, and display interfaces</p>

<p><img src="https://raw.githubusercontent.com/ros-industrial/reach_ros2/master/demo/docs/reach_study_demo.gif" alt="REACH ROS"></p>

<h2 id="installation">Installation</h2>
<p>First, clone the repository into a <code class="language-plaintext highlighter-rouge">colcon</code> workspace</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/reach_ws/src
git clone https://github.com/ros-industrial/reach_ros2.git
<span class="nb">cd</span> ..

</code></pre></div></div>

<p>Install the dependencies</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vcs import src &lt; src/reach_ros2/dependencies.repos
rosdep <span class="nb">install</span> <span class="nt">--from-paths</span> src <span class="nt">--ignore-src</span> <span class="nt">-r</span> <span class="nt">-y</span>

</code></pre></div></div>

<p>Build the repository</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>colcon build --symlink-install

</code></pre></div></div>

<h2 id="demo">Demo</h2>
<p>A simple demonstration of the capability of this repository is provided in the <code class="language-plaintext highlighter-rouge">demo</code> sub-directory.
See the <a href="https://github.com/ros-industrial/reach_ros2/tree/master/demo/README.md">instructions</a> for details on how to launch the demo from ROS 2 and see the <a href="https://github.com/ros-industrial/reach_ros2/tree/master/demo/python/README.md">Python instructions</a> to see how you can use the Python interface to launch studies.</p>

<h2 id="usage">Usage</h2>
<p>Use the following steps to run a reach study with a robot using the ROS1 infrastructure and plugins.</p>

<ol>
  <li>Create any files describing your robot system required by the REACH plugins (e.g., URDF, SRDF, kinematics file, joint limits file, etc.)</li>
  <li>Create a mesh model of the workpiece
    <blockquote>
      <p>Note: the origin of this model should align with the kinematic base frame of the robot</p>
    </blockquote>
  </li>
  <li>Create a point cloud of the target points on the workpiece
    <ul>
      <li>This point cloud can be generated using a command line tool from PCL 1.8:</li>
    </ul>
  </li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      pcl_mesh_sampling &lt;workpiece_mesh&gt;.ply &lt;output_cloud&gt;.pcd -n_samples &lt;number of samples&gt; -leaf_size &lt;leaf_size&gt; -write_normals true
      
</code></pre></div></div>
<ol>
  <li>Create a configuration YAML file defining the parameters of the reach study and the configuration of the interface plugins (see <a href="https://github.com/ros-industrial/reach_ros2/tree/master/demo/config/reach_study.yaml">this demo example</a>)</li>
  <li>Run the setup launch file</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    ros2 launch reach_ros setup.launch robot_description_file:=&lt;path_to_URDF&gt;
    
</code></pre></div></div>
<ol>
  <li>Run the reach study analysis</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    ros2 launch reach_ros start.launch \
      robot_description_file:=&lt;path_to_URDF&gt; \
      robot_description_semantic_file:=&lt;path_to_SRDF&gt; \
      robot_description_kinematics_file:=&lt;path_to_kinematics.yaml&gt; \
      robot_description_joint_limits_file:=&lt;path_to_joint_limits.yaml&gt; \
      config_file:=&lt;config_file.yaml&gt; \
      config_name:=&lt;arbitrary_config&gt; \
      results_dir:=&lt;arbitrary_results_directory&gt;
    
</code></pre></div></div>

<h2 id="evaluation-plugins">Evaluation Plugins</h2>

<h3 id="manipulability">Manipulability</h3>

<p>This plugin uses MoveIt! to calculate the manipulability of a robot pose. Higher manipulability results in a higher pose score. Range: [0, inf)</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>The name of the planning group with which to evaluate the manipulability of a given robot pose</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">jacobian_row_subset</code></strong> (optional)
    <ul>
      <li>The indices of the rows of the Jacobian to use when evaluating the manipulability. The row indices should be on [0, 6) and correspond to the output space [x, y, z, rx, ry, rz]</li>
      <li>Ex. <code class="language-plaintext highlighter-rouge">jacobian_row_subset: [0, 1, 2]  # position manipulability only</code>
</li>
    </ul>
  </li>
</ul>

<h3 id="manipulability-scaled">Manipulability Scaled</h3>

<p>This plugin uses MoveIt! to calculate the manipulability of a robot pose divided by the characteristic length of the motion group.
The characteristic length is computed by walking from the base link to the tip link of the motion group and summing the distances between adjacent links.
Higher scaled manipulability results in a higher pose score. Range: [0, inf)</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>The name of the planning group with which to evaluate the manipulability of a given robot pose</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">jacobian_row_subset</code></strong> (optional)
    <ul>
      <li>The indices of the rows of the Jacobian to use when evaluating the manipulability. The row indices should be on [0, 6) and correspond to the output space [x, y, z, rx, ry, rz]</li>
      <li>Ex. <code class="language-plaintext highlighter-rouge">jacobian_row_subset: [0, 1, 2]  # position manipulability only</code>
</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">excluded_links</code></strong> (optional)
    <ul>
      <li>The names of links contained in the motion group that should not contribute to the characteristic length</li>
    </ul>
  </li>
</ul>

<h3 id="manipulability-ratio">Manipulability Ratio</h3>

<p>This plugin uses MoveIt! to calculate the manipulability of a robot pose and evaluate a score. The score is calculated as the ratio of the smallest manipulability value to the largest manipulability value.
The larger this ratio, the more uniform the dexterity and the higher the score. Range [0, 1]</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>The name of the planning group with which to evaluate the manipulability of a given robot pose</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">jacobian_row_subset</code></strong> (optional)
    <ul>
      <li>The indices of the rows of the Jacobian to use when evaluating the manipulability. The row indices should be on [0, 6) and correspond to the output space [x, y, z, rx, ry, rz]</li>
      <li>Ex. <code class="language-plaintext highlighter-rouge">jacobian_row_subset: [0, 1, 2]  # position manipulability only</code>
</li>
    </ul>
  </li>
</ul>

<h3 id="distance-penalty">Distance Penalty</h3>

<p>This plugin uses the MoveIt! collision environment to calculate the distance to closest collision
for a robot pose. That distance value is then used to score the robot pose. Larger distance to closest collision
results in higher pose score. Range: [0, 1]</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>The name of the planning group to be used to solve the robot’s inverse kinematics</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">distance_threshold</code></strong>
    <ul>
      <li>The distance between 2 closest surfaces to collision under which an inverse kinematics solution will be considered invalid</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_filename</code></strong> (optional)
    <ul>
      <li>The filename (in ROS package URI format) of the reach object mesh to be used to do collision checking</li>
      <li>Example: `package://<your_package>/<folder>/<filename>.stl</filename></folder></your_package>
</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_frame</code></strong> (optional)
    <ul>
      <li>The TF frame to which the collision mesh should be attached</li>
      <li>If left unspecified, the collision mesh will be attached to the kinematic base frame associated with <code class="language-plaintext highlighter-rouge">planning_group</code>
</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">touch_links</code></strong>
    <ul>
      <li>The names of the robot links with which the reach object mesh is allowed to collide</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">exponent</code></strong>
    <ul>
      <li>score = min(abs(closest_distance_to_collision / distance_threshold), 1.0)^exponent.</li>
    </ul>
  </li>
</ul>

<h3 id="joint-penalty">Joint Penalty</h3>

<p>This plugin uses the MoveIt! robot model to calculate a robot pose score based on how much the pose deviates
from the center of the joint range. Robot poses that are closer to the center of the joint range result in higher pose scores. Range: [0, 1]</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>The name of the planning_group with which to evaluate the joint penalty</li>
    </ul>
  </li>
</ul>

<h2 id="ik-solvers">IK Solvers</h2>

<h3 id="moveit-ik-solver">MoveIt! IK Solver</h3>

<p>This plugin uses MoveIt! kinematics solvers and collision checking to produce collision aware IK solutions</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>Name of the planning group</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">distance_threshold</code></strong>
    <ul>
      <li>The distance from nearest collision at which to invalidate an IK solution. For example, if this parameter is
set to 0.1m, then IK solutions whose distance to nearest collision is less than 0.1m will be invalidated</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_filename</code></strong> (optional)
    <ul>
      <li>The file path to the collision mesh model of the workpiece, in the <code class="language-plaintext highlighter-rouge">package://</code> or ‘file://’ URI format</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_frame</code></strong> (optional)
    <ul>
      <li>The TF frame to which the collision mesh should be attached</li>
      <li>If left unspecified, the collision mesh will be attached to the kinematic base frame associated with <code class="language-plaintext highlighter-rouge">planning_group</code>
</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">touch_links</code></strong>
    <ul>
      <li>The TF links that are allowed to be in contact with the collision mesh</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">evaluation_plugin</code></strong>
    <ul>
      <li>The name (and parameters) of the evaluation plugin to be used to score IK solution poses</li>
    </ul>
  </li>
</ul>

<h3 id="discretized-moveit-ik-solver">Discretized MoveIt! IK Solver</h3>

<p>This plugin performs the same function as the MoveIt! IK solver plugin above, but calculates IK solutions for
a target that has been discretized about its Z-axis by an input angle. The pose with the best score is returned.</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>Name of the planning group</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">distance_threshold</code></strong>
    <ul>
      <li>The distance from nearest collision at which to invalidate an IK solution. For example, if this parameter is
set to 0.1m, then IK solutions whose distance to nearest collision is less than 0.1m will be invalidated</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_filename</code></strong> (optional)
    <ul>
      <li>The file path to the collision mesh model of the workpiece, in the <code class="language-plaintext highlighter-rouge">package://</code> or ‘file://’ URI format</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_frame</code></strong> (optional)
    <ul>
      <li>The TF frame to which the collision mesh should be attached</li>
      <li>If left unspecified, the collision mesh will be attached to the kinematic base frame associated with <code class="language-plaintext highlighter-rouge">planning_group</code>
</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">touch_links</code></strong>
    <ul>
      <li>The TF links that are allowed to be in contact with the collision mesh</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">evaluation_plugin</code></strong>
    <ul>
      <li>The name (and parameters) of the evaluation plugin to be used to score IK solution poses</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">discretization_angle</code></strong>
    <ul>
      <li>The angle (between 0 and pi, in radians) with which to sample each target pose about the Z-axis</li>
    </ul>
  </li>
</ul>

<h2 id="display-plugins">Display Plugins</h2>

<h3 id="ros-reach-display">ROS Reach Display</h3>

<p>This plugin publishes joint state and visualization markers to display the results of the reach study.
The markers are interactive:</p>
<ul>
  <li>Left-clicking on a marker will change the robot position to the IK solution
    <ul>
      <li>This works by publishing a <code class="language-plaintext highlighter-rouge">sensor_msgs/JointState</code> message to the <code class="language-plaintext highlighter-rouge">reach_joints</code> topic, which is a source topic for the <code class="language-plaintext highlighter-rouge">joint_state_publisher</code>
</li>
    </ul>
  </li>
  <li>Right-clicking on the marker will bring up a context menu that displays the score of the reach target</li>
</ul>

<p>The markers are colorized with a heat-map, where red represents the highest scores (i.e., hottest) and blue represents the lowest scores (i.e., coldest).
Unreachable points are colorized black. There are two methods for computing the values for the heat map:</p>
<ol>
  <li>By default, the values for the heat map are computed as the ratio of the individual scores to the maximum score.
  Thus if the scores of the reach study are all fairly consistent and close to the maximum, then the colors of the markers will be mostly red (with the target with the maximum score being the deepest hue of red).
  If the scores of the reach study targets differ greatly, more variation in color will be seen.
  Usually this method produces the most meaningful display.</li>
  <li>The values can also be computed using the “full color range”, where the scores are fully normalized before colorization.
  The lowest score (regardless of value) is always displayed as the deepest hue of blue and the the highest score is always shown as the deepest hue of red.
  This is valuable for highlighting differences in reachability but can be misleading due to the normalization of the scores.</li>
</ol>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_filename</code></strong>
    <ul>
      <li>The file path to the collision mesh model of the workpiece, in the <code class="language-plaintext highlighter-rouge">package://</code> or <code class="language-plaintext highlighter-rouge">file://</code> URI format</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_frame</code></strong>
    <ul>
      <li>The TF frame to which the collision mesh should be attached</li>
      <li>If left unspecified, the collision mesh will be attached to <code class="language-plaintext highlighter-rouge">kinematic_base_frame</code>
</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">kinematic_base_frame</code></strong>
    <ul>
      <li>The base frame of the kinematic tree in which to display the interactive markers</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">marker_scale</code></strong>
    <ul>
      <li>The length (in meters) of the arrow markers representing the target Cartesian points</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">use_full_color_range</code></strong> (optional, default: False)
    <ul>
      <li>Colorize the heat map using the full range of colors (such that the target with the lowest score is the deepest hue of blue, and the target with the highest score is the deepest hue of red)</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">hue_low_score</code></strong> (optional, default: 270.0)
    <ul>
      <li>Allows changing the default heatmap style coloring to a different color scale in HSV space (e.g. <code class="language-plaintext highlighter-rouge">hue_low_score: 0.0, hue_high_score: 180.0</code> will lead to a red to green color scale).</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">hue_high_score</code></strong> (optional, default: 0.0)
    <ul>
      <li>See <code class="language-plaintext highlighter-rouge">hue_low_score</code> for an explanation.</li>
    </ul>
  </li>
</ul>

<h2 id="target-pose-generator-plugins">Target Pose Generator Plugins</h2>

<h3 id="transformed-point-cloud-target-pose-generator">Transformed Point Cloud Target Pose Generator</h3>

<p>This plugin inherits <code class="language-plaintext highlighter-rouge">reach::PointCloudTargetPoseGenerator</code>, which creates target reach study waypoints from a point cloud file with normals, and transforms the point cloud points into a desired URDF frame (typically the kinematic base frame of the robot).</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">pcd_file</code></strong>
    <ul>
      <li>The path to the point cloud file (.pcd format), in the <code class="language-plaintext highlighter-rouge">package://</code> or <code class="language-plaintext highlighter-rouge">file://</code> URI</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">points_frame</code></strong>
    <ul>
      <li>The frame of the URDF to which the point cloud points are relative (i.e. the origin frame of the point cloud)</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">target_frame</code></strong>
    <ul>
      <li>The frame into which the point cloud points should be transformed for the reach study purposes. This should be the kinematic base frame of the robot</li>
    </ul>
  </li>
</ul>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/reach_ros">reach_ros</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/reach_ros">reach_ros</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-industrial-reach_ros2
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-industrial-reach_ros" role="menuitem" tabindex="-1" href="/r/reach_ros/github-ros-industrial-reach_ros" data="github-ros-industrial-reach_ros">
                    <span class="glyphicon glyphicon-none"></span>
                    github-ros-industrial-reach_ros
                  </a>
                </li>
              
                <li role="presentation">
                  <a id="github-ros-industrial-reach_ros2" role="menuitem" tabindex="-1" href="/r/reach_ros/github-ros-industrial-reach_ros2" data="github-ros-industrial-reach_ros2">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-industrial-reach_ros2
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS2 packages for REACH</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-industrial/reach_ros2.git">https://github.com/ros-industrial/reach_ros2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-03-06
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/reach_ros/#kilted-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/reach_ros/#kilted-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/reach_ros/#kilted-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/reach_ros">reach_ros</a></td>
                    <td>1.4.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="reach-ros-plugins">REACH ROS Plugins</h1>
<p><img src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" alt="">
<a href="https://github.com/ros-industrial/reach_ros2/actions/workflows/ubuntu.yml"><img src="https://github.com/ros-industrial/reach_ros2/actions/workflows/ubuntu.yml/badge.svg" alt="Ubuntu"></a></p>

<p>This package contains the ROS2-based plugin implemenations of REACH kinematics, evaluation, and display interfaces</p>

<p><img src="https://raw.githubusercontent.com/ros-industrial/reach_ros2/master/demo/docs/reach_study_demo.gif" alt="REACH ROS"></p>

<h2 id="installation">Installation</h2>
<p>First, clone the repository into a <code class="language-plaintext highlighter-rouge">colcon</code> workspace</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/reach_ws/src
git clone https://github.com/ros-industrial/reach_ros2.git
<span class="nb">cd</span> ..

</code></pre></div></div>

<p>Install the dependencies</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vcs import src &lt; src/reach_ros2/dependencies.repos
rosdep <span class="nb">install</span> <span class="nt">--from-paths</span> src <span class="nt">--ignore-src</span> <span class="nt">-r</span> <span class="nt">-y</span>

</code></pre></div></div>

<p>Build the repository</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>colcon build --symlink-install

</code></pre></div></div>

<h2 id="demo">Demo</h2>
<p>A simple demonstration of the capability of this repository is provided in the <code class="language-plaintext highlighter-rouge">demo</code> sub-directory.
See the <a href="https://github.com/ros-industrial/reach_ros2/tree/master/demo/README.md">instructions</a> for details on how to launch the demo from ROS 2 and see the <a href="https://github.com/ros-industrial/reach_ros2/tree/master/demo/python/README.md">Python instructions</a> to see how you can use the Python interface to launch studies.</p>

<h2 id="usage">Usage</h2>
<p>Use the following steps to run a reach study with a robot using the ROS1 infrastructure and plugins.</p>

<ol>
  <li>Create any files describing your robot system required by the REACH plugins (e.g., URDF, SRDF, kinematics file, joint limits file, etc.)</li>
  <li>Create a mesh model of the workpiece
    <blockquote>
      <p>Note: the origin of this model should align with the kinematic base frame of the robot</p>
    </blockquote>
  </li>
  <li>Create a point cloud of the target points on the workpiece
    <ul>
      <li>This point cloud can be generated using a command line tool from PCL 1.8:</li>
    </ul>
  </li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      pcl_mesh_sampling &lt;workpiece_mesh&gt;.ply &lt;output_cloud&gt;.pcd -n_samples &lt;number of samples&gt; -leaf_size &lt;leaf_size&gt; -write_normals true
      
</code></pre></div></div>
<ol>
  <li>Create a configuration YAML file defining the parameters of the reach study and the configuration of the interface plugins (see <a href="https://github.com/ros-industrial/reach_ros2/tree/master/demo/config/reach_study.yaml">this demo example</a>)</li>
  <li>Run the setup launch file</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    ros2 launch reach_ros setup.launch robot_description_file:=&lt;path_to_URDF&gt;
    
</code></pre></div></div>
<ol>
  <li>Run the reach study analysis</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    ros2 launch reach_ros start.launch \
      robot_description_file:=&lt;path_to_URDF&gt; \
      robot_description_semantic_file:=&lt;path_to_SRDF&gt; \
      robot_description_kinematics_file:=&lt;path_to_kinematics.yaml&gt; \
      robot_description_joint_limits_file:=&lt;path_to_joint_limits.yaml&gt; \
      config_file:=&lt;config_file.yaml&gt; \
      config_name:=&lt;arbitrary_config&gt; \
      results_dir:=&lt;arbitrary_results_directory&gt;
    
</code></pre></div></div>

<h2 id="evaluation-plugins">Evaluation Plugins</h2>

<h3 id="manipulability">Manipulability</h3>

<p>This plugin uses MoveIt! to calculate the manipulability of a robot pose. Higher manipulability results in a higher pose score. Range: [0, inf)</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>The name of the planning group with which to evaluate the manipulability of a given robot pose</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">jacobian_row_subset</code></strong> (optional)
    <ul>
      <li>The indices of the rows of the Jacobian to use when evaluating the manipulability. The row indices should be on [0, 6) and correspond to the output space [x, y, z, rx, ry, rz]</li>
      <li>Ex. <code class="language-plaintext highlighter-rouge">jacobian_row_subset: [0, 1, 2]  # position manipulability only</code>
</li>
    </ul>
  </li>
</ul>

<h3 id="manipulability-scaled">Manipulability Scaled</h3>

<p>This plugin uses MoveIt! to calculate the manipulability of a robot pose divided by the characteristic length of the motion group.
The characteristic length is computed by walking from the base link to the tip link of the motion group and summing the distances between adjacent links.
Higher scaled manipulability results in a higher pose score. Range: [0, inf)</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>The name of the planning group with which to evaluate the manipulability of a given robot pose</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">jacobian_row_subset</code></strong> (optional)
    <ul>
      <li>The indices of the rows of the Jacobian to use when evaluating the manipulability. The row indices should be on [0, 6) and correspond to the output space [x, y, z, rx, ry, rz]</li>
      <li>Ex. <code class="language-plaintext highlighter-rouge">jacobian_row_subset: [0, 1, 2]  # position manipulability only</code>
</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">excluded_links</code></strong> (optional)
    <ul>
      <li>The names of links contained in the motion group that should not contribute to the characteristic length</li>
    </ul>
  </li>
</ul>

<h3 id="manipulability-ratio">Manipulability Ratio</h3>

<p>This plugin uses MoveIt! to calculate the manipulability of a robot pose and evaluate a score. The score is calculated as the ratio of the smallest manipulability value to the largest manipulability value.
The larger this ratio, the more uniform the dexterity and the higher the score. Range [0, 1]</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>The name of the planning group with which to evaluate the manipulability of a given robot pose</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">jacobian_row_subset</code></strong> (optional)
    <ul>
      <li>The indices of the rows of the Jacobian to use when evaluating the manipulability. The row indices should be on [0, 6) and correspond to the output space [x, y, z, rx, ry, rz]</li>
      <li>Ex. <code class="language-plaintext highlighter-rouge">jacobian_row_subset: [0, 1, 2]  # position manipulability only</code>
</li>
    </ul>
  </li>
</ul>

<h3 id="distance-penalty">Distance Penalty</h3>

<p>This plugin uses the MoveIt! collision environment to calculate the distance to closest collision
for a robot pose. That distance value is then used to score the robot pose. Larger distance to closest collision
results in higher pose score. Range: [0, 1]</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>The name of the planning group to be used to solve the robot’s inverse kinematics</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">distance_threshold</code></strong>
    <ul>
      <li>The distance between 2 closest surfaces to collision under which an inverse kinematics solution will be considered invalid</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_filename</code></strong> (optional)
    <ul>
      <li>The filename (in ROS package URI format) of the reach object mesh to be used to do collision checking</li>
      <li>Example: `package://<your_package>/<folder>/<filename>.stl</filename></folder></your_package>
</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_frame</code></strong> (optional)
    <ul>
      <li>The TF frame to which the collision mesh should be attached</li>
      <li>If left unspecified, the collision mesh will be attached to the kinematic base frame associated with <code class="language-plaintext highlighter-rouge">planning_group</code>
</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">touch_links</code></strong>
    <ul>
      <li>The names of the robot links with which the reach object mesh is allowed to collide</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">exponent</code></strong>
    <ul>
      <li>score = min(abs(closest_distance_to_collision / distance_threshold), 1.0)^exponent.</li>
    </ul>
  </li>
</ul>

<h3 id="joint-penalty">Joint Penalty</h3>

<p>This plugin uses the MoveIt! robot model to calculate a robot pose score based on how much the pose deviates
from the center of the joint range. Robot poses that are closer to the center of the joint range result in higher pose scores. Range: [0, 1]</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>The name of the planning_group with which to evaluate the joint penalty</li>
    </ul>
  </li>
</ul>

<h2 id="ik-solvers">IK Solvers</h2>

<h3 id="moveit-ik-solver">MoveIt! IK Solver</h3>

<p>This plugin uses MoveIt! kinematics solvers and collision checking to produce collision aware IK solutions</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>Name of the planning group</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">distance_threshold</code></strong>
    <ul>
      <li>The distance from nearest collision at which to invalidate an IK solution. For example, if this parameter is
set to 0.1m, then IK solutions whose distance to nearest collision is less than 0.1m will be invalidated</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_filename</code></strong> (optional)
    <ul>
      <li>The file path to the collision mesh model of the workpiece, in the <code class="language-plaintext highlighter-rouge">package://</code> or ‘file://’ URI format</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_frame</code></strong> (optional)
    <ul>
      <li>The TF frame to which the collision mesh should be attached</li>
      <li>If left unspecified, the collision mesh will be attached to the kinematic base frame associated with <code class="language-plaintext highlighter-rouge">planning_group</code>
</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">touch_links</code></strong>
    <ul>
      <li>The TF links that are allowed to be in contact with the collision mesh</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">evaluation_plugin</code></strong>
    <ul>
      <li>The name (and parameters) of the evaluation plugin to be used to score IK solution poses</li>
    </ul>
  </li>
</ul>

<h3 id="discretized-moveit-ik-solver">Discretized MoveIt! IK Solver</h3>

<p>This plugin performs the same function as the MoveIt! IK solver plugin above, but calculates IK solutions for
a target that has been discretized about its Z-axis by an input angle. The pose with the best score is returned.</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>Name of the planning group</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">distance_threshold</code></strong>
    <ul>
      <li>The distance from nearest collision at which to invalidate an IK solution. For example, if this parameter is
set to 0.1m, then IK solutions whose distance to nearest collision is less than 0.1m will be invalidated</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_filename</code></strong> (optional)
    <ul>
      <li>The file path to the collision mesh model of the workpiece, in the <code class="language-plaintext highlighter-rouge">package://</code> or ‘file://’ URI format</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_frame</code></strong> (optional)
    <ul>
      <li>The TF frame to which the collision mesh should be attached</li>
      <li>If left unspecified, the collision mesh will be attached to the kinematic base frame associated with <code class="language-plaintext highlighter-rouge">planning_group</code>
</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">touch_links</code></strong>
    <ul>
      <li>The TF links that are allowed to be in contact with the collision mesh</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">evaluation_plugin</code></strong>
    <ul>
      <li>The name (and parameters) of the evaluation plugin to be used to score IK solution poses</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">discretization_angle</code></strong>
    <ul>
      <li>The angle (between 0 and pi, in radians) with which to sample each target pose about the Z-axis</li>
    </ul>
  </li>
</ul>

<h2 id="display-plugins">Display Plugins</h2>

<h3 id="ros-reach-display">ROS Reach Display</h3>

<p>This plugin publishes joint state and visualization markers to display the results of the reach study.
The markers are interactive:</p>
<ul>
  <li>Left-clicking on a marker will change the robot position to the IK solution
    <ul>
      <li>This works by publishing a <code class="language-plaintext highlighter-rouge">sensor_msgs/JointState</code> message to the <code class="language-plaintext highlighter-rouge">reach_joints</code> topic, which is a source topic for the <code class="language-plaintext highlighter-rouge">joint_state_publisher</code>
</li>
    </ul>
  </li>
  <li>Right-clicking on the marker will bring up a context menu that displays the score of the reach target</li>
</ul>

<p>The markers are colorized with a heat-map, where red represents the highest scores (i.e., hottest) and blue represents the lowest scores (i.e., coldest).
Unreachable points are colorized black. There are two methods for computing the values for the heat map:</p>
<ol>
  <li>By default, the values for the heat map are computed as the ratio of the individual scores to the maximum score.
  Thus if the scores of the reach study are all fairly consistent and close to the maximum, then the colors of the markers will be mostly red (with the target with the maximum score being the deepest hue of red).
  If the scores of the reach study targets differ greatly, more variation in color will be seen.
  Usually this method produces the most meaningful display.</li>
  <li>The values can also be computed using the “full color range”, where the scores are fully normalized before colorization.
  The lowest score (regardless of value) is always displayed as the deepest hue of blue and the the highest score is always shown as the deepest hue of red.
  This is valuable for highlighting differences in reachability but can be misleading due to the normalization of the scores.</li>
</ol>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_filename</code></strong>
    <ul>
      <li>The file path to the collision mesh model of the workpiece, in the <code class="language-plaintext highlighter-rouge">package://</code> or <code class="language-plaintext highlighter-rouge">file://</code> URI format</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_frame</code></strong>
    <ul>
      <li>The TF frame to which the collision mesh should be attached</li>
      <li>If left unspecified, the collision mesh will be attached to <code class="language-plaintext highlighter-rouge">kinematic_base_frame</code>
</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">kinematic_base_frame</code></strong>
    <ul>
      <li>The base frame of the kinematic tree in which to display the interactive markers</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">marker_scale</code></strong>
    <ul>
      <li>The length (in meters) of the arrow markers representing the target Cartesian points</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">use_full_color_range</code></strong> (optional, default: False)
    <ul>
      <li>Colorize the heat map using the full range of colors (such that the target with the lowest score is the deepest hue of blue, and the target with the highest score is the deepest hue of red)</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">hue_low_score</code></strong> (optional, default: 270.0)
    <ul>
      <li>Allows changing the default heatmap style coloring to a different color scale in HSV space (e.g. <code class="language-plaintext highlighter-rouge">hue_low_score: 0.0, hue_high_score: 180.0</code> will lead to a red to green color scale).</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">hue_high_score</code></strong> (optional, default: 0.0)
    <ul>
      <li>See <code class="language-plaintext highlighter-rouge">hue_low_score</code> for an explanation.</li>
    </ul>
  </li>
</ul>

<h2 id="target-pose-generator-plugins">Target Pose Generator Plugins</h2>

<h3 id="transformed-point-cloud-target-pose-generator">Transformed Point Cloud Target Pose Generator</h3>

<p>This plugin inherits <code class="language-plaintext highlighter-rouge">reach::PointCloudTargetPoseGenerator</code>, which creates target reach study waypoints from a point cloud file with normals, and transforms the point cloud points into a desired URDF frame (typically the kinematic base frame of the robot).</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">pcd_file</code></strong>
    <ul>
      <li>The path to the point cloud file (.pcd format), in the <code class="language-plaintext highlighter-rouge">package://</code> or <code class="language-plaintext highlighter-rouge">file://</code> URI</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">points_frame</code></strong>
    <ul>
      <li>The frame of the URDF to which the point cloud points are relative (i.e. the origin frame of the point cloud)</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">target_frame</code></strong>
    <ul>
      <li>The frame into which the point cloud points should be transformed for the reach study purposes. This should be the kinematic base frame of the robot</li>
    </ul>
  </li>
</ul>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/reach_ros">reach_ros</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/reach_ros">reach_ros</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-industrial-reach_ros2
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-industrial-reach_ros" role="menuitem" tabindex="-1" href="/r/reach_ros/github-ros-industrial-reach_ros" data="github-ros-industrial-reach_ros">
                    <span class="glyphicon glyphicon-none"></span>
                    github-ros-industrial-reach_ros
                  </a>
                </li>
              
                <li role="presentation">
                  <a id="github-ros-industrial-reach_ros2" role="menuitem" tabindex="-1" href="/r/reach_ros/github-ros-industrial-reach_ros2" data="github-ros-industrial-reach_ros2">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-industrial-reach_ros2
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS2 packages for REACH</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-industrial/reach_ros2.git">https://github.com/ros-industrial/reach_ros2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-03-06
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/reach_ros/#rolling-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/reach_ros/#rolling-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/reach_ros/#rolling-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/reach_ros">reach_ros</a></td>
                    <td>1.4.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="reach-ros-plugins">REACH ROS Plugins</h1>
<p><img src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" alt="">
<a href="https://github.com/ros-industrial/reach_ros2/actions/workflows/ubuntu.yml"><img src="https://github.com/ros-industrial/reach_ros2/actions/workflows/ubuntu.yml/badge.svg" alt="Ubuntu"></a></p>

<p>This package contains the ROS2-based plugin implemenations of REACH kinematics, evaluation, and display interfaces</p>

<p><img src="https://raw.githubusercontent.com/ros-industrial/reach_ros2/master/demo/docs/reach_study_demo.gif" alt="REACH ROS"></p>

<h2 id="installation">Installation</h2>
<p>First, clone the repository into a <code class="language-plaintext highlighter-rouge">colcon</code> workspace</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/reach_ws/src
git clone https://github.com/ros-industrial/reach_ros2.git
<span class="nb">cd</span> ..

</code></pre></div></div>

<p>Install the dependencies</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vcs import src &lt; src/reach_ros2/dependencies.repos
rosdep <span class="nb">install</span> <span class="nt">--from-paths</span> src <span class="nt">--ignore-src</span> <span class="nt">-r</span> <span class="nt">-y</span>

</code></pre></div></div>

<p>Build the repository</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>colcon build --symlink-install

</code></pre></div></div>

<h2 id="demo">Demo</h2>
<p>A simple demonstration of the capability of this repository is provided in the <code class="language-plaintext highlighter-rouge">demo</code> sub-directory.
See the <a href="https://github.com/ros-industrial/reach_ros2/tree/master/demo/README.md">instructions</a> for details on how to launch the demo from ROS 2 and see the <a href="https://github.com/ros-industrial/reach_ros2/tree/master/demo/python/README.md">Python instructions</a> to see how you can use the Python interface to launch studies.</p>

<h2 id="usage">Usage</h2>
<p>Use the following steps to run a reach study with a robot using the ROS1 infrastructure and plugins.</p>

<ol>
  <li>Create any files describing your robot system required by the REACH plugins (e.g., URDF, SRDF, kinematics file, joint limits file, etc.)</li>
  <li>Create a mesh model of the workpiece
    <blockquote>
      <p>Note: the origin of this model should align with the kinematic base frame of the robot</p>
    </blockquote>
  </li>
  <li>Create a point cloud of the target points on the workpiece
    <ul>
      <li>This point cloud can be generated using a command line tool from PCL 1.8:</li>
    </ul>
  </li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      pcl_mesh_sampling &lt;workpiece_mesh&gt;.ply &lt;output_cloud&gt;.pcd -n_samples &lt;number of samples&gt; -leaf_size &lt;leaf_size&gt; -write_normals true
      
</code></pre></div></div>
<ol>
  <li>Create a configuration YAML file defining the parameters of the reach study and the configuration of the interface plugins (see <a href="https://github.com/ros-industrial/reach_ros2/tree/master/demo/config/reach_study.yaml">this demo example</a>)</li>
  <li>Run the setup launch file</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    ros2 launch reach_ros setup.launch robot_description_file:=&lt;path_to_URDF&gt;
    
</code></pre></div></div>
<ol>
  <li>Run the reach study analysis</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    ros2 launch reach_ros start.launch \
      robot_description_file:=&lt;path_to_URDF&gt; \
      robot_description_semantic_file:=&lt;path_to_SRDF&gt; \
      robot_description_kinematics_file:=&lt;path_to_kinematics.yaml&gt; \
      robot_description_joint_limits_file:=&lt;path_to_joint_limits.yaml&gt; \
      config_file:=&lt;config_file.yaml&gt; \
      config_name:=&lt;arbitrary_config&gt; \
      results_dir:=&lt;arbitrary_results_directory&gt;
    
</code></pre></div></div>

<h2 id="evaluation-plugins">Evaluation Plugins</h2>

<h3 id="manipulability">Manipulability</h3>

<p>This plugin uses MoveIt! to calculate the manipulability of a robot pose. Higher manipulability results in a higher pose score. Range: [0, inf)</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>The name of the planning group with which to evaluate the manipulability of a given robot pose</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">jacobian_row_subset</code></strong> (optional)
    <ul>
      <li>The indices of the rows of the Jacobian to use when evaluating the manipulability. The row indices should be on [0, 6) and correspond to the output space [x, y, z, rx, ry, rz]</li>
      <li>Ex. <code class="language-plaintext highlighter-rouge">jacobian_row_subset: [0, 1, 2]  # position manipulability only</code>
</li>
    </ul>
  </li>
</ul>

<h3 id="manipulability-scaled">Manipulability Scaled</h3>

<p>This plugin uses MoveIt! to calculate the manipulability of a robot pose divided by the characteristic length of the motion group.
The characteristic length is computed by walking from the base link to the tip link of the motion group and summing the distances between adjacent links.
Higher scaled manipulability results in a higher pose score. Range: [0, inf)</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>The name of the planning group with which to evaluate the manipulability of a given robot pose</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">jacobian_row_subset</code></strong> (optional)
    <ul>
      <li>The indices of the rows of the Jacobian to use when evaluating the manipulability. The row indices should be on [0, 6) and correspond to the output space [x, y, z, rx, ry, rz]</li>
      <li>Ex. <code class="language-plaintext highlighter-rouge">jacobian_row_subset: [0, 1, 2]  # position manipulability only</code>
</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">excluded_links</code></strong> (optional)
    <ul>
      <li>The names of links contained in the motion group that should not contribute to the characteristic length</li>
    </ul>
  </li>
</ul>

<h3 id="manipulability-ratio">Manipulability Ratio</h3>

<p>This plugin uses MoveIt! to calculate the manipulability of a robot pose and evaluate a score. The score is calculated as the ratio of the smallest manipulability value to the largest manipulability value.
The larger this ratio, the more uniform the dexterity and the higher the score. Range [0, 1]</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>The name of the planning group with which to evaluate the manipulability of a given robot pose</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">jacobian_row_subset</code></strong> (optional)
    <ul>
      <li>The indices of the rows of the Jacobian to use when evaluating the manipulability. The row indices should be on [0, 6) and correspond to the output space [x, y, z, rx, ry, rz]</li>
      <li>Ex. <code class="language-plaintext highlighter-rouge">jacobian_row_subset: [0, 1, 2]  # position manipulability only</code>
</li>
    </ul>
  </li>
</ul>

<h3 id="distance-penalty">Distance Penalty</h3>

<p>This plugin uses the MoveIt! collision environment to calculate the distance to closest collision
for a robot pose. That distance value is then used to score the robot pose. Larger distance to closest collision
results in higher pose score. Range: [0, 1]</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>The name of the planning group to be used to solve the robot’s inverse kinematics</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">distance_threshold</code></strong>
    <ul>
      <li>The distance between 2 closest surfaces to collision under which an inverse kinematics solution will be considered invalid</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_filename</code></strong> (optional)
    <ul>
      <li>The filename (in ROS package URI format) of the reach object mesh to be used to do collision checking</li>
      <li>Example: `package://<your_package>/<folder>/<filename>.stl</filename></folder></your_package>
</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_frame</code></strong> (optional)
    <ul>
      <li>The TF frame to which the collision mesh should be attached</li>
      <li>If left unspecified, the collision mesh will be attached to the kinematic base frame associated with <code class="language-plaintext highlighter-rouge">planning_group</code>
</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">touch_links</code></strong>
    <ul>
      <li>The names of the robot links with which the reach object mesh is allowed to collide</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">exponent</code></strong>
    <ul>
      <li>score = min(abs(closest_distance_to_collision / distance_threshold), 1.0)^exponent.</li>
    </ul>
  </li>
</ul>

<h3 id="joint-penalty">Joint Penalty</h3>

<p>This plugin uses the MoveIt! robot model to calculate a robot pose score based on how much the pose deviates
from the center of the joint range. Robot poses that are closer to the center of the joint range result in higher pose scores. Range: [0, 1]</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>The name of the planning_group with which to evaluate the joint penalty</li>
    </ul>
  </li>
</ul>

<h2 id="ik-solvers">IK Solvers</h2>

<h3 id="moveit-ik-solver">MoveIt! IK Solver</h3>

<p>This plugin uses MoveIt! kinematics solvers and collision checking to produce collision aware IK solutions</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>Name of the planning group</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">distance_threshold</code></strong>
    <ul>
      <li>The distance from nearest collision at which to invalidate an IK solution. For example, if this parameter is
set to 0.1m, then IK solutions whose distance to nearest collision is less than 0.1m will be invalidated</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_filename</code></strong> (optional)
    <ul>
      <li>The file path to the collision mesh model of the workpiece, in the <code class="language-plaintext highlighter-rouge">package://</code> or ‘file://’ URI format</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_frame</code></strong> (optional)
    <ul>
      <li>The TF frame to which the collision mesh should be attached</li>
      <li>If left unspecified, the collision mesh will be attached to the kinematic base frame associated with <code class="language-plaintext highlighter-rouge">planning_group</code>
</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">touch_links</code></strong>
    <ul>
      <li>The TF links that are allowed to be in contact with the collision mesh</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">evaluation_plugin</code></strong>
    <ul>
      <li>The name (and parameters) of the evaluation plugin to be used to score IK solution poses</li>
    </ul>
  </li>
</ul>

<h3 id="discretized-moveit-ik-solver">Discretized MoveIt! IK Solver</h3>

<p>This plugin performs the same function as the MoveIt! IK solver plugin above, but calculates IK solutions for
a target that has been discretized about its Z-axis by an input angle. The pose with the best score is returned.</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">planning_group</code></strong>
    <ul>
      <li>Name of the planning group</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">distance_threshold</code></strong>
    <ul>
      <li>The distance from nearest collision at which to invalidate an IK solution. For example, if this parameter is
set to 0.1m, then IK solutions whose distance to nearest collision is less than 0.1m will be invalidated</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_filename</code></strong> (optional)
    <ul>
      <li>The file path to the collision mesh model of the workpiece, in the <code class="language-plaintext highlighter-rouge">package://</code> or ‘file://’ URI format</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_frame</code></strong> (optional)
    <ul>
      <li>The TF frame to which the collision mesh should be attached</li>
      <li>If left unspecified, the collision mesh will be attached to the kinematic base frame associated with <code class="language-plaintext highlighter-rouge">planning_group</code>
</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">touch_links</code></strong>
    <ul>
      <li>The TF links that are allowed to be in contact with the collision mesh</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">evaluation_plugin</code></strong>
    <ul>
      <li>The name (and parameters) of the evaluation plugin to be used to score IK solution poses</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">discretization_angle</code></strong>
    <ul>
      <li>The angle (between 0 and pi, in radians) with which to sample each target pose about the Z-axis</li>
    </ul>
  </li>
</ul>

<h2 id="display-plugins">Display Plugins</h2>

<h3 id="ros-reach-display">ROS Reach Display</h3>

<p>This plugin publishes joint state and visualization markers to display the results of the reach study.
The markers are interactive:</p>
<ul>
  <li>Left-clicking on a marker will change the robot position to the IK solution
    <ul>
      <li>This works by publishing a <code class="language-plaintext highlighter-rouge">sensor_msgs/JointState</code> message to the <code class="language-plaintext highlighter-rouge">reach_joints</code> topic, which is a source topic for the <code class="language-plaintext highlighter-rouge">joint_state_publisher</code>
</li>
    </ul>
  </li>
  <li>Right-clicking on the marker will bring up a context menu that displays the score of the reach target</li>
</ul>

<p>The markers are colorized with a heat-map, where red represents the highest scores (i.e., hottest) and blue represents the lowest scores (i.e., coldest).
Unreachable points are colorized black. There are two methods for computing the values for the heat map:</p>
<ol>
  <li>By default, the values for the heat map are computed as the ratio of the individual scores to the maximum score.
  Thus if the scores of the reach study are all fairly consistent and close to the maximum, then the colors of the markers will be mostly red (with the target with the maximum score being the deepest hue of red).
  If the scores of the reach study targets differ greatly, more variation in color will be seen.
  Usually this method produces the most meaningful display.</li>
  <li>The values can also be computed using the “full color range”, where the scores are fully normalized before colorization.
  The lowest score (regardless of value) is always displayed as the deepest hue of blue and the the highest score is always shown as the deepest hue of red.
  This is valuable for highlighting differences in reachability but can be misleading due to the normalization of the scores.</li>
</ol>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_filename</code></strong>
    <ul>
      <li>The file path to the collision mesh model of the workpiece, in the <code class="language-plaintext highlighter-rouge">package://</code> or <code class="language-plaintext highlighter-rouge">file://</code> URI format</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">collision_mesh_frame</code></strong>
    <ul>
      <li>The TF frame to which the collision mesh should be attached</li>
      <li>If left unspecified, the collision mesh will be attached to <code class="language-plaintext highlighter-rouge">kinematic_base_frame</code>
</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">kinematic_base_frame</code></strong>
    <ul>
      <li>The base frame of the kinematic tree in which to display the interactive markers</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">marker_scale</code></strong>
    <ul>
      <li>The length (in meters) of the arrow markers representing the target Cartesian points</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">use_full_color_range</code></strong> (optional, default: False)
    <ul>
      <li>Colorize the heat map using the full range of colors (such that the target with the lowest score is the deepest hue of blue, and the target with the highest score is the deepest hue of red)</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">hue_low_score</code></strong> (optional, default: 270.0)
    <ul>
      <li>Allows changing the default heatmap style coloring to a different color scale in HSV space (e.g. <code class="language-plaintext highlighter-rouge">hue_low_score: 0.0, hue_high_score: 180.0</code> will lead to a red to green color scale).</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">hue_high_score</code></strong> (optional, default: 0.0)
    <ul>
      <li>See <code class="language-plaintext highlighter-rouge">hue_low_score</code> for an explanation.</li>
    </ul>
  </li>
</ul>

<h2 id="target-pose-generator-plugins">Target Pose Generator Plugins</h2>

<h3 id="transformed-point-cloud-target-pose-generator">Transformed Point Cloud Target Pose Generator</h3>

<p>This plugin inherits <code class="language-plaintext highlighter-rouge">reach::PointCloudTargetPoseGenerator</code>, which creates target reach study waypoints from a point cloud file with normals, and transforms the point cloud points into a desired URDF frame (typically the kinematic base frame of the robot).</p>

<p>Parameters:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">pcd_file</code></strong>
    <ul>
      <li>The path to the point cloud file (.pcd format), in the <code class="language-plaintext highlighter-rouge">package://</code> or <code class="language-plaintext highlighter-rouge">file://</code> URI</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">points_frame</code></strong>
    <ul>
      <li>The frame of the URDF to which the point cloud points are relative (i.e. the origin frame of the point cloud)</li>
    </ul>
  </li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">target_frame</code></strong>
    <ul>
      <li>The frame into which the point cloud points should be transformed for the reach study purposes. This should be the kinematic base frame of the robot</li>
    </ul>
  </li>
</ul>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/reach_ros">reach_ros</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-industrial-reach_ros2
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-industrial-reach_ros" role="menuitem" tabindex="-1" href="/r/reach_ros/github-ros-industrial-reach_ros" data="github-ros-industrial-reach_ros">
                    <span class="glyphicon glyphicon-none"></span>
                    github-ros-industrial-reach_ros
                  </a>
                </li>
              
                <li role="presentation">
                  <a id="github-ros-industrial-reach_ros2" role="menuitem" tabindex="-1" href="/r/reach_ros/github-ros-industrial-reach_ros2" data="github-ros-industrial-reach_ros2">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-industrial-reach_ros2
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>github</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/reach_ros">reach_ros</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-industrial-reach_ros2
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-industrial-reach_ros" role="menuitem" tabindex="-1" href="/r/reach_ros/github-ros-industrial-reach_ros" data="github-ros-industrial-reach_ros">
                    <span class="glyphicon glyphicon-none"></span>
                    github-ros-industrial-reach_ros
                  </a>
                </li>
              
                <li role="presentation">
                  <a id="github-ros-industrial-reach_ros2" role="menuitem" tabindex="-1" href="/r/reach_ros/github-ros-industrial-reach_ros2" data="github-ros-industrial-reach_ros2">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-industrial-reach_ros2
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/reach_ros">reach_ros</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-industrial-reach_ros2
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-industrial-reach_ros" role="menuitem" tabindex="-1" href="/r/reach_ros/github-ros-industrial-reach_ros" data="github-ros-industrial-reach_ros">
                    <span class="glyphicon glyphicon-none"></span>
                    github-ros-industrial-reach_ros
                  </a>
                </li>
              
                <li role="presentation">
                  <a id="github-ros-industrial-reach_ros2" role="menuitem" tabindex="-1" href="/r/reach_ros/github-ros-industrial-reach_ros2" data="github-ros-industrial-reach_ros2">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-industrial-reach_ros2
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/reach_ros">reach_ros</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-industrial-reach_ros2
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-industrial-reach_ros" role="menuitem" tabindex="-1" href="/r/reach_ros/github-ros-industrial-reach_ros" data="github-ros-industrial-reach_ros">
                    <span class="glyphicon glyphicon-none"></span>
                    github-ros-industrial-reach_ros
                  </a>
                </li>
              
                <li role="presentation">
                  <a id="github-ros-industrial-reach_ros2" role="menuitem" tabindex="-1" href="/r/reach_ros/github-ros-industrial-reach_ros2" data="github-ros-industrial-reach_ros2">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-industrial-reach_ros2
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>iron</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/reach_ros">reach_ros</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-industrial-reach_ros2
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-industrial-reach_ros" role="menuitem" tabindex="-1" href="/r/reach_ros/github-ros-industrial-reach_ros" data="github-ros-industrial-reach_ros">
                    <span class="glyphicon glyphicon-none"></span>
                    github-ros-industrial-reach_ros
                  </a>
                </li>
              
                <li role="presentation">
                  <a id="github-ros-industrial-reach_ros2" role="menuitem" tabindex="-1" href="/r/reach_ros/github-ros-industrial-reach_ros2" data="github-ros-industrial-reach_ros2">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-industrial-reach_ros2
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/ros-industrial/reach_ros2.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
