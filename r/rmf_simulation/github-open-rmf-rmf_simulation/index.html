<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/rmf_simulation/github-open-rmf-rmf_simulation/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">rmf_simulation</li>
        <!--<li class="active">rmf_simulation</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-primary" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-primary" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-primary" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-primary" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-default" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class=" older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class=" older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rmf_simulation">rmf_simulation</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/rmf_building_sim_common">rmf_building_sim_common</a>
        
        <a class="label label-primary pkg-label" href="/p/rmf_building_sim_gz_classic_plugins">rmf_building_sim_gz_classic_plugins</a>
        
        <a class="label label-primary pkg-label" href="/p/rmf_building_sim_gz_plugins">rmf_building_sim_gz_plugins</a>
        
        <a class="label label-primary pkg-label" href="/p/rmf_robot_sim_common">rmf_robot_sim_common</a>
        
        <a class="label label-primary pkg-label" href="/p/rmf_robot_sim_gz_classic_plugins">rmf_robot_sim_gz_classic_plugins</a>
        
        <a class="label label-primary pkg-label" href="/p/rmf_robot_sim_gz_plugins">rmf_robot_sim_gz_plugins</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-open-rmf-rmf_simulation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-open-rmf-rmf_simulation" role="menuitem" tabindex="-1" href="/r/rmf_simulation/github-open-rmf-rmf_simulation" data="github-open-rmf-rmf_simulation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-open-rmf-rmf_simulation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Support plugins for simulating RMF scenarios</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/open-rmf/rmf_simulation.git">https://github.com/open-rmf/rmf_simulation.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">humble</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-06-13
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rmf_simulation/#humble-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rmf_simulation/#humble-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rmf_simulation/#humble-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/rmf_building_sim_common">rmf_building_sim_common</a></td>
                    <td>2.0.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rmf_building_sim_gz_classic_plugins">rmf_building_sim_gz_classic_plugins</a></td>
                    <td>2.0.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rmf_building_sim_gz_plugins">rmf_building_sim_gz_plugins</a></td>
                    <td>2.0.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rmf_robot_sim_common">rmf_robot_sim_common</a></td>
                    <td>2.0.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rmf_robot_sim_gz_classic_plugins">rmf_robot_sim_gz_classic_plugins</a></td>
                    <td>2.0.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rmf_robot_sim_gz_plugins">rmf_robot_sim_gz_plugins</a></td>
                    <td>2.0.2</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="rmf_simulation">rmf_simulation</h1>

<p>This repository contains simulation plugins used in Open-RMF. It currently supports Gazebo Classic 11 and Gazebo Fortress.</p>

<p>Simulation plugins are split in Building simulation and Robot simulation plugins</p>

<h3 id="building-simulation">Building Simulation</h3>

<p>Building simulation plugins are located under <code class="language-plaintext highlighter-rouge">rmf_building_sim_*</code> and used to simulate different aspect of buildings such as doors, lifts and crowds (currently through the <a href="https://github.com/open-rmf/menge_vendor">Menge library</a>). Utility plugins to help with simulation, such as UI widgets to toggle battery consumption and set charging behavior, as well as toggling floor visibility, are also placed in this category.</p>

<h4 id="door-plugin">Door plugin</h4>

<p>The door plugin is a model plugin that can be attached to door models to make them interface with Open-RMF. It adds a publisher for door state and a subscription to door requests.
An example SDF snippet is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"door"</span> <span class="na">filename=</span><span class="s">"libdoor.so"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;v_max_door&gt;</span>0.5<span class="nt">&lt;/v_max_door&gt;</span>
  <span class="nt">&lt;a_max_door&gt;</span>0.3<span class="nt">&lt;/a_max_door&gt;</span>
  <span class="nt">&lt;a_nom_door&gt;</span>0.15<span class="nt">&lt;/a_nom_door&gt;</span>
  <span class="nt">&lt;dx_min_door&gt;</span>0.01<span class="nt">&lt;/dx_min_door&gt;</span>
  <span class="nt">&lt;f_max_door&gt;</span>500.0<span class="nt">&lt;/f_max_door&gt;</span>
  <span class="nt">&lt;door</span> <span class="na">name=</span><span class="s">"main_door"</span> <span class="na">type=</span><span class="s">"DoubleSwingDoor"</span> <span class="na">left_joint_name=</span><span class="s">"left_joint"</span> <span class="na">right_joint_name=</span><span class="s">"right_joint"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>Where:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">v_max_door</code> is the maximum velocity of the door joints.</li>
  <li>
<code class="language-plaintext highlighter-rouge">a_max_door</code> is the maximum acceleration of the door joints.</li>
  <li>
<code class="language-plaintext highlighter-rouge">a_nom_door</code> is the nominal acceleration that the door controller will aim for when opening / closing doors.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dx_min_door</code> is the threshold used to determine whether the door is open, closed or moving. Specifically if all the door joints are within <code class="language-plaintext highlighter-rouge">dx_min_door</code> of their closed position the door will be considered closed, if they are within <code class="language-plaintext highlighter-rouge">dx_min_door</code> of their open position the door will be considered closed, otherwise it will be considered moving.</li>
  <li>
<code class="language-plaintext highlighter-rouge">f_max_door</code> is the maximum effort for the physics simulation.</li>
  <li>
<code class="language-plaintext highlighter-rouge">door</code> is a child element with a series of child attributes:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">name</code> is the name of the door, as seen by Open-RMF.</li>
      <li>
<code class="language-plaintext highlighter-rouge">type</code> is a string that describes the door type, supported door types can be found in <code class="language-plaintext highlighter-rouge">rmf_building_map_tools</code> <a href="https://github.com/open-rmf/rmf_traffic_editor/tree/main/rmf_building_map_tools/building_map/doors">repo</a>.</li>
      <li>
<code class="language-plaintext highlighter-rouge">left_joint_name</code> and <code class="language-plaintext highlighter-rouge">right_joint_name</code> are the names of the left and right joint for the door, for double doors both are expected to be names of joints in the model, for single doors one of them can be empty or set to <code class="language-plaintext highlighter-rouge">empty_joint</code> to make the simulation plugin ignore it.</li>
    </ul>
  </li>
</ul>

<h4 id="lift-plugin">Lift plugin</h4>

<p>The lift plugin is a model plugin that can be attached to lifts to make them interface with Open-RMF. It adds a publisher for lift state and a subscription to lift requests.
An example SDF snippet is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"lift"</span> <span class="na">filename=</span><span class="s">"liblift.so"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;lift_name&gt;</span>lift_1<span class="nt">&lt;/lift_name&gt;</span>
  <span class="nt">&lt;floor</span> <span class="na">name=</span><span class="s">"L1"</span> <span class="na">elevation=</span><span class="s">"0.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;door_pair</span> <span class="na">cabin_door=</span><span class="s">"CabinDoor_lift_1_lift_1_door"</span> <span class="na">shaft_door=</span><span class="s">"ShaftDoor_lift_1_L1_lift_1_door"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/floor&gt;</span>
  <span class="nt">&lt;floor</span> <span class="na">name=</span><span class="s">"L2"</span> <span class="na">elevation=</span><span class="s">"10.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;door_pair</span> <span class="na">cabin_door=</span><span class="s">"CabinDoor_lift_1_lift_1_door"</span> <span class="na">shaft_door=</span><span class="s">"ShaftDoor_lift_1_L2_lift_1_door"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/floor&gt;</span>
  <span class="nt">&lt;initial_floor&gt;</span>L1<span class="nt">&lt;/initial_floor&gt;</span>
  <span class="nt">&lt;v_max_cabin&gt;</span>2.0<span class="nt">&lt;/v_max_cabin&gt;</span>
  <span class="nt">&lt;a_max_cabin&gt;</span>1.2<span class="nt">&lt;/a_max_cabin&gt;</span>
  <span class="nt">&lt;a_nom_cabin&gt;</span>1.0<span class="nt">&lt;/a_nom_cabin&gt;</span>
  <span class="nt">&lt;dx_min_cabin&gt;</span>0.001<span class="nt">&lt;/dx_min_cabin&gt;</span>
  <span class="nt">&lt;f_max_cabin&gt;</span>25323.0<span class="nt">&lt;/f_max_cabin&gt;</span>
  <span class="nt">&lt;cabin_joint_name&gt;</span>cabin_joint<span class="nt">&lt;/cabin_joint_name&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>Where:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">lift_name</code> is the name of the lift, as seen by Open-RMF.</li>
  <li>
<code class="language-plaintext highlighter-rouge">floor</code> describes a floor, there can be any amount of <code class="language-plaintext highlighter-rouge">floor</code> elements with:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">name</code> attribute with the name of the floor, as seen by Open-RMF.</li>
      <li>
<code class="language-plaintext highlighter-rouge">elevation</code> attribute with the height in meters of the floor, relative to the ground plane.</li>
      <li>
<code class="language-plaintext highlighter-rouge">door_pair</code> child element with a <code class="language-plaintext highlighter-rouge">cabin_door</code> attribute to specify which cabin door should open at this floor and a <code class="language-plaintext highlighter-rouge">shaft_door</code> attribute to specify which shaft door should open. These names should match the names of doors in the world file.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">initial_floor</code> The floor that the lift should start at.</li>
  <li>
<code class="language-plaintext highlighter-rouge">v_max_cabin</code>, <code class="language-plaintext highlighter-rouge">a_max_cabin</code>, <code class="language-plaintext highlighter-rouge">a_nom_cabin</code>, <code class="language-plaintext highlighter-rouge">dx_min_cabin</code> and <code class="language-plaintext highlighter-rouge">f_max_cabin</code> are motion parameters with the same meaning as the ones in the door plugin.</li>
  <li>
<code class="language-plaintext highlighter-rouge">cabin_joint_name</code> is the name of the main joint of the cabin, which is the one to be actuated vertically.</li>
</ul>

<h4 id="crowd-simulation">Crowd simulation</h4>

<p>Crowd simulation configuration is added as a world plugin and is more complex and autogenerated, for an in depth description check the documentation <a href="https://github.com/FloodShao/crowd_simulation/blob/master/crowd_simulation_doc/crowd_simulation_usage.md">here</a></p>

<h4 id="toggle-charging">Toggle charging</h4>

<p>Toggle charging is a world plugin, added by default to all Open-RMF worlds that adds a GUI to toggle charging behaviors, such as enabling / disabling battery consumption or setting chargers to instantly refill the robot battery to reduce idle time in simulations.</p>

<p>It is added with the following snippet:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"toggle_charging"</span> <span class="na">filename=</span><span class="s">"libtoggle_charging.so"</span> <span class="nt">/&gt;</span>

</code></pre></div></div>

<h4 id="toggle-floors">Toggle floors</h4>

<p>Toggle charging is a world plugin, added by default to all Open-RMF worlds, that adds a GUI plugin with buttons to enable / disable visibility of specific floors, to make visualization of intermediate floors easier.</p>

<p>An example SDF snippet:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"toggle_floors"</span> <span class="na">filename=</span><span class="s">"libtoggle_floors.so"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;floor</span> <span class="na">name=</span><span class="s">"L1"</span> <span class="na">model_name=</span><span class="s">"clinic_L1"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;model</span> <span class="na">name=</span><span class="s">"OpenRobotics/PotatoChipChair"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;model</span> <span class="na">name=</span><span class="s">"OpenRobotics/PotatoChipChair_2"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/floor&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>The plugin element has a list of <code class="language-plaintext highlighter-rouge">floor</code> children, each of them with:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">name</code> attribute that will be displayd in the GUI button.</li>
  <li>
<code class="language-plaintext highlighter-rouge">model_name</code> points to the name of the floor model generated by <code class="language-plaintext highlighter-rouge">rmf_building_map_tools</code>.</li>
  <li>A list of <code class="language-plaintext highlighter-rouge">model</code> children, each with the name of a model that resides on that level.</li>
</ul>

<h3 id="robot-simulation">Robot simulation</h3>

<p>Robot simulation plugins under <code class="language-plaintext highlighter-rouge">rmf_robot_sim_*</code> are used to simulate aspects of robots behavior, including robot navigation and interfaces to workcells.</p>

<h4 id="slotcar">Slotcar</h4>

<p>Slotcar is a model plugin that acts as a simple robot navigation stack, controlling the robot and sending updates to its fleet adapter through ROS 2 topics.</p>

<p>An example, taken from <code class="language-plaintext highlighter-rouge">rmf_demos</code> <a href="https://github.com/open-rmf/rmf_demos/blob/3f29a858ae64f2702696c5b1e5481c969c8f08a4/rmf_demos_assets/models/TinyRobot/model.sdf#L5-L37">TinyRobot</a>, is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"slotcar"</span> <span class="na">filename=</span><span class="s">"libslotcar.so"</span><span class="nt">&gt;</span>

   <span class="nt">&lt;nominal_drive_speed&gt;</span>0.5<span class="nt">&lt;/nominal_drive_speed&gt;</span>
   <span class="nt">&lt;nominal_drive_acceleration&gt;</span>0.25<span class="nt">&lt;/nominal_drive_acceleration&gt;</span>
   <span class="nt">&lt;max_drive_acceleration&gt;</span>0.75<span class="nt">&lt;/max_drive_acceleration&gt;</span>

   <span class="nt">&lt;nominal_turn_speed&gt;</span>0.6<span class="nt">&lt;/nominal_turn_speed&gt;</span>
   <span class="nt">&lt;nominal_turn_acceleration&gt;</span>1.5<span class="nt">&lt;/nominal_turn_acceleration&gt;</span>
   <span class="nt">&lt;max_turn_acceleration&gt;</span>2.0<span class="nt">&lt;/max_turn_acceleration&gt;</span>

   <span class="nt">&lt;tire_radius&gt;</span>0.1<span class="nt">&lt;/tire_radius&gt;</span>
   <span class="nt">&lt;base_width&gt;</span>0.3206<span class="nt">&lt;/base_width&gt;</span>

   <span class="nt">&lt;stop_distance&gt;</span>0.75<span class="nt">&lt;/stop_distance&gt;</span>
   <span class="nt">&lt;stop_radius&gt;</span>0.75<span class="nt">&lt;/stop_radius&gt;</span>

   <span class="c">&lt;!-- Can the robot drive backwards --&gt;</span>
   <span class="nt">&lt;reversible&gt;</span>true<span class="nt">&lt;/reversible&gt;</span>

   <span class="c">&lt;!-- Battery params --&gt;</span>
   <span class="nt">&lt;nominal_voltage&gt;</span>12.0<span class="nt">&lt;/nominal_voltage&gt;</span>
   <span class="nt">&lt;nominal_capacity&gt;</span>24.0<span class="nt">&lt;/nominal_capacity&gt;</span>
   <span class="nt">&lt;charging_current&gt;</span>5.0<span class="nt">&lt;/charging_current&gt;</span>

   <span class="c">&lt;!-- Physical params --&gt;</span>
   <span class="nt">&lt;mass&gt;</span>20.0<span class="nt">&lt;/mass&gt;</span>
   <span class="nt">&lt;inertia&gt;</span>10.0<span class="nt">&lt;/inertia&gt;</span>
   <span class="nt">&lt;friction_coefficient&gt;</span>0.22<span class="nt">&lt;/friction_coefficient&gt;</span>

   <span class="c">&lt;!-- Power systems --&gt;</span>
   <span class="nt">&lt;nominal_power&gt;</span>20.0<span class="nt">&lt;/nominal_power&gt;</span>

 <span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>The plugin has the following parameters:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_drive_speed</code>, <code class="language-plaintext highlighter-rouge">nominal_drive_acceleration</code>, <code class="language-plaintext highlighter-rouge">max_drive_acceleration</code>, motion parameters for linear velocity similar to the <code class="language-plaintext highlighter-rouge">door</code> plugin.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_turn_speed</code>, <code class="language-plaintext highlighter-rouge">nominal_turn_acceleration</code>, <code class="language-plaintext highlighter-rouge">max_turn_acceleration</code>, motion parameters for angular velocity.</li>
  <li>
<code class="language-plaintext highlighter-rouge">tire_radius</code>, <code class="language-plaintext highlighter-rouge">base_width</code>, used to convert the requested linear velocity from Open-RMF into a differential drive velocity for the single wheels. Currently only used for Gazebo Classic since Gazebo moves the model itself.</li>
  <li>
<code class="language-plaintext highlighter-rouge">stop_distance</code> and <code class="language-plaintext highlighter-rouge">stop_radius</code> are added to do simple collision avoidance for the robot, if a robot is closer than <code class="language-plaintext highlighter-rouge">stop_distance + stop_radius</code> to another object it will trigger an emergency stop.</li>
  <li>
<code class="language-plaintext highlighter-rouge">reversible</code> boolean that denotes whether the robot can drive backwards or not.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_voltage</code> voltage of the robot battery.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_capacity</code> capacity in Ampere-hour of the robot battery.</li>
  <li>
<code class="language-plaintext highlighter-rouge">charging_current</code> Current of the charger, ignored if the charging is set to instantaneous.</li>
  <li>
<code class="language-plaintext highlighter-rouge">mass</code>, robot mass in kilograms.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inertia</code>, angular moment of inertia around the Z axis, in kg*m^2.</li>
  <li>
<code class="language-plaintext highlighter-rouge">friction_coefficient</code>, amount of energy lost in linear movement due to friction, between 0 and 1.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_power</code>, the amount of power used by the robot even when idle (in W).</li>
</ul>

<h4 id="readonly">Readonly</h4>

<p>Readonly is a model plugin that can be attached to mobile entities that only provide their position to Open-RMF.
The plugin uses the entity’s current position and heading, together with a provided navigation graph, to estimate its itinerary and provide it to other fleets for traffic deconfliction.</p>

<p>An example from <code class="language-plaintext highlighter-rouge">rmf_demos</code> <a href="https://github.com/open-rmf/rmf_demos/blob/3f29a858ae64f2702696c5b1e5481c969c8f08a4/rmf_demos_assets/models/Caddy/model.sdf#L12-L29">Caddy</a> below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"readonly"</span> <span class="na">filename=</span><span class="s">"libreadonly.so"</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- Map name where the robot is spawned --&gt;</span>
  <span class="nt">&lt;level_name&gt;</span>L1<span class="nt">&lt;/level_name&gt;</span>
  <span class="c">&lt;!-- Index of navigation graph for the robot as stored in BuildingMap msg --&gt;</span>
  <span class="nt">&lt;graph_index&gt;</span>2<span class="nt">&lt;/graph_index&gt;</span>
  <span class="c">&lt;!-- Name of waypoint where caddy is spawned in the map --&gt;</span>
  <span class="nt">&lt;spawn_waypoint&gt;</span>caddy<span class="nt">&lt;/spawn_waypoint&gt;</span>
  <span class="c">&lt;!-- Number of waypoints to include in predicted path --&gt;</span>
  <span class="nt">&lt;look_ahead&gt;</span>3<span class="nt">&lt;/look_ahead&gt;</span>
  <span class="c">&lt;!-- Update rate (hz) at which robot_state is published --&gt;</span>
  <span class="nt">&lt;update_rate&gt;</span>15<span class="nt">&lt;/update_rate&gt;</span>
  <span class="c">&lt;!-- Waypoint threshold (m). Radius around the waypoint to determine if caddy is at that waypoint   --&gt;</span>
  <span class="nt">&lt;waypoint_threshold&gt;</span>2.0<span class="nt">&lt;/waypoint_threshold&gt;</span>
  <span class="c">&lt;!-- If true, predicted path will merge robot with nearest lane --&gt;</span>
  <span class="nt">&lt;merge_lane&gt;</span>false<span class="nt">&lt;/merge_lane&gt;</span>
  <span class="c">&lt;!-- Normal distance of robot from its lane, greater than which its path will merge with the lane --&gt;</span>
  <span class="nt">&lt;lane_threshold&gt;</span>0.2<span class="nt">&lt;/lane_threshold&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>In this example, the robot will use navigation graph index 2 and try to generate a path with 3 waypoints ahead of its current location and heading and publish state updates at 15 Hz.
<code class="language-plaintext highlighter-rouge">waypoint_threshold</code>, <code class="language-plaintext highlighter-rouge">merge_lane</code> and <code class="language-plaintext highlighter-rouge">lane_threshold</code> are used to determine whether a robot is on a waypoint, a lane, or outside of the navigation graph.</p>

<h4 id="teleport-dispenser">Teleport dispenser</h4>

<p>Teleport dispenser is a model plugin that dispenses objects to a robot by finding the closest non static object and teleporting it to the closest robot. An example snippet is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"teleport_dispenser"</span> <span class="na">filename=</span><span class="s">"libteleport_dispenser.so"</span><span class="nt">/&gt;</span>

</code></pre></div></div>

<h4 id="teleport-ingestor">Teleport ingestor</h4>

<p>Teleport ingestor is a model plugin that ingests an object from a robot by finding the closest non static items to a robot and teleporting it to the ingestor’s location.</p>

<p>An example snippet is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"teleport_ingestor"</span> <span class="na">filename=</span><span class="s">"libteleport_ingestor.so"</span><span class="nt">/&gt;</span>

</code></pre></div></div>

<h3 id="repository-organization">Repository organization</h3>

<p>Most plugins are split into a <code class="language-plaintext highlighter-rouge">common</code>, <code class="language-plaintext highlighter-rouge">gz</code> and <code class="language-plaintext highlighter-rouge">gz_classic</code> package. The <code class="language-plaintext highlighter-rouge">common</code> package contains the simulator independent logic, such as ROS 2 publishers / subscribptions, core logic, while the <code class="language-plaintext highlighter-rouge">gz</code> and <code class="language-plaintext highlighter-rouge">gz_classic</code> packages contain a wrapper to interface to the specific simulators.</p>

<h3 id="supported-versions">Supported versions</h3>

<p>Since Gazebo and ROS 2 have a different release schedule, this package will follow the <a href="https://github.com/gazebosim/ros_gz">ros_gz</a> supported version and, depending on which ROS 2 version Open-RMF is currently targeting, the Gazebo version will be set accordingly to allow using the binary release of the <code class="language-plaintext highlighter-rouge">ros_gz_bridge</code>.
For example, previous supported versions have been <code class="language-plaintext highlighter-rouge">ROS Galactic &lt;-&gt; Gazebo Edifice</code> and <code class="language-plaintext highlighter-rouge">ROS Humble &lt;-&gt; Gazebo Fortress</code>.</p>

<p>Gazebo Classic support through the <code class="language-plaintext highlighter-rouge">gz_classic</code> plugins is only guaranteed until Gazebo 11 EOL (currently scheduled for January 2025) and might be removed afterwards. Users are encouraged to use Gazebo for future development.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>

<p>Contributors must sign-off each commit by adding a <code class="language-plaintext highlighter-rouge">Signed-off-by: ...</code>
line to commit messages to certify that they have the right to submit
the code they are contributing to the project according to the
<a href="https://developercertificate.org/">Developer Certificate of Origin (DCO)</a>.</p>
</div>
              <hr id="humble-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="humble-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#humble-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#humble-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#humble-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="humble-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="humble-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="humble-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rmf_simulation">rmf_simulation</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/rmf_building_sim_gz_plugins">rmf_building_sim_gz_plugins</a>
        
        <a class="label label-primary pkg-label" href="/p/rmf_robot_sim_common">rmf_robot_sim_common</a>
        
        <a class="label label-primary pkg-label" href="/p/rmf_robot_sim_gz_plugins">rmf_robot_sim_gz_plugins</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-open-rmf-rmf_simulation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-open-rmf-rmf_simulation" role="menuitem" tabindex="-1" href="/r/rmf_simulation/github-open-rmf-rmf_simulation" data="github-open-rmf-rmf_simulation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-open-rmf-rmf_simulation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Support plugins for simulating RMF scenarios</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/open-rmf/rmf_simulation.git">https://github.com/open-rmf/rmf_simulation.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">jazzy</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-06-14
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rmf_simulation/#jazzy-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rmf_simulation/#jazzy-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rmf_simulation/#jazzy-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/rmf_building_sim_gz_plugins">rmf_building_sim_gz_plugins</a></td>
                    <td>2.3.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rmf_robot_sim_common">rmf_robot_sim_common</a></td>
                    <td>2.3.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rmf_robot_sim_gz_plugins">rmf_robot_sim_gz_plugins</a></td>
                    <td>2.3.2</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="rmf_simulation">rmf_simulation</h1>

<p>This repository contains simulation plugins used in Open-RMF. It currently supports Gazebo Classic 11 and Gazebo Fortress.</p>

<p>Simulation plugins are split in Building simulation and Robot simulation plugins</p>

<h3 id="building-simulation">Building Simulation</h3>

<p>Building simulation plugins are located under <code class="language-plaintext highlighter-rouge">rmf_building_sim_*</code> and used to simulate different aspect of buildings such as doors, lifts and crowds (currently through the <a href="https://github.com/open-rmf/menge_vendor">Menge library</a>). Utility plugins to help with simulation, such as UI widgets to toggle battery consumption and set charging behavior, as well as toggling floor visibility, are also placed in this category.</p>

<h4 id="door-plugin">Door plugin</h4>

<p>The door plugin is a model plugin that can be attached to door models to make them interface with Open-RMF. It adds a publisher for door state and a subscription to door requests.
An example SDF snippet is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"door"</span> <span class="na">filename=</span><span class="s">"libdoor.so"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;v_max_door&gt;</span>0.5<span class="nt">&lt;/v_max_door&gt;</span>
  <span class="nt">&lt;a_max_door&gt;</span>0.3<span class="nt">&lt;/a_max_door&gt;</span>
  <span class="nt">&lt;a_nom_door&gt;</span>0.15<span class="nt">&lt;/a_nom_door&gt;</span>
  <span class="nt">&lt;dx_min_door&gt;</span>0.01<span class="nt">&lt;/dx_min_door&gt;</span>
  <span class="nt">&lt;f_max_door&gt;</span>500.0<span class="nt">&lt;/f_max_door&gt;</span>
  <span class="nt">&lt;door</span> <span class="na">name=</span><span class="s">"main_door"</span> <span class="na">type=</span><span class="s">"DoubleSwingDoor"</span> <span class="na">left_joint_name=</span><span class="s">"left_joint"</span> <span class="na">right_joint_name=</span><span class="s">"right_joint"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>Where:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">v_max_door</code> is the maximum velocity of the door joints.</li>
  <li>
<code class="language-plaintext highlighter-rouge">a_max_door</code> is the maximum acceleration of the door joints.</li>
  <li>
<code class="language-plaintext highlighter-rouge">a_nom_door</code> is the nominal acceleration that the door controller will aim for when opening / closing doors.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dx_min_door</code> is the threshold used to determine whether the door is open, closed or moving. Specifically if all the door joints are within <code class="language-plaintext highlighter-rouge">dx_min_door</code> of their closed position the door will be considered closed, if they are within <code class="language-plaintext highlighter-rouge">dx_min_door</code> of their open position the door will be considered closed, otherwise it will be considered moving.</li>
  <li>
<code class="language-plaintext highlighter-rouge">f_max_door</code> is the maximum effort for the physics simulation.</li>
  <li>
<code class="language-plaintext highlighter-rouge">door</code> is a child element with a series of child attributes:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">name</code> is the name of the door, as seen by Open-RMF.</li>
      <li>
<code class="language-plaintext highlighter-rouge">type</code> is a string that describes the door type, supported door types can be found in <code class="language-plaintext highlighter-rouge">rmf_building_map_tools</code> <a href="https://github.com/open-rmf/rmf_traffic_editor/tree/main/rmf_building_map_tools/building_map/doors">repo</a>.</li>
      <li>
<code class="language-plaintext highlighter-rouge">left_joint_name</code> and <code class="language-plaintext highlighter-rouge">right_joint_name</code> are the names of the left and right joint for the door, for double doors both are expected to be names of joints in the model, for single doors one of them can be empty or set to <code class="language-plaintext highlighter-rouge">empty_joint</code> to make the simulation plugin ignore it.</li>
    </ul>
  </li>
</ul>

<h4 id="lift-plugin">Lift plugin</h4>

<p>The lift plugin is a model plugin that can be attached to lifts to make them interface with Open-RMF. It adds a publisher for lift state and a subscription to lift requests.
An example SDF snippet is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"lift"</span> <span class="na">filename=</span><span class="s">"liblift.so"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;lift_name&gt;</span>lift_1<span class="nt">&lt;/lift_name&gt;</span>
  <span class="nt">&lt;floor</span> <span class="na">name=</span><span class="s">"L1"</span> <span class="na">elevation=</span><span class="s">"0.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;door_pair</span> <span class="na">cabin_door=</span><span class="s">"CabinDoor_lift_1_lift_1_door"</span> <span class="na">shaft_door=</span><span class="s">"ShaftDoor_lift_1_L1_lift_1_door"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/floor&gt;</span>
  <span class="nt">&lt;floor</span> <span class="na">name=</span><span class="s">"L2"</span> <span class="na">elevation=</span><span class="s">"10.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;door_pair</span> <span class="na">cabin_door=</span><span class="s">"CabinDoor_lift_1_lift_1_door"</span> <span class="na">shaft_door=</span><span class="s">"ShaftDoor_lift_1_L2_lift_1_door"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/floor&gt;</span>
  <span class="nt">&lt;initial_floor&gt;</span>L1<span class="nt">&lt;/initial_floor&gt;</span>
  <span class="nt">&lt;v_max_cabin&gt;</span>2.0<span class="nt">&lt;/v_max_cabin&gt;</span>
  <span class="nt">&lt;a_max_cabin&gt;</span>1.2<span class="nt">&lt;/a_max_cabin&gt;</span>
  <span class="nt">&lt;a_nom_cabin&gt;</span>1.0<span class="nt">&lt;/a_nom_cabin&gt;</span>
  <span class="nt">&lt;dx_min_cabin&gt;</span>0.001<span class="nt">&lt;/dx_min_cabin&gt;</span>
  <span class="nt">&lt;f_max_cabin&gt;</span>25323.0<span class="nt">&lt;/f_max_cabin&gt;</span>
  <span class="nt">&lt;cabin_joint_name&gt;</span>cabin_joint<span class="nt">&lt;/cabin_joint_name&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>Where:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">lift_name</code> is the name of the lift, as seen by Open-RMF.</li>
  <li>
<code class="language-plaintext highlighter-rouge">floor</code> describes a floor, there can be any amount of <code class="language-plaintext highlighter-rouge">floor</code> elements with:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">name</code> attribute with the name of the floor, as seen by Open-RMF.</li>
      <li>
<code class="language-plaintext highlighter-rouge">elevation</code> attribute with the height in meters of the floor, relative to the ground plane.</li>
      <li>
<code class="language-plaintext highlighter-rouge">door_pair</code> child element with a <code class="language-plaintext highlighter-rouge">cabin_door</code> attribute to specify which cabin door should open at this floor and a <code class="language-plaintext highlighter-rouge">shaft_door</code> attribute to specify which shaft door should open. These names should match the names of doors in the world file.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">initial_floor</code> The floor that the lift should start at.</li>
  <li>
<code class="language-plaintext highlighter-rouge">v_max_cabin</code>, <code class="language-plaintext highlighter-rouge">a_max_cabin</code>, <code class="language-plaintext highlighter-rouge">a_nom_cabin</code>, <code class="language-plaintext highlighter-rouge">dx_min_cabin</code> and <code class="language-plaintext highlighter-rouge">f_max_cabin</code> are motion parameters with the same meaning as the ones in the door plugin.</li>
  <li>
<code class="language-plaintext highlighter-rouge">cabin_joint_name</code> is the name of the main joint of the cabin, which is the one to be actuated vertically.</li>
</ul>

<h4 id="crowd-simulation">Crowd simulation</h4>

<p>Crowd simulation configuration is added as a world plugin and is more complex and autogenerated, for an in depth description check the documentation <a href="https://github.com/FloodShao/crowd_simulation/blob/master/crowd_simulation_doc/crowd_simulation_usage.md">here</a></p>

<h4 id="toggle-charging">Toggle charging</h4>

<p>Toggle charging is a world plugin, added by default to all Open-RMF worlds that adds a GUI to toggle charging behaviors, such as enabling / disabling battery consumption or setting chargers to instantly refill the robot battery to reduce idle time in simulations.</p>

<p>It is added with the following snippet:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"toggle_charging"</span> <span class="na">filename=</span><span class="s">"libtoggle_charging.so"</span> <span class="nt">/&gt;</span>

</code></pre></div></div>

<h4 id="toggle-floors">Toggle floors</h4>

<p>Toggle charging is a world plugin, added by default to all Open-RMF worlds, that adds a GUI plugin with buttons to enable / disable visibility of specific floors, to make visualization of intermediate floors easier.</p>

<p>An example SDF snippet:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"toggle_floors"</span> <span class="na">filename=</span><span class="s">"libtoggle_floors.so"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;floor</span> <span class="na">name=</span><span class="s">"L1"</span> <span class="na">model_name=</span><span class="s">"clinic_L1"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;model</span> <span class="na">name=</span><span class="s">"OpenRobotics/PotatoChipChair"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;model</span> <span class="na">name=</span><span class="s">"OpenRobotics/PotatoChipChair_2"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/floor&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>The plugin element has a list of <code class="language-plaintext highlighter-rouge">floor</code> children, each of them with:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">name</code> attribute that will be displayd in the GUI button.</li>
  <li>
<code class="language-plaintext highlighter-rouge">model_name</code> points to the name of the floor model generated by <code class="language-plaintext highlighter-rouge">rmf_building_map_tools</code>.</li>
  <li>A list of <code class="language-plaintext highlighter-rouge">model</code> children, each with the name of a model that resides on that level.</li>
</ul>

<h3 id="robot-simulation">Robot simulation</h3>

<p>Robot simulation plugins under <code class="language-plaintext highlighter-rouge">rmf_robot_sim_*</code> are used to simulate aspects of robots behavior, including robot navigation and interfaces to workcells.</p>

<h4 id="slotcar">Slotcar</h4>

<p>Slotcar is a model plugin that acts as a simple robot navigation stack, controlling the robot and sending updates to its fleet adapter through ROS 2 topics.</p>

<p>An example, taken from <code class="language-plaintext highlighter-rouge">rmf_demos</code> <a href="https://github.com/open-rmf/rmf_demos/blob/3f29a858ae64f2702696c5b1e5481c969c8f08a4/rmf_demos_assets/models/TinyRobot/model.sdf#L5-L37">TinyRobot</a>, is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"slotcar"</span> <span class="na">filename=</span><span class="s">"libslotcar.so"</span><span class="nt">&gt;</span>

   <span class="nt">&lt;nominal_drive_speed&gt;</span>0.5<span class="nt">&lt;/nominal_drive_speed&gt;</span>
   <span class="nt">&lt;nominal_drive_acceleration&gt;</span>0.25<span class="nt">&lt;/nominal_drive_acceleration&gt;</span>
   <span class="nt">&lt;max_drive_acceleration&gt;</span>0.75<span class="nt">&lt;/max_drive_acceleration&gt;</span>

   <span class="nt">&lt;nominal_turn_speed&gt;</span>0.6<span class="nt">&lt;/nominal_turn_speed&gt;</span>
   <span class="nt">&lt;nominal_turn_acceleration&gt;</span>1.5<span class="nt">&lt;/nominal_turn_acceleration&gt;</span>
   <span class="nt">&lt;max_turn_acceleration&gt;</span>2.0<span class="nt">&lt;/max_turn_acceleration&gt;</span>

   <span class="nt">&lt;tire_radius&gt;</span>0.1<span class="nt">&lt;/tire_radius&gt;</span>
   <span class="nt">&lt;base_width&gt;</span>0.3206<span class="nt">&lt;/base_width&gt;</span>

   <span class="nt">&lt;stop_distance&gt;</span>0.75<span class="nt">&lt;/stop_distance&gt;</span>
   <span class="nt">&lt;stop_radius&gt;</span>0.75<span class="nt">&lt;/stop_radius&gt;</span>

   <span class="c">&lt;!-- Can the robot drive backwards --&gt;</span>
   <span class="nt">&lt;reversible&gt;</span>true<span class="nt">&lt;/reversible&gt;</span>

   <span class="c">&lt;!-- Battery params --&gt;</span>
   <span class="nt">&lt;nominal_voltage&gt;</span>12.0<span class="nt">&lt;/nominal_voltage&gt;</span>
   <span class="nt">&lt;nominal_capacity&gt;</span>24.0<span class="nt">&lt;/nominal_capacity&gt;</span>
   <span class="nt">&lt;charging_current&gt;</span>5.0<span class="nt">&lt;/charging_current&gt;</span>

   <span class="c">&lt;!-- Physical params --&gt;</span>
   <span class="nt">&lt;mass&gt;</span>20.0<span class="nt">&lt;/mass&gt;</span>
   <span class="nt">&lt;inertia&gt;</span>10.0<span class="nt">&lt;/inertia&gt;</span>
   <span class="nt">&lt;friction_coefficient&gt;</span>0.22<span class="nt">&lt;/friction_coefficient&gt;</span>

   <span class="c">&lt;!-- Power systems --&gt;</span>
   <span class="nt">&lt;nominal_power&gt;</span>20.0<span class="nt">&lt;/nominal_power&gt;</span>

 <span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>The plugin has the following parameters:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_drive_speed</code>, <code class="language-plaintext highlighter-rouge">nominal_drive_acceleration</code>, <code class="language-plaintext highlighter-rouge">max_drive_acceleration</code>, motion parameters for linear velocity similar to the <code class="language-plaintext highlighter-rouge">door</code> plugin.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_turn_speed</code>, <code class="language-plaintext highlighter-rouge">nominal_turn_acceleration</code>, <code class="language-plaintext highlighter-rouge">max_turn_acceleration</code>, motion parameters for angular velocity.</li>
  <li>
<code class="language-plaintext highlighter-rouge">tire_radius</code>, <code class="language-plaintext highlighter-rouge">base_width</code>, used to convert the requested linear velocity from Open-RMF into a differential drive velocity for the single wheels. Currently only used for Gazebo Classic since Gazebo moves the model itself.</li>
  <li>
<code class="language-plaintext highlighter-rouge">stop_distance</code> and <code class="language-plaintext highlighter-rouge">stop_radius</code> are added to do simple collision avoidance for the robot, if a robot is closer than <code class="language-plaintext highlighter-rouge">stop_distance + stop_radius</code> to another object it will trigger an emergency stop.</li>
  <li>
<code class="language-plaintext highlighter-rouge">reversible</code> boolean that denotes whether the robot can drive backwards or not.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_voltage</code> voltage of the robot battery.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_capacity</code> capacity in Ampere-hour of the robot battery.</li>
  <li>
<code class="language-plaintext highlighter-rouge">charging_current</code> Current of the charger, ignored if the charging is set to instantaneous.</li>
  <li>
<code class="language-plaintext highlighter-rouge">mass</code>, robot mass in kilograms.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inertia</code>, angular moment of inertia around the Z axis, in kg*m^2.</li>
  <li>
<code class="language-plaintext highlighter-rouge">friction_coefficient</code>, amount of energy lost in linear movement due to friction, between 0 and 1.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_power</code>, the amount of power used by the robot even when idle (in W).</li>
</ul>

<h4 id="readonly">Readonly</h4>

<p>Readonly is a model plugin that can be attached to mobile entities that only provide their position to Open-RMF.
The plugin uses the entity’s current position and heading, together with a provided navigation graph, to estimate its itinerary and provide it to other fleets for traffic deconfliction.</p>

<p>An example from <code class="language-plaintext highlighter-rouge">rmf_demos</code> <a href="https://github.com/open-rmf/rmf_demos/blob/3f29a858ae64f2702696c5b1e5481c969c8f08a4/rmf_demos_assets/models/Caddy/model.sdf#L12-L29">Caddy</a> below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"readonly"</span> <span class="na">filename=</span><span class="s">"libreadonly.so"</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- Map name where the robot is spawned --&gt;</span>
  <span class="nt">&lt;level_name&gt;</span>L1<span class="nt">&lt;/level_name&gt;</span>
  <span class="c">&lt;!-- Index of navigation graph for the robot as stored in BuildingMap msg --&gt;</span>
  <span class="nt">&lt;graph_index&gt;</span>2<span class="nt">&lt;/graph_index&gt;</span>
  <span class="c">&lt;!-- Name of waypoint where caddy is spawned in the map --&gt;</span>
  <span class="nt">&lt;spawn_waypoint&gt;</span>caddy<span class="nt">&lt;/spawn_waypoint&gt;</span>
  <span class="c">&lt;!-- Number of waypoints to include in predicted path --&gt;</span>
  <span class="nt">&lt;look_ahead&gt;</span>3<span class="nt">&lt;/look_ahead&gt;</span>
  <span class="c">&lt;!-- Update rate (hz) at which robot_state is published --&gt;</span>
  <span class="nt">&lt;update_rate&gt;</span>15<span class="nt">&lt;/update_rate&gt;</span>
  <span class="c">&lt;!-- Waypoint threshold (m). Radius around the waypoint to determine if caddy is at that waypoint   --&gt;</span>
  <span class="nt">&lt;waypoint_threshold&gt;</span>2.0<span class="nt">&lt;/waypoint_threshold&gt;</span>
  <span class="c">&lt;!-- If true, predicted path will merge robot with nearest lane --&gt;</span>
  <span class="nt">&lt;merge_lane&gt;</span>false<span class="nt">&lt;/merge_lane&gt;</span>
  <span class="c">&lt;!-- Normal distance of robot from its lane, greater than which its path will merge with the lane --&gt;</span>
  <span class="nt">&lt;lane_threshold&gt;</span>0.2<span class="nt">&lt;/lane_threshold&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>In this example, the robot will use navigation graph index 2 and try to generate a path with 3 waypoints ahead of its current location and heading and publish state updates at 15 Hz.
<code class="language-plaintext highlighter-rouge">waypoint_threshold</code>, <code class="language-plaintext highlighter-rouge">merge_lane</code> and <code class="language-plaintext highlighter-rouge">lane_threshold</code> are used to determine whether a robot is on a waypoint, a lane, or outside of the navigation graph.</p>

<h4 id="teleport-dispenser">Teleport dispenser</h4>

<p>Teleport dispenser is a model plugin that dispenses objects to a robot by finding the closest non static object and teleporting it to the closest robot. An example snippet is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"teleport_dispenser"</span> <span class="na">filename=</span><span class="s">"libteleport_dispenser.so"</span><span class="nt">/&gt;</span>

</code></pre></div></div>

<h4 id="teleport-ingestor">Teleport ingestor</h4>

<p>Teleport ingestor is a model plugin that ingests an object from a robot by finding the closest non static items to a robot and teleporting it to the ingestor’s location.</p>

<p>An example snippet is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"teleport_ingestor"</span> <span class="na">filename=</span><span class="s">"libteleport_ingestor.so"</span><span class="nt">/&gt;</span>

</code></pre></div></div>

<h3 id="repository-organization">Repository organization</h3>

<p>Most plugins are split into a <code class="language-plaintext highlighter-rouge">common</code>, <code class="language-plaintext highlighter-rouge">gz</code> and <code class="language-plaintext highlighter-rouge">gz_classic</code> package. The <code class="language-plaintext highlighter-rouge">common</code> package contains the simulator independent logic, such as ROS 2 publishers / subscribptions, core logic, while the <code class="language-plaintext highlighter-rouge">gz</code> and <code class="language-plaintext highlighter-rouge">gz_classic</code> packages contain a wrapper to interface to the specific simulators.</p>

<h3 id="supported-versions">Supported versions</h3>

<p>Since Gazebo and ROS 2 have a different release schedule, this package will follow the <a href="https://github.com/gazebosim/ros_gz">ros_gz</a> supported version and, depending on which ROS 2 version Open-RMF is currently targeting, the Gazebo version will be set accordingly to allow using the binary release of the <code class="language-plaintext highlighter-rouge">ros_gz_bridge</code>.
For example, previous supported versions have been <code class="language-plaintext highlighter-rouge">ROS Galactic &lt;-&gt; Gazebo Edifice</code> and <code class="language-plaintext highlighter-rouge">ROS Humble &lt;-&gt; Gazebo Fortress</code>.</p>

<p>Gazebo Classic support through the <code class="language-plaintext highlighter-rouge">gz_classic</code> plugins is only guaranteed until Gazebo 11 EOL (currently scheduled for January 2025) and might be removed afterwards. Users are encouraged to use Gazebo for future development.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>

<p>Contributors must sign-off each commit by adding a <code class="language-plaintext highlighter-rouge">Signed-off-by: ...</code>
line to commit messages to certify that they have the right to submit
the code they are contributing to the project according to the
<a href="https://developercertificate.org/">Developer Certificate of Origin (DCO)</a>.</p>
</div>
              <hr id="jazzy-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="jazzy-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#jazzy-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#jazzy-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#jazzy-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="jazzy-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="jazzy-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="jazzy-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rmf_simulation">rmf_simulation</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/rmf_building_sim_gz_plugins">rmf_building_sim_gz_plugins</a>
        
        <a class="label label-primary pkg-label" href="/p/rmf_robot_sim_common">rmf_robot_sim_common</a>
        
        <a class="label label-primary pkg-label" href="/p/rmf_robot_sim_gz_plugins">rmf_robot_sim_gz_plugins</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-open-rmf-rmf_simulation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-open-rmf-rmf_simulation" role="menuitem" tabindex="-1" href="/r/rmf_simulation/github-open-rmf-rmf_simulation" data="github-open-rmf-rmf_simulation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-open-rmf-rmf_simulation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Support plugins for simulating RMF scenarios</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/open-rmf/rmf_simulation.git">https://github.com/open-rmf/rmf_simulation.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-05-05
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rmf_simulation/#kilted-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rmf_simulation/#kilted-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rmf_simulation/#kilted-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/rmf_building_sim_gz_plugins">rmf_building_sim_gz_plugins</a></td>
                    <td>2.4.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rmf_robot_sim_common">rmf_robot_sim_common</a></td>
                    <td>2.4.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rmf_robot_sim_gz_plugins">rmf_robot_sim_gz_plugins</a></td>
                    <td>2.4.1</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="rmf_simulation">rmf_simulation</h1>

<p>This repository contains simulation plugins used in Open-RMF. It currently supports Gazebo Classic 11 and Gazebo Fortress.</p>

<p>Simulation plugins are split in Building simulation and Robot simulation plugins</p>

<h3 id="building-simulation">Building Simulation</h3>

<p>Building simulation plugins are located under <code class="language-plaintext highlighter-rouge">rmf_building_sim_*</code> and used to simulate different aspect of buildings such as doors, lifts and crowds (currently through the <a href="https://github.com/open-rmf/menge_vendor">Menge library</a>). Utility plugins to help with simulation, such as UI widgets to toggle battery consumption and set charging behavior, as well as toggling floor visibility, are also placed in this category.</p>

<h4 id="door-plugin">Door plugin</h4>

<p>The door plugin is a model plugin that can be attached to door models to make them interface with Open-RMF. It adds a publisher for door state and a subscription to door requests.
An example SDF snippet is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"door"</span> <span class="na">filename=</span><span class="s">"libdoor.so"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;v_max_door&gt;</span>0.5<span class="nt">&lt;/v_max_door&gt;</span>
  <span class="nt">&lt;a_max_door&gt;</span>0.3<span class="nt">&lt;/a_max_door&gt;</span>
  <span class="nt">&lt;a_nom_door&gt;</span>0.15<span class="nt">&lt;/a_nom_door&gt;</span>
  <span class="nt">&lt;dx_min_door&gt;</span>0.01<span class="nt">&lt;/dx_min_door&gt;</span>
  <span class="nt">&lt;f_max_door&gt;</span>500.0<span class="nt">&lt;/f_max_door&gt;</span>
  <span class="nt">&lt;door</span> <span class="na">name=</span><span class="s">"main_door"</span> <span class="na">type=</span><span class="s">"DoubleSwingDoor"</span> <span class="na">left_joint_name=</span><span class="s">"left_joint"</span> <span class="na">right_joint_name=</span><span class="s">"right_joint"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>Where:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">v_max_door</code> is the maximum velocity of the door joints.</li>
  <li>
<code class="language-plaintext highlighter-rouge">a_max_door</code> is the maximum acceleration of the door joints.</li>
  <li>
<code class="language-plaintext highlighter-rouge">a_nom_door</code> is the nominal acceleration that the door controller will aim for when opening / closing doors.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dx_min_door</code> is the threshold used to determine whether the door is open, closed or moving. Specifically if all the door joints are within <code class="language-plaintext highlighter-rouge">dx_min_door</code> of their closed position the door will be considered closed, if they are within <code class="language-plaintext highlighter-rouge">dx_min_door</code> of their open position the door will be considered closed, otherwise it will be considered moving.</li>
  <li>
<code class="language-plaintext highlighter-rouge">f_max_door</code> is the maximum effort for the physics simulation.</li>
  <li>
<code class="language-plaintext highlighter-rouge">door</code> is a child element with a series of child attributes:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">name</code> is the name of the door, as seen by Open-RMF.</li>
      <li>
<code class="language-plaintext highlighter-rouge">type</code> is a string that describes the door type, supported door types can be found in <code class="language-plaintext highlighter-rouge">rmf_building_map_tools</code> <a href="https://github.com/open-rmf/rmf_traffic_editor/tree/main/rmf_building_map_tools/building_map/doors">repo</a>.</li>
      <li>
<code class="language-plaintext highlighter-rouge">left_joint_name</code> and <code class="language-plaintext highlighter-rouge">right_joint_name</code> are the names of the left and right joint for the door, for double doors both are expected to be names of joints in the model, for single doors one of them can be empty or set to <code class="language-plaintext highlighter-rouge">empty_joint</code> to make the simulation plugin ignore it.</li>
    </ul>
  </li>
</ul>

<h4 id="lift-plugin">Lift plugin</h4>

<p>The lift plugin is a model plugin that can be attached to lifts to make them interface with Open-RMF. It adds a publisher for lift state and a subscription to lift requests.
An example SDF snippet is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"lift"</span> <span class="na">filename=</span><span class="s">"liblift.so"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;lift_name&gt;</span>lift_1<span class="nt">&lt;/lift_name&gt;</span>
  <span class="nt">&lt;floor</span> <span class="na">name=</span><span class="s">"L1"</span> <span class="na">elevation=</span><span class="s">"0.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;door_pair</span> <span class="na">cabin_door=</span><span class="s">"CabinDoor_lift_1_lift_1_door"</span> <span class="na">shaft_door=</span><span class="s">"ShaftDoor_lift_1_L1_lift_1_door"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/floor&gt;</span>
  <span class="nt">&lt;floor</span> <span class="na">name=</span><span class="s">"L2"</span> <span class="na">elevation=</span><span class="s">"10.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;door_pair</span> <span class="na">cabin_door=</span><span class="s">"CabinDoor_lift_1_lift_1_door"</span> <span class="na">shaft_door=</span><span class="s">"ShaftDoor_lift_1_L2_lift_1_door"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/floor&gt;</span>
  <span class="nt">&lt;initial_floor&gt;</span>L1<span class="nt">&lt;/initial_floor&gt;</span>
  <span class="nt">&lt;v_max_cabin&gt;</span>2.0<span class="nt">&lt;/v_max_cabin&gt;</span>
  <span class="nt">&lt;a_max_cabin&gt;</span>1.2<span class="nt">&lt;/a_max_cabin&gt;</span>
  <span class="nt">&lt;a_nom_cabin&gt;</span>1.0<span class="nt">&lt;/a_nom_cabin&gt;</span>
  <span class="nt">&lt;dx_min_cabin&gt;</span>0.001<span class="nt">&lt;/dx_min_cabin&gt;</span>
  <span class="nt">&lt;f_max_cabin&gt;</span>25323.0<span class="nt">&lt;/f_max_cabin&gt;</span>
  <span class="nt">&lt;cabin_joint_name&gt;</span>cabin_joint<span class="nt">&lt;/cabin_joint_name&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>Where:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">lift_name</code> is the name of the lift, as seen by Open-RMF.</li>
  <li>
<code class="language-plaintext highlighter-rouge">floor</code> describes a floor, there can be any amount of <code class="language-plaintext highlighter-rouge">floor</code> elements with:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">name</code> attribute with the name of the floor, as seen by Open-RMF.</li>
      <li>
<code class="language-plaintext highlighter-rouge">elevation</code> attribute with the height in meters of the floor, relative to the ground plane.</li>
      <li>
<code class="language-plaintext highlighter-rouge">door_pair</code> child element with a <code class="language-plaintext highlighter-rouge">cabin_door</code> attribute to specify which cabin door should open at this floor and a <code class="language-plaintext highlighter-rouge">shaft_door</code> attribute to specify which shaft door should open. These names should match the names of doors in the world file.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">initial_floor</code> The floor that the lift should start at.</li>
  <li>
<code class="language-plaintext highlighter-rouge">v_max_cabin</code>, <code class="language-plaintext highlighter-rouge">a_max_cabin</code>, <code class="language-plaintext highlighter-rouge">a_nom_cabin</code>, <code class="language-plaintext highlighter-rouge">dx_min_cabin</code> and <code class="language-plaintext highlighter-rouge">f_max_cabin</code> are motion parameters with the same meaning as the ones in the door plugin.</li>
  <li>
<code class="language-plaintext highlighter-rouge">cabin_joint_name</code> is the name of the main joint of the cabin, which is the one to be actuated vertically.</li>
</ul>

<h4 id="crowd-simulation">Crowd simulation</h4>

<p>Crowd simulation configuration is added as a world plugin and is more complex and autogenerated, for an in depth description check the documentation <a href="https://github.com/FloodShao/crowd_simulation/blob/master/crowd_simulation_doc/crowd_simulation_usage.md">here</a></p>

<h4 id="toggle-charging">Toggle charging</h4>

<p>Toggle charging is a world plugin, added by default to all Open-RMF worlds that adds a GUI to toggle charging behaviors, such as enabling / disabling battery consumption or setting chargers to instantly refill the robot battery to reduce idle time in simulations.</p>

<p>It is added with the following snippet:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"toggle_charging"</span> <span class="na">filename=</span><span class="s">"libtoggle_charging.so"</span> <span class="nt">/&gt;</span>

</code></pre></div></div>

<h4 id="toggle-floors">Toggle floors</h4>

<p>Toggle charging is a world plugin, added by default to all Open-RMF worlds, that adds a GUI plugin with buttons to enable / disable visibility of specific floors, to make visualization of intermediate floors easier.</p>

<p>An example SDF snippet:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"toggle_floors"</span> <span class="na">filename=</span><span class="s">"libtoggle_floors.so"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;floor</span> <span class="na">name=</span><span class="s">"L1"</span> <span class="na">model_name=</span><span class="s">"clinic_L1"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;model</span> <span class="na">name=</span><span class="s">"OpenRobotics/PotatoChipChair"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;model</span> <span class="na">name=</span><span class="s">"OpenRobotics/PotatoChipChair_2"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/floor&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>The plugin element has a list of <code class="language-plaintext highlighter-rouge">floor</code> children, each of them with:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">name</code> attribute that will be displayd in the GUI button.</li>
  <li>
<code class="language-plaintext highlighter-rouge">model_name</code> points to the name of the floor model generated by <code class="language-plaintext highlighter-rouge">rmf_building_map_tools</code>.</li>
  <li>A list of <code class="language-plaintext highlighter-rouge">model</code> children, each with the name of a model that resides on that level.</li>
</ul>

<h3 id="robot-simulation">Robot simulation</h3>

<p>Robot simulation plugins under <code class="language-plaintext highlighter-rouge">rmf_robot_sim_*</code> are used to simulate aspects of robots behavior, including robot navigation and interfaces to workcells.</p>

<h4 id="slotcar">Slotcar</h4>

<p>Slotcar is a model plugin that acts as a simple robot navigation stack, controlling the robot and sending updates to its fleet adapter through ROS 2 topics.</p>

<p>An example, taken from <code class="language-plaintext highlighter-rouge">rmf_demos</code> <a href="https://github.com/open-rmf/rmf_demos/blob/3f29a858ae64f2702696c5b1e5481c969c8f08a4/rmf_demos_assets/models/TinyRobot/model.sdf#L5-L37">TinyRobot</a>, is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"slotcar"</span> <span class="na">filename=</span><span class="s">"libslotcar.so"</span><span class="nt">&gt;</span>

   <span class="nt">&lt;nominal_drive_speed&gt;</span>0.5<span class="nt">&lt;/nominal_drive_speed&gt;</span>
   <span class="nt">&lt;nominal_drive_acceleration&gt;</span>0.25<span class="nt">&lt;/nominal_drive_acceleration&gt;</span>
   <span class="nt">&lt;max_drive_acceleration&gt;</span>0.75<span class="nt">&lt;/max_drive_acceleration&gt;</span>

   <span class="nt">&lt;nominal_turn_speed&gt;</span>0.6<span class="nt">&lt;/nominal_turn_speed&gt;</span>
   <span class="nt">&lt;nominal_turn_acceleration&gt;</span>1.5<span class="nt">&lt;/nominal_turn_acceleration&gt;</span>
   <span class="nt">&lt;max_turn_acceleration&gt;</span>2.0<span class="nt">&lt;/max_turn_acceleration&gt;</span>

   <span class="nt">&lt;tire_radius&gt;</span>0.1<span class="nt">&lt;/tire_radius&gt;</span>
   <span class="nt">&lt;base_width&gt;</span>0.3206<span class="nt">&lt;/base_width&gt;</span>

   <span class="nt">&lt;stop_distance&gt;</span>0.75<span class="nt">&lt;/stop_distance&gt;</span>
   <span class="nt">&lt;stop_radius&gt;</span>0.75<span class="nt">&lt;/stop_radius&gt;</span>

   <span class="c">&lt;!-- Can the robot drive backwards --&gt;</span>
   <span class="nt">&lt;reversible&gt;</span>true<span class="nt">&lt;/reversible&gt;</span>

   <span class="c">&lt;!-- Battery params --&gt;</span>
   <span class="nt">&lt;nominal_voltage&gt;</span>12.0<span class="nt">&lt;/nominal_voltage&gt;</span>
   <span class="nt">&lt;nominal_capacity&gt;</span>24.0<span class="nt">&lt;/nominal_capacity&gt;</span>
   <span class="nt">&lt;charging_current&gt;</span>5.0<span class="nt">&lt;/charging_current&gt;</span>

   <span class="c">&lt;!-- Physical params --&gt;</span>
   <span class="nt">&lt;mass&gt;</span>20.0<span class="nt">&lt;/mass&gt;</span>
   <span class="nt">&lt;inertia&gt;</span>10.0<span class="nt">&lt;/inertia&gt;</span>
   <span class="nt">&lt;friction_coefficient&gt;</span>0.22<span class="nt">&lt;/friction_coefficient&gt;</span>

   <span class="c">&lt;!-- Power systems --&gt;</span>
   <span class="nt">&lt;nominal_power&gt;</span>20.0<span class="nt">&lt;/nominal_power&gt;</span>

 <span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>The plugin has the following parameters:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_drive_speed</code>, <code class="language-plaintext highlighter-rouge">nominal_drive_acceleration</code>, <code class="language-plaintext highlighter-rouge">max_drive_acceleration</code>, motion parameters for linear velocity similar to the <code class="language-plaintext highlighter-rouge">door</code> plugin.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_turn_speed</code>, <code class="language-plaintext highlighter-rouge">nominal_turn_acceleration</code>, <code class="language-plaintext highlighter-rouge">max_turn_acceleration</code>, motion parameters for angular velocity.</li>
  <li>
<code class="language-plaintext highlighter-rouge">tire_radius</code>, <code class="language-plaintext highlighter-rouge">base_width</code>, used to convert the requested linear velocity from Open-RMF into a differential drive velocity for the single wheels. Currently only used for Gazebo Classic since Gazebo moves the model itself.</li>
  <li>
<code class="language-plaintext highlighter-rouge">stop_distance</code> and <code class="language-plaintext highlighter-rouge">stop_radius</code> are added to do simple collision avoidance for the robot, if a robot is closer than <code class="language-plaintext highlighter-rouge">stop_distance + stop_radius</code> to another object it will trigger an emergency stop.</li>
  <li>
<code class="language-plaintext highlighter-rouge">reversible</code> boolean that denotes whether the robot can drive backwards or not.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_voltage</code> voltage of the robot battery.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_capacity</code> capacity in Ampere-hour of the robot battery.</li>
  <li>
<code class="language-plaintext highlighter-rouge">charging_current</code> Current of the charger, ignored if the charging is set to instantaneous.</li>
  <li>
<code class="language-plaintext highlighter-rouge">mass</code>, robot mass in kilograms.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inertia</code>, angular moment of inertia around the Z axis, in kg*m^2.</li>
  <li>
<code class="language-plaintext highlighter-rouge">friction_coefficient</code>, amount of energy lost in linear movement due to friction, between 0 and 1.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_power</code>, the amount of power used by the robot even when idle (in W).</li>
</ul>

<h4 id="readonly">Readonly</h4>

<p>Readonly is a model plugin that can be attached to mobile entities that only provide their position to Open-RMF.
The plugin uses the entity’s current position and heading, together with a provided navigation graph, to estimate its itinerary and provide it to other fleets for traffic deconfliction.</p>

<p>An example from <code class="language-plaintext highlighter-rouge">rmf_demos</code> <a href="https://github.com/open-rmf/rmf_demos/blob/3f29a858ae64f2702696c5b1e5481c969c8f08a4/rmf_demos_assets/models/Caddy/model.sdf#L12-L29">Caddy</a> below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"readonly"</span> <span class="na">filename=</span><span class="s">"libreadonly.so"</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- Map name where the robot is spawned --&gt;</span>
  <span class="nt">&lt;level_name&gt;</span>L1<span class="nt">&lt;/level_name&gt;</span>
  <span class="c">&lt;!-- Index of navigation graph for the robot as stored in BuildingMap msg --&gt;</span>
  <span class="nt">&lt;graph_index&gt;</span>2<span class="nt">&lt;/graph_index&gt;</span>
  <span class="c">&lt;!-- Name of waypoint where caddy is spawned in the map --&gt;</span>
  <span class="nt">&lt;spawn_waypoint&gt;</span>caddy<span class="nt">&lt;/spawn_waypoint&gt;</span>
  <span class="c">&lt;!-- Number of waypoints to include in predicted path --&gt;</span>
  <span class="nt">&lt;look_ahead&gt;</span>3<span class="nt">&lt;/look_ahead&gt;</span>
  <span class="c">&lt;!-- Update rate (hz) at which robot_state is published --&gt;</span>
  <span class="nt">&lt;update_rate&gt;</span>15<span class="nt">&lt;/update_rate&gt;</span>
  <span class="c">&lt;!-- Waypoint threshold (m). Radius around the waypoint to determine if caddy is at that waypoint   --&gt;</span>
  <span class="nt">&lt;waypoint_threshold&gt;</span>2.0<span class="nt">&lt;/waypoint_threshold&gt;</span>
  <span class="c">&lt;!-- If true, predicted path will merge robot with nearest lane --&gt;</span>
  <span class="nt">&lt;merge_lane&gt;</span>false<span class="nt">&lt;/merge_lane&gt;</span>
  <span class="c">&lt;!-- Normal distance of robot from its lane, greater than which its path will merge with the lane --&gt;</span>
  <span class="nt">&lt;lane_threshold&gt;</span>0.2<span class="nt">&lt;/lane_threshold&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>In this example, the robot will use navigation graph index 2 and try to generate a path with 3 waypoints ahead of its current location and heading and publish state updates at 15 Hz.
<code class="language-plaintext highlighter-rouge">waypoint_threshold</code>, <code class="language-plaintext highlighter-rouge">merge_lane</code> and <code class="language-plaintext highlighter-rouge">lane_threshold</code> are used to determine whether a robot is on a waypoint, a lane, or outside of the navigation graph.</p>

<h4 id="teleport-dispenser">Teleport dispenser</h4>

<p>Teleport dispenser is a model plugin that dispenses objects to a robot by finding the closest non static object and teleporting it to the closest robot. An example snippet is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"teleport_dispenser"</span> <span class="na">filename=</span><span class="s">"libteleport_dispenser.so"</span><span class="nt">/&gt;</span>

</code></pre></div></div>

<h4 id="teleport-ingestor">Teleport ingestor</h4>

<p>Teleport ingestor is a model plugin that ingests an object from a robot by finding the closest non static items to a robot and teleporting it to the ingestor’s location.</p>

<p>An example snippet is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"teleport_ingestor"</span> <span class="na">filename=</span><span class="s">"libteleport_ingestor.so"</span><span class="nt">/&gt;</span>

</code></pre></div></div>

<h3 id="repository-organization">Repository organization</h3>

<p>Most plugins are split into a <code class="language-plaintext highlighter-rouge">common</code>, <code class="language-plaintext highlighter-rouge">gz</code> and <code class="language-plaintext highlighter-rouge">gz_classic</code> package. The <code class="language-plaintext highlighter-rouge">common</code> package contains the simulator independent logic, such as ROS 2 publishers / subscribptions, core logic, while the <code class="language-plaintext highlighter-rouge">gz</code> and <code class="language-plaintext highlighter-rouge">gz_classic</code> packages contain a wrapper to interface to the specific simulators.</p>

<h3 id="supported-versions">Supported versions</h3>

<p>Since Gazebo and ROS 2 have a different release schedule, this package will follow the <a href="https://github.com/gazebosim/ros_gz">ros_gz</a> supported version and, depending on which ROS 2 version Open-RMF is currently targeting, the Gazebo version will be set accordingly to allow using the binary release of the <code class="language-plaintext highlighter-rouge">ros_gz_bridge</code>.
For example, previous supported versions have been <code class="language-plaintext highlighter-rouge">ROS Galactic &lt;-&gt; Gazebo Edifice</code> and <code class="language-plaintext highlighter-rouge">ROS Humble &lt;-&gt; Gazebo Fortress</code>.</p>

<p>Gazebo Classic support through the <code class="language-plaintext highlighter-rouge">gz_classic</code> plugins is only guaranteed until Gazebo 11 EOL (currently scheduled for January 2025) and might be removed afterwards. Users are encouraged to use Gazebo for future development.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>

<p>Contributors must sign-off each commit by adding a <code class="language-plaintext highlighter-rouge">Signed-off-by: ...</code>
line to commit messages to certify that they have the right to submit
the code they are contributing to the project according to the
<a href="https://developercertificate.org/">Developer Certificate of Origin (DCO)</a>.</p>
</div>
              <hr id="kilted-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="kilted-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#kilted-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#kilted-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#kilted-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="kilted-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="kilted-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="kilted-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rmf_simulation">rmf_simulation</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/rmf_building_sim_gz_plugins">rmf_building_sim_gz_plugins</a>
        
        <a class="label label-primary pkg-label" href="/p/rmf_robot_sim_common">rmf_robot_sim_common</a>
        
        <a class="label label-primary pkg-label" href="/p/rmf_robot_sim_gz_plugins">rmf_robot_sim_gz_plugins</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-open-rmf-rmf_simulation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-open-rmf-rmf_simulation" role="menuitem" tabindex="-1" href="/r/rmf_simulation/github-open-rmf-rmf_simulation" data="github-open-rmf-rmf_simulation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-open-rmf-rmf_simulation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Support plugins for simulating RMF scenarios</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/open-rmf/rmf_simulation.git">https://github.com/open-rmf/rmf_simulation.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-05-05
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rmf_simulation/#rolling-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rmf_simulation/#rolling-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rmf_simulation/#rolling-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/rmf_building_sim_gz_plugins">rmf_building_sim_gz_plugins</a></td>
                    <td>2.4.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rmf_robot_sim_common">rmf_robot_sim_common</a></td>
                    <td>2.4.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rmf_robot_sim_gz_plugins">rmf_robot_sim_gz_plugins</a></td>
                    <td>2.4.1</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="rmf_simulation">rmf_simulation</h1>

<p>This repository contains simulation plugins used in Open-RMF. It currently supports Gazebo Classic 11 and Gazebo Fortress.</p>

<p>Simulation plugins are split in Building simulation and Robot simulation plugins</p>

<h3 id="building-simulation">Building Simulation</h3>

<p>Building simulation plugins are located under <code class="language-plaintext highlighter-rouge">rmf_building_sim_*</code> and used to simulate different aspect of buildings such as doors, lifts and crowds (currently through the <a href="https://github.com/open-rmf/menge_vendor">Menge library</a>). Utility plugins to help with simulation, such as UI widgets to toggle battery consumption and set charging behavior, as well as toggling floor visibility, are also placed in this category.</p>

<h4 id="door-plugin">Door plugin</h4>

<p>The door plugin is a model plugin that can be attached to door models to make them interface with Open-RMF. It adds a publisher for door state and a subscription to door requests.
An example SDF snippet is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"door"</span> <span class="na">filename=</span><span class="s">"libdoor.so"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;v_max_door&gt;</span>0.5<span class="nt">&lt;/v_max_door&gt;</span>
  <span class="nt">&lt;a_max_door&gt;</span>0.3<span class="nt">&lt;/a_max_door&gt;</span>
  <span class="nt">&lt;a_nom_door&gt;</span>0.15<span class="nt">&lt;/a_nom_door&gt;</span>
  <span class="nt">&lt;dx_min_door&gt;</span>0.01<span class="nt">&lt;/dx_min_door&gt;</span>
  <span class="nt">&lt;f_max_door&gt;</span>500.0<span class="nt">&lt;/f_max_door&gt;</span>
  <span class="nt">&lt;door</span> <span class="na">name=</span><span class="s">"main_door"</span> <span class="na">type=</span><span class="s">"DoubleSwingDoor"</span> <span class="na">left_joint_name=</span><span class="s">"left_joint"</span> <span class="na">right_joint_name=</span><span class="s">"right_joint"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>Where:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">v_max_door</code> is the maximum velocity of the door joints.</li>
  <li>
<code class="language-plaintext highlighter-rouge">a_max_door</code> is the maximum acceleration of the door joints.</li>
  <li>
<code class="language-plaintext highlighter-rouge">a_nom_door</code> is the nominal acceleration that the door controller will aim for when opening / closing doors.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dx_min_door</code> is the threshold used to determine whether the door is open, closed or moving. Specifically if all the door joints are within <code class="language-plaintext highlighter-rouge">dx_min_door</code> of their closed position the door will be considered closed, if they are within <code class="language-plaintext highlighter-rouge">dx_min_door</code> of their open position the door will be considered closed, otherwise it will be considered moving.</li>
  <li>
<code class="language-plaintext highlighter-rouge">f_max_door</code> is the maximum effort for the physics simulation.</li>
  <li>
<code class="language-plaintext highlighter-rouge">door</code> is a child element with a series of child attributes:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">name</code> is the name of the door, as seen by Open-RMF.</li>
      <li>
<code class="language-plaintext highlighter-rouge">type</code> is a string that describes the door type, supported door types can be found in <code class="language-plaintext highlighter-rouge">rmf_building_map_tools</code> <a href="https://github.com/open-rmf/rmf_traffic_editor/tree/main/rmf_building_map_tools/building_map/doors">repo</a>.</li>
      <li>
<code class="language-plaintext highlighter-rouge">left_joint_name</code> and <code class="language-plaintext highlighter-rouge">right_joint_name</code> are the names of the left and right joint for the door, for double doors both are expected to be names of joints in the model, for single doors one of them can be empty or set to <code class="language-plaintext highlighter-rouge">empty_joint</code> to make the simulation plugin ignore it.</li>
    </ul>
  </li>
</ul>

<h4 id="lift-plugin">Lift plugin</h4>

<p>The lift plugin is a model plugin that can be attached to lifts to make them interface with Open-RMF. It adds a publisher for lift state and a subscription to lift requests.
An example SDF snippet is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"lift"</span> <span class="na">filename=</span><span class="s">"liblift.so"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;lift_name&gt;</span>lift_1<span class="nt">&lt;/lift_name&gt;</span>
  <span class="nt">&lt;floor</span> <span class="na">name=</span><span class="s">"L1"</span> <span class="na">elevation=</span><span class="s">"0.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;door_pair</span> <span class="na">cabin_door=</span><span class="s">"CabinDoor_lift_1_lift_1_door"</span> <span class="na">shaft_door=</span><span class="s">"ShaftDoor_lift_1_L1_lift_1_door"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/floor&gt;</span>
  <span class="nt">&lt;floor</span> <span class="na">name=</span><span class="s">"L2"</span> <span class="na">elevation=</span><span class="s">"10.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;door_pair</span> <span class="na">cabin_door=</span><span class="s">"CabinDoor_lift_1_lift_1_door"</span> <span class="na">shaft_door=</span><span class="s">"ShaftDoor_lift_1_L2_lift_1_door"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/floor&gt;</span>
  <span class="nt">&lt;initial_floor&gt;</span>L1<span class="nt">&lt;/initial_floor&gt;</span>
  <span class="nt">&lt;v_max_cabin&gt;</span>2.0<span class="nt">&lt;/v_max_cabin&gt;</span>
  <span class="nt">&lt;a_max_cabin&gt;</span>1.2<span class="nt">&lt;/a_max_cabin&gt;</span>
  <span class="nt">&lt;a_nom_cabin&gt;</span>1.0<span class="nt">&lt;/a_nom_cabin&gt;</span>
  <span class="nt">&lt;dx_min_cabin&gt;</span>0.001<span class="nt">&lt;/dx_min_cabin&gt;</span>
  <span class="nt">&lt;f_max_cabin&gt;</span>25323.0<span class="nt">&lt;/f_max_cabin&gt;</span>
  <span class="nt">&lt;cabin_joint_name&gt;</span>cabin_joint<span class="nt">&lt;/cabin_joint_name&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>Where:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">lift_name</code> is the name of the lift, as seen by Open-RMF.</li>
  <li>
<code class="language-plaintext highlighter-rouge">floor</code> describes a floor, there can be any amount of <code class="language-plaintext highlighter-rouge">floor</code> elements with:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">name</code> attribute with the name of the floor, as seen by Open-RMF.</li>
      <li>
<code class="language-plaintext highlighter-rouge">elevation</code> attribute with the height in meters of the floor, relative to the ground plane.</li>
      <li>
<code class="language-plaintext highlighter-rouge">door_pair</code> child element with a <code class="language-plaintext highlighter-rouge">cabin_door</code> attribute to specify which cabin door should open at this floor and a <code class="language-plaintext highlighter-rouge">shaft_door</code> attribute to specify which shaft door should open. These names should match the names of doors in the world file.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">initial_floor</code> The floor that the lift should start at.</li>
  <li>
<code class="language-plaintext highlighter-rouge">v_max_cabin</code>, <code class="language-plaintext highlighter-rouge">a_max_cabin</code>, <code class="language-plaintext highlighter-rouge">a_nom_cabin</code>, <code class="language-plaintext highlighter-rouge">dx_min_cabin</code> and <code class="language-plaintext highlighter-rouge">f_max_cabin</code> are motion parameters with the same meaning as the ones in the door plugin.</li>
  <li>
<code class="language-plaintext highlighter-rouge">cabin_joint_name</code> is the name of the main joint of the cabin, which is the one to be actuated vertically.</li>
</ul>

<h4 id="crowd-simulation">Crowd simulation</h4>

<p>Crowd simulation configuration is added as a world plugin and is more complex and autogenerated, for an in depth description check the documentation <a href="https://github.com/FloodShao/crowd_simulation/blob/master/crowd_simulation_doc/crowd_simulation_usage.md">here</a></p>

<h4 id="toggle-charging">Toggle charging</h4>

<p>Toggle charging is a world plugin, added by default to all Open-RMF worlds that adds a GUI to toggle charging behaviors, such as enabling / disabling battery consumption or setting chargers to instantly refill the robot battery to reduce idle time in simulations.</p>

<p>It is added with the following snippet:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"toggle_charging"</span> <span class="na">filename=</span><span class="s">"libtoggle_charging.so"</span> <span class="nt">/&gt;</span>

</code></pre></div></div>

<h4 id="toggle-floors">Toggle floors</h4>

<p>Toggle charging is a world plugin, added by default to all Open-RMF worlds, that adds a GUI plugin with buttons to enable / disable visibility of specific floors, to make visualization of intermediate floors easier.</p>

<p>An example SDF snippet:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"toggle_floors"</span> <span class="na">filename=</span><span class="s">"libtoggle_floors.so"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;floor</span> <span class="na">name=</span><span class="s">"L1"</span> <span class="na">model_name=</span><span class="s">"clinic_L1"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;model</span> <span class="na">name=</span><span class="s">"OpenRobotics/PotatoChipChair"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;model</span> <span class="na">name=</span><span class="s">"OpenRobotics/PotatoChipChair_2"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/floor&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>The plugin element has a list of <code class="language-plaintext highlighter-rouge">floor</code> children, each of them with:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">name</code> attribute that will be displayd in the GUI button.</li>
  <li>
<code class="language-plaintext highlighter-rouge">model_name</code> points to the name of the floor model generated by <code class="language-plaintext highlighter-rouge">rmf_building_map_tools</code>.</li>
  <li>A list of <code class="language-plaintext highlighter-rouge">model</code> children, each with the name of a model that resides on that level.</li>
</ul>

<h3 id="robot-simulation">Robot simulation</h3>

<p>Robot simulation plugins under <code class="language-plaintext highlighter-rouge">rmf_robot_sim_*</code> are used to simulate aspects of robots behavior, including robot navigation and interfaces to workcells.</p>

<h4 id="slotcar">Slotcar</h4>

<p>Slotcar is a model plugin that acts as a simple robot navigation stack, controlling the robot and sending updates to its fleet adapter through ROS 2 topics.</p>

<p>An example, taken from <code class="language-plaintext highlighter-rouge">rmf_demos</code> <a href="https://github.com/open-rmf/rmf_demos/blob/3f29a858ae64f2702696c5b1e5481c969c8f08a4/rmf_demos_assets/models/TinyRobot/model.sdf#L5-L37">TinyRobot</a>, is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"slotcar"</span> <span class="na">filename=</span><span class="s">"libslotcar.so"</span><span class="nt">&gt;</span>

   <span class="nt">&lt;nominal_drive_speed&gt;</span>0.5<span class="nt">&lt;/nominal_drive_speed&gt;</span>
   <span class="nt">&lt;nominal_drive_acceleration&gt;</span>0.25<span class="nt">&lt;/nominal_drive_acceleration&gt;</span>
   <span class="nt">&lt;max_drive_acceleration&gt;</span>0.75<span class="nt">&lt;/max_drive_acceleration&gt;</span>

   <span class="nt">&lt;nominal_turn_speed&gt;</span>0.6<span class="nt">&lt;/nominal_turn_speed&gt;</span>
   <span class="nt">&lt;nominal_turn_acceleration&gt;</span>1.5<span class="nt">&lt;/nominal_turn_acceleration&gt;</span>
   <span class="nt">&lt;max_turn_acceleration&gt;</span>2.0<span class="nt">&lt;/max_turn_acceleration&gt;</span>

   <span class="nt">&lt;tire_radius&gt;</span>0.1<span class="nt">&lt;/tire_radius&gt;</span>
   <span class="nt">&lt;base_width&gt;</span>0.3206<span class="nt">&lt;/base_width&gt;</span>

   <span class="nt">&lt;stop_distance&gt;</span>0.75<span class="nt">&lt;/stop_distance&gt;</span>
   <span class="nt">&lt;stop_radius&gt;</span>0.75<span class="nt">&lt;/stop_radius&gt;</span>

   <span class="c">&lt;!-- Can the robot drive backwards --&gt;</span>
   <span class="nt">&lt;reversible&gt;</span>true<span class="nt">&lt;/reversible&gt;</span>

   <span class="c">&lt;!-- Battery params --&gt;</span>
   <span class="nt">&lt;nominal_voltage&gt;</span>12.0<span class="nt">&lt;/nominal_voltage&gt;</span>
   <span class="nt">&lt;nominal_capacity&gt;</span>24.0<span class="nt">&lt;/nominal_capacity&gt;</span>
   <span class="nt">&lt;charging_current&gt;</span>5.0<span class="nt">&lt;/charging_current&gt;</span>

   <span class="c">&lt;!-- Physical params --&gt;</span>
   <span class="nt">&lt;mass&gt;</span>20.0<span class="nt">&lt;/mass&gt;</span>
   <span class="nt">&lt;inertia&gt;</span>10.0<span class="nt">&lt;/inertia&gt;</span>
   <span class="nt">&lt;friction_coefficient&gt;</span>0.22<span class="nt">&lt;/friction_coefficient&gt;</span>

   <span class="c">&lt;!-- Power systems --&gt;</span>
   <span class="nt">&lt;nominal_power&gt;</span>20.0<span class="nt">&lt;/nominal_power&gt;</span>

 <span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>The plugin has the following parameters:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_drive_speed</code>, <code class="language-plaintext highlighter-rouge">nominal_drive_acceleration</code>, <code class="language-plaintext highlighter-rouge">max_drive_acceleration</code>, motion parameters for linear velocity similar to the <code class="language-plaintext highlighter-rouge">door</code> plugin.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_turn_speed</code>, <code class="language-plaintext highlighter-rouge">nominal_turn_acceleration</code>, <code class="language-plaintext highlighter-rouge">max_turn_acceleration</code>, motion parameters for angular velocity.</li>
  <li>
<code class="language-plaintext highlighter-rouge">tire_radius</code>, <code class="language-plaintext highlighter-rouge">base_width</code>, used to convert the requested linear velocity from Open-RMF into a differential drive velocity for the single wheels. Currently only used for Gazebo Classic since Gazebo moves the model itself.</li>
  <li>
<code class="language-plaintext highlighter-rouge">stop_distance</code> and <code class="language-plaintext highlighter-rouge">stop_radius</code> are added to do simple collision avoidance for the robot, if a robot is closer than <code class="language-plaintext highlighter-rouge">stop_distance + stop_radius</code> to another object it will trigger an emergency stop.</li>
  <li>
<code class="language-plaintext highlighter-rouge">reversible</code> boolean that denotes whether the robot can drive backwards or not.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_voltage</code> voltage of the robot battery.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_capacity</code> capacity in Ampere-hour of the robot battery.</li>
  <li>
<code class="language-plaintext highlighter-rouge">charging_current</code> Current of the charger, ignored if the charging is set to instantaneous.</li>
  <li>
<code class="language-plaintext highlighter-rouge">mass</code>, robot mass in kilograms.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inertia</code>, angular moment of inertia around the Z axis, in kg*m^2.</li>
  <li>
<code class="language-plaintext highlighter-rouge">friction_coefficient</code>, amount of energy lost in linear movement due to friction, between 0 and 1.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_power</code>, the amount of power used by the robot even when idle (in W).</li>
</ul>

<h4 id="readonly">Readonly</h4>

<p>Readonly is a model plugin that can be attached to mobile entities that only provide their position to Open-RMF.
The plugin uses the entity’s current position and heading, together with a provided navigation graph, to estimate its itinerary and provide it to other fleets for traffic deconfliction.</p>

<p>An example from <code class="language-plaintext highlighter-rouge">rmf_demos</code> <a href="https://github.com/open-rmf/rmf_demos/blob/3f29a858ae64f2702696c5b1e5481c969c8f08a4/rmf_demos_assets/models/Caddy/model.sdf#L12-L29">Caddy</a> below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"readonly"</span> <span class="na">filename=</span><span class="s">"libreadonly.so"</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- Map name where the robot is spawned --&gt;</span>
  <span class="nt">&lt;level_name&gt;</span>L1<span class="nt">&lt;/level_name&gt;</span>
  <span class="c">&lt;!-- Index of navigation graph for the robot as stored in BuildingMap msg --&gt;</span>
  <span class="nt">&lt;graph_index&gt;</span>2<span class="nt">&lt;/graph_index&gt;</span>
  <span class="c">&lt;!-- Name of waypoint where caddy is spawned in the map --&gt;</span>
  <span class="nt">&lt;spawn_waypoint&gt;</span>caddy<span class="nt">&lt;/spawn_waypoint&gt;</span>
  <span class="c">&lt;!-- Number of waypoints to include in predicted path --&gt;</span>
  <span class="nt">&lt;look_ahead&gt;</span>3<span class="nt">&lt;/look_ahead&gt;</span>
  <span class="c">&lt;!-- Update rate (hz) at which robot_state is published --&gt;</span>
  <span class="nt">&lt;update_rate&gt;</span>15<span class="nt">&lt;/update_rate&gt;</span>
  <span class="c">&lt;!-- Waypoint threshold (m). Radius around the waypoint to determine if caddy is at that waypoint   --&gt;</span>
  <span class="nt">&lt;waypoint_threshold&gt;</span>2.0<span class="nt">&lt;/waypoint_threshold&gt;</span>
  <span class="c">&lt;!-- If true, predicted path will merge robot with nearest lane --&gt;</span>
  <span class="nt">&lt;merge_lane&gt;</span>false<span class="nt">&lt;/merge_lane&gt;</span>
  <span class="c">&lt;!-- Normal distance of robot from its lane, greater than which its path will merge with the lane --&gt;</span>
  <span class="nt">&lt;lane_threshold&gt;</span>0.2<span class="nt">&lt;/lane_threshold&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>In this example, the robot will use navigation graph index 2 and try to generate a path with 3 waypoints ahead of its current location and heading and publish state updates at 15 Hz.
<code class="language-plaintext highlighter-rouge">waypoint_threshold</code>, <code class="language-plaintext highlighter-rouge">merge_lane</code> and <code class="language-plaintext highlighter-rouge">lane_threshold</code> are used to determine whether a robot is on a waypoint, a lane, or outside of the navigation graph.</p>

<h4 id="teleport-dispenser">Teleport dispenser</h4>

<p>Teleport dispenser is a model plugin that dispenses objects to a robot by finding the closest non static object and teleporting it to the closest robot. An example snippet is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"teleport_dispenser"</span> <span class="na">filename=</span><span class="s">"libteleport_dispenser.so"</span><span class="nt">/&gt;</span>

</code></pre></div></div>

<h4 id="teleport-ingestor">Teleport ingestor</h4>

<p>Teleport ingestor is a model plugin that ingests an object from a robot by finding the closest non static items to a robot and teleporting it to the ingestor’s location.</p>

<p>An example snippet is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"teleport_ingestor"</span> <span class="na">filename=</span><span class="s">"libteleport_ingestor.so"</span><span class="nt">/&gt;</span>

</code></pre></div></div>

<h3 id="repository-organization">Repository organization</h3>

<p>Most plugins are split into a <code class="language-plaintext highlighter-rouge">common</code>, <code class="language-plaintext highlighter-rouge">gz</code> and <code class="language-plaintext highlighter-rouge">gz_classic</code> package. The <code class="language-plaintext highlighter-rouge">common</code> package contains the simulator independent logic, such as ROS 2 publishers / subscribptions, core logic, while the <code class="language-plaintext highlighter-rouge">gz</code> and <code class="language-plaintext highlighter-rouge">gz_classic</code> packages contain a wrapper to interface to the specific simulators.</p>

<h3 id="supported-versions">Supported versions</h3>

<p>Since Gazebo and ROS 2 have a different release schedule, this package will follow the <a href="https://github.com/gazebosim/ros_gz">ros_gz</a> supported version and, depending on which ROS 2 version Open-RMF is currently targeting, the Gazebo version will be set accordingly to allow using the binary release of the <code class="language-plaintext highlighter-rouge">ros_gz_bridge</code>.
For example, previous supported versions have been <code class="language-plaintext highlighter-rouge">ROS Galactic &lt;-&gt; Gazebo Edifice</code> and <code class="language-plaintext highlighter-rouge">ROS Humble &lt;-&gt; Gazebo Fortress</code>.</p>

<p>Gazebo Classic support through the <code class="language-plaintext highlighter-rouge">gz_classic</code> plugins is only guaranteed until Gazebo 11 EOL (currently scheduled for January 2025) and might be removed afterwards. Users are encouraged to use Gazebo for future development.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>

<p>Contributors must sign-off each commit by adding a <code class="language-plaintext highlighter-rouge">Signed-off-by: ...</code>
line to commit messages to certify that they have the right to submit
the code they are contributing to the project according to the
<a href="https://developercertificate.org/">Developer Certificate of Origin (DCO)</a>.</p>
</div>
              <hr id="rolling-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="rolling-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#rolling-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#rolling-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#rolling-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="rolling-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="rolling-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="rolling-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rmf_simulation">rmf_simulation</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-open-rmf-rmf_simulation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-open-rmf-rmf_simulation" role="menuitem" tabindex="-1" href="/r/rmf_simulation/github-open-rmf-rmf_simulation" data="github-open-rmf-rmf_simulation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-open-rmf-rmf_simulation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>github</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rmf_simulation">rmf_simulation</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-open-rmf-rmf_simulation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-open-rmf-rmf_simulation" role="menuitem" tabindex="-1" href="/r/rmf_simulation/github-open-rmf-rmf_simulation" data="github-open-rmf-rmf_simulation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-open-rmf-rmf_simulation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rmf_simulation">rmf_simulation</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/rmf_building_sim_common">rmf_building_sim_common</a>
        
        <a class="label label-primary pkg-label" href="/p/rmf_building_sim_gazebo_plugins">rmf_building_sim_gazebo_plugins</a>
        
        <a class="label label-primary pkg-label" href="/p/rmf_building_sim_ignition_plugins">rmf_building_sim_ignition_plugins</a>
        
        <a class="label label-primary pkg-label" href="/p/rmf_robot_sim_common">rmf_robot_sim_common</a>
        
        <a class="label label-primary pkg-label" href="/p/rmf_robot_sim_gazebo_plugins">rmf_robot_sim_gazebo_plugins</a>
        
        <a class="label label-primary pkg-label" href="/p/rmf_robot_sim_ignition_plugins">rmf_robot_sim_ignition_plugins</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-open-rmf-rmf_simulation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-open-rmf-rmf_simulation" role="menuitem" tabindex="-1" href="/r/rmf_simulation/github-open-rmf-rmf_simulation" data="github-open-rmf-rmf_simulation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-open-rmf-rmf_simulation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Support plugins for simulating RMF scenarios</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/open-rmf/rmf_simulation.git">https://github.com/open-rmf/rmf_simulation.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">galactic</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2021-12-01
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rmf_simulation/#galactic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rmf_simulation/#galactic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rmf_simulation/#galactic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/rmf_building_sim_common">rmf_building_sim_common</a></td>
                    <td>1.3.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rmf_building_sim_gazebo_plugins">rmf_building_sim_gazebo_plugins</a></td>
                    <td>1.3.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rmf_building_sim_ignition_plugins">rmf_building_sim_ignition_plugins</a></td>
                    <td>1.3.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rmf_robot_sim_common">rmf_robot_sim_common</a></td>
                    <td>1.3.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rmf_robot_sim_gazebo_plugins">rmf_robot_sim_gazebo_plugins</a></td>
                    <td>1.3.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rmf_robot_sim_ignition_plugins">rmf_robot_sim_ignition_plugins</a></td>
                    <td>1.3.1</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="rmf-simulator-plugins">RMF simulator plugins</h1>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>

<p>Contributors must sign-off each commit by adding a <code class="language-plaintext highlighter-rouge">Signed-off-by: ...</code>
line to commit messages to certify that they have the right to submit
the code they are contributing to the project according to the
<a href="https://developercertificate.org/">Developer Certificate of Origin (DCO)</a>.</p>
</div>
              <hr id="galactic-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="galactic-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#galactic-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#galactic-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#galactic-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="galactic-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="galactic-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="galactic-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rmf_simulation">rmf_simulation</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/rmf_building_sim_common">rmf_building_sim_common</a>
        
        <a class="label label-primary pkg-label" href="/p/rmf_building_sim_gz_classic_plugins">rmf_building_sim_gz_classic_plugins</a>
        
        <a class="label label-primary pkg-label" href="/p/rmf_building_sim_gz_plugins">rmf_building_sim_gz_plugins</a>
        
        <a class="label label-primary pkg-label" href="/p/rmf_robot_sim_common">rmf_robot_sim_common</a>
        
        <a class="label label-primary pkg-label" href="/p/rmf_robot_sim_gz_classic_plugins">rmf_robot_sim_gz_classic_plugins</a>
        
        <a class="label label-primary pkg-label" href="/p/rmf_robot_sim_gz_plugins">rmf_robot_sim_gz_plugins</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-open-rmf-rmf_simulation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-open-rmf-rmf_simulation" role="menuitem" tabindex="-1" href="/r/rmf_simulation/github-open-rmf-rmf_simulation" data="github-open-rmf-rmf_simulation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-open-rmf-rmf_simulation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Support plugins for simulating RMF scenarios</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/open-rmf/rmf_simulation.git">https://github.com/open-rmf/rmf_simulation.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">iron</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2023-12-20
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rmf_simulation/#iron-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rmf_simulation/#iron-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rmf_simulation/#iron-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/rmf_building_sim_common">rmf_building_sim_common</a></td>
                    <td>2.1.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rmf_building_sim_gz_classic_plugins">rmf_building_sim_gz_classic_plugins</a></td>
                    <td>2.1.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rmf_building_sim_gz_plugins">rmf_building_sim_gz_plugins</a></td>
                    <td>2.1.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rmf_robot_sim_common">rmf_robot_sim_common</a></td>
                    <td>2.1.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rmf_robot_sim_gz_classic_plugins">rmf_robot_sim_gz_classic_plugins</a></td>
                    <td>2.1.2</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rmf_robot_sim_gz_plugins">rmf_robot_sim_gz_plugins</a></td>
                    <td>2.1.2</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="rmf_simulation">rmf_simulation</h1>

<p>This repository contains simulation plugins used in Open-RMF. It currently supports Gazebo Classic 11 and Gazebo Fortress.</p>

<p>Simulation plugins are split in Building simulation and Robot simulation plugins</p>

<h3 id="building-simulation">Building Simulation</h3>

<p>Building simulation plugins are located under <code class="language-plaintext highlighter-rouge">rmf_building_sim_*</code> and used to simulate different aspect of buildings such as doors, lifts and crowds (currently through the <a href="https://github.com/open-rmf/menge_vendor">Menge library</a>). Utility plugins to help with simulation, such as UI widgets to toggle battery consumption and set charging behavior, as well as toggling floor visibility, are also placed in this category.</p>

<h4 id="door-plugin">Door plugin</h4>

<p>The door plugin is a model plugin that can be attached to door models to make them interface with Open-RMF. It adds a publisher for door state and a subscription to door requests.
An example SDF snippet is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"door"</span> <span class="na">filename=</span><span class="s">"libdoor.so"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;v_max_door&gt;</span>0.5<span class="nt">&lt;/v_max_door&gt;</span>
  <span class="nt">&lt;a_max_door&gt;</span>0.3<span class="nt">&lt;/a_max_door&gt;</span>
  <span class="nt">&lt;a_nom_door&gt;</span>0.15<span class="nt">&lt;/a_nom_door&gt;</span>
  <span class="nt">&lt;dx_min_door&gt;</span>0.01<span class="nt">&lt;/dx_min_door&gt;</span>
  <span class="nt">&lt;f_max_door&gt;</span>500.0<span class="nt">&lt;/f_max_door&gt;</span>
  <span class="nt">&lt;door</span> <span class="na">name=</span><span class="s">"main_door"</span> <span class="na">type=</span><span class="s">"DoubleSwingDoor"</span> <span class="na">left_joint_name=</span><span class="s">"left_joint"</span> <span class="na">right_joint_name=</span><span class="s">"right_joint"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>Where:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">v_max_door</code> is the maximum velocity of the door joints.</li>
  <li>
<code class="language-plaintext highlighter-rouge">a_max_door</code> is the maximum acceleration of the door joints.</li>
  <li>
<code class="language-plaintext highlighter-rouge">a_nom_door</code> is the nominal acceleration that the door controller will aim for when opening / closing doors.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dx_min_door</code> is the threshold used to determine whether the door is open, closed or moving. Specifically if all the door joints are within <code class="language-plaintext highlighter-rouge">dx_min_door</code> of their closed position the door will be considered closed, if they are within <code class="language-plaintext highlighter-rouge">dx_min_door</code> of their open position the door will be considered closed, otherwise it will be considered moving.</li>
  <li>
<code class="language-plaintext highlighter-rouge">f_max_door</code> is the maximum effort for the physics simulation.</li>
  <li>
<code class="language-plaintext highlighter-rouge">door</code> is a child element with a series of child attributes:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">name</code> is the name of the door, as seen by Open-RMF.</li>
      <li>
<code class="language-plaintext highlighter-rouge">type</code> is a string that describes the door type, supported door types can be found in <code class="language-plaintext highlighter-rouge">rmf_building_map_tools</code> <a href="https://github.com/open-rmf/rmf_traffic_editor/tree/main/rmf_building_map_tools/building_map/doors">repo</a>.</li>
      <li>
<code class="language-plaintext highlighter-rouge">left_joint_name</code> and <code class="language-plaintext highlighter-rouge">right_joint_name</code> are the names of the left and right joint for the door, for double doors both are expected to be names of joints in the model, for single doors one of them can be empty or set to <code class="language-plaintext highlighter-rouge">empty_joint</code> to make the simulation plugin ignore it.</li>
    </ul>
  </li>
</ul>

<h4 id="lift-plugin">Lift plugin</h4>

<p>The lift plugin is a model plugin that can be attached to lifts to make them interface with Open-RMF. It adds a publisher for lift state and a subscription to lift requests.
An example SDF snippet is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"lift"</span> <span class="na">filename=</span><span class="s">"liblift.so"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;lift_name&gt;</span>lift_1<span class="nt">&lt;/lift_name&gt;</span>
  <span class="nt">&lt;floor</span> <span class="na">name=</span><span class="s">"L1"</span> <span class="na">elevation=</span><span class="s">"0.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;door_pair</span> <span class="na">cabin_door=</span><span class="s">"CabinDoor_lift_1_lift_1_door"</span> <span class="na">shaft_door=</span><span class="s">"ShaftDoor_lift_1_L1_lift_1_door"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/floor&gt;</span>
  <span class="nt">&lt;floor</span> <span class="na">name=</span><span class="s">"L2"</span> <span class="na">elevation=</span><span class="s">"10.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;door_pair</span> <span class="na">cabin_door=</span><span class="s">"CabinDoor_lift_1_lift_1_door"</span> <span class="na">shaft_door=</span><span class="s">"ShaftDoor_lift_1_L2_lift_1_door"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/floor&gt;</span>
  <span class="nt">&lt;initial_floor&gt;</span>L1<span class="nt">&lt;/initial_floor&gt;</span>
  <span class="nt">&lt;v_max_cabin&gt;</span>2.0<span class="nt">&lt;/v_max_cabin&gt;</span>
  <span class="nt">&lt;a_max_cabin&gt;</span>1.2<span class="nt">&lt;/a_max_cabin&gt;</span>
  <span class="nt">&lt;a_nom_cabin&gt;</span>1.0<span class="nt">&lt;/a_nom_cabin&gt;</span>
  <span class="nt">&lt;dx_min_cabin&gt;</span>0.001<span class="nt">&lt;/dx_min_cabin&gt;</span>
  <span class="nt">&lt;f_max_cabin&gt;</span>25323.0<span class="nt">&lt;/f_max_cabin&gt;</span>
  <span class="nt">&lt;cabin_joint_name&gt;</span>cabin_joint<span class="nt">&lt;/cabin_joint_name&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>Where:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">lift_name</code> is the name of the lift, as seen by Open-RMF.</li>
  <li>
<code class="language-plaintext highlighter-rouge">floor</code> describes a floor, there can be any amount of <code class="language-plaintext highlighter-rouge">floor</code> elements with:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">name</code> attribute with the name of the floor, as seen by Open-RMF.</li>
      <li>
<code class="language-plaintext highlighter-rouge">elevation</code> attribute with the height in meters of the floor, relative to the ground plane.</li>
      <li>
<code class="language-plaintext highlighter-rouge">door_pair</code> child element with a <code class="language-plaintext highlighter-rouge">cabin_door</code> attribute to specify which cabin door should open at this floor and a <code class="language-plaintext highlighter-rouge">shaft_door</code> attribute to specify which shaft door should open. These names should match the names of doors in the world file.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">initial_floor</code> The floor that the lift should start at.</li>
  <li>
<code class="language-plaintext highlighter-rouge">v_max_cabin</code>, <code class="language-plaintext highlighter-rouge">a_max_cabin</code>, <code class="language-plaintext highlighter-rouge">a_nom_cabin</code>, <code class="language-plaintext highlighter-rouge">dx_min_cabin</code> and <code class="language-plaintext highlighter-rouge">f_max_cabin</code> are motion parameters with the same meaning as the ones in the door plugin.</li>
  <li>
<code class="language-plaintext highlighter-rouge">cabin_joint_name</code> is the name of the main joint of the cabin, which is the one to be actuated vertically.</li>
</ul>

<h4 id="crowd-simulation">Crowd simulation</h4>

<p>Crowd simulation configuration is added as a world plugin and is more complex and autogenerated, for an in depth description check the documentation <a href="https://github.com/FloodShao/crowd_simulation/blob/master/crowd_simulation_doc/crowd_simulation_usage.md">here</a></p>

<h4 id="toggle-charging">Toggle charging</h4>

<p>Toggle charging is a world plugin, added by default to all Open-RMF worlds that adds a GUI to toggle charging behaviors, such as enabling / disabling battery consumption or setting chargers to instantly refill the robot battery to reduce idle time in simulations.</p>

<p>It is added with the following snippet:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"toggle_charging"</span> <span class="na">filename=</span><span class="s">"libtoggle_charging.so"</span> <span class="nt">/&gt;</span>

</code></pre></div></div>

<h4 id="toggle-floors">Toggle floors</h4>

<p>Toggle charging is a world plugin, added by default to all Open-RMF worlds, that adds a GUI plugin with buttons to enable / disable visibility of specific floors, to make visualization of intermediate floors easier.</p>

<p>An example SDF snippet:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"toggle_floors"</span> <span class="na">filename=</span><span class="s">"libtoggle_floors.so"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;floor</span> <span class="na">name=</span><span class="s">"L1"</span> <span class="na">model_name=</span><span class="s">"clinic_L1"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;model</span> <span class="na">name=</span><span class="s">"OpenRobotics/PotatoChipChair"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;model</span> <span class="na">name=</span><span class="s">"OpenRobotics/PotatoChipChair_2"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/floor&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>The plugin element has a list of <code class="language-plaintext highlighter-rouge">floor</code> children, each of them with:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">name</code> attribute that will be displayd in the GUI button.</li>
  <li>
<code class="language-plaintext highlighter-rouge">model_name</code> points to the name of the floor model generated by <code class="language-plaintext highlighter-rouge">rmf_building_map_tools</code>.</li>
  <li>A list of <code class="language-plaintext highlighter-rouge">model</code> children, each with the name of a model that resides on that level.</li>
</ul>

<h3 id="robot-simulation">Robot simulation</h3>

<p>Robot simulation plugins under <code class="language-plaintext highlighter-rouge">rmf_robot_sim_*</code> are used to simulate aspects of robots behavior, including robot navigation and interfaces to workcells.</p>

<h4 id="slotcar">Slotcar</h4>

<p>Slotcar is a model plugin that acts as a simple robot navigation stack, controlling the robot and sending updates to its fleet adapter through ROS 2 topics.</p>

<p>An example, taken from <code class="language-plaintext highlighter-rouge">rmf_demos</code> <a href="https://github.com/open-rmf/rmf_demos/blob/3f29a858ae64f2702696c5b1e5481c969c8f08a4/rmf_demos_assets/models/TinyRobot/model.sdf#L5-L37">TinyRobot</a>, is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"slotcar"</span> <span class="na">filename=</span><span class="s">"libslotcar.so"</span><span class="nt">&gt;</span>

   <span class="nt">&lt;nominal_drive_speed&gt;</span>0.5<span class="nt">&lt;/nominal_drive_speed&gt;</span>
   <span class="nt">&lt;nominal_drive_acceleration&gt;</span>0.25<span class="nt">&lt;/nominal_drive_acceleration&gt;</span>
   <span class="nt">&lt;max_drive_acceleration&gt;</span>0.75<span class="nt">&lt;/max_drive_acceleration&gt;</span>

   <span class="nt">&lt;nominal_turn_speed&gt;</span>0.6<span class="nt">&lt;/nominal_turn_speed&gt;</span>
   <span class="nt">&lt;nominal_turn_acceleration&gt;</span>1.5<span class="nt">&lt;/nominal_turn_acceleration&gt;</span>
   <span class="nt">&lt;max_turn_acceleration&gt;</span>2.0<span class="nt">&lt;/max_turn_acceleration&gt;</span>

   <span class="nt">&lt;tire_radius&gt;</span>0.1<span class="nt">&lt;/tire_radius&gt;</span>
   <span class="nt">&lt;base_width&gt;</span>0.3206<span class="nt">&lt;/base_width&gt;</span>

   <span class="nt">&lt;stop_distance&gt;</span>0.75<span class="nt">&lt;/stop_distance&gt;</span>
   <span class="nt">&lt;stop_radius&gt;</span>0.75<span class="nt">&lt;/stop_radius&gt;</span>

   <span class="c">&lt;!-- Can the robot drive backwards --&gt;</span>
   <span class="nt">&lt;reversible&gt;</span>true<span class="nt">&lt;/reversible&gt;</span>

   <span class="c">&lt;!-- Battery params --&gt;</span>
   <span class="nt">&lt;nominal_voltage&gt;</span>12.0<span class="nt">&lt;/nominal_voltage&gt;</span>
   <span class="nt">&lt;nominal_capacity&gt;</span>24.0<span class="nt">&lt;/nominal_capacity&gt;</span>
   <span class="nt">&lt;charging_current&gt;</span>5.0<span class="nt">&lt;/charging_current&gt;</span>

   <span class="c">&lt;!-- Physical params --&gt;</span>
   <span class="nt">&lt;mass&gt;</span>20.0<span class="nt">&lt;/mass&gt;</span>
   <span class="nt">&lt;inertia&gt;</span>10.0<span class="nt">&lt;/inertia&gt;</span>
   <span class="nt">&lt;friction_coefficient&gt;</span>0.22<span class="nt">&lt;/friction_coefficient&gt;</span>

   <span class="c">&lt;!-- Power systems --&gt;</span>
   <span class="nt">&lt;nominal_power&gt;</span>20.0<span class="nt">&lt;/nominal_power&gt;</span>

 <span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>The plugin has the following parameters:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_drive_speed</code>, <code class="language-plaintext highlighter-rouge">nominal_drive_acceleration</code>, <code class="language-plaintext highlighter-rouge">max_drive_acceleration</code>, motion parameters for linear velocity similar to the <code class="language-plaintext highlighter-rouge">door</code> plugin.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_turn_speed</code>, <code class="language-plaintext highlighter-rouge">nominal_turn_acceleration</code>, <code class="language-plaintext highlighter-rouge">max_turn_acceleration</code>, motion parameters for angular velocity.</li>
  <li>
<code class="language-plaintext highlighter-rouge">tire_radius</code>, <code class="language-plaintext highlighter-rouge">base_width</code>, used to convert the requested linear velocity from Open-RMF into a differential drive velocity for the single wheels. Currently only used for Gazebo Classic since Gazebo moves the model itself.</li>
  <li>
<code class="language-plaintext highlighter-rouge">stop_distance</code> and <code class="language-plaintext highlighter-rouge">stop_radius</code> are added to do simple collision avoidance for the robot, if a robot is closer than <code class="language-plaintext highlighter-rouge">stop_distance + stop_radius</code> to another object it will trigger an emergency stop.</li>
  <li>
<code class="language-plaintext highlighter-rouge">reversible</code> boolean that denotes whether the robot can drive backwards or not.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_voltage</code> voltage of the robot battery.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_capacity</code> capacity in Ampere-hour of the robot battery.</li>
  <li>
<code class="language-plaintext highlighter-rouge">charging_current</code> Current of the charger, ignored if the charging is set to instantaneous.</li>
  <li>
<code class="language-plaintext highlighter-rouge">mass</code>, robot mass in kilograms.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inertia</code>, angular moment of inertia around the Z axis, in kg*m^2.</li>
  <li>
<code class="language-plaintext highlighter-rouge">friction_coefficient</code>, amount of energy lost in linear movement due to friction, between 0 and 1.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nominal_power</code>, the amount of power used by the robot even when idle (in W).</li>
</ul>

<h4 id="readonly">Readonly</h4>

<p>Readonly is a model plugin that can be attached to mobile entities that only provide their position to Open-RMF.
The plugin uses the entity’s current position and heading, together with a provided navigation graph, to estimate its itinerary and provide it to other fleets for traffic deconfliction.</p>

<p>An example from <code class="language-plaintext highlighter-rouge">rmf_demos</code> <a href="https://github.com/open-rmf/rmf_demos/blob/3f29a858ae64f2702696c5b1e5481c969c8f08a4/rmf_demos_assets/models/Caddy/model.sdf#L12-L29">Caddy</a> below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"readonly"</span> <span class="na">filename=</span><span class="s">"libreadonly.so"</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- Map name where the robot is spawned --&gt;</span>
  <span class="nt">&lt;level_name&gt;</span>L1<span class="nt">&lt;/level_name&gt;</span>
  <span class="c">&lt;!-- Index of navigation graph for the robot as stored in BuildingMap msg --&gt;</span>
  <span class="nt">&lt;graph_index&gt;</span>2<span class="nt">&lt;/graph_index&gt;</span>
  <span class="c">&lt;!-- Name of waypoint where caddy is spawned in the map --&gt;</span>
  <span class="nt">&lt;spawn_waypoint&gt;</span>caddy<span class="nt">&lt;/spawn_waypoint&gt;</span>
  <span class="c">&lt;!-- Number of waypoints to include in predicted path --&gt;</span>
  <span class="nt">&lt;look_ahead&gt;</span>3<span class="nt">&lt;/look_ahead&gt;</span>
  <span class="c">&lt;!-- Update rate (hz) at which robot_state is published --&gt;</span>
  <span class="nt">&lt;update_rate&gt;</span>15<span class="nt">&lt;/update_rate&gt;</span>
  <span class="c">&lt;!-- Waypoint threshold (m). Radius around the waypoint to determine if caddy is at that waypoint   --&gt;</span>
  <span class="nt">&lt;waypoint_threshold&gt;</span>2.0<span class="nt">&lt;/waypoint_threshold&gt;</span>
  <span class="c">&lt;!-- If true, predicted path will merge robot with nearest lane --&gt;</span>
  <span class="nt">&lt;merge_lane&gt;</span>false<span class="nt">&lt;/merge_lane&gt;</span>
  <span class="c">&lt;!-- Normal distance of robot from its lane, greater than which its path will merge with the lane --&gt;</span>
  <span class="nt">&lt;lane_threshold&gt;</span>0.2<span class="nt">&lt;/lane_threshold&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div>

<p>In this example, the robot will use navigation graph index 2 and try to generate a path with 3 waypoints ahead of its current location and heading and publish state updates at 15 Hz.
<code class="language-plaintext highlighter-rouge">waypoint_threshold</code>, <code class="language-plaintext highlighter-rouge">merge_lane</code> and <code class="language-plaintext highlighter-rouge">lane_threshold</code> are used to determine whether a robot is on a waypoint, a lane, or outside of the navigation graph.</p>

<h4 id="teleport-dispenser">Teleport dispenser</h4>

<p>Teleport dispenser is a model plugin that dispenses objects to a robot by finding the closest non static object and teleporting it to the closest robot. An example snippet is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"teleport_dispenser"</span> <span class="na">filename=</span><span class="s">"libteleport_dispenser.so"</span><span class="nt">/&gt;</span>

</code></pre></div></div>

<h4 id="teleport-ingestor">Teleport ingestor</h4>

<p>Teleport ingestor is a model plugin that ingests an object from a robot by finding the closest non static items to a robot and teleporting it to the ingestor’s location.</p>

<p>An example snippet is below:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"teleport_ingestor"</span> <span class="na">filename=</span><span class="s">"libteleport_ingestor.so"</span><span class="nt">/&gt;</span>

</code></pre></div></div>

<h3 id="repository-organization">Repository organization</h3>

<p>Most plugins are split into a <code class="language-plaintext highlighter-rouge">common</code>, <code class="language-plaintext highlighter-rouge">gz</code> and <code class="language-plaintext highlighter-rouge">gz_classic</code> package. The <code class="language-plaintext highlighter-rouge">common</code> package contains the simulator independent logic, such as ROS 2 publishers / subscribptions, core logic, while the <code class="language-plaintext highlighter-rouge">gz</code> and <code class="language-plaintext highlighter-rouge">gz_classic</code> packages contain a wrapper to interface to the specific simulators.</p>

<h3 id="supported-versions">Supported versions</h3>

<p>Since Gazebo and ROS 2 have a different release schedule, this package will follow the <a href="https://github.com/gazebosim/ros_gz">ros_gz</a> supported version and, depending on which ROS 2 version Open-RMF is currently targeting, the Gazebo version will be set accordingly to allow using the binary release of the <code class="language-plaintext highlighter-rouge">ros_gz_bridge</code>.
For example, previous supported versions have been <code class="language-plaintext highlighter-rouge">ROS Galactic &lt;-&gt; Gazebo Edifice</code> and <code class="language-plaintext highlighter-rouge">ROS Humble &lt;-&gt; Gazebo Fortress</code>.</p>

<p>Gazebo Classic support through the <code class="language-plaintext highlighter-rouge">gz_classic</code> plugins is only guaranteed until Gazebo 11 EOL (currently scheduled for January 2025) and might be removed afterwards. Users are encouraged to use Gazebo for future development.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>

<p>Contributors must sign-off each commit by adding a <code class="language-plaintext highlighter-rouge">Signed-off-by: ...</code>
line to commit messages to certify that they have the right to submit
the code they are contributing to the project according to the
<a href="https://developercertificate.org/">Developer Certificate of Origin (DCO)</a>.</p>
</div>
              <hr id="iron-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="iron-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#iron-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#iron-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#iron-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="iron-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="iron-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="iron-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rmf_simulation">rmf_simulation</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-open-rmf-rmf_simulation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-open-rmf-rmf_simulation" role="menuitem" tabindex="-1" href="/r/rmf_simulation/github-open-rmf-rmf_simulation" data="github-open-rmf-rmf_simulation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-open-rmf-rmf_simulation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/open-rmf/rmf_simulation.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
