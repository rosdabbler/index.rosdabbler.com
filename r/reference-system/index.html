<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/reference-system/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">reference-system</li>
        <!--<li class="active">reference-system</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-default" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-default" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-default" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-default" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-primary" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class="disabled older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/reference-system">reference-system</a> <small>repository</small></h3>
        <span class="label label-default">middleware</span> <span class="label label-default">cpp</span> <span class="label label-default">ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-realtime-reference-system
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-realtime-reference-system" role="menuitem" tabindex="-1" href="/r/reference-system/github-ros-realtime-reference-system" data="github-ros-realtime-reference-system">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-realtime-reference-system
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>humble</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/reference-system">reference-system</a> <small>repository</small></h3>
        <span class="label label-default">middleware</span> <span class="label label-default">cpp</span> <span class="label label-default">ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-realtime-reference-system
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-realtime-reference-system" role="menuitem" tabindex="-1" href="/r/reference-system/github-ros-realtime-reference-system" data="github-ros-realtime-reference-system">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-realtime-reference-system
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jazzy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/reference-system">reference-system</a> <small>repository</small></h3>
        <span class="label label-default">middleware</span> <span class="label label-default">cpp</span> <span class="label label-default">ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-realtime-reference-system
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-realtime-reference-system" role="menuitem" tabindex="-1" href="/r/reference-system/github-ros-realtime-reference-system" data="github-ros-realtime-reference-system">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-realtime-reference-system
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>kilted</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/reference-system">reference-system</a> <small>repository</small></h3>
        <span class="label label-default">middleware</span> <span class="label label-default">cpp</span> <span class="label label-default">ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-realtime-reference-system
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-realtime-reference-system" role="menuitem" tabindex="-1" href="/r/reference-system/github-ros-realtime-reference-system" data="github-ros-realtime-reference-system">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-realtime-reference-system
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>rolling</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/reference-system">reference-system</a> <small>repository</small></h3>
        <span class="label label-default">middleware</span> <span class="label label-default">cpp</span> <span class="label label-default">ros2</span> 
        
        <a class="label label-primary pkg-label" href="/p/autoware_reference_system">autoware_reference_system</a>
        
        <a class="label label-primary pkg-label" href="/p/reference_interfaces">reference_interfaces</a>
        
        <a class="label label-primary pkg-label" href="/p/reference_system">reference_system</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-realtime-reference-system
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-realtime-reference-system" role="menuitem" tabindex="-1" href="/r/reference-system/github-ros-realtime-reference-system" data="github-ros-realtime-reference-system">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-realtime-reference-system
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">A reference system that simulates real-world systems in order to more fairly compare various configurations of executors and other settings</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-realtime/reference-system.git">https://github.com/ros-realtime/reference-system.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2023-09-17
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNKNOWN
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">middleware</span> <span class="label label-default">cpp</span> <span class="label label-default">ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/reference-system/#github-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/reference-system/#github-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/reference-system/#github-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/autoware_reference_system">autoware_reference_system</a></td>
                    <td>1.1.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/reference_interfaces">reference_interfaces</a></td>
                    <td>1.1.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/reference_system">reference_system</a></td>
                    <td>1.1.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="the-reference-system">The reference system</h1>

<p>With the distributed development of ROS across many different organizations it is sometimes hard to
benchmark and concretely show how a certain change to a certain system improves or
reduces the performance of that system.
For example did a change from one executor to another actually
reduce the CPU or was it something else entirely?</p>

<p><a href="https://github.com/ros-realtime/reference-system/tree/main/reference_system/README.md">The <code class="language-plaintext highlighter-rouge">reference_system</code> package</a> was developed to provide the
fundamental building blocks to create complex systems that then can be used to
evaluate features or performance in a standardized and repeatable way.</p>

<p>The first project to use this <code class="language-plaintext highlighter-rouge">reference_system</code> is <a href="https://github.com/ros-realtime/reference-system/tree/main/autoware_reference_system/README.md">the <code class="language-plaintext highlighter-rouge">autoware_reference_system</code>.</a></p>

<p>Future <em>reference systems</em> could be proposed that are more complex using the same
basic node building blocks within the <code class="language-plaintext highlighter-rouge">reference_system</code> package.</p>

<h2 id="defining-a-reference-system">Defining a reference system</h2>

<p>A <em>reference system</em> is defined by:</p>

<ul>
  <li>A fixed number of nodes
    <ul>
      <li>each node with:
        <ul>
          <li>a fixed number of publishers and subscribers</li>
          <li>a fixed <em>processing time</em> or a fixed <em>publishing rate</em>
</li>
        </ul>
      </li>
      <li>the <code class="language-plaintext highlighter-rouge">reference_system</code> base package defines <a href="https://github.com/ros-realtime/reference-system/tree/main/reference_system/README.md#base-node-types">reusable base node types</a> to be used in various reference systems</li>
    </ul>
  </li>
  <li>A fixed <em>message type</em> of fixed size to be used for every <em>node</em>
</li>
  <li>For simplicity and ease of benchmarking, <strong>all nodes must run on a single process</strong>
</li>
</ul>

<p>Reference systems can run on what is referred to as a <a href="https://github.com/ros-realtime/reference-system/tree/main/#supported-platforms">platform</a>.
A platform is defined by:
    - Hardware (e.g. an off-the-shelf single-board computer, embedded ECU, etc.)
        - if there are multiple configurations available for such hardware, ensure it is specified
    - Operating System (OS) like RT Linux, QNX, etc. along with any special configurations made</p>

<p>With these defined attributes the reference system can be replicated across many different possible
configurations to be used to benchmark each configuration against the other in a reliable and fair
manner.</p>

<p>With this approach <a href="https://github.com/ros-realtime/reference-system/tree/main/#testing">portable and repeatable tests</a> can also be defined to reliably confirm
if a given <em>reference system</em> meets the requirements.</p>

<h2 id="supported-platforms">Supported Platforms</h2>

<p>To enable as many people as possible to replicate this reference system, the platform(s) were chosen
to be easily accessible (inexpensive, high volume), have lots of documentation,
large community use and will be supported well into the future.</p>

<p>Platforms were not chosen for performance of the reference system - we know we could run “faster”
with a more powerful CPU or GPU but then it would be harder for others to validate findings
and test their own configurations.
Accessibility is the key here and will be considered if
more platforms want to be added to this benchmark list.</p>

<p><strong>Platforms:</strong></p>

<ul>
  <li>
<a href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/">Raspberry Pi 4B</a>:
    <ul>
      <li>4 GB RAM version is the assumed default
        <ul>
          <li>other versions could also be tested / added by the community</li>
        </ul>
      </li>
      <li><a href="https://github.com/ros-realtime/rt-kernel-docker-builder">real-time Linux kernel</a></li>
    </ul>
  </li>
</ul>

<p><em>Note: create an <a href="https://github.com/ros-realtime/reference-system-autoware/issues/">issue</a></em>
<em>to add more platforms to the list, keeping in mind the above criteria</em></p>

<p>!!! warning
    Each reference system can be run on other targets as well
    however the results will change drastically depending on the
    specifications of the target hardware.</p>

<h2 id="implemented-reference-systems">Implemented reference systems</h2>

<p>The first reference system benchmark proposed is based on the <em>Autoware.Auto</em> LiDAR data pipeline
as stated above and shown in the node graph image above as well.</p>

<ol>
  <li>
<strong>Autoware Reference System</strong>
    <ul>
      <li>ROS2
        <ul>
          <li>Executors
            <ul>
              <li>Single Threaded</li>
              <li>Static Single Threaded</li>
              <li>Multithreaded</li>
              <li>Callback Group</li>
              <li>Prioritized</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<p>Results below show various characteristics of the same simulated system (Autoware.Auto).</p>

<h2 id="setup-raspberry-pi-4-for-the-test">Setup Raspberry Pi 4 for the test</h2>

<p>The goal is to provide a clean computation environment for the test
avoiding an interference of other Ubuntu components.</p>

<h3 id="setup-a-constant-cpu-frequency">Setup a constant CPU frequency</h3>

<p>Frequency is setup to 1.50 GHz for all CPUs</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span>run it as root
<span class="go">sudo su

echo -n "setup constant CPU frequency to 1.50 GHz ... "
</span><span class="gp">#</span><span class="w"> </span>disable ondemand governor
<span class="go">systemctl disable ondemand

</span><span class="gp">#</span><span class="w"> </span><span class="nb">set </span>performance governor <span class="k">for </span>all cpus
<span class="gp">echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor &gt;</span>/dev/null
<span class="go">
</span><span class="gp">#</span><span class="w"> </span><span class="nb">set </span>constant frequency
<span class="gp">echo 1500000 | tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_min_freq &gt;</span>/dev/null
<span class="gp">echo 1500000 | tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_max_freq &gt;</span>/dev/null
<span class="go">
</span><span class="gp">#</span><span class="w"> </span>reset frequency counters
<span class="gp">echo 1 | tee /sys/devices/system/cpu/cpu*/cpufreq/stats/reset &gt;</span>/dev/null
<span class="go">
echo done

sleep 1
</span><span class="gp">#</span><span class="w"> </span>get freq info
<span class="go">echo `cpufreq-info | grep stats | cut -d ' ' -f 23-25`

</span></code></pre></div></div>

<h3 id="isolate-cpus">Isolate CPUs</h3>

<p>CPU 2,3 are isolated to run tests.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">sudo apt install -y sysstat u-boot-tools

</span></code></pre></div></div>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span>modify kernel cmdline
<span class="go">cd ~
dd if=/boot/firmware/boot.scr of=boot.script bs=72 skip=1

</span><span class="gp">#</span><span class="w"> </span>edit boot.script and modify bootargs to
<span class="gp">ubuntu@ubuntu:~$</span><span class="w"> </span><span class="nb">cat </span>boot.script | <span class="nb">grep</span> <span class="s2">"setenv bootargs"</span> | <span class="nb">head</span> <span class="nt">-1</span>
<span class="gp">setenv bootargs " $</span><span class="o">{</span>bootargs<span class="o">}</span> <span class="nv">rcu_nocbs</span><span class="o">=</span>2,3 <span class="nv">nohz_full</span><span class="o">=</span>2,3 <span class="nv">isolcpus</span><span class="o">=</span>2,3 <span class="nv">irqaffinity</span><span class="o">=</span>0,1 <span class="nv">audit</span><span class="o">=</span>0 <span class="nv">watchdog</span><span class="o">=</span>0 <span class="nv">skew_tick</span><span class="o">=</span>1 quiet splash<span class="s2">"
</span><span class="go">
</span><span class="gp">#</span><span class="w"> </span>generate boot.scr
<span class="go">mkimage -A arm64 -O linux -T script -C none -d boot.script boot.scr

</span><span class="gp">#</span><span class="w"> </span>replace boot.scr
<span class="go">sudo cp boot.scr /boot/firmware/boot.scr

sudo reboot

</span><span class="gp">#</span><span class="w"> </span>check cmdline
<span class="gp">ubuntu@ubuntu:~$</span><span class="w"> </span><span class="nb">cat</span> /proc/cmdline
<span class="go"> coherent_pool=1M 8250.nr_uarts=1 snd_bcm2835.enable_compat_alsa=0 snd_bcm2835.enable_hdmi=1 bcm2708_fb.fbwidth=0 bcm2708_fb.fbheight=0 bcm2708_fb.fbswap=1 smsc95xx.macaddr=DC:A6:32:2E:5
4:97 vc_mem.mem_base=0x3ec00000 vc_mem.mem_size=0x40000000  net.ifnames=0 dwc_otg.lpm_enable=0 console=ttyS0,115200 console=tty1 root=LABEL=writable rootfstype=ext4 elevator=deadline roo
twait fixrtc rcu_nocbs=2,3 nohz_full=2,3 isolcpus=2,3 irqaffinity=0,1 audit=0 watchdog=0 skew_tick=1 quiet splash

</span><span class="gp">#</span><span class="w"> </span>check interrupts
<span class="gp">#</span><span class="w"> </span>Only the number of interrupts handled by CPU 0,1 increases.
<span class="go">watch -n1 cat /proc/interrupts

</span><span class="gp">#</span><span class="w"> </span>check soft interrupts
<span class="go">watch -n1 cat /proc/softirqs

</span><span class="gp">#</span><span class="w"> </span>check isolated CPUs
<span class="go">cat /sys/devices/system/cpu/isolated
2-3
cat /sys/devices/system/cpu/present
0-3

</span><span class="gp">#</span><span class="w"> </span>run reference system on CPU2
<span class="gp">taskset -c 2 install/autoware_reference_system/lib/autoware_reference_system/autoware_default_singlethreaded &gt;</span><span class="w"> </span>/dev/null
<span class="go">
</span><span class="gp">#</span><span class="w"> </span>get pid
<span class="gp">RF_PID=`pidof autoware_default_singlethreaded` &amp;&amp; cat /proc/$</span>RF_PID/status | <span class="nb">grep</span> ^Cpu
<span class="go">
</span><span class="gp">#</span><span class="w"> </span>check how many threads are running
<span class="gp">ps -aL | grep $</span>RF_PID
<span class="go">   3835    3835 ttyS0    00:03:46 autoware_defaul
   3835    3836 ttyS0    00:00:00 autoware_defaul
   3835    3837 ttyS0    00:00:00 autoware_defaul
   3835    3838 ttyS0    00:00:00 autoware_defaul
   3835    3839 ttyS0    00:00:00 gc
   3835    3840 ttyS0    00:00:00 dq.builtins
   3835    3841 ttyS0    00:00:00 dq.user
   3835    3842 ttyS0    00:00:00 tev
   3835    3843 ttyS0    00:00:00 recv
   3835    3844 ttyS0    00:00:00 recvMC
   3835    3845 ttyS0    00:00:00 recvUC
   3835    3846 ttyS0    00:00:00 autoware_defaul

</span></code></pre></div></div>

<h2 id="hints">Hints</h2>

<ul>
  <li>If you run <code class="language-plaintext highlighter-rouge">colcon build</code> on a Raspberry Pi 4 with little memory, use <code class="language-plaintext highlighter-rouge">export MAKEFLAGS="-j 1"</code>
to inhibit parallelism. Otherwise, the system could hang due to memory swapping.</li>
</ul>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>
</div>
              <hr id="github-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="github-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#github-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#github-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#github-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="github-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="github-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="github-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/reference-system">reference-system</a> <small>repository</small></h3>
        <span class="label label-default">middleware</span> <span class="label label-default">cpp</span> <span class="label label-default">ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-realtime-reference-system
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-realtime-reference-system" role="menuitem" tabindex="-1" href="/r/reference-system/github-ros-realtime-reference-system" data="github-ros-realtime-reference-system">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-realtime-reference-system
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/reference-system">reference-system</a> <small>repository</small></h3>
        <span class="label label-default">middleware</span> <span class="label label-default">cpp</span> <span class="label label-default">ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-realtime-reference-system
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-realtime-reference-system" role="menuitem" tabindex="-1" href="/r/reference-system/github-ros-realtime-reference-system" data="github-ros-realtime-reference-system">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-realtime-reference-system
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/reference-system">reference-system</a> <small>repository</small></h3>
        <span class="label label-default">middleware</span> <span class="label label-default">cpp</span> <span class="label label-default">ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-realtime-reference-system
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-realtime-reference-system" role="menuitem" tabindex="-1" href="/r/reference-system/github-ros-realtime-reference-system" data="github-ros-realtime-reference-system">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-realtime-reference-system
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>iron</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/reference-system">reference-system</a> <small>repository</small></h3>
        <span class="label label-default">middleware</span> <span class="label label-default">cpp</span> <span class="label label-default">ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-realtime-reference-system
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-realtime-reference-system" role="menuitem" tabindex="-1" href="/r/reference-system/github-ros-realtime-reference-system" data="github-ros-realtime-reference-system">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-realtime-reference-system
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/ros-realtime/reference-system.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
