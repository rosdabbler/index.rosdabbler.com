<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/corolib/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">corolib</li>
        <!--<li class="active">corolib</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-default" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-default" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-default" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-default" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-primary" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class="disabled older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/corolib">corolib</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-johanvanslembrouck-corolib
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-johanvanslembrouck-corolib" role="menuitem" tabindex="-1" href="/r/corolib/github-johanvanslembrouck-corolib" data="github-johanvanslembrouck-corolib">
                    <span class="glyphicon glyphicon-star"></span>
                    github-johanvanslembrouck-corolib
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>humble</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/corolib">corolib</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-johanvanslembrouck-corolib
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-johanvanslembrouck-corolib" role="menuitem" tabindex="-1" href="/r/corolib/github-johanvanslembrouck-corolib" data="github-johanvanslembrouck-corolib">
                    <span class="glyphicon glyphicon-star"></span>
                    github-johanvanslembrouck-corolib
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jazzy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/corolib">corolib</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-johanvanslembrouck-corolib
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-johanvanslembrouck-corolib" role="menuitem" tabindex="-1" href="/r/corolib/github-johanvanslembrouck-corolib" data="github-johanvanslembrouck-corolib">
                    <span class="glyphicon glyphicon-star"></span>
                    github-johanvanslembrouck-corolib
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>kilted</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/corolib">corolib</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-johanvanslembrouck-corolib
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-johanvanslembrouck-corolib" role="menuitem" tabindex="-1" href="/r/corolib/github-johanvanslembrouck-corolib" data="github-johanvanslembrouck-corolib">
                    <span class="glyphicon glyphicon-star"></span>
                    github-johanvanslembrouck-corolib
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>rolling</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/corolib">corolib</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/action_tutorials_cpp_co">action_tutorials_cpp_co</a>
        
        <a class="label label-primary pkg-label" href="/p/demo_nodes_cpp_co">demo_nodes_cpp_co</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-johanvanslembrouck-corolib
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-johanvanslembrouck-corolib" role="menuitem" tabindex="-1" href="/r/corolib/github-johanvanslembrouck-corolib" data="github-johanvanslembrouck-corolib">
                    <span class="glyphicon glyphicon-star"></span>
                    github-johanvanslembrouck-corolib
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">A C++ coroutine library for writing asynchronous distributed applications using Boost ASIO, Qt, gRPC, ROS2, TAO, ..., as communication frameworks</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/johanvanslembrouck/corolib.git">https://github.com/johanvanslembrouck/corolib.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-04
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNKNOWN
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/corolib/#github-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/corolib/#github-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/corolib/#github-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/action_tutorials_cpp_co">action_tutorials_cpp_co</a></td>
                    <td>0.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/demo_nodes_cpp_co">demo_nodes_cpp_co</a></td>
                    <td>0.20.3</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="corolib">corolib</h1>

<p>corolib is a C++ coroutine library for writing asynchronous distributed applications.</p>

<h2 id="objectives">Objectives</h2>

<p>corolib has two main objectives:</p>

<ul>
  <li>
    <p>Demonstrate that it is possible to write asynchronous distributed applications in a synchronous style using various (open source) asynchronous communication frameworks.</p>

    <ul>
      <li>Asynchronous operations can be completed on the same thread they are started on (completion functions are called from an event loop) or on another thread.</li>
      <li>There is no need to make changes to these frameworks or to the corolib library, but sometimes an “adaptation layer” is useful. This layer contains functionality that would otherwise be replicated in the applications.</li>
    </ul>
  </li>
  <li>
    <p>Learning about and experimenting with coroutines</p>

    <ul>
      <li>Directory studies/corolab (short for “coroutine laboratory”) contains simple stand-alone programs that also include a coroutine definition; the reader just has to open a single file to have access to all source code.</li>
      <li>Directory examples/tutorial contains many examples using one or more corolib classes (async_task, async_operation, …), but without using any communication framework.</li>
      <li>Directory studies/why-coroutines explains why you should consider the use of coroutines, by comparing three programming styles: synchronous, asynchronous (with callbacks) and coroutines.</li>
      <li>Directory studies/transform explains how coroutines are transformed or lowered to non-coroutine C++ code.</li>
      <li>corolib contains a dedicated print function, taking a print level as first argument; this allows following the control flow of a coroutine program at various levels: application level, corolib level, user-specific level, …</li>
      <li>corolib contains tracking functions that allow verifying whether all coroutine return type objects, operation objects, promise objects and final awaiter objects are released.</li>
      <li>Class async_task can be tailored, allowing to experiment with the three await_suspend return types (void, bool, std::coroutine_typs&lt;&gt;), so that the user can compare the pros and cons of these variants.</li>
    </ul>
  </li>
</ul>

<h2 id="installation-and-building">Installation and building</h2>

<p>For its communication, corolib currently uses any of the following frameworks:</p>

<ul>
  <li>Boost ASIO library</li>
  <li>Qt (QTcpSocket, QTcpServer)</li>
  <li>gRPC</li>
  <li>libevent</li>
  <li>ROS2 (Humble)</li>
  <li>TAO (The ACE ORB)</li>
  <li>cppcoro (WIN32 API) (included in corolib)</li>
  <li>curl</li>
</ul>

<p>You do not have to install Boost, Qt, gRPC, libevent, ROS2, TAO or curl on your computer 
before building corolib from the top-level CMakeLists.txt file.
Without any of these libraries, you can still build and run many examples illustrating the use of corolib.</p>

<p>You can install any of the mentioned communication libraries one by one and then include them in the build by setting a flag in the top-level CMakeLists.txt file.
The installation of these libraries is described below.</p>

<h3 id="on-windows-10-or-11">On Windows 10 or 11</h3>

<h4 id="corolib-1">corolib</h4>

<p>Copy or clone corolib.git to your computer.</p>

<p>I originally developed corolib with Visual Studio 2019 and Qt Creator 4.12.0 on a Windows 10 laptop.
Now I am using Visual Studio 2022 and Qt Creator 10.0.1 on a Windows 11 laptop.</p>

<p>Building the Visual Studio projects makes use of the CMake support of Visual Studio:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>File -&gt; Open -&gt; CMake...
</code></pre></div></div>

<p>and select the CMakeLists.txt in the top-level folder.</p>

<p>Go to the examples/ subdirectories and start the executables.
(See README.md files in the corresponding source directories.)</p>

<h4 id="boost">Boost</h4>

<p>I originally used Boost 1.70 (now Boost 1.82), but many other versions will do.</p>

<p>Starting point: https://www.boost.org/</p>

<p>Download release 1.82 from https://boostorg.jfrog.io/artifactory/main/release/1.82.0/source/</p>

<p>I copied boost_1_82_0.zip to C:\local\boost and unzipped it into this directory.</p>

<p>In a Windows terminal (e.g. Command Prompt or PowerShell), go to C:\local\boost\boost_1_82_0</p>

<p>Follow the instructions in https://www.boost.org/doc/libs/1_82_0/more/getting_started/windows.html#simplified-build-from-source</p>

<p>Step 1: .\bootstrap.bat</p>

<p>This will generate b2.exe</p>

<p>Step 2: .\b2.exe</p>

<p>b2.exe generates the libraries we will need. Its execution takes a while.</p>

<p>The root directory for the include files is C:/local/boost/boost_1_82_0.</p>

<p>The root directory for the libraries is C:/local/boost/boost_1_82_0/stage/lib.</p>

<p>In the top-level CMakeLists.txt, adapt BOOST_ROOT to your own installation of the Boost library:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>set(BOOST_ROOT C:/local/boost/boost_1_82_0/)
</code></pre></div></div>

<p>After installing Boost ASIO, set the BOOST_INSTALLED flag to TRUE in the top-level CMakelists.txt file
if you want to build the Boost eaamples in examples/boost and examples/corolab.</p>

<h4 id="qt">Qt</h4>

<p>Starting points: https://www.qt.io/download, https://www.qt.io/download-open-source</p>

<p>Download the Qt Online Installer for your operating system (macOS, Windows, Linux) 
(e.g., for Windows: qt-unified-windows-x64-4.5.2-online.exe).</p>

<p>Run the installer. I installed Qt in C:\Qt.</p>

<p>After installing Qt5, set the QT5_INSTALLED flag to TRUE in the top-level CMakelists.txt file
if you want to build the Qt5 eaamples in examples/qt5.</p>

<p>You can build the Qt examples from the top-level CMakeLists.txt file.
In addition, you can also build them from the qt5.pro file in the top-level directory.</p>

<h4 id="grpc">gRPC</h4>

<p>Starting points: https://github.com/grpc/grpc, https://github.com/grpc/grpc/tree/master/src/cpp</p>

<p>Building gRPC using CMake with FetchContent, see https://github.com/grpc/grpc/tree/master/src/cpp#fetchcontent, did not work on my computer.</p>

<p>Rather, I used the instructions under https://github.com/grpc/grpc/tree/master/src/cpp#install-using-vcpkg-package</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/Microsoft/vcpkg.git
cd vcpkg
</code></pre></div></div>

<p>I cloned vcpkg.git into C:\local, giving C:\local\vcpkg</p>

<p>Note: this of course requires the installation of Git if this is not yet the case, see https://gitforwindows.org/</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./bootstrap-vcpkg.bat

./vcpkg install grpc
</code></pre></div></div>

<p>The execution of this last command may take 0.5 hour to 1.5 hours or even more, depending on your computer.</p>

<p>Finally, I added the following folders to my PATH:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:\local\vcpkg\installed\x64-windows\tools\protobuf
C:\local\vcpkg\installed\x64-windows\tools\grpc
</code></pre></div></div>

<p>After installing gRPC, set the GRPC_INSTALLED flag to TRUE in the top-level CMakelists.txt file
if you want to build the gRPC eaamples in examples/grpc.</p>

<h4 id="ros-2">ROS 2</h4>

<p>I did not manage to install ROS 2 on Windows 11. I tried to follow the instructions at https://docs.ros.org/en/humble/Installation/Windows-Install-Binary.html. According to https://docs.ros.org/en/humble/Installation/Windows-Install-Binary.html#system-requirements, only Windows 10 is supported.</p>

<p>See below for an installation on Ubuntu 22.04 LTS.</p>

<h4 id="tao">TAO</h4>

<p>Starting point: https://download.dre.vanderbilt.edu/</p>

<p>Download the file ACE+TAO-7.1.1.zip and place it in a directory (e.g.) C:\local. 
This is the directory that already contains boost and vcpkg, see above.</p>

<p>Unzip the file. This will produce a directory ACE_wrappers.
Consequently, the full path is C:\local\ACE_wrappers.
I will refer to this directory as …\ACE_wrappers from now on.</p>

<p>Open the file …\ACE_wrappers\ACE-INSTALL.html in a web browser and navigate to the section 
“Building and Installing ACE on Windows” and, in case of the use of Visual Studio, to 
“Building and Installing ACE on Windows with Microsoft Visual Studio”.</p>

<p>Follow the instructions in that section. In short:</p>

<p>In directory …\ACE_wrappers\ace, create a file called config.h and enter the following line in this file:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include "ace/config-win32.h"
</code></pre></div></div>

<p>Open the file ..\ACE_wrappers\ACE_vs2019.sln with Visual Studio 2019 or 2022 (or ACE_vs2017.sln with Visual Studio 2017).</p>

<p>Visual Studio 2022 reports the use of an earlier version of the Visual Studio platform toolset 
and proposes to upgrade the projects to target the latest Microsoft toolset. I upgraded to the latest toolset.</p>

<p>Build the solution. This builds ACE (The ADAPTIVE Communication Environment). We still have to build TAO (The ACE ORB).</p>

<p>Open the file …\ACE_wrappers\TAO\TAO-INSTALL.html in a web browser and follow the instructions in section 
“On Windows NT and Windows 2000 and Windows XP”. In short:</p>

<p>Open the file ..\ACE_wrappers\TAO\TAO_vs2019.sln with Visual Studio and build the solution.</p>

<p>Edit the Environment Variables and add the following directories to the Path variable:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:\local\ACE_wrappers\lib
C:\local\ACE_wrappers\bin
C:\Program Files\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\&lt;VERSION&gt;\bin\Hostx64\x64
</code></pre></div></div>

<p>The VERSION changes with every upgrade of Visual Studio (2022).</p>

<p>The last line is needed if you want to run the TAO IDL compiler (tao_idl in C:\local\ACE_wrappers\bin) from the command line.
If the last line is not present, running tao_idl will fail with the message that CL.exe is not found.</p>

<p>After installing TAO, set the TAO_INSTALLED flag to TRUE in the top-level CMakelists.txt file
if you want to build the TAO eaamples in examples/tao.</p>

<h4 id="libevent">libevent</h4>

<p>The build instructions can be found here: https://github.com/libevent/libevent/blob/master/Documentation/Building.md#building-on-windows</p>

<p>Clone or download the source code for libevent from https://github.com/libevent/libevent.
I placed libevent in folder C:\local, leading to C:\local\libevent.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd C:\local\libevent
md build
cd build
cmake -G "Visual Studio 17" ..
cmake --build . --config Release
</code></pre></div></div>

<p>Visual Studio 17 corresponds to Visual Studio 2022.</p>

<p>Edit the Environment Variables and add the following directory to the Path variable:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:\local\libevent\build\bin\Release
</code></pre></div></div>

<p>After installing libevent, set the LIBEVENT_INSTALLED flag to TRUE in the top-level CMakelists.txt file
if you want to build the libevent eaamples in examples/libevent.</p>

<h4 id="curl">curl</h4>

<p>Download the source code of the latest release of curl from https://curl.se/download.html.
Early September 2024, I downloaded curl-8.9.1.zip.</p>

<p>I placed curl-8.9.1.zip in folder C:\local and unzipped it, leading to C:\local\curl-8.9.1.</p>

<p>Build curl as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd C:\local\curl-8.9.1
md build
cd build
cmake -G "Visual Studio 17" ..
cmake --build . --config Release
</code></pre></div></div>

<p>Visual Studio 17 corresponds to Visual Studio 2022.</p>

<p>Edit the Environment Variables and add the following directory to the Path variable:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:\local\curl-8.9.1\build\bin\Release
</code></pre></div></div>

<p>After installing curl, set the CURL_INSTALLED flag to TRUE in the top-level CMakelists.txt file 
if you want to build the curl examples in examples/curl.</p>

<h3 id="on-ubuntu-2204-lts-or-ubuntu-2404-lts">On Ubuntu 22.04 LTS or Ubuntu 24.04 LTS</h3>

<p>I tested corolib originally on an Ubuntu MATE 22.04 installation in VirtualBox. 
The g++ version was 11.2.0.</p>

<p>Currently, I am using Ubuntu 22.04 LTS and Ubuntu 24.04 LTS in WSL (Windows Subsystem for Linux) on a Windows 11 laptop.
The current g++ version is 11.4.0 on Ubuntu 22.04 LTS and 13.3.0 on Ubuntu 24.04 LTS.</p>

<p>The g++ version should be &gt;= 10 to have coroutine support.</p>

<h4 id="install-ubuntu-on-wsl-on-windows-11">Install Ubuntu on WSL on Windows 11</h4>

<p>Open a Windows Terminal or PowerShell window. The Terminal opens with a PowerShell tab.</p>

<p>To install Ubuntu 24.04 LTS, enter on the command line:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wsl --install -d Ubuntu-24.04
</code></pre></div></div>

<p>See https://documentation.ubuntu.com/wsl/en/latest/guides/install-ubuntu-wsl2/ 
and https://learn.microsoft.com/en-us/windows/wsl/install for more information.</p>

<p>The installation script asks for a Unix username and a password.</p>

<p>After installation, open a new Terminal window.
In the drop-down menu, you will find an entry “Ubuntu 24.04.1 LTS” (the minor version may change over time).
Select this menu item. It will open a tab running Ubuntu.</p>

<p>To verify the installed Ubuntu version, type on the command line:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lsb_release -a
</code></pre></div></div>

<p>The first thing to do, is to update and upgrade the Ubuntu installation:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt update
sudo apt upgrade
</code></pre></div></div>

<p>The first command will ask for the password you entered during the installation.</p>

<p>There are a few things to install to be able to build corolib. These are described next.</p>

<h4 id="gcc">gcc</h4>

<p>gcc is not installed:</p>

<p>prompt$ gcc
Command ‘gcc’ not found, but can be installed with:
sudo apt install gcc
prompt$</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install gcc
</code></pre></div></div>

<h4 id="cmake">CMake</h4>

<p>cmake is not installed:</p>

<p>prompt$ cmake
Command ‘cmake’ not found, but can be installed with:
sudo snap install cmake  # version 3.31.4, or
sudo apt  install cmake  # version 3.27.8-1build1
See ‘snap info cmake’ for additional versions.
prompt$</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install cmake
</code></pre></div></div>

<p>or, using -y to provide an automatic yes to prompts:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install -y cmake
</code></pre></div></div>

<h4 id="build-essential">build-essential</h4>

<p>Also install build-essential (otherwise you will have to do it later anyway):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install build-essential
</code></pre></div></div>

<h4 id="corolib-2">corolib</h4>

<p>Copy or clone corolib.git to your computer.</p>

<p>I propose to build corolib as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd &lt;path&gt;/corolib
mkdir build
cd build
cmake ../
make -j 4
</code></pre></div></div>

<p>or</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd &lt;path&gt;/corolib
cd ..
mkdir corolib-build
cd corolib-build
cmake ../corolib
make -j 4
</code></pre></div></div>

<p>This second alternative keeps your build directory completly out of the source code.
When using Visual Studio to build corolib,
it occurred that Visual Studio got confused by the content of the build directory.</p>

<p>Go to the examples/tutorial subdirectory and start the executables. 
(See README.md files in the corresponding source directories.)</p>

<h4 id="boost-1">Boost</h4>

<p>Install Boost:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get update
sudo apt-get -y install libboost-dev
</code></pre></div></div>

<p>The Boost include files are in</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/usr/include/boost
</code></pre></div></div>

<p>On my computer, the Boost libraries (version 1.74.0) are located in</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/usr/lib/x86_64-linux-gnu/
</code></pre></div></div>

<p>After installing Boost ASIO, set the BOOST_INSTALLED flag to TRUE in the top-level CMakelists.txt file
if you want to build the Boost eaamples in examples/boost and examples/corolab.</p>

<h4 id="qt-1">Qt</h4>

<p>To install and configure qtcreator on Ubuntu 22.04, follow the instructions described in
https://askubuntu.com/questions/1404263/how-do-you-install-qt-on-ubuntu22-04:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install -y qtcreator qtbase5-dev qt5-qmake cmake
</code></pre></div></div>

<p>After installing Qt5, set the QT5_INSTALLED flag to TRUE in the top-level CMakelists.txt file
if you want to build the Qt5 eaamples in examples/qt5.</p>

<p>You can build the Qt examples from the top-level CMakeLists.txt file.
In addition, you can also build them from the qt5.pro file in the top-level directory.</p>

<h4 id="grpc-1">gRPC</h4>

<p>Starting points: https://github.com/grpc/grpc, https://github.com/grpc/grpc/tree/master/src/cpp</p>

<p>Building gRPC using CMake with FetchContent, see https://github.com/grpc/grpc/tree/master/src/cpp#fetchcontent, did not work on my computer.</p>

<p>Rather, I used the instructions under https://grpc.io/docs/languages/cpp/quickstart/#install-grpc</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export MY_INSTALL_DIR=$HOME/.local
mkdir -p $MY_INSTALL_DIR
export PATH="$MY_INSTALL_DIR/bin:$PATH"

sudo apt install -y build-essential autoconf libtool pkg-config
</code></pre></div></div>

<p>Note: I used MY_INSTALL_DIR=$HOME/grpcbin as installation directory.</p>

<p>Clone the grpc repo and its submodules to a local directory:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone --recurse-submodules -b v1.55.0 --depth 1 --shallow-submodules https://github.com/grpc/grpc

cd grpc
mkdir -p cmake/build
pushd cmake/build
cmake -DgRPC_INSTALL=ON \
  -DgRPC_BUILD_TESTS=OFF \
  -DCMAKE_INSTALL_PREFIX=$MY_INSTALL_DIR \
  ../..
make -j 4
make install
popd
</code></pre></div></div>

<p>Note: I cloned grpc to $HOME/grpcsrc.</p>

<p>Add the following lines to .bashrc for future use:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export PATH=$HOME/.local/bin:$PATH
</code></pre></div></div>

<p>or, in my setup:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export PATH=$HOME/grpcbin/bin:$PATH
</code></pre></div></div>

<p>After installing gRPC, set the GRPC_INSTALLED flag to TRUE in the top-level CMakelists.txt file
if you want to build the gRPC eaamples in examples/grpc.</p>

<h4 id="ros-2-1">ROS 2</h4>

<p>Please follow the instructions at https://docs.ros.org/en/humble/Installation/Ubuntu-Install-Debians.html</p>

<h4 id="tao-1">TAO</h4>

<p>Starting point: https://download.dre.vanderbilt.edu/</p>

<p>Download the file ACE+TAO-7.1.1.tar.gz and place it in (e.g.) your home directory, $HOME.
Unzip the file:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tar xvf ACE+TAO-7.1.1.tar.gz
</code></pre></div></div>

<p>This will produce a directory ACE_wrappers.
Consequently, the full path is $HOME\ACE_wrappers.</p>

<p>Open the file $HOME\ACE_wrappers\ACE-INSTALL.html in a web browser and navigate to the section 
“Building and Installing ACE on UNIX”.</p>

<p>Follow the instructions in that section. In short:</p>

<p>Define the ACE_ROOT environment variable:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export ACE_ROOT=$HOME/ACE_wrappers 
</code></pre></div></div>

<p>Create a configuration file, $ACE_ROOT/ace/config.h, 
that includes the appropriate platform/compiler-specific header configurations from the ACE source directory:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include "ace/config-linux.h"
</code></pre></div></div>

<p>Create a build configuration file, $ACE_ROOT/include/makeinclude/platform_macros.GNU,
that contains the appropriate platform/compiler-specific Makefile configurations, e.g.,</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>include $(ACE_ROOT)/include/makeinclude/platform_linux.GNU
</code></pre></div></div>

<p>Set LD_LIBRARY_PATH to the directory where the binary version of the ACE library will be built into:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export LD_LIBRARY_PATH=$ACE_ROOT/lib:$LD_LIBRARY_PATH
</code></pre></div></div>

<p>In a terminal window, navigate to $ACE_ROOT and build ACE:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd $ACE_ROOT
make
</code></pre></div></div>

<p>Building ACE in my WSL environment took about 10 minutes.</p>

<p>Open the file …\ACE_wrappers\TAO\TAO-INSTALL.html in a web browser and follow the instructions in section 
“On UNIX platforms”. In short:</p>

<p>Build GPERF as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd $ACE_ROOT/apps/gperf/src
make
</code></pre></div></div>

<p>Set the TAO_ROOT environment variable to $ACE_ROOT/TAO:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export TAO_ROOT=$ACE_ROOT/TAO
</code></pre></div></div>

<p>Build TAO:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd $TAO_ROOT
make
</code></pre></div></div>

<p>Building TAO takes a long time (about 2 hours in my WSL environment). I did not use e.g. make -j 4.</p>

<p>Add the following lines to .bashrc:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export ACE_ROOT=$HOME/ACE_wrappers
export TAO_ROOT=$ACE_ROOT/TAO
export PATH=$ACE_ROOT/bin:$PATH
export LD_LIBRARY_PATH=$ACE_ROOT/lib:$LD_LIBRARY_PATH
</code></pre></div></div>

<p>After installing TAO, set the TAO_INSTALLED flag to TRUE in the top-level CMakelists.txt file
if you want to build the TAO eaamples in examples/tao.</p>

<h4 id="libevent-1">libevent</h4>

<p>The installation instructions can be found here: https://github.com/libevent/libevent/blob/master/Documentation/Building.md#linux-deb-like-ubuntudebian</p>

<p>libevent was already installed on my Ubuntu installation, so I did not have to do anything.</p>

<p>Set the LIBEVENT_INSTALLED flag to TRUE in the top-level CMakelists.txt file
if you want to build the libevent eaamples in examples/libevent.</p>

<h4 id="curl-1">curl</h4>

<p>curl is by default installed on Ubuntu (and other Linux) distributions, so I did not have to do anything.</p>

<p>Set the CURL_INSTALLED flag to TRUE in the top-level CMakelists.txt file 
if you want to build the curl eaamples in examples/curl.</p>

<h2 id="organization-of-corolib">Organization of corolib</h2>

<p>The GitHub repository contains the library itself and several examples.</p>

<p>The README.md file in include/corolib gives more information on each of the classes of corolib.
Folder lib contains the source (.cpp) files for the header files (.h) in include/corolib.</p>

<p>The examples folder contains a README.md file with more information on the examples.</p>

<h2 id="why-coroutines">Why coroutines?</h2>

<p>Reason 1: Coroutines allow writing (distributed) applications using a natural synchronous style,
but with the efficiency benefits of asynchronous execution.</p>

<p>An application running on one processor can invoke an operation in an application on the same or another processor 
in a synchronous or asynchronous way.</p>

<ul>
  <li>
    <p>Using a synchronous operation, the application will block until the remote application has replied.</p>

    <p>In the meantime, the application cannot respond to new requests unless new requests are processed on a separate thread or the operation 
itself runs on a separate thread.</p>
  </li>
  <li>
    <p>Using an asynchronous operation, the application can start the operation by sending a request to the remote application, 
proceed with other tasks that do not depend on the response and then await the response 
either using polling or using a callback function that is called from a local or global event loop.</p>

    <p>The reader is referred to reading/CORBA-AMI.md for more information on this approach.</p>
  </li>
  <li>
    <p>Using an asynchronous operation in combination with coroutines, the callback function can be hidden in the library (corolib in this case) 
and the response will be returned by the co_await statement.
Usually this co_await statement will be placed in the coroutine in which the asynchronous operation was invoked.</p>

    <p>The callback function will pass the result of the remote operation invocation to the application and resume it.
The application will then continue its flow and invoke new asynchronous operations.
This is a more natural place than handling the response in the callback function from which new operations will be invoked.</p>

    <p>The reader is also referred to examples/why-coroutines for examples demonstrating the three approaches in several stand-alone applications.</p>
  </li>
</ul>

<p>Reason 2: Coroutines can be used as an alternative for threads.</p>

<p>Two or more coroutines can be started one after the other.
Each of these coroutines can implement a potentially infinite loop, invoking asynchronous requests
and then processing their response in the same code block inside the loop.
These coroutines may thus never co_return.
When suspended for the first time,
they pass control to the coroutine or function that started them and that will eventually pass control to an event loop.
Yet everything runs on the same thread, with coroutines proceding in an interleaved and colloraborative way.</p>

<h2 id="coding-style">Coding style</h2>

<p>I will use the following coding style in almost all example applications:</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="c1">// Start an asynchronous operation on a (remote) object.</span>
	<span class="n">async_operation</span><span class="o">&lt;</span><span class="n">aType</span><span class="o">&gt;</span> <span class="n">retObj</span> <span class="o">=</span> <span class="n">proxy_to_object</span><span class="p">.</span><span class="n">start_operation</span><span class="p">(</span><span class="n">in1</span><span class="p">,</span> <span class="n">in2</span><span class="p">);</span>
	<span class="c1">// Do some other things that do not rely on the result of the operation.</span>
	<span class="c1">// Finally co_await the result if nothing else can be done in this coroutine.</span>
	<span class="n">aType</span> <span class="n">returnVal</span> <span class="o">=</span> <span class="k">co_await</span> <span class="n">retObj</span><span class="p">;</span> 

</code></pre></div></div>

<p>instead of using only a single line:</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="n">aType</span> <span class="n">returnVal</span> <span class="o">=</span> <span class="k">co_await</span> <span class="n">proxy_to_object</span><span class="p">.</span><span class="n">start_operation</span><span class="p">(</span><span class="n">in1</span><span class="p">,</span> <span class="n">in2</span><span class="p">);</span>

</code></pre></div></div>

<p>There are several reasons:</p>

<ol>
  <li>
    <p>Because we are dealing with distributed systems,
the first statement starts an operation on a remote object.
While the remote object is processing the request and preparing the reply,
the application can proceed with actions that do not rely on the result.</p>

    <p>This style can be further exploited by placing the first statement a bit higher in the code, 
above all statements that do not depend on the result, but at a place where all inputs are available.
Several operations can be started one after the other and the results can then be processed afterwards.</p>
  </li>
  <li>
    <p>When learning coroutines, the first approach shows more clearly what is going on.
It shows the return type of the asynchronous operation, making it easier to find and examine the implementation.</p>
  </li>
  <li>
    <p>An explicit declaration makes it easier to await the result of several operations using wait_all or wait_any.</p>
  </li>
  <li>
    <p>corolib allows reusing the return object (retObj in this case)
for several asynchronous operation invocations that return an object of the same type.
Therefore the object has to be declared explicitly.</p>
  </li>
  <li>
    <p>corolib allows declaring an async_operation<atype> object up-front and starting the asynchronous operation afterwards.
In between the declaration and the start (or after the start), one or more coroutines can co_wait on the async_operation<atype> object.
All coroutines that co_await-ed the async_operation<atype> object will be resumed when the asynchronous operation completes.</atype></atype></atype></p>

    <p>The reader is referred to examples\various-boost\timer03.cpp and examples\various-qt\timer03.cpp for examples.</p>
  </li>
  <li>
    <p>The proposed style is closer to the polling style used in CORBA AMI.</p>

    <p>The reader is referred again to reading/CORBA-AMI.md for more information on this approach.</p>
  </li>
</ol>

<h2 id="comparison-with-other-libraries">Comparison with other libraries</h2>

<p>corolib is a rather small library, because it completely separates the coroutine part from the communication frameworks.
Some code in corolib has been inspired by  https://github.com/lewissbaker/cppcoro</p>

<p>The approach in corolib is different from cppcoro in the following ways:</p>
<ul>
  <li>corolib is meant as a library to learn about coroutines in C++, not as a means for evaluating the coroutines TS.
That is why there are many print statements in the code: running the programs with priority level 2 reveals the flow of control when using coroutines.
The output also shows that all coroutines run on the same thread but that several coroutines run in an interleaved way.</li>
  <li>I wanted to make a strict separation between the coroutine part and the asynchronous communication library.
This explains the use of Boost ASIO and Qt: the code in these libraries is not “aware” that is used by coroutines.</li>
</ul>

<h2 id="presentations">Presentations</h2>

<ul>
  <li>Belgian C++ Users Group, 29 January 2020: Slides + code samples: http://becpp.org/blog/wp-content/uploads/2020/02/Johan-Vanslembrouck-Coroutines-in-C20.zip
An updated version of the code samples can be found in examples/corolab.</li>
  <li>Meeting C++ Online, 7 September 2022: Slides: https://meetingcpp.com/mcpp/slides/2022/Corolib-DistributedProgrammingWithC++Coroutines1807.pdf</li>
</ul>

<h2 id="contact">Contact</h2>

<p>Johan Vanslembrouck (johan.vanslembrouck@gmail.com)</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/corolib">corolib</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-johanvanslembrouck-corolib
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-johanvanslembrouck-corolib" role="menuitem" tabindex="-1" href="/r/corolib/github-johanvanslembrouck-corolib" data="github-johanvanslembrouck-corolib">
                    <span class="glyphicon glyphicon-star"></span>
                    github-johanvanslembrouck-corolib
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/corolib">corolib</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-johanvanslembrouck-corolib
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-johanvanslembrouck-corolib" role="menuitem" tabindex="-1" href="/r/corolib/github-johanvanslembrouck-corolib" data="github-johanvanslembrouck-corolib">
                    <span class="glyphicon glyphicon-star"></span>
                    github-johanvanslembrouck-corolib
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/corolib">corolib</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-johanvanslembrouck-corolib
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-johanvanslembrouck-corolib" role="menuitem" tabindex="-1" href="/r/corolib/github-johanvanslembrouck-corolib" data="github-johanvanslembrouck-corolib">
                    <span class="glyphicon glyphicon-star"></span>
                    github-johanvanslembrouck-corolib
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>iron</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/corolib">corolib</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-johanvanslembrouck-corolib
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-johanvanslembrouck-corolib" role="menuitem" tabindex="-1" href="/r/corolib/github-johanvanslembrouck-corolib" data="github-johanvanslembrouck-corolib">
                    <span class="glyphicon glyphicon-star"></span>
                    github-johanvanslembrouck-corolib
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/johanvanslembrouck/corolib.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
