<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/raspimouse_ros2_examples/github-rt-net-raspimouse_ros2_examples/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">raspimouse_ros2_examples</li>
        <!--<li class="active">raspimouse_ros2_examples</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-primary" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-primary" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-default" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-default" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-default" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class="disabled older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/raspimouse_ros2_examples">raspimouse_ros2_examples</a> <small>repository</small></h3>
        <span class="label label-default">opencv</span> <span class="label label-default">raspberry-pi-mouse</span> <span class="label label-default">ros2</span> <span class="label label-default">joystick-control</span> <span class="label label-default">raspimouse-ros2</span> 
        
        <a class="label label-primary pkg-label" href="/p/raspimouse_ros2_examples">raspimouse_ros2_examples</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-rt-net-raspimouse_ros2_examples
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-rt-net-raspimouse_ros2_examples" role="menuitem" tabindex="-1" href="/r/raspimouse_ros2_examples/github-rt-net-raspimouse_ros2_examples" data="github-rt-net-raspimouse_ros2_examples">
                    <span class="glyphicon glyphicon-star"></span>
                    github-rt-net-raspimouse_ros2_examples
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS 2 examples for Raspberry Pi Mouse</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/rt-net/raspimouse_ros2_examples.git">https://github.com/rt-net/raspimouse_ros2_examples.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">humble-devel</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-08-28
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">opencv</span> <span class="label label-default">raspberry-pi-mouse</span> <span class="label label-default">ros2</span> <span class="label label-default">joystick-control</span> <span class="label label-default">raspimouse-ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/raspimouse_ros2_examples/#humble-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/raspimouse_ros2_examples/#humble-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/raspimouse_ros2_examples/#humble-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/raspimouse_ros2_examples">raspimouse_ros2_examples</a></td>
                    <td>2.2.1</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<table>
  <tbody>
    <tr>
      <td><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/humble-devel/README.en.md">English</a></td>
      <td><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/humble-devel/README.md">日本語</a></td>
    </tr>
  </tbody>
</table>

<h1 id="raspimouse_ros2_examples">raspimouse_ros2_examples</h1>

<p><a href="https://github.com/rt-net/raspimouse_ros2_examples/actions?query=workflow%3Aindustrial_ci+branch%3Amaster"><img src="https://github.com/rt-net/raspimouse_ros2_examples/workflows/industrial_ci/badge.svg?branch=master" alt="industrial_ci"></a></p>

<p>Raspberry Pi MouseのROS 2サンプルコード集です。</p>

<p>ROS1のサンプルコード集は<a href="https://github.com/rt-net/raspimouse_ros_examples/blob/master/README.md">こちら</a>。</p>

<p>Gazebo（シミュレータ）でも動作します。詳細は<a href="https://github.com/rt-net/raspimouse_sim/blob/ros2/README.md">こちら</a>。</p>

<p>&lt;img src=https://rt-net.github.io/images/raspberry-pi-mouse/raspberry_pi_mouse.JPG width=500 /&gt;</p>

<h2 id="supported-ros-2-distributions">Supported ROS 2 distributions</h2>

<ul>
  <li><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/foxy-devel">Foxy</a></li>
  <li>Humble (This branch)</li>
</ul>

<h2 id="requirements">Requirements</h2>

<ul>
  <li>Raspberry Pi Mouse
    <ul>
      <li>https://rt-net.jp/products/raspberrypimousev3/</li>
      <li>Linux OS
        <ul>
          <li>Ubuntu server 22.04</li>
          <li>https://ubuntu.com/download/raspberry-pi</li>
        </ul>
      </li>
      <li>Device Driver
        <ul>
          <li><a href="https://github.com/rt-net/RaspberryPiMouse">rt-net/RaspberryPiMouse</a></li>
        </ul>
      </li>
      <li>ROS
        <ul>
          <li><a href="https://docs.ros.org/en/humble/Installation/Ubuntu-Install-Debians.html">Humble Hawksbill</a></li>
        </ul>
      </li>
      <li>Raspberry Pi Mouse ROS 2 package
        <ul>
          <li>https://github.com/rt-net/raspimouse2</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Remote Computer (Optional)
    <ul>
      <li>ROS
        <ul>
          <li><a href="https://dcs.ros.org/en/humble/Installation/Ubuntu-Install-Debians.html">Humble Hawksbill</a></li>
        </ul>
      </li>
      <li>Raspberry Pi Mouse ROS 2 package
        <ul>
          <li>https://github.com/rt-net/raspimouse2</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="installation">Installation</h2>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd</span> ~/ros2_ws/src
<span class="c"># Clone package</span>
<span class="nv">$ </span>git clone <span class="nt">-b</span> <span class="nv">$ROS_DISTRO</span><span class="nt">-devel</span> https://github.com/rt-net/raspimouse_ros2_examples.git

<span class="c"># Install dependencies</span>
<span class="nv">$ </span>rosdep <span class="nb">install</span> <span class="nt">-r</span> <span class="nt">-y</span> <span class="nt">--from-paths</span> <span class="nb">.</span> <span class="nt">--ignore-src</span>

<span class="c"># Build &amp; Install</span>
<span class="nv">$ </span><span class="nb">cd</span> ~/ros2_ws
<span class="nv">$ </span>colcon build <span class="nt">--symlink-install</span>
<span class="nv">$ </span><span class="nb">source</span> ~/ros2_ws/install/setup.bash

</code></pre></div></div>

<h2 id="license">License</h2>

<p>このリポジトリはApache 2.0ライセンスの元、公開されています。 
ライセンスについては<a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/humble-devel/./LICENSE">LICENSE</a>を参照ください。</p>

<h2 id="how-to-use-examples">How To Use Examples</h2>

<ul>
  <li><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/humble-devel/#joystick_control">joystick_control</a></li>
  <li><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/humble-devel/#object_tracking">object_tracking</a></li>
  <li><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/humble-devel/#line_follower">line_follower</a></li>
  <li><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/humble-devel/#camera_line_follower">camera_line_follower</a></li>
  <li><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/humble-devel/#slam">SLAM</a></li>
  <li><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/humble-devel/#direction_controller">direction_controller</a></li>
</ul>

<hr>

<h3 id="joystick_control">joystick_control</h3>

<p>ジョイスティックコントローラでRaspberryPiMouseを動かすコード例です。</p>

<h4 id="requirements-1">Requirements</h4>

<ul>
  <li>Joystick Controller
    <ul>
      <li><a href="https://gaming.logicool.co.jp/ja-jp/products/gamepads/f710-wireless-gamepad.html#940-0001440">Logicool Wireless Gamepad F710</a></li>
      <li><a href="https://www.jp.playstation.com/ps3/peripheral/cechzc2j.html">SONY DUALSHOCK 3</a></li>
    </ul>
  </li>
</ul>

<h4 id="how-to-use">How to use</h4>

<p>次のコマンドでノードを起動します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Use F710</span>
<span class="nv">$ </span>ros2 launch raspimouse_ros2_examples teleop_joy.launch.py joydev:<span class="o">=</span><span class="s2">"/dev/input/js0"</span> joyconfig:<span class="o">=</span>f710 mouse:<span class="o">=</span><span class="nb">true</span>

<span class="c"># Use DUALSHOCK 3</span>
<span class="nv">$ </span>ros2 launch raspimouse_ros2_examples teleop_joy.launch.py joydev:<span class="o">=</span><span class="s2">"/dev/input/js0"</span> joyconfig:<span class="o">=</span>dualshock3 mouse:<span class="o">=</span><span class="nb">true</span>

<span class="c"># Control from remote computer</span>
<span class="c">## on RaspberryPiMouse</span>
<span class="nv">$ </span>ros2 run raspimouse raspimouse
<span class="c">## on remote computer</span>
<span class="nv">$ </span>ros2 launch raspimouse_ros2_examples teleop_joy.launch.py mouse:<span class="o">=</span><span class="nb">false</span>

</code></pre></div></div>

<p>デフォルトのキー割り当てはこちらです。</p>

<p>Logicool Wireless Gamepad F710を使う場合はモード切替スイッチを <strong>D</strong> (DirectInput Mode)に設定します。</p>

<p><img src="https://rt-net.github.io/images/raspberry-pi-mouse/joystick_control_keyconfig.png" alt=""></p>

<h4 id="configure">Configure</h4>

<p><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/humble-devel/./config/joy_f710.yml">./config/joy_f710.yml</a>、<a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/humble-devel/./config/joy_dualshock3.yml">./config/joy_dualshock3.yml</a>
のキー番号を編集することで、キー割り当てを変更できます。</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">button_shutdown_1       </span><span class="pi">:</span> <span class="m">8</span>
<span class="na">button_shutdown_2       </span><span class="pi">:</span> <span class="m">9</span>

<span class="na">button_motor_off        </span><span class="pi">:</span> <span class="m">8</span>
<span class="na">button_motor_on         </span><span class="pi">:</span> <span class="m">9</span>

<span class="na">button_cmd_enable       </span><span class="pi">:</span> <span class="m">4</span>

</code></pre></div></div>

<h4 id="videos">Videos</h4>

<p><a href="https://youtu.be/GswxdB8Ia0Y"><img src="http://img.youtube.com/vi/GswxdB8Ia0Y/sddefault.jpg" alt="joystick_control"></a></p>

<p><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/humble-devel/#how-to-use-examples">back to example list</a></p>

<hr>

<h3 id="object_tracking">object_tracking</h3>

<p>&lt;img src=https://rt-net.github.io/images/raspberry-pi-mouse/object_tracking.JPG width=500 /&gt;</p>

<p>色情報をもとにオレンジ色のボールの追跡を行うコード例です。
USB接続のWebカメラとOpenCVを使ってボール追跡をします。</p>

<h4 id="requirements-2">Requirements</h4>

<ul>
  <li>Webカメラ
    <ul>
      <li><a href="https://www.logicool.co.jp/ja-jp/product/hd-webcam-c310n">Logicool HD WEBCAM C310N</a></li>
    </ul>
  </li>
  <li>カメラマウント
    <ul>
      <li><a href="https://www.rt-shop.jp/index.php?main_page=product_info&amp;cPath=1299_1395&amp;products_id=3584">Raspberry Pi Mouse オプションキット No.4 [Webカメラマウント]</a></li>
    </ul>
  </li>
  <li>ボール（Optional）
    <ul>
      <li><a href="https://www.rt-shop.jp/index.php?main_page=product_info&amp;cPath=1299_1307&amp;products_id=3701">ソフトボール（オレンジ）</a></li>
    </ul>
  </li>
  <li>Software
    <ul>
      <li>OpenCV</li>
      <li>v4l-utils</li>
    </ul>
  </li>
</ul>

<h4 id="installation-1">Installation</h4>

<p>Raspberry Pi Mouseにカメラマウントを取り付け、WebカメラをRaspberry Piに接続します。</p>

<h4 id="how-to-use-1">How to use</h4>

<p>次のスクリプトを実行して、カメラの自動調節機能（自動露光，オートホワイトバランス等）を切ります。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd</span> ~/ros2_ws/src/raspimouse_ros2_examples/config
<span class="nv">$ </span>./configure_camera.bash

</code></pre></div></div>

<p>次のコマンドでノードを起動します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ros2 launch raspimouse_ros2_examples object_tracking.launch.py video_device:<span class="o">=</span>/dev/video0

</code></pre></div></div>

<p>カメラ画像は<code class="language-plaintext highlighter-rouge">camera/color/image_raw</code>、物体検出画像は<code class="language-plaintext highlighter-rouge">result_image</code>というトピックとして発行されます。
これらの画像は<a href="https://index.ros.org/r/rviz/">RViz</a>
や<a href="https://index.ros.org/p/rqt_image_view/">rqt_image_view</a>
で表示できます。</p>

<p><strong>画像を表示するとノードの動作が不安定になり、cmd_velや画像トピックが発行されないことがあります。</strong></p>

<p>&lt;img src=https://rt-net.github.io/images/raspberry-pi-mouse/object_tracking_ros2.png width=500 /&gt;</p>

<h4 id="configure-1">Configure</h4>

<p>追跡対象の色を変更するには
<a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/humble-devel/./src/object_tracking_component.cpp"><code class="language-plaintext highlighter-rouge">./src/object_tracking_component.cpp</code></a>
を編集します。</p>

<p>物体検出精度が悪い時にはカメラの露光や関数内のパラメータを調整して下さい。</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="n">Tracker</span><span class="o">::</span><span class="n">tracking</span><span class="p">(</span><span class="k">const</span> <span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="o">&amp;</span> <span class="n">input_frame</span><span class="p">,</span> <span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="o">&amp;</span> <span class="n">result_frame</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">cv</span><span class="o">::</span><span class="n">inRange</span><span class="p">(</span><span class="n">hsv</span><span class="p">,</span> <span class="n">cv</span><span class="o">::</span><span class="n">Scalar</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="n">cv</span><span class="o">::</span><span class="n">Scalar</span><span class="p">(</span><span class="mi">29</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="n">extracted_bin</span><span class="p">);</span>  <span class="c1">// Orange</span>
  <span class="c1">// cv::inRange(hsv, cv::Scalar(60, 100, 100), cv::Scalar(80, 255, 255), extracted_bin);  // Green</span>
  <span class="c1">// cv::inRange(hsv, cv::Scalar(100, 100, 100), cv::Scalar(120, 255, 255), extracted_bin);  // Blue</span>

</code></pre></div></div>

<h4 id="videos-1">Videos</h4>

<p><a href="https://youtu.be/8lgmSTScP98"><img src="http://img.youtube.com/vi/8lgmSTScP98/sddefault.jpg" alt="object_tracking"></a></p>

<p><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/humble-devel/#how-to-use-examples">back to example list</a></p>

<hr>

<h3 id="line_follower">line_follower</h3>

<p>&lt;img src=https://rt-net.github.io/images/raspberry-pi-mouse/mouse_with_line_trace_sensor.JPG width=500 /&gt;</p>

<p>ライントレースのコード例です。</p>

<h4 id="requirements-3">Requirements</h4>

<ul>
  <li>ライントレースセンサ
    <ul>
      <li><a href="https://www.rt-shop.jp/index.php?main_page=product_info&amp;cPath=1299_1395&amp;products_id=3591">Raspberry Pi Mouse オプションキット No.3 [ライントレース]</a></li>
    </ul>
  </li>
  <li>フィールドとライン (Optional)</li>
</ul>

<h4 id="installation-2">Installation</h4>

<p>Raspberry Pi Mouseにライントレースセンサを取り付けます。</p>

<h4 id="how-to-use-2">How to use</h4>

<p>次のコマンドでノードを起動します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ros2 launch raspimouse_ros2_examples line_follower.launch.py

</code></pre></div></div>

<p>Raspberry Pi Mouseをフィールドに置き、SW2を押してフィールド上のセンサ値をサンプリングします。</p>

<p>&lt;img src=https://rt-net.github.io/images/raspberry-pi-mouse/field_calibration.JPG width=500 /&gt;</p>

<p>次に、センサとラインが重なるようにRaspberry Pi Mouseを置き、SW1を押してライン上のセンサ値をサンプリングします。</p>

<p>&lt;img src=https://rt-net.github.io/images/raspberry-pi-mouse/line_calibration.JPG width=500 /&gt;</p>

<p>最後に、ライン上にRaspberry Pi Mouseを置き、SW0を押してライントレースを開始します。</p>

<p>&lt;img src=https://rt-net.github.io/images/raspberry-pi-mouse/start_trace.JPG width=500 /&gt;</p>

<p>もう一度SW0を押すとライントレースを停止します。</p>

<h4 id="configure-2">Configure</h4>

<p>走行速度を変更するには<a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/humble-devel/./src/line_follower_component.cpp"><code class="language-plaintext highlighter-rouge">./src/line_follower_component.cpp</code></a>を編集します。</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="n">Follower</span><span class="o">::</span><span class="n">publish_cmdvel_for_line_following</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">const</span> <span class="kt">double</span> <span class="n">VEL_LINEAR_X</span> <span class="o">=</span> <span class="mf">0.08</span><span class="p">;</span>  <span class="c1">// m/s</span>
  <span class="k">const</span> <span class="kt">double</span> <span class="n">VEL_ANGULAR_Z</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">;</span>  <span class="c1">// rad/s</span>
  <span class="k">const</span> <span class="kt">double</span> <span class="n">LOW_VEL_ANGULAR_Z</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>  <span class="c1">// rad/s</span>

</code></pre></div></div>

<h4 id="videos-2">Videos</h4>

<p><a href="https://youtu.be/oPm0sW2V_tY"><img src="http://img.youtube.com/vi/oPm0sW2V_tY/sddefault.jpg" alt="line_follower"></a></p>

<p><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/humble-devel/#how-to-use-examples">back to example list</a></p>

<hr>

<h3 id="camera_line_follower">camera_line_follower</h3>

<p>&lt;img src=https://rt-net.github.io/images/raspberry-pi-mouse/mouse_camera_line_trace_2.png width=500 /&gt;</p>

<p>RGBカメラによるライントレースのコード例です。</p>

<h4 id="requirements-4">Requirements</h4>

<ul>
  <li>Webカメラ
    <ul>
      <li><a href="https://www.logicool.co.jp/ja-jp/product/hd-webcam-c310n">Logicool HD WEBCAM C310N</a></li>
    </ul>
  </li>
  <li>カメラマウント
    <ul>
      <li><a href="https://www.rt-shop.jp/index.php?main_page=product_info&amp;cPath=1299_1395&amp;products_id=3584">Raspberry Pi Mouse オプションキット No.4 [Webカメラマウント]</a></li>
    </ul>
  </li>
</ul>

<h4 id="installation-3">Installation</h4>

<p>Raspberry Pi Mouseにカメラマウントを取り付け、WebカメラをRaspberry Piに接続します。</p>

<h4 id="how-to-use-3">How to use</h4>

<p>次のコマンドでノードを起動します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ros2 launch raspimouse_ros2_examples camera_line_follower.launch.py video_device:<span class="o">=</span>/dev/video0

</code></pre></div></div>

<p>ライン上にRaspberry Pi Mouseを置き、SW2を押してライントレースを開始します。
停止させる場合はSW0を押します。</p>

<p>カメラ画像は<code class="language-plaintext highlighter-rouge">camera/color/image_raw</code>、物体検出画像は<code class="language-plaintext highlighter-rouge">result_image</code>というトピックとして発行されます。
これらの画像は<a href="https://index.ros.org/r/rviz/">RViz</a>
や<a href="https://index.ros.org/p/rqt_image_view/">rqt_image_view</a>
で表示できます。</p>

<p><strong>画像を表示するとノードの動作が不安定になり、cmd_velや画像トピックが発行されないことがあります。</strong></p>

<p>&lt;img src=https://rt-net.github.io/images/raspberry-pi-mouse/camera_line_trace.png width=500 /&gt;</p>

<h4 id="parameters">Parameters</h4>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">max_brightness</code>
    <ul>
      <li>Type: <code class="language-plaintext highlighter-rouge">int</code>
</li>
      <li>Default: 90</li>
      <li>画像の2値化のしきい値の最大値</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">min_brightness</code>
    <ul>
      <li>Type: <code class="language-plaintext highlighter-rouge">int</code>
</li>
      <li>Default: 0</li>
      <li>画像の2値化のしきい値の最小値</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">max_linear_vel</code>
    <ul>
      <li>Type: <code class="language-plaintext highlighter-rouge">double</code>
</li>
      <li>Default: 0.05</li>
      <li>直進速度の最大値</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">max_angular_vel</code>
    <ul>
      <li>Type: <code class="language-plaintext highlighter-rouge">double</code>
</li>
      <li>Default: 0.8</li>
      <li>旋回速度の最大値</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">area_threthold</code>
    <ul>
      <li>Type: <code class="language-plaintext highlighter-rouge">double</code>
</li>
      <li>Default: 0.20</li>
      <li>走行を開始するためのライン面積のしきい値</li>
    </ul>
  </li>
</ul>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 param <span class="nb">set</span> /camera_follower max_brightness 80

</code></pre></div></div>

<p><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/humble-devel/#how-to-use-examples">back to example list</a></p>

<hr>

<h3 id="slam">SLAM</h3>

<p>&lt;img src=https://rt-net.github.io/images/raspberry-pi-mouse/slam_toolbox_ros2.png width=500 /&gt;</p>

<p>Raspberry Pi MouseでSLAMとNavigationを行うサンプルは<a href="https://github.com/rt-net/raspimouse_slam_navigation_ros2">rt-net/raspimouse_slam_navigation_ros2</a>へ移行しました。</p>

<p><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/humble-devel/#how-to-use-examples">back to example list</a></p>

<hr>

<h3 id="direction_controller">direction_controller</h3>

<p>&lt;img src=https://www.rt-net.jp/wp-content/uploads/2018/02/img-usb9s_01.png width=500 /&gt;</p>

<p>IMUセンサを使用した角度制御のコード例です。</p>

<h4 id="requirements-5">Requirements</h4>

<ul>
  <li><a href="https://www.rt-shop.jp/index.php?main_page=product_info&amp;cPath=1348_1&amp;products_id=3416&amp;language=ja">USB出力9軸IMUセンサモジュール</a></li>
  <li>LiDAR Mount (<a href="https://www.rt-shop.jp/index.php?main_page=product_info&amp;cPath=1299_1395&amp;products_id=3867">Raspberry Pi Mouse オプションキットNo.8 [マルチLiDARマウント]</a>)</li>
  <li>RT-USB-9axisIMU ROS Package
    <ul>
      <li>https://github.com/rt-net/rt_usb_9axisimu_driver</li>
    </ul>
  </li>
</ul>

<h4 id="installation-4">Installation</h4>

<p>LiDAR MountにIMUセンサモジュールを取り付けます。</p>

<p>&lt;img src=https://rt-net.github.io/images/raspberry-pi-mouse/mouse_with_imu_2.JPG width=500 /&gt;</p>

<p>Raspberry Pi Mouse にLiDAR Mountを取り付けます。</p>

<p>&lt;img src=https://rt-net.github.io/images/raspberry-pi-mouse/mouse_with_imu_1.JPG width=500 /&gt;</p>

<h4 id="how-to-use-4">How to use</h4>

<p>次のコマンドでノードを起動します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ros2 launch raspimouse_ros2_examples direction_controller.launch.py

</code></pre></div></div>

<p>SW0 ~ SW2を押して動作モードを切り替えます。</p>

<ul>
  <li>SW0: ジャイロセンサのバイアスをキャリブレーションし、ラズパイマウスの方位角を<code class="language-plaintext highlighter-rouge">0 rad</code>にリセットします</li>
  <li>SW1: 方位角を<code class="language-plaintext highlighter-rouge">0 rad</code>に維持する角度制御を開始します
    <ul>
      <li>SW0 ~ SW2を押すか、ラズパイマウス本体を横に傾けると終了します</li>
    </ul>
  </li>
  <li>SW2: 方位角を<code class="language-plaintext highlighter-rouge">-π ~ π rad</code>に変化させる角度制御を開始します
    <ul>
      <li>SW0 ~ SW2を押すか、ラズパイマウス本体を横に傾けると終了します</li>
    </ul>
  </li>
</ul>

<h3 id="troubleshooting">Troubleshooting</h3>

<p>IMUの接続が正常に行われない場合があります。<br>
その時は、IMUのUSBケーブルを抜き差ししてください。<br>
抜き差し実施後は、コマンドを再度実行してください。</p>

<h4 id="configure-3">Configure</h4>

<p>パラメータで角度制御に使うPIDゲインを変更できます。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ros2 param <span class="nb">set</span> /direction_controller p_gain 10.0
Set parameter successful

<span class="nv">$ </span>ros2 param <span class="nb">set</span> /direction_controller i_gain 0.5
Set parameter successful

<span class="nv">$ </span>ros2 param <span class="nb">set</span> /direction_controller d_gain 0.0
Set parameter successful

</code></pre></div></div>

<h4 id="parameters-1">Parameters</h4>

<ul>
  <li>p_gain
    <ul>
      <li>Proportional gain of a PID controller for the direction control</li>
      <li>default: 10.0, min:0.0, max:30.0</li>
      <li>type: double</li>
    </ul>
  </li>
  <li>i_gain
    <ul>
      <li>Integral gain of a PID controller for the direction control</li>
      <li>default: 0.0, min:0.0, max:5.0</li>
      <li>type: double</li>
    </ul>
  </li>
  <li>d_gain
    <ul>
      <li>Derivative gain of a PID controller for the direction control</li>
      <li>default: 20.0, min:0.0, max:30.0</li>
      <li>type: double</li>
    </ul>
  </li>
  <li>target_angle
    <ul>
      <li>Target angle for the SW1 control mode.</li>
      <li>default: 0.0, min:-π, max:+π</li>
      <li>type: double</li>
    </ul>
  </li>
</ul>

<h4 id="publish-topics">Publish topics</h4>
<ul>
  <li>heading_angle
    <ul>
      <li>Heading angle of the robot that calculated from the IMU module sensor values.</li>
      <li>type: std_msgs/Float64</li>
    </ul>
  </li>
</ul>

<h4 id="videos-3">Videos</h4>

<p><a href="https://youtu.be/ghcCYOh9_MM"><img src="http://img.youtube.com/vi/ghcCYOh9_MM/sddefault.jpg" alt=""></a></p>

<p><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/humble-devel/#how-to-use-examples">back to example list</a></p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>
</div>
              <hr id="humble-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="humble-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#humble-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#humble-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#humble-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="humble-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="humble-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="humble-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/raspimouse_ros2_examples">raspimouse_ros2_examples</a> <small>repository</small></h3>
        <span class="label label-default">opencv</span> <span class="label label-default">raspberry-pi-mouse</span> <span class="label label-default">ros2</span> <span class="label label-default">joystick-control</span> <span class="label label-default">raspimouse-ros2</span> 
        
        <a class="label label-primary pkg-label" href="/p/raspimouse_ros2_examples">raspimouse_ros2_examples</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-rt-net-raspimouse_ros2_examples
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-rt-net-raspimouse_ros2_examples" role="menuitem" tabindex="-1" href="/r/raspimouse_ros2_examples/github-rt-net-raspimouse_ros2_examples" data="github-rt-net-raspimouse_ros2_examples">
                    <span class="glyphicon glyphicon-star"></span>
                    github-rt-net-raspimouse_ros2_examples
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS 2 examples for Raspberry Pi Mouse</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/rt-net/raspimouse_ros2_examples.git">https://github.com/rt-net/raspimouse_ros2_examples.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">jazzy</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-11-25
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">opencv</span> <span class="label label-default">raspberry-pi-mouse</span> <span class="label label-default">ros2</span> <span class="label label-default">joystick-control</span> <span class="label label-default">raspimouse-ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/raspimouse_ros2_examples/#jazzy-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/raspimouse_ros2_examples/#jazzy-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/raspimouse_ros2_examples/#jazzy-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/raspimouse_ros2_examples">raspimouse_ros2_examples</a></td>
                    <td>3.0.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<table>
  <tbody>
    <tr>
      <td><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/jazzy/README.en.md">English</a></td>
      <td><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/jazzy/README.md">日本語</a></td>
    </tr>
  </tbody>
</table>

<h1 id="raspimouse_ros2_examples">raspimouse_ros2_examples</h1>

<p><a href="https://github.com/rt-net/raspimouse_ros2_examples/actions?query=workflow%3Aindustrial_ci+branch%3Amaster"><img src="https://github.com/rt-net/raspimouse_ros2_examples/workflows/industrial_ci/badge.svg?branch=master" alt="industrial_ci"></a></p>

<p>Raspberry Pi MouseのROS 2サンプルコード集です。</p>

<p>ROS1のサンプルコード集は<a href="https://github.com/rt-net/raspimouse_ros_examples/blob/master/README.md">こちら</a>。</p>

<p>Gazebo（シミュレータ）でも動作します。詳細は<a href="https://github.com/rt-net/raspimouse_sim/blob/ros2/README.md">こちら</a>。</p>

<p>&lt;img src=https://rt-net.github.io/images/raspberry-pi-mouse/raspberry_pi_mouse.JPG width=500 /&gt;</p>

<h2 id="supported-ros-2-distributions">Supported ROS 2 distributions</h2>

<ul>
  <li><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/humble">Humble</a></li>
  <li>
<a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/jazzy">Jazzy</a> (This branch)</li>
</ul>

<h2 id="requirements">Requirements</h2>

<ul>
  <li>Raspberry Pi Mouse
    <ul>
      <li>https://rt-net.jp/products/raspberrypimousev3/</li>
      <li>Linux OS
        <ul>
          <li>Ubuntu server 24.04</li>
        </ul>
      </li>
      <li>Device Driver
        <ul>
          <li><a href="https://github.com/rt-net/RaspberryPiMouse">rt-net/RaspberryPiMouse</a></li>
        </ul>
      </li>
      <li>ROS
        <ul>
          <li><a href="https://docs.ros.org/en/jazzy/index.html">Jazzy Jalisco</a></li>
        </ul>
      </li>
      <li>Raspberry Pi Mouse ROS 2 package
        <ul>
          <li>https://github.com/rt-net/raspimouse2</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Remote Computer (Optional)
    <ul>
      <li>ROS
        <ul>
          <li><a href="https://docs.ros.org/en/jazzy/index.html">Jazzy Jalisco</a></li>
        </ul>
      </li>
      <li>Raspberry Pi Mouse ROS 2 package
        <ul>
          <li>https://github.com/rt-net/raspimouse2</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="installation">Installation</h2>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd</span> ~/ros2_ws/src
<span class="c"># Clone package</span>
<span class="nv">$ </span>git clone <span class="nt">-b</span> <span class="nv">$ROS_DISTRO</span> https://github.com/rt-net/raspimouse_ros2_examples.git

<span class="c"># Install dependencies</span>
<span class="nv">$ </span>rosdep <span class="nb">install</span> <span class="nt">-r</span> <span class="nt">-y</span> <span class="nt">--from-paths</span> <span class="nb">.</span> <span class="nt">--ignore-src</span>

<span class="c"># Build &amp; Install</span>
<span class="nv">$ </span><span class="nb">cd</span> ~/ros2_ws
<span class="nv">$ </span>colcon build <span class="nt">--symlink-install</span>
<span class="nv">$ </span><span class="nb">source</span> ~/ros2_ws/install/setup.bash

</code></pre></div></div>

<h2 id="license">License</h2>

<p>このリポジトリはApache 2.0ライセンスの元、公開されています。
ライセンスについては<a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/jazzy/./LICENSE">LICENSE</a>を参照ください。</p>

<h2 id="how-to-use-examples">How To Use Examples</h2>

<ul>
  <li><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/jazzy/#joystick_control">joystick_control</a></li>
  <li><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/jazzy/#object_tracking">object_tracking</a></li>
  <li><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/jazzy/#line_follower">line_follower</a></li>
  <li><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/jazzy/#camera_line_follower">camera_line_follower</a></li>
  <li><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/jazzy/#slam">SLAM</a></li>
  <li><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/jazzy/#direction_controller">direction_controller</a></li>
</ul>

<hr>

<h3 id="joystick_control">joystick_control</h3>

<p>ジョイスティックコントローラでRaspberryPiMouseを動かすコード例です。</p>

<h4 id="requirements-1">Requirements</h4>

<ul>
  <li>Joystick Controller
    <ul>
      <li><a href="https://gaming.logicool.co.jp/ja-jp/products/gamepads/f710-wireless-gamepad.html#940-0001440">Logicool Wireless Gamepad F710</a></li>
      <li><a href="https://www.jp.playstation.com/ps3/peripheral/cechzc2j.html">SONY DUALSHOCK 3</a></li>
    </ul>
  </li>
</ul>

<h4 id="how-to-use">How to use</h4>

<p>次のコマンドでノードを起動します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Use F710</span>
<span class="nv">$ </span>ros2 launch raspimouse_ros2_examples teleop_joy.launch.py joydev:<span class="o">=</span><span class="s2">"/dev/input/js0"</span> joyconfig:<span class="o">=</span>f710 mouse:<span class="o">=</span><span class="nb">true</span>

<span class="c"># Use DUALSHOCK 3</span>
<span class="nv">$ </span>ros2 launch raspimouse_ros2_examples teleop_joy.launch.py joydev:<span class="o">=</span><span class="s2">"/dev/input/js0"</span> joyconfig:<span class="o">=</span>dualshock3 mouse:<span class="o">=</span><span class="nb">true</span>

<span class="c"># Control from remote computer</span>
<span class="c">## on RaspberryPiMouse</span>
<span class="nv">$ </span>ros2 run raspimouse raspimouse
<span class="c">## on remote computer</span>
<span class="nv">$ </span>ros2 launch raspimouse_ros2_examples teleop_joy.launch.py mouse:<span class="o">=</span><span class="nb">false</span>

</code></pre></div></div>

<p>デフォルトのキー割り当てはこちらです。</p>

<p>Logicool Wireless Gamepad F710を使う場合はモード切替スイッチを <strong>D</strong> (DirectInput Mode)に設定します。</p>

<p><img src="https://rt-net.github.io/images/raspberry-pi-mouse/joystick_control_keyconfig.png" alt=""></p>

<h4 id="configure">Configure</h4>

<p><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/jazzy/./config/joy_f710.yml">./config/joy_f710.yml</a>、<a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/jazzy/./config/joy_dualshock3.yml">./config/joy_dualshock3.yml</a>
のキー番号を編集することで、キー割り当てを変更できます。</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">button_shutdown_1       </span><span class="pi">:</span> <span class="m">8</span>
<span class="na">button_shutdown_2       </span><span class="pi">:</span> <span class="m">9</span>

<span class="na">button_motor_off        </span><span class="pi">:</span> <span class="m">8</span>
<span class="na">button_motor_on         </span><span class="pi">:</span> <span class="m">9</span>

<span class="na">button_cmd_enable       </span><span class="pi">:</span> <span class="m">4</span>

</code></pre></div></div>

<h4 id="videos">Videos</h4>

<p><a href="https://youtu.be/GswxdB8Ia0Y"><img src="http://img.youtube.com/vi/GswxdB8Ia0Y/sddefault.jpg" alt="joystick_control"></a></p>

<p><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/jazzy/#how-to-use-examples">back to example list</a></p>

<hr>

<h3 id="object_tracking">object_tracking</h3>

<p>&lt;img src=https://rt-net.github.io/images/raspberry-pi-mouse/object_tracking.JPG width=500 /&gt;</p>

<p>色情報をもとにオレンジ色のボールの追跡を行うコード例です。
USB接続のWebカメラとOpenCVを使ってボール追跡をします。</p>

<h4 id="requirements-2">Requirements</h4>

<ul>
  <li>Webカメラ
    <ul>
      <li><a href="https://www.logicool.co.jp/ja-jp/product/hd-webcam-c310n">Logicool HD WEBCAM C310N</a></li>
    </ul>
  </li>
  <li>カメラマウント
    <ul>
      <li><a href="https://www.rt-shop.jp/index.php?main_page=product_info&amp;cPath=1299_1395&amp;products_id=3584">Raspberry Pi Mouse オプションキット No.4 [Webカメラマウント]</a></li>
    </ul>
  </li>
  <li>ボール（Optional）
    <ul>
      <li><a href="https://www.rt-shop.jp/index.php?main_page=product_info&amp;cPath=1299_1307&amp;products_id=3701">ソフトボール（オレンジ）</a></li>
    </ul>
  </li>
  <li>Software
    <ul>
      <li>OpenCV</li>
      <li>v4l-utils</li>
    </ul>
  </li>
</ul>

<h4 id="installation-1">Installation</h4>

<p>Raspberry Pi Mouseにカメラマウントを取り付け、WebカメラをRaspberry Piに接続します。</p>

<h4 id="how-to-use-1">How to use</h4>

<p>次のスクリプトを実行して、カメラの自動調節機能（自動露光，オートホワイトバランス等）を切ります。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd</span> ~/ros2_ws/src/raspimouse_ros2_examples/config
<span class="nv">$ </span>./configure_camera.bash

</code></pre></div></div>

<p>次のコマンドでノードを起動します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ros2 launch raspimouse_ros2_examples object_tracking.launch.py video_device:<span class="o">=</span>/dev/video0

</code></pre></div></div>

<p>カメラ画像は<code class="language-plaintext highlighter-rouge">camera/color/image_raw</code>、物体検出画像は<code class="language-plaintext highlighter-rouge">result_image</code>というトピックとして発行されます。
これらの画像は<a href="https://index.ros.org/r/rviz/">RViz</a>
や<a href="https://index.ros.org/p/rqt_image_view/">rqt_image_view</a>
で表示できます。</p>

<p><strong>画像を表示するとノードの動作が不安定になり、cmd_velや画像トピックが発行されないことがあります。</strong></p>

<p>&lt;img src=https://rt-net.github.io/images/raspberry-pi-mouse/object_tracking_ros2.png width=500 /&gt;</p>

<h4 id="configure-1">Configure</h4>

<p>追跡対象の色を変更するには
<a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/jazzy/./src/object_tracking_component.cpp"><code class="language-plaintext highlighter-rouge">./src/object_tracking_component.cpp</code></a>
を編集します。</p>

<p>物体検出精度が悪い時にはカメラの露光や関数内のパラメータを調整して下さい。</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="n">Tracker</span><span class="o">::</span><span class="n">tracking</span><span class="p">(</span><span class="k">const</span> <span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="o">&amp;</span> <span class="n">input_frame</span><span class="p">,</span> <span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="o">&amp;</span> <span class="n">result_frame</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">cv</span><span class="o">::</span><span class="n">inRange</span><span class="p">(</span><span class="n">hsv</span><span class="p">,</span> <span class="n">cv</span><span class="o">::</span><span class="n">Scalar</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="n">cv</span><span class="o">::</span><span class="n">Scalar</span><span class="p">(</span><span class="mi">29</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="n">extracted_bin</span><span class="p">);</span>  <span class="c1">// Orange</span>
  <span class="c1">// cv::inRange(hsv, cv::Scalar(60, 100, 100), cv::Scalar(80, 255, 255), extracted_bin);  // Green</span>
  <span class="c1">// cv::inRange(hsv, cv::Scalar(100, 100, 100), cv::Scalar(120, 255, 255), extracted_bin);  // Blue</span>

</code></pre></div></div>

<h4 id="videos-1">Videos</h4>

<p><a href="https://youtu.be/8lgmSTScP98"><img src="http://img.youtube.com/vi/8lgmSTScP98/sddefault.jpg" alt="object_tracking"></a></p>

<p><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/jazzy/#how-to-use-examples">back to example list</a></p>

<hr>

<h3 id="line_follower">line_follower</h3>

<p>&lt;img src=https://rt-net.github.io/images/raspberry-pi-mouse/mouse_with_line_trace_sensor.JPG width=500 /&gt;</p>

<p>ライントレースのコード例です。</p>

<h4 id="requirements-3">Requirements</h4>

<ul>
  <li>ライントレースセンサ
    <ul>
      <li><a href="https://www.rt-shop.jp/index.php?main_page=product_info&amp;cPath=1299_1395&amp;products_id=3591">Raspberry Pi Mouse オプションキット No.3 [ライントレース]</a></li>
    </ul>
  </li>
  <li>フィールドとライン (Optional)</li>
</ul>

<h4 id="installation-2">Installation</h4>

<p>Raspberry Pi Mouseにライントレースセンサを取り付けます。</p>

<h4 id="how-to-use-2">How to use</h4>

<p>次のコマンドでノードを起動します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ros2 launch raspimouse_ros2_examples line_follower.launch.py

</code></pre></div></div>

<p>Raspberry Pi Mouseをフィールドに置き、SW2を押してフィールド上のセンサ値をサンプリングします。</p>

<p>&lt;img src=https://rt-net.github.io/images/raspberry-pi-mouse/field_calibration.JPG width=500 /&gt;</p>

<p>次に、センサとラインが重なるようにRaspberry Pi Mouseを置き、SW1を押してライン上のセンサ値をサンプリングします。</p>

<p>&lt;img src=https://rt-net.github.io/images/raspberry-pi-mouse/line_calibration.JPG width=500 /&gt;</p>

<p>最後に、ライン上にRaspberry Pi Mouseを置き、SW0を押してライントレースを開始します。</p>

<p>&lt;img src=https://rt-net.github.io/images/raspberry-pi-mouse/start_trace.JPG width=500 /&gt;</p>

<p>もう一度SW0を押すとライントレースを停止します。</p>

<h4 id="configure-2">Configure</h4>

<p>走行速度を変更するには<a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/jazzy/./src/line_follower_component.cpp"><code class="language-plaintext highlighter-rouge">./src/line_follower_component.cpp</code></a>を編集します。</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="n">Follower</span><span class="o">::</span><span class="n">publish_cmdvel_for_line_following</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">const</span> <span class="kt">double</span> <span class="n">VEL_LINEAR_X</span> <span class="o">=</span> <span class="mf">0.08</span><span class="p">;</span>  <span class="c1">// m/s</span>
  <span class="k">const</span> <span class="kt">double</span> <span class="n">VEL_ANGULAR_Z</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">;</span>  <span class="c1">// rad/s</span>
  <span class="k">const</span> <span class="kt">double</span> <span class="n">LOW_VEL_ANGULAR_Z</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>  <span class="c1">// rad/s</span>

</code></pre></div></div>

<h4 id="videos-2">Videos</h4>

<p><a href="https://youtu.be/oPm0sW2V_tY"><img src="http://img.youtube.com/vi/oPm0sW2V_tY/sddefault.jpg" alt="line_follower"></a></p>

<p><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/jazzy/#how-to-use-examples">back to example list</a></p>

<hr>

<h3 id="camera_line_follower">camera_line_follower</h3>

<p>&lt;img src=https://rt-net.github.io/images/raspberry-pi-mouse/mouse_camera_line_trace_2.png width=500 /&gt;</p>

<p>RGBカメラによるライントレースのコード例です。</p>

<h4 id="requirements-4">Requirements</h4>

<ul>
  <li>Webカメラ
    <ul>
      <li><a href="https://www.logicool.co.jp/ja-jp/product/hd-webcam-c310n">Logicool HD WEBCAM C310N</a></li>
    </ul>
  </li>
  <li>カメラマウント
    <ul>
      <li><a href="https://www.rt-shop.jp/index.php?main_page=product_info&amp;cPath=1299_1395&amp;products_id=3584">Raspberry Pi Mouse オプションキット No.4 [Webカメラマウント]</a></li>
    </ul>
  </li>
</ul>

<h4 id="installation-3">Installation</h4>

<p>Raspberry Pi Mouseにカメラマウントを取り付け、WebカメラをRaspberry Piに接続します。</p>

<h4 id="how-to-use-3">How to use</h4>

<p>次のコマンドでノードを起動します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ros2 launch raspimouse_ros2_examples camera_line_follower.launch.py video_device:<span class="o">=</span>/dev/video0

</code></pre></div></div>

<p>ライン上にRaspberry Pi Mouseを置き、SW2を押してライントレースを開始します。
停止させる場合はSW0を押します。</p>

<p>カメラ画像は<code class="language-plaintext highlighter-rouge">camera/color/image_raw</code>、物体検出画像は<code class="language-plaintext highlighter-rouge">result_image</code>というトピックとして発行されます。
これらの画像は<a href="https://index.ros.org/r/rviz/">RViz</a>
や<a href="https://index.ros.org/p/rqt_image_view/">rqt_image_view</a>
で表示できます。</p>

<p><strong>画像を表示するとノードの動作が不安定になり、cmd_velや画像トピックが発行されないことがあります。</strong></p>

<p><strong>ラインの検出精度が悪い場合はカメラの露光やホワイトバランスの調整を行ってください。</strong></p>

<p>&lt;img src=https://rt-net.github.io/images/raspberry-pi-mouse/camera_line_trace.png width=500 /&gt;</p>

<h4 id="parameters">Parameters</h4>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">max_brightness</code>
    <ul>
      <li>Type: <code class="language-plaintext highlighter-rouge">int</code>
</li>
      <li>Default: 90</li>
      <li>画像の2値化のしきい値の最大値</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">min_brightness</code>
    <ul>
      <li>Type: <code class="language-plaintext highlighter-rouge">int</code>
</li>
      <li>Default: 0</li>
      <li>画像の2値化のしきい値の最小値</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">max_linear_vel</code>
    <ul>
      <li>Type: <code class="language-plaintext highlighter-rouge">double</code>
</li>
      <li>Default: 0.05</li>
      <li>直進速度の最大値</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">max_angular_vel</code>
    <ul>
      <li>Type: <code class="language-plaintext highlighter-rouge">double</code>
</li>
      <li>Default: 0.8</li>
      <li>旋回速度の最大値</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">area_threshold</code>
    <ul>
      <li>Type: <code class="language-plaintext highlighter-rouge">double</code>
</li>
      <li>Default: 0.20</li>
      <li>走行を開始するためのライン面積のしきい値</li>
    </ul>
  </li>
</ul>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 param <span class="nb">set</span> /camera_follower max_brightness 80

</code></pre></div></div>

<p><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/jazzy/#how-to-use-examples">back to example list</a></p>

<hr>

<h3 id="slam">SLAM</h3>

<p>&lt;img src=https://rt-net.github.io/images/raspberry-pi-mouse/slam_toolbox_ros2.png width=500 /&gt;</p>

<p>Raspberry Pi MouseでSLAMとNavigationを行うサンプルは<a href="https://github.com/rt-net/raspimouse_slam_navigation_ros2">rt-net/raspimouse_slam_navigation_ros2</a>へ移行しました。</p>

<p><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/jazzy/#how-to-use-examples">back to example list</a></p>

<hr>

<h3 id="direction_controller">direction_controller</h3>

<p>&lt;img src=https://www.rt-shop.jp/images/RT/RT-USB-9axisIMU.png width=200 /&gt; &lt;img src=https://www.rt-shop.jp/images/RT/%E8%A3%BD%E5%93%81%E5%86%99%E7%9C%9F.JPG height=200&gt;</p>

<p>IMUセンサを使用した角度制御のコード例です。</p>

<h4 id="requirements-5">Requirements</h4>

<ul>
  <li><a href="https://www.rt-shop.jp/index.php?main_page=product_info&amp;cPath=1348_1&amp;products_id=3416&amp;language=ja">USB出力9軸IMUセンサモジュール</a></li>
  <li>LiDAR Mount (<a href="https://www.rt-shop.jp/index.php?main_page=product_info&amp;cPath=1299_1395&amp;products_id=3867">Raspberry Pi Mouse オプションキットNo.8 [マルチLiDARマウント]</a>)</li>
  <li>RT-USB-9axisIMU ROS Package
    <ul>
      <li>https://github.com/rt-net/rt_usb_9axisimu_driver</li>
    </ul>
  </li>
</ul>

<h4 id="installation-4">Installation</h4>

<p>LiDAR MountにIMUセンサモジュールを取り付けます。</p>

<p>&lt;img src=https://rt-net.github.io/images/raspberry-pi-mouse/mouse_with_imu_2.JPG width=500 /&gt;</p>

<p>Raspberry Pi Mouse にLiDAR Mountを取り付けます。</p>

<p>&lt;img src=https://rt-net.github.io/images/raspberry-pi-mouse/mouse_with_imu_1.JPG width=500 /&gt;</p>

<h4 id="how-to-use-4">How to use</h4>

<p>次のコマンドでノードを起動します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ros2 launch raspimouse_ros2_examples direction_controller.launch.py

</code></pre></div></div>

<p>SW0 ~ SW2を押して動作モードを切り替えます。</p>

<ul>
  <li>SW0: ジャイロセンサのバイアスをキャリブレーションし、ラズパイマウスの方位角を<code class="language-plaintext highlighter-rouge">0 rad</code>にリセットします</li>
  <li>SW1: 方位角を<code class="language-plaintext highlighter-rouge">0 rad</code>に維持する角度制御を開始します
    <ul>
      <li>SW0 ~ SW2を押すか、ラズパイマウス本体を横に傾けると終了します</li>
    </ul>
  </li>
  <li>SW2: 方位角を<code class="language-plaintext highlighter-rouge">-π ~ π rad</code>に変化させる角度制御を開始します
    <ul>
      <li>SW0 ~ SW2を押すか、ラズパイマウス本体を横に傾けると終了します</li>
    </ul>
  </li>
</ul>

<h3 id="troubleshooting">Troubleshooting</h3>

<p>IMUの接続が正常に行われない場合があります。
その時は、IMUのUSBケーブルを抜き差ししてください。
抜き差し実施後は、コマンドを再度実行してください。</p>

<h4 id="configure-3">Configure</h4>

<p>パラメータで角度制御に使うPIDゲインを変更できます。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ros2 param <span class="nb">set</span> /direction_controller p_gain 10.0
Set parameter successful

<span class="nv">$ </span>ros2 param <span class="nb">set</span> /direction_controller i_gain 0.5
Set parameter successful

<span class="nv">$ </span>ros2 param <span class="nb">set</span> /direction_controller d_gain 0.0
Set parameter successful

</code></pre></div></div>

<h4 id="parameters-1">Parameters</h4>

<ul>
  <li>p_gain
    <ul>
      <li>Proportional gain of a PID controller for the direction control</li>
      <li>default: 10.0, min:0.0, max:30.0</li>
      <li>type: double</li>
    </ul>
  </li>
  <li>i_gain
    <ul>
      <li>Integral gain of a PID controller for the direction control</li>
      <li>default: 0.0, min:0.0, max:5.0</li>
      <li>type: double</li>
    </ul>
  </li>
  <li>d_gain
    <ul>
      <li>Derivative gain of a PID controller for the direction control</li>
      <li>default: 20.0, min:0.0, max:30.0</li>
      <li>type: double</li>
    </ul>
  </li>
  <li>target_angle
    <ul>
      <li>Target angle for the SW1 control mode.</li>
      <li>default: 0.0, min:-π, max:+π</li>
      <li>type: double</li>
    </ul>
  </li>
</ul>

<h4 id="publish-topics">Publish topics</h4>
<ul>
  <li>heading_angle
    <ul>
      <li>Heading angle of the robot that calculated from the IMU module sensor values.</li>
      <li>type: std_msgs/Float64</li>
    </ul>
  </li>
</ul>

<h4 id="videos-3">Videos</h4>

<p><a href="https://youtu.be/ghcCYOh9_MM"><img src="http://img.youtube.com/vi/ghcCYOh9_MM/sddefault.jpg" alt=""></a></p>

<p><a href="https://github.com/rt-net/raspimouse_ros2_examples/tree/jazzy/#how-to-use-examples">back to example list</a></p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>
</div>
              <hr id="jazzy-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="jazzy-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#jazzy-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#jazzy-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#jazzy-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="jazzy-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="jazzy-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="jazzy-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/raspimouse_ros2_examples">raspimouse_ros2_examples</a> <small>repository</small></h3>
        <span class="label label-default">opencv</span> <span class="label label-default">raspberry-pi-mouse</span> <span class="label label-default">ros2</span> <span class="label label-default">joystick-control</span> <span class="label label-default">raspimouse-ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-rt-net-raspimouse_ros2_examples
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-rt-net-raspimouse_ros2_examples" role="menuitem" tabindex="-1" href="/r/raspimouse_ros2_examples/github-rt-net-raspimouse_ros2_examples" data="github-rt-net-raspimouse_ros2_examples">
                    <span class="glyphicon glyphicon-star"></span>
                    github-rt-net-raspimouse_ros2_examples
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>kilted</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/raspimouse_ros2_examples">raspimouse_ros2_examples</a> <small>repository</small></h3>
        <span class="label label-default">opencv</span> <span class="label label-default">raspberry-pi-mouse</span> <span class="label label-default">ros2</span> <span class="label label-default">joystick-control</span> <span class="label label-default">raspimouse-ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-rt-net-raspimouse_ros2_examples
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-rt-net-raspimouse_ros2_examples" role="menuitem" tabindex="-1" href="/r/raspimouse_ros2_examples/github-rt-net-raspimouse_ros2_examples" data="github-rt-net-raspimouse_ros2_examples">
                    <span class="glyphicon glyphicon-star"></span>
                    github-rt-net-raspimouse_ros2_examples
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>rolling</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/raspimouse_ros2_examples">raspimouse_ros2_examples</a> <small>repository</small></h3>
        <span class="label label-default">opencv</span> <span class="label label-default">raspberry-pi-mouse</span> <span class="label label-default">ros2</span> <span class="label label-default">joystick-control</span> <span class="label label-default">raspimouse-ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-rt-net-raspimouse_ros2_examples
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-rt-net-raspimouse_ros2_examples" role="menuitem" tabindex="-1" href="/r/raspimouse_ros2_examples/github-rt-net-raspimouse_ros2_examples" data="github-rt-net-raspimouse_ros2_examples">
                    <span class="glyphicon glyphicon-star"></span>
                    github-rt-net-raspimouse_ros2_examples
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>github</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/raspimouse_ros2_examples">raspimouse_ros2_examples</a> <small>repository</small></h3>
        <span class="label label-default">opencv</span> <span class="label label-default">raspberry-pi-mouse</span> <span class="label label-default">ros2</span> <span class="label label-default">joystick-control</span> <span class="label label-default">raspimouse-ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-rt-net-raspimouse_ros2_examples
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-rt-net-raspimouse_ros2_examples" role="menuitem" tabindex="-1" href="/r/raspimouse_ros2_examples/github-rt-net-raspimouse_ros2_examples" data="github-rt-net-raspimouse_ros2_examples">
                    <span class="glyphicon glyphicon-star"></span>
                    github-rt-net-raspimouse_ros2_examples
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/raspimouse_ros2_examples">raspimouse_ros2_examples</a> <small>repository</small></h3>
        <span class="label label-default">opencv</span> <span class="label label-default">raspberry-pi-mouse</span> <span class="label label-default">ros2</span> <span class="label label-default">joystick-control</span> <span class="label label-default">raspimouse-ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-rt-net-raspimouse_ros2_examples
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-rt-net-raspimouse_ros2_examples" role="menuitem" tabindex="-1" href="/r/raspimouse_ros2_examples/github-rt-net-raspimouse_ros2_examples" data="github-rt-net-raspimouse_ros2_examples">
                    <span class="glyphicon glyphicon-star"></span>
                    github-rt-net-raspimouse_ros2_examples
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/raspimouse_ros2_examples">raspimouse_ros2_examples</a> <small>repository</small></h3>
        <span class="label label-default">opencv</span> <span class="label label-default">raspberry-pi-mouse</span> <span class="label label-default">ros2</span> <span class="label label-default">joystick-control</span> <span class="label label-default">raspimouse-ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-rt-net-raspimouse_ros2_examples
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-rt-net-raspimouse_ros2_examples" role="menuitem" tabindex="-1" href="/r/raspimouse_ros2_examples/github-rt-net-raspimouse_ros2_examples" data="github-rt-net-raspimouse_ros2_examples">
                    <span class="glyphicon glyphicon-star"></span>
                    github-rt-net-raspimouse_ros2_examples
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>iron</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/raspimouse_ros2_examples">raspimouse_ros2_examples</a> <small>repository</small></h3>
        <span class="label label-default">opencv</span> <span class="label label-default">raspberry-pi-mouse</span> <span class="label label-default">ros2</span> <span class="label label-default">joystick-control</span> <span class="label label-default">raspimouse-ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-rt-net-raspimouse_ros2_examples
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-rt-net-raspimouse_ros2_examples" role="menuitem" tabindex="-1" href="/r/raspimouse_ros2_examples/github-rt-net-raspimouse_ros2_examples" data="github-rt-net-raspimouse_ros2_examples">
                    <span class="glyphicon glyphicon-star"></span>
                    github-rt-net-raspimouse_ros2_examples
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/rt-net/raspimouse_ros2_examples.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
