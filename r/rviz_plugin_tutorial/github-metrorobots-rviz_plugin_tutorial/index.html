<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/rviz_plugin_tutorial/github-metrorobots-rviz_plugin_tutorial/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">rviz_plugin_tutorial</li>
        <!--<li class="active">rviz_plugin_tutorial</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-default" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-default" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-default" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-default" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-primary" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class="disabled older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rviz_plugin_tutorial">rviz_plugin_tutorial</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-metrorobots-rviz_plugin_tutorial
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-metrorobots-rviz_plugin_tutorial" role="menuitem" tabindex="-1" href="/r/rviz_plugin_tutorial/github-metrorobots-rviz_plugin_tutorial" data="github-metrorobots-rviz_plugin_tutorial">
                    <span class="glyphicon glyphicon-star"></span>
                    github-metrorobots-rviz_plugin_tutorial
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>humble</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rviz_plugin_tutorial">rviz_plugin_tutorial</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-metrorobots-rviz_plugin_tutorial
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-metrorobots-rviz_plugin_tutorial" role="menuitem" tabindex="-1" href="/r/rviz_plugin_tutorial/github-metrorobots-rviz_plugin_tutorial" data="github-metrorobots-rviz_plugin_tutorial">
                    <span class="glyphicon glyphicon-star"></span>
                    github-metrorobots-rviz_plugin_tutorial
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jazzy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rviz_plugin_tutorial">rviz_plugin_tutorial</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-metrorobots-rviz_plugin_tutorial
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-metrorobots-rviz_plugin_tutorial" role="menuitem" tabindex="-1" href="/r/rviz_plugin_tutorial/github-metrorobots-rviz_plugin_tutorial" data="github-metrorobots-rviz_plugin_tutorial">
                    <span class="glyphicon glyphicon-star"></span>
                    github-metrorobots-rviz_plugin_tutorial
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>kilted</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rviz_plugin_tutorial">rviz_plugin_tutorial</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-metrorobots-rviz_plugin_tutorial
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-metrorobots-rviz_plugin_tutorial" role="menuitem" tabindex="-1" href="/r/rviz_plugin_tutorial/github-metrorobots-rviz_plugin_tutorial" data="github-metrorobots-rviz_plugin_tutorial">
                    <span class="glyphicon glyphicon-star"></span>
                    github-metrorobots-rviz_plugin_tutorial
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>rolling</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rviz_plugin_tutorial">rviz_plugin_tutorial</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/rviz_plugin_tutorial">rviz_plugin_tutorial</a>
        
        <a class="label label-primary pkg-label" href="/p/rviz_plugin_tutorial_msgs">rviz_plugin_tutorial_msgs</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-metrorobots-rviz_plugin_tutorial
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-metrorobots-rviz_plugin_tutorial" role="menuitem" tabindex="-1" href="/r/rviz_plugin_tutorial/github-metrorobots-rviz_plugin_tutorial" data="github-metrorobots-rviz_plugin_tutorial">
                    <span class="glyphicon glyphicon-star"></span>
                    github-metrorobots-rviz_plugin_tutorial
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">A tutorial on how to make rviz plugins</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/metrorobots/rviz_plugin_tutorial.git">https://github.com/metrorobots/rviz_plugin_tutorial.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-02-06
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNKNOWN
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/rviz_plugin_tutorial/#github-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rviz_plugin_tutorial/#github-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/rviz_plugin_tutorial/#github-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/rviz_plugin_tutorial">rviz_plugin_tutorial</a></td>
                    <td>0.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rviz_plugin_tutorial_msgs">rviz_plugin_tutorial_msgs</a></td>
                    <td>0.0.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="building-a-custom-rviz-display">Building a Custom RViz Display</h1>

<h2 id="background">Background</h2>
<p>There are many types of data that have existing visualizations in RViz. However, if there is a message type that does
not yet have a plugin to display it, there are two choices to see it in RViz.</p>

<ol>
  <li>Convert the message to another type, such as <code class="language-plaintext highlighter-rouge">visualization_msgs/Marker</code>.</li>
  <li>Write a Custom RViz Display.</li>
</ol>

<p>With the first option, there is more network traffic and limitations to how the data can be represented. It is also quick and flexible.
The latter option is explained in this tutorial. It takes a bit of work, but can lead to much richer visualizations.</p>

<p>All of the code for this tutorial can be found in <code class="language-plaintext highlighter-rouge">this repository &lt;https://github.com/MetroRobots/rviz_plugin_tutorial&gt;</code>__.
In order to see the incremental progress of the plugin written in this tutorial,
the repository has different branches (<code class="language-plaintext highlighter-rouge">step2</code>, <code class="language-plaintext highlighter-rouge">step3</code>…) that can each be compiled and run as you go.</p>

<h2 id="point2d-message">Point2D Message</h2>
<p>We’ll be playing with a toy message defined in the <a href="https://github.com/metrorobots/rviz_plugin_tutorial/tree/main/rviz_plugin_tutorial_msgs"><code class="language-plaintext highlighter-rouge">rviz_plugin_tutorial_msgs</code></a> package: <code class="language-plaintext highlighter-rouge">Point2D.msg</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>std_msgs/Header header
float64 x
float64 y

</code></pre></div></div>
<h2 id="boilerplate-for-basic-plugin">Boilerplate for Basic Plugin</h2>
<p>Strap in, there’s a lot of code. You can view the full version of this code with the branch name <code class="language-plaintext highlighter-rouge">step1</code>.</p>

<h3 id="header-file">Header File</h3>

<p>Here are the contents of <a href="https://github.com/metrorobots/rviz_plugin_tutorial/tree/main/rviz_plugin_tutorial/include/rviz_plugin_tutorial/point_display.hpp"><code class="language-plaintext highlighter-rouge">point_display.hpp</code></a></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="cp">#ifndef RVIZ_PLUGIN_TUTORIAL__POINT_DISPLAY_HPP_
#define RVIZ_PLUGIN_TUTORIAL__POINT_DISPLAY_HPP_
</span>
<span class="cp">#include</span> <span class="cpf">&lt;rviz_common/message_filter_display.hpp&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;rviz_plugin_tutorial_msgs/msg/point2_d.hpp&gt;</span><span class="cp">
</span>
<span class="k">namespace</span> <span class="n">rviz_plugin_tutorial</span>
<span class="p">{</span>
<span class="k">class</span> <span class="nc">PointDisplay</span>
  <span class="o">:</span> <span class="k">public</span> <span class="n">rviz_common</span><span class="o">::</span><span class="n">MessageFilterDisplay</span><span class="o">&lt;</span><span class="n">rviz_plugin_tutorial_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">Point2D</span><span class="o">&gt;</span>
<span class="p">{</span>
  <span class="n">Q_OBJECT</span>

<span class="nl">protected:</span>
  <span class="kt">void</span> <span class="n">processMessage</span><span class="p">(</span><span class="k">const</span> <span class="n">rviz_plugin_tutorial_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">Point2D</span><span class="o">::</span><span class="n">ConstSharedPtr</span> <span class="n">msg</span><span class="p">)</span> <span class="k">override</span><span class="p">;</span>
<span class="p">};</span>
<span class="p">}</span>  <span class="c1">// namespace rviz_plugin_tutorial</span>

<span class="cp">#endif  // RVIZ_PLUGIN_TUTORIAL__POINT_DISPLAY_HPP_
</span>
</code></pre></div></div>

<ul>
  <li>We’re implementing the <a href="https://github.com/ros2/rviz/blob/0ef2b56373b98b5536f0f817c11dc2b5549f391d/rviz_common/include/rviz_common/message_filter_display.hpp#L43"><code class="language-plaintext highlighter-rouge">MessageFilterDisplay</code></a> class which can be used with any message with a <code class="language-plaintext highlighter-rouge">std_msgs/Header</code>.</li>
  <li>The class is templated with our <code class="language-plaintext highlighter-rouge">Point2D</code> message type.</li>
  <li>
<a href="https://doc.qt.io/archives/qt-4.8/moc.html">For reasons outside the scope of this tutorial</a>, you need the <code class="language-plaintext highlighter-rouge">Q_OBJECT</code> macro in there to get the QT parts of the gui to work.</li>
  <li>
<code class="language-plaintext highlighter-rouge">processMessage</code> is the only method that needs to be implemented, which we’ll do in the cpp file.</li>
</ul>

<h3 id="source-file">Source File</h3>
<p><a href="https://github.com/metrorobots/rviz_plugin_tutorial/tree/main/rviz_plugin_tutorial/src/point_display.cpp"><code class="language-plaintext highlighter-rouge">point_display.cpp</code></a></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;rviz_plugin_tutorial/point_display.hpp&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;rviz_common/logging.hpp&gt;</span><span class="cp">
</span>
<span class="k">namespace</span> <span class="n">rviz_plugin_tutorial</span>
<span class="p">{</span>
<span class="kt">void</span> <span class="n">PointDisplay</span><span class="o">::</span><span class="n">processMessage</span><span class="p">(</span><span class="k">const</span> <span class="n">rviz_plugin_tutorial_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">Point2D</span><span class="o">::</span><span class="n">ConstSharedPtr</span> <span class="n">msg</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">RVIZ_COMMON_LOG_INFO_STREAM</span><span class="p">(</span><span class="s">"We got a message with frame "</span> <span class="o">&lt;&lt;</span> <span class="n">msg</span><span class="o">-&gt;</span><span class="n">header</span><span class="p">.</span><span class="n">frame_id</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">}</span>  <span class="c1">// namespace rviz_plugin_tutorial</span>

<span class="cp">#include</span> <span class="cpf">&lt;pluginlib/class_list_macros.hpp&gt;</span><span class="cp">
</span><span class="n">PLUGINLIB_EXPORT_CLASS</span><span class="p">(</span><span class="n">rviz_plugin_tutorial</span><span class="o">::</span><span class="n">PointDisplay</span><span class="p">,</span> <span class="n">rviz_common</span><span class="o">::</span><span class="n">Display</span><span class="p">)</span>

</code></pre></div></div>

<ul>
  <li>The logging is not strictly necessary, but helps with debugging.</li>
  <li>In order for RViz to find our plugin, we need this <code class="language-plaintext highlighter-rouge">PLUGINLIB</code> invocation in our code (as well as other things below)</li>
</ul>

<h3 id="packagexml">package.xml</h3>
<p>We need the following three dependencies in our package.xml:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;depend&gt;</span>pluginlib<span class="nt">&lt;/depend&gt;</span>
  <span class="nt">&lt;depend&gt;</span>rviz_common<span class="nt">&lt;/depend&gt;</span>
  <span class="nt">&lt;depend&gt;</span>rviz_plugin_tutorial_msgs<span class="nt">&lt;/depend&gt;</span>

</code></pre></div></div>

<h3 id="rviz_common_pluginsxml">rviz_common_plugins.xml</h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;library</span> <span class="na">path=</span><span class="s">"point_display"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;class</span> <span class="na">type=</span><span class="s">"rviz_plugin_tutorial::PointDisplay"</span> <span class="na">base_class_type=</span><span class="s">"rviz_common::Display"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;description&gt;&lt;/description&gt;</span>
  <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/library&gt;</span>

</code></pre></div></div>
<ul>
  <li>This is standard <code class="language-plaintext highlighter-rouge">pluginlib</code> code.</li>
  <li>The library <code class="language-plaintext highlighter-rouge">path</code> is the name of the library we’ll assign in the CMake.</li>
  <li>The class should match the <code class="language-plaintext highlighter-rouge">PLUGINLIB</code> invocation from above.</li>
  <li>We’ll come back to the description later, I promise.</li>
</ul>

<h3 id="cmakeliststxt">CMakeLists.txt</h3>
<p>Add the following lines to the top of the standard boilerplate.</p>

<div class="language-cmake highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">find_package</span><span class="p">(</span>ament_cmake_ros REQUIRED<span class="p">)</span>
<span class="nb">find_package</span><span class="p">(</span>pluginlib REQUIRED<span class="p">)</span>
<span class="nb">find_package</span><span class="p">(</span>rviz_common REQUIRED<span class="p">)</span>
<span class="nb">find_package</span><span class="p">(</span>rviz_plugin_tutorial_msgs REQUIRED<span class="p">)</span>

<span class="nb">set</span><span class="p">(</span>CMAKE_AUTOMOC ON<span class="p">)</span>
<span class="nf">qt5_wrap_cpp</span><span class="p">(</span>MOC_FILES
  include/rviz_plugin_tutorial/point_display.hpp
<span class="p">)</span>

<span class="nb">add_library</span><span class="p">(</span>point_display src/point_display.cpp <span class="si">${</span><span class="nv">MOC_FILES</span><span class="si">}</span><span class="p">)</span>
<span class="nb">target_include_directories</span><span class="p">(</span>point_display PUBLIC
  $&lt;BUILD_INTERFACE:<span class="si">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="si">}</span>/include&gt;
  $&lt;INSTALL_INTERFACE:include&gt;
<span class="p">)</span>
<span class="nf">ament_target_dependencies</span><span class="p">(</span>point_display
  pluginlib
  rviz_common
  rviz_plugin_tutorial_msgs
<span class="p">)</span>
<span class="nb">install</span><span class="p">(</span>TARGETS point_display
        EXPORT export_rviz_plugin_tutorial
        ARCHIVE DESTINATION lib
        LIBRARY DESTINATION lib
        RUNTIME DESTINATION bin
<span class="p">)</span>
<span class="nb">install</span><span class="p">(</span>DIRECTORY include/
        DESTINATION include
<span class="p">)</span>
<span class="nb">install</span><span class="p">(</span>FILES rviz_common_plugins.xml
        DESTINATION share/<span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>
<span class="p">)</span>
<span class="nf">ament_export_include_directories</span><span class="p">(</span>include<span class="p">)</span>
<span class="nf">ament_export_targets</span><span class="p">(</span>export_rviz_plugin_tutorial<span class="p">)</span>
<span class="nf">pluginlib_export_plugin_description_file</span><span class="p">(</span>rviz_common rviz_common_plugins.xml<span class="p">)</span>

</code></pre></div></div>

<ul>
  <li>To generate the proper Qt files, we need to
  A) Turn <code class="language-plaintext highlighter-rouge">CMAKE_AUTOMOC</code> on
  B) Wrap the headers by calling <code class="language-plaintext highlighter-rouge">qt5_wrap_cpp</code> with each header that has <code class="language-plaintext highlighter-rouge">Q_OBJECT</code> in it.
  C) Include the <code class="language-plaintext highlighter-rouge">MOC_FILES</code> in the library alongside our other cpp files.</li>
  <li>Note that if you do NOT wrap your header files, you may get an error message when attempting to load the plugin at runtime, along the lines of:</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   [rviz2]: PluginlibFactory: The plugin for class 'rviz_plugin_tutorial::PointDisplay' failed to load. Error: Failed to load library /home/ros/ros2_ws/install/rviz_plugin_tutorial/lib/libpoint_display.so. Make sure that you are calling the PLUGINLIB_EXPORT_CLASS macro in the library code, and that names are consistent between this macro and your XML. Error string: Could not load library LoadLibrary error: /home/ros/ros2_ws/install/rviz_plugin_tutorial/lib/libpoint_display.so: undefined symbol: _ZTVN20rviz_plugin_tutorial12PointDisplayE, at /tmp/binarydeb/ros-foxy-rcutils-1.1.4/src/shared_library.c:84
   
</code></pre></div></div>
<ul>
  <li>A lot of the other code ensures that the plugin portion works. Namely, calling <code class="language-plaintext highlighter-rouge">pluginlib_export_plugin_description_file</code> is essential to getting RViz to find your new plugin.</li>
</ul>

<h3 id="testing-it-out">Testing it out</h3>
<p>Compile your code and run <code class="language-plaintext highlighter-rouge">rviz2</code>. You should be able to add your new plugin by clicking <code class="language-plaintext highlighter-rouge">Add</code> in the bottom left, and then selecting your package/plugin.</p>

<p><img src="https://raw.githubusercontent.com/metrorobots/rviz_plugin_tutorial/main/doc/Step1A.png" alt="screenshot of adding display"></p>

<p>Initially, the display will be in an error state because you have yet to assign a topic.
<img src="https://raw.githubusercontent.com/metrorobots/rviz_plugin_tutorial/main/doc/Step1B.png" alt="screenshot of error state"></p>

<p>If we put the topic <code class="language-plaintext highlighter-rouge">/point</code> in, it should load fine but not display anything.
<img src="https://raw.githubusercontent.com/metrorobots/rviz_plugin_tutorial/main/doc/Step1C.png" alt="screenshot of functioning empty display"></p>

<p>You can publish messages with the following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic pub /point rviz_plugin_tutorial_msgs/msg/Point2D <span class="s2">"{header: {frame_id: map}, x: 1, y: 2}"</span> <span class="nt">-r</span> 0.5

</code></pre></div></div>

<p>That should result in the “We got a message” logging to appear in the <code class="language-plaintext highlighter-rouge">stdout</code> of RViz.</p>

<h2 id="actual-visualization">Actual Visualization</h2>
<p>You can view the full version of this step with the branch name <code class="language-plaintext highlighter-rouge">step2</code>.</p>

<p>First, you need to add a dependency in <code class="language-plaintext highlighter-rouge">CMakeLists.txt</code> and <code class="language-plaintext highlighter-rouge">package.xml</code> on the package <code class="language-plaintext highlighter-rouge">rviz_rendering</code>.</p>

<p>We need to add three lines to the header file:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">#include &lt;rviz_rendering/objects/shape.hpp&gt;</code> - There’s <a href="https://github.com/ros2/rviz/tree/ros2/rviz_rendering/include/rviz_rendering/objects">lots of options in the <code class="language-plaintext highlighter-rouge">rviz_rendering</code> package</a> for objects to build your visualization on. Here we’re using a simple shape.</li>
  <li>In the class, we’ll add a new <code class="language-plaintext highlighter-rouge">protected</code> virtual method: <code class="language-plaintext highlighter-rouge">void onInitialize() override;</code>
</li>
  <li>We also add a pointer to our shape object: <code class="language-plaintext highlighter-rouge">std::unique_ptr&lt;rviz_rendering::Shape&gt; point_shape_;</code>
</li>
</ul>

<p>Then in the cpp file, we define the <code class="language-plaintext highlighter-rouge">onInitialize</code> method:</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="n">PointDisplay</span><span class="o">::</span><span class="n">onInitialize</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">MFDClass</span><span class="o">::</span><span class="n">onInitialize</span><span class="p">();</span>
  <span class="n">point_shape_</span> <span class="o">=</span>
    <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">rviz_rendering</span><span class="o">::</span><span class="n">Shape</span><span class="o">&gt;</span><span class="p">(</span><span class="n">rviz_rendering</span><span class="o">::</span><span class="n">Shape</span><span class="o">::</span><span class="n">Type</span><span class="o">::</span><span class="n">Cube</span><span class="p">,</span> <span class="n">scene_manager_</span><span class="p">,</span>
      <span class="n">scene_node_</span><span class="p">);</span>
<span class="p">}</span>

</code></pre></div></div>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">MFDClass</code> is <a href="https://github.com/ros2/rviz/blob/0ef2b56373b98b5536f0f817c11dc2b5549f391d/rviz_common/include/rviz_common/message_filter_display.hpp#L57">aliased</a> to the templated parent class for convenience.</li>
  <li>The shape object must be constructed here in the <code class="language-plaintext highlighter-rouge">onInitialize</code> method rather than the constructor because otherwise <code class="language-plaintext highlighter-rouge">scene_manager_</code> and <code class="language-plaintext highlighter-rouge">scene_node_</code> would not be ready.</li>
</ul>

<p>We also update our <code class="language-plaintext highlighter-rouge">processMessage</code> method:</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="n">PointDisplay</span><span class="o">::</span><span class="n">processMessage</span><span class="p">(</span><span class="k">const</span> <span class="n">rviz_plugin_tutorial_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">Point2D</span><span class="o">::</span><span class="n">ConstSharedPtr</span> <span class="n">msg</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">RVIZ_COMMON_LOG_INFO_STREAM</span><span class="p">(</span><span class="s">"We got a message with frame "</span> <span class="o">&lt;&lt;</span> <span class="n">msg</span><span class="o">-&gt;</span><span class="n">header</span><span class="p">.</span><span class="n">frame_id</span><span class="p">);</span>

  <span class="n">Ogre</span><span class="o">::</span><span class="n">Vector3</span> <span class="n">position</span><span class="p">;</span>
  <span class="n">Ogre</span><span class="o">::</span><span class="n">Quaternion</span> <span class="n">orientation</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">context_</span><span class="o">-&gt;</span><span class="n">getFrameManager</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">getTransform</span><span class="p">(</span><span class="n">msg</span><span class="o">-&gt;</span><span class="n">header</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">orientation</span><span class="p">))</span> <span class="p">{</span>
    <span class="n">RVIZ_COMMON_LOG_DEBUG_STREAM</span><span class="p">(</span><span class="s">"Error transforming from frame '"</span> <span class="o">&lt;&lt;</span> <span class="n">msg</span><span class="o">-&gt;</span><span class="n">header</span><span class="p">.</span><span class="n">frame_id</span> <span class="o">&lt;&lt;</span>
        <span class="s">"' to frame '"</span> <span class="o">&lt;&lt;</span> <span class="n">qPrintable</span><span class="p">(</span><span class="n">fixed_frame_</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">"'"</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="n">scene_node_</span><span class="o">-&gt;</span><span class="n">setPosition</span><span class="p">(</span><span class="n">position</span><span class="p">);</span>
  <span class="n">scene_node_</span><span class="o">-&gt;</span><span class="n">setOrientation</span><span class="p">(</span><span class="n">orientation</span><span class="p">);</span>

  <span class="n">Ogre</span><span class="o">::</span><span class="n">Vector3</span> <span class="n">point_pos</span><span class="p">;</span>
  <span class="n">point_pos</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">msg</span><span class="o">-&gt;</span><span class="n">x</span><span class="p">;</span>
  <span class="n">point_pos</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">msg</span><span class="o">-&gt;</span><span class="n">y</span><span class="p">;</span>
  <span class="n">point_shape_</span><span class="o">-&gt;</span><span class="n">setPosition</span><span class="p">(</span><span class="n">point_pos</span><span class="p">);</span>
<span class="p">}</span>

</code></pre></div></div>

<ul>
  <li>We need to get the proper frame for our message and transform the <code class="language-plaintext highlighter-rouge">scene_node_</code> accordingly. This ensures that the visualization does not always appear relative to the fixed frame.</li>
  <li>The actual visualization that we’ve been building up to is in the last four lines: we set the position of the visualization to match the message’s position.</li>
</ul>

<p>The result should look like this:
<img src="https://raw.githubusercontent.com/metrorobots/rviz_plugin_tutorial/main/doc/Step2A.png" alt="screenshot of functioning display"></p>

<p>If the box does not appear in that location, it might be because:</p>

<ul>
  <li>You are not publishing the topic at this time</li>
  <li>The message hasn’t been published in the last 2 seconds.</li>
  <li>You did not properly set the topic in RViz.</li>
</ul>

<h2 id="its-nice-to-have-options">It’s Nice to Have Options.</h2>

<p>If you want to allow users to customize different properties of the visualization, you need to add <a href="https://github.com/ros2/rviz/tree/ros2/rviz_common/include/rviz_common/properties"><code class="language-plaintext highlighter-rouge">rviz_common::Property</code> objects</a>.</p>

<p>You can view the full version of this step with the branch name <code class="language-plaintext highlighter-rouge">step3</code>.</p>

<h3 id="header-updates">Header Updates</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">#include &lt;rviz_common/properties/color_property.hpp&gt;</code> Color is but one of many properties you can set.</li>
  <li>```c++
   private Q_SLOTS:
 void updateStyle();</li>
</ul>

<p>``` This gets called whenever the gui is changed, via Qt’s SLOT/SIGNAL framework.</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">std::unique_ptr&lt;rviz_common::properties::ColorProperty&gt; color_property_;</code> The property itself.</li>
</ul>

<h3 id="cpp-updates">Cpp Updates</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">#include &lt;rviz_common/properties/parse_color.hpp&gt;</code> - Contains helper function to convert property to OGRE color.</li>
  <li>To our <code class="language-plaintext highlighter-rouge">onInitialize</code> we add</li>
</ul>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">color_property_</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">rviz_common</span><span class="o">::</span><span class="n">properties</span><span class="o">::</span><span class="n">ColorProperty</span><span class="o">&gt;</span><span class="p">(</span>
        <span class="s">"Point Color"</span><span class="p">,</span> <span class="n">QColor</span><span class="p">(</span><span class="mi">36</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">142</span><span class="p">),</span> <span class="s">"Color to draw the point."</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="n">updateStyle</span><span class="p">()));</span>
    <span class="n">updateStyle</span><span class="p">();</span>
   
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* This constructs the object with its name, default value, description and the callback.
* We call `updateStyle` directly so that the color is set at the beginning even before the property is changed.  * Then we define the callback.
</code></pre></div></div>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kt">void</span> <span class="n">PointDisplay</span><span class="o">::</span><span class="n">updateStyle</span><span class="p">()</span>
    <span class="p">{</span>
      <span class="n">Ogre</span><span class="o">::</span><span class="n">ColourValue</span> <span class="n">color</span> <span class="o">=</span> <span class="n">rviz_common</span><span class="o">::</span><span class="n">properties</span><span class="o">::</span><span class="n">qtToOgre</span><span class="p">(</span><span class="n">color_property_</span><span class="o">-&gt;</span><span class="n">getColor</span><span class="p">());</span>
      <span class="n">point_shape_</span><span class="o">-&gt;</span><span class="n">setColor</span><span class="p">(</span><span class="n">color</span><span class="p">);</span>
    <span class="p">}</span>
   
</code></pre></div></div>

<p>The result should look like this:
<img src="https://raw.githubusercontent.com/metrorobots/rviz_plugin_tutorial/main/doc/Step3A.png" alt="screenshot with color property"></p>

<p>Ooh, pink!
<img src="https://raw.githubusercontent.com/metrorobots/rviz_plugin_tutorial/main/doc/Step3B.png" alt="screenshot with changed color"></p>

<h2 id="status-report">Status Report</h2>
<p>You can view the full version of this step with the branch name <code class="language-plaintext highlighter-rouge">step4</code>.</p>

<p>You can also set the status of the display. As an arbitrary example, let’s make our display show a warning when the x coordinate is negative, because why not? In <code class="language-plaintext highlighter-rouge">processMessage</code>:</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">if</span> <span class="p">(</span><span class="n">msg</span><span class="o">-&gt;</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">setStatus</span><span class="p">(</span><span class="n">StatusProperty</span><span class="o">::</span><span class="n">Warn</span><span class="p">,</span> <span class="s">"Message"</span><span class="p">,</span>
        <span class="s">"I will complain about points with negative x values."</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">setStatus</span><span class="p">(</span><span class="n">StatusProperty</span><span class="o">::</span><span class="n">Ok</span><span class="p">,</span> <span class="s">"Message"</span><span class="p">,</span> <span class="s">"OK"</span><span class="p">);</span>
  <span class="p">}</span>

</code></pre></div></div>

<ul>
  <li>We’re assuming a previous <code class="language-plaintext highlighter-rouge">using rviz_common::properties::StatusProperty;</code> declaration.</li>
  <li>Think of the status as Key/Value pairs, with the key being some string (here we’re using <code class="language-plaintext highlighter-rouge">"Message"</code>) and the values are the status level (error/warn/ok) and the description (some other string).</li>
</ul>

<p><img src="https://raw.githubusercontent.com/metrorobots/rviz_plugin_tutorial/main/doc/Step4A.png" alt="screenshot with ok status"></p>

<p><img src="https://raw.githubusercontent.com/metrorobots/rviz_plugin_tutorial/main/doc/Step4B.png" alt="screenshot with warning status"></p>

<h2 id="cleanup">Cleanup</h2>
<p>Now its time to clean it up a bit. This makes things look nicer and be a little easier to use, but aren’t strictly required. You can view the full version of this step with the branch name <code class="language-plaintext highlighter-rouge">step5</code>.</p>

<p>First, we update the plugin declaration.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;library</span> <span class="na">path=</span><span class="s">"point_display"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">"Point2D"</span> <span class="na">type=</span><span class="s">"rviz_plugin_tutorial::PointDisplay"</span> <span class="na">base_class_type=</span><span class="s">"rviz_common::Display"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;description&gt;</span>Tutorial to display a point<span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;message_type&gt;</span>rviz_plugin_tutorial_msgs/msg/Point2D<span class="nt">&lt;/message_type&gt;</span>
  <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/library&gt;</span>

</code></pre></div></div>
<ul>
  <li>We add the <code class="language-plaintext highlighter-rouge">name</code> field to the <code class="language-plaintext highlighter-rouge">class</code> tag. This changes the name that is displayed in RViz. In code, it makes sense to call it a <code class="language-plaintext highlighter-rouge">PointDisplay</code> but in RViz, we want to simplify.</li>
  <li>We put actual text into the description. Don’t be lazy.</li>
  <li>By declaring the specific message type here, when you attempt to add a Display by Topic, it will suggest this plugin for the topics of that type.</li>
</ul>

<p>We also add an icon for the plugin at <code class="language-plaintext highlighter-rouge">icons/classes/Point2D.png</code>. The folder is hardcoded, and the filename should match the name from the plugin declaration (or the name of the class if not specified). <a href="https://commons.wikimedia.org/wiki/File:Free_software_icon.svg">[icon source]</a></p>

<p>We need to install the image file in the CMake.</p>

<div class="language-cmake highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">install</span><span class="p">(</span>FILES icons/classes/Point2D.png
        DESTINATION share/<span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>/icons/classes
<span class="p">)</span>

</code></pre></div></div>

<p>Now when you add the display, it should show up with an icon and description.</p>

<p><img src="https://raw.githubusercontent.com/metrorobots/rviz_plugin_tutorial/main/doc/Step5A.png" alt="screenshot with added icon and description"></p>

<p>Here is the display when attempting to add by topic:</p>

<p><img src="https://raw.githubusercontent.com/metrorobots/rviz_plugin_tutorial/main/doc/Step5B.png" alt="screenshot with add by topic dialog"></p>

<p>And finally, here’s the icon in the standard interface:</p>

<p><img src="https://raw.githubusercontent.com/metrorobots/rviz_plugin_tutorial/main/doc/Step5C.png" alt="screenshot with icon in standard interface"></p>

<p>Note, if you change the plugins name, previous RViz configurations will no longer work.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rviz_plugin_tutorial">rviz_plugin_tutorial</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-metrorobots-rviz_plugin_tutorial
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-metrorobots-rviz_plugin_tutorial" role="menuitem" tabindex="-1" href="/r/rviz_plugin_tutorial/github-metrorobots-rviz_plugin_tutorial" data="github-metrorobots-rviz_plugin_tutorial">
                    <span class="glyphicon glyphicon-star"></span>
                    github-metrorobots-rviz_plugin_tutorial
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rviz_plugin_tutorial">rviz_plugin_tutorial</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-metrorobots-rviz_plugin_tutorial
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-metrorobots-rviz_plugin_tutorial" role="menuitem" tabindex="-1" href="/r/rviz_plugin_tutorial/github-metrorobots-rviz_plugin_tutorial" data="github-metrorobots-rviz_plugin_tutorial">
                    <span class="glyphicon glyphicon-star"></span>
                    github-metrorobots-rviz_plugin_tutorial
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rviz_plugin_tutorial">rviz_plugin_tutorial</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-metrorobots-rviz_plugin_tutorial
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-metrorobots-rviz_plugin_tutorial" role="menuitem" tabindex="-1" href="/r/rviz_plugin_tutorial/github-metrorobots-rviz_plugin_tutorial" data="github-metrorobots-rviz_plugin_tutorial">
                    <span class="glyphicon glyphicon-star"></span>
                    github-metrorobots-rviz_plugin_tutorial
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>iron</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/rviz_plugin_tutorial">rviz_plugin_tutorial</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-metrorobots-rviz_plugin_tutorial
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-metrorobots-rviz_plugin_tutorial" role="menuitem" tabindex="-1" href="/r/rviz_plugin_tutorial/github-metrorobots-rviz_plugin_tutorial" data="github-metrorobots-rviz_plugin_tutorial">
                    <span class="glyphicon glyphicon-star"></span>
                    github-metrorobots-rviz_plugin_tutorial
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/metrorobots/rviz_plugin_tutorial.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
