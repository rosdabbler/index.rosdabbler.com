<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/vda5050_connector/github-tum-fml-ros_vda5050_connector/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">vda5050_connector</li>
        <!--<li class="active">vda5050_connector</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-default" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-default" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-default" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-default" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-default" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-primary" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class="disabled older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class=" older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/vda5050_connector">vda5050_connector</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tum-fml-ros_vda5050_connector
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tum-fml-ros_vda5050_connector" role="menuitem" tabindex="-1" href="/r/vda5050_connector/github-tum-fml-ros_vda5050_connector" data="github-tum-fml-ros_vda5050_connector">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tum-fml-ros_vda5050_connector
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>humble</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/vda5050_connector">vda5050_connector</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tum-fml-ros_vda5050_connector
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tum-fml-ros_vda5050_connector" role="menuitem" tabindex="-1" href="/r/vda5050_connector/github-tum-fml-ros_vda5050_connector" data="github-tum-fml-ros_vda5050_connector">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tum-fml-ros_vda5050_connector
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jazzy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/vda5050_connector">vda5050_connector</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tum-fml-ros_vda5050_connector
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tum-fml-ros_vda5050_connector" role="menuitem" tabindex="-1" href="/r/vda5050_connector/github-tum-fml-ros_vda5050_connector" data="github-tum-fml-ros_vda5050_connector">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tum-fml-ros_vda5050_connector
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>kilted</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/vda5050_connector">vda5050_connector</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tum-fml-ros_vda5050_connector
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tum-fml-ros_vda5050_connector" role="menuitem" tabindex="-1" href="/r/vda5050_connector/github-tum-fml-ros_vda5050_connector" data="github-tum-fml-ros_vda5050_connector">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tum-fml-ros_vda5050_connector
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>rolling</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/vda5050_connector">vda5050_connector</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tum-fml-ros_vda5050_connector
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tum-fml-ros_vda5050_connector" role="menuitem" tabindex="-1" href="/r/vda5050_connector/github-tum-fml-ros_vda5050_connector" data="github-tum-fml-ros_vda5050_connector">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tum-fml-ros_vda5050_connector
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>github</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/vda5050_connector">vda5050_connector</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/vda5050_connector">vda5050_connector</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tum-fml-ros_vda5050_connector
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tum-fml-ros_vda5050_connector" role="menuitem" tabindex="-1" href="/r/vda5050_connector/github-tum-fml-ros_vda5050_connector" data="github-tum-fml-ros_vda5050_connector">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tum-fml-ros_vda5050_connector
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/tum-fml/ros_vda5050_connector.git">https://github.com/tum-fml/ros_vda5050_connector.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">current_ros_noetic</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2022-12-20
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/vda5050_connector/#noetic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/vda5050_connector/#noetic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/vda5050_connector/#noetic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/vda5050_connector">vda5050_connector</a></td>
                    <td>0.0.1</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="how-to-use-the-vda-5050-connector">How to Use the VDA-5050-Connector</h1>

<h2 id="aim-of-the-repository">Aim of the Repository</h2>

<p>The idea of the repository is to ensure an easy connection of the VDA 5050 with ROS.
It is intended to ensure an immediate integration into ROS.
For ease of use, you can customize all interfaces by adapting the configuration files in the /config folder to match your requirements.</p>

<p>The VDA5050 connector only covers ROS communication, which means that all messages coming from the main control must be published to ROS topics. Since MQTT is widely used to communicate from the main control to AGVs, an example implementation to achieve compatibility between ROS and MQTT is shown below.</p>

<p><img src="https://user-images.githubusercontent.com/44091826/190145636-37ef04e3-d28b-42da-961d-d2e8e919df73.png" width="500"></p>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
  <li>This project was tested under Ubuntu 18.04 LTS + ROS Melodic (Python 2.7) and Ubuntu 20.04 LTS + ROS Noetic (Python 3.7).</li>
  <li>ROS must be installed and a workspace (e.g., <code class="language-plaintext highlighter-rouge">catkin_ws</code>) must be initialized.</li>
</ul>

<p>Since the VDA5050 connector solely relies on ROS communication, any other communication protocol must be translated accordingly.
VDA5050 specifies the use of MQTT as it is widely used for communication between the main control and AGVs. In the following we will describe a method for translating MQTT messages to ROS messages.
For this, we use the <a href="http://wiki.ros.org/mqtt_bridge">ROS MQTT bridge</a> to connect to a server via TLS.
Of course, any other solution can be used as well. Names of outgoing and incoming topics can be adapted accordingly.</p>

<h2 id="installation-of-the-ros-mqtt-bridge">Installation of the ROS MQTT bridge</h2>

<p>Clone the <code class="language-plaintext highlighter-rouge">mqtt_bridge</code> repository and install the additional requirements to run the bridge (see <a href="https://github.com/groove-x/mqtt_bridge#prerequisites">https://github.com/groove-x/mqtt_bridge#prerequisites</a>).</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">git clone https://github.com/groove-x/mqtt_bridge.git

</span></code></pre></div></div>

<blockquote>
  <p><strong>NOTE</strong><br>
Be careful to choose the correct branch. If you plan to use ROS melodic, checkout the branch called “python2.7”.<br>
The master branch will only work with ROS noetic.</p>
</blockquote>

<h2 id="installation-of-the-vda5050-connector">Installation of the VDA5050 connector</h2>

<p>Go to your catkin workspace and cd into the src folder:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ./src

</code></pre></div></div>

<p>Clone the <code class="language-plaintext highlighter-rouge">VDA-5050-Connector</code> repository:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/idealworks/VDA-5050-Connector.git

</code></pre></div></div>

<p>Clone the <code class="language-plaintext highlighter-rouge">vda5050_msgs</code> repository:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/ipa320/vda5050_msgs.git

</code></pre></div></div>

<blockquote>
  <p><strong>NOTE</strong><br>
Although the <code class="language-plaintext highlighter-rouge">vda5050_msgs</code> repository provides most of the required message types, some additional message types must be defined in order to provide the full functionality of VDA5050.<br>
Since we have not send a merge request to the vda5050_msgs repository yet, do the following after cloning the vda5050_msgs repository:</p>

  <ul>
    <li>
      <p>copy all .msg files in /msg of the <code class="language-plaintext highlighter-rouge">VDA-5050-Connector</code> repository into the /msg folder of the <code class="language-plaintext highlighter-rouge">vda5050_msgs</code> repository</p>
    </li>
    <li>
      <p>replace the CmakeLists.txt in the <code class="language-plaintext highlighter-rouge">vda5050_msgs</code> repository with the one within the /msg/CmakeLists of the <code class="language-plaintext highlighter-rouge">VDA-5050-Connector</code> repository</p>
    </li>
  </ul>
</blockquote>

<p>After cloning all required repositories, build your catkin workspace.</p>

<h2 id="customization-of-the-configuration">Customization of the configuration</h2>

<p>There are three distinct parts of the configuration that must be customized to fulfill your connection requirements.</p>

<ol>
  <li>ROS MQTT bridge server connection (“mqtt_bridge_tls.yaml”)</li>
  <li>ROS MQTT bridge topic configuration (“mqtt_bridge_topics.yaml”)</li>
  <li>VDA5050 connector topic configuration (“vda5050_connector_topics.yaml”)</li>
</ol>

<p>Each of them is represented by a single configuration file in the /config folder.
In the following sections we will go through them step by step.</p>

<blockquote>
  <p><strong>NOTE</strong><br>
Since we wanted to use the ROS MQTT bridge out of the box with no further customization,<br>
all required parameters configuration files can be found in the /config folder in the <code class="language-plaintext highlighter-rouge">VDA-5050-Connector</code> repository (and not in the <code class="language-plaintext highlighter-rouge">mqtt_bridge</code> repository).</p>
</blockquote>

<h3 id="ros-mqtt-bridge-server-connection">ROS MQTT bridge server connection</h3>

<p>To make the ROS MQTT bridge work with TLS, complete the “mqtt_bridge_tls.yaml” configuration file in the /config folder.</p>

<details>

<summary>TLS configuration</summary>

```text
tls:
  ca_certs: <path_to_your_root_certificate>
  certfile: <path_to_your_key_certificate>
  keyfile: &lt;your_path_to_private_key"
  tls_version: 5
  tls_insecure: false
connection:
  host: <your_hostname>
  port: 8883
  keepalive: 60
client:
  protocol: 4
  client_id: <your_client_id>

```

&lt;/details&gt;

Specifically, add the paths to the required certificates and the private key and enter your host address as well as your client id. Do not forget to use the correct port in your network.

### ROS MQTT bridge topic configuration

Use the file "mqtt_bridge_topics.yaml" to adapt topic names and message types according to your needs.\
Make sure to use ROS and MQTT topic names at the correct position in the configuration.

<details>

<summary>Topic example</summary>


```text
##### bridge from ROS to MQTT#####
topic_from: <ros topic="">
topic to: <mqtt topic="">

##### bridge from MQTT to ROS #####
topic_from: <mqtt topic="">
topic to: <ros topic="">


```

&lt;/details&gt;


```msg_type
``` always describes the ROS message type.

After configuring the ROS MQTT bridge, we can go on with the VDA5050-Connector.

### VDA5050 connector topic configuration

<img src="https://user-images.githubusercontent.com/44091826/190145851-21905821-ce19-40af-8b82-f1853193f7fe.png" width="500">

The VDA5050 connector consists of five different daemons each represented by a single ROS node.
In order to allow easy access to the topics, you can change all subscribing (from master control and AGV) and publishing (to master control and AGV) topic names.

To do so, open the "vda5050_connector_topics.yaml" in the /config folder and change the topic names to fit your requirements.

&gt;**NOTE**\
&gt;Don't change the key. Only change the value.\
&gt;Example:
&gt;
```yaml
&gt;orderId: "/orderID"
&gt;
```
&gt;
```orderId
``` is used for internal reference and must not be altered. To change the topic's name, change the value on the right 
```"/orderId"
```.

## Run the connector

### Launch the ROS MQTT bridge

Before starting the VDA5050 connector, the ROS MQTT bridge must be up and running.
To this end, open a terminal and launch the ROS MQTT bridge:


```bash
roslaunch vda5050_connector ros_mqtt_bridge.launch

```

The output should be similar to the following:

<details>

<summary>ROS MQTT bridge output</summary>


```console

started roslaunch server http://<your_server>

SUMMARY
========

PARAMETERS
 * /mqtt_bridge/bridge: [{'topic_from': '...
 * /mqtt_bridge/mqtt/client/client_id: <your_id>
 * /mqtt_bridge/mqtt/client/protocol: 4
 * /mqtt_bridge/mqtt/connection/host: <your_hostname>
 * /mqtt_bridge/mqtt/connection/keepalive: 60
 * /mqtt_bridge/mqtt/connection/port: 8883
 * /mqtt_bridge/mqtt/tls/ca_certs: <your_root_path>
 * /mqtt_bridge/mqtt/tls/certfile: <your_cert_path>
 * /mqtt_bridge/mqtt/tls/keyfile: <your_private_keyfile_path>
 * /mqtt_bridge/mqtt/tls/tls_insecure: False
 * /mqtt_bridge/mqtt/tls/tls_version: 5
 * /rosdistro: melodic
 * /rosversion: 1.14.12

NODES
  /
    mqtt_bridge (mqtt_bridge/mqtt_bridge_node.py)

auto-starting new master
process[master]: started with pid [23084]
ROS_MASTER_URI=http://localhost:11311

setting /run_id to cd2855b8-fd29-11ec-bfbb-080027dacaf0
process[rosout-1]: started with pid [23095]
started core service [/rosout]
process[mqtt_bridge-2]: started with pid [23098]
[INFO] [1657111653.836246]: MQTT connected

```

&lt;/details&gt;

&gt;**NOTE**\
&gt;The ROS MQTT bridge tells if it is connected to the server by printing 
```MQTT connected
``` as last line. If anything went wrong, it prints 
```MQTT disconnected
```

### Launch the VDA5050 connector

As soon as the ROS MQTT bridge is connected to the server, the VDA5050 connector can be launched.
Open a new terminal and type:


```bash
roslaunch vda_5050_connector vda5050_connector.launch

```

If the VDA5050 connector was started properly, the output should be similar to:

<details>

<summary>VDA5050 connector output</summary>


```console
[ INFO] [1656490735.862272168]: Using 1.1.03 for parameter ~AGV_Data/version
[ INFO] [1656490735.863479005]: Using template_1 for parameter ~AGV_Data/manufacturer
[ INFO] [1656490735.864071660]: Using AGV721 for parameter ~AGV_Data/serialNumber
[ INFO] [1656490735.865060948]: Using /error_1 as error topic
[ INFO] [1656490735.866858541]: for connection_daemon/topics_publish use:
[ INFO] [1656490735.868006928]: for connection_daemon/topics_subscribe use:
[ INFO] [1656490735.868029030]:     - parameter: /supervisor/connection_daemon/topics_subscribe/connectionState value: /connected
[ INFO] [1656490735.868595221]: Using uagv for parameter ~AGV_Data/interfaceName
[ INFO] [1656490735.869125729]: Using v2 for parameter ~AGV_Data/majorVersion
[ INFO] [1656490735.869653581]: Using /connected for parameter ~connection_daemon/topics_subscribe/connectionState
[ INFO] [1656490735.872009204]: Using 1.1.03 for parameter ~AGV_Data/version
[ INFO] [1656490735.872491504]: Using template_1 for parameter ~AGV_Data/manufacturer
[ INFO] [1656490735.872921588]: Using AGV721 for parameter ~AGV_Data/serialNumber
[ INFO] [1656490735.873329962]: Using /error_1 as error topic
[ INFO] [1656490735.874538560]: for state_daemon/topics_publish use:
[ INFO] [1656490735.874560377]:     - parameter: /supervisor/state_daemon/topics_publish/state value: /state
[ INFO] [1656490735.893055466]: for state_daemon/topics_subscribe use:
[ INFO] [1656490735.893084950]:     - parameter: /supervisor/state_daemon/topics_subscribe/actionStates value: /actionStates
[ INFO] [1656490735.893092672]:     - parameter: /supervisor/state_daemon/topics_subscribe/agvPosition/deviationRange value: /deviationRange
[ INFO] [1656490735.893108816]:     - parameter: /supervisor/state_daemon/topics_subscribe/agvPosition/localizationScore value: /localizationScore
[ INFO] [1656490735.893114964]:     - parameter: /supervisor/state_daemon/topics_subscribe/agvPosition/mapDescription value: /mapDescription
[ INFO] [1656490735.893126128]:     - parameter: /supervisor/state_daemon/topics_subscribe/agvPosition/mapId value: /mapId
[ INFO] [1656490735.893138406]:     - parameter: /supervisor/state_daemon/topics_subscribe/agvPosition/pose value: /odometry
[ INFO] [1656490735.893146836]:     - parameter: /supervisor/state_daemon/topics_subscribe/agvPosition/positionInitialized value: /positionInitialized
[ INFO] [1656490735.893154395]:     - parameter: /supervisor/state_daemon/topics_subscribe/batteryState/batteryCharge value: /batteryCharge
[ INFO] [1656490735.893162173]:     - parameter: /supervisor/state_daemon/topics_subscribe/batteryState/batteryHealth value: /batteryHealth
[ INFO] [1656490735.893169512]:     - parameter: /supervisor/state_daemon/topics_subscribe/batteryState/batteryVoltage value: /batteryVoltage
[ INFO] [1656490735.893177634]:     - parameter: /supervisor/state_daemon/topics_subscribe/batteryState/charging value: /charging
[ INFO] [1656490735.893185112]:     - parameter: /supervisor/state_daemon/topics_subscribe/batteryState/reach value: /reach
[ INFO] [1656490735.893192605]:     - parameter: /supervisor/state_daemon/topics_subscribe/distanceSinceLastNode value: /distanceSinceLastNode
[ INFO] [1656490735.893200330]:     - parameter: /supervisor/state_daemon/topics_subscribe/driving value: /driving
[ INFO] [1656490735.893207638]:     - parameter: /supervisor/state_daemon/topics_subscribe/edgeStates value: /edgeState
[ INFO] [1656490735.893216187]:     - parameter: /supervisor/state_daemon/topics_subscribe/errors value: /errors
[ INFO] [1656490735.893224128]:     - parameter: /supervisor/state_daemon/topics_subscribe/information value: /information
[ INFO] [1656490735.893231756]:     - parameter: /supervisor/state_daemon/topics_subscribe/lastNodeId value: /lastNodeId
[ INFO] [1656490735.893239590]:     - parameter: /supervisor/state_daemon/topics_subscribe/lastNodeSequenceId value: /lastNodeSequenceId
[ INFO] [1656490735.893246911]:     - parameter: /supervisor/state_daemon/topics_subscribe/loads value: /loads
[ INFO] [1656490735.893255322]:     - parameter: /supervisor/state_daemon/topics_subscribe/newBaseRequest value: /newBaseRequest
[ INFO] [1656490735.893262908]:     - parameter: /supervisor/state_daemon/topics_subscribe/nodeStates value: /nodeState
[ INFO] [1656490735.893272540]:     - parameter: /supervisor/state_daemon/topics_subscribe/operatingMode value: /operatingMode
[ INFO] [1656490735.893280114]:     - parameter: /supervisor/state_daemon/topics_subscribe/orderId value: /orderId
[ INFO] [1656490735.893287369]:     - parameter: /supervisor/state_daemon/topics_subscribe/orderUpdateId value: /orderUpdateId
[ INFO] [1656490735.893296333]:     - parameter: /supervisor/state_daemon/topics_subscribe/paused value: /paused
[ INFO] [1656490735.893304115]:     - parameter: /supervisor/state_daemon/topics_subscribe/safetyState/eStop value: /eStop
[ INFO] [1656490735.893311934]:     - parameter: /supervisor/state_daemon/topics_subscribe/safetyState/fieldViolation value: /fieldViolation
[ INFO] [1656490735.893320184]:     - parameter: /supervisor/state_daemon/topics_subscribe/velocity value: /rosVelocity
[ INFO] [1656490735.893327443]:     - parameter: /supervisor/state_daemon/topics_subscribe/zoneSetId value: /zoneSetId
[ INFO] [1656490735.893811918]: Using uagv for parameter ~AGV_Data/interfaceName
[ INFO] [1656490735.894266591]: Using v2 for parameter ~AGV_Data/majorVersion

```

</details>

The output gives an overview of all parameters read from the config file. Check if the topics are defined as required.
If any parameters are not readable or not found on the parameter server, there is a warning output. Please check if there is a typo in your config file.

## Known Issues

* Currently, the console output is done twice for some parameters due to the architecture.
* Sometimes the MQTT-Bridge cannot connect properly. If the output constantly changes between connected and disconnected, there is probably an error in the network configuration.


```console
   [INFO] [1657111653.836246]: MQTT disconnected
   [INFO] [1657111653.836246]: MQTT connected
   [INFO] [1657111653.836246]: MQTT disconnected
   [INFO] [1657111653.836246]: MQTT connected

```

## Comments on VDA 5050 specification
### Assumptions in unclear situations
**Situation:** Vehicle is processing an order and receives a new one (= differing order ID).

**Our Solution:** The new order is rejected if it doesn't begin at the end of the base of the previous (= currently running) order.

**Alternative:** The new order could be accepted if it begins at the end of the horizon of the previous order. Would lead to potential detours if the destination of the current order changes in the meantime.


**Situation:** The order message definition in the vda_msgs repository contains a boolean field called "replace". According to the commentary, this should be used if the base of an order is to be replaced by a new set of nodes/edges. However, the guideline does not define this procedure.

**Our Solution:** We do not implement the base replacement procedure. **TODO:** Throw a warning if the flag is set.

**Alternative:** A replacement procedure could be added to the routine of receiving a message on the order topic. See the according documentation and flow diagrams.


**Situation:** A new order is received. The guideline tells us to "validate" the order, but does not state how to achieve this.

**Our Solution:** We postpone the implementation of validations and expect the fleet controller to send conform order messages.

**Alternative:** Order messages should be validated to avoid undeterministic behavior, waiting and errors. The validation should at least check if the number of edges equals the number of nodes minus one.


## About

The ROS-VDA-5050-Connector was developed by idealworks in cooperation with [TUM fml – future.meets.logistics](https://www.linkedin.com/company/tum-fml/).
</your_private_keyfile_path></your_cert_path></your_root_path></your_hostname></your_id></your_server></details></ros></mqtt></mqtt></ros></details></your_client_id></your_hostname></path_to_your_key_certificate></path_to_your_root_certificate></details>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/vda5050_connector">vda5050_connector</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tum-fml-ros_vda5050_connector
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tum-fml-ros_vda5050_connector" role="menuitem" tabindex="-1" href="/r/vda5050_connector/github-tum-fml-ros_vda5050_connector" data="github-tum-fml-ros_vda5050_connector">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tum-fml-ros_vda5050_connector
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/vda5050_connector">vda5050_connector</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tum-fml-ros_vda5050_connector
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tum-fml-ros_vda5050_connector" role="menuitem" tabindex="-1" href="/r/vda5050_connector/github-tum-fml-ros_vda5050_connector" data="github-tum-fml-ros_vda5050_connector">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tum-fml-ros_vda5050_connector
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>iron</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/vda5050_connector">vda5050_connector</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/vda5050_connector">vda5050_connector</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tum-fml-ros_vda5050_connector
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tum-fml-ros_vda5050_connector" role="menuitem" tabindex="-1" href="/r/vda5050_connector/github-tum-fml-ros_vda5050_connector" data="github-tum-fml-ros_vda5050_connector">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tum-fml-ros_vda5050_connector
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/tum-fml/ros_vda5050_connector.git">https://github.com/tum-fml/ros_vda5050_connector.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">current_ros_melodic</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2022-12-20
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/vda5050_connector/#melodic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/vda5050_connector/#melodic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/vda5050_connector/#melodic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/vda5050_connector">vda5050_connector</a></td>
                    <td>0.0.1</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="how-to-use-the-vda-5050-connector">How to Use the VDA-5050-Connector</h1>

<h2 id="aim-of-the-repository">Aim of the Repository</h2>

<p>The idea of the repository is to ensure an easy connection of the VDA 5050 with ROS.
It is intended to ensure an immediate integration into ROS.
For ease of use, you can customize all interfaces by adapting the configuration files in the /config folder to match your requirements.</p>

<p>The VDA5050 connector only covers ROS communication, which means that all messages coming from the main control must be published to ROS topics. Since MQTT is widely used to communicate from the main control to AGVs, an example implementation to achieve compatibility between ROS and MQTT is shown below.</p>

<p><img src="https://user-images.githubusercontent.com/44091826/190145636-37ef04e3-d28b-42da-961d-d2e8e919df73.png" width="500"></p>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
  <li>This project was tested under Ubuntu 18.04 LTS + ROS Melodic (Python 2.7) and Ubuntu 20.04 LTS + ROS Noetic (Python 3.7).</li>
  <li>ROS must be installed and a workspace (e.g., <code class="language-plaintext highlighter-rouge">catkin_ws</code>) must be initialized.</li>
</ul>

<p>Since the VDA5050 connector solely relies on ROS communication, any other communication protocol must be translated accordingly.
VDA5050 specifies the use of MQTT as it is widely used for communication between the main control and AGVs. In the following we will describe a method for translating MQTT messages to ROS messages.
For this, we use the <a href="http://wiki.ros.org/mqtt_bridge">ROS MQTT bridge</a> to connect to a server via TLS.
Of course, any other solution can be used as well. Names of outgoing and incoming topics can be adapted accordingly.</p>

<h2 id="installation-of-the-ros-mqtt-bridge">Installation of the ROS MQTT bridge</h2>

<p>Clone the <code class="language-plaintext highlighter-rouge">mqtt_bridge</code> repository and install the additional requirements to run the bridge (see <a href="https://github.com/groove-x/mqtt_bridge#prerequisites">https://github.com/groove-x/mqtt_bridge#prerequisites</a>).</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">git clone https://github.com/groove-x/mqtt_bridge.git

</span></code></pre></div></div>

<blockquote>
  <p><strong>NOTE</strong><br>
Be careful to choose the correct branch. If you plan to use ROS melodic, checkout the branch called “python2.7”.<br>
The master branch will only work with ROS noetic.</p>
</blockquote>

<h2 id="installation-of-the-vda5050-connector">Installation of the VDA5050 connector</h2>

<p>Go to your catkin workspace and cd into the src folder:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ./src

</code></pre></div></div>

<p>Clone the <code class="language-plaintext highlighter-rouge">VDA-5050-Connector</code> repository:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/idealworks/VDA-5050-Connector.git

</code></pre></div></div>

<p>Clone the <code class="language-plaintext highlighter-rouge">vda5050_msgs</code> repository:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/ipa320/vda5050_msgs.git

</code></pre></div></div>

<blockquote>
  <p><strong>NOTE</strong><br>
Although the <code class="language-plaintext highlighter-rouge">vda5050_msgs</code> repository provides most of the required message types, some additional message types must be defined in order to provide the full functionality of VDA5050.<br>
Since we have not send a merge request to the vda5050_msgs repository yet, do the following after cloning the vda5050_msgs repository:</p>

  <ul>
    <li>
      <p>copy all .msg files in /msg of the <code class="language-plaintext highlighter-rouge">VDA-5050-Connector</code> repository into the /msg folder of the <code class="language-plaintext highlighter-rouge">vda5050_msgs</code> repository</p>
    </li>
    <li>
      <p>replace the CmakeLists.txt in the <code class="language-plaintext highlighter-rouge">vda5050_msgs</code> repository with the one within the /msg/CmakeLists of the <code class="language-plaintext highlighter-rouge">VDA-5050-Connector</code> repository</p>
    </li>
  </ul>
</blockquote>

<p>After cloning all required repositories, build your catkin workspace.</p>

<h2 id="customization-of-the-configuration">Customization of the configuration</h2>

<p>There are three distinct parts of the configuration that must be customized to fulfill your connection requirements.</p>

<ol>
  <li>ROS MQTT bridge server connection (“mqtt_bridge_tls.yaml”)</li>
  <li>ROS MQTT bridge topic configuration (“mqtt_bridge_topics.yaml”)</li>
  <li>VDA5050 connector topic configuration (“vda5050_connector_topics.yaml”)</li>
</ol>

<p>Each of them is represented by a single configuration file in the /config folder.
In the following sections we will go through them step by step.</p>

<blockquote>
  <p><strong>NOTE</strong><br>
Since we wanted to use the ROS MQTT bridge out of the box with no further customization,<br>
all required parameters configuration files can be found in the /config folder in the <code class="language-plaintext highlighter-rouge">VDA-5050-Connector</code> repository (and not in the <code class="language-plaintext highlighter-rouge">mqtt_bridge</code> repository).</p>
</blockquote>

<h3 id="ros-mqtt-bridge-server-connection">ROS MQTT bridge server connection</h3>

<p>To make the ROS MQTT bridge work with TLS, complete the “mqtt_bridge_tls.yaml” configuration file in the /config folder.</p>

<details>

<summary>TLS configuration</summary>

```text
tls:
  ca_certs: <path_to_your_root_certificate>
  certfile: <path_to_your_key_certificate>
  keyfile: &lt;your_path_to_private_key"
  tls_version: 5
  tls_insecure: false
connection:
  host: <your_hostname>
  port: 8883
  keepalive: 60
client:
  protocol: 4
  client_id: <your_client_id>

```

&lt;/details&gt;

Specifically, add the paths to the required certificates and the private key and enter your host address as well as your client id. Do not forget to use the correct port in your network.

### ROS MQTT bridge topic configuration

Use the file "mqtt_bridge_topics.yaml" to adapt topic names and message types according to your needs.\
Make sure to use ROS and MQTT topic names at the correct position in the configuration.

<details>

<summary>Topic example</summary>


```text
##### bridge from ROS to MQTT#####
topic_from: <ros topic="">
topic to: <mqtt topic="">

##### bridge from MQTT to ROS #####
topic_from: <mqtt topic="">
topic to: <ros topic="">


```

&lt;/details&gt;


```msg_type
``` always describes the ROS message type.

After configuring the ROS MQTT bridge, we can go on with the VDA5050-Connector.

### VDA5050 connector topic configuration

<img src="https://user-images.githubusercontent.com/44091826/190145851-21905821-ce19-40af-8b82-f1853193f7fe.png" width="500">

The VDA5050 connector consists of five different daemons each represented by a single ROS node.
In order to allow easy access to the topics, you can change all subscribing (from master control and AGV) and publishing (to master control and AGV) topic names.

To do so, open the "vda5050_connector_topics.yaml" in the /config folder and change the topic names to fit your requirements.

&gt;**NOTE**\
&gt;Don't change the key. Only change the value.\
&gt;Example:
&gt;
```yaml
&gt;orderId: "/orderID"
&gt;
```
&gt;
```orderId
``` is used for internal reference and must not be altered. To change the topic's name, change the value on the right 
```"/orderId"
```.

## Run the connector

### Launch the ROS MQTT bridge

Before starting the VDA5050 connector, the ROS MQTT bridge must be up and running.
To this end, open a terminal and launch the ROS MQTT bridge:


```bash
roslaunch vda5050_connector ros_mqtt_bridge.launch

```

The output should be similar to the following:

<details>

<summary>ROS MQTT bridge output</summary>


```console

started roslaunch server http://<your_server>

SUMMARY
========

PARAMETERS
 * /mqtt_bridge/bridge: [{'topic_from': '...
 * /mqtt_bridge/mqtt/client/client_id: <your_id>
 * /mqtt_bridge/mqtt/client/protocol: 4
 * /mqtt_bridge/mqtt/connection/host: <your_hostname>
 * /mqtt_bridge/mqtt/connection/keepalive: 60
 * /mqtt_bridge/mqtt/connection/port: 8883
 * /mqtt_bridge/mqtt/tls/ca_certs: <your_root_path>
 * /mqtt_bridge/mqtt/tls/certfile: <your_cert_path>
 * /mqtt_bridge/mqtt/tls/keyfile: <your_private_keyfile_path>
 * /mqtt_bridge/mqtt/tls/tls_insecure: False
 * /mqtt_bridge/mqtt/tls/tls_version: 5
 * /rosdistro: melodic
 * /rosversion: 1.14.12

NODES
  /
    mqtt_bridge (mqtt_bridge/mqtt_bridge_node.py)

auto-starting new master
process[master]: started with pid [23084]
ROS_MASTER_URI=http://localhost:11311

setting /run_id to cd2855b8-fd29-11ec-bfbb-080027dacaf0
process[rosout-1]: started with pid [23095]
started core service [/rosout]
process[mqtt_bridge-2]: started with pid [23098]
[INFO] [1657111653.836246]: MQTT connected

```

&lt;/details&gt;

&gt;**NOTE**\
&gt;The ROS MQTT bridge tells if it is connected to the server by printing 
```MQTT connected
``` as last line. If anything went wrong, it prints 
```MQTT disconnected
```

### Launch the VDA5050 connector

As soon as the ROS MQTT bridge is connected to the server, the VDA5050 connector can be launched.
Open a new terminal and type:


```bash
roslaunch vda_5050_connector vda5050_connector.launch

```

If the VDA5050 connector was started properly, the output should be similar to:

<details>

<summary>VDA5050 connector output</summary>


```console
[ INFO] [1656490735.862272168]: Using 1.1.03 for parameter ~AGV_Data/version
[ INFO] [1656490735.863479005]: Using template_1 for parameter ~AGV_Data/manufacturer
[ INFO] [1656490735.864071660]: Using AGV721 for parameter ~AGV_Data/serialNumber
[ INFO] [1656490735.865060948]: Using /error_1 as error topic
[ INFO] [1656490735.866858541]: for connection_daemon/topics_publish use:
[ INFO] [1656490735.868006928]: for connection_daemon/topics_subscribe use:
[ INFO] [1656490735.868029030]:     - parameter: /supervisor/connection_daemon/topics_subscribe/connectionState value: /connected
[ INFO] [1656490735.868595221]: Using uagv for parameter ~AGV_Data/interfaceName
[ INFO] [1656490735.869125729]: Using v2 for parameter ~AGV_Data/majorVersion
[ INFO] [1656490735.869653581]: Using /connected for parameter ~connection_daemon/topics_subscribe/connectionState
[ INFO] [1656490735.872009204]: Using 1.1.03 for parameter ~AGV_Data/version
[ INFO] [1656490735.872491504]: Using template_1 for parameter ~AGV_Data/manufacturer
[ INFO] [1656490735.872921588]: Using AGV721 for parameter ~AGV_Data/serialNumber
[ INFO] [1656490735.873329962]: Using /error_1 as error topic
[ INFO] [1656490735.874538560]: for state_daemon/topics_publish use:
[ INFO] [1656490735.874560377]:     - parameter: /supervisor/state_daemon/topics_publish/state value: /state
[ INFO] [1656490735.893055466]: for state_daemon/topics_subscribe use:
[ INFO] [1656490735.893084950]:     - parameter: /supervisor/state_daemon/topics_subscribe/actionStates value: /actionStates
[ INFO] [1656490735.893092672]:     - parameter: /supervisor/state_daemon/topics_subscribe/agvPosition/deviationRange value: /deviationRange
[ INFO] [1656490735.893108816]:     - parameter: /supervisor/state_daemon/topics_subscribe/agvPosition/localizationScore value: /localizationScore
[ INFO] [1656490735.893114964]:     - parameter: /supervisor/state_daemon/topics_subscribe/agvPosition/mapDescription value: /mapDescription
[ INFO] [1656490735.893126128]:     - parameter: /supervisor/state_daemon/topics_subscribe/agvPosition/mapId value: /mapId
[ INFO] [1656490735.893138406]:     - parameter: /supervisor/state_daemon/topics_subscribe/agvPosition/pose value: /odometry
[ INFO] [1656490735.893146836]:     - parameter: /supervisor/state_daemon/topics_subscribe/agvPosition/positionInitialized value: /positionInitialized
[ INFO] [1656490735.893154395]:     - parameter: /supervisor/state_daemon/topics_subscribe/batteryState/batteryCharge value: /batteryCharge
[ INFO] [1656490735.893162173]:     - parameter: /supervisor/state_daemon/topics_subscribe/batteryState/batteryHealth value: /batteryHealth
[ INFO] [1656490735.893169512]:     - parameter: /supervisor/state_daemon/topics_subscribe/batteryState/batteryVoltage value: /batteryVoltage
[ INFO] [1656490735.893177634]:     - parameter: /supervisor/state_daemon/topics_subscribe/batteryState/charging value: /charging
[ INFO] [1656490735.893185112]:     - parameter: /supervisor/state_daemon/topics_subscribe/batteryState/reach value: /reach
[ INFO] [1656490735.893192605]:     - parameter: /supervisor/state_daemon/topics_subscribe/distanceSinceLastNode value: /distanceSinceLastNode
[ INFO] [1656490735.893200330]:     - parameter: /supervisor/state_daemon/topics_subscribe/driving value: /driving
[ INFO] [1656490735.893207638]:     - parameter: /supervisor/state_daemon/topics_subscribe/edgeStates value: /edgeState
[ INFO] [1656490735.893216187]:     - parameter: /supervisor/state_daemon/topics_subscribe/errors value: /errors
[ INFO] [1656490735.893224128]:     - parameter: /supervisor/state_daemon/topics_subscribe/information value: /information
[ INFO] [1656490735.893231756]:     - parameter: /supervisor/state_daemon/topics_subscribe/lastNodeId value: /lastNodeId
[ INFO] [1656490735.893239590]:     - parameter: /supervisor/state_daemon/topics_subscribe/lastNodeSequenceId value: /lastNodeSequenceId
[ INFO] [1656490735.893246911]:     - parameter: /supervisor/state_daemon/topics_subscribe/loads value: /loads
[ INFO] [1656490735.893255322]:     - parameter: /supervisor/state_daemon/topics_subscribe/newBaseRequest value: /newBaseRequest
[ INFO] [1656490735.893262908]:     - parameter: /supervisor/state_daemon/topics_subscribe/nodeStates value: /nodeState
[ INFO] [1656490735.893272540]:     - parameter: /supervisor/state_daemon/topics_subscribe/operatingMode value: /operatingMode
[ INFO] [1656490735.893280114]:     - parameter: /supervisor/state_daemon/topics_subscribe/orderId value: /orderId
[ INFO] [1656490735.893287369]:     - parameter: /supervisor/state_daemon/topics_subscribe/orderUpdateId value: /orderUpdateId
[ INFO] [1656490735.893296333]:     - parameter: /supervisor/state_daemon/topics_subscribe/paused value: /paused
[ INFO] [1656490735.893304115]:     - parameter: /supervisor/state_daemon/topics_subscribe/safetyState/eStop value: /eStop
[ INFO] [1656490735.893311934]:     - parameter: /supervisor/state_daemon/topics_subscribe/safetyState/fieldViolation value: /fieldViolation
[ INFO] [1656490735.893320184]:     - parameter: /supervisor/state_daemon/topics_subscribe/velocity value: /rosVelocity
[ INFO] [1656490735.893327443]:     - parameter: /supervisor/state_daemon/topics_subscribe/zoneSetId value: /zoneSetId
[ INFO] [1656490735.893811918]: Using uagv for parameter ~AGV_Data/interfaceName
[ INFO] [1656490735.894266591]: Using v2 for parameter ~AGV_Data/majorVersion

```

</details>

The output gives an overview of all parameters read from the config file. Check if the topics are defined as required.
If any parameters are not readable or not found on the parameter server, there is a warning output. Please check if there is a typo in your config file.

## Known Issues

* Currently, the console output is done twice for some parameters due to the architecture.
* Sometimes the MQTT-Bridge cannot connect properly. If the output constantly changes between connected and disconnected, there is probably an error in the network configuration.


```console
   [INFO] [1657111653.836246]: MQTT disconnected
   [INFO] [1657111653.836246]: MQTT connected
   [INFO] [1657111653.836246]: MQTT disconnected
   [INFO] [1657111653.836246]: MQTT connected

```

## Comments on VDA 5050 specification
### Assumptions in unclear situations
**Situation:** Vehicle is processing an order and receives a new one (= differing order ID).

**Our Solution:** The new order is rejected if it doesn't begin at the end of the base of the previous (= currently running) order.

**Alternative:** The new order could be accepted if it begins at the end of the horizon of the previous order. Would lead to potential detours if the destination of the current order changes in the meantime.


**Situation:** The order message definition in the vda_msgs repository contains a boolean field called "replace". According to the commentary, this should be used if the base of an order is to be replaced by a new set of nodes/edges. However, the guideline does not define this procedure.

**Our Solution:** We do not implement the base replacement procedure. **TODO:** Throw a warning if the flag is set.

**Alternative:** A replacement procedure could be added to the routine of receiving a message on the order topic. See the according documentation and flow diagrams.


**Situation:** A new order is received. The guideline tells us to "validate" the order, but does not state how to achieve this.

**Our Solution:** We postpone the implementation of validations and expect the fleet controller to send conform order messages.

**Alternative:** Order messages should be validated to avoid undeterministic behavior, waiting and errors. The validation should at least check if the number of edges equals the number of nodes minus one.


## About

The ROS-VDA-5050-Connector was developed by idealworks in cooperation with [TUM fml – future.meets.logistics](https://www.linkedin.com/company/tum-fml/).
</your_private_keyfile_path></your_cert_path></your_root_path></your_hostname></your_id></your_server></details></ros></mqtt></mqtt></ros></details></your_client_id></your_hostname></path_to_your_key_certificate></path_to_your_root_certificate></details>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/tum-fml/ros_vda5050_connector.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
