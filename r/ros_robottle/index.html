<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/ros_robottle/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">ros_robottle</li>
        <!--<li class="active">ros_robottle</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-default" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-default" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-default" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-default" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-primary" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class="disabled older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros_robottle">ros_robottle</a> <small>repository</small></h3>
        <span class="label label-default">robot</span> <span class="label label-default">robotics</span> <span class="label label-default">dnn</span> <span class="label label-default">ros</span> <span class="label label-default">slam</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-arthurbricq-ros_robottle
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-arthurbricq-ros_robottle" role="menuitem" tabindex="-1" href="/r/ros_robottle/github-arthurbricq-ros_robottle" data="github-arthurbricq-ros_robottle">
                    <span class="glyphicon glyphicon-star"></span>
                    github-arthurbricq-ros_robottle
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>humble</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros_robottle">ros_robottle</a> <small>repository</small></h3>
        <span class="label label-default">robot</span> <span class="label label-default">robotics</span> <span class="label label-default">dnn</span> <span class="label label-default">ros</span> <span class="label label-default">slam</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-arthurbricq-ros_robottle
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-arthurbricq-ros_robottle" role="menuitem" tabindex="-1" href="/r/ros_robottle/github-arthurbricq-ros_robottle" data="github-arthurbricq-ros_robottle">
                    <span class="glyphicon glyphicon-star"></span>
                    github-arthurbricq-ros_robottle
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jazzy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros_robottle">ros_robottle</a> <small>repository</small></h3>
        <span class="label label-default">robot</span> <span class="label label-default">robotics</span> <span class="label label-default">dnn</span> <span class="label label-default">ros</span> <span class="label label-default">slam</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-arthurbricq-ros_robottle
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-arthurbricq-ros_robottle" role="menuitem" tabindex="-1" href="/r/ros_robottle/github-arthurbricq-ros_robottle" data="github-arthurbricq-ros_robottle">
                    <span class="glyphicon glyphicon-star"></span>
                    github-arthurbricq-ros_robottle
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>kilted</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros_robottle">ros_robottle</a> <small>repository</small></h3>
        <span class="label label-default">robot</span> <span class="label label-default">robotics</span> <span class="label label-default">dnn</span> <span class="label label-default">ros</span> <span class="label label-default">slam</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-arthurbricq-ros_robottle
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-arthurbricq-ros_robottle" role="menuitem" tabindex="-1" href="/r/ros_robottle/github-arthurbricq-ros_robottle" data="github-arthurbricq-ros_robottle">
                    <span class="glyphicon glyphicon-star"></span>
                    github-arthurbricq-ros_robottle
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>rolling</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros_robottle">ros_robottle</a> <small>repository</small></h3>
        <span class="label label-default">robot</span> <span class="label label-default">robotics</span> <span class="label label-default">dnn</span> <span class="label label-default">ros</span> <span class="label label-default">slam</span> 
        
        <a class="label label-primary pkg-label" href="/p/interfaces">interfaces</a>
        
        <a class="label label-primary pkg-label" href="/p/robottle">robottle</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-arthurbricq-ros_robottle
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-arthurbricq-ros_robottle" role="menuitem" tabindex="-1" href="/r/ros_robottle/github-arthurbricq-ros_robottle" data="github-arthurbricq-ros_robottle">
                    <span class="glyphicon glyphicon-star"></span>
                    github-arthurbricq-ros_robottle
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Repo with the ROS code of the Jetson Nano</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/arthurbricq/ros_robottle.git">https://github.com/arthurbricq/ros_robottle.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2021-01-16
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNKNOWN
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">robot</span> <span class="label label-default">robotics</span> <span class="label label-default">dnn</span> <span class="label label-default">ros</span> <span class="label label-default">slam</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ros_robottle/#github-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros_robottle/#github-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros_robottle/#github-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/interfaces">interfaces</a></td>
                    <td>0.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/robottle">robottle</a></td>
                    <td>0.0.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="the-robottle-project">The Robottle Project</h1>

<p>Robottle is an autonomous Robot that is able to collect bottles in a random environment with obstacles by constructing a map of its environment using SLAM with a RPLidar, and detecting bottles using Deep Neural Network ran on the GPU of a Jetson Nano Boad.</p>

<p><img src="https://raw.githubusercontent.com/arthurbricq/ros_robottle/main/img/robottle.jpg" alt=""></p>

<p>Here is a <a href="https://youtu.be/XJpJSuhSZN4">youtube presentation</a> of the project ! It was done for a semester project at EPFL and we are not working on this anymore. All the code is well documented.</p>

<p>There is a report that describes the entire project and is accessible <a href="https://github.com/arthurbricq/ros_robottle/tree/main/report.pdf">here</a></p>

<h2 id="the-project-in-more-details">The project in more details</h2>

<p>Readers are encouraged to give a look at the report. However it is really long and we provide here a smaller explanation of the project.</p>

<p><strong>Note 1</strong>: All the algorithms are explained in the section 5.2 of the report. If there would be only 1 section to be read, it is this one.</p>

<p><strong>Note 2</strong>: All the 2D plans of the robot are available at the end of the report. It can be completely built with a laser-cutter machine only using wood.</p>

<p>Robottle was designed for an academic competition at EPFL. For 10 minutes, the robot must autonomsouly collect bottle in an arena filled with bottles and bring them back to one of the corner of the arena, the recycling arena.</p>

<p>Robottle has 2 processing unit: a <strong>Jetson Nano</strong> that is in charge of all the high-level parts of the softwares (computation and control decisions), and a <strong>Arduino Mega</strong> which is in charge of all the low-level parts of the software (controlling the motors). Here is an diagram of the electrical componenents of Robottle.</p>

<p><img src="https://raw.githubusercontent.com/arthurbricq/ros_robottle/main/img/electronic_diagram.png" alt=""></p>

<p>This repository contains the main components of the high-level code that the Jetson uses for controlling the robot. In this repository, you can find</p>
<ul>
  <li>all the ROS nodes to read sensors inputs, run the controller, and send orders to the Arduino</li>
  <li>an implementation of SLAM using ROS2 in Python based on the Lidar measurements</li>
  <li>most importantly, the code of the <a href="https://github.com/arthurbricq/ros_robottle/tree/main/src/robottle/robottle/controller1.py">controller</a>
</li>
</ul>

<p>The ROS code works in pair with the <a href="https://github.com/arthurBricq/robottle_python_packages">Robottle Python Package</a> where there are some helper functions and algorithms.</p>

<p>As the code of this repository and the code of the <strong>Robottle Python Package</strong> are constituting the <strong>high-level controller</strong>, the code of the Arduino Mega <strong>low-level controller</strong> is accessible <a href="https://github.com/ljacqueroud/Robottle-low-level">here</a>.</p>

<p>The following diagram provides a ‘clear’ view of the ROS diagram.</p>

<p><img src="https://raw.githubusercontent.com/arthurbricq/ros_robottle/main/img/ROS_diagram.png" alt=""></p>

<p>And this diagram was extracted with <code class="language-plaintext highlighter-rouge">rqt_graph</code> and provides all the real topics.</p>

<p><img src="https://raw.githubusercontent.com/arthurbricq/ros_robottle/main/img/rqtgraph.png" alt=""></p>

<h2 id="more-about-the-controller">More about the controller</h2>

<p>From the previous diagram, one understands that everything is turning around the <strong>controller</strong>. This controller is the part of the code in charge of taking the decisions given all the available data.</p>

<p>The ‘available’ data includes</p>
<ol>
  <li>the Lidar Data</li>
  <li>the SLAM outputs (map and position)</li>
  <li>the raw image</li>
  <li>the detected bottles by Neural Network (bouding box)</li>
  <li>the motor speeds</li>
  <li>the status sent by the arduino</li>
</ol>

<p>The ‘decisions’ that the controller includes</p>
<ol>
  <li>how to move the robot</li>
  <li>when to pick a bottle</li>
  <li>when to drop the bottles</li>
</ol>

<p>The controller is actually a <strong>state-machine</strong> rather complexe and here is a description of the states it goes through.</p>

<p><img src="https://raw.githubusercontent.com/arthurbricq/ros_robottle/main/img/state_diagram_jetson.png" alt=""></p>

<p>What really matters is a succession of <strong>travel phases</strong> and of <strong>bottle search mode</strong>.</p>

<h3 id="travel-phase">Travel Phase</h3>

<p>In travel mode, the controller uses the output of the SLAM and some metadata about the arena to extract targets. Once targets are found, the controller uses an <strong>RRT</strong> algorithm to find a path and a simple path tracking algorithm is applied to make the robot travel.</p>

<p>This is what the SLAM output looks like. A big, fat, matrix of 8 bits integers. It is really hard to work with this output and some image analysis must be applied to this matrix to extract relevant features.</p>

<p><img src="https://raw.githubusercontent.com/arthurbricq/ros_robottle/main/img/slam0.png" alt=""></p>

<p>Here is an illustration of the <strong>image analysis pipeline</strong> that is applied to the SLAM output (treated as a grayscale image, which is actually what it is) to extract from the SLAM output the targets of the arena.</p>

<p><img src="https://raw.githubusercontent.com/arthurbricq/ros_robottle/main/img/map_analysis_pipeline.png" alt=""></p>

<p>Once this pipeline is finished comes (last picture) the path planner. It is a RRT Star algorithm. It’s a random tree that grows in the non convex space of the arena until a path is found. An image is better than 1000 words to explain how it works.</p>

<p><img src="https://raw.githubusercontent.com/arthurbricq/ros_robottle/main/img/path_planning_2.png" alt=""></p>

<p>Curious readers are invited to visit section 5.2 of the report.</p>

<h3 id="bottle-picking-phase">Bottle Picking Phase</h3>

<p>This phase corresponds to the blue states in the state diagram above. To explain in a few words what happens: the robot activate the neural network detections and turns around until bottles are detected (usually, this happens really quickly). Once a bottle is found, we estimate the angle at which the bottle is located using a regressive polynomial function on the bounding box of the image. The robot is going to align perfectly with the bottle and then move forward until the bottle is detected by the ultrasonic sensors. Then Robottle collects the bottle and start again rotating.</p>

<p>Just to illustrates, here is what Robottle sees with the neural network.</p>

<p><img src="https://raw.githubusercontent.com/arthurbricq/ros_robottle/main/img/bottles.jpeg" alt=""></p>

<h2 id="other-repositories-used">Other repositories used</h2>

<p>All this work would not have been possible without all the open source contributions that we have found.</p>

<p>The <em>Cuda-Accelerated</em> code for the <strong>Neuron Network</strong> (to detect bottles) was based on the great <a href="https://github.com/dusty-nv/jetson-inference">Jetson-Inference</a> code (from <em>NVidea</em>) and especially with their <strong>detectnet</strong> tool. They even provide a ROS repository, it has a great <a href="https://github.com/dusty-nv/ros_deep_learning">documentation</a> that is quite complete ! We have done a few modifications to this code, to</p>
<ul>
  <li>be able to flip the source image (read the report to understand why ! Section 5.2.4)</li>
  <li>be able to turn OFF the detection without killing the ROS Node, to avoid over-heating</li>
</ul>

<p>The SLAM code is an implementation of the ‘TinySLAM’ algorithm, which is built locally from this brilliant repository: <a href="https://github.com/simondlevy/BreezySLAM">BreezySLAM</a>. Here too we have changed the code a little bit, most of which can be seen in our ROS <a href="https://github.com/arthurbricq/ros_robottle/tree/main/src/robottle/robottle/slam.py">SLAM Node</a>.</p>

<p>The LIDAR code to read from the Lidar was found under this very easy to use <a href="https://github.com/SkoltechRobotics/rplidar">librairy</a>.</p>

<h2 id="some-useful-commands">Some useful commands</h2>

<p>The setup to work with the Jetson Nano is rather difficult and it is really easy to loose time just to ‘do simple tasks’. So here is a list of many simple linux / ROS commands that can help someone work in their project.</p>

<ul>
  <li>commands to compile code</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">cd $PYTHON_PATH ; git pull ; sudo python3 setup.py install</code></p>

<p><code class="language-plaintext highlighter-rouge">cd $ROS_PATH ; git pull ; colcon build --packages-select robottle</code></p>

<ul>
  <li>ssh command to open a shell, go to proper directory, and open ros</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">ssh arthur@M00e04c3fd2f6.dyn.epfl.ch</code></p>

<p><code class="language-plaintext highlighter-rouge">cd dev/ros/workspace1 ; . install/setup.bash ; </code></p>

<ul>
  <li>ssh copy file</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">scp -r arthur@M00e04c3fd2f6.dyn.epfl.ch:/home/arthur/dev/ros/workspace1/bag_files/freq_test /home/arthur/dev/ros/ros_robottle/bag_files/</code></p>

<ul>
  <li>scp copy file for many files</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">scp -r arthur@M00e04c3fd2f6.dyn.epfl.ch:/home/arthur/dev/ros/data/maps/rects/name* /home/arthur/dev/ros/data/from_jetson/</code></p>

<ul>
  <li>bag files recording sensor inputs (lidar data + motors speed so far)</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">ros2 bag record -o name /lidar_data /motors_speed</code></p>

<ul>
  <li>run the teleop controller</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">ros2 run robottle teleop</code></p>

<ul>
  <li>launch the other ROS nodes (LIDAR, Motors Speed Reader, SLAM, Motors Commands)</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">ros2 launch robottle launch_nocontroller.launch.py</code></p>

<p><code class="language-plaintext highlighter-rouge">ros2 launch robottle bottle_picking.launch.py</code></p>

<ul>
  <li>launch the detectnet node (<em>with its own launch files</em>)</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">ros2 launch ros_deep_learning detectnet.ros2.launch input:=csi://0 output:=display://0</code></p>

<p><em>It’s possible to have (or not) an output when this node is launched, but for it we must change the launch file. Later, I will integrate this in my own launch nodes</em></p>

<ul>
  <li>topic publication to move the robot somewhere</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">ros2 topic pub --once /uart_commands std_msgs/msg/String "data: w"</code></p>

<ul>
  <li>copy the bag files to the flashdrive</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">ros2 bag record -o name /lidar_data /motors_speed</code></p>

<ul>
  <li>mount the file with all the pictures</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sshfs arthur@M00e04c3fd2f6.dyn.epfl.ch:/home/arthur/dev/ros/data/maps/rects/ /home/arthur/dev/ros/ros_robottle/mount</code></p>

<p>or</p>

<p><code class="language-plaintext highlighter-rouge">xdg-open dev/ros/data/maps/rects/</code></p>

<h2 id="start-up-script">Start-up script</h2>

<p>The startup scripts will launch all the ROS2 nodes by (1) placing the <strong>detectnet nodes</strong> in the <strong>background</strong> and all the <strong>Robottle nodes</strong> in the foreground.</p>

<p>Users can use</p>
<ul>
  <li>the <code class="language-plaintext highlighter-rouge">jobs</code> command to list the jobs currently launched.</li>
  <li>the <code class="language-plaintext highlighter-rouge">fg</code> command to open the first background job into the foreground</li>
  <li>(or the <code class="language-plaintext highlighter-rouge">fg 2</code> command to put the second job in the foreground)</li>
  <li>Once a job is in the foreground, all the associated ROS nodes can be killed by pressing <strong>CTRL-C</strong>
</li>
</ul>

<p>The script is launched using Systemd at boot. Once the script is launched, all the ros nodes can be killed (in SSH) with the command</p>

<p><code class="language-plaintext highlighter-rouge">sudo systemctl stop autostart</code></p>

</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros_robottle">ros_robottle</a> <small>repository</small></h3>
        <span class="label label-default">robot</span> <span class="label label-default">robotics</span> <span class="label label-default">dnn</span> <span class="label label-default">ros</span> <span class="label label-default">slam</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-arthurbricq-ros_robottle
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-arthurbricq-ros_robottle" role="menuitem" tabindex="-1" href="/r/ros_robottle/github-arthurbricq-ros_robottle" data="github-arthurbricq-ros_robottle">
                    <span class="glyphicon glyphicon-star"></span>
                    github-arthurbricq-ros_robottle
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros_robottle">ros_robottle</a> <small>repository</small></h3>
        <span class="label label-default">robot</span> <span class="label label-default">robotics</span> <span class="label label-default">dnn</span> <span class="label label-default">ros</span> <span class="label label-default">slam</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-arthurbricq-ros_robottle
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-arthurbricq-ros_robottle" role="menuitem" tabindex="-1" href="/r/ros_robottle/github-arthurbricq-ros_robottle" data="github-arthurbricq-ros_robottle">
                    <span class="glyphicon glyphicon-star"></span>
                    github-arthurbricq-ros_robottle
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros_robottle">ros_robottle</a> <small>repository</small></h3>
        <span class="label label-default">robot</span> <span class="label label-default">robotics</span> <span class="label label-default">dnn</span> <span class="label label-default">ros</span> <span class="label label-default">slam</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-arthurbricq-ros_robottle
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-arthurbricq-ros_robottle" role="menuitem" tabindex="-1" href="/r/ros_robottle/github-arthurbricq-ros_robottle" data="github-arthurbricq-ros_robottle">
                    <span class="glyphicon glyphicon-star"></span>
                    github-arthurbricq-ros_robottle
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>iron</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros_robottle">ros_robottle</a> <small>repository</small></h3>
        <span class="label label-default">robot</span> <span class="label label-default">robotics</span> <span class="label label-default">dnn</span> <span class="label label-default">ros</span> <span class="label label-default">slam</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-arthurbricq-ros_robottle
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-arthurbricq-ros_robottle" role="menuitem" tabindex="-1" href="/r/ros_robottle/github-arthurbricq-ros_robottle" data="github-arthurbricq-ros_robottle">
                    <span class="glyphicon glyphicon-star"></span>
                    github-arthurbricq-ros_robottle
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/arthurbricq/ros_robottle.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
