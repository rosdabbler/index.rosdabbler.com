<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/ubiquity_motor/github-UbiquityRobotics-ubiquity_motor/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">ubiquity_motor</li>
        <!--<li class="active">ubiquity_motor</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-default" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-default" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-default" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-default" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-default" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-primary" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class="disabled older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class=" older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ubiquity_motor">ubiquity_motor</a> <small>repository</small></h3>
        <span class="label label-default">ros</span> <span class="label label-default">magni</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-UbiquityRobotics-ubiquity_motor
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-UbiquityRobotics-ubiquity_motor" role="menuitem" tabindex="-1" href="/r/ubiquity_motor/github-UbiquityRobotics-ubiquity_motor" data="github-UbiquityRobotics-ubiquity_motor">
                    <span class="glyphicon glyphicon-star"></span>
                    github-UbiquityRobotics-ubiquity_motor
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>humble</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ubiquity_motor">ubiquity_motor</a> <small>repository</small></h3>
        <span class="label label-default">ros</span> <span class="label label-default">magni</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-UbiquityRobotics-ubiquity_motor
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-UbiquityRobotics-ubiquity_motor" role="menuitem" tabindex="-1" href="/r/ubiquity_motor/github-UbiquityRobotics-ubiquity_motor" data="github-UbiquityRobotics-ubiquity_motor">
                    <span class="glyphicon glyphicon-star"></span>
                    github-UbiquityRobotics-ubiquity_motor
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jazzy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ubiquity_motor">ubiquity_motor</a> <small>repository</small></h3>
        <span class="label label-default">ros</span> <span class="label label-default">magni</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-UbiquityRobotics-ubiquity_motor
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-UbiquityRobotics-ubiquity_motor" role="menuitem" tabindex="-1" href="/r/ubiquity_motor/github-UbiquityRobotics-ubiquity_motor" data="github-UbiquityRobotics-ubiquity_motor">
                    <span class="glyphicon glyphicon-star"></span>
                    github-UbiquityRobotics-ubiquity_motor
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>kilted</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ubiquity_motor">ubiquity_motor</a> <small>repository</small></h3>
        <span class="label label-default">ros</span> <span class="label label-default">magni</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-UbiquityRobotics-ubiquity_motor
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-UbiquityRobotics-ubiquity_motor" role="menuitem" tabindex="-1" href="/r/ubiquity_motor/github-UbiquityRobotics-ubiquity_motor" data="github-UbiquityRobotics-ubiquity_motor">
                    <span class="glyphicon glyphicon-star"></span>
                    github-UbiquityRobotics-ubiquity_motor
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>rolling</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ubiquity_motor">ubiquity_motor</a> <small>repository</small></h3>
        <span class="label label-default">ros</span> <span class="label label-default">magni</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-UbiquityRobotics-ubiquity_motor
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-UbiquityRobotics-ubiquity_motor" role="menuitem" tabindex="-1" href="/r/ubiquity_motor/github-UbiquityRobotics-ubiquity_motor" data="github-UbiquityRobotics-ubiquity_motor">
                    <span class="glyphicon glyphicon-star"></span>
                    github-UbiquityRobotics-ubiquity_motor
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>github</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ubiquity_motor">ubiquity_motor</a> <small>repository</small></h3>
        <span class="label label-default">ros</span> <span class="label label-default">magni</span> 
        
        <a class="label label-primary pkg-label" href="/p/ubiquity_motor">ubiquity_motor</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-UbiquityRobotics-ubiquity_motor
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-UbiquityRobotics-ubiquity_motor" role="menuitem" tabindex="-1" href="/r/ubiquity_motor/github-UbiquityRobotics-ubiquity_motor" data="github-UbiquityRobotics-ubiquity_motor">
                    <span class="glyphicon glyphicon-star"></span>
                    github-UbiquityRobotics-ubiquity_motor
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Package that provides a ROS interface for the motors in UbiquityRobotics robots</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/UbiquityRobotics/ubiquity_motor.git">https://github.com/UbiquityRobotics/ubiquity_motor.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">noetic-devel</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2023-11-16
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">ros</span> <span class="label label-default">magni</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ubiquity_motor/#noetic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ubiquity_motor/#noetic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ubiquity_motor/#noetic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ubiquity_motor">ubiquity_motor</a></td>
                    <td>0.14.1</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="ubiquity_motor">ubiquity_motor</h1>
<p><a href="https://travis-ci.org/UbiquityRobotics/ubiquity_motor"><img src="https://travis-ci.org/UbiquityRobotics/ubiquity_motor.svg?branch=indigo-devel" alt="Build Status"></a></p>

<h2 id="introduction">Introduction</h2>

<p>This is a Package that provides a ROS interface for the motors in UbiquityRobotics robots. It communicates with the motor controller via a serial port.</p>

<h2 id="installation">Installation</h2>

<p>This package may be installed from binaries for both x86 and ARM architectures.</p>

<p>The package may be installed with:</p>

<p><code class="language-plaintext highlighter-rouge">sudo apt-get install ros-kinetic-ubiquity-motor</code></p>

<p>Configuration launch files for the <em>Magni</em> robot are in the package <a href="https://github.com/UbiquityRobotics/magni_robot">magni_robot</a>.</p>

<h2 id="ros-api">ROS API</h2>

<h3 id="subscribed-topics">Subscribed topics</h3>

<p><code class="language-plaintext highlighter-rouge">cmd_vel</code> <a href="http://docs.ros.org/api/geometry_msgs/html/msg/Twist.html">geometry_msgs/Twist</a>
The command input.</p>

<p><code class="language-plaintext highlighter-rouge">system_control</code> <a href="http://docs.ros.org/api/std_msgs/html/msg/Sring.html">std_msgs/String</a>
A channel to command the motor node to change mode of operation. 
A text string with a commnad followed by parameter such as <code class="language-plaintext highlighter-rouge">enable</code> or <code class="language-plaintext highlighter-rouge">disable</code> are used.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>motor_control disable      Stops the MCB control over serial (used for firmware load)
motor_control enable       Re-attaches the MCB control over serial for normal operation


speed_control disable      Stops the robot so no speed control is used for collision avoiance
speed_control enable       Re-enables the motor node to respond to cmd_vel speed messages
</code></pre></div></div>

<h3 id="published-topics">Published topics</h3>

<p><code class="language-plaintext highlighter-rouge">odom</code> <a href="http://docs.ros.org/api/nav_msgs/html/msg/Odometry.html">nav_msgs/Odometry</a>
Odometry computed from motor controller messages.</p>

<p><code class="language-plaintext highlighter-rouge">/tf</code> <a href="http://docs.ros.org/api/tf/html/msg/tfMessage.html">tf/tfMessage</a>
The transform from <code class="language-plaintext highlighter-rouge">odom</code> to <code class="language-plaintext highlighter-rouge">base_link</code></p>

<p><code class="language-plaintext highlighter-rouge">firmware_version</code> <a href="https://docs.ros.org/en/jade/api/std_msgs/html/msg/String.html">std_msgs/String</a>
Version of motor control board (MCB) firmware formatted as “vXX YYYYMMDD” or just “vXX” if there’s no daycode found.</p>

<p><code class="language-plaintext highlighter-rouge">battery_state</code> <a href="http://docs.ros.org/jade/api/sensor_msgs/html/msg/BatteryState.html">sensor_msgs/BatteryState</a>
Charge state of the robot’s batteries.</p>

<p><code class="language-plaintext highlighter-rouge">publish_cmd</code> <a href="http://docs.ros.org/api/geometry_msgs/html/msg/TwistStamped.html">geometry_msgs/TwistStamped</a>
The value of <code class="language-plaintext highlighter-rouge">cmd_vel</code> after limits were applied. Available if the <code class="language-plaintext highlighter-rouge">publish_cmd</code> paramater is set.</p>

<p><code class="language-plaintext highlighter-rouge">motor_power_active</code> <a href="http://docs.ros.org/api/std_msgs/html/msg/Bool.html">std_msgs/Bool</a>
The state of motor power being active is published.  This follows the ESTOP switch within about a half second.</p>

<p><code class="language-plaintext highlighter-rouge">motor_state</code>  ubiquity_motor::MotorState
The combined motor state for both wheels with positions, rotate rates, currents, pwm drive values</p>

<p><code class="language-plaintext highlighter-rouge">left_error</code> <a href="http://docs.ros.org/api/std_msgs/html/msg/Int32.html">std_msgs/Int32</a>
The error in expected left wheel position relative to current left wheel position is published for diagnostics purposes.</p>

<p><code class="language-plaintext highlighter-rouge">right_error</code> <a href="http://docs.ros.org/api/std_msgs/html/msg/Int32.html">std_msgs/Int32</a>
The error in expected right wheel position relative to current right wheel position is published for diagnostics purposes.</p>

<p><code class="language-plaintext highlighter-rouge">left_current</code> <a href="http://docs.ros.org/api/std_msgs/html/msg/Float32.html">std_msgs/Int32</a>
The motor current in amps that the left motor is running at at this time</p>

<p><code class="language-plaintext highlighter-rouge">right_current</code> <a href="http://docs.ros.org/api/std_msgs/html/msg/Float32.html">std_msgs/Int32</a>
The motor current in amps that the right motor is running at at this time</p>

<p><code class="language-plaintext highlighter-rouge">left_tick_interval</code> <a href="http://docs.ros.org/api/std_msgs/html/msg/Int32.html">std_msgs/Int32</a>
A value that is proportional to the time between left wheel encoder ticks for usage in diagnostics. This unsigned value is only published when velocity is non zero.</p>

<p><code class="language-plaintext highlighter-rouge">right_tick_interval</code> <a href="http://docs.ros.org/api/std_msgs/html/msg/Int32.html">std_msgs/Int32</a>
A value that is proportional to the time between right wheel encoder ticks for usage in diagnostics. This unsigned value is only published when velocity is non zero.</p>

<h3 id="parameters">Parameters</h3>

<h4 id="comms-paramaters">Comms paramaters</h4>

<p><code class="language-plaintext highlighter-rouge">serial_port</code> (string, default: “/dev/ttyS0”)
Name of device with which to communicate with motor controller hardware.</p>

<p><code class="language-plaintext highlighter-rouge">baud_rate</code> (int, default: 9600)
Baud rate for serial communication with motor controller hardware.</p>

<h4 id="firmware-parameters">Firmware parameters</h4>

<p><code class="language-plaintext highlighter-rouge">pid_proportional</code> (int, default: 5000)
The <code class="language-plaintext highlighter-rouge">P</code> paramater for the motor controller’s <code class="language-plaintext highlighter-rouge">PID</code> controller.</p>

<p><code class="language-plaintext highlighter-rouge">pid_integral</code> (int, default: 10)
The <code class="language-plaintext highlighter-rouge">I</code> paramater for the motor controller’s <code class="language-plaintext highlighter-rouge">PID</code> controller.</p>

<p><code class="language-plaintext highlighter-rouge">pid_derivative</code> (int, default: 1)
The <code class="language-plaintext highlighter-rouge">D</code> paramater for the motor controller’s <code class="language-plaintext highlighter-rouge">PID</code> controller.</p>

<p><code class="language-plaintext highlighter-rouge">pid_denominator</code> (int, default: 1000)
Divisor for the above <code class="language-plaintext highlighter-rouge">PID</code> paramaters.</p>

<p><code class="language-plaintext highlighter-rouge">pid_moving_buffer_size</code> (int, default: 10)
Size of a moving buffer used in the control loop.</p>

<p><code class="language-plaintext highlighter-rouge">pid_control</code> (int, default: 0)
This word enables non-standard modes for motor control in the firmware. Consult factory for guidance in usage of this parameter.</p>

<p><code class="language-plaintext highlighter-rouge">drive_type</code>  (string, default: “standard”)
This modifies turning and some other motor control parameters if not set to ‘standard’.  This parameter is set to ‘4wd’ on some custom systems but those require dual MCB controllers and are far more complex systems so do not change this unless instructed to do so by the factory.  This setting is only of value for MCB firmware of version v41 or later.</p>

<p><code class="language-plaintext highlighter-rouge">wheel_type</code>  (string, default: “standard”)
This is used to change the type of wheel and encoder combination in use.  The origional Magni up into 2021 was only one wheel type which we call ‘standard’ here.   This wheel had a chrome hubcap.  In 2021 we started some custom development for a wheel that would set this parameter to ‘thin’ as the wheel was thinner but also had different drive characteristics.  This setting is only of value for MCB firmware of version v41 or later.</p>

<p><code class="language-plaintext highlighter-rouge">wheel_gear_ratio</code>  (float, default: 4.294)
We are looking into different ratios for the gearing internal to the wheel hub.   This ratio impacts the wheel control logic as it is in effect a ratio between the wheel encoders and the wheel itself on the ground.   The only other value of use as of late 2021 here is ‘5.17’ which is not released at this time.</p>

<p><code class="language-plaintext highlighter-rouge">fw_max_pwm</code> (int, default: 350)
This is a safety cap on the max value we will drive our low level motor control hardware.  Do not change this unless instructed to do so by the factory.   Prior to late 2021 this was defaulted to 250 internally in the firmware.</p>

<p><code class="language-plaintext highlighter-rouge">deadman_timer</code> (int, default: 2400000)
If a message is not received after this interval (in MCU clock ticks), the motor controller should assume an error condition and stop.</p>

<p><code class="language-plaintext highlighter-rouge">battery_voltage_multiplier</code> (float, default: 0.5185)
Used to calculate battery voltage from motor controller messages.</p>

<p><code class="language-plaintext highlighter-rouge">battery_voltage_offset</code> (float, default: 0.40948)
Used to calculate battery voltage from motor controller messages.</p>

<h4 id="node-parameters">Node parameters</h4>

<p><code class="language-plaintext highlighter-rouge">controller_loop_rate</code> (double, default: 20.0)
Rate (in Hz) at which to send commands to the motor controller hardware.</p>

<h4 id="diff_drive_controller-paramaters">diff_drive_controller paramaters</h4>

<p><code class="language-plaintext highlighter-rouge">left_wheel</code> (string | string[…])
Left wheel joint name or list of joint names.</p>

<p><code class="language-plaintext highlighter-rouge">right_wheel</code> (string | string[…])
Right wheel joint name or list of joint names.</p>

<p><code class="language-plaintext highlighter-rouge">pose_covariance_diagonal</code> (double[6])
Diagonal of the covariance matrix for odometry pose publishing.</p>

<p><code class="language-plaintext highlighter-rouge">twist_covariance_diagonal</code> (double[6])
Diagonal of the covariance matrix for odometry twist publishing.</p>

<p><code class="language-plaintext highlighter-rouge">publish_rate</code> (double, default: 50.0)
Frequency (in Hz) at which the odometry is published. Used for both tf and odom.</p>

<p><code class="language-plaintext highlighter-rouge">wheel_separation_multiplier</code> (double, default: 1.0)
Multiplier applied to the wheel separation parameter. This is used to account for a difference between the robot model and a real robot.</p>

<p><code class="language-plaintext highlighter-rouge">wheel_radius_multiplier</code> (double, default: 1.0)
Multiplier applied to the wheel radius parameter. This is used to account for a difference between the robot model and a real robot.</p>

<p><code class="language-plaintext highlighter-rouge">cmd_vel_timeout</code> (double, default: 0.5)
Allowed period (in seconds) allowed between two successive velocity commands. After this delay, a zero speed command will be sent to the wheels.</p>

<p><code class="language-plaintext highlighter-rouge">base_frame_id</code> (string, default: base_link)
Base frame_id, which is used to fill in the child_frame_id of the Odometry messages and TF.</p>

<p><code class="language-plaintext highlighter-rouge">linear/x/has_velocity_limits</code> (bool, default: false)
Whether the controller should limit linear speed.</p>

<p><code class="language-plaintext highlighter-rouge">linear/x/max_velocity</code> (double)
Maximum linear velocity (in m/s).</p>

<p><code class="language-plaintext highlighter-rouge">linear/x/min_velocity</code> (double)
Minimum linear velocity (in m/s). Setting this to 0.0 will disable backwards motion. When unspecified, -max_velocity is used.</p>

<p><code class="language-plaintext highlighter-rouge">linear/x/has_acceleration_limits</code> (bool, default: false)
Whether the controller should limit linear acceleration.</p>

<p><code class="language-plaintext highlighter-rouge">linear/x/max_acceleration</code> (double)
Maximum linear acceleration (in m/s^2).</p>

<p><code class="language-plaintext highlighter-rouge">linear/x/min_acceleration</code> (double)
Minimum linear acceleration (in m/s^2). When unspecified, -max_acceleration is used.</p>

<p><code class="language-plaintext highlighter-rouge">linear/x/has_jerk_limits</code> (bool, default: false)
Whether the controller should limit linear jerk.</p>

<p><code class="language-plaintext highlighter-rouge">linear/x/max_jerk</code> (double)
Maximum linear jerk (in m/s^3).</p>

<p><code class="language-plaintext highlighter-rouge">angular/z/has_velocity_limits</code> (bool, default: false)
Whether the controller should limit angular velocity.</p>

<p><code class="language-plaintext highlighter-rouge">angular/z/max_velocity</code> (double)
Maximum angular velocity (in rad/s).</p>

<p><code class="language-plaintext highlighter-rouge">angular/z/min_velocity</code> (double)
Minimum angular velocity (in rad/s). Setting this to 0.0 will disable counter-clockwise rotation. When unspecified, -max_velocity is used.</p>

<p><code class="language-plaintext highlighter-rouge">angular/z/has_acceleration_limits</code> (bool, default: false)
Whether the controller should limit angular acceleration.</p>

<p><code class="language-plaintext highlighter-rouge">angular/z/max_acceleration</code> (double)
Maximum angular acceleration (in rad/s^2).</p>

<p><code class="language-plaintext highlighter-rouge">angular/z/min_acceleration</code> (double)
Minimum angular acceleration (in rad/s^2). When unspecified, -max_acceleration is used.</p>

<p><code class="language-plaintext highlighter-rouge">angular/z/has_jerk_limits</code> (bool, default: false)
Whether the controller should limit angular jerk.</p>

<p><code class="language-plaintext highlighter-rouge">angular/z/max_jerk</code> (double)
Maximum angular jerk (in m/s^3).</p>

<p><code class="language-plaintext highlighter-rouge">enable_odom_tf</code> (bool, default: true)
Whether to publish to TF directly.</p>

<p><code class="language-plaintext highlighter-rouge">wheel_separation</code> (double)
The distance of the left and right wheel(s). The diff_drive_controller will attempt to read the value from the URDF if this parameter is not specified.</p>

<p><code class="language-plaintext highlighter-rouge">wheel_radius</code> (double)
Radius of the wheels. It is expected they all have the same size. The diff_drive_controller will attempt to read the value from the URDF if this parameter is not specified.</p>

<p><code class="language-plaintext highlighter-rouge">odom_frame_id</code> (string, default: “/odom”)
Name of frame in which to publish odometry.</p>

<p><code class="language-plaintext highlighter-rouge">publish_cmd</code> (bool, default: false)
Publish the velocity command to be executed. It is to monitor the effect of limiters on the controller input.</p>

<p><code class="language-plaintext highlighter-rouge">allow_multiple_cmd_vel_publishers</code> (bool, default: false)
When enabled the controller will brake if there is more than one publishers on its input topic, <code class="language-plaintext highlighter-rouge">~/cmd_vel</code>.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ubiquity_motor">ubiquity_motor</a> <small>repository</small></h3>
        <span class="label label-default">ros</span> <span class="label label-default">magni</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-UbiquityRobotics-ubiquity_motor
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-UbiquityRobotics-ubiquity_motor" role="menuitem" tabindex="-1" href="/r/ubiquity_motor/github-UbiquityRobotics-ubiquity_motor" data="github-UbiquityRobotics-ubiquity_motor">
                    <span class="glyphicon glyphicon-star"></span>
                    github-UbiquityRobotics-ubiquity_motor
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ubiquity_motor">ubiquity_motor</a> <small>repository</small></h3>
        <span class="label label-default">ros</span> <span class="label label-default">magni</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-UbiquityRobotics-ubiquity_motor
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-UbiquityRobotics-ubiquity_motor" role="menuitem" tabindex="-1" href="/r/ubiquity_motor/github-UbiquityRobotics-ubiquity_motor" data="github-UbiquityRobotics-ubiquity_motor">
                    <span class="glyphicon glyphicon-star"></span>
                    github-UbiquityRobotics-ubiquity_motor
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>iron</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ubiquity_motor">ubiquity_motor</a> <small>repository</small></h3>
        <span class="label label-default">ros</span> <span class="label label-default">magni</span> 
        
        <a class="label label-primary pkg-label" href="/p/ubiquity_motor">ubiquity_motor</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-UbiquityRobotics-ubiquity_motor
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-UbiquityRobotics-ubiquity_motor" role="menuitem" tabindex="-1" href="/r/ubiquity_motor/github-UbiquityRobotics-ubiquity_motor" data="github-UbiquityRobotics-ubiquity_motor">
                    <span class="glyphicon glyphicon-star"></span>
                    github-UbiquityRobotics-ubiquity_motor
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Package that provides a ROS interface for the motors in UbiquityRobotics robots</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/UbiquityRobotics/ubiquity_motor.git">https://github.com/UbiquityRobotics/ubiquity_motor.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">kinetic-devel</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2022-02-28
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">ros</span> <span class="label label-default">magni</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ubiquity_motor/#melodic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ubiquity_motor/#melodic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ubiquity_motor/#melodic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ubiquity_motor">ubiquity_motor</a></td>
                    <td>0.12.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="ubiquity_motor">ubiquity_motor</h1>
<p><a href="https://travis-ci.org/UbiquityRobotics/ubiquity_motor"><img src="https://travis-ci.org/UbiquityRobotics/ubiquity_motor.svg?branch=indigo-devel" alt="Build Status"></a></p>

<h2 id="introduction">Introduction</h2>

<p>This is a Package that provides a ROS interface for the motors in UbiquityRobotics robots. It communicates with the motor controller via a serial port.</p>

<h2 id="installation">Installation</h2>

<p>This package may be installed from binaries for both x86 and ARM architectures.</p>

<p>The package may be installed with:</p>

<p><code class="language-plaintext highlighter-rouge">sudo apt-get install ros-kinetic-ubiquity-motor</code></p>

<p>Configuration launch files for the <em>Magni</em> robot are in the package <a href="https://github.com/UbiquityRobotics/magni_robot">magni_robot</a>.</p>

<h2 id="ros-api">ROS API</h2>

<h3 id="subscribed-topics">Subscribed topics</h3>

<p><code class="language-plaintext highlighter-rouge">cmd_vel</code> <a href="http://docs.ros.org/api/geometry_msgs/html/msg/Twist.html">geometry_msgs/Twist</a>
The command input.</p>

<p><code class="language-plaintext highlighter-rouge">system_control</code> <a href="http://docs.ros.org/api/std_msgs/html/msg/Sring.html">std_msgs/String</a>
A channel to command the motor node to change mode of operation. 
A text string with a commnad followed by parameter such as <code class="language-plaintext highlighter-rouge">enable</code> or <code class="language-plaintext highlighter-rouge">disable</code> are used.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>motor_control disable      Stops the MCB control over serial (used for firmware load)
motor_control enable       Re-attaches the MCB control over serial for normal operation


speed_control disable      Stops the robot so no speed control is used for collision avoiance
speed_control enable       Re-enables the motor node to respond to cmd_vel speed messages
</code></pre></div></div>

<h3 id="published-topics">Published topics</h3>

<p><code class="language-plaintext highlighter-rouge">odom</code> <a href="http://docs.ros.org/api/nav_msgs/html/msg/Odometry.html">nav_msgs/Odometry</a>
Odometry computed from motor controller messages.</p>

<p><code class="language-plaintext highlighter-rouge">/tf</code> <a href="http://docs.ros.org/api/tf/html/msg/tfMessage.html">tf/tfMessage</a>
The transform from <code class="language-plaintext highlighter-rouge">odom</code> to <code class="language-plaintext highlighter-rouge">base_link</code></p>

<p><code class="language-plaintext highlighter-rouge">battery_state</code> <a href="http://docs.ros.org/jade/api/sensor_msgs/html/msg/BatteryState.html">sensor_msgs/BatteryState</a>
Charge state of the robot’s batteries.</p>

<p><code class="language-plaintext highlighter-rouge">publish_cmd</code> <a href="http://docs.ros.org/api/geometry_msgs/html/msg/TwistStamped.html">geometry_msgs/TwistStamped</a>
The value of <code class="language-plaintext highlighter-rouge">cmd_vel</code> after limits were applied. Available if the <code class="language-plaintext highlighter-rouge">publish_cmd</code> paramater is set.</p>

<p><code class="language-plaintext highlighter-rouge">motor_power_active</code> <a href="http://docs.ros.org/api/std_msgs/html/msg/Bool.html">std_msgs/Bool</a>
The state of motor power being active is published.  This follows the ESTOP switch within about a half second.</p>

<p><code class="language-plaintext highlighter-rouge">motor_state</code>  ubiquity_motor::MotorState
The combined motor state for both wheels with positions, rotate rates, currents, pwm drive values</p>

<p><code class="language-plaintext highlighter-rouge">left_error</code> <a href="http://docs.ros.org/api/std_msgs/html/msg/Int32.html">std_msgs/Int32</a>
The error in expected left wheel position relative to current left wheel position is published for diagnostics purposes.</p>

<p><code class="language-plaintext highlighter-rouge">right_error</code> <a href="http://docs.ros.org/api/std_msgs/html/msg/Int32.html">std_msgs/Int32</a>
The error in expected right wheel position relative to current right wheel position is published for diagnostics purposes.</p>

<p><code class="language-plaintext highlighter-rouge">left_current</code> <a href="http://docs.ros.org/api/std_msgs/html/msg/Float32.html">std_msgs/Int32</a>
The motor current in amps that the left motor is running at at this time</p>

<p><code class="language-plaintext highlighter-rouge">right_current</code> <a href="http://docs.ros.org/api/std_msgs/html/msg/Float32.html">std_msgs/Int32</a>
The motor current in amps that the right motor is running at at this time</p>

<p><code class="language-plaintext highlighter-rouge">left_tick_interval</code> <a href="http://docs.ros.org/api/std_msgs/html/msg/Int32.html">std_msgs/Int32</a>
A value that is proportional to the time between left wheel encoder ticks for usage in diagnostics. This unsigned value is only published when velocity is non zero.</p>

<p><code class="language-plaintext highlighter-rouge">right_tick_interval</code> <a href="http://docs.ros.org/api/std_msgs/html/msg/Int32.html">std_msgs/Int32</a>
A value that is proportional to the time between right wheel encoder ticks for usage in diagnostics. This unsigned value is only published when velocity is non zero.</p>

<h3 id="parameters">Parameters</h3>

<h4 id="comms-paramaters">Comms paramaters</h4>

<p><code class="language-plaintext highlighter-rouge">serial_port</code> (string, default: “/dev/ttyS0”)
Name of device with which to communicate with motor controller hardware.</p>

<p><code class="language-plaintext highlighter-rouge">baud_rate</code> (int, default: 9600)
Baud rate for serial communication with motor controller hardware.</p>

<h4 id="firmware-parameters">Firmware parameters</h4>

<p><code class="language-plaintext highlighter-rouge">pid_proportional</code> (int, default: 5000)
The <code class="language-plaintext highlighter-rouge">P</code> paramater for the motor controller’s <code class="language-plaintext highlighter-rouge">PID</code> controller.</p>

<p><code class="language-plaintext highlighter-rouge">pid_integral</code> (int, default: 10)
The <code class="language-plaintext highlighter-rouge">I</code> paramater for the motor controller’s <code class="language-plaintext highlighter-rouge">PID</code> controller.</p>

<p><code class="language-plaintext highlighter-rouge">pid_derivative</code> (int, default: 1)
The <code class="language-plaintext highlighter-rouge">D</code> paramater for the motor controller’s <code class="language-plaintext highlighter-rouge">PID</code> controller.</p>

<p><code class="language-plaintext highlighter-rouge">pid_denominator</code> (int, default: 1000)
Divisor for the above <code class="language-plaintext highlighter-rouge">PID</code> paramaters.</p>

<p><code class="language-plaintext highlighter-rouge">pid_moving_buffer_size</code> (int, default: 10)
Size of a moving buffer used in the control loop.</p>

<p><code class="language-plaintext highlighter-rouge">pid_control</code> (int, default: 0)
This word enables non-standard modes for motor control in the firmware. Consult factory for guidance in usage of this parameter.</p>

<p><code class="language-plaintext highlighter-rouge">drive_type</code>  (string, default: “standard”)
This modifies turning and some other motor control parameters if not set to ‘standard’.  This parameter is set to ‘4wd’ on some custom systems but those require dual MCB controllers and are far more complex systems so do not change this unless instructed to do so by the factory.  This setting is only of value for MCB firmware of version v41 or later.</p>

<p><code class="language-plaintext highlighter-rouge">wheel_type</code>  (string, default: “standard”)
This is used to change the type of wheel and encoder combination in use.  The origional Magni up into 2021 was only one wheel type which we call ‘standard’ here.   This wheel had a chrome hubcap.  In 2021 we started some custom development for a wheel that would set this parameter to ‘thin’ as the wheel was thinner but also had different drive characteristics.  This setting is only of value for MCB firmware of version v41 or later.</p>

<p><code class="language-plaintext highlighter-rouge">wheel_gear_ratio</code>  (float, default: 4.294)
We are looking into different ratios for the gearing internal to the wheel hub.   This ratio impacts the wheel control logic as it is in effect a ratio between the wheel encoders and the wheel itself on the ground.   The only other value of use as of late 2021 here is ‘5.17’ which is not released at this time.</p>

<p><code class="language-plaintext highlighter-rouge">fw_max_speed_fwd</code> (int, default: 80)
Sets the maximum forward speed the firmware will allow itself to be set to obtain.  This is a firmware level register that involves physics of the wheel size and encoder ticks per revolution.  A value of 80 is 1 meter per second for a standard robot set of wheels.</p>

<p><code class="language-plaintext highlighter-rouge">fw_max_speed_rev</code> (int, default: 80)
Sets the maximum reverse speed the firmware will allow itself to be set to obtain.  This is a firmware level register that involves physics of the wheel size and encoder ticks per revolution.  A value of 80 is 1 meter per second for a standard robot set of wheels.</p>

<p><code class="language-plaintext highlighter-rouge">fw_max_pwm</code> (int, default: 350)
<code class="language-plaintext highlighter-rouge">fw_max_pwm</code> (int, default: 350)
This is a safety cap on the max value we will drive our low level motor control hardware.  Do not change this unless instructed to do so by the factory.   Prior to late 2021 this was defaulted to 250 internally in the firmware.</p>

<p><code class="language-plaintext highlighter-rouge">deadman_timer</code> (int, default: 2400000)
If a message is not received after this interval (in MCU clock ticks), the motor controller should assume an error condition and stop.</p>

<p><code class="language-plaintext highlighter-rouge">battery_voltage_multiplier</code> (float, default: 0.5185)
Used to calculate battery voltage from motor controller messages.</p>

<p><code class="language-plaintext highlighter-rouge">battery_voltage_offset</code> (float, default: 0.40948)
Used to calculate battery voltage from motor controller messages.</p>

<h4 id="node-parameters">Node parameters</h4>

<p><code class="language-plaintext highlighter-rouge">controller_loop_rate</code> (double, default: 20.0)
Rate (in Hz) at which to send commands to the motor controller hardware.</p>

<h4 id="diff_drive_controller-paramaters">diff_drive_controller paramaters</h4>

<p><code class="language-plaintext highlighter-rouge">left_wheel</code> (string | string[…])
Left wheel joint name or list of joint names.</p>

<p><code class="language-plaintext highlighter-rouge">right_wheel</code> (string | string[…])
Right wheel joint name or list of joint names.</p>

<p><code class="language-plaintext highlighter-rouge">pose_covariance_diagonal</code> (double[6])
Diagonal of the covariance matrix for odometry pose publishing.</p>

<p><code class="language-plaintext highlighter-rouge">twist_covariance_diagonal</code> (double[6])
Diagonal of the covariance matrix for odometry twist publishing.</p>

<p><code class="language-plaintext highlighter-rouge">publish_rate</code> (double, default: 50.0)
Frequency (in Hz) at which the odometry is published. Used for both tf and odom.</p>

<p><code class="language-plaintext highlighter-rouge">wheel_separation_multiplier</code> (double, default: 1.0)
Multiplier applied to the wheel separation parameter. This is used to account for a difference between the robot model and a real robot.</p>

<p><code class="language-plaintext highlighter-rouge">wheel_radius_multiplier</code> (double, default: 1.0)
Multiplier applied to the wheel radius parameter. This is used to account for a difference between the robot model and a real robot.</p>

<p><code class="language-plaintext highlighter-rouge">cmd_vel_timeout</code> (double, default: 0.5)
Allowed period (in seconds) allowed between two successive velocity commands. After this delay, a zero speed command will be sent to the wheels.</p>

<p><code class="language-plaintext highlighter-rouge">base_frame_id</code> (string, default: base_link)
Base frame_id, which is used to fill in the child_frame_id of the Odometry messages and TF.</p>

<p><code class="language-plaintext highlighter-rouge">linear/x/has_velocity_limits</code> (bool, default: false)
Whether the controller should limit linear speed.</p>

<p><code class="language-plaintext highlighter-rouge">linear/x/max_velocity</code> (double)
Maximum linear velocity (in m/s).</p>

<p><code class="language-plaintext highlighter-rouge">linear/x/min_velocity</code> (double)
Minimum linear velocity (in m/s). Setting this to 0.0 will disable backwards motion. When unspecified, -max_velocity is used.</p>

<p><code class="language-plaintext highlighter-rouge">linear/x/has_acceleration_limits</code> (bool, default: false)
Whether the controller should limit linear acceleration.</p>

<p><code class="language-plaintext highlighter-rouge">linear/x/max_acceleration</code> (double)
Maximum linear acceleration (in m/s^2).</p>

<p><code class="language-plaintext highlighter-rouge">linear/x/min_acceleration</code> (double)
Minimum linear acceleration (in m/s^2). When unspecified, -max_acceleration is used.</p>

<p><code class="language-plaintext highlighter-rouge">linear/x/has_jerk_limits</code> (bool, default: false)
Whether the controller should limit linear jerk.</p>

<p><code class="language-plaintext highlighter-rouge">linear/x/max_jerk</code> (double)
Maximum linear jerk (in m/s^3).</p>

<p><code class="language-plaintext highlighter-rouge">angular/z/has_velocity_limits</code> (bool, default: false)
Whether the controller should limit angular velocity.</p>

<p><code class="language-plaintext highlighter-rouge">angular/z/max_velocity</code> (double)
Maximum angular velocity (in rad/s).</p>

<p><code class="language-plaintext highlighter-rouge">angular/z/min_velocity</code> (double)
Minimum angular velocity (in rad/s). Setting this to 0.0 will disable counter-clockwise rotation. When unspecified, -max_velocity is used.</p>

<p><code class="language-plaintext highlighter-rouge">angular/z/has_acceleration_limits</code> (bool, default: false)
Whether the controller should limit angular acceleration.</p>

<p><code class="language-plaintext highlighter-rouge">angular/z/max_acceleration</code> (double)
Maximum angular acceleration (in rad/s^2).</p>

<p><code class="language-plaintext highlighter-rouge">angular/z/min_acceleration</code> (double)
Minimum angular acceleration (in rad/s^2). When unspecified, -max_acceleration is used.</p>

<p><code class="language-plaintext highlighter-rouge">angular/z/has_jerk_limits</code> (bool, default: false)
Whether the controller should limit angular jerk.</p>

<p><code class="language-plaintext highlighter-rouge">angular/z/max_jerk</code> (double)
Maximum angular jerk (in m/s^3).</p>

<p><code class="language-plaintext highlighter-rouge">enable_odom_tf</code> (bool, default: true)
Whether to publish to TF directly.</p>

<p><code class="language-plaintext highlighter-rouge">wheel_separation</code> (double)
The distance of the left and right wheel(s). The diff_drive_controller will attempt to read the value from the URDF if this parameter is not specified.</p>

<p><code class="language-plaintext highlighter-rouge">wheel_radius</code> (double)
Radius of the wheels. It is expected they all have the same size. The diff_drive_controller will attempt to read the value from the URDF if this parameter is not specified.</p>

<p><code class="language-plaintext highlighter-rouge">odom_frame_id</code> (string, default: “/odom”)
Name of frame in which to publish odometry.</p>

<p><code class="language-plaintext highlighter-rouge">publish_cmd</code> (bool, default: false)
Publish the velocity command to be executed. It is to monitor the effect of limiters on the controller input.</p>

<p><code class="language-plaintext highlighter-rouge">allow_multiple_cmd_vel_publishers</code> (bool, default: false)
When enabled the controller will brake if there is more than one publishers on its input topic, <code class="language-plaintext highlighter-rouge">~/cmd_vel</code>.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/UbiquityRobotics/ubiquity_motor.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
