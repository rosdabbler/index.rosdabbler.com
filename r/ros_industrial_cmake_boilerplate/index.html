<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/ros_industrial_cmake_boilerplate/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">ros_industrial_cmake_boilerplate</li>
        <!--<li class="active">ros_industrial_cmake_boilerplate</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-primary" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-primary" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-primary" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-primary" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-default" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-primary" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class=" older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class=" older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros_industrial_cmake_boilerplate">ros_industrial_cmake_boilerplate</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/ros_industrial_cmake_boilerplate">ros_industrial_cmake_boilerplate</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-industrial-ros_industrial_cmake_boilerplate
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-industrial-ros_industrial_cmake_boilerplate" role="menuitem" tabindex="-1" href="/r/ros_industrial_cmake_boilerplate/github-ros-industrial-ros_industrial_cmake_boilerplate" data="github-ros-industrial-ros_industrial_cmake_boilerplate">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-industrial-ros_industrial_cmake_boilerplate
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-industrial/ros_industrial_cmake_boilerplate.git">https://github.com/ros-industrial/ros_industrial_cmake_boilerplate.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-02-11
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ros_industrial_cmake_boilerplate/#humble-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros_industrial_cmake_boilerplate/#humble-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros_industrial_cmake_boilerplate/#humble-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ros_industrial_cmake_boilerplate">ros_industrial_cmake_boilerplate</a></td>
                    <td>0.7.3</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="cmake-boilerplate-scripts">CMake Boilerplate Scripts</h1>

<p><a href="https://opensource.org/licenses/Apache-2.0"><img src="https://img.shields.io/:license-Apache%202.0-yellowgreen.svg" alt="license apache
2.0"></a></p>

<p><a href="https://opensource.org/licenses/BSD-3-Clause"><img src="https://img.shields.io/:license-BSD%203--Clause-orange.svg" alt="license bsd 3
clause"></a></p>

<p>This contains a collection of boilerplate CMake scripts and marcos.</p>

<p>Note: this package is <em>not</em> specific to ROS-Industrial and is usable
with any package which uses CMake. The prefix was added to facilitate
releasing this into different ROS distributions.</p>

<p>::: {.contents depth=”4”}
Table of Contents
:::</p>

<h2 id="create-debian-package-linux-or-nuget-package-windows">Create Debian Package (Linux) or NuGet Package (Windows)</h2>

<p>The following process will generate a Debian or NuGet package leveraging
CMake and CPack based on the OS.</p>

<p>The package should be located in the current directory.</p>

<p><code class="language-plaintext highlighter-rouge">` bash cd &lt;workspace directory&gt; catkin build -DRICB_PACKAGE=ON ./src/ros_industrial_cmake_boilerplate/.run-cpack</code>`</p>

<h2 id="available-macros">Available Macros</h2>

<h3 id="extract-package-metadata">Extract Package Metadata</h3>

<p>This CMake macro will extract the package name and version from a
package.xml file. It will create two cmake variable
<strong>${PREFIX_ARG}_extracted_name</strong> and
<strong>${PREFIX_ARG}_extracted_version</strong>.</p>

<p>``` {.sourceCode .cmake}
extract_package_metadata(${PREFIX_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### Clang Tidy

This CMake macro will add clang-tidy to all targets


``` {.sourceCode .cmake}
clang_tidy(ARGUMENTS ${ARGN})
# or
clang_tidy(ARGUMENTS ${ARGN} ENABLE ${USER_ENABLE_ARG})

</code></pre></div></div>

<p>This CMake macro will add clang-tidy to all targets with default
arguments.</p>

<p>``` {.sourceCode .cmake}
clang_tidy(ARGUMENTS ${DEFAULT_CLANG_TIDY_CHECKS})</p>
<h1 id="or">or</h1>
<p>clang_tidy(ARGUMENTS ${DEFAULT_CLANG_TIDY_CHECKS} ENABLE ${USER_ENABLE_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Clears clang-tidy so it is not called on any following defined code
compilation. It can be re-enabled by another call to
[clang\_tidy()]{.title-ref}.


``` {.sourceCode .cmake}
reset_clang_tidy()

</code></pre></div></div>

<p>This CMake macro will add clang-tidy to a provided target.</p>

<ul>
  <li><a href="https://clang.llvm.org/extra/clang-tidy/">The clang-tidy
documentation</a></li>
  <li><a href="https://clang.llvm.org/extra/clang-tidy/checks/list.html">The list of clang-tidy
checks</a></li>
</ul>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by an external flag. If not provided it is automatically
enabled.
:::</p>

<p>Single Argument Keywords:</p>

<p>+———————–+———————–+———————–+
| Keyword               | Type                  | Description           |
+=======================+=======================+=======================+
| ENABLE                | &gt; ON/OFF              | Enable/Disable        |
|                       |                       | clang-tidy            |
+———————–+———————–+———————–+
| WARNINGS_AS_ERRORS  | &gt; ON/OFF              | Treat warnings as     |
|                       |                       | errors. If            |
|                       |                       | ERROR_CHECKS is not  |
|                       |                       | provided, it will use |
|                       |                       | CHECKS to treat as    |
|                       |                       | errors.               |
+———————–+———————–+———————–+
| HEADER_FILTER        | &gt; String              | Default to '.*' if |
|                       |                       | not provided. Regular |
|                       |                       | expression matching   |
|                       |                       | the names of the      |
|                       |                       | headers to output     |
|                       |                       | diagnostics from.     |
+———————–+———————–+———————–+
| LINE_FILTER          | &gt; String              | List of files with    |
|                       |                       | line ranges to filter |
|                       |                       | the warnings.         |
+———————–+———————–+———————–+
| CHECKS                | &gt; String              | Comma-separated list  |
|                       |                       | of globs with         |
|                       |                       | optional '-'        |
|                       |                       | prefix. Globs are     |
|                       |                       | processed in order of |
|                       |                       | appearance in the     |
|                       |                       | list. Globs without   |
|                       |                       | the '-' prefix add  |
|                       |                       | checks with matching  |
|                       |                       | names to the set,     |
|                       |                       | globs with the '-'  |
|                       |                       | prefix remove checks  |
|                       |                       | with matching names   |
|                       |                       | from the set of       |
|                       |                       | enabled checks. This  |
|                       |                       | option's value is    |
|                       |                       | appended to the value |
|                       |                       | of the 'Checks'     |
|                       |                       | option in the         |
|                       |                       | .clang-tidy file, if  |
|                       |                       | any.                  |
+———————–+———————–+———————–+
| CONFIG                | &gt; String              | YAML/JSON format. If  |
|                       |                       | not provided,         |
|                       |                       | clang-tidy will       |
|                       |                       | attempt to find a     |
|                       |                       | file named            |
|                       |                       | .clang-tidy for each  |
|                       |                       | source file in its    |
|                       |                       | parent directories.   |
+———————–+———————–+———————–+
| ERROR_CHECKS         | &gt; String              | Upgrades warnings to  |
|                       |                       | errors. Same format   |
|                       |                       | as 'CHECKS'. This   |
|                       |                       | option's value is    |
|                       |                       | appended to the value |
|                       |                       | of the                |
|                       |                       | 'WarningsAsErrors'  |
|                       |                       | option in the         |
|                       |                       | .clang-tidy file, if  |
|                       |                       | any.                  |
+———————–+———————–+———————–+</p>

<p>Multip Value Argument Keywords:</p>

<p>+———————–+———————–+———————–+
| Keyword               | Type                  | Description           |
+=======================+=======================+=======================+
| ARGUMENTS             | &gt; String              | This supports adding  |
|                       |                       | additional arguments  |
|                       |                       | to be passed to the   |
|                       |                       | clang-tidy. You could |
|                       |                       | just use this if      |
|                       |                       | desired over the      |
|                       |                       | single keywords       |
|                       |                       | except for the ENABLE |
|                       |                       | to pass all arguments |
|                       |                       | to clang-tidy if      |
|                       |                       | desired.              |
+———————–+———————–+———————–+</p>

<p>This configures clang-tidy with default arguments where any violation
will produce compiler warnings.</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CHECKS ${DEFAULT_CLANG_TIDY_CHECKS})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with default arguments where any violation
will produce compiler errors.


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CHECKS ${DEFAULT_CLANG_TIDY_CHECKS} WARNINGS_AS_ERRORS ON)

</code></pre></div></div>

<p>This configures clang-tidy with custom error checks which can be
different from the warning checks where any violation will produce
compiler errors.</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CHECKS ${DEFAULT_CLANG_TIDY_CHECKS} ERROR_CHECKS ${DEFAULT_CLANG_TIDY_CHECKS})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with a header filter. If not provided it will
default to \".\*\".


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} HEADER_FILTER ".*")

</code></pre></div></div>

<p>This configures clang-tidy with line filter as a JSON array of objects.</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} LINE_FILTER “[{“name”:”file1.cpp”,”lines”:[[1,3],[5,7]]},{“name”:”file2.h”}]”)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with config in YAML/JSON format.


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CONFIG ""{Checks: '*', CheckOptions: [{key: x, value: y}]}")

</code></pre></div></div>

<p>This configures clang-tidy to use a .clang-tidy file if no arguments are
provided</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with arguments list.


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} ARGUMENTS ${ARGN})

</code></pre></div></div>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>In some situations, you may want to disable clang-tidy which is
explained <a href="https://clang.llvm.org/extra/clang-tidy/#id3">here</a>.
:::</p>

<h3 id="include-what-you-use-iwyu">Include What You Use (IWYU)</h3>

<p>This CMake macro will add IWYU to a given target</p>

<ul>
  <li><a href="https://github.com/include-what-you-use/include-what-you-use/blob/master/docs/WhyIWYU.md">Why Include What You
Use?</a></li>
  <li><a href="https://github.com/include-what-you-use/include-what-you-use/blob/master/README.md">IWYU
Documentation</a></li>
  <li><a href="https://github.com/include-what-you-use/include-what-you-use/blob/master/docs/IWYUPragmas.md">Exclude headers from
check</a></li>
  <li><a href="https://www.incredibuild.com/blog/include-what-you-use-how-to-best-utilize-this-tool-and-avoid-common-issues/">Avoid Common
Issues</a></li>
</ul>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by an external flag. If not provided it is automatically
enabled.
:::</p>

<p>``` {.sourceCode .cmake}
target_include_what_you_use(${PACKAGE_NAME} ARGUMENTS ${ARGN})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This CMake macro will add IWYU to a given target with default arguments.


``` {.sourceCode .cmake}
target_include_what_you_use(${PACKAGE_NAME} ARGUMENTS ${DEFAULT_IWYU_ARGS})

</code></pre></div></div>

<p>This CMake macro will add IWYU to all targets</p>

<p>``` {.sourceCode .cmake}
include_what_you_use(ARGUMENTS ${ARGN})</p>
<h1 id="or-1">or</h1>
<p>include_what_you_use(ARGUMENTS ${ARGN} ENABLE ${USER_ENABLE_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This CMake macro will add IWYU to all targets with default arguments.


``` {.sourceCode .cmake}
include_what_you_use(ARGUMENTS ${DEFAULT_IWYU_ARGS})
# or
include_what_you_use(ARGUMENTS ${DEFAULT_IWYU_ARGS} ENABLE ${USER_ENABLE_ARG})

</code></pre></div></div>

<p>Clears IWYU so it is not called on any following defined code
compilation. It can be re-enabled by another call to
[include_what_you_use()]{.title-ref}.</p>

<p>``` {.sourceCode .cmake}
reset_include_what_you_use()</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### CppCheck

This CMake macro will add CppCheck to a given target

-   [CppCheck Wiki](https://sourceforge.net/p/cppcheck/wiki/Home/)

::: {.note}
::: {.admonition-title}
Note
:::

Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by the external flag. If not provided it is automatically
enabled.
:::


``` {.sourceCode .cmake}
target_cppcheck(${PACKAGE_NAME} ARGUMENTS ${ARGN})

</code></pre></div></div>

<p>This CMake macro will add CppCheck to a given target with default
arguments.</p>

<p>``` {.sourceCode .cmake}
target_cppcheck(${PACKAGE_NAME} ARGUMENTS ${DEFAULT_CPPCHECK_ARGS})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This CMake macro will add CppCheck to all targets


``` {.sourceCode .cmake}
cppcheck(ARGUMENTS ${ARGN})
# or
cppcheck(ARGUMENTS ${ARGN} ENABLE ${USER_ENABLE_ARG})

</code></pre></div></div>

<p>This CMake macro will add CppCheck to all targets with default
arguments.</p>

<p>``` {.sourceCode .cmake}
cppcheck(ARGUMENTS ${DEFAULT_CPPCHECK_ARGS})</p>
<h1 id="or-2">or</h1>
<p>cppcheck(ARGUMENTS ${DEFAULT_CPPCHECK_ARGS} ENABLE ${USER_ENABLE_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Clears CppCheck so it is not called on any following defined code
compilation. It can be re-enabled by another call to
[cppcheck()]{.title-ref}.


``` {.sourceCode .cmake}
reset_cppcheck()

</code></pre></div></div>

<h3 id="sanitizer-tools">Sanitizer Tools</h3>

<p>Sanitizers are tools that perform checks during a program’s runtime and
returns issues, and as such, along with unit testing, code coverage and
static analysis, is another tool to add to the programmers toolbox. And
of course, like the previous tools, are tragically simple to add into
any project using CMake, allowing any project and developer to quickly
and easily use.</p>

<p>A quick rundown of the tools available, and what they do:</p>

<ul>
  <li>
<a href="https://clang.llvm.org/docs/LeakSanitizer.html">LeakSanitizer</a>
detects memory leaks, or issues where memory is allocated and never
deallocated, causing programs to slowly consume more and more
memory, eventually leading to a crash.</li>
  <li>

    <dl>
      <dt>
<a href="https://clang.llvm.org/docs/AddressSanitizer.html">AddressSanitizer</a> is a fast memory error detector. It is useful for detecting most issues dealing with memory, such as:</dt>
      <dd>
        <ul>
          <li>Out of bounds accesses to heap, stack, global</li>
          <li>Use after free</li>
          <li>Use after return</li>
          <li>Use after scope</li>
          <li>Double-free, invalid free</li>
          <li>Memory leaks (using LeakSanitizer)</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>
<a href="https://clang.llvm.org/docs/ThreadSanitizer.html">ThreadSanitizer</a>
detects data races for multi-threaded code.</li>
  <li>

    <dl>
      <dt>
<a href="https://clang.llvm.org/docs/UndefinedBehaviorSanitizer.html">UndefinedBehaviourSanitizer</a> detects the use of various features of C/C++ that are explicitly listed as resulting in undefined behaviour. Most notably:</dt>
      <dd>
        <ul>
          <li>Using misaligned or null pointer.</li>
          <li>Signed integer overflow</li>
          <li>Conversion to, from, or between floating-point types which
would overflow the destination</li>
          <li>Division by zero</li>
          <li>Unreachable code</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>
<a href="https://clang.llvm.org/docs/MemorySanitizer.html">MemorySanitizer</a>
detects uninitialized reads.</li>
  <li>
<a href="https://clang.llvm.org/docs/ControlFlowIntegrity.html">Control Flow
Integrity</a> is
designed to detect certain forms of undefined behaviour that can
potentially allow attackers to subvert the program's control flow.</li>
</ul>

<p>These are used by declaring the <code class="language-plaintext highlighter-rouge">USE_SANITIZER</code>{.sourceCode} CMake
variable as string containing any of:</p>

<ul>
  <li>Address</li>
  <li>Memory</li>
  <li>MemoryWithOrigins</li>
  <li>Undefined</li>
  <li>Thread</li>
  <li>Leak</li>
  <li>CFI</li>
</ul>

<p>Multiple values are allowed, e.g.
<code class="language-plaintext highlighter-rouge">-DUSE_SANITIZER=Address,Leak</code>{.sourceCode} but some sanitizers cannot
be combined together, e.g. <code class="language-plaintext highlighter-rouge">-DUSE_SANITIZER=Address,Memory</code>{.sourceCode}
will result in configuration error. The delimeter character is not
required and <code class="language-plaintext highlighter-rouge">-DUSE_SANITIZER=AddressLeak</code>{.sourceCode} would work as
well.</p>

<h3 id="cpack">CPack</h3>

<h4 id="configure-package-without-components">Configure Package Without Components</h4>

<p>Configure package for cpack which does not leverage components</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>VERSION - The package version</li>
          <li>MAINTAINER_NAME - The package maintainer name</li>
          <li>MAINTAINER_EMAIL - The package maintainer email</li>
          <li>VENDOR - The package vender</li>
          <li>DESCRIPTION - The package description</li>
          <li>LICENSE_FILE - The package license file</li>
          <li>README_FILE - The package readme</li>
          <li>PACKAGE_PREFIX - The package prefix applied to all cpack
generated files</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>LINUX_BUILD_DEPENDS - The linux build dependencies
required via apt install (If not provided LINUX_DEPENDS is
used)</li>
          <li>WINDOWS_BUILD_DEPENDS - The windows build dependencies
required via nuget install (If not provided WINDOWS_DEPENDS
is used)</li>
          <li>LINUX_DEPENDS - The linux dependencies required via apt
install</li>
          <li>WINDOWS_DEPENDS - The windows dependencies required via
nuget install</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
cpack(
  VERSION ${pkg_extracted_version}
  MAINTAINER <a href="https://github.com/ros-industrial-consortium/tesseract">https://github.com/ros-industrial-consortium/tesseract</a>
  DESCRIPTION ${pkg_extracted_description}
  LICENSE_FILE ${CMAKE_CURRENT_LIST_DIR}/../LICENSE
  README_FILE ${CMAKE_CURRENT_LIST_DIR}/../README.md
  LINUX_DEPENDS
    “libboost-system-dev”
    “libboost-filesystem-dev”
    “libboost-serialization-dev”
    “libconsole-bridge-dev”
    “libtinyxml2-dev”
    “libeigen3-dev”
    “libyaml-cpp-dev”
  WINDOWS_DEPENDS
    “boost_system”
    “boost_filesystem;”
    “boost_serialization”
    “console-bridge”
    “tinyxml2”
    “Eigen3”
    “yaml-cpp”)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#### Configure Package With Components

This requires two macros one used in the components cmake file another
for the top most package cmake file.

##### Configure Component

Configure components for cpack

-   

    One Value Args:

    :   -   COMPONENT - The component name
        -   VERSION - The package version
        -   DESCRIPTION - The package description
        -   PACKAGE\_PREFIX - The package prefix applied to all cpack
            generated files

-   

    Multi Value Args:

    :   -   LINUX\_BUILD\_DEPENDS - The linux build dependencies
            required via apt install (If not provided LINUX\_DEPENDS is
            used)
        -   WINDOWS\_BUILD\_DEPENDS - The windows build dependencies
            required via nuget install (If not provided WINDOWS\_DEPENDS
            is used)
        -   LINUX\_DEPENDS - The linux dependencies required via apt
            install
        -   WINDOWS\_DEPENDS - The windows dependencies required via
            nuget install
        -   COMPONENT\_DEPENDS - The component dependencies required
            from this package


``` {.sourceCode .cmake}
cpack_component(
  COMPONENT IKFAST # must be uppercase
  VERSION ${pkg_extracted_version}
  DESCRIPTION "Tesseract Kinematics ikfast implementation"
  COMPONENT_DEPENDS core)

</code></pre></div></div>

<h5 id="configure-components-package">Configure Components Package</h5>

<p>Configure package leveraging components for cpack</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>VERSION - The package version</li>
          <li>MAINTAINER_NAME - The package maintainer name</li>
          <li>MAINTAINER_EMAIL - The package maintainer email</li>
          <li>VENDOR - The package vender</li>
          <li>DESCRIPTION - The package description</li>
          <li>LICENSE_FILE - The package license file</li>
          <li>README_FILE - The package readme</li>
          <li>PACKAGE_PREFIX - The package prefix applied to all cpack
generated files</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>COMPONENT_DEPENDS - The component dependencies required
from this package</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
cpack_component_package(
  VERSION ${pkg_extracted_version}
  MAINTAINER <a href="https://github.com/ros-industrial-consortium/tesseract">https://github.com/ros-industrial-consortium/tesseract</a>
  DESCRIPTION ${pkg_extracted_description}
  LICENSE_FILE ${CMAKE_CURRENT_LIST_DIR}/../LICENSE
  README_FILE ${CMAKE_CURRENT_LIST_DIR}/../README.md)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
##### Configure Debian Source Package

Create debian source package leveraging cpack for upload to ppa like
launchpad.net

-   

    One Value Args:

    :   -   CHANGLELOG (Required) - The file path to the package
            CHANGELOG.rst
        -   PACKAGE\_PREFIX (Optional) - The package prefix applied to
            all cpack generated files
        -   UPLOAD (Optional) - Indicate if it should be uploaded to ppa
        -   DEBIAN\_INCREMENT - The debian increment to be used, default
            is zero
        -   DPUT\_HOST (Optional/Required) - The ppa to upload to. Only
            required if UPLOAD is enabled
        -   DPUT\_CONFIG\_IN (Optional) - The dput config.in file. If
            not provide one is created.

-   

    Multi Value Args:

    :   -   DISTRIBUTIONS - The linux distrabution to deploy

-   

    Leveraged CPack Variable: When using the cpack macros above these are automatically set

    :   -   CPACK\_PACKAGE\_DESCRIPTION (Required)
        -   CPACK\_PACKAGE\_VERSION (Required)
        -   CPACK\_PACKAGE\_DESCRIPTION\_FILE (Optional)
        -   CPACK\_SOURCE\_IGNORE\_FILES (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_NAME (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_SECTION (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_PRIORITY (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_MAINTAINER (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_MAINTAINER\_NAME (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_MAINTAINER\_EMAIL (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_ARCHITECTURE (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_DESCRIPTION (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_BUILD\_DEPENDS (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_DEPENDS (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_HOMEPAGE (Optional)
        -   [CPACK\_COMPONENT]()\&lt;COMPONENT\&gt;\_DEPENDS (Reqired if
            components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_ARCHITECTURE
            (Reqired if components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_DESCRIPTION (Reqired if
            components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_ARCHITECTURE
            (Reqired if components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_DEPENDS (Reqired if
            components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_BUILD\_DEPENDS
            (Reqired if components exist and enabled)


``` {.sourceCode .cmake}
cpack_debian_source_package(
  CHANGLELOG ${CMAKE_CURRENT_LIST_DIR}/CHANGELOG.rst
  UPLOAD ${RICB_PACKAGE_SOURCE_UPLOAD}
  DPUT_HOST ${RICB_PACKAGE_SOURCE_DPUT_HOST}
  DEBIAN_INCREMENT ${RICB_PACKAGE_SOURCE_DEBIAN_INCREMENT}
  DISTRIBUTIONS ${RICB_PACKAGE_SOURCE_DISTRIBUTIONS}
)

</code></pre></div></div>

<h3 id="configure-pure-cmake-package">Configure (Pure CMake Package)</h3>

<p>This CMake macro simplifies the CMake package configure and install by
performing multiple operations</p>

<h4 id="configure-package">Configure Package</h4>

<p>Performs multiple operation so other packages may find a package</p>

<p>If Namespace is provided but no targets it is assumed targets were
installed and must be exported</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>NAMESPACE - This will prepend &lt;namespace&gt;:: to the target
names as they are written to the import file</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>TARGETS - The targets from the project to be installed</li>
          <li>COMPONENTS - The packages supported find_package components
if any</li>
          <li>DEPENDENCIES - The dependencies to be written to the
packages Config.cmake file</li>
          <li>CFG_EXTRAS - The extra cmake files to be include in the
packages Config.cmake file</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Usage:</dt>
      <dd>
        <ul>
          <li>It installs the provided targets</li>
          <li>It exports the provided targets under the provided namespace</li>
          <li>It installs the package.xml file</li>
          <li>It creates and installs the ${PROJECT_NAME}-config.cmake
and ${PROJECT_NAME}-config-version.cmake</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
configure_package(
  NAMESPACE <package_namespace>
  TARGETS <target_name_a> <target_name_b>
  COMPONENTS <component_name_a> <component_name_b>
  DEPENDENCIES <deps>...
  CFG_EXTRAS <cmake files="">...
)</cmake></deps></component_name_b></component_name_a></target_name_b></target_name_a></package_namespace></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Example:


``` {.sourceCode .cmake}
configure_package(
  NAMESPACE
    tesseract
  TARGETS
    ${PROJECT_NAME}
  DEPENDENCIES
    Eigen3
    TinyXML2
    yaml-cpp
    "Boost COMPONENTS system filesystem serialization"
  CFG_EXTRAS
    cmake/tesseract_common-extras.cmake
)

</code></pre></div></div>

<p>To create the config cmake file, the macro by default looks for a
configuration template <code class="language-plaintext highlighter-rouge">cmake/${PROJECT_NAME}-config.cmake.in</code> provided
by the package. If not present, a default one will be generated. If
generated automatically, package dependencies will be included from the
arguments listed by <code class="language-plaintext highlighter-rouge">DEPENDENCIES</code>. Additional configuration CMake
scripts can also be included with relative paths listed in the
<code class="language-plaintext highlighter-rouge">CFG_EXTRAS</code> argument. The scripts should be installed alongside the
generated package config file, in <code class="language-plaintext highlighter-rouge">lib/cmake/${PROJECT_NAME}</code>.</p>

<h4 id="configure-component">Configure Component</h4>

<p>Performs multiple operation so other packages may find a package's
component</p>

<p>If Namespace is provided but no targets it is assumed targets were
installed and must be exported</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>NAMESPACE - This will prepend &lt;namespace&gt;:: to the target
names as they are written to the import file</li>
          <li>COMPONENT - The component name</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>TARGETS - The targets from the project to be installed</li>
          <li>DEPENDENCIES - The dependencies to be written to the
packages Config.cmake file</li>
          <li>CFG_EXTRAS - The extra cmake files to be include in the
packages Config.cmake file</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Usage:</dt>
      <dd>
        <ul>
          <li>It installs the provided targets</li>
          <li>It exports the provided targets under the provided namespace</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
configure_component(
  COMPONENT <component_name>
  NAMESPACE <package_namespace>
  TARGETS <target_name_a> <target_name_b>
  DEPENDENCIES <deps>...
  CFG_EXTRAS <cmake files="">...
)</cmake></deps></target_name_b></target_name_a></package_namespace></component_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Example:


``` {.sourceCode .cmake}
configure_component(
  COMPONENT
    kdl
  NAMESPACE
    tesseract
  TARGETS
    ${PROJECT_NAME}_kdl ${PROJECT_NAME}_kdl_factories
  DEPENDENCIES
    Eigen3
    TinyXML2
    yaml-cpp
    "Boost COMPONENTS system filesystem serialization"
  CFG_EXTRAS
    cmake/tesseract_common-extras.cmake
)

</code></pre></div></div>

<p>To create the config cmake file, the macro by default looks for a
configuration template <code class="language-plaintext highlighter-rouge">cmake/&lt;COMPONENT_NAME&gt;-config.cmake.in</code> provided
by the package. If not present, a default one will be generated. If
generated automatically, package dependencies will be included from the
arguments listed by <code class="language-plaintext highlighter-rouge">DEPENDENCIES</code>. Additional configuration CMake
scripts can also be included with relative paths listed in the
<code class="language-plaintext highlighter-rouge">CFG_EXTRAS</code> argument. The scripts should be installed alongside the
generated package config file, in <code class="language-plaintext highlighter-rouge">lib/cmake/${PROJECT_NAME}</code>.</p>

<h4 id="sub-macros-used-in-configure-the-package">Sub macros used in configure the package</h4>

<p>The following macros are used by configure_package and can be used
independently if needed</p>

<h5 id="install-targets">Install Targets</h5>

<p>This will install targets along associated with the provided component
and export them to ${ARG_COMPONENT}-targets</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>COMPONENT (Optional) - The component name to associate the
targets with, if not provided ${PROJECT_NAME} is used</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>TARGETS - The targets from the project to be installed</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
install_targets(TARGETS targetA targetb)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
##### Install package.xml

This will install the package.xml file


``` {.sourceCode .cmake}
install_pkgxml()

</code></pre></div></div>

<h5 id="generate-cmake-config-files">Generate CMake Config Files</h5>

<p>Performs multiple operation so other packages may find a package and
package components The default export name is ${PROJECT_NAME} but it
can be overriden by providing EXPORT_NAME</p>

<ul>
  <li>

    <dl>
      <dt>Options:</dt>
      <dd>
        <ul>
          <li>EXPORT - indicate if trargets should be exported</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>COMPONENT (Optional) - the name given to the export
${ARG_COMPONENT}-targets, if not provided PROJECT_NAME is
used</li>
          <li>CONFIG_NAME (Optional) - the name given to the export
${ARG_COMPONENT}-config.cmake, if not provided COMPONENT
is used</li>
          <li>NAMESPACE (Optional) - the namespace assigned for exported
targets</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>DEPENDENCIES (Optional) - list of dependencies to be loaded
in the package config</li>
          <li>CFG_EXTRAS (Optional) - list of extra cmake config files to
be loaded in package config</li>
          <li>SUPPORTED_COMPONENTS (Optional) - list of supported
components</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Usage:</dt>
      <dd>
        <ul>
          <li>generate_package_config(EXPORT NAMSPACE namespace) Install
export targets with provided namespace</li>
          <li>generate_package_config(EXPORT) Install export targets
with no namespace</li>
          <li>generate_package_config() Install cmake config files and
not install export targets</li>
          <li>It exports the provided targets under the provided namespace
${ARG_COMPONENT}-targets, if EXPORT option is set</li>
          <li>It creates and install the
${ARG_CONFIG_NAME}-config.cmake</li>
          <li>In not component, it create and installs
${ARG_CONFIG_NAME}-config-version.cmake</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}</p>
<h1 id="install-and-export-targets-with-provided-namespace">Install and export targets with provided namespace</h1>
<p>generate_package_config(EXPORT NAMSPACE namespace)</p>

<p>#Install and export targets with no namespace
generate_package_config(EXPORT)</p>

<h1 id="install-cmake-config-files-and-not-install-export-targets">Install CMake config files and not install export targets</h1>
<p>generate_package_config() Install CMake config files and not install export targets</p>

<h1 id="install-and-export-targets-for-package-with-components">Install and export targets for package with components</h1>
<p>generate_package_config(EXPORT CONFIG_NAME ${PROJECT_NAME} SUPPORTED_COMPONENTS componentA componentB)</p>

<h1 id="install-and-export-targets-for-component">Install and export targets for component</h1>
<p>generate_package_config(EXPORT
  COMPONENT kdl
  NAMESPACE namespace
  DEPENDENCIES packageA packageB
  CFG_EXTRAS extraA.cmake extraB.cmake)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Additionally, `DEPENDENCIES`, `CFG_EXTRAS` and `SUPPORTED_COMPONENTS`
are passed for generated CMake config files.

##### Install Ament Hooks

Allows Colcon to find non-Ament packages when using workspace underlays


``` {.sourceCode .cmake}
install_ament_hooks()

</code></pre></div></div>

<h3 id="set-target-cxx-version">Set Target CXX VERSION</h3>

<p>This CMake macro simplifies setting the CXX version for the target</p>

<p>``` {.sourceCode .cmake}
target_cxx_version(${PACKAGE_NAME} &lt;INTERFACE|PRIVATE|PUBLIC&gt; VERSION <cxx_version>)</cxx_version></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Example: Set the version to 14 and PUBLIC.


``` {.sourceCode .cmake}
target_cxx_version(${PACKAGE_NAME} PUBLIC VERSION 14)

</code></pre></div></div>

<h3 id="find-gtest-pure-cmake-package">Find GTest (Pure CMake Package)</h3>

<p>This CMake macro calls <code class="language-plaintext highlighter-rouge">find_package(GTest REQUIRED)</code> and checks for the
<code class="language-plaintext highlighter-rouge">GTest::GTest</code> and <code class="language-plaintext highlighter-rouge">GTest::Main</code> targets. If the targets are missing it
will create the targets using the CMake variables.</p>

<p>``` {.sourceCode .cmake}
find_gtest()</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### Add Run Tests Target (Pure CMake Package)

This CMake macro adds a custom target that will run the tests after they
are finished building. You may pass an optional argument true\|false
adding the ability to disable the running of tests as part of the build
for CI which calls make test.

Add run test target (These will automatically run the test after build
finishes)


``` {.sourceCode .cmake}
add_run_tests_target(&lt;TARGET_NAME&gt;)

</code></pre></div></div>

<p>``` {.sourceCode .cmake}
add_run_tests_target(<target_name> true)</target_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Add empty run test target


``` {.sourceCode .cmake}
add_run_tests_target(&lt;TARGET_NAME&gt; false)

</code></pre></div></div>

<h3 id="add-gtest-discover-tests-pure-cmake-package">Add GTest Discover Tests (Pure CMake Package)</h3>

<p>This CMake macro call the appropriate GTest function to add a test based
on the CMake version</p>

<p>``` {.sourceCode .cmake}
add_gtest_discover_tests(<target_name>)</target_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### Add Run Benchmark Target

This CMake macro adds a custom target that will run the benchmarks after
they are finished building.

Add run benchmark target (These will automatically run the benchmark
after build finishes)


``` {.sourceCode .cmake}
add_run_benchmark_target(&lt;TARGET_NAME&gt;)

</code></pre></div></div>

<p>``` {.sourceCode .cmake}
add_run_benchmark_target(<target_name> true)</target_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Add empty run benchmark target


``` {.sourceCode .cmake}
add_run_benchmark_target(&lt;TARGET_NAME&gt; false)

</code></pre></div></div>

<h3 id="code-coverage">Code Coverage</h3>

<p>These CMake macros add code coverage.</p>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Must call <strong>initialize_code_coverage()</strong> after project() in the
CMakeLists.txt. This is required for all examples below.
:::</p>

<p>From this point, there are two primary methods for adding
instrumentation to targets: 1. A blanket instrumentation by calling
[add_code_coverage()]{.title-ref}, where all targets in that directory
and all subdirectories are automatically instrumented. 2. Per-target
instrumentation by calling
[target_code_coverage(&lt;TARGET_NAME&gt;)]{.title-ref}, where the target
is given and thus only that target is instrumented. This applies to both
libraries and executables.</p>

<p>To add coverage targets, such as calling [make ccov]{.title-ref} to
generate the actual coverage information for perusal or consumption,
call [target_code_coverage(&lt;TARGET_NAME&gt;)]{.title-ref} on an
<em>executable</em> target.</p>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by an external flag. If not provided it is automatically
enabled.
:::</p>

<h4 id="exclude-code-from-code-coverage">Exclude Code From Code Coverage</h4>

<p>Keyword             Description
  ——————- —————————————————————————————
  LCOV_EXCL_LINE    Lines containing this marker will be excluded.
  LCOV_EXCL_START   Marks the beginning of an excluded section. The current line is part of this section.
  LCOV_EXCL_STOP    Marks the end of an excluded section. The current line not part of this section.</p>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>You can replace LCOV above with GCOV or GCOVR.
:::</p>

<h4 id="example-1-all-targets-instrumented">Example 1: All targets instrumented</h4>

<p>In this case, the coverage information reported will be that of the
[theLib]{.title-ref} library target and [theExe]{.title-ref} executable.</p>

<h5 id="1a-via-global-command">1a: Via global command</h5>

<p>``` {.sourceCode .cmake}
add_code_coverage() # Adds instrumentation to all targets
add_library(theLib lib.cpp)
add_executable(theExe main.cpp)
target_link_libraries(theExe PRIVATE theLib)
target_code_coverage(theExe) # As an executable target, adds the ‘ccov-theExe’ target (instrumentation already added via global anyways) for generating code coverage reports.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
##### 1b: Via target commands


``` {.sourceCode .cmake}
add_library(theLib lib.cpp)
target_code_coverage(theLib) # As a library target, adds coverage instrumentation but no targets.
add_executable(theExe main.cpp)
target_link_libraries(theExe PRIVATE theLib)
target_code_coverage(theExe) # As an executable target, adds the 'ccov-theExe' target and instrumentation for generating code coverage reports.

</code></pre></div></div>

<h4 id="example-2-target-instrumented-but-with-regex-pattern-of-files-to-be-excluded-from-the-report">Example 2: Target instrumented, but with regex pattern of files to be excluded from the report</h4>

<p>``` {.sourceCode .cmake}
add_executable(theExe main.cpp non_covered.cpp)
target_code_coverage(theExe EXCLUDE non_covered.cpp test/*) # As an executable target, the reports will exclude the non-covered.cpp file, and any files in a test/ folder.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#### Example 3: Target added to the \'ccov\' and \'ccov-all\' targets


``` {.sourceCode .cmake}
add_code_coverage_all_targets(EXCLUDE test/*) # Adds the 'ccov-all' target set and sets it to exclude all files in test/ folders.
add_executable(theExe main.cpp non_covered.cpp)
target_code_coverage(theExe AUTO ALL EXCLUDE non_covered.cpp test/*) # As an executable target, adds to the 'ccov' and ccov-all' targets, and the reports will exclude the non-covered.cpp file, and any files in a test/ folder.

</code></pre></div></div>

<h4 id="example-4-ros-add_rostest_gtest-usage">Example 4: ROS add_rostest_gtest usage</h4>

<p>``` {.sourceCode .cmake}
add_rostest_gtest(test_node test/test_node.test test/test_node.cpp)
target_include_directories(test_node SYSTEM PUBLIC {catkin_INCLUDE_DIRS})
target_link_libraries(test_node ${catkin_LIBRARIES})
target_code_coverage(
  test_node
  ALL
  RUN_COMMAND rostest test_node test_node.test
  EXCLUDE ${COVERAGE_EXCLUDE}
  ENABLE ${ENABLE_CODE_COVERAGE})</p>

<p>```</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>
</div>
              <hr id="humble-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="humble-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#humble-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#humble-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#humble-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="humble-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="humble-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="humble-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros_industrial_cmake_boilerplate">ros_industrial_cmake_boilerplate</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/ros_industrial_cmake_boilerplate">ros_industrial_cmake_boilerplate</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-industrial-ros_industrial_cmake_boilerplate
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-industrial-ros_industrial_cmake_boilerplate" role="menuitem" tabindex="-1" href="/r/ros_industrial_cmake_boilerplate/github-ros-industrial-ros_industrial_cmake_boilerplate" data="github-ros-industrial-ros_industrial_cmake_boilerplate">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-industrial-ros_industrial_cmake_boilerplate
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-industrial/ros_industrial_cmake_boilerplate.git">https://github.com/ros-industrial/ros_industrial_cmake_boilerplate.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-02-11
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ros_industrial_cmake_boilerplate/#jazzy-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros_industrial_cmake_boilerplate/#jazzy-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros_industrial_cmake_boilerplate/#jazzy-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ros_industrial_cmake_boilerplate">ros_industrial_cmake_boilerplate</a></td>
                    <td>0.7.3</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="cmake-boilerplate-scripts">CMake Boilerplate Scripts</h1>

<p><a href="https://opensource.org/licenses/Apache-2.0"><img src="https://img.shields.io/:license-Apache%202.0-yellowgreen.svg" alt="license apache
2.0"></a></p>

<p><a href="https://opensource.org/licenses/BSD-3-Clause"><img src="https://img.shields.io/:license-BSD%203--Clause-orange.svg" alt="license bsd 3
clause"></a></p>

<p>This contains a collection of boilerplate CMake scripts and marcos.</p>

<p>Note: this package is <em>not</em> specific to ROS-Industrial and is usable
with any package which uses CMake. The prefix was added to facilitate
releasing this into different ROS distributions.</p>

<p>::: {.contents depth=”4”}
Table of Contents
:::</p>

<h2 id="create-debian-package-linux-or-nuget-package-windows">Create Debian Package (Linux) or NuGet Package (Windows)</h2>

<p>The following process will generate a Debian or NuGet package leveraging
CMake and CPack based on the OS.</p>

<p>The package should be located in the current directory.</p>

<p><code class="language-plaintext highlighter-rouge">` bash cd &lt;workspace directory&gt; catkin build -DRICB_PACKAGE=ON ./src/ros_industrial_cmake_boilerplate/.run-cpack</code>`</p>

<h2 id="available-macros">Available Macros</h2>

<h3 id="extract-package-metadata">Extract Package Metadata</h3>

<p>This CMake macro will extract the package name and version from a
package.xml file. It will create two cmake variable
<strong>${PREFIX_ARG}_extracted_name</strong> and
<strong>${PREFIX_ARG}_extracted_version</strong>.</p>

<p>``` {.sourceCode .cmake}
extract_package_metadata(${PREFIX_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### Clang Tidy

This CMake macro will add clang-tidy to all targets


``` {.sourceCode .cmake}
clang_tidy(ARGUMENTS ${ARGN})
# or
clang_tidy(ARGUMENTS ${ARGN} ENABLE ${USER_ENABLE_ARG})

</code></pre></div></div>

<p>This CMake macro will add clang-tidy to all targets with default
arguments.</p>

<p>``` {.sourceCode .cmake}
clang_tidy(ARGUMENTS ${DEFAULT_CLANG_TIDY_CHECKS})</p>
<h1 id="or">or</h1>
<p>clang_tidy(ARGUMENTS ${DEFAULT_CLANG_TIDY_CHECKS} ENABLE ${USER_ENABLE_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Clears clang-tidy so it is not called on any following defined code
compilation. It can be re-enabled by another call to
[clang\_tidy()]{.title-ref}.


``` {.sourceCode .cmake}
reset_clang_tidy()

</code></pre></div></div>

<p>This CMake macro will add clang-tidy to a provided target.</p>

<ul>
  <li><a href="https://clang.llvm.org/extra/clang-tidy/">The clang-tidy
documentation</a></li>
  <li><a href="https://clang.llvm.org/extra/clang-tidy/checks/list.html">The list of clang-tidy
checks</a></li>
</ul>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by an external flag. If not provided it is automatically
enabled.
:::</p>

<p>Single Argument Keywords:</p>

<p>+———————–+———————–+———————–+
| Keyword               | Type                  | Description           |
+=======================+=======================+=======================+
| ENABLE                | &gt; ON/OFF              | Enable/Disable        |
|                       |                       | clang-tidy            |
+———————–+———————–+———————–+
| WARNINGS_AS_ERRORS  | &gt; ON/OFF              | Treat warnings as     |
|                       |                       | errors. If            |
|                       |                       | ERROR_CHECKS is not  |
|                       |                       | provided, it will use |
|                       |                       | CHECKS to treat as    |
|                       |                       | errors.               |
+———————–+———————–+———————–+
| HEADER_FILTER        | &gt; String              | Default to '.*' if |
|                       |                       | not provided. Regular |
|                       |                       | expression matching   |
|                       |                       | the names of the      |
|                       |                       | headers to output     |
|                       |                       | diagnostics from.     |
+———————–+———————–+———————–+
| LINE_FILTER          | &gt; String              | List of files with    |
|                       |                       | line ranges to filter |
|                       |                       | the warnings.         |
+———————–+———————–+———————–+
| CHECKS                | &gt; String              | Comma-separated list  |
|                       |                       | of globs with         |
|                       |                       | optional '-'        |
|                       |                       | prefix. Globs are     |
|                       |                       | processed in order of |
|                       |                       | appearance in the     |
|                       |                       | list. Globs without   |
|                       |                       | the '-' prefix add  |
|                       |                       | checks with matching  |
|                       |                       | names to the set,     |
|                       |                       | globs with the '-'  |
|                       |                       | prefix remove checks  |
|                       |                       | with matching names   |
|                       |                       | from the set of       |
|                       |                       | enabled checks. This  |
|                       |                       | option's value is    |
|                       |                       | appended to the value |
|                       |                       | of the 'Checks'     |
|                       |                       | option in the         |
|                       |                       | .clang-tidy file, if  |
|                       |                       | any.                  |
+———————–+———————–+———————–+
| CONFIG                | &gt; String              | YAML/JSON format. If  |
|                       |                       | not provided,         |
|                       |                       | clang-tidy will       |
|                       |                       | attempt to find a     |
|                       |                       | file named            |
|                       |                       | .clang-tidy for each  |
|                       |                       | source file in its    |
|                       |                       | parent directories.   |
+———————–+———————–+———————–+
| ERROR_CHECKS         | &gt; String              | Upgrades warnings to  |
|                       |                       | errors. Same format   |
|                       |                       | as 'CHECKS'. This   |
|                       |                       | option's value is    |
|                       |                       | appended to the value |
|                       |                       | of the                |
|                       |                       | 'WarningsAsErrors'  |
|                       |                       | option in the         |
|                       |                       | .clang-tidy file, if  |
|                       |                       | any.                  |
+———————–+———————–+———————–+</p>

<p>Multip Value Argument Keywords:</p>

<p>+———————–+———————–+———————–+
| Keyword               | Type                  | Description           |
+=======================+=======================+=======================+
| ARGUMENTS             | &gt; String              | This supports adding  |
|                       |                       | additional arguments  |
|                       |                       | to be passed to the   |
|                       |                       | clang-tidy. You could |
|                       |                       | just use this if      |
|                       |                       | desired over the      |
|                       |                       | single keywords       |
|                       |                       | except for the ENABLE |
|                       |                       | to pass all arguments |
|                       |                       | to clang-tidy if      |
|                       |                       | desired.              |
+———————–+———————–+———————–+</p>

<p>This configures clang-tidy with default arguments where any violation
will produce compiler warnings.</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CHECKS ${DEFAULT_CLANG_TIDY_CHECKS})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with default arguments where any violation
will produce compiler errors.


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CHECKS ${DEFAULT_CLANG_TIDY_CHECKS} WARNINGS_AS_ERRORS ON)

</code></pre></div></div>

<p>This configures clang-tidy with custom error checks which can be
different from the warning checks where any violation will produce
compiler errors.</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CHECKS ${DEFAULT_CLANG_TIDY_CHECKS} ERROR_CHECKS ${DEFAULT_CLANG_TIDY_CHECKS})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with a header filter. If not provided it will
default to \".\*\".


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} HEADER_FILTER ".*")

</code></pre></div></div>

<p>This configures clang-tidy with line filter as a JSON array of objects.</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} LINE_FILTER “[{“name”:”file1.cpp”,”lines”:[[1,3],[5,7]]},{“name”:”file2.h”}]”)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with config in YAML/JSON format.


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CONFIG ""{Checks: '*', CheckOptions: [{key: x, value: y}]}")

</code></pre></div></div>

<p>This configures clang-tidy to use a .clang-tidy file if no arguments are
provided</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with arguments list.


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} ARGUMENTS ${ARGN})

</code></pre></div></div>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>In some situations, you may want to disable clang-tidy which is
explained <a href="https://clang.llvm.org/extra/clang-tidy/#id3">here</a>.
:::</p>

<h3 id="include-what-you-use-iwyu">Include What You Use (IWYU)</h3>

<p>This CMake macro will add IWYU to a given target</p>

<ul>
  <li><a href="https://github.com/include-what-you-use/include-what-you-use/blob/master/docs/WhyIWYU.md">Why Include What You
Use?</a></li>
  <li><a href="https://github.com/include-what-you-use/include-what-you-use/blob/master/README.md">IWYU
Documentation</a></li>
  <li><a href="https://github.com/include-what-you-use/include-what-you-use/blob/master/docs/IWYUPragmas.md">Exclude headers from
check</a></li>
  <li><a href="https://www.incredibuild.com/blog/include-what-you-use-how-to-best-utilize-this-tool-and-avoid-common-issues/">Avoid Common
Issues</a></li>
</ul>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by an external flag. If not provided it is automatically
enabled.
:::</p>

<p>``` {.sourceCode .cmake}
target_include_what_you_use(${PACKAGE_NAME} ARGUMENTS ${ARGN})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This CMake macro will add IWYU to a given target with default arguments.


``` {.sourceCode .cmake}
target_include_what_you_use(${PACKAGE_NAME} ARGUMENTS ${DEFAULT_IWYU_ARGS})

</code></pre></div></div>

<p>This CMake macro will add IWYU to all targets</p>

<p>``` {.sourceCode .cmake}
include_what_you_use(ARGUMENTS ${ARGN})</p>
<h1 id="or-1">or</h1>
<p>include_what_you_use(ARGUMENTS ${ARGN} ENABLE ${USER_ENABLE_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This CMake macro will add IWYU to all targets with default arguments.


``` {.sourceCode .cmake}
include_what_you_use(ARGUMENTS ${DEFAULT_IWYU_ARGS})
# or
include_what_you_use(ARGUMENTS ${DEFAULT_IWYU_ARGS} ENABLE ${USER_ENABLE_ARG})

</code></pre></div></div>

<p>Clears IWYU so it is not called on any following defined code
compilation. It can be re-enabled by another call to
[include_what_you_use()]{.title-ref}.</p>

<p>``` {.sourceCode .cmake}
reset_include_what_you_use()</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### CppCheck

This CMake macro will add CppCheck to a given target

-   [CppCheck Wiki](https://sourceforge.net/p/cppcheck/wiki/Home/)

::: {.note}
::: {.admonition-title}
Note
:::

Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by the external flag. If not provided it is automatically
enabled.
:::


``` {.sourceCode .cmake}
target_cppcheck(${PACKAGE_NAME} ARGUMENTS ${ARGN})

</code></pre></div></div>

<p>This CMake macro will add CppCheck to a given target with default
arguments.</p>

<p>``` {.sourceCode .cmake}
target_cppcheck(${PACKAGE_NAME} ARGUMENTS ${DEFAULT_CPPCHECK_ARGS})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This CMake macro will add CppCheck to all targets


``` {.sourceCode .cmake}
cppcheck(ARGUMENTS ${ARGN})
# or
cppcheck(ARGUMENTS ${ARGN} ENABLE ${USER_ENABLE_ARG})

</code></pre></div></div>

<p>This CMake macro will add CppCheck to all targets with default
arguments.</p>

<p>``` {.sourceCode .cmake}
cppcheck(ARGUMENTS ${DEFAULT_CPPCHECK_ARGS})</p>
<h1 id="or-2">or</h1>
<p>cppcheck(ARGUMENTS ${DEFAULT_CPPCHECK_ARGS} ENABLE ${USER_ENABLE_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Clears CppCheck so it is not called on any following defined code
compilation. It can be re-enabled by another call to
[cppcheck()]{.title-ref}.


``` {.sourceCode .cmake}
reset_cppcheck()

</code></pre></div></div>

<h3 id="sanitizer-tools">Sanitizer Tools</h3>

<p>Sanitizers are tools that perform checks during a program’s runtime and
returns issues, and as such, along with unit testing, code coverage and
static analysis, is another tool to add to the programmers toolbox. And
of course, like the previous tools, are tragically simple to add into
any project using CMake, allowing any project and developer to quickly
and easily use.</p>

<p>A quick rundown of the tools available, and what they do:</p>

<ul>
  <li>
<a href="https://clang.llvm.org/docs/LeakSanitizer.html">LeakSanitizer</a>
detects memory leaks, or issues where memory is allocated and never
deallocated, causing programs to slowly consume more and more
memory, eventually leading to a crash.</li>
  <li>

    <dl>
      <dt>
<a href="https://clang.llvm.org/docs/AddressSanitizer.html">AddressSanitizer</a> is a fast memory error detector. It is useful for detecting most issues dealing with memory, such as:</dt>
      <dd>
        <ul>
          <li>Out of bounds accesses to heap, stack, global</li>
          <li>Use after free</li>
          <li>Use after return</li>
          <li>Use after scope</li>
          <li>Double-free, invalid free</li>
          <li>Memory leaks (using LeakSanitizer)</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>
<a href="https://clang.llvm.org/docs/ThreadSanitizer.html">ThreadSanitizer</a>
detects data races for multi-threaded code.</li>
  <li>

    <dl>
      <dt>
<a href="https://clang.llvm.org/docs/UndefinedBehaviorSanitizer.html">UndefinedBehaviourSanitizer</a> detects the use of various features of C/C++ that are explicitly listed as resulting in undefined behaviour. Most notably:</dt>
      <dd>
        <ul>
          <li>Using misaligned or null pointer.</li>
          <li>Signed integer overflow</li>
          <li>Conversion to, from, or between floating-point types which
would overflow the destination</li>
          <li>Division by zero</li>
          <li>Unreachable code</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>
<a href="https://clang.llvm.org/docs/MemorySanitizer.html">MemorySanitizer</a>
detects uninitialized reads.</li>
  <li>
<a href="https://clang.llvm.org/docs/ControlFlowIntegrity.html">Control Flow
Integrity</a> is
designed to detect certain forms of undefined behaviour that can
potentially allow attackers to subvert the program's control flow.</li>
</ul>

<p>These are used by declaring the <code class="language-plaintext highlighter-rouge">USE_SANITIZER</code>{.sourceCode} CMake
variable as string containing any of:</p>

<ul>
  <li>Address</li>
  <li>Memory</li>
  <li>MemoryWithOrigins</li>
  <li>Undefined</li>
  <li>Thread</li>
  <li>Leak</li>
  <li>CFI</li>
</ul>

<p>Multiple values are allowed, e.g.
<code class="language-plaintext highlighter-rouge">-DUSE_SANITIZER=Address,Leak</code>{.sourceCode} but some sanitizers cannot
be combined together, e.g. <code class="language-plaintext highlighter-rouge">-DUSE_SANITIZER=Address,Memory</code>{.sourceCode}
will result in configuration error. The delimeter character is not
required and <code class="language-plaintext highlighter-rouge">-DUSE_SANITIZER=AddressLeak</code>{.sourceCode} would work as
well.</p>

<h3 id="cpack">CPack</h3>

<h4 id="configure-package-without-components">Configure Package Without Components</h4>

<p>Configure package for cpack which does not leverage components</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>VERSION - The package version</li>
          <li>MAINTAINER_NAME - The package maintainer name</li>
          <li>MAINTAINER_EMAIL - The package maintainer email</li>
          <li>VENDOR - The package vender</li>
          <li>DESCRIPTION - The package description</li>
          <li>LICENSE_FILE - The package license file</li>
          <li>README_FILE - The package readme</li>
          <li>PACKAGE_PREFIX - The package prefix applied to all cpack
generated files</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>LINUX_BUILD_DEPENDS - The linux build dependencies
required via apt install (If not provided LINUX_DEPENDS is
used)</li>
          <li>WINDOWS_BUILD_DEPENDS - The windows build dependencies
required via nuget install (If not provided WINDOWS_DEPENDS
is used)</li>
          <li>LINUX_DEPENDS - The linux dependencies required via apt
install</li>
          <li>WINDOWS_DEPENDS - The windows dependencies required via
nuget install</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
cpack(
  VERSION ${pkg_extracted_version}
  MAINTAINER <a href="https://github.com/ros-industrial-consortium/tesseract">https://github.com/ros-industrial-consortium/tesseract</a>
  DESCRIPTION ${pkg_extracted_description}
  LICENSE_FILE ${CMAKE_CURRENT_LIST_DIR}/../LICENSE
  README_FILE ${CMAKE_CURRENT_LIST_DIR}/../README.md
  LINUX_DEPENDS
    “libboost-system-dev”
    “libboost-filesystem-dev”
    “libboost-serialization-dev”
    “libconsole-bridge-dev”
    “libtinyxml2-dev”
    “libeigen3-dev”
    “libyaml-cpp-dev”
  WINDOWS_DEPENDS
    “boost_system”
    “boost_filesystem;”
    “boost_serialization”
    “console-bridge”
    “tinyxml2”
    “Eigen3”
    “yaml-cpp”)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#### Configure Package With Components

This requires two macros one used in the components cmake file another
for the top most package cmake file.

##### Configure Component

Configure components for cpack

-   

    One Value Args:

    :   -   COMPONENT - The component name
        -   VERSION - The package version
        -   DESCRIPTION - The package description
        -   PACKAGE\_PREFIX - The package prefix applied to all cpack
            generated files

-   

    Multi Value Args:

    :   -   LINUX\_BUILD\_DEPENDS - The linux build dependencies
            required via apt install (If not provided LINUX\_DEPENDS is
            used)
        -   WINDOWS\_BUILD\_DEPENDS - The windows build dependencies
            required via nuget install (If not provided WINDOWS\_DEPENDS
            is used)
        -   LINUX\_DEPENDS - The linux dependencies required via apt
            install
        -   WINDOWS\_DEPENDS - The windows dependencies required via
            nuget install
        -   COMPONENT\_DEPENDS - The component dependencies required
            from this package


``` {.sourceCode .cmake}
cpack_component(
  COMPONENT IKFAST # must be uppercase
  VERSION ${pkg_extracted_version}
  DESCRIPTION "Tesseract Kinematics ikfast implementation"
  COMPONENT_DEPENDS core)

</code></pre></div></div>

<h5 id="configure-components-package">Configure Components Package</h5>

<p>Configure package leveraging components for cpack</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>VERSION - The package version</li>
          <li>MAINTAINER_NAME - The package maintainer name</li>
          <li>MAINTAINER_EMAIL - The package maintainer email</li>
          <li>VENDOR - The package vender</li>
          <li>DESCRIPTION - The package description</li>
          <li>LICENSE_FILE - The package license file</li>
          <li>README_FILE - The package readme</li>
          <li>PACKAGE_PREFIX - The package prefix applied to all cpack
generated files</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>COMPONENT_DEPENDS - The component dependencies required
from this package</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
cpack_component_package(
  VERSION ${pkg_extracted_version}
  MAINTAINER <a href="https://github.com/ros-industrial-consortium/tesseract">https://github.com/ros-industrial-consortium/tesseract</a>
  DESCRIPTION ${pkg_extracted_description}
  LICENSE_FILE ${CMAKE_CURRENT_LIST_DIR}/../LICENSE
  README_FILE ${CMAKE_CURRENT_LIST_DIR}/../README.md)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
##### Configure Debian Source Package

Create debian source package leveraging cpack for upload to ppa like
launchpad.net

-   

    One Value Args:

    :   -   CHANGLELOG (Required) - The file path to the package
            CHANGELOG.rst
        -   PACKAGE\_PREFIX (Optional) - The package prefix applied to
            all cpack generated files
        -   UPLOAD (Optional) - Indicate if it should be uploaded to ppa
        -   DEBIAN\_INCREMENT - The debian increment to be used, default
            is zero
        -   DPUT\_HOST (Optional/Required) - The ppa to upload to. Only
            required if UPLOAD is enabled
        -   DPUT\_CONFIG\_IN (Optional) - The dput config.in file. If
            not provide one is created.

-   

    Multi Value Args:

    :   -   DISTRIBUTIONS - The linux distrabution to deploy

-   

    Leveraged CPack Variable: When using the cpack macros above these are automatically set

    :   -   CPACK\_PACKAGE\_DESCRIPTION (Required)
        -   CPACK\_PACKAGE\_VERSION (Required)
        -   CPACK\_PACKAGE\_DESCRIPTION\_FILE (Optional)
        -   CPACK\_SOURCE\_IGNORE\_FILES (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_NAME (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_SECTION (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_PRIORITY (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_MAINTAINER (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_MAINTAINER\_NAME (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_MAINTAINER\_EMAIL (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_ARCHITECTURE (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_DESCRIPTION (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_BUILD\_DEPENDS (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_DEPENDS (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_HOMEPAGE (Optional)
        -   [CPACK\_COMPONENT]()\&lt;COMPONENT\&gt;\_DEPENDS (Reqired if
            components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_ARCHITECTURE
            (Reqired if components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_DESCRIPTION (Reqired if
            components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_ARCHITECTURE
            (Reqired if components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_DEPENDS (Reqired if
            components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_BUILD\_DEPENDS
            (Reqired if components exist and enabled)


``` {.sourceCode .cmake}
cpack_debian_source_package(
  CHANGLELOG ${CMAKE_CURRENT_LIST_DIR}/CHANGELOG.rst
  UPLOAD ${RICB_PACKAGE_SOURCE_UPLOAD}
  DPUT_HOST ${RICB_PACKAGE_SOURCE_DPUT_HOST}
  DEBIAN_INCREMENT ${RICB_PACKAGE_SOURCE_DEBIAN_INCREMENT}
  DISTRIBUTIONS ${RICB_PACKAGE_SOURCE_DISTRIBUTIONS}
)

</code></pre></div></div>

<h3 id="configure-pure-cmake-package">Configure (Pure CMake Package)</h3>

<p>This CMake macro simplifies the CMake package configure and install by
performing multiple operations</p>

<h4 id="configure-package">Configure Package</h4>

<p>Performs multiple operation so other packages may find a package</p>

<p>If Namespace is provided but no targets it is assumed targets were
installed and must be exported</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>NAMESPACE - This will prepend &lt;namespace&gt;:: to the target
names as they are written to the import file</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>TARGETS - The targets from the project to be installed</li>
          <li>COMPONENTS - The packages supported find_package components
if any</li>
          <li>DEPENDENCIES - The dependencies to be written to the
packages Config.cmake file</li>
          <li>CFG_EXTRAS - The extra cmake files to be include in the
packages Config.cmake file</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Usage:</dt>
      <dd>
        <ul>
          <li>It installs the provided targets</li>
          <li>It exports the provided targets under the provided namespace</li>
          <li>It installs the package.xml file</li>
          <li>It creates and installs the ${PROJECT_NAME}-config.cmake
and ${PROJECT_NAME}-config-version.cmake</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
configure_package(
  NAMESPACE <package_namespace>
  TARGETS <target_name_a> <target_name_b>
  COMPONENTS <component_name_a> <component_name_b>
  DEPENDENCIES <deps>...
  CFG_EXTRAS <cmake files="">...
)</cmake></deps></component_name_b></component_name_a></target_name_b></target_name_a></package_namespace></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Example:


``` {.sourceCode .cmake}
configure_package(
  NAMESPACE
    tesseract
  TARGETS
    ${PROJECT_NAME}
  DEPENDENCIES
    Eigen3
    TinyXML2
    yaml-cpp
    "Boost COMPONENTS system filesystem serialization"
  CFG_EXTRAS
    cmake/tesseract_common-extras.cmake
)

</code></pre></div></div>

<p>To create the config cmake file, the macro by default looks for a
configuration template <code class="language-plaintext highlighter-rouge">cmake/${PROJECT_NAME}-config.cmake.in</code> provided
by the package. If not present, a default one will be generated. If
generated automatically, package dependencies will be included from the
arguments listed by <code class="language-plaintext highlighter-rouge">DEPENDENCIES</code>. Additional configuration CMake
scripts can also be included with relative paths listed in the
<code class="language-plaintext highlighter-rouge">CFG_EXTRAS</code> argument. The scripts should be installed alongside the
generated package config file, in <code class="language-plaintext highlighter-rouge">lib/cmake/${PROJECT_NAME}</code>.</p>

<h4 id="configure-component">Configure Component</h4>

<p>Performs multiple operation so other packages may find a package's
component</p>

<p>If Namespace is provided but no targets it is assumed targets were
installed and must be exported</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>NAMESPACE - This will prepend &lt;namespace&gt;:: to the target
names as they are written to the import file</li>
          <li>COMPONENT - The component name</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>TARGETS - The targets from the project to be installed</li>
          <li>DEPENDENCIES - The dependencies to be written to the
packages Config.cmake file</li>
          <li>CFG_EXTRAS - The extra cmake files to be include in the
packages Config.cmake file</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Usage:</dt>
      <dd>
        <ul>
          <li>It installs the provided targets</li>
          <li>It exports the provided targets under the provided namespace</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
configure_component(
  COMPONENT <component_name>
  NAMESPACE <package_namespace>
  TARGETS <target_name_a> <target_name_b>
  DEPENDENCIES <deps>...
  CFG_EXTRAS <cmake files="">...
)</cmake></deps></target_name_b></target_name_a></package_namespace></component_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Example:


``` {.sourceCode .cmake}
configure_component(
  COMPONENT
    kdl
  NAMESPACE
    tesseract
  TARGETS
    ${PROJECT_NAME}_kdl ${PROJECT_NAME}_kdl_factories
  DEPENDENCIES
    Eigen3
    TinyXML2
    yaml-cpp
    "Boost COMPONENTS system filesystem serialization"
  CFG_EXTRAS
    cmake/tesseract_common-extras.cmake
)

</code></pre></div></div>

<p>To create the config cmake file, the macro by default looks for a
configuration template <code class="language-plaintext highlighter-rouge">cmake/&lt;COMPONENT_NAME&gt;-config.cmake.in</code> provided
by the package. If not present, a default one will be generated. If
generated automatically, package dependencies will be included from the
arguments listed by <code class="language-plaintext highlighter-rouge">DEPENDENCIES</code>. Additional configuration CMake
scripts can also be included with relative paths listed in the
<code class="language-plaintext highlighter-rouge">CFG_EXTRAS</code> argument. The scripts should be installed alongside the
generated package config file, in <code class="language-plaintext highlighter-rouge">lib/cmake/${PROJECT_NAME}</code>.</p>

<h4 id="sub-macros-used-in-configure-the-package">Sub macros used in configure the package</h4>

<p>The following macros are used by configure_package and can be used
independently if needed</p>

<h5 id="install-targets">Install Targets</h5>

<p>This will install targets along associated with the provided component
and export them to ${ARG_COMPONENT}-targets</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>COMPONENT (Optional) - The component name to associate the
targets with, if not provided ${PROJECT_NAME} is used</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>TARGETS - The targets from the project to be installed</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
install_targets(TARGETS targetA targetb)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
##### Install package.xml

This will install the package.xml file


``` {.sourceCode .cmake}
install_pkgxml()

</code></pre></div></div>

<h5 id="generate-cmake-config-files">Generate CMake Config Files</h5>

<p>Performs multiple operation so other packages may find a package and
package components The default export name is ${PROJECT_NAME} but it
can be overriden by providing EXPORT_NAME</p>

<ul>
  <li>

    <dl>
      <dt>Options:</dt>
      <dd>
        <ul>
          <li>EXPORT - indicate if trargets should be exported</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>COMPONENT (Optional) - the name given to the export
${ARG_COMPONENT}-targets, if not provided PROJECT_NAME is
used</li>
          <li>CONFIG_NAME (Optional) - the name given to the export
${ARG_COMPONENT}-config.cmake, if not provided COMPONENT
is used</li>
          <li>NAMESPACE (Optional) - the namespace assigned for exported
targets</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>DEPENDENCIES (Optional) - list of dependencies to be loaded
in the package config</li>
          <li>CFG_EXTRAS (Optional) - list of extra cmake config files to
be loaded in package config</li>
          <li>SUPPORTED_COMPONENTS (Optional) - list of supported
components</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Usage:</dt>
      <dd>
        <ul>
          <li>generate_package_config(EXPORT NAMSPACE namespace) Install
export targets with provided namespace</li>
          <li>generate_package_config(EXPORT) Install export targets
with no namespace</li>
          <li>generate_package_config() Install cmake config files and
not install export targets</li>
          <li>It exports the provided targets under the provided namespace
${ARG_COMPONENT}-targets, if EXPORT option is set</li>
          <li>It creates and install the
${ARG_CONFIG_NAME}-config.cmake</li>
          <li>In not component, it create and installs
${ARG_CONFIG_NAME}-config-version.cmake</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}</p>
<h1 id="install-and-export-targets-with-provided-namespace">Install and export targets with provided namespace</h1>
<p>generate_package_config(EXPORT NAMSPACE namespace)</p>

<p>#Install and export targets with no namespace
generate_package_config(EXPORT)</p>

<h1 id="install-cmake-config-files-and-not-install-export-targets">Install CMake config files and not install export targets</h1>
<p>generate_package_config() Install CMake config files and not install export targets</p>

<h1 id="install-and-export-targets-for-package-with-components">Install and export targets for package with components</h1>
<p>generate_package_config(EXPORT CONFIG_NAME ${PROJECT_NAME} SUPPORTED_COMPONENTS componentA componentB)</p>

<h1 id="install-and-export-targets-for-component">Install and export targets for component</h1>
<p>generate_package_config(EXPORT
  COMPONENT kdl
  NAMESPACE namespace
  DEPENDENCIES packageA packageB
  CFG_EXTRAS extraA.cmake extraB.cmake)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Additionally, `DEPENDENCIES`, `CFG_EXTRAS` and `SUPPORTED_COMPONENTS`
are passed for generated CMake config files.

##### Install Ament Hooks

Allows Colcon to find non-Ament packages when using workspace underlays


``` {.sourceCode .cmake}
install_ament_hooks()

</code></pre></div></div>

<h3 id="set-target-cxx-version">Set Target CXX VERSION</h3>

<p>This CMake macro simplifies setting the CXX version for the target</p>

<p>``` {.sourceCode .cmake}
target_cxx_version(${PACKAGE_NAME} &lt;INTERFACE|PRIVATE|PUBLIC&gt; VERSION <cxx_version>)</cxx_version></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Example: Set the version to 14 and PUBLIC.


``` {.sourceCode .cmake}
target_cxx_version(${PACKAGE_NAME} PUBLIC VERSION 14)

</code></pre></div></div>

<h3 id="find-gtest-pure-cmake-package">Find GTest (Pure CMake Package)</h3>

<p>This CMake macro calls <code class="language-plaintext highlighter-rouge">find_package(GTest REQUIRED)</code> and checks for the
<code class="language-plaintext highlighter-rouge">GTest::GTest</code> and <code class="language-plaintext highlighter-rouge">GTest::Main</code> targets. If the targets are missing it
will create the targets using the CMake variables.</p>

<p>``` {.sourceCode .cmake}
find_gtest()</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### Add Run Tests Target (Pure CMake Package)

This CMake macro adds a custom target that will run the tests after they
are finished building. You may pass an optional argument true\|false
adding the ability to disable the running of tests as part of the build
for CI which calls make test.

Add run test target (These will automatically run the test after build
finishes)


``` {.sourceCode .cmake}
add_run_tests_target(&lt;TARGET_NAME&gt;)

</code></pre></div></div>

<p>``` {.sourceCode .cmake}
add_run_tests_target(<target_name> true)</target_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Add empty run test target


``` {.sourceCode .cmake}
add_run_tests_target(&lt;TARGET_NAME&gt; false)

</code></pre></div></div>

<h3 id="add-gtest-discover-tests-pure-cmake-package">Add GTest Discover Tests (Pure CMake Package)</h3>

<p>This CMake macro call the appropriate GTest function to add a test based
on the CMake version</p>

<p>``` {.sourceCode .cmake}
add_gtest_discover_tests(<target_name>)</target_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### Add Run Benchmark Target

This CMake macro adds a custom target that will run the benchmarks after
they are finished building.

Add run benchmark target (These will automatically run the benchmark
after build finishes)


``` {.sourceCode .cmake}
add_run_benchmark_target(&lt;TARGET_NAME&gt;)

</code></pre></div></div>

<p>``` {.sourceCode .cmake}
add_run_benchmark_target(<target_name> true)</target_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Add empty run benchmark target


``` {.sourceCode .cmake}
add_run_benchmark_target(&lt;TARGET_NAME&gt; false)

</code></pre></div></div>

<h3 id="code-coverage">Code Coverage</h3>

<p>These CMake macros add code coverage.</p>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Must call <strong>initialize_code_coverage()</strong> after project() in the
CMakeLists.txt. This is required for all examples below.
:::</p>

<p>From this point, there are two primary methods for adding
instrumentation to targets: 1. A blanket instrumentation by calling
[add_code_coverage()]{.title-ref}, where all targets in that directory
and all subdirectories are automatically instrumented. 2. Per-target
instrumentation by calling
[target_code_coverage(&lt;TARGET_NAME&gt;)]{.title-ref}, where the target
is given and thus only that target is instrumented. This applies to both
libraries and executables.</p>

<p>To add coverage targets, such as calling [make ccov]{.title-ref} to
generate the actual coverage information for perusal or consumption,
call [target_code_coverage(&lt;TARGET_NAME&gt;)]{.title-ref} on an
<em>executable</em> target.</p>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by an external flag. If not provided it is automatically
enabled.
:::</p>

<h4 id="exclude-code-from-code-coverage">Exclude Code From Code Coverage</h4>

<p>Keyword             Description
  ——————- —————————————————————————————
  LCOV_EXCL_LINE    Lines containing this marker will be excluded.
  LCOV_EXCL_START   Marks the beginning of an excluded section. The current line is part of this section.
  LCOV_EXCL_STOP    Marks the end of an excluded section. The current line not part of this section.</p>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>You can replace LCOV above with GCOV or GCOVR.
:::</p>

<h4 id="example-1-all-targets-instrumented">Example 1: All targets instrumented</h4>

<p>In this case, the coverage information reported will be that of the
[theLib]{.title-ref} library target and [theExe]{.title-ref} executable.</p>

<h5 id="1a-via-global-command">1a: Via global command</h5>

<p>``` {.sourceCode .cmake}
add_code_coverage() # Adds instrumentation to all targets
add_library(theLib lib.cpp)
add_executable(theExe main.cpp)
target_link_libraries(theExe PRIVATE theLib)
target_code_coverage(theExe) # As an executable target, adds the ‘ccov-theExe’ target (instrumentation already added via global anyways) for generating code coverage reports.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
##### 1b: Via target commands


``` {.sourceCode .cmake}
add_library(theLib lib.cpp)
target_code_coverage(theLib) # As a library target, adds coverage instrumentation but no targets.
add_executable(theExe main.cpp)
target_link_libraries(theExe PRIVATE theLib)
target_code_coverage(theExe) # As an executable target, adds the 'ccov-theExe' target and instrumentation for generating code coverage reports.

</code></pre></div></div>

<h4 id="example-2-target-instrumented-but-with-regex-pattern-of-files-to-be-excluded-from-the-report">Example 2: Target instrumented, but with regex pattern of files to be excluded from the report</h4>

<p>``` {.sourceCode .cmake}
add_executable(theExe main.cpp non_covered.cpp)
target_code_coverage(theExe EXCLUDE non_covered.cpp test/*) # As an executable target, the reports will exclude the non-covered.cpp file, and any files in a test/ folder.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#### Example 3: Target added to the \'ccov\' and \'ccov-all\' targets


``` {.sourceCode .cmake}
add_code_coverage_all_targets(EXCLUDE test/*) # Adds the 'ccov-all' target set and sets it to exclude all files in test/ folders.
add_executable(theExe main.cpp non_covered.cpp)
target_code_coverage(theExe AUTO ALL EXCLUDE non_covered.cpp test/*) # As an executable target, adds to the 'ccov' and ccov-all' targets, and the reports will exclude the non-covered.cpp file, and any files in a test/ folder.

</code></pre></div></div>

<h4 id="example-4-ros-add_rostest_gtest-usage">Example 4: ROS add_rostest_gtest usage</h4>

<p>``` {.sourceCode .cmake}
add_rostest_gtest(test_node test/test_node.test test/test_node.cpp)
target_include_directories(test_node SYSTEM PUBLIC {catkin_INCLUDE_DIRS})
target_link_libraries(test_node ${catkin_LIBRARIES})
target_code_coverage(
  test_node
  ALL
  RUN_COMMAND rostest test_node test_node.test
  EXCLUDE ${COVERAGE_EXCLUDE}
  ENABLE ${ENABLE_CODE_COVERAGE})</p>

<p>```</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>
</div>
              <hr id="jazzy-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="jazzy-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#jazzy-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#jazzy-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#jazzy-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="jazzy-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="jazzy-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="jazzy-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros_industrial_cmake_boilerplate">ros_industrial_cmake_boilerplate</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/ros_industrial_cmake_boilerplate">ros_industrial_cmake_boilerplate</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-industrial-ros_industrial_cmake_boilerplate
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-industrial-ros_industrial_cmake_boilerplate" role="menuitem" tabindex="-1" href="/r/ros_industrial_cmake_boilerplate/github-ros-industrial-ros_industrial_cmake_boilerplate" data="github-ros-industrial-ros_industrial_cmake_boilerplate">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-industrial-ros_industrial_cmake_boilerplate
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-industrial/ros_industrial_cmake_boilerplate.git">https://github.com/ros-industrial/ros_industrial_cmake_boilerplate.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-02-11
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ros_industrial_cmake_boilerplate/#kilted-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros_industrial_cmake_boilerplate/#kilted-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros_industrial_cmake_boilerplate/#kilted-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ros_industrial_cmake_boilerplate">ros_industrial_cmake_boilerplate</a></td>
                    <td>0.7.3</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="cmake-boilerplate-scripts">CMake Boilerplate Scripts</h1>

<p><a href="https://opensource.org/licenses/Apache-2.0"><img src="https://img.shields.io/:license-Apache%202.0-yellowgreen.svg" alt="license apache
2.0"></a></p>

<p><a href="https://opensource.org/licenses/BSD-3-Clause"><img src="https://img.shields.io/:license-BSD%203--Clause-orange.svg" alt="license bsd 3
clause"></a></p>

<p>This contains a collection of boilerplate CMake scripts and marcos.</p>

<p>Note: this package is <em>not</em> specific to ROS-Industrial and is usable
with any package which uses CMake. The prefix was added to facilitate
releasing this into different ROS distributions.</p>

<p>::: {.contents depth=”4”}
Table of Contents
:::</p>

<h2 id="create-debian-package-linux-or-nuget-package-windows">Create Debian Package (Linux) or NuGet Package (Windows)</h2>

<p>The following process will generate a Debian or NuGet package leveraging
CMake and CPack based on the OS.</p>

<p>The package should be located in the current directory.</p>

<p><code class="language-plaintext highlighter-rouge">` bash cd &lt;workspace directory&gt; catkin build -DRICB_PACKAGE=ON ./src/ros_industrial_cmake_boilerplate/.run-cpack</code>`</p>

<h2 id="available-macros">Available Macros</h2>

<h3 id="extract-package-metadata">Extract Package Metadata</h3>

<p>This CMake macro will extract the package name and version from a
package.xml file. It will create two cmake variable
<strong>${PREFIX_ARG}_extracted_name</strong> and
<strong>${PREFIX_ARG}_extracted_version</strong>.</p>

<p>``` {.sourceCode .cmake}
extract_package_metadata(${PREFIX_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### Clang Tidy

This CMake macro will add clang-tidy to all targets


``` {.sourceCode .cmake}
clang_tidy(ARGUMENTS ${ARGN})
# or
clang_tidy(ARGUMENTS ${ARGN} ENABLE ${USER_ENABLE_ARG})

</code></pre></div></div>

<p>This CMake macro will add clang-tidy to all targets with default
arguments.</p>

<p>``` {.sourceCode .cmake}
clang_tidy(ARGUMENTS ${DEFAULT_CLANG_TIDY_CHECKS})</p>
<h1 id="or">or</h1>
<p>clang_tidy(ARGUMENTS ${DEFAULT_CLANG_TIDY_CHECKS} ENABLE ${USER_ENABLE_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Clears clang-tidy so it is not called on any following defined code
compilation. It can be re-enabled by another call to
[clang\_tidy()]{.title-ref}.


``` {.sourceCode .cmake}
reset_clang_tidy()

</code></pre></div></div>

<p>This CMake macro will add clang-tidy to a provided target.</p>

<ul>
  <li><a href="https://clang.llvm.org/extra/clang-tidy/">The clang-tidy
documentation</a></li>
  <li><a href="https://clang.llvm.org/extra/clang-tidy/checks/list.html">The list of clang-tidy
checks</a></li>
</ul>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by an external flag. If not provided it is automatically
enabled.
:::</p>

<p>Single Argument Keywords:</p>

<p>+———————–+———————–+———————–+
| Keyword               | Type                  | Description           |
+=======================+=======================+=======================+
| ENABLE                | &gt; ON/OFF              | Enable/Disable        |
|                       |                       | clang-tidy            |
+———————–+———————–+———————–+
| WARNINGS_AS_ERRORS  | &gt; ON/OFF              | Treat warnings as     |
|                       |                       | errors. If            |
|                       |                       | ERROR_CHECKS is not  |
|                       |                       | provided, it will use |
|                       |                       | CHECKS to treat as    |
|                       |                       | errors.               |
+———————–+———————–+———————–+
| HEADER_FILTER        | &gt; String              | Default to '.*' if |
|                       |                       | not provided. Regular |
|                       |                       | expression matching   |
|                       |                       | the names of the      |
|                       |                       | headers to output     |
|                       |                       | diagnostics from.     |
+———————–+———————–+———————–+
| LINE_FILTER          | &gt; String              | List of files with    |
|                       |                       | line ranges to filter |
|                       |                       | the warnings.         |
+———————–+———————–+———————–+
| CHECKS                | &gt; String              | Comma-separated list  |
|                       |                       | of globs with         |
|                       |                       | optional '-'        |
|                       |                       | prefix. Globs are     |
|                       |                       | processed in order of |
|                       |                       | appearance in the     |
|                       |                       | list. Globs without   |
|                       |                       | the '-' prefix add  |
|                       |                       | checks with matching  |
|                       |                       | names to the set,     |
|                       |                       | globs with the '-'  |
|                       |                       | prefix remove checks  |
|                       |                       | with matching names   |
|                       |                       | from the set of       |
|                       |                       | enabled checks. This  |
|                       |                       | option's value is    |
|                       |                       | appended to the value |
|                       |                       | of the 'Checks'     |
|                       |                       | option in the         |
|                       |                       | .clang-tidy file, if  |
|                       |                       | any.                  |
+———————–+———————–+———————–+
| CONFIG                | &gt; String              | YAML/JSON format. If  |
|                       |                       | not provided,         |
|                       |                       | clang-tidy will       |
|                       |                       | attempt to find a     |
|                       |                       | file named            |
|                       |                       | .clang-tidy for each  |
|                       |                       | source file in its    |
|                       |                       | parent directories.   |
+———————–+———————–+———————–+
| ERROR_CHECKS         | &gt; String              | Upgrades warnings to  |
|                       |                       | errors. Same format   |
|                       |                       | as 'CHECKS'. This   |
|                       |                       | option's value is    |
|                       |                       | appended to the value |
|                       |                       | of the                |
|                       |                       | 'WarningsAsErrors'  |
|                       |                       | option in the         |
|                       |                       | .clang-tidy file, if  |
|                       |                       | any.                  |
+———————–+———————–+———————–+</p>

<p>Multip Value Argument Keywords:</p>

<p>+———————–+———————–+———————–+
| Keyword               | Type                  | Description           |
+=======================+=======================+=======================+
| ARGUMENTS             | &gt; String              | This supports adding  |
|                       |                       | additional arguments  |
|                       |                       | to be passed to the   |
|                       |                       | clang-tidy. You could |
|                       |                       | just use this if      |
|                       |                       | desired over the      |
|                       |                       | single keywords       |
|                       |                       | except for the ENABLE |
|                       |                       | to pass all arguments |
|                       |                       | to clang-tidy if      |
|                       |                       | desired.              |
+———————–+———————–+———————–+</p>

<p>This configures clang-tidy with default arguments where any violation
will produce compiler warnings.</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CHECKS ${DEFAULT_CLANG_TIDY_CHECKS})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with default arguments where any violation
will produce compiler errors.


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CHECKS ${DEFAULT_CLANG_TIDY_CHECKS} WARNINGS_AS_ERRORS ON)

</code></pre></div></div>

<p>This configures clang-tidy with custom error checks which can be
different from the warning checks where any violation will produce
compiler errors.</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CHECKS ${DEFAULT_CLANG_TIDY_CHECKS} ERROR_CHECKS ${DEFAULT_CLANG_TIDY_CHECKS})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with a header filter. If not provided it will
default to \".\*\".


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} HEADER_FILTER ".*")

</code></pre></div></div>

<p>This configures clang-tidy with line filter as a JSON array of objects.</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} LINE_FILTER “[{“name”:”file1.cpp”,”lines”:[[1,3],[5,7]]},{“name”:”file2.h”}]”)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with config in YAML/JSON format.


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CONFIG ""{Checks: '*', CheckOptions: [{key: x, value: y}]}")

</code></pre></div></div>

<p>This configures clang-tidy to use a .clang-tidy file if no arguments are
provided</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with arguments list.


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} ARGUMENTS ${ARGN})

</code></pre></div></div>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>In some situations, you may want to disable clang-tidy which is
explained <a href="https://clang.llvm.org/extra/clang-tidy/#id3">here</a>.
:::</p>

<h3 id="include-what-you-use-iwyu">Include What You Use (IWYU)</h3>

<p>This CMake macro will add IWYU to a given target</p>

<ul>
  <li><a href="https://github.com/include-what-you-use/include-what-you-use/blob/master/docs/WhyIWYU.md">Why Include What You
Use?</a></li>
  <li><a href="https://github.com/include-what-you-use/include-what-you-use/blob/master/README.md">IWYU
Documentation</a></li>
  <li><a href="https://github.com/include-what-you-use/include-what-you-use/blob/master/docs/IWYUPragmas.md">Exclude headers from
check</a></li>
  <li><a href="https://www.incredibuild.com/blog/include-what-you-use-how-to-best-utilize-this-tool-and-avoid-common-issues/">Avoid Common
Issues</a></li>
</ul>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by an external flag. If not provided it is automatically
enabled.
:::</p>

<p>``` {.sourceCode .cmake}
target_include_what_you_use(${PACKAGE_NAME} ARGUMENTS ${ARGN})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This CMake macro will add IWYU to a given target with default arguments.


``` {.sourceCode .cmake}
target_include_what_you_use(${PACKAGE_NAME} ARGUMENTS ${DEFAULT_IWYU_ARGS})

</code></pre></div></div>

<p>This CMake macro will add IWYU to all targets</p>

<p>``` {.sourceCode .cmake}
include_what_you_use(ARGUMENTS ${ARGN})</p>
<h1 id="or-1">or</h1>
<p>include_what_you_use(ARGUMENTS ${ARGN} ENABLE ${USER_ENABLE_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This CMake macro will add IWYU to all targets with default arguments.


``` {.sourceCode .cmake}
include_what_you_use(ARGUMENTS ${DEFAULT_IWYU_ARGS})
# or
include_what_you_use(ARGUMENTS ${DEFAULT_IWYU_ARGS} ENABLE ${USER_ENABLE_ARG})

</code></pre></div></div>

<p>Clears IWYU so it is not called on any following defined code
compilation. It can be re-enabled by another call to
[include_what_you_use()]{.title-ref}.</p>

<p>``` {.sourceCode .cmake}
reset_include_what_you_use()</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### CppCheck

This CMake macro will add CppCheck to a given target

-   [CppCheck Wiki](https://sourceforge.net/p/cppcheck/wiki/Home/)

::: {.note}
::: {.admonition-title}
Note
:::

Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by the external flag. If not provided it is automatically
enabled.
:::


``` {.sourceCode .cmake}
target_cppcheck(${PACKAGE_NAME} ARGUMENTS ${ARGN})

</code></pre></div></div>

<p>This CMake macro will add CppCheck to a given target with default
arguments.</p>

<p>``` {.sourceCode .cmake}
target_cppcheck(${PACKAGE_NAME} ARGUMENTS ${DEFAULT_CPPCHECK_ARGS})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This CMake macro will add CppCheck to all targets


``` {.sourceCode .cmake}
cppcheck(ARGUMENTS ${ARGN})
# or
cppcheck(ARGUMENTS ${ARGN} ENABLE ${USER_ENABLE_ARG})

</code></pre></div></div>

<p>This CMake macro will add CppCheck to all targets with default
arguments.</p>

<p>``` {.sourceCode .cmake}
cppcheck(ARGUMENTS ${DEFAULT_CPPCHECK_ARGS})</p>
<h1 id="or-2">or</h1>
<p>cppcheck(ARGUMENTS ${DEFAULT_CPPCHECK_ARGS} ENABLE ${USER_ENABLE_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Clears CppCheck so it is not called on any following defined code
compilation. It can be re-enabled by another call to
[cppcheck()]{.title-ref}.


``` {.sourceCode .cmake}
reset_cppcheck()

</code></pre></div></div>

<h3 id="sanitizer-tools">Sanitizer Tools</h3>

<p>Sanitizers are tools that perform checks during a program’s runtime and
returns issues, and as such, along with unit testing, code coverage and
static analysis, is another tool to add to the programmers toolbox. And
of course, like the previous tools, are tragically simple to add into
any project using CMake, allowing any project and developer to quickly
and easily use.</p>

<p>A quick rundown of the tools available, and what they do:</p>

<ul>
  <li>
<a href="https://clang.llvm.org/docs/LeakSanitizer.html">LeakSanitizer</a>
detects memory leaks, or issues where memory is allocated and never
deallocated, causing programs to slowly consume more and more
memory, eventually leading to a crash.</li>
  <li>

    <dl>
      <dt>
<a href="https://clang.llvm.org/docs/AddressSanitizer.html">AddressSanitizer</a> is a fast memory error detector. It is useful for detecting most issues dealing with memory, such as:</dt>
      <dd>
        <ul>
          <li>Out of bounds accesses to heap, stack, global</li>
          <li>Use after free</li>
          <li>Use after return</li>
          <li>Use after scope</li>
          <li>Double-free, invalid free</li>
          <li>Memory leaks (using LeakSanitizer)</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>
<a href="https://clang.llvm.org/docs/ThreadSanitizer.html">ThreadSanitizer</a>
detects data races for multi-threaded code.</li>
  <li>

    <dl>
      <dt>
<a href="https://clang.llvm.org/docs/UndefinedBehaviorSanitizer.html">UndefinedBehaviourSanitizer</a> detects the use of various features of C/C++ that are explicitly listed as resulting in undefined behaviour. Most notably:</dt>
      <dd>
        <ul>
          <li>Using misaligned or null pointer.</li>
          <li>Signed integer overflow</li>
          <li>Conversion to, from, or between floating-point types which
would overflow the destination</li>
          <li>Division by zero</li>
          <li>Unreachable code</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>
<a href="https://clang.llvm.org/docs/MemorySanitizer.html">MemorySanitizer</a>
detects uninitialized reads.</li>
  <li>
<a href="https://clang.llvm.org/docs/ControlFlowIntegrity.html">Control Flow
Integrity</a> is
designed to detect certain forms of undefined behaviour that can
potentially allow attackers to subvert the program's control flow.</li>
</ul>

<p>These are used by declaring the <code class="language-plaintext highlighter-rouge">USE_SANITIZER</code>{.sourceCode} CMake
variable as string containing any of:</p>

<ul>
  <li>Address</li>
  <li>Memory</li>
  <li>MemoryWithOrigins</li>
  <li>Undefined</li>
  <li>Thread</li>
  <li>Leak</li>
  <li>CFI</li>
</ul>

<p>Multiple values are allowed, e.g.
<code class="language-plaintext highlighter-rouge">-DUSE_SANITIZER=Address,Leak</code>{.sourceCode} but some sanitizers cannot
be combined together, e.g. <code class="language-plaintext highlighter-rouge">-DUSE_SANITIZER=Address,Memory</code>{.sourceCode}
will result in configuration error. The delimeter character is not
required and <code class="language-plaintext highlighter-rouge">-DUSE_SANITIZER=AddressLeak</code>{.sourceCode} would work as
well.</p>

<h3 id="cpack">CPack</h3>

<h4 id="configure-package-without-components">Configure Package Without Components</h4>

<p>Configure package for cpack which does not leverage components</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>VERSION - The package version</li>
          <li>MAINTAINER_NAME - The package maintainer name</li>
          <li>MAINTAINER_EMAIL - The package maintainer email</li>
          <li>VENDOR - The package vender</li>
          <li>DESCRIPTION - The package description</li>
          <li>LICENSE_FILE - The package license file</li>
          <li>README_FILE - The package readme</li>
          <li>PACKAGE_PREFIX - The package prefix applied to all cpack
generated files</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>LINUX_BUILD_DEPENDS - The linux build dependencies
required via apt install (If not provided LINUX_DEPENDS is
used)</li>
          <li>WINDOWS_BUILD_DEPENDS - The windows build dependencies
required via nuget install (If not provided WINDOWS_DEPENDS
is used)</li>
          <li>LINUX_DEPENDS - The linux dependencies required via apt
install</li>
          <li>WINDOWS_DEPENDS - The windows dependencies required via
nuget install</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
cpack(
  VERSION ${pkg_extracted_version}
  MAINTAINER <a href="https://github.com/ros-industrial-consortium/tesseract">https://github.com/ros-industrial-consortium/tesseract</a>
  DESCRIPTION ${pkg_extracted_description}
  LICENSE_FILE ${CMAKE_CURRENT_LIST_DIR}/../LICENSE
  README_FILE ${CMAKE_CURRENT_LIST_DIR}/../README.md
  LINUX_DEPENDS
    “libboost-system-dev”
    “libboost-filesystem-dev”
    “libboost-serialization-dev”
    “libconsole-bridge-dev”
    “libtinyxml2-dev”
    “libeigen3-dev”
    “libyaml-cpp-dev”
  WINDOWS_DEPENDS
    “boost_system”
    “boost_filesystem;”
    “boost_serialization”
    “console-bridge”
    “tinyxml2”
    “Eigen3”
    “yaml-cpp”)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#### Configure Package With Components

This requires two macros one used in the components cmake file another
for the top most package cmake file.

##### Configure Component

Configure components for cpack

-   

    One Value Args:

    :   -   COMPONENT - The component name
        -   VERSION - The package version
        -   DESCRIPTION - The package description
        -   PACKAGE\_PREFIX - The package prefix applied to all cpack
            generated files

-   

    Multi Value Args:

    :   -   LINUX\_BUILD\_DEPENDS - The linux build dependencies
            required via apt install (If not provided LINUX\_DEPENDS is
            used)
        -   WINDOWS\_BUILD\_DEPENDS - The windows build dependencies
            required via nuget install (If not provided WINDOWS\_DEPENDS
            is used)
        -   LINUX\_DEPENDS - The linux dependencies required via apt
            install
        -   WINDOWS\_DEPENDS - The windows dependencies required via
            nuget install
        -   COMPONENT\_DEPENDS - The component dependencies required
            from this package


``` {.sourceCode .cmake}
cpack_component(
  COMPONENT IKFAST # must be uppercase
  VERSION ${pkg_extracted_version}
  DESCRIPTION "Tesseract Kinematics ikfast implementation"
  COMPONENT_DEPENDS core)

</code></pre></div></div>

<h5 id="configure-components-package">Configure Components Package</h5>

<p>Configure package leveraging components for cpack</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>VERSION - The package version</li>
          <li>MAINTAINER_NAME - The package maintainer name</li>
          <li>MAINTAINER_EMAIL - The package maintainer email</li>
          <li>VENDOR - The package vender</li>
          <li>DESCRIPTION - The package description</li>
          <li>LICENSE_FILE - The package license file</li>
          <li>README_FILE - The package readme</li>
          <li>PACKAGE_PREFIX - The package prefix applied to all cpack
generated files</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>COMPONENT_DEPENDS - The component dependencies required
from this package</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
cpack_component_package(
  VERSION ${pkg_extracted_version}
  MAINTAINER <a href="https://github.com/ros-industrial-consortium/tesseract">https://github.com/ros-industrial-consortium/tesseract</a>
  DESCRIPTION ${pkg_extracted_description}
  LICENSE_FILE ${CMAKE_CURRENT_LIST_DIR}/../LICENSE
  README_FILE ${CMAKE_CURRENT_LIST_DIR}/../README.md)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
##### Configure Debian Source Package

Create debian source package leveraging cpack for upload to ppa like
launchpad.net

-   

    One Value Args:

    :   -   CHANGLELOG (Required) - The file path to the package
            CHANGELOG.rst
        -   PACKAGE\_PREFIX (Optional) - The package prefix applied to
            all cpack generated files
        -   UPLOAD (Optional) - Indicate if it should be uploaded to ppa
        -   DEBIAN\_INCREMENT - The debian increment to be used, default
            is zero
        -   DPUT\_HOST (Optional/Required) - The ppa to upload to. Only
            required if UPLOAD is enabled
        -   DPUT\_CONFIG\_IN (Optional) - The dput config.in file. If
            not provide one is created.

-   

    Multi Value Args:

    :   -   DISTRIBUTIONS - The linux distrabution to deploy

-   

    Leveraged CPack Variable: When using the cpack macros above these are automatically set

    :   -   CPACK\_PACKAGE\_DESCRIPTION (Required)
        -   CPACK\_PACKAGE\_VERSION (Required)
        -   CPACK\_PACKAGE\_DESCRIPTION\_FILE (Optional)
        -   CPACK\_SOURCE\_IGNORE\_FILES (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_NAME (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_SECTION (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_PRIORITY (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_MAINTAINER (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_MAINTAINER\_NAME (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_MAINTAINER\_EMAIL (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_ARCHITECTURE (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_DESCRIPTION (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_BUILD\_DEPENDS (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_DEPENDS (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_HOMEPAGE (Optional)
        -   [CPACK\_COMPONENT]()\&lt;COMPONENT\&gt;\_DEPENDS (Reqired if
            components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_ARCHITECTURE
            (Reqired if components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_DESCRIPTION (Reqired if
            components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_ARCHITECTURE
            (Reqired if components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_DEPENDS (Reqired if
            components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_BUILD\_DEPENDS
            (Reqired if components exist and enabled)


``` {.sourceCode .cmake}
cpack_debian_source_package(
  CHANGLELOG ${CMAKE_CURRENT_LIST_DIR}/CHANGELOG.rst
  UPLOAD ${RICB_PACKAGE_SOURCE_UPLOAD}
  DPUT_HOST ${RICB_PACKAGE_SOURCE_DPUT_HOST}
  DEBIAN_INCREMENT ${RICB_PACKAGE_SOURCE_DEBIAN_INCREMENT}
  DISTRIBUTIONS ${RICB_PACKAGE_SOURCE_DISTRIBUTIONS}
)

</code></pre></div></div>

<h3 id="configure-pure-cmake-package">Configure (Pure CMake Package)</h3>

<p>This CMake macro simplifies the CMake package configure and install by
performing multiple operations</p>

<h4 id="configure-package">Configure Package</h4>

<p>Performs multiple operation so other packages may find a package</p>

<p>If Namespace is provided but no targets it is assumed targets were
installed and must be exported</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>NAMESPACE - This will prepend &lt;namespace&gt;:: to the target
names as they are written to the import file</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>TARGETS - The targets from the project to be installed</li>
          <li>COMPONENTS - The packages supported find_package components
if any</li>
          <li>DEPENDENCIES - The dependencies to be written to the
packages Config.cmake file</li>
          <li>CFG_EXTRAS - The extra cmake files to be include in the
packages Config.cmake file</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Usage:</dt>
      <dd>
        <ul>
          <li>It installs the provided targets</li>
          <li>It exports the provided targets under the provided namespace</li>
          <li>It installs the package.xml file</li>
          <li>It creates and installs the ${PROJECT_NAME}-config.cmake
and ${PROJECT_NAME}-config-version.cmake</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
configure_package(
  NAMESPACE <package_namespace>
  TARGETS <target_name_a> <target_name_b>
  COMPONENTS <component_name_a> <component_name_b>
  DEPENDENCIES <deps>...
  CFG_EXTRAS <cmake files="">...
)</cmake></deps></component_name_b></component_name_a></target_name_b></target_name_a></package_namespace></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Example:


``` {.sourceCode .cmake}
configure_package(
  NAMESPACE
    tesseract
  TARGETS
    ${PROJECT_NAME}
  DEPENDENCIES
    Eigen3
    TinyXML2
    yaml-cpp
    "Boost COMPONENTS system filesystem serialization"
  CFG_EXTRAS
    cmake/tesseract_common-extras.cmake
)

</code></pre></div></div>

<p>To create the config cmake file, the macro by default looks for a
configuration template <code class="language-plaintext highlighter-rouge">cmake/${PROJECT_NAME}-config.cmake.in</code> provided
by the package. If not present, a default one will be generated. If
generated automatically, package dependencies will be included from the
arguments listed by <code class="language-plaintext highlighter-rouge">DEPENDENCIES</code>. Additional configuration CMake
scripts can also be included with relative paths listed in the
<code class="language-plaintext highlighter-rouge">CFG_EXTRAS</code> argument. The scripts should be installed alongside the
generated package config file, in <code class="language-plaintext highlighter-rouge">lib/cmake/${PROJECT_NAME}</code>.</p>

<h4 id="configure-component">Configure Component</h4>

<p>Performs multiple operation so other packages may find a package's
component</p>

<p>If Namespace is provided but no targets it is assumed targets were
installed and must be exported</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>NAMESPACE - This will prepend &lt;namespace&gt;:: to the target
names as they are written to the import file</li>
          <li>COMPONENT - The component name</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>TARGETS - The targets from the project to be installed</li>
          <li>DEPENDENCIES - The dependencies to be written to the
packages Config.cmake file</li>
          <li>CFG_EXTRAS - The extra cmake files to be include in the
packages Config.cmake file</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Usage:</dt>
      <dd>
        <ul>
          <li>It installs the provided targets</li>
          <li>It exports the provided targets under the provided namespace</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
configure_component(
  COMPONENT <component_name>
  NAMESPACE <package_namespace>
  TARGETS <target_name_a> <target_name_b>
  DEPENDENCIES <deps>...
  CFG_EXTRAS <cmake files="">...
)</cmake></deps></target_name_b></target_name_a></package_namespace></component_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Example:


``` {.sourceCode .cmake}
configure_component(
  COMPONENT
    kdl
  NAMESPACE
    tesseract
  TARGETS
    ${PROJECT_NAME}_kdl ${PROJECT_NAME}_kdl_factories
  DEPENDENCIES
    Eigen3
    TinyXML2
    yaml-cpp
    "Boost COMPONENTS system filesystem serialization"
  CFG_EXTRAS
    cmake/tesseract_common-extras.cmake
)

</code></pre></div></div>

<p>To create the config cmake file, the macro by default looks for a
configuration template <code class="language-plaintext highlighter-rouge">cmake/&lt;COMPONENT_NAME&gt;-config.cmake.in</code> provided
by the package. If not present, a default one will be generated. If
generated automatically, package dependencies will be included from the
arguments listed by <code class="language-plaintext highlighter-rouge">DEPENDENCIES</code>. Additional configuration CMake
scripts can also be included with relative paths listed in the
<code class="language-plaintext highlighter-rouge">CFG_EXTRAS</code> argument. The scripts should be installed alongside the
generated package config file, in <code class="language-plaintext highlighter-rouge">lib/cmake/${PROJECT_NAME}</code>.</p>

<h4 id="sub-macros-used-in-configure-the-package">Sub macros used in configure the package</h4>

<p>The following macros are used by configure_package and can be used
independently if needed</p>

<h5 id="install-targets">Install Targets</h5>

<p>This will install targets along associated with the provided component
and export them to ${ARG_COMPONENT}-targets</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>COMPONENT (Optional) - The component name to associate the
targets with, if not provided ${PROJECT_NAME} is used</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>TARGETS - The targets from the project to be installed</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
install_targets(TARGETS targetA targetb)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
##### Install package.xml

This will install the package.xml file


``` {.sourceCode .cmake}
install_pkgxml()

</code></pre></div></div>

<h5 id="generate-cmake-config-files">Generate CMake Config Files</h5>

<p>Performs multiple operation so other packages may find a package and
package components The default export name is ${PROJECT_NAME} but it
can be overriden by providing EXPORT_NAME</p>

<ul>
  <li>

    <dl>
      <dt>Options:</dt>
      <dd>
        <ul>
          <li>EXPORT - indicate if trargets should be exported</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>COMPONENT (Optional) - the name given to the export
${ARG_COMPONENT}-targets, if not provided PROJECT_NAME is
used</li>
          <li>CONFIG_NAME (Optional) - the name given to the export
${ARG_COMPONENT}-config.cmake, if not provided COMPONENT
is used</li>
          <li>NAMESPACE (Optional) - the namespace assigned for exported
targets</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>DEPENDENCIES (Optional) - list of dependencies to be loaded
in the package config</li>
          <li>CFG_EXTRAS (Optional) - list of extra cmake config files to
be loaded in package config</li>
          <li>SUPPORTED_COMPONENTS (Optional) - list of supported
components</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Usage:</dt>
      <dd>
        <ul>
          <li>generate_package_config(EXPORT NAMSPACE namespace) Install
export targets with provided namespace</li>
          <li>generate_package_config(EXPORT) Install export targets
with no namespace</li>
          <li>generate_package_config() Install cmake config files and
not install export targets</li>
          <li>It exports the provided targets under the provided namespace
${ARG_COMPONENT}-targets, if EXPORT option is set</li>
          <li>It creates and install the
${ARG_CONFIG_NAME}-config.cmake</li>
          <li>In not component, it create and installs
${ARG_CONFIG_NAME}-config-version.cmake</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}</p>
<h1 id="install-and-export-targets-with-provided-namespace">Install and export targets with provided namespace</h1>
<p>generate_package_config(EXPORT NAMSPACE namespace)</p>

<p>#Install and export targets with no namespace
generate_package_config(EXPORT)</p>

<h1 id="install-cmake-config-files-and-not-install-export-targets">Install CMake config files and not install export targets</h1>
<p>generate_package_config() Install CMake config files and not install export targets</p>

<h1 id="install-and-export-targets-for-package-with-components">Install and export targets for package with components</h1>
<p>generate_package_config(EXPORT CONFIG_NAME ${PROJECT_NAME} SUPPORTED_COMPONENTS componentA componentB)</p>

<h1 id="install-and-export-targets-for-component">Install and export targets for component</h1>
<p>generate_package_config(EXPORT
  COMPONENT kdl
  NAMESPACE namespace
  DEPENDENCIES packageA packageB
  CFG_EXTRAS extraA.cmake extraB.cmake)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Additionally, `DEPENDENCIES`, `CFG_EXTRAS` and `SUPPORTED_COMPONENTS`
are passed for generated CMake config files.

##### Install Ament Hooks

Allows Colcon to find non-Ament packages when using workspace underlays


``` {.sourceCode .cmake}
install_ament_hooks()

</code></pre></div></div>

<h3 id="set-target-cxx-version">Set Target CXX VERSION</h3>

<p>This CMake macro simplifies setting the CXX version for the target</p>

<p>``` {.sourceCode .cmake}
target_cxx_version(${PACKAGE_NAME} &lt;INTERFACE|PRIVATE|PUBLIC&gt; VERSION <cxx_version>)</cxx_version></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Example: Set the version to 14 and PUBLIC.


``` {.sourceCode .cmake}
target_cxx_version(${PACKAGE_NAME} PUBLIC VERSION 14)

</code></pre></div></div>

<h3 id="find-gtest-pure-cmake-package">Find GTest (Pure CMake Package)</h3>

<p>This CMake macro calls <code class="language-plaintext highlighter-rouge">find_package(GTest REQUIRED)</code> and checks for the
<code class="language-plaintext highlighter-rouge">GTest::GTest</code> and <code class="language-plaintext highlighter-rouge">GTest::Main</code> targets. If the targets are missing it
will create the targets using the CMake variables.</p>

<p>``` {.sourceCode .cmake}
find_gtest()</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### Add Run Tests Target (Pure CMake Package)

This CMake macro adds a custom target that will run the tests after they
are finished building. You may pass an optional argument true\|false
adding the ability to disable the running of tests as part of the build
for CI which calls make test.

Add run test target (These will automatically run the test after build
finishes)


``` {.sourceCode .cmake}
add_run_tests_target(&lt;TARGET_NAME&gt;)

</code></pre></div></div>

<p>``` {.sourceCode .cmake}
add_run_tests_target(<target_name> true)</target_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Add empty run test target


``` {.sourceCode .cmake}
add_run_tests_target(&lt;TARGET_NAME&gt; false)

</code></pre></div></div>

<h3 id="add-gtest-discover-tests-pure-cmake-package">Add GTest Discover Tests (Pure CMake Package)</h3>

<p>This CMake macro call the appropriate GTest function to add a test based
on the CMake version</p>

<p>``` {.sourceCode .cmake}
add_gtest_discover_tests(<target_name>)</target_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### Add Run Benchmark Target

This CMake macro adds a custom target that will run the benchmarks after
they are finished building.

Add run benchmark target (These will automatically run the benchmark
after build finishes)


``` {.sourceCode .cmake}
add_run_benchmark_target(&lt;TARGET_NAME&gt;)

</code></pre></div></div>

<p>``` {.sourceCode .cmake}
add_run_benchmark_target(<target_name> true)</target_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Add empty run benchmark target


``` {.sourceCode .cmake}
add_run_benchmark_target(&lt;TARGET_NAME&gt; false)

</code></pre></div></div>

<h3 id="code-coverage">Code Coverage</h3>

<p>These CMake macros add code coverage.</p>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Must call <strong>initialize_code_coverage()</strong> after project() in the
CMakeLists.txt. This is required for all examples below.
:::</p>

<p>From this point, there are two primary methods for adding
instrumentation to targets: 1. A blanket instrumentation by calling
[add_code_coverage()]{.title-ref}, where all targets in that directory
and all subdirectories are automatically instrumented. 2. Per-target
instrumentation by calling
[target_code_coverage(&lt;TARGET_NAME&gt;)]{.title-ref}, where the target
is given and thus only that target is instrumented. This applies to both
libraries and executables.</p>

<p>To add coverage targets, such as calling [make ccov]{.title-ref} to
generate the actual coverage information for perusal or consumption,
call [target_code_coverage(&lt;TARGET_NAME&gt;)]{.title-ref} on an
<em>executable</em> target.</p>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by an external flag. If not provided it is automatically
enabled.
:::</p>

<h4 id="exclude-code-from-code-coverage">Exclude Code From Code Coverage</h4>

<p>Keyword             Description
  ——————- —————————————————————————————
  LCOV_EXCL_LINE    Lines containing this marker will be excluded.
  LCOV_EXCL_START   Marks the beginning of an excluded section. The current line is part of this section.
  LCOV_EXCL_STOP    Marks the end of an excluded section. The current line not part of this section.</p>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>You can replace LCOV above with GCOV or GCOVR.
:::</p>

<h4 id="example-1-all-targets-instrumented">Example 1: All targets instrumented</h4>

<p>In this case, the coverage information reported will be that of the
[theLib]{.title-ref} library target and [theExe]{.title-ref} executable.</p>

<h5 id="1a-via-global-command">1a: Via global command</h5>

<p>``` {.sourceCode .cmake}
add_code_coverage() # Adds instrumentation to all targets
add_library(theLib lib.cpp)
add_executable(theExe main.cpp)
target_link_libraries(theExe PRIVATE theLib)
target_code_coverage(theExe) # As an executable target, adds the ‘ccov-theExe’ target (instrumentation already added via global anyways) for generating code coverage reports.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
##### 1b: Via target commands


``` {.sourceCode .cmake}
add_library(theLib lib.cpp)
target_code_coverage(theLib) # As a library target, adds coverage instrumentation but no targets.
add_executable(theExe main.cpp)
target_link_libraries(theExe PRIVATE theLib)
target_code_coverage(theExe) # As an executable target, adds the 'ccov-theExe' target and instrumentation for generating code coverage reports.

</code></pre></div></div>

<h4 id="example-2-target-instrumented-but-with-regex-pattern-of-files-to-be-excluded-from-the-report">Example 2: Target instrumented, but with regex pattern of files to be excluded from the report</h4>

<p>``` {.sourceCode .cmake}
add_executable(theExe main.cpp non_covered.cpp)
target_code_coverage(theExe EXCLUDE non_covered.cpp test/*) # As an executable target, the reports will exclude the non-covered.cpp file, and any files in a test/ folder.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#### Example 3: Target added to the \'ccov\' and \'ccov-all\' targets


``` {.sourceCode .cmake}
add_code_coverage_all_targets(EXCLUDE test/*) # Adds the 'ccov-all' target set and sets it to exclude all files in test/ folders.
add_executable(theExe main.cpp non_covered.cpp)
target_code_coverage(theExe AUTO ALL EXCLUDE non_covered.cpp test/*) # As an executable target, adds to the 'ccov' and ccov-all' targets, and the reports will exclude the non-covered.cpp file, and any files in a test/ folder.

</code></pre></div></div>

<h4 id="example-4-ros-add_rostest_gtest-usage">Example 4: ROS add_rostest_gtest usage</h4>

<p>``` {.sourceCode .cmake}
add_rostest_gtest(test_node test/test_node.test test/test_node.cpp)
target_include_directories(test_node SYSTEM PUBLIC {catkin_INCLUDE_DIRS})
target_link_libraries(test_node ${catkin_LIBRARIES})
target_code_coverage(
  test_node
  ALL
  RUN_COMMAND rostest test_node test_node.test
  EXCLUDE ${COVERAGE_EXCLUDE}
  ENABLE ${ENABLE_CODE_COVERAGE})</p>

<p>```</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>
</div>
              <hr id="kilted-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="kilted-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#kilted-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#kilted-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#kilted-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="kilted-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="kilted-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="kilted-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros_industrial_cmake_boilerplate">ros_industrial_cmake_boilerplate</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/ros_industrial_cmake_boilerplate">ros_industrial_cmake_boilerplate</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-industrial-ros_industrial_cmake_boilerplate
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-industrial-ros_industrial_cmake_boilerplate" role="menuitem" tabindex="-1" href="/r/ros_industrial_cmake_boilerplate/github-ros-industrial-ros_industrial_cmake_boilerplate" data="github-ros-industrial-ros_industrial_cmake_boilerplate">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-industrial-ros_industrial_cmake_boilerplate
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-industrial/ros_industrial_cmake_boilerplate.git">https://github.com/ros-industrial/ros_industrial_cmake_boilerplate.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-02-11
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ros_industrial_cmake_boilerplate/#rolling-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros_industrial_cmake_boilerplate/#rolling-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros_industrial_cmake_boilerplate/#rolling-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ros_industrial_cmake_boilerplate">ros_industrial_cmake_boilerplate</a></td>
                    <td>0.7.3</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="cmake-boilerplate-scripts">CMake Boilerplate Scripts</h1>

<p><a href="https://opensource.org/licenses/Apache-2.0"><img src="https://img.shields.io/:license-Apache%202.0-yellowgreen.svg" alt="license apache
2.0"></a></p>

<p><a href="https://opensource.org/licenses/BSD-3-Clause"><img src="https://img.shields.io/:license-BSD%203--Clause-orange.svg" alt="license bsd 3
clause"></a></p>

<p>This contains a collection of boilerplate CMake scripts and marcos.</p>

<p>Note: this package is <em>not</em> specific to ROS-Industrial and is usable
with any package which uses CMake. The prefix was added to facilitate
releasing this into different ROS distributions.</p>

<p>::: {.contents depth=”4”}
Table of Contents
:::</p>

<h2 id="create-debian-package-linux-or-nuget-package-windows">Create Debian Package (Linux) or NuGet Package (Windows)</h2>

<p>The following process will generate a Debian or NuGet package leveraging
CMake and CPack based on the OS.</p>

<p>The package should be located in the current directory.</p>

<p><code class="language-plaintext highlighter-rouge">` bash cd &lt;workspace directory&gt; catkin build -DRICB_PACKAGE=ON ./src/ros_industrial_cmake_boilerplate/.run-cpack</code>`</p>

<h2 id="available-macros">Available Macros</h2>

<h3 id="extract-package-metadata">Extract Package Metadata</h3>

<p>This CMake macro will extract the package name and version from a
package.xml file. It will create two cmake variable
<strong>${PREFIX_ARG}_extracted_name</strong> and
<strong>${PREFIX_ARG}_extracted_version</strong>.</p>

<p>``` {.sourceCode .cmake}
extract_package_metadata(${PREFIX_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### Clang Tidy

This CMake macro will add clang-tidy to all targets


``` {.sourceCode .cmake}
clang_tidy(ARGUMENTS ${ARGN})
# or
clang_tidy(ARGUMENTS ${ARGN} ENABLE ${USER_ENABLE_ARG})

</code></pre></div></div>

<p>This CMake macro will add clang-tidy to all targets with default
arguments.</p>

<p>``` {.sourceCode .cmake}
clang_tidy(ARGUMENTS ${DEFAULT_CLANG_TIDY_CHECKS})</p>
<h1 id="or">or</h1>
<p>clang_tidy(ARGUMENTS ${DEFAULT_CLANG_TIDY_CHECKS} ENABLE ${USER_ENABLE_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Clears clang-tidy so it is not called on any following defined code
compilation. It can be re-enabled by another call to
[clang\_tidy()]{.title-ref}.


``` {.sourceCode .cmake}
reset_clang_tidy()

</code></pre></div></div>

<p>This CMake macro will add clang-tidy to a provided target.</p>

<ul>
  <li><a href="https://clang.llvm.org/extra/clang-tidy/">The clang-tidy
documentation</a></li>
  <li><a href="https://clang.llvm.org/extra/clang-tidy/checks/list.html">The list of clang-tidy
checks</a></li>
</ul>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by an external flag. If not provided it is automatically
enabled.
:::</p>

<p>Single Argument Keywords:</p>

<p>+———————–+———————–+———————–+
| Keyword               | Type                  | Description           |
+=======================+=======================+=======================+
| ENABLE                | &gt; ON/OFF              | Enable/Disable        |
|                       |                       | clang-tidy            |
+———————–+———————–+———————–+
| WARNINGS_AS_ERRORS  | &gt; ON/OFF              | Treat warnings as     |
|                       |                       | errors. If            |
|                       |                       | ERROR_CHECKS is not  |
|                       |                       | provided, it will use |
|                       |                       | CHECKS to treat as    |
|                       |                       | errors.               |
+———————–+———————–+———————–+
| HEADER_FILTER        | &gt; String              | Default to '.*' if |
|                       |                       | not provided. Regular |
|                       |                       | expression matching   |
|                       |                       | the names of the      |
|                       |                       | headers to output     |
|                       |                       | diagnostics from.     |
+———————–+———————–+———————–+
| LINE_FILTER          | &gt; String              | List of files with    |
|                       |                       | line ranges to filter |
|                       |                       | the warnings.         |
+———————–+———————–+———————–+
| CHECKS                | &gt; String              | Comma-separated list  |
|                       |                       | of globs with         |
|                       |                       | optional '-'        |
|                       |                       | prefix. Globs are     |
|                       |                       | processed in order of |
|                       |                       | appearance in the     |
|                       |                       | list. Globs without   |
|                       |                       | the '-' prefix add  |
|                       |                       | checks with matching  |
|                       |                       | names to the set,     |
|                       |                       | globs with the '-'  |
|                       |                       | prefix remove checks  |
|                       |                       | with matching names   |
|                       |                       | from the set of       |
|                       |                       | enabled checks. This  |
|                       |                       | option's value is    |
|                       |                       | appended to the value |
|                       |                       | of the 'Checks'     |
|                       |                       | option in the         |
|                       |                       | .clang-tidy file, if  |
|                       |                       | any.                  |
+———————–+———————–+———————–+
| CONFIG                | &gt; String              | YAML/JSON format. If  |
|                       |                       | not provided,         |
|                       |                       | clang-tidy will       |
|                       |                       | attempt to find a     |
|                       |                       | file named            |
|                       |                       | .clang-tidy for each  |
|                       |                       | source file in its    |
|                       |                       | parent directories.   |
+———————–+———————–+———————–+
| ERROR_CHECKS         | &gt; String              | Upgrades warnings to  |
|                       |                       | errors. Same format   |
|                       |                       | as 'CHECKS'. This   |
|                       |                       | option's value is    |
|                       |                       | appended to the value |
|                       |                       | of the                |
|                       |                       | 'WarningsAsErrors'  |
|                       |                       | option in the         |
|                       |                       | .clang-tidy file, if  |
|                       |                       | any.                  |
+———————–+———————–+———————–+</p>

<p>Multip Value Argument Keywords:</p>

<p>+———————–+———————–+———————–+
| Keyword               | Type                  | Description           |
+=======================+=======================+=======================+
| ARGUMENTS             | &gt; String              | This supports adding  |
|                       |                       | additional arguments  |
|                       |                       | to be passed to the   |
|                       |                       | clang-tidy. You could |
|                       |                       | just use this if      |
|                       |                       | desired over the      |
|                       |                       | single keywords       |
|                       |                       | except for the ENABLE |
|                       |                       | to pass all arguments |
|                       |                       | to clang-tidy if      |
|                       |                       | desired.              |
+———————–+———————–+———————–+</p>

<p>This configures clang-tidy with default arguments where any violation
will produce compiler warnings.</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CHECKS ${DEFAULT_CLANG_TIDY_CHECKS})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with default arguments where any violation
will produce compiler errors.


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CHECKS ${DEFAULT_CLANG_TIDY_CHECKS} WARNINGS_AS_ERRORS ON)

</code></pre></div></div>

<p>This configures clang-tidy with custom error checks which can be
different from the warning checks where any violation will produce
compiler errors.</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CHECKS ${DEFAULT_CLANG_TIDY_CHECKS} ERROR_CHECKS ${DEFAULT_CLANG_TIDY_CHECKS})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with a header filter. If not provided it will
default to \".\*\".


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} HEADER_FILTER ".*")

</code></pre></div></div>

<p>This configures clang-tidy with line filter as a JSON array of objects.</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} LINE_FILTER “[{“name”:”file1.cpp”,”lines”:[[1,3],[5,7]]},{“name”:”file2.h”}]”)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with config in YAML/JSON format.


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CONFIG ""{Checks: '*', CheckOptions: [{key: x, value: y}]}")

</code></pre></div></div>

<p>This configures clang-tidy to use a .clang-tidy file if no arguments are
provided</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with arguments list.


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} ARGUMENTS ${ARGN})

</code></pre></div></div>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>In some situations, you may want to disable clang-tidy which is
explained <a href="https://clang.llvm.org/extra/clang-tidy/#id3">here</a>.
:::</p>

<h3 id="include-what-you-use-iwyu">Include What You Use (IWYU)</h3>

<p>This CMake macro will add IWYU to a given target</p>

<ul>
  <li><a href="https://github.com/include-what-you-use/include-what-you-use/blob/master/docs/WhyIWYU.md">Why Include What You
Use?</a></li>
  <li><a href="https://github.com/include-what-you-use/include-what-you-use/blob/master/README.md">IWYU
Documentation</a></li>
  <li><a href="https://github.com/include-what-you-use/include-what-you-use/blob/master/docs/IWYUPragmas.md">Exclude headers from
check</a></li>
  <li><a href="https://www.incredibuild.com/blog/include-what-you-use-how-to-best-utilize-this-tool-and-avoid-common-issues/">Avoid Common
Issues</a></li>
</ul>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by an external flag. If not provided it is automatically
enabled.
:::</p>

<p>``` {.sourceCode .cmake}
target_include_what_you_use(${PACKAGE_NAME} ARGUMENTS ${ARGN})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This CMake macro will add IWYU to a given target with default arguments.


``` {.sourceCode .cmake}
target_include_what_you_use(${PACKAGE_NAME} ARGUMENTS ${DEFAULT_IWYU_ARGS})

</code></pre></div></div>

<p>This CMake macro will add IWYU to all targets</p>

<p>``` {.sourceCode .cmake}
include_what_you_use(ARGUMENTS ${ARGN})</p>
<h1 id="or-1">or</h1>
<p>include_what_you_use(ARGUMENTS ${ARGN} ENABLE ${USER_ENABLE_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This CMake macro will add IWYU to all targets with default arguments.


``` {.sourceCode .cmake}
include_what_you_use(ARGUMENTS ${DEFAULT_IWYU_ARGS})
# or
include_what_you_use(ARGUMENTS ${DEFAULT_IWYU_ARGS} ENABLE ${USER_ENABLE_ARG})

</code></pre></div></div>

<p>Clears IWYU so it is not called on any following defined code
compilation. It can be re-enabled by another call to
[include_what_you_use()]{.title-ref}.</p>

<p>``` {.sourceCode .cmake}
reset_include_what_you_use()</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### CppCheck

This CMake macro will add CppCheck to a given target

-   [CppCheck Wiki](https://sourceforge.net/p/cppcheck/wiki/Home/)

::: {.note}
::: {.admonition-title}
Note
:::

Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by the external flag. If not provided it is automatically
enabled.
:::


``` {.sourceCode .cmake}
target_cppcheck(${PACKAGE_NAME} ARGUMENTS ${ARGN})

</code></pre></div></div>

<p>This CMake macro will add CppCheck to a given target with default
arguments.</p>

<p>``` {.sourceCode .cmake}
target_cppcheck(${PACKAGE_NAME} ARGUMENTS ${DEFAULT_CPPCHECK_ARGS})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This CMake macro will add CppCheck to all targets


``` {.sourceCode .cmake}
cppcheck(ARGUMENTS ${ARGN})
# or
cppcheck(ARGUMENTS ${ARGN} ENABLE ${USER_ENABLE_ARG})

</code></pre></div></div>

<p>This CMake macro will add CppCheck to all targets with default
arguments.</p>

<p>``` {.sourceCode .cmake}
cppcheck(ARGUMENTS ${DEFAULT_CPPCHECK_ARGS})</p>
<h1 id="or-2">or</h1>
<p>cppcheck(ARGUMENTS ${DEFAULT_CPPCHECK_ARGS} ENABLE ${USER_ENABLE_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Clears CppCheck so it is not called on any following defined code
compilation. It can be re-enabled by another call to
[cppcheck()]{.title-ref}.


``` {.sourceCode .cmake}
reset_cppcheck()

</code></pre></div></div>

<h3 id="sanitizer-tools">Sanitizer Tools</h3>

<p>Sanitizers are tools that perform checks during a program’s runtime and
returns issues, and as such, along with unit testing, code coverage and
static analysis, is another tool to add to the programmers toolbox. And
of course, like the previous tools, are tragically simple to add into
any project using CMake, allowing any project and developer to quickly
and easily use.</p>

<p>A quick rundown of the tools available, and what they do:</p>

<ul>
  <li>
<a href="https://clang.llvm.org/docs/LeakSanitizer.html">LeakSanitizer</a>
detects memory leaks, or issues where memory is allocated and never
deallocated, causing programs to slowly consume more and more
memory, eventually leading to a crash.</li>
  <li>

    <dl>
      <dt>
<a href="https://clang.llvm.org/docs/AddressSanitizer.html">AddressSanitizer</a> is a fast memory error detector. It is useful for detecting most issues dealing with memory, such as:</dt>
      <dd>
        <ul>
          <li>Out of bounds accesses to heap, stack, global</li>
          <li>Use after free</li>
          <li>Use after return</li>
          <li>Use after scope</li>
          <li>Double-free, invalid free</li>
          <li>Memory leaks (using LeakSanitizer)</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>
<a href="https://clang.llvm.org/docs/ThreadSanitizer.html">ThreadSanitizer</a>
detects data races for multi-threaded code.</li>
  <li>

    <dl>
      <dt>
<a href="https://clang.llvm.org/docs/UndefinedBehaviorSanitizer.html">UndefinedBehaviourSanitizer</a> detects the use of various features of C/C++ that are explicitly listed as resulting in undefined behaviour. Most notably:</dt>
      <dd>
        <ul>
          <li>Using misaligned or null pointer.</li>
          <li>Signed integer overflow</li>
          <li>Conversion to, from, or between floating-point types which
would overflow the destination</li>
          <li>Division by zero</li>
          <li>Unreachable code</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>
<a href="https://clang.llvm.org/docs/MemorySanitizer.html">MemorySanitizer</a>
detects uninitialized reads.</li>
  <li>
<a href="https://clang.llvm.org/docs/ControlFlowIntegrity.html">Control Flow
Integrity</a> is
designed to detect certain forms of undefined behaviour that can
potentially allow attackers to subvert the program's control flow.</li>
</ul>

<p>These are used by declaring the <code class="language-plaintext highlighter-rouge">USE_SANITIZER</code>{.sourceCode} CMake
variable as string containing any of:</p>

<ul>
  <li>Address</li>
  <li>Memory</li>
  <li>MemoryWithOrigins</li>
  <li>Undefined</li>
  <li>Thread</li>
  <li>Leak</li>
  <li>CFI</li>
</ul>

<p>Multiple values are allowed, e.g.
<code class="language-plaintext highlighter-rouge">-DUSE_SANITIZER=Address,Leak</code>{.sourceCode} but some sanitizers cannot
be combined together, e.g. <code class="language-plaintext highlighter-rouge">-DUSE_SANITIZER=Address,Memory</code>{.sourceCode}
will result in configuration error. The delimeter character is not
required and <code class="language-plaintext highlighter-rouge">-DUSE_SANITIZER=AddressLeak</code>{.sourceCode} would work as
well.</p>

<h3 id="cpack">CPack</h3>

<h4 id="configure-package-without-components">Configure Package Without Components</h4>

<p>Configure package for cpack which does not leverage components</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>VERSION - The package version</li>
          <li>MAINTAINER_NAME - The package maintainer name</li>
          <li>MAINTAINER_EMAIL - The package maintainer email</li>
          <li>VENDOR - The package vender</li>
          <li>DESCRIPTION - The package description</li>
          <li>LICENSE_FILE - The package license file</li>
          <li>README_FILE - The package readme</li>
          <li>PACKAGE_PREFIX - The package prefix applied to all cpack
generated files</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>LINUX_BUILD_DEPENDS - The linux build dependencies
required via apt install (If not provided LINUX_DEPENDS is
used)</li>
          <li>WINDOWS_BUILD_DEPENDS - The windows build dependencies
required via nuget install (If not provided WINDOWS_DEPENDS
is used)</li>
          <li>LINUX_DEPENDS - The linux dependencies required via apt
install</li>
          <li>WINDOWS_DEPENDS - The windows dependencies required via
nuget install</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
cpack(
  VERSION ${pkg_extracted_version}
  MAINTAINER <a href="https://github.com/ros-industrial-consortium/tesseract">https://github.com/ros-industrial-consortium/tesseract</a>
  DESCRIPTION ${pkg_extracted_description}
  LICENSE_FILE ${CMAKE_CURRENT_LIST_DIR}/../LICENSE
  README_FILE ${CMAKE_CURRENT_LIST_DIR}/../README.md
  LINUX_DEPENDS
    “libboost-system-dev”
    “libboost-filesystem-dev”
    “libboost-serialization-dev”
    “libconsole-bridge-dev”
    “libtinyxml2-dev”
    “libeigen3-dev”
    “libyaml-cpp-dev”
  WINDOWS_DEPENDS
    “boost_system”
    “boost_filesystem;”
    “boost_serialization”
    “console-bridge”
    “tinyxml2”
    “Eigen3”
    “yaml-cpp”)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#### Configure Package With Components

This requires two macros one used in the components cmake file another
for the top most package cmake file.

##### Configure Component

Configure components for cpack

-   

    One Value Args:

    :   -   COMPONENT - The component name
        -   VERSION - The package version
        -   DESCRIPTION - The package description
        -   PACKAGE\_PREFIX - The package prefix applied to all cpack
            generated files

-   

    Multi Value Args:

    :   -   LINUX\_BUILD\_DEPENDS - The linux build dependencies
            required via apt install (If not provided LINUX\_DEPENDS is
            used)
        -   WINDOWS\_BUILD\_DEPENDS - The windows build dependencies
            required via nuget install (If not provided WINDOWS\_DEPENDS
            is used)
        -   LINUX\_DEPENDS - The linux dependencies required via apt
            install
        -   WINDOWS\_DEPENDS - The windows dependencies required via
            nuget install
        -   COMPONENT\_DEPENDS - The component dependencies required
            from this package


``` {.sourceCode .cmake}
cpack_component(
  COMPONENT IKFAST # must be uppercase
  VERSION ${pkg_extracted_version}
  DESCRIPTION "Tesseract Kinematics ikfast implementation"
  COMPONENT_DEPENDS core)

</code></pre></div></div>

<h5 id="configure-components-package">Configure Components Package</h5>

<p>Configure package leveraging components for cpack</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>VERSION - The package version</li>
          <li>MAINTAINER_NAME - The package maintainer name</li>
          <li>MAINTAINER_EMAIL - The package maintainer email</li>
          <li>VENDOR - The package vender</li>
          <li>DESCRIPTION - The package description</li>
          <li>LICENSE_FILE - The package license file</li>
          <li>README_FILE - The package readme</li>
          <li>PACKAGE_PREFIX - The package prefix applied to all cpack
generated files</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>COMPONENT_DEPENDS - The component dependencies required
from this package</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
cpack_component_package(
  VERSION ${pkg_extracted_version}
  MAINTAINER <a href="https://github.com/ros-industrial-consortium/tesseract">https://github.com/ros-industrial-consortium/tesseract</a>
  DESCRIPTION ${pkg_extracted_description}
  LICENSE_FILE ${CMAKE_CURRENT_LIST_DIR}/../LICENSE
  README_FILE ${CMAKE_CURRENT_LIST_DIR}/../README.md)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
##### Configure Debian Source Package

Create debian source package leveraging cpack for upload to ppa like
launchpad.net

-   

    One Value Args:

    :   -   CHANGLELOG (Required) - The file path to the package
            CHANGELOG.rst
        -   PACKAGE\_PREFIX (Optional) - The package prefix applied to
            all cpack generated files
        -   UPLOAD (Optional) - Indicate if it should be uploaded to ppa
        -   DEBIAN\_INCREMENT - The debian increment to be used, default
            is zero
        -   DPUT\_HOST (Optional/Required) - The ppa to upload to. Only
            required if UPLOAD is enabled
        -   DPUT\_CONFIG\_IN (Optional) - The dput config.in file. If
            not provide one is created.

-   

    Multi Value Args:

    :   -   DISTRIBUTIONS - The linux distrabution to deploy

-   

    Leveraged CPack Variable: When using the cpack macros above these are automatically set

    :   -   CPACK\_PACKAGE\_DESCRIPTION (Required)
        -   CPACK\_PACKAGE\_VERSION (Required)
        -   CPACK\_PACKAGE\_DESCRIPTION\_FILE (Optional)
        -   CPACK\_SOURCE\_IGNORE\_FILES (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_NAME (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_SECTION (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_PRIORITY (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_MAINTAINER (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_MAINTAINER\_NAME (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_MAINTAINER\_EMAIL (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_ARCHITECTURE (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_DESCRIPTION (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_BUILD\_DEPENDS (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_DEPENDS (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_HOMEPAGE (Optional)
        -   [CPACK\_COMPONENT]()\&lt;COMPONENT\&gt;\_DEPENDS (Reqired if
            components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_ARCHITECTURE
            (Reqired if components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_DESCRIPTION (Reqired if
            components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_ARCHITECTURE
            (Reqired if components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_DEPENDS (Reqired if
            components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_BUILD\_DEPENDS
            (Reqired if components exist and enabled)


``` {.sourceCode .cmake}
cpack_debian_source_package(
  CHANGLELOG ${CMAKE_CURRENT_LIST_DIR}/CHANGELOG.rst
  UPLOAD ${RICB_PACKAGE_SOURCE_UPLOAD}
  DPUT_HOST ${RICB_PACKAGE_SOURCE_DPUT_HOST}
  DEBIAN_INCREMENT ${RICB_PACKAGE_SOURCE_DEBIAN_INCREMENT}
  DISTRIBUTIONS ${RICB_PACKAGE_SOURCE_DISTRIBUTIONS}
)

</code></pre></div></div>

<h3 id="configure-pure-cmake-package">Configure (Pure CMake Package)</h3>

<p>This CMake macro simplifies the CMake package configure and install by
performing multiple operations</p>

<h4 id="configure-package">Configure Package</h4>

<p>Performs multiple operation so other packages may find a package</p>

<p>If Namespace is provided but no targets it is assumed targets were
installed and must be exported</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>NAMESPACE - This will prepend &lt;namespace&gt;:: to the target
names as they are written to the import file</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>TARGETS - The targets from the project to be installed</li>
          <li>COMPONENTS - The packages supported find_package components
if any</li>
          <li>DEPENDENCIES - The dependencies to be written to the
packages Config.cmake file</li>
          <li>CFG_EXTRAS - The extra cmake files to be include in the
packages Config.cmake file</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Usage:</dt>
      <dd>
        <ul>
          <li>It installs the provided targets</li>
          <li>It exports the provided targets under the provided namespace</li>
          <li>It installs the package.xml file</li>
          <li>It creates and installs the ${PROJECT_NAME}-config.cmake
and ${PROJECT_NAME}-config-version.cmake</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
configure_package(
  NAMESPACE <package_namespace>
  TARGETS <target_name_a> <target_name_b>
  COMPONENTS <component_name_a> <component_name_b>
  DEPENDENCIES <deps>...
  CFG_EXTRAS <cmake files="">...
)</cmake></deps></component_name_b></component_name_a></target_name_b></target_name_a></package_namespace></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Example:


``` {.sourceCode .cmake}
configure_package(
  NAMESPACE
    tesseract
  TARGETS
    ${PROJECT_NAME}
  DEPENDENCIES
    Eigen3
    TinyXML2
    yaml-cpp
    "Boost COMPONENTS system filesystem serialization"
  CFG_EXTRAS
    cmake/tesseract_common-extras.cmake
)

</code></pre></div></div>

<p>To create the config cmake file, the macro by default looks for a
configuration template <code class="language-plaintext highlighter-rouge">cmake/${PROJECT_NAME}-config.cmake.in</code> provided
by the package. If not present, a default one will be generated. If
generated automatically, package dependencies will be included from the
arguments listed by <code class="language-plaintext highlighter-rouge">DEPENDENCIES</code>. Additional configuration CMake
scripts can also be included with relative paths listed in the
<code class="language-plaintext highlighter-rouge">CFG_EXTRAS</code> argument. The scripts should be installed alongside the
generated package config file, in <code class="language-plaintext highlighter-rouge">lib/cmake/${PROJECT_NAME}</code>.</p>

<h4 id="configure-component">Configure Component</h4>

<p>Performs multiple operation so other packages may find a package's
component</p>

<p>If Namespace is provided but no targets it is assumed targets were
installed and must be exported</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>NAMESPACE - This will prepend &lt;namespace&gt;:: to the target
names as they are written to the import file</li>
          <li>COMPONENT - The component name</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>TARGETS - The targets from the project to be installed</li>
          <li>DEPENDENCIES - The dependencies to be written to the
packages Config.cmake file</li>
          <li>CFG_EXTRAS - The extra cmake files to be include in the
packages Config.cmake file</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Usage:</dt>
      <dd>
        <ul>
          <li>It installs the provided targets</li>
          <li>It exports the provided targets under the provided namespace</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
configure_component(
  COMPONENT <component_name>
  NAMESPACE <package_namespace>
  TARGETS <target_name_a> <target_name_b>
  DEPENDENCIES <deps>...
  CFG_EXTRAS <cmake files="">...
)</cmake></deps></target_name_b></target_name_a></package_namespace></component_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Example:


``` {.sourceCode .cmake}
configure_component(
  COMPONENT
    kdl
  NAMESPACE
    tesseract
  TARGETS
    ${PROJECT_NAME}_kdl ${PROJECT_NAME}_kdl_factories
  DEPENDENCIES
    Eigen3
    TinyXML2
    yaml-cpp
    "Boost COMPONENTS system filesystem serialization"
  CFG_EXTRAS
    cmake/tesseract_common-extras.cmake
)

</code></pre></div></div>

<p>To create the config cmake file, the macro by default looks for a
configuration template <code class="language-plaintext highlighter-rouge">cmake/&lt;COMPONENT_NAME&gt;-config.cmake.in</code> provided
by the package. If not present, a default one will be generated. If
generated automatically, package dependencies will be included from the
arguments listed by <code class="language-plaintext highlighter-rouge">DEPENDENCIES</code>. Additional configuration CMake
scripts can also be included with relative paths listed in the
<code class="language-plaintext highlighter-rouge">CFG_EXTRAS</code> argument. The scripts should be installed alongside the
generated package config file, in <code class="language-plaintext highlighter-rouge">lib/cmake/${PROJECT_NAME}</code>.</p>

<h4 id="sub-macros-used-in-configure-the-package">Sub macros used in configure the package</h4>

<p>The following macros are used by configure_package and can be used
independently if needed</p>

<h5 id="install-targets">Install Targets</h5>

<p>This will install targets along associated with the provided component
and export them to ${ARG_COMPONENT}-targets</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>COMPONENT (Optional) - The component name to associate the
targets with, if not provided ${PROJECT_NAME} is used</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>TARGETS - The targets from the project to be installed</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
install_targets(TARGETS targetA targetb)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
##### Install package.xml

This will install the package.xml file


``` {.sourceCode .cmake}
install_pkgxml()

</code></pre></div></div>

<h5 id="generate-cmake-config-files">Generate CMake Config Files</h5>

<p>Performs multiple operation so other packages may find a package and
package components The default export name is ${PROJECT_NAME} but it
can be overriden by providing EXPORT_NAME</p>

<ul>
  <li>

    <dl>
      <dt>Options:</dt>
      <dd>
        <ul>
          <li>EXPORT - indicate if trargets should be exported</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>COMPONENT (Optional) - the name given to the export
${ARG_COMPONENT}-targets, if not provided PROJECT_NAME is
used</li>
          <li>CONFIG_NAME (Optional) - the name given to the export
${ARG_COMPONENT}-config.cmake, if not provided COMPONENT
is used</li>
          <li>NAMESPACE (Optional) - the namespace assigned for exported
targets</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>DEPENDENCIES (Optional) - list of dependencies to be loaded
in the package config</li>
          <li>CFG_EXTRAS (Optional) - list of extra cmake config files to
be loaded in package config</li>
          <li>SUPPORTED_COMPONENTS (Optional) - list of supported
components</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Usage:</dt>
      <dd>
        <ul>
          <li>generate_package_config(EXPORT NAMSPACE namespace) Install
export targets with provided namespace</li>
          <li>generate_package_config(EXPORT) Install export targets
with no namespace</li>
          <li>generate_package_config() Install cmake config files and
not install export targets</li>
          <li>It exports the provided targets under the provided namespace
${ARG_COMPONENT}-targets, if EXPORT option is set</li>
          <li>It creates and install the
${ARG_CONFIG_NAME}-config.cmake</li>
          <li>In not component, it create and installs
${ARG_CONFIG_NAME}-config-version.cmake</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}</p>
<h1 id="install-and-export-targets-with-provided-namespace">Install and export targets with provided namespace</h1>
<p>generate_package_config(EXPORT NAMSPACE namespace)</p>

<p>#Install and export targets with no namespace
generate_package_config(EXPORT)</p>

<h1 id="install-cmake-config-files-and-not-install-export-targets">Install CMake config files and not install export targets</h1>
<p>generate_package_config() Install CMake config files and not install export targets</p>

<h1 id="install-and-export-targets-for-package-with-components">Install and export targets for package with components</h1>
<p>generate_package_config(EXPORT CONFIG_NAME ${PROJECT_NAME} SUPPORTED_COMPONENTS componentA componentB)</p>

<h1 id="install-and-export-targets-for-component">Install and export targets for component</h1>
<p>generate_package_config(EXPORT
  COMPONENT kdl
  NAMESPACE namespace
  DEPENDENCIES packageA packageB
  CFG_EXTRAS extraA.cmake extraB.cmake)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Additionally, `DEPENDENCIES`, `CFG_EXTRAS` and `SUPPORTED_COMPONENTS`
are passed for generated CMake config files.

##### Install Ament Hooks

Allows Colcon to find non-Ament packages when using workspace underlays


``` {.sourceCode .cmake}
install_ament_hooks()

</code></pre></div></div>

<h3 id="set-target-cxx-version">Set Target CXX VERSION</h3>

<p>This CMake macro simplifies setting the CXX version for the target</p>

<p>``` {.sourceCode .cmake}
target_cxx_version(${PACKAGE_NAME} &lt;INTERFACE|PRIVATE|PUBLIC&gt; VERSION <cxx_version>)</cxx_version></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Example: Set the version to 14 and PUBLIC.


``` {.sourceCode .cmake}
target_cxx_version(${PACKAGE_NAME} PUBLIC VERSION 14)

</code></pre></div></div>

<h3 id="find-gtest-pure-cmake-package">Find GTest (Pure CMake Package)</h3>

<p>This CMake macro calls <code class="language-plaintext highlighter-rouge">find_package(GTest REQUIRED)</code> and checks for the
<code class="language-plaintext highlighter-rouge">GTest::GTest</code> and <code class="language-plaintext highlighter-rouge">GTest::Main</code> targets. If the targets are missing it
will create the targets using the CMake variables.</p>

<p>``` {.sourceCode .cmake}
find_gtest()</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### Add Run Tests Target (Pure CMake Package)

This CMake macro adds a custom target that will run the tests after they
are finished building. You may pass an optional argument true\|false
adding the ability to disable the running of tests as part of the build
for CI which calls make test.

Add run test target (These will automatically run the test after build
finishes)


``` {.sourceCode .cmake}
add_run_tests_target(&lt;TARGET_NAME&gt;)

</code></pre></div></div>

<p>``` {.sourceCode .cmake}
add_run_tests_target(<target_name> true)</target_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Add empty run test target


``` {.sourceCode .cmake}
add_run_tests_target(&lt;TARGET_NAME&gt; false)

</code></pre></div></div>

<h3 id="add-gtest-discover-tests-pure-cmake-package">Add GTest Discover Tests (Pure CMake Package)</h3>

<p>This CMake macro call the appropriate GTest function to add a test based
on the CMake version</p>

<p>``` {.sourceCode .cmake}
add_gtest_discover_tests(<target_name>)</target_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### Add Run Benchmark Target

This CMake macro adds a custom target that will run the benchmarks after
they are finished building.

Add run benchmark target (These will automatically run the benchmark
after build finishes)


``` {.sourceCode .cmake}
add_run_benchmark_target(&lt;TARGET_NAME&gt;)

</code></pre></div></div>

<p>``` {.sourceCode .cmake}
add_run_benchmark_target(<target_name> true)</target_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Add empty run benchmark target


``` {.sourceCode .cmake}
add_run_benchmark_target(&lt;TARGET_NAME&gt; false)

</code></pre></div></div>

<h3 id="code-coverage">Code Coverage</h3>

<p>These CMake macros add code coverage.</p>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Must call <strong>initialize_code_coverage()</strong> after project() in the
CMakeLists.txt. This is required for all examples below.
:::</p>

<p>From this point, there are two primary methods for adding
instrumentation to targets: 1. A blanket instrumentation by calling
[add_code_coverage()]{.title-ref}, where all targets in that directory
and all subdirectories are automatically instrumented. 2. Per-target
instrumentation by calling
[target_code_coverage(&lt;TARGET_NAME&gt;)]{.title-ref}, where the target
is given and thus only that target is instrumented. This applies to both
libraries and executables.</p>

<p>To add coverage targets, such as calling [make ccov]{.title-ref} to
generate the actual coverage information for perusal or consumption,
call [target_code_coverage(&lt;TARGET_NAME&gt;)]{.title-ref} on an
<em>executable</em> target.</p>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by an external flag. If not provided it is automatically
enabled.
:::</p>

<h4 id="exclude-code-from-code-coverage">Exclude Code From Code Coverage</h4>

<p>Keyword             Description
  ——————- —————————————————————————————
  LCOV_EXCL_LINE    Lines containing this marker will be excluded.
  LCOV_EXCL_START   Marks the beginning of an excluded section. The current line is part of this section.
  LCOV_EXCL_STOP    Marks the end of an excluded section. The current line not part of this section.</p>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>You can replace LCOV above with GCOV or GCOVR.
:::</p>

<h4 id="example-1-all-targets-instrumented">Example 1: All targets instrumented</h4>

<p>In this case, the coverage information reported will be that of the
[theLib]{.title-ref} library target and [theExe]{.title-ref} executable.</p>

<h5 id="1a-via-global-command">1a: Via global command</h5>

<p>``` {.sourceCode .cmake}
add_code_coverage() # Adds instrumentation to all targets
add_library(theLib lib.cpp)
add_executable(theExe main.cpp)
target_link_libraries(theExe PRIVATE theLib)
target_code_coverage(theExe) # As an executable target, adds the ‘ccov-theExe’ target (instrumentation already added via global anyways) for generating code coverage reports.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
##### 1b: Via target commands


``` {.sourceCode .cmake}
add_library(theLib lib.cpp)
target_code_coverage(theLib) # As a library target, adds coverage instrumentation but no targets.
add_executable(theExe main.cpp)
target_link_libraries(theExe PRIVATE theLib)
target_code_coverage(theExe) # As an executable target, adds the 'ccov-theExe' target and instrumentation for generating code coverage reports.

</code></pre></div></div>

<h4 id="example-2-target-instrumented-but-with-regex-pattern-of-files-to-be-excluded-from-the-report">Example 2: Target instrumented, but with regex pattern of files to be excluded from the report</h4>

<p>``` {.sourceCode .cmake}
add_executable(theExe main.cpp non_covered.cpp)
target_code_coverage(theExe EXCLUDE non_covered.cpp test/*) # As an executable target, the reports will exclude the non-covered.cpp file, and any files in a test/ folder.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#### Example 3: Target added to the \'ccov\' and \'ccov-all\' targets


``` {.sourceCode .cmake}
add_code_coverage_all_targets(EXCLUDE test/*) # Adds the 'ccov-all' target set and sets it to exclude all files in test/ folders.
add_executable(theExe main.cpp non_covered.cpp)
target_code_coverage(theExe AUTO ALL EXCLUDE non_covered.cpp test/*) # As an executable target, adds to the 'ccov' and ccov-all' targets, and the reports will exclude the non-covered.cpp file, and any files in a test/ folder.

</code></pre></div></div>

<h4 id="example-4-ros-add_rostest_gtest-usage">Example 4: ROS add_rostest_gtest usage</h4>

<p>``` {.sourceCode .cmake}
add_rostest_gtest(test_node test/test_node.test test/test_node.cpp)
target_include_directories(test_node SYSTEM PUBLIC {catkin_INCLUDE_DIRS})
target_link_libraries(test_node ${catkin_LIBRARIES})
target_code_coverage(
  test_node
  ALL
  RUN_COMMAND rostest test_node test_node.test
  EXCLUDE ${COVERAGE_EXCLUDE}
  ENABLE ${ENABLE_CODE_COVERAGE})</p>

<p>```</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>
</div>
              <hr id="rolling-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="rolling-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#rolling-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#rolling-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#rolling-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="rolling-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="rolling-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="rolling-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros_industrial_cmake_boilerplate">ros_industrial_cmake_boilerplate</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-industrial-ros_industrial_cmake_boilerplate
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-industrial-ros_industrial_cmake_boilerplate" role="menuitem" tabindex="-1" href="/r/ros_industrial_cmake_boilerplate/github-ros-industrial-ros_industrial_cmake_boilerplate" data="github-ros-industrial-ros_industrial_cmake_boilerplate">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-industrial-ros_industrial_cmake_boilerplate
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>github</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros_industrial_cmake_boilerplate">ros_industrial_cmake_boilerplate</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/ros_industrial_cmake_boilerplate">ros_industrial_cmake_boilerplate</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-industrial-ros_industrial_cmake_boilerplate
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-industrial-ros_industrial_cmake_boilerplate" role="menuitem" tabindex="-1" href="/r/ros_industrial_cmake_boilerplate/github-ros-industrial-ros_industrial_cmake_boilerplate" data="github-ros-industrial-ros_industrial_cmake_boilerplate">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-industrial-ros_industrial_cmake_boilerplate
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-industrial/ros_industrial_cmake_boilerplate.git">https://github.com/ros-industrial/ros_industrial_cmake_boilerplate.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-02-11
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ros_industrial_cmake_boilerplate/#noetic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros_industrial_cmake_boilerplate/#noetic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros_industrial_cmake_boilerplate/#noetic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ros_industrial_cmake_boilerplate">ros_industrial_cmake_boilerplate</a></td>
                    <td>0.7.3</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="cmake-boilerplate-scripts">CMake Boilerplate Scripts</h1>

<p><a href="https://opensource.org/licenses/Apache-2.0"><img src="https://img.shields.io/:license-Apache%202.0-yellowgreen.svg" alt="license apache
2.0"></a></p>

<p><a href="https://opensource.org/licenses/BSD-3-Clause"><img src="https://img.shields.io/:license-BSD%203--Clause-orange.svg" alt="license bsd 3
clause"></a></p>

<p>This contains a collection of boilerplate CMake scripts and marcos.</p>

<p>Note: this package is <em>not</em> specific to ROS-Industrial and is usable
with any package which uses CMake. The prefix was added to facilitate
releasing this into different ROS distributions.</p>

<p>::: {.contents depth=”4”}
Table of Contents
:::</p>

<h2 id="create-debian-package-linux-or-nuget-package-windows">Create Debian Package (Linux) or NuGet Package (Windows)</h2>

<p>The following process will generate a Debian or NuGet package leveraging
CMake and CPack based on the OS.</p>

<p>The package should be located in the current directory.</p>

<p><code class="language-plaintext highlighter-rouge">` bash cd &lt;workspace directory&gt; catkin build -DRICB_PACKAGE=ON ./src/ros_industrial_cmake_boilerplate/.run-cpack</code>`</p>

<h2 id="available-macros">Available Macros</h2>

<h3 id="extract-package-metadata">Extract Package Metadata</h3>

<p>This CMake macro will extract the package name and version from a
package.xml file. It will create two cmake variable
<strong>${PREFIX_ARG}_extracted_name</strong> and
<strong>${PREFIX_ARG}_extracted_version</strong>.</p>

<p>``` {.sourceCode .cmake}
extract_package_metadata(${PREFIX_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### Clang Tidy

This CMake macro will add clang-tidy to all targets


``` {.sourceCode .cmake}
clang_tidy(ARGUMENTS ${ARGN})
# or
clang_tidy(ARGUMENTS ${ARGN} ENABLE ${USER_ENABLE_ARG})

</code></pre></div></div>

<p>This CMake macro will add clang-tidy to all targets with default
arguments.</p>

<p>``` {.sourceCode .cmake}
clang_tidy(ARGUMENTS ${DEFAULT_CLANG_TIDY_CHECKS})</p>
<h1 id="or">or</h1>
<p>clang_tidy(ARGUMENTS ${DEFAULT_CLANG_TIDY_CHECKS} ENABLE ${USER_ENABLE_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Clears clang-tidy so it is not called on any following defined code
compilation. It can be re-enabled by another call to
[clang\_tidy()]{.title-ref}.


``` {.sourceCode .cmake}
reset_clang_tidy()

</code></pre></div></div>

<p>This CMake macro will add clang-tidy to a provided target.</p>

<ul>
  <li><a href="https://clang.llvm.org/extra/clang-tidy/">The clang-tidy
documentation</a></li>
  <li><a href="https://clang.llvm.org/extra/clang-tidy/checks/list.html">The list of clang-tidy
checks</a></li>
</ul>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by an external flag. If not provided it is automatically
enabled.
:::</p>

<p>Single Argument Keywords:</p>

<p>+———————–+———————–+———————–+
| Keyword               | Type                  | Description           |
+=======================+=======================+=======================+
| ENABLE                | &gt; ON/OFF              | Enable/Disable        |
|                       |                       | clang-tidy            |
+———————–+———————–+———————–+
| WARNINGS_AS_ERRORS  | &gt; ON/OFF              | Treat warnings as     |
|                       |                       | errors. If            |
|                       |                       | ERROR_CHECKS is not  |
|                       |                       | provided, it will use |
|                       |                       | CHECKS to treat as    |
|                       |                       | errors.               |
+———————–+———————–+———————–+
| HEADER_FILTER        | &gt; String              | Default to '.*' if |
|                       |                       | not provided. Regular |
|                       |                       | expression matching   |
|                       |                       | the names of the      |
|                       |                       | headers to output     |
|                       |                       | diagnostics from.     |
+———————–+———————–+———————–+
| LINE_FILTER          | &gt; String              | List of files with    |
|                       |                       | line ranges to filter |
|                       |                       | the warnings.         |
+———————–+———————–+———————–+
| CHECKS                | &gt; String              | Comma-separated list  |
|                       |                       | of globs with         |
|                       |                       | optional '-'        |
|                       |                       | prefix. Globs are     |
|                       |                       | processed in order of |
|                       |                       | appearance in the     |
|                       |                       | list. Globs without   |
|                       |                       | the '-' prefix add  |
|                       |                       | checks with matching  |
|                       |                       | names to the set,     |
|                       |                       | globs with the '-'  |
|                       |                       | prefix remove checks  |
|                       |                       | with matching names   |
|                       |                       | from the set of       |
|                       |                       | enabled checks. This  |
|                       |                       | option's value is    |
|                       |                       | appended to the value |
|                       |                       | of the 'Checks'     |
|                       |                       | option in the         |
|                       |                       | .clang-tidy file, if  |
|                       |                       | any.                  |
+———————–+———————–+———————–+
| CONFIG                | &gt; String              | YAML/JSON format. If  |
|                       |                       | not provided,         |
|                       |                       | clang-tidy will       |
|                       |                       | attempt to find a     |
|                       |                       | file named            |
|                       |                       | .clang-tidy for each  |
|                       |                       | source file in its    |
|                       |                       | parent directories.   |
+———————–+———————–+———————–+
| ERROR_CHECKS         | &gt; String              | Upgrades warnings to  |
|                       |                       | errors. Same format   |
|                       |                       | as 'CHECKS'. This   |
|                       |                       | option's value is    |
|                       |                       | appended to the value |
|                       |                       | of the                |
|                       |                       | 'WarningsAsErrors'  |
|                       |                       | option in the         |
|                       |                       | .clang-tidy file, if  |
|                       |                       | any.                  |
+———————–+———————–+———————–+</p>

<p>Multip Value Argument Keywords:</p>

<p>+———————–+———————–+———————–+
| Keyword               | Type                  | Description           |
+=======================+=======================+=======================+
| ARGUMENTS             | &gt; String              | This supports adding  |
|                       |                       | additional arguments  |
|                       |                       | to be passed to the   |
|                       |                       | clang-tidy. You could |
|                       |                       | just use this if      |
|                       |                       | desired over the      |
|                       |                       | single keywords       |
|                       |                       | except for the ENABLE |
|                       |                       | to pass all arguments |
|                       |                       | to clang-tidy if      |
|                       |                       | desired.              |
+———————–+———————–+———————–+</p>

<p>This configures clang-tidy with default arguments where any violation
will produce compiler warnings.</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CHECKS ${DEFAULT_CLANG_TIDY_CHECKS})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with default arguments where any violation
will produce compiler errors.


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CHECKS ${DEFAULT_CLANG_TIDY_CHECKS} WARNINGS_AS_ERRORS ON)

</code></pre></div></div>

<p>This configures clang-tidy with custom error checks which can be
different from the warning checks where any violation will produce
compiler errors.</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CHECKS ${DEFAULT_CLANG_TIDY_CHECKS} ERROR_CHECKS ${DEFAULT_CLANG_TIDY_CHECKS})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with a header filter. If not provided it will
default to \".\*\".


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} HEADER_FILTER ".*")

</code></pre></div></div>

<p>This configures clang-tidy with line filter as a JSON array of objects.</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} LINE_FILTER “[{“name”:”file1.cpp”,”lines”:[[1,3],[5,7]]},{“name”:”file2.h”}]”)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with config in YAML/JSON format.


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CONFIG ""{Checks: '*', CheckOptions: [{key: x, value: y}]}")

</code></pre></div></div>

<p>This configures clang-tidy to use a .clang-tidy file if no arguments are
provided</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with arguments list.


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} ARGUMENTS ${ARGN})

</code></pre></div></div>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>In some situations, you may want to disable clang-tidy which is
explained <a href="https://clang.llvm.org/extra/clang-tidy/#id3">here</a>.
:::</p>

<h3 id="include-what-you-use-iwyu">Include What You Use (IWYU)</h3>

<p>This CMake macro will add IWYU to a given target</p>

<ul>
  <li><a href="https://github.com/include-what-you-use/include-what-you-use/blob/master/docs/WhyIWYU.md">Why Include What You
Use?</a></li>
  <li><a href="https://github.com/include-what-you-use/include-what-you-use/blob/master/README.md">IWYU
Documentation</a></li>
  <li><a href="https://github.com/include-what-you-use/include-what-you-use/blob/master/docs/IWYUPragmas.md">Exclude headers from
check</a></li>
  <li><a href="https://www.incredibuild.com/blog/include-what-you-use-how-to-best-utilize-this-tool-and-avoid-common-issues/">Avoid Common
Issues</a></li>
</ul>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by an external flag. If not provided it is automatically
enabled.
:::</p>

<p>``` {.sourceCode .cmake}
target_include_what_you_use(${PACKAGE_NAME} ARGUMENTS ${ARGN})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This CMake macro will add IWYU to a given target with default arguments.


``` {.sourceCode .cmake}
target_include_what_you_use(${PACKAGE_NAME} ARGUMENTS ${DEFAULT_IWYU_ARGS})

</code></pre></div></div>

<p>This CMake macro will add IWYU to all targets</p>

<p>``` {.sourceCode .cmake}
include_what_you_use(ARGUMENTS ${ARGN})</p>
<h1 id="or-1">or</h1>
<p>include_what_you_use(ARGUMENTS ${ARGN} ENABLE ${USER_ENABLE_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This CMake macro will add IWYU to all targets with default arguments.


``` {.sourceCode .cmake}
include_what_you_use(ARGUMENTS ${DEFAULT_IWYU_ARGS})
# or
include_what_you_use(ARGUMENTS ${DEFAULT_IWYU_ARGS} ENABLE ${USER_ENABLE_ARG})

</code></pre></div></div>

<p>Clears IWYU so it is not called on any following defined code
compilation. It can be re-enabled by another call to
[include_what_you_use()]{.title-ref}.</p>

<p>``` {.sourceCode .cmake}
reset_include_what_you_use()</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### CppCheck

This CMake macro will add CppCheck to a given target

-   [CppCheck Wiki](https://sourceforge.net/p/cppcheck/wiki/Home/)

::: {.note}
::: {.admonition-title}
Note
:::

Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by the external flag. If not provided it is automatically
enabled.
:::


``` {.sourceCode .cmake}
target_cppcheck(${PACKAGE_NAME} ARGUMENTS ${ARGN})

</code></pre></div></div>

<p>This CMake macro will add CppCheck to a given target with default
arguments.</p>

<p>``` {.sourceCode .cmake}
target_cppcheck(${PACKAGE_NAME} ARGUMENTS ${DEFAULT_CPPCHECK_ARGS})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This CMake macro will add CppCheck to all targets


``` {.sourceCode .cmake}
cppcheck(ARGUMENTS ${ARGN})
# or
cppcheck(ARGUMENTS ${ARGN} ENABLE ${USER_ENABLE_ARG})

</code></pre></div></div>

<p>This CMake macro will add CppCheck to all targets with default
arguments.</p>

<p>``` {.sourceCode .cmake}
cppcheck(ARGUMENTS ${DEFAULT_CPPCHECK_ARGS})</p>
<h1 id="or-2">or</h1>
<p>cppcheck(ARGUMENTS ${DEFAULT_CPPCHECK_ARGS} ENABLE ${USER_ENABLE_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Clears CppCheck so it is not called on any following defined code
compilation. It can be re-enabled by another call to
[cppcheck()]{.title-ref}.


``` {.sourceCode .cmake}
reset_cppcheck()

</code></pre></div></div>

<h3 id="sanitizer-tools">Sanitizer Tools</h3>

<p>Sanitizers are tools that perform checks during a program’s runtime and
returns issues, and as such, along with unit testing, code coverage and
static analysis, is another tool to add to the programmers toolbox. And
of course, like the previous tools, are tragically simple to add into
any project using CMake, allowing any project and developer to quickly
and easily use.</p>

<p>A quick rundown of the tools available, and what they do:</p>

<ul>
  <li>
<a href="https://clang.llvm.org/docs/LeakSanitizer.html">LeakSanitizer</a>
detects memory leaks, or issues where memory is allocated and never
deallocated, causing programs to slowly consume more and more
memory, eventually leading to a crash.</li>
  <li>

    <dl>
      <dt>
<a href="https://clang.llvm.org/docs/AddressSanitizer.html">AddressSanitizer</a> is a fast memory error detector. It is useful for detecting most issues dealing with memory, such as:</dt>
      <dd>
        <ul>
          <li>Out of bounds accesses to heap, stack, global</li>
          <li>Use after free</li>
          <li>Use after return</li>
          <li>Use after scope</li>
          <li>Double-free, invalid free</li>
          <li>Memory leaks (using LeakSanitizer)</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>
<a href="https://clang.llvm.org/docs/ThreadSanitizer.html">ThreadSanitizer</a>
detects data races for multi-threaded code.</li>
  <li>

    <dl>
      <dt>
<a href="https://clang.llvm.org/docs/UndefinedBehaviorSanitizer.html">UndefinedBehaviourSanitizer</a> detects the use of various features of C/C++ that are explicitly listed as resulting in undefined behaviour. Most notably:</dt>
      <dd>
        <ul>
          <li>Using misaligned or null pointer.</li>
          <li>Signed integer overflow</li>
          <li>Conversion to, from, or between floating-point types which
would overflow the destination</li>
          <li>Division by zero</li>
          <li>Unreachable code</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>
<a href="https://clang.llvm.org/docs/MemorySanitizer.html">MemorySanitizer</a>
detects uninitialized reads.</li>
  <li>
<a href="https://clang.llvm.org/docs/ControlFlowIntegrity.html">Control Flow
Integrity</a> is
designed to detect certain forms of undefined behaviour that can
potentially allow attackers to subvert the program's control flow.</li>
</ul>

<p>These are used by declaring the <code class="language-plaintext highlighter-rouge">USE_SANITIZER</code>{.sourceCode} CMake
variable as string containing any of:</p>

<ul>
  <li>Address</li>
  <li>Memory</li>
  <li>MemoryWithOrigins</li>
  <li>Undefined</li>
  <li>Thread</li>
  <li>Leak</li>
  <li>CFI</li>
</ul>

<p>Multiple values are allowed, e.g.
<code class="language-plaintext highlighter-rouge">-DUSE_SANITIZER=Address,Leak</code>{.sourceCode} but some sanitizers cannot
be combined together, e.g. <code class="language-plaintext highlighter-rouge">-DUSE_SANITIZER=Address,Memory</code>{.sourceCode}
will result in configuration error. The delimeter character is not
required and <code class="language-plaintext highlighter-rouge">-DUSE_SANITIZER=AddressLeak</code>{.sourceCode} would work as
well.</p>

<h3 id="cpack">CPack</h3>

<h4 id="configure-package-without-components">Configure Package Without Components</h4>

<p>Configure package for cpack which does not leverage components</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>VERSION - The package version</li>
          <li>MAINTAINER_NAME - The package maintainer name</li>
          <li>MAINTAINER_EMAIL - The package maintainer email</li>
          <li>VENDOR - The package vender</li>
          <li>DESCRIPTION - The package description</li>
          <li>LICENSE_FILE - The package license file</li>
          <li>README_FILE - The package readme</li>
          <li>PACKAGE_PREFIX - The package prefix applied to all cpack
generated files</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>LINUX_BUILD_DEPENDS - The linux build dependencies
required via apt install (If not provided LINUX_DEPENDS is
used)</li>
          <li>WINDOWS_BUILD_DEPENDS - The windows build dependencies
required via nuget install (If not provided WINDOWS_DEPENDS
is used)</li>
          <li>LINUX_DEPENDS - The linux dependencies required via apt
install</li>
          <li>WINDOWS_DEPENDS - The windows dependencies required via
nuget install</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
cpack(
  VERSION ${pkg_extracted_version}
  MAINTAINER <a href="https://github.com/ros-industrial-consortium/tesseract">https://github.com/ros-industrial-consortium/tesseract</a>
  DESCRIPTION ${pkg_extracted_description}
  LICENSE_FILE ${CMAKE_CURRENT_LIST_DIR}/../LICENSE
  README_FILE ${CMAKE_CURRENT_LIST_DIR}/../README.md
  LINUX_DEPENDS
    “libboost-system-dev”
    “libboost-filesystem-dev”
    “libboost-serialization-dev”
    “libconsole-bridge-dev”
    “libtinyxml2-dev”
    “libeigen3-dev”
    “libyaml-cpp-dev”
  WINDOWS_DEPENDS
    “boost_system”
    “boost_filesystem;”
    “boost_serialization”
    “console-bridge”
    “tinyxml2”
    “Eigen3”
    “yaml-cpp”)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#### Configure Package With Components

This requires two macros one used in the components cmake file another
for the top most package cmake file.

##### Configure Component

Configure components for cpack

-   

    One Value Args:

    :   -   COMPONENT - The component name
        -   VERSION - The package version
        -   DESCRIPTION - The package description
        -   PACKAGE\_PREFIX - The package prefix applied to all cpack
            generated files

-   

    Multi Value Args:

    :   -   LINUX\_BUILD\_DEPENDS - The linux build dependencies
            required via apt install (If not provided LINUX\_DEPENDS is
            used)
        -   WINDOWS\_BUILD\_DEPENDS - The windows build dependencies
            required via nuget install (If not provided WINDOWS\_DEPENDS
            is used)
        -   LINUX\_DEPENDS - The linux dependencies required via apt
            install
        -   WINDOWS\_DEPENDS - The windows dependencies required via
            nuget install
        -   COMPONENT\_DEPENDS - The component dependencies required
            from this package


``` {.sourceCode .cmake}
cpack_component(
  COMPONENT IKFAST # must be uppercase
  VERSION ${pkg_extracted_version}
  DESCRIPTION "Tesseract Kinematics ikfast implementation"
  COMPONENT_DEPENDS core)

</code></pre></div></div>

<h5 id="configure-components-package">Configure Components Package</h5>

<p>Configure package leveraging components for cpack</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>VERSION - The package version</li>
          <li>MAINTAINER_NAME - The package maintainer name</li>
          <li>MAINTAINER_EMAIL - The package maintainer email</li>
          <li>VENDOR - The package vender</li>
          <li>DESCRIPTION - The package description</li>
          <li>LICENSE_FILE - The package license file</li>
          <li>README_FILE - The package readme</li>
          <li>PACKAGE_PREFIX - The package prefix applied to all cpack
generated files</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>COMPONENT_DEPENDS - The component dependencies required
from this package</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
cpack_component_package(
  VERSION ${pkg_extracted_version}
  MAINTAINER <a href="https://github.com/ros-industrial-consortium/tesseract">https://github.com/ros-industrial-consortium/tesseract</a>
  DESCRIPTION ${pkg_extracted_description}
  LICENSE_FILE ${CMAKE_CURRENT_LIST_DIR}/../LICENSE
  README_FILE ${CMAKE_CURRENT_LIST_DIR}/../README.md)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
##### Configure Debian Source Package

Create debian source package leveraging cpack for upload to ppa like
launchpad.net

-   

    One Value Args:

    :   -   CHANGLELOG (Required) - The file path to the package
            CHANGELOG.rst
        -   PACKAGE\_PREFIX (Optional) - The package prefix applied to
            all cpack generated files
        -   UPLOAD (Optional) - Indicate if it should be uploaded to ppa
        -   DEBIAN\_INCREMENT - The debian increment to be used, default
            is zero
        -   DPUT\_HOST (Optional/Required) - The ppa to upload to. Only
            required if UPLOAD is enabled
        -   DPUT\_CONFIG\_IN (Optional) - The dput config.in file. If
            not provide one is created.

-   

    Multi Value Args:

    :   -   DISTRIBUTIONS - The linux distrabution to deploy

-   

    Leveraged CPack Variable: When using the cpack macros above these are automatically set

    :   -   CPACK\_PACKAGE\_DESCRIPTION (Required)
        -   CPACK\_PACKAGE\_VERSION (Required)
        -   CPACK\_PACKAGE\_DESCRIPTION\_FILE (Optional)
        -   CPACK\_SOURCE\_IGNORE\_FILES (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_NAME (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_SECTION (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_PRIORITY (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_MAINTAINER (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_MAINTAINER\_NAME (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_MAINTAINER\_EMAIL (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_ARCHITECTURE (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_DESCRIPTION (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_BUILD\_DEPENDS (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_DEPENDS (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_HOMEPAGE (Optional)
        -   [CPACK\_COMPONENT]()\&lt;COMPONENT\&gt;\_DEPENDS (Reqired if
            components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_ARCHITECTURE
            (Reqired if components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_DESCRIPTION (Reqired if
            components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_ARCHITECTURE
            (Reqired if components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_DEPENDS (Reqired if
            components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_BUILD\_DEPENDS
            (Reqired if components exist and enabled)


``` {.sourceCode .cmake}
cpack_debian_source_package(
  CHANGLELOG ${CMAKE_CURRENT_LIST_DIR}/CHANGELOG.rst
  UPLOAD ${RICB_PACKAGE_SOURCE_UPLOAD}
  DPUT_HOST ${RICB_PACKAGE_SOURCE_DPUT_HOST}
  DEBIAN_INCREMENT ${RICB_PACKAGE_SOURCE_DEBIAN_INCREMENT}
  DISTRIBUTIONS ${RICB_PACKAGE_SOURCE_DISTRIBUTIONS}
)

</code></pre></div></div>

<h3 id="configure-pure-cmake-package">Configure (Pure CMake Package)</h3>

<p>This CMake macro simplifies the CMake package configure and install by
performing multiple operations</p>

<h4 id="configure-package">Configure Package</h4>

<p>Performs multiple operation so other packages may find a package</p>

<p>If Namespace is provided but no targets it is assumed targets were
installed and must be exported</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>NAMESPACE - This will prepend &lt;namespace&gt;:: to the target
names as they are written to the import file</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>TARGETS - The targets from the project to be installed</li>
          <li>COMPONENTS - The packages supported find_package components
if any</li>
          <li>DEPENDENCIES - The dependencies to be written to the
packages Config.cmake file</li>
          <li>CFG_EXTRAS - The extra cmake files to be include in the
packages Config.cmake file</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Usage:</dt>
      <dd>
        <ul>
          <li>It installs the provided targets</li>
          <li>It exports the provided targets under the provided namespace</li>
          <li>It installs the package.xml file</li>
          <li>It creates and installs the ${PROJECT_NAME}-config.cmake
and ${PROJECT_NAME}-config-version.cmake</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
configure_package(
  NAMESPACE <package_namespace>
  TARGETS <target_name_a> <target_name_b>
  COMPONENTS <component_name_a> <component_name_b>
  DEPENDENCIES <deps>...
  CFG_EXTRAS <cmake files="">...
)</cmake></deps></component_name_b></component_name_a></target_name_b></target_name_a></package_namespace></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Example:


``` {.sourceCode .cmake}
configure_package(
  NAMESPACE
    tesseract
  TARGETS
    ${PROJECT_NAME}
  DEPENDENCIES
    Eigen3
    TinyXML2
    yaml-cpp
    "Boost COMPONENTS system filesystem serialization"
  CFG_EXTRAS
    cmake/tesseract_common-extras.cmake
)

</code></pre></div></div>

<p>To create the config cmake file, the macro by default looks for a
configuration template <code class="language-plaintext highlighter-rouge">cmake/${PROJECT_NAME}-config.cmake.in</code> provided
by the package. If not present, a default one will be generated. If
generated automatically, package dependencies will be included from the
arguments listed by <code class="language-plaintext highlighter-rouge">DEPENDENCIES</code>. Additional configuration CMake
scripts can also be included with relative paths listed in the
<code class="language-plaintext highlighter-rouge">CFG_EXTRAS</code> argument. The scripts should be installed alongside the
generated package config file, in <code class="language-plaintext highlighter-rouge">lib/cmake/${PROJECT_NAME}</code>.</p>

<h4 id="configure-component">Configure Component</h4>

<p>Performs multiple operation so other packages may find a package's
component</p>

<p>If Namespace is provided but no targets it is assumed targets were
installed and must be exported</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>NAMESPACE - This will prepend &lt;namespace&gt;:: to the target
names as they are written to the import file</li>
          <li>COMPONENT - The component name</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>TARGETS - The targets from the project to be installed</li>
          <li>DEPENDENCIES - The dependencies to be written to the
packages Config.cmake file</li>
          <li>CFG_EXTRAS - The extra cmake files to be include in the
packages Config.cmake file</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Usage:</dt>
      <dd>
        <ul>
          <li>It installs the provided targets</li>
          <li>It exports the provided targets under the provided namespace</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
configure_component(
  COMPONENT <component_name>
  NAMESPACE <package_namespace>
  TARGETS <target_name_a> <target_name_b>
  DEPENDENCIES <deps>...
  CFG_EXTRAS <cmake files="">...
)</cmake></deps></target_name_b></target_name_a></package_namespace></component_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Example:


``` {.sourceCode .cmake}
configure_component(
  COMPONENT
    kdl
  NAMESPACE
    tesseract
  TARGETS
    ${PROJECT_NAME}_kdl ${PROJECT_NAME}_kdl_factories
  DEPENDENCIES
    Eigen3
    TinyXML2
    yaml-cpp
    "Boost COMPONENTS system filesystem serialization"
  CFG_EXTRAS
    cmake/tesseract_common-extras.cmake
)

</code></pre></div></div>

<p>To create the config cmake file, the macro by default looks for a
configuration template <code class="language-plaintext highlighter-rouge">cmake/&lt;COMPONENT_NAME&gt;-config.cmake.in</code> provided
by the package. If not present, a default one will be generated. If
generated automatically, package dependencies will be included from the
arguments listed by <code class="language-plaintext highlighter-rouge">DEPENDENCIES</code>. Additional configuration CMake
scripts can also be included with relative paths listed in the
<code class="language-plaintext highlighter-rouge">CFG_EXTRAS</code> argument. The scripts should be installed alongside the
generated package config file, in <code class="language-plaintext highlighter-rouge">lib/cmake/${PROJECT_NAME}</code>.</p>

<h4 id="sub-macros-used-in-configure-the-package">Sub macros used in configure the package</h4>

<p>The following macros are used by configure_package and can be used
independently if needed</p>

<h5 id="install-targets">Install Targets</h5>

<p>This will install targets along associated with the provided component
and export them to ${ARG_COMPONENT}-targets</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>COMPONENT (Optional) - The component name to associate the
targets with, if not provided ${PROJECT_NAME} is used</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>TARGETS - The targets from the project to be installed</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
install_targets(TARGETS targetA targetb)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
##### Install package.xml

This will install the package.xml file


``` {.sourceCode .cmake}
install_pkgxml()

</code></pre></div></div>

<h5 id="generate-cmake-config-files">Generate CMake Config Files</h5>

<p>Performs multiple operation so other packages may find a package and
package components The default export name is ${PROJECT_NAME} but it
can be overriden by providing EXPORT_NAME</p>

<ul>
  <li>

    <dl>
      <dt>Options:</dt>
      <dd>
        <ul>
          <li>EXPORT - indicate if trargets should be exported</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>COMPONENT (Optional) - the name given to the export
${ARG_COMPONENT}-targets, if not provided PROJECT_NAME is
used</li>
          <li>CONFIG_NAME (Optional) - the name given to the export
${ARG_COMPONENT}-config.cmake, if not provided COMPONENT
is used</li>
          <li>NAMESPACE (Optional) - the namespace assigned for exported
targets</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>DEPENDENCIES (Optional) - list of dependencies to be loaded
in the package config</li>
          <li>CFG_EXTRAS (Optional) - list of extra cmake config files to
be loaded in package config</li>
          <li>SUPPORTED_COMPONENTS (Optional) - list of supported
components</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Usage:</dt>
      <dd>
        <ul>
          <li>generate_package_config(EXPORT NAMSPACE namespace) Install
export targets with provided namespace</li>
          <li>generate_package_config(EXPORT) Install export targets
with no namespace</li>
          <li>generate_package_config() Install cmake config files and
not install export targets</li>
          <li>It exports the provided targets under the provided namespace
${ARG_COMPONENT}-targets, if EXPORT option is set</li>
          <li>It creates and install the
${ARG_CONFIG_NAME}-config.cmake</li>
          <li>In not component, it create and installs
${ARG_CONFIG_NAME}-config-version.cmake</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}</p>
<h1 id="install-and-export-targets-with-provided-namespace">Install and export targets with provided namespace</h1>
<p>generate_package_config(EXPORT NAMSPACE namespace)</p>

<p>#Install and export targets with no namespace
generate_package_config(EXPORT)</p>

<h1 id="install-cmake-config-files-and-not-install-export-targets">Install CMake config files and not install export targets</h1>
<p>generate_package_config() Install CMake config files and not install export targets</p>

<h1 id="install-and-export-targets-for-package-with-components">Install and export targets for package with components</h1>
<p>generate_package_config(EXPORT CONFIG_NAME ${PROJECT_NAME} SUPPORTED_COMPONENTS componentA componentB)</p>

<h1 id="install-and-export-targets-for-component">Install and export targets for component</h1>
<p>generate_package_config(EXPORT
  COMPONENT kdl
  NAMESPACE namespace
  DEPENDENCIES packageA packageB
  CFG_EXTRAS extraA.cmake extraB.cmake)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Additionally, `DEPENDENCIES`, `CFG_EXTRAS` and `SUPPORTED_COMPONENTS`
are passed for generated CMake config files.

##### Install Ament Hooks

Allows Colcon to find non-Ament packages when using workspace underlays


``` {.sourceCode .cmake}
install_ament_hooks()

</code></pre></div></div>

<h3 id="set-target-cxx-version">Set Target CXX VERSION</h3>

<p>This CMake macro simplifies setting the CXX version for the target</p>

<p>``` {.sourceCode .cmake}
target_cxx_version(${PACKAGE_NAME} &lt;INTERFACE|PRIVATE|PUBLIC&gt; VERSION <cxx_version>)</cxx_version></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Example: Set the version to 14 and PUBLIC.


``` {.sourceCode .cmake}
target_cxx_version(${PACKAGE_NAME} PUBLIC VERSION 14)

</code></pre></div></div>

<h3 id="find-gtest-pure-cmake-package">Find GTest (Pure CMake Package)</h3>

<p>This CMake macro calls <code class="language-plaintext highlighter-rouge">find_package(GTest REQUIRED)</code> and checks for the
<code class="language-plaintext highlighter-rouge">GTest::GTest</code> and <code class="language-plaintext highlighter-rouge">GTest::Main</code> targets. If the targets are missing it
will create the targets using the CMake variables.</p>

<p>``` {.sourceCode .cmake}
find_gtest()</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### Add Run Tests Target (Pure CMake Package)

This CMake macro adds a custom target that will run the tests after they
are finished building. You may pass an optional argument true\|false
adding the ability to disable the running of tests as part of the build
for CI which calls make test.

Add run test target (These will automatically run the test after build
finishes)


``` {.sourceCode .cmake}
add_run_tests_target(&lt;TARGET_NAME&gt;)

</code></pre></div></div>

<p>``` {.sourceCode .cmake}
add_run_tests_target(<target_name> true)</target_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Add empty run test target


``` {.sourceCode .cmake}
add_run_tests_target(&lt;TARGET_NAME&gt; false)

</code></pre></div></div>

<h3 id="add-gtest-discover-tests-pure-cmake-package">Add GTest Discover Tests (Pure CMake Package)</h3>

<p>This CMake macro call the appropriate GTest function to add a test based
on the CMake version</p>

<p>``` {.sourceCode .cmake}
add_gtest_discover_tests(<target_name>)</target_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### Add Run Benchmark Target

This CMake macro adds a custom target that will run the benchmarks after
they are finished building.

Add run benchmark target (These will automatically run the benchmark
after build finishes)


``` {.sourceCode .cmake}
add_run_benchmark_target(&lt;TARGET_NAME&gt;)

</code></pre></div></div>

<p>``` {.sourceCode .cmake}
add_run_benchmark_target(<target_name> true)</target_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Add empty run benchmark target


``` {.sourceCode .cmake}
add_run_benchmark_target(&lt;TARGET_NAME&gt; false)

</code></pre></div></div>

<h3 id="code-coverage">Code Coverage</h3>

<p>These CMake macros add code coverage.</p>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Must call <strong>initialize_code_coverage()</strong> after project() in the
CMakeLists.txt. This is required for all examples below.
:::</p>

<p>From this point, there are two primary methods for adding
instrumentation to targets: 1. A blanket instrumentation by calling
[add_code_coverage()]{.title-ref}, where all targets in that directory
and all subdirectories are automatically instrumented. 2. Per-target
instrumentation by calling
[target_code_coverage(&lt;TARGET_NAME&gt;)]{.title-ref}, where the target
is given and thus only that target is instrumented. This applies to both
libraries and executables.</p>

<p>To add coverage targets, such as calling [make ccov]{.title-ref} to
generate the actual coverage information for perusal or consumption,
call [target_code_coverage(&lt;TARGET_NAME&gt;)]{.title-ref} on an
<em>executable</em> target.</p>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by an external flag. If not provided it is automatically
enabled.
:::</p>

<h4 id="exclude-code-from-code-coverage">Exclude Code From Code Coverage</h4>

<p>Keyword             Description
  ——————- —————————————————————————————
  LCOV_EXCL_LINE    Lines containing this marker will be excluded.
  LCOV_EXCL_START   Marks the beginning of an excluded section. The current line is part of this section.
  LCOV_EXCL_STOP    Marks the end of an excluded section. The current line not part of this section.</p>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>You can replace LCOV above with GCOV or GCOVR.
:::</p>

<h4 id="example-1-all-targets-instrumented">Example 1: All targets instrumented</h4>

<p>In this case, the coverage information reported will be that of the
[theLib]{.title-ref} library target and [theExe]{.title-ref} executable.</p>

<h5 id="1a-via-global-command">1a: Via global command</h5>

<p>``` {.sourceCode .cmake}
add_code_coverage() # Adds instrumentation to all targets
add_library(theLib lib.cpp)
add_executable(theExe main.cpp)
target_link_libraries(theExe PRIVATE theLib)
target_code_coverage(theExe) # As an executable target, adds the ‘ccov-theExe’ target (instrumentation already added via global anyways) for generating code coverage reports.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
##### 1b: Via target commands


``` {.sourceCode .cmake}
add_library(theLib lib.cpp)
target_code_coverage(theLib) # As a library target, adds coverage instrumentation but no targets.
add_executable(theExe main.cpp)
target_link_libraries(theExe PRIVATE theLib)
target_code_coverage(theExe) # As an executable target, adds the 'ccov-theExe' target and instrumentation for generating code coverage reports.

</code></pre></div></div>

<h4 id="example-2-target-instrumented-but-with-regex-pattern-of-files-to-be-excluded-from-the-report">Example 2: Target instrumented, but with regex pattern of files to be excluded from the report</h4>

<p>``` {.sourceCode .cmake}
add_executable(theExe main.cpp non_covered.cpp)
target_code_coverage(theExe EXCLUDE non_covered.cpp test/*) # As an executable target, the reports will exclude the non-covered.cpp file, and any files in a test/ folder.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#### Example 3: Target added to the \'ccov\' and \'ccov-all\' targets


``` {.sourceCode .cmake}
add_code_coverage_all_targets(EXCLUDE test/*) # Adds the 'ccov-all' target set and sets it to exclude all files in test/ folders.
add_executable(theExe main.cpp non_covered.cpp)
target_code_coverage(theExe AUTO ALL EXCLUDE non_covered.cpp test/*) # As an executable target, adds to the 'ccov' and ccov-all' targets, and the reports will exclude the non-covered.cpp file, and any files in a test/ folder.

</code></pre></div></div>

<h4 id="example-4-ros-add_rostest_gtest-usage">Example 4: ROS add_rostest_gtest usage</h4>

<p>``` {.sourceCode .cmake}
add_rostest_gtest(test_node test/test_node.test test/test_node.cpp)
target_include_directories(test_node SYSTEM PUBLIC {catkin_INCLUDE_DIRS})
target_link_libraries(test_node ${catkin_LIBRARIES})
target_code_coverage(
  test_node
  ALL
  RUN_COMMAND rostest test_node test_node.test
  EXCLUDE ${COVERAGE_EXCLUDE}
  ENABLE ${ENABLE_CODE_COVERAGE})</p>

<p>```</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>
</div>
              <hr id="noetic-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="noetic-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#noetic-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#noetic-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#noetic-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="noetic-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="noetic-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="noetic-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros_industrial_cmake_boilerplate">ros_industrial_cmake_boilerplate</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-industrial-ros_industrial_cmake_boilerplate
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-industrial-ros_industrial_cmake_boilerplate" role="menuitem" tabindex="-1" href="/r/ros_industrial_cmake_boilerplate/github-ros-industrial-ros_industrial_cmake_boilerplate" data="github-ros-industrial-ros_industrial_cmake_boilerplate">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-industrial-ros_industrial_cmake_boilerplate
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros_industrial_cmake_boilerplate">ros_industrial_cmake_boilerplate</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/ros_industrial_cmake_boilerplate">ros_industrial_cmake_boilerplate</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-industrial-ros_industrial_cmake_boilerplate
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-industrial-ros_industrial_cmake_boilerplate" role="menuitem" tabindex="-1" href="/r/ros_industrial_cmake_boilerplate/github-ros-industrial-ros_industrial_cmake_boilerplate" data="github-ros-industrial-ros_industrial_cmake_boilerplate">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-industrial-ros_industrial_cmake_boilerplate
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-industrial/ros_industrial_cmake_boilerplate.git">https://github.com/ros-industrial/ros_industrial_cmake_boilerplate.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-02-11
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ros_industrial_cmake_boilerplate/#iron-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros_industrial_cmake_boilerplate/#iron-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros_industrial_cmake_boilerplate/#iron-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ros_industrial_cmake_boilerplate">ros_industrial_cmake_boilerplate</a></td>
                    <td>0.7.3</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="cmake-boilerplate-scripts">CMake Boilerplate Scripts</h1>

<p><a href="https://opensource.org/licenses/Apache-2.0"><img src="https://img.shields.io/:license-Apache%202.0-yellowgreen.svg" alt="license apache
2.0"></a></p>

<p><a href="https://opensource.org/licenses/BSD-3-Clause"><img src="https://img.shields.io/:license-BSD%203--Clause-orange.svg" alt="license bsd 3
clause"></a></p>

<p>This contains a collection of boilerplate CMake scripts and marcos.</p>

<p>Note: this package is <em>not</em> specific to ROS-Industrial and is usable
with any package which uses CMake. The prefix was added to facilitate
releasing this into different ROS distributions.</p>

<p>::: {.contents depth=”4”}
Table of Contents
:::</p>

<h2 id="create-debian-package-linux-or-nuget-package-windows">Create Debian Package (Linux) or NuGet Package (Windows)</h2>

<p>The following process will generate a Debian or NuGet package leveraging
CMake and CPack based on the OS.</p>

<p>The package should be located in the current directory.</p>

<p><code class="language-plaintext highlighter-rouge">` bash cd &lt;workspace directory&gt; catkin build -DRICB_PACKAGE=ON ./src/ros_industrial_cmake_boilerplate/.run-cpack</code>`</p>

<h2 id="available-macros">Available Macros</h2>

<h3 id="extract-package-metadata">Extract Package Metadata</h3>

<p>This CMake macro will extract the package name and version from a
package.xml file. It will create two cmake variable
<strong>${PREFIX_ARG}_extracted_name</strong> and
<strong>${PREFIX_ARG}_extracted_version</strong>.</p>

<p>``` {.sourceCode .cmake}
extract_package_metadata(${PREFIX_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### Clang Tidy

This CMake macro will add clang-tidy to all targets


``` {.sourceCode .cmake}
clang_tidy(ARGUMENTS ${ARGN})
# or
clang_tidy(ARGUMENTS ${ARGN} ENABLE ${USER_ENABLE_ARG})

</code></pre></div></div>

<p>This CMake macro will add clang-tidy to all targets with default
arguments.</p>

<p>``` {.sourceCode .cmake}
clang_tidy(ARGUMENTS ${DEFAULT_CLANG_TIDY_CHECKS})</p>
<h1 id="or">or</h1>
<p>clang_tidy(ARGUMENTS ${DEFAULT_CLANG_TIDY_CHECKS} ENABLE ${USER_ENABLE_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Clears clang-tidy so it is not called on any following defined code
compilation. It can be re-enabled by another call to
[clang\_tidy()]{.title-ref}.


``` {.sourceCode .cmake}
reset_clang_tidy()

</code></pre></div></div>

<p>This CMake macro will add clang-tidy to a provided target.</p>

<ul>
  <li><a href="https://clang.llvm.org/extra/clang-tidy/">The clang-tidy
documentation</a></li>
  <li><a href="https://clang.llvm.org/extra/clang-tidy/checks/list.html">The list of clang-tidy
checks</a></li>
</ul>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by an external flag. If not provided it is automatically
enabled.
:::</p>

<p>Single Argument Keywords:</p>

<p>+———————–+———————–+———————–+
| Keyword               | Type                  | Description           |
+=======================+=======================+=======================+
| ENABLE                | &gt; ON/OFF              | Enable/Disable        |
|                       |                       | clang-tidy            |
+———————–+———————–+———————–+
| WARNINGS_AS_ERRORS  | &gt; ON/OFF              | Treat warnings as     |
|                       |                       | errors. If            |
|                       |                       | ERROR_CHECKS is not  |
|                       |                       | provided, it will use |
|                       |                       | CHECKS to treat as    |
|                       |                       | errors.               |
+———————–+———————–+———————–+
| HEADER_FILTER        | &gt; String              | Default to '.*' if |
|                       |                       | not provided. Regular |
|                       |                       | expression matching   |
|                       |                       | the names of the      |
|                       |                       | headers to output     |
|                       |                       | diagnostics from.     |
+———————–+———————–+———————–+
| LINE_FILTER          | &gt; String              | List of files with    |
|                       |                       | line ranges to filter |
|                       |                       | the warnings.         |
+———————–+———————–+———————–+
| CHECKS                | &gt; String              | Comma-separated list  |
|                       |                       | of globs with         |
|                       |                       | optional '-'        |
|                       |                       | prefix. Globs are     |
|                       |                       | processed in order of |
|                       |                       | appearance in the     |
|                       |                       | list. Globs without   |
|                       |                       | the '-' prefix add  |
|                       |                       | checks with matching  |
|                       |                       | names to the set,     |
|                       |                       | globs with the '-'  |
|                       |                       | prefix remove checks  |
|                       |                       | with matching names   |
|                       |                       | from the set of       |
|                       |                       | enabled checks. This  |
|                       |                       | option's value is    |
|                       |                       | appended to the value |
|                       |                       | of the 'Checks'     |
|                       |                       | option in the         |
|                       |                       | .clang-tidy file, if  |
|                       |                       | any.                  |
+———————–+———————–+———————–+
| CONFIG                | &gt; String              | YAML/JSON format. If  |
|                       |                       | not provided,         |
|                       |                       | clang-tidy will       |
|                       |                       | attempt to find a     |
|                       |                       | file named            |
|                       |                       | .clang-tidy for each  |
|                       |                       | source file in its    |
|                       |                       | parent directories.   |
+———————–+———————–+———————–+
| ERROR_CHECKS         | &gt; String              | Upgrades warnings to  |
|                       |                       | errors. Same format   |
|                       |                       | as 'CHECKS'. This   |
|                       |                       | option's value is    |
|                       |                       | appended to the value |
|                       |                       | of the                |
|                       |                       | 'WarningsAsErrors'  |
|                       |                       | option in the         |
|                       |                       | .clang-tidy file, if  |
|                       |                       | any.                  |
+———————–+———————–+———————–+</p>

<p>Multip Value Argument Keywords:</p>

<p>+———————–+———————–+———————–+
| Keyword               | Type                  | Description           |
+=======================+=======================+=======================+
| ARGUMENTS             | &gt; String              | This supports adding  |
|                       |                       | additional arguments  |
|                       |                       | to be passed to the   |
|                       |                       | clang-tidy. You could |
|                       |                       | just use this if      |
|                       |                       | desired over the      |
|                       |                       | single keywords       |
|                       |                       | except for the ENABLE |
|                       |                       | to pass all arguments |
|                       |                       | to clang-tidy if      |
|                       |                       | desired.              |
+———————–+———————–+———————–+</p>

<p>This configures clang-tidy with default arguments where any violation
will produce compiler warnings.</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CHECKS ${DEFAULT_CLANG_TIDY_CHECKS})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with default arguments where any violation
will produce compiler errors.


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CHECKS ${DEFAULT_CLANG_TIDY_CHECKS} WARNINGS_AS_ERRORS ON)

</code></pre></div></div>

<p>This configures clang-tidy with custom error checks which can be
different from the warning checks where any violation will produce
compiler errors.</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CHECKS ${DEFAULT_CLANG_TIDY_CHECKS} ERROR_CHECKS ${DEFAULT_CLANG_TIDY_CHECKS})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with a header filter. If not provided it will
default to \".\*\".


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} HEADER_FILTER ".*")

</code></pre></div></div>

<p>This configures clang-tidy with line filter as a JSON array of objects.</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} LINE_FILTER “[{“name”:”file1.cpp”,”lines”:[[1,3],[5,7]]},{“name”:”file2.h”}]”)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with config in YAML/JSON format.


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CONFIG ""{Checks: '*', CheckOptions: [{key: x, value: y}]}")

</code></pre></div></div>

<p>This configures clang-tidy to use a .clang-tidy file if no arguments are
provided</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with arguments list.


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} ARGUMENTS ${ARGN})

</code></pre></div></div>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>In some situations, you may want to disable clang-tidy which is
explained <a href="https://clang.llvm.org/extra/clang-tidy/#id3">here</a>.
:::</p>

<h3 id="include-what-you-use-iwyu">Include What You Use (IWYU)</h3>

<p>This CMake macro will add IWYU to a given target</p>

<ul>
  <li><a href="https://github.com/include-what-you-use/include-what-you-use/blob/master/docs/WhyIWYU.md">Why Include What You
Use?</a></li>
  <li><a href="https://github.com/include-what-you-use/include-what-you-use/blob/master/README.md">IWYU
Documentation</a></li>
  <li><a href="https://github.com/include-what-you-use/include-what-you-use/blob/master/docs/IWYUPragmas.md">Exclude headers from
check</a></li>
  <li><a href="https://www.incredibuild.com/blog/include-what-you-use-how-to-best-utilize-this-tool-and-avoid-common-issues/">Avoid Common
Issues</a></li>
</ul>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by an external flag. If not provided it is automatically
enabled.
:::</p>

<p>``` {.sourceCode .cmake}
target_include_what_you_use(${PACKAGE_NAME} ARGUMENTS ${ARGN})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This CMake macro will add IWYU to a given target with default arguments.


``` {.sourceCode .cmake}
target_include_what_you_use(${PACKAGE_NAME} ARGUMENTS ${DEFAULT_IWYU_ARGS})

</code></pre></div></div>

<p>This CMake macro will add IWYU to all targets</p>

<p>``` {.sourceCode .cmake}
include_what_you_use(ARGUMENTS ${ARGN})</p>
<h1 id="or-1">or</h1>
<p>include_what_you_use(ARGUMENTS ${ARGN} ENABLE ${USER_ENABLE_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This CMake macro will add IWYU to all targets with default arguments.


``` {.sourceCode .cmake}
include_what_you_use(ARGUMENTS ${DEFAULT_IWYU_ARGS})
# or
include_what_you_use(ARGUMENTS ${DEFAULT_IWYU_ARGS} ENABLE ${USER_ENABLE_ARG})

</code></pre></div></div>

<p>Clears IWYU so it is not called on any following defined code
compilation. It can be re-enabled by another call to
[include_what_you_use()]{.title-ref}.</p>

<p>``` {.sourceCode .cmake}
reset_include_what_you_use()</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### CppCheck

This CMake macro will add CppCheck to a given target

-   [CppCheck Wiki](https://sourceforge.net/p/cppcheck/wiki/Home/)

::: {.note}
::: {.admonition-title}
Note
:::

Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by the external flag. If not provided it is automatically
enabled.
:::


``` {.sourceCode .cmake}
target_cppcheck(${PACKAGE_NAME} ARGUMENTS ${ARGN})

</code></pre></div></div>

<p>This CMake macro will add CppCheck to a given target with default
arguments.</p>

<p>``` {.sourceCode .cmake}
target_cppcheck(${PACKAGE_NAME} ARGUMENTS ${DEFAULT_CPPCHECK_ARGS})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This CMake macro will add CppCheck to all targets


``` {.sourceCode .cmake}
cppcheck(ARGUMENTS ${ARGN})
# or
cppcheck(ARGUMENTS ${ARGN} ENABLE ${USER_ENABLE_ARG})

</code></pre></div></div>

<p>This CMake macro will add CppCheck to all targets with default
arguments.</p>

<p>``` {.sourceCode .cmake}
cppcheck(ARGUMENTS ${DEFAULT_CPPCHECK_ARGS})</p>
<h1 id="or-2">or</h1>
<p>cppcheck(ARGUMENTS ${DEFAULT_CPPCHECK_ARGS} ENABLE ${USER_ENABLE_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Clears CppCheck so it is not called on any following defined code
compilation. It can be re-enabled by another call to
[cppcheck()]{.title-ref}.


``` {.sourceCode .cmake}
reset_cppcheck()

</code></pre></div></div>

<h3 id="sanitizer-tools">Sanitizer Tools</h3>

<p>Sanitizers are tools that perform checks during a program’s runtime and
returns issues, and as such, along with unit testing, code coverage and
static analysis, is another tool to add to the programmers toolbox. And
of course, like the previous tools, are tragically simple to add into
any project using CMake, allowing any project and developer to quickly
and easily use.</p>

<p>A quick rundown of the tools available, and what they do:</p>

<ul>
  <li>
<a href="https://clang.llvm.org/docs/LeakSanitizer.html">LeakSanitizer</a>
detects memory leaks, or issues where memory is allocated and never
deallocated, causing programs to slowly consume more and more
memory, eventually leading to a crash.</li>
  <li>

    <dl>
      <dt>
<a href="https://clang.llvm.org/docs/AddressSanitizer.html">AddressSanitizer</a> is a fast memory error detector. It is useful for detecting most issues dealing with memory, such as:</dt>
      <dd>
        <ul>
          <li>Out of bounds accesses to heap, stack, global</li>
          <li>Use after free</li>
          <li>Use after return</li>
          <li>Use after scope</li>
          <li>Double-free, invalid free</li>
          <li>Memory leaks (using LeakSanitizer)</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>
<a href="https://clang.llvm.org/docs/ThreadSanitizer.html">ThreadSanitizer</a>
detects data races for multi-threaded code.</li>
  <li>

    <dl>
      <dt>
<a href="https://clang.llvm.org/docs/UndefinedBehaviorSanitizer.html">UndefinedBehaviourSanitizer</a> detects the use of various features of C/C++ that are explicitly listed as resulting in undefined behaviour. Most notably:</dt>
      <dd>
        <ul>
          <li>Using misaligned or null pointer.</li>
          <li>Signed integer overflow</li>
          <li>Conversion to, from, or between floating-point types which
would overflow the destination</li>
          <li>Division by zero</li>
          <li>Unreachable code</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>
<a href="https://clang.llvm.org/docs/MemorySanitizer.html">MemorySanitizer</a>
detects uninitialized reads.</li>
  <li>
<a href="https://clang.llvm.org/docs/ControlFlowIntegrity.html">Control Flow
Integrity</a> is
designed to detect certain forms of undefined behaviour that can
potentially allow attackers to subvert the program's control flow.</li>
</ul>

<p>These are used by declaring the <code class="language-plaintext highlighter-rouge">USE_SANITIZER</code>{.sourceCode} CMake
variable as string containing any of:</p>

<ul>
  <li>Address</li>
  <li>Memory</li>
  <li>MemoryWithOrigins</li>
  <li>Undefined</li>
  <li>Thread</li>
  <li>Leak</li>
  <li>CFI</li>
</ul>

<p>Multiple values are allowed, e.g.
<code class="language-plaintext highlighter-rouge">-DUSE_SANITIZER=Address,Leak</code>{.sourceCode} but some sanitizers cannot
be combined together, e.g. <code class="language-plaintext highlighter-rouge">-DUSE_SANITIZER=Address,Memory</code>{.sourceCode}
will result in configuration error. The delimeter character is not
required and <code class="language-plaintext highlighter-rouge">-DUSE_SANITIZER=AddressLeak</code>{.sourceCode} would work as
well.</p>

<h3 id="cpack">CPack</h3>

<h4 id="configure-package-without-components">Configure Package Without Components</h4>

<p>Configure package for cpack which does not leverage components</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>VERSION - The package version</li>
          <li>MAINTAINER_NAME - The package maintainer name</li>
          <li>MAINTAINER_EMAIL - The package maintainer email</li>
          <li>VENDOR - The package vender</li>
          <li>DESCRIPTION - The package description</li>
          <li>LICENSE_FILE - The package license file</li>
          <li>README_FILE - The package readme</li>
          <li>PACKAGE_PREFIX - The package prefix applied to all cpack
generated files</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>LINUX_BUILD_DEPENDS - The linux build dependencies
required via apt install (If not provided LINUX_DEPENDS is
used)</li>
          <li>WINDOWS_BUILD_DEPENDS - The windows build dependencies
required via nuget install (If not provided WINDOWS_DEPENDS
is used)</li>
          <li>LINUX_DEPENDS - The linux dependencies required via apt
install</li>
          <li>WINDOWS_DEPENDS - The windows dependencies required via
nuget install</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
cpack(
  VERSION ${pkg_extracted_version}
  MAINTAINER <a href="https://github.com/ros-industrial-consortium/tesseract">https://github.com/ros-industrial-consortium/tesseract</a>
  DESCRIPTION ${pkg_extracted_description}
  LICENSE_FILE ${CMAKE_CURRENT_LIST_DIR}/../LICENSE
  README_FILE ${CMAKE_CURRENT_LIST_DIR}/../README.md
  LINUX_DEPENDS
    “libboost-system-dev”
    “libboost-filesystem-dev”
    “libboost-serialization-dev”
    “libconsole-bridge-dev”
    “libtinyxml2-dev”
    “libeigen3-dev”
    “libyaml-cpp-dev”
  WINDOWS_DEPENDS
    “boost_system”
    “boost_filesystem;”
    “boost_serialization”
    “console-bridge”
    “tinyxml2”
    “Eigen3”
    “yaml-cpp”)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#### Configure Package With Components

This requires two macros one used in the components cmake file another
for the top most package cmake file.

##### Configure Component

Configure components for cpack

-   

    One Value Args:

    :   -   COMPONENT - The component name
        -   VERSION - The package version
        -   DESCRIPTION - The package description
        -   PACKAGE\_PREFIX - The package prefix applied to all cpack
            generated files

-   

    Multi Value Args:

    :   -   LINUX\_BUILD\_DEPENDS - The linux build dependencies
            required via apt install (If not provided LINUX\_DEPENDS is
            used)
        -   WINDOWS\_BUILD\_DEPENDS - The windows build dependencies
            required via nuget install (If not provided WINDOWS\_DEPENDS
            is used)
        -   LINUX\_DEPENDS - The linux dependencies required via apt
            install
        -   WINDOWS\_DEPENDS - The windows dependencies required via
            nuget install
        -   COMPONENT\_DEPENDS - The component dependencies required
            from this package


``` {.sourceCode .cmake}
cpack_component(
  COMPONENT IKFAST # must be uppercase
  VERSION ${pkg_extracted_version}
  DESCRIPTION "Tesseract Kinematics ikfast implementation"
  COMPONENT_DEPENDS core)

</code></pre></div></div>

<h5 id="configure-components-package">Configure Components Package</h5>

<p>Configure package leveraging components for cpack</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>VERSION - The package version</li>
          <li>MAINTAINER_NAME - The package maintainer name</li>
          <li>MAINTAINER_EMAIL - The package maintainer email</li>
          <li>VENDOR - The package vender</li>
          <li>DESCRIPTION - The package description</li>
          <li>LICENSE_FILE - The package license file</li>
          <li>README_FILE - The package readme</li>
          <li>PACKAGE_PREFIX - The package prefix applied to all cpack
generated files</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>COMPONENT_DEPENDS - The component dependencies required
from this package</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
cpack_component_package(
  VERSION ${pkg_extracted_version}
  MAINTAINER <a href="https://github.com/ros-industrial-consortium/tesseract">https://github.com/ros-industrial-consortium/tesseract</a>
  DESCRIPTION ${pkg_extracted_description}
  LICENSE_FILE ${CMAKE_CURRENT_LIST_DIR}/../LICENSE
  README_FILE ${CMAKE_CURRENT_LIST_DIR}/../README.md)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
##### Configure Debian Source Package

Create debian source package leveraging cpack for upload to ppa like
launchpad.net

-   

    One Value Args:

    :   -   CHANGLELOG (Required) - The file path to the package
            CHANGELOG.rst
        -   PACKAGE\_PREFIX (Optional) - The package prefix applied to
            all cpack generated files
        -   UPLOAD (Optional) - Indicate if it should be uploaded to ppa
        -   DEBIAN\_INCREMENT - The debian increment to be used, default
            is zero
        -   DPUT\_HOST (Optional/Required) - The ppa to upload to. Only
            required if UPLOAD is enabled
        -   DPUT\_CONFIG\_IN (Optional) - The dput config.in file. If
            not provide one is created.

-   

    Multi Value Args:

    :   -   DISTRIBUTIONS - The linux distrabution to deploy

-   

    Leveraged CPack Variable: When using the cpack macros above these are automatically set

    :   -   CPACK\_PACKAGE\_DESCRIPTION (Required)
        -   CPACK\_PACKAGE\_VERSION (Required)
        -   CPACK\_PACKAGE\_DESCRIPTION\_FILE (Optional)
        -   CPACK\_SOURCE\_IGNORE\_FILES (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_NAME (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_SECTION (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_PRIORITY (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_MAINTAINER (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_MAINTAINER\_NAME (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_MAINTAINER\_EMAIL (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_ARCHITECTURE (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_DESCRIPTION (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_BUILD\_DEPENDS (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_DEPENDS (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_HOMEPAGE (Optional)
        -   [CPACK\_COMPONENT]()\&lt;COMPONENT\&gt;\_DEPENDS (Reqired if
            components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_ARCHITECTURE
            (Reqired if components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_DESCRIPTION (Reqired if
            components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_ARCHITECTURE
            (Reqired if components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_DEPENDS (Reqired if
            components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_BUILD\_DEPENDS
            (Reqired if components exist and enabled)


``` {.sourceCode .cmake}
cpack_debian_source_package(
  CHANGLELOG ${CMAKE_CURRENT_LIST_DIR}/CHANGELOG.rst
  UPLOAD ${RICB_PACKAGE_SOURCE_UPLOAD}
  DPUT_HOST ${RICB_PACKAGE_SOURCE_DPUT_HOST}
  DEBIAN_INCREMENT ${RICB_PACKAGE_SOURCE_DEBIAN_INCREMENT}
  DISTRIBUTIONS ${RICB_PACKAGE_SOURCE_DISTRIBUTIONS}
)

</code></pre></div></div>

<h3 id="configure-pure-cmake-package">Configure (Pure CMake Package)</h3>

<p>This CMake macro simplifies the CMake package configure and install by
performing multiple operations</p>

<h4 id="configure-package">Configure Package</h4>

<p>Performs multiple operation so other packages may find a package</p>

<p>If Namespace is provided but no targets it is assumed targets were
installed and must be exported</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>NAMESPACE - This will prepend &lt;namespace&gt;:: to the target
names as they are written to the import file</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>TARGETS - The targets from the project to be installed</li>
          <li>COMPONENTS - The packages supported find_package components
if any</li>
          <li>DEPENDENCIES - The dependencies to be written to the
packages Config.cmake file</li>
          <li>CFG_EXTRAS - The extra cmake files to be include in the
packages Config.cmake file</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Usage:</dt>
      <dd>
        <ul>
          <li>It installs the provided targets</li>
          <li>It exports the provided targets under the provided namespace</li>
          <li>It installs the package.xml file</li>
          <li>It creates and installs the ${PROJECT_NAME}-config.cmake
and ${PROJECT_NAME}-config-version.cmake</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
configure_package(
  NAMESPACE <package_namespace>
  TARGETS <target_name_a> <target_name_b>
  COMPONENTS <component_name_a> <component_name_b>
  DEPENDENCIES <deps>...
  CFG_EXTRAS <cmake files="">...
)</cmake></deps></component_name_b></component_name_a></target_name_b></target_name_a></package_namespace></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Example:


``` {.sourceCode .cmake}
configure_package(
  NAMESPACE
    tesseract
  TARGETS
    ${PROJECT_NAME}
  DEPENDENCIES
    Eigen3
    TinyXML2
    yaml-cpp
    "Boost COMPONENTS system filesystem serialization"
  CFG_EXTRAS
    cmake/tesseract_common-extras.cmake
)

</code></pre></div></div>

<p>To create the config cmake file, the macro by default looks for a
configuration template <code class="language-plaintext highlighter-rouge">cmake/${PROJECT_NAME}-config.cmake.in</code> provided
by the package. If not present, a default one will be generated. If
generated automatically, package dependencies will be included from the
arguments listed by <code class="language-plaintext highlighter-rouge">DEPENDENCIES</code>. Additional configuration CMake
scripts can also be included with relative paths listed in the
<code class="language-plaintext highlighter-rouge">CFG_EXTRAS</code> argument. The scripts should be installed alongside the
generated package config file, in <code class="language-plaintext highlighter-rouge">lib/cmake/${PROJECT_NAME}</code>.</p>

<h4 id="configure-component">Configure Component</h4>

<p>Performs multiple operation so other packages may find a package's
component</p>

<p>If Namespace is provided but no targets it is assumed targets were
installed and must be exported</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>NAMESPACE - This will prepend &lt;namespace&gt;:: to the target
names as they are written to the import file</li>
          <li>COMPONENT - The component name</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>TARGETS - The targets from the project to be installed</li>
          <li>DEPENDENCIES - The dependencies to be written to the
packages Config.cmake file</li>
          <li>CFG_EXTRAS - The extra cmake files to be include in the
packages Config.cmake file</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Usage:</dt>
      <dd>
        <ul>
          <li>It installs the provided targets</li>
          <li>It exports the provided targets under the provided namespace</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
configure_component(
  COMPONENT <component_name>
  NAMESPACE <package_namespace>
  TARGETS <target_name_a> <target_name_b>
  DEPENDENCIES <deps>...
  CFG_EXTRAS <cmake files="">...
)</cmake></deps></target_name_b></target_name_a></package_namespace></component_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Example:


``` {.sourceCode .cmake}
configure_component(
  COMPONENT
    kdl
  NAMESPACE
    tesseract
  TARGETS
    ${PROJECT_NAME}_kdl ${PROJECT_NAME}_kdl_factories
  DEPENDENCIES
    Eigen3
    TinyXML2
    yaml-cpp
    "Boost COMPONENTS system filesystem serialization"
  CFG_EXTRAS
    cmake/tesseract_common-extras.cmake
)

</code></pre></div></div>

<p>To create the config cmake file, the macro by default looks for a
configuration template <code class="language-plaintext highlighter-rouge">cmake/&lt;COMPONENT_NAME&gt;-config.cmake.in</code> provided
by the package. If not present, a default one will be generated. If
generated automatically, package dependencies will be included from the
arguments listed by <code class="language-plaintext highlighter-rouge">DEPENDENCIES</code>. Additional configuration CMake
scripts can also be included with relative paths listed in the
<code class="language-plaintext highlighter-rouge">CFG_EXTRAS</code> argument. The scripts should be installed alongside the
generated package config file, in <code class="language-plaintext highlighter-rouge">lib/cmake/${PROJECT_NAME}</code>.</p>

<h4 id="sub-macros-used-in-configure-the-package">Sub macros used in configure the package</h4>

<p>The following macros are used by configure_package and can be used
independently if needed</p>

<h5 id="install-targets">Install Targets</h5>

<p>This will install targets along associated with the provided component
and export them to ${ARG_COMPONENT}-targets</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>COMPONENT (Optional) - The component name to associate the
targets with, if not provided ${PROJECT_NAME} is used</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>TARGETS - The targets from the project to be installed</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
install_targets(TARGETS targetA targetb)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
##### Install package.xml

This will install the package.xml file


``` {.sourceCode .cmake}
install_pkgxml()

</code></pre></div></div>

<h5 id="generate-cmake-config-files">Generate CMake Config Files</h5>

<p>Performs multiple operation so other packages may find a package and
package components The default export name is ${PROJECT_NAME} but it
can be overriden by providing EXPORT_NAME</p>

<ul>
  <li>

    <dl>
      <dt>Options:</dt>
      <dd>
        <ul>
          <li>EXPORT - indicate if trargets should be exported</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>COMPONENT (Optional) - the name given to the export
${ARG_COMPONENT}-targets, if not provided PROJECT_NAME is
used</li>
          <li>CONFIG_NAME (Optional) - the name given to the export
${ARG_COMPONENT}-config.cmake, if not provided COMPONENT
is used</li>
          <li>NAMESPACE (Optional) - the namespace assigned for exported
targets</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>DEPENDENCIES (Optional) - list of dependencies to be loaded
in the package config</li>
          <li>CFG_EXTRAS (Optional) - list of extra cmake config files to
be loaded in package config</li>
          <li>SUPPORTED_COMPONENTS (Optional) - list of supported
components</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Usage:</dt>
      <dd>
        <ul>
          <li>generate_package_config(EXPORT NAMSPACE namespace) Install
export targets with provided namespace</li>
          <li>generate_package_config(EXPORT) Install export targets
with no namespace</li>
          <li>generate_package_config() Install cmake config files and
not install export targets</li>
          <li>It exports the provided targets under the provided namespace
${ARG_COMPONENT}-targets, if EXPORT option is set</li>
          <li>It creates and install the
${ARG_CONFIG_NAME}-config.cmake</li>
          <li>In not component, it create and installs
${ARG_CONFIG_NAME}-config-version.cmake</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}</p>
<h1 id="install-and-export-targets-with-provided-namespace">Install and export targets with provided namespace</h1>
<p>generate_package_config(EXPORT NAMSPACE namespace)</p>

<p>#Install and export targets with no namespace
generate_package_config(EXPORT)</p>

<h1 id="install-cmake-config-files-and-not-install-export-targets">Install CMake config files and not install export targets</h1>
<p>generate_package_config() Install CMake config files and not install export targets</p>

<h1 id="install-and-export-targets-for-package-with-components">Install and export targets for package with components</h1>
<p>generate_package_config(EXPORT CONFIG_NAME ${PROJECT_NAME} SUPPORTED_COMPONENTS componentA componentB)</p>

<h1 id="install-and-export-targets-for-component">Install and export targets for component</h1>
<p>generate_package_config(EXPORT
  COMPONENT kdl
  NAMESPACE namespace
  DEPENDENCIES packageA packageB
  CFG_EXTRAS extraA.cmake extraB.cmake)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Additionally, `DEPENDENCIES`, `CFG_EXTRAS` and `SUPPORTED_COMPONENTS`
are passed for generated CMake config files.

##### Install Ament Hooks

Allows Colcon to find non-Ament packages when using workspace underlays


``` {.sourceCode .cmake}
install_ament_hooks()

</code></pre></div></div>

<h3 id="set-target-cxx-version">Set Target CXX VERSION</h3>

<p>This CMake macro simplifies setting the CXX version for the target</p>

<p>``` {.sourceCode .cmake}
target_cxx_version(${PACKAGE_NAME} &lt;INTERFACE|PRIVATE|PUBLIC&gt; VERSION <cxx_version>)</cxx_version></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Example: Set the version to 14 and PUBLIC.


``` {.sourceCode .cmake}
target_cxx_version(${PACKAGE_NAME} PUBLIC VERSION 14)

</code></pre></div></div>

<h3 id="find-gtest-pure-cmake-package">Find GTest (Pure CMake Package)</h3>

<p>This CMake macro calls <code class="language-plaintext highlighter-rouge">find_package(GTest REQUIRED)</code> and checks for the
<code class="language-plaintext highlighter-rouge">GTest::GTest</code> and <code class="language-plaintext highlighter-rouge">GTest::Main</code> targets. If the targets are missing it
will create the targets using the CMake variables.</p>

<p>``` {.sourceCode .cmake}
find_gtest()</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### Add Run Tests Target (Pure CMake Package)

This CMake macro adds a custom target that will run the tests after they
are finished building. You may pass an optional argument true\|false
adding the ability to disable the running of tests as part of the build
for CI which calls make test.

Add run test target (These will automatically run the test after build
finishes)


``` {.sourceCode .cmake}
add_run_tests_target(&lt;TARGET_NAME&gt;)

</code></pre></div></div>

<p>``` {.sourceCode .cmake}
add_run_tests_target(<target_name> true)</target_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Add empty run test target


``` {.sourceCode .cmake}
add_run_tests_target(&lt;TARGET_NAME&gt; false)

</code></pre></div></div>

<h3 id="add-gtest-discover-tests-pure-cmake-package">Add GTest Discover Tests (Pure CMake Package)</h3>

<p>This CMake macro call the appropriate GTest function to add a test based
on the CMake version</p>

<p>``` {.sourceCode .cmake}
add_gtest_discover_tests(<target_name>)</target_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### Add Run Benchmark Target

This CMake macro adds a custom target that will run the benchmarks after
they are finished building.

Add run benchmark target (These will automatically run the benchmark
after build finishes)


``` {.sourceCode .cmake}
add_run_benchmark_target(&lt;TARGET_NAME&gt;)

</code></pre></div></div>

<p>``` {.sourceCode .cmake}
add_run_benchmark_target(<target_name> true)</target_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Add empty run benchmark target


``` {.sourceCode .cmake}
add_run_benchmark_target(&lt;TARGET_NAME&gt; false)

</code></pre></div></div>

<h3 id="code-coverage">Code Coverage</h3>

<p>These CMake macros add code coverage.</p>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Must call <strong>initialize_code_coverage()</strong> after project() in the
CMakeLists.txt. This is required for all examples below.
:::</p>

<p>From this point, there are two primary methods for adding
instrumentation to targets: 1. A blanket instrumentation by calling
[add_code_coverage()]{.title-ref}, where all targets in that directory
and all subdirectories are automatically instrumented. 2. Per-target
instrumentation by calling
[target_code_coverage(&lt;TARGET_NAME&gt;)]{.title-ref}, where the target
is given and thus only that target is instrumented. This applies to both
libraries and executables.</p>

<p>To add coverage targets, such as calling [make ccov]{.title-ref} to
generate the actual coverage information for perusal or consumption,
call [target_code_coverage(&lt;TARGET_NAME&gt;)]{.title-ref} on an
<em>executable</em> target.</p>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by an external flag. If not provided it is automatically
enabled.
:::</p>

<h4 id="exclude-code-from-code-coverage">Exclude Code From Code Coverage</h4>

<p>Keyword             Description
  ——————- —————————————————————————————
  LCOV_EXCL_LINE    Lines containing this marker will be excluded.
  LCOV_EXCL_START   Marks the beginning of an excluded section. The current line is part of this section.
  LCOV_EXCL_STOP    Marks the end of an excluded section. The current line not part of this section.</p>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>You can replace LCOV above with GCOV or GCOVR.
:::</p>

<h4 id="example-1-all-targets-instrumented">Example 1: All targets instrumented</h4>

<p>In this case, the coverage information reported will be that of the
[theLib]{.title-ref} library target and [theExe]{.title-ref} executable.</p>

<h5 id="1a-via-global-command">1a: Via global command</h5>

<p>``` {.sourceCode .cmake}
add_code_coverage() # Adds instrumentation to all targets
add_library(theLib lib.cpp)
add_executable(theExe main.cpp)
target_link_libraries(theExe PRIVATE theLib)
target_code_coverage(theExe) # As an executable target, adds the ‘ccov-theExe’ target (instrumentation already added via global anyways) for generating code coverage reports.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
##### 1b: Via target commands


``` {.sourceCode .cmake}
add_library(theLib lib.cpp)
target_code_coverage(theLib) # As a library target, adds coverage instrumentation but no targets.
add_executable(theExe main.cpp)
target_link_libraries(theExe PRIVATE theLib)
target_code_coverage(theExe) # As an executable target, adds the 'ccov-theExe' target and instrumentation for generating code coverage reports.

</code></pre></div></div>

<h4 id="example-2-target-instrumented-but-with-regex-pattern-of-files-to-be-excluded-from-the-report">Example 2: Target instrumented, but with regex pattern of files to be excluded from the report</h4>

<p>``` {.sourceCode .cmake}
add_executable(theExe main.cpp non_covered.cpp)
target_code_coverage(theExe EXCLUDE non_covered.cpp test/*) # As an executable target, the reports will exclude the non-covered.cpp file, and any files in a test/ folder.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#### Example 3: Target added to the \'ccov\' and \'ccov-all\' targets


``` {.sourceCode .cmake}
add_code_coverage_all_targets(EXCLUDE test/*) # Adds the 'ccov-all' target set and sets it to exclude all files in test/ folders.
add_executable(theExe main.cpp non_covered.cpp)
target_code_coverage(theExe AUTO ALL EXCLUDE non_covered.cpp test/*) # As an executable target, adds to the 'ccov' and ccov-all' targets, and the reports will exclude the non-covered.cpp file, and any files in a test/ folder.

</code></pre></div></div>

<h4 id="example-4-ros-add_rostest_gtest-usage">Example 4: ROS add_rostest_gtest usage</h4>

<p>``` {.sourceCode .cmake}
add_rostest_gtest(test_node test/test_node.test test/test_node.cpp)
target_include_directories(test_node SYSTEM PUBLIC {catkin_INCLUDE_DIRS})
target_link_libraries(test_node ${catkin_LIBRARIES})
target_code_coverage(
  test_node
  ALL
  RUN_COMMAND rostest test_node test_node.test
  EXCLUDE ${COVERAGE_EXCLUDE}
  ENABLE ${ENABLE_CODE_COVERAGE})</p>

<p>```</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>
</div>
              <hr id="iron-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="iron-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#iron-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#iron-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#iron-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="iron-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="iron-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="iron-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros_industrial_cmake_boilerplate">ros_industrial_cmake_boilerplate</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/ros_industrial_cmake_boilerplate">ros_industrial_cmake_boilerplate</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-ros-industrial-ros_industrial_cmake_boilerplate
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-ros-industrial-ros_industrial_cmake_boilerplate" role="menuitem" tabindex="-1" href="/r/ros_industrial_cmake_boilerplate/github-ros-industrial-ros_industrial_cmake_boilerplate" data="github-ros-industrial-ros_industrial_cmake_boilerplate">
                    <span class="glyphicon glyphicon-star"></span>
                    github-ros-industrial-ros_industrial_cmake_boilerplate
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-industrial/ros_industrial_cmake_boilerplate.git">https://github.com/ros-industrial/ros_industrial_cmake_boilerplate.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-02-11
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ros_industrial_cmake_boilerplate/#melodic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros_industrial_cmake_boilerplate/#melodic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros_industrial_cmake_boilerplate/#melodic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ros_industrial_cmake_boilerplate">ros_industrial_cmake_boilerplate</a></td>
                    <td>0.7.3</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="cmake-boilerplate-scripts">CMake Boilerplate Scripts</h1>

<p><a href="https://opensource.org/licenses/Apache-2.0"><img src="https://img.shields.io/:license-Apache%202.0-yellowgreen.svg" alt="license apache
2.0"></a></p>

<p><a href="https://opensource.org/licenses/BSD-3-Clause"><img src="https://img.shields.io/:license-BSD%203--Clause-orange.svg" alt="license bsd 3
clause"></a></p>

<p>This contains a collection of boilerplate CMake scripts and marcos.</p>

<p>Note: this package is <em>not</em> specific to ROS-Industrial and is usable
with any package which uses CMake. The prefix was added to facilitate
releasing this into different ROS distributions.</p>

<p>::: {.contents depth=”4”}
Table of Contents
:::</p>

<h2 id="create-debian-package-linux-or-nuget-package-windows">Create Debian Package (Linux) or NuGet Package (Windows)</h2>

<p>The following process will generate a Debian or NuGet package leveraging
CMake and CPack based on the OS.</p>

<p>The package should be located in the current directory.</p>

<p><code class="language-plaintext highlighter-rouge">` bash cd &lt;workspace directory&gt; catkin build -DRICB_PACKAGE=ON ./src/ros_industrial_cmake_boilerplate/.run-cpack</code>`</p>

<h2 id="available-macros">Available Macros</h2>

<h3 id="extract-package-metadata">Extract Package Metadata</h3>

<p>This CMake macro will extract the package name and version from a
package.xml file. It will create two cmake variable
<strong>${PREFIX_ARG}_extracted_name</strong> and
<strong>${PREFIX_ARG}_extracted_version</strong>.</p>

<p>``` {.sourceCode .cmake}
extract_package_metadata(${PREFIX_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### Clang Tidy

This CMake macro will add clang-tidy to all targets


``` {.sourceCode .cmake}
clang_tidy(ARGUMENTS ${ARGN})
# or
clang_tidy(ARGUMENTS ${ARGN} ENABLE ${USER_ENABLE_ARG})

</code></pre></div></div>

<p>This CMake macro will add clang-tidy to all targets with default
arguments.</p>

<p>``` {.sourceCode .cmake}
clang_tidy(ARGUMENTS ${DEFAULT_CLANG_TIDY_CHECKS})</p>
<h1 id="or">or</h1>
<p>clang_tidy(ARGUMENTS ${DEFAULT_CLANG_TIDY_CHECKS} ENABLE ${USER_ENABLE_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Clears clang-tidy so it is not called on any following defined code
compilation. It can be re-enabled by another call to
[clang\_tidy()]{.title-ref}.


``` {.sourceCode .cmake}
reset_clang_tidy()

</code></pre></div></div>

<p>This CMake macro will add clang-tidy to a provided target.</p>

<ul>
  <li><a href="https://clang.llvm.org/extra/clang-tidy/">The clang-tidy
documentation</a></li>
  <li><a href="https://clang.llvm.org/extra/clang-tidy/checks/list.html">The list of clang-tidy
checks</a></li>
</ul>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by an external flag. If not provided it is automatically
enabled.
:::</p>

<p>Single Argument Keywords:</p>

<p>+———————–+———————–+———————–+
| Keyword               | Type                  | Description           |
+=======================+=======================+=======================+
| ENABLE                | &gt; ON/OFF              | Enable/Disable        |
|                       |                       | clang-tidy            |
+———————–+———————–+———————–+
| WARNINGS_AS_ERRORS  | &gt; ON/OFF              | Treat warnings as     |
|                       |                       | errors. If            |
|                       |                       | ERROR_CHECKS is not  |
|                       |                       | provided, it will use |
|                       |                       | CHECKS to treat as    |
|                       |                       | errors.               |
+———————–+———————–+———————–+
| HEADER_FILTER        | &gt; String              | Default to '.*' if |
|                       |                       | not provided. Regular |
|                       |                       | expression matching   |
|                       |                       | the names of the      |
|                       |                       | headers to output     |
|                       |                       | diagnostics from.     |
+———————–+———————–+———————–+
| LINE_FILTER          | &gt; String              | List of files with    |
|                       |                       | line ranges to filter |
|                       |                       | the warnings.         |
+———————–+———————–+———————–+
| CHECKS                | &gt; String              | Comma-separated list  |
|                       |                       | of globs with         |
|                       |                       | optional '-'        |
|                       |                       | prefix. Globs are     |
|                       |                       | processed in order of |
|                       |                       | appearance in the     |
|                       |                       | list. Globs without   |
|                       |                       | the '-' prefix add  |
|                       |                       | checks with matching  |
|                       |                       | names to the set,     |
|                       |                       | globs with the '-'  |
|                       |                       | prefix remove checks  |
|                       |                       | with matching names   |
|                       |                       | from the set of       |
|                       |                       | enabled checks. This  |
|                       |                       | option's value is    |
|                       |                       | appended to the value |
|                       |                       | of the 'Checks'     |
|                       |                       | option in the         |
|                       |                       | .clang-tidy file, if  |
|                       |                       | any.                  |
+———————–+———————–+———————–+
| CONFIG                | &gt; String              | YAML/JSON format. If  |
|                       |                       | not provided,         |
|                       |                       | clang-tidy will       |
|                       |                       | attempt to find a     |
|                       |                       | file named            |
|                       |                       | .clang-tidy for each  |
|                       |                       | source file in its    |
|                       |                       | parent directories.   |
+———————–+———————–+———————–+
| ERROR_CHECKS         | &gt; String              | Upgrades warnings to  |
|                       |                       | errors. Same format   |
|                       |                       | as 'CHECKS'. This   |
|                       |                       | option's value is    |
|                       |                       | appended to the value |
|                       |                       | of the                |
|                       |                       | 'WarningsAsErrors'  |
|                       |                       | option in the         |
|                       |                       | .clang-tidy file, if  |
|                       |                       | any.                  |
+———————–+———————–+———————–+</p>

<p>Multip Value Argument Keywords:</p>

<p>+———————–+———————–+———————–+
| Keyword               | Type                  | Description           |
+=======================+=======================+=======================+
| ARGUMENTS             | &gt; String              | This supports adding  |
|                       |                       | additional arguments  |
|                       |                       | to be passed to the   |
|                       |                       | clang-tidy. You could |
|                       |                       | just use this if      |
|                       |                       | desired over the      |
|                       |                       | single keywords       |
|                       |                       | except for the ENABLE |
|                       |                       | to pass all arguments |
|                       |                       | to clang-tidy if      |
|                       |                       | desired.              |
+———————–+———————–+———————–+</p>

<p>This configures clang-tidy with default arguments where any violation
will produce compiler warnings.</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CHECKS ${DEFAULT_CLANG_TIDY_CHECKS})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with default arguments where any violation
will produce compiler errors.


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CHECKS ${DEFAULT_CLANG_TIDY_CHECKS} WARNINGS_AS_ERRORS ON)

</code></pre></div></div>

<p>This configures clang-tidy with custom error checks which can be
different from the warning checks where any violation will produce
compiler errors.</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CHECKS ${DEFAULT_CLANG_TIDY_CHECKS} ERROR_CHECKS ${DEFAULT_CLANG_TIDY_CHECKS})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with a header filter. If not provided it will
default to \".\*\".


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} HEADER_FILTER ".*")

</code></pre></div></div>

<p>This configures clang-tidy with line filter as a JSON array of objects.</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} LINE_FILTER “[{“name”:”file1.cpp”,”lines”:[[1,3],[5,7]]},{“name”:”file2.h”}]”)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with config in YAML/JSON format.


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} CONFIG ""{Checks: '*', CheckOptions: [{key: x, value: y}]}")

</code></pre></div></div>

<p>This configures clang-tidy to use a .clang-tidy file if no arguments are
provided</p>

<p>``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This configures clang-tidy with arguments list.


``` {.sourceCode .cmake}
target_clang_tidy(${PACKAGE_NAME} ARGUMENTS ${ARGN})

</code></pre></div></div>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>In some situations, you may want to disable clang-tidy which is
explained <a href="https://clang.llvm.org/extra/clang-tidy/#id3">here</a>.
:::</p>

<h3 id="include-what-you-use-iwyu">Include What You Use (IWYU)</h3>

<p>This CMake macro will add IWYU to a given target</p>

<ul>
  <li><a href="https://github.com/include-what-you-use/include-what-you-use/blob/master/docs/WhyIWYU.md">Why Include What You
Use?</a></li>
  <li><a href="https://github.com/include-what-you-use/include-what-you-use/blob/master/README.md">IWYU
Documentation</a></li>
  <li><a href="https://github.com/include-what-you-use/include-what-you-use/blob/master/docs/IWYUPragmas.md">Exclude headers from
check</a></li>
  <li><a href="https://www.incredibuild.com/blog/include-what-you-use-how-to-best-utilize-this-tool-and-avoid-common-issues/">Avoid Common
Issues</a></li>
</ul>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by an external flag. If not provided it is automatically
enabled.
:::</p>

<p>``` {.sourceCode .cmake}
target_include_what_you_use(${PACKAGE_NAME} ARGUMENTS ${ARGN})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This CMake macro will add IWYU to a given target with default arguments.


``` {.sourceCode .cmake}
target_include_what_you_use(${PACKAGE_NAME} ARGUMENTS ${DEFAULT_IWYU_ARGS})

</code></pre></div></div>

<p>This CMake macro will add IWYU to all targets</p>

<p>``` {.sourceCode .cmake}
include_what_you_use(ARGUMENTS ${ARGN})</p>
<h1 id="or-1">or</h1>
<p>include_what_you_use(ARGUMENTS ${ARGN} ENABLE ${USER_ENABLE_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This CMake macro will add IWYU to all targets with default arguments.


``` {.sourceCode .cmake}
include_what_you_use(ARGUMENTS ${DEFAULT_IWYU_ARGS})
# or
include_what_you_use(ARGUMENTS ${DEFAULT_IWYU_ARGS} ENABLE ${USER_ENABLE_ARG})

</code></pre></div></div>

<p>Clears IWYU so it is not called on any following defined code
compilation. It can be re-enabled by another call to
[include_what_you_use()]{.title-ref}.</p>

<p>``` {.sourceCode .cmake}
reset_include_what_you_use()</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### CppCheck

This CMake macro will add CppCheck to a given target

-   [CppCheck Wiki](https://sourceforge.net/p/cppcheck/wiki/Home/)

::: {.note}
::: {.admonition-title}
Note
:::

Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by the external flag. If not provided it is automatically
enabled.
:::


``` {.sourceCode .cmake}
target_cppcheck(${PACKAGE_NAME} ARGUMENTS ${ARGN})

</code></pre></div></div>

<p>This CMake macro will add CppCheck to a given target with default
arguments.</p>

<p>``` {.sourceCode .cmake}
target_cppcheck(${PACKAGE_NAME} ARGUMENTS ${DEFAULT_CPPCHECK_ARGS})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
This CMake macro will add CppCheck to all targets


``` {.sourceCode .cmake}
cppcheck(ARGUMENTS ${ARGN})
# or
cppcheck(ARGUMENTS ${ARGN} ENABLE ${USER_ENABLE_ARG})

</code></pre></div></div>

<p>This CMake macro will add CppCheck to all targets with default
arguments.</p>

<p>``` {.sourceCode .cmake}
cppcheck(ARGUMENTS ${DEFAULT_CPPCHECK_ARGS})</p>
<h1 id="or-2">or</h1>
<p>cppcheck(ARGUMENTS ${DEFAULT_CPPCHECK_ARGS} ENABLE ${USER_ENABLE_ARG})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Clears CppCheck so it is not called on any following defined code
compilation. It can be re-enabled by another call to
[cppcheck()]{.title-ref}.


``` {.sourceCode .cmake}
reset_cppcheck()

</code></pre></div></div>

<h3 id="sanitizer-tools">Sanitizer Tools</h3>

<p>Sanitizers are tools that perform checks during a program’s runtime and
returns issues, and as such, along with unit testing, code coverage and
static analysis, is another tool to add to the programmers toolbox. And
of course, like the previous tools, are tragically simple to add into
any project using CMake, allowing any project and developer to quickly
and easily use.</p>

<p>A quick rundown of the tools available, and what they do:</p>

<ul>
  <li>
<a href="https://clang.llvm.org/docs/LeakSanitizer.html">LeakSanitizer</a>
detects memory leaks, or issues where memory is allocated and never
deallocated, causing programs to slowly consume more and more
memory, eventually leading to a crash.</li>
  <li>

    <dl>
      <dt>
<a href="https://clang.llvm.org/docs/AddressSanitizer.html">AddressSanitizer</a> is a fast memory error detector. It is useful for detecting most issues dealing with memory, such as:</dt>
      <dd>
        <ul>
          <li>Out of bounds accesses to heap, stack, global</li>
          <li>Use after free</li>
          <li>Use after return</li>
          <li>Use after scope</li>
          <li>Double-free, invalid free</li>
          <li>Memory leaks (using LeakSanitizer)</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>
<a href="https://clang.llvm.org/docs/ThreadSanitizer.html">ThreadSanitizer</a>
detects data races for multi-threaded code.</li>
  <li>

    <dl>
      <dt>
<a href="https://clang.llvm.org/docs/UndefinedBehaviorSanitizer.html">UndefinedBehaviourSanitizer</a> detects the use of various features of C/C++ that are explicitly listed as resulting in undefined behaviour. Most notably:</dt>
      <dd>
        <ul>
          <li>Using misaligned or null pointer.</li>
          <li>Signed integer overflow</li>
          <li>Conversion to, from, or between floating-point types which
would overflow the destination</li>
          <li>Division by zero</li>
          <li>Unreachable code</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>
<a href="https://clang.llvm.org/docs/MemorySanitizer.html">MemorySanitizer</a>
detects uninitialized reads.</li>
  <li>
<a href="https://clang.llvm.org/docs/ControlFlowIntegrity.html">Control Flow
Integrity</a> is
designed to detect certain forms of undefined behaviour that can
potentially allow attackers to subvert the program's control flow.</li>
</ul>

<p>These are used by declaring the <code class="language-plaintext highlighter-rouge">USE_SANITIZER</code>{.sourceCode} CMake
variable as string containing any of:</p>

<ul>
  <li>Address</li>
  <li>Memory</li>
  <li>MemoryWithOrigins</li>
  <li>Undefined</li>
  <li>Thread</li>
  <li>Leak</li>
  <li>CFI</li>
</ul>

<p>Multiple values are allowed, e.g.
<code class="language-plaintext highlighter-rouge">-DUSE_SANITIZER=Address,Leak</code>{.sourceCode} but some sanitizers cannot
be combined together, e.g. <code class="language-plaintext highlighter-rouge">-DUSE_SANITIZER=Address,Memory</code>{.sourceCode}
will result in configuration error. The delimeter character is not
required and <code class="language-plaintext highlighter-rouge">-DUSE_SANITIZER=AddressLeak</code>{.sourceCode} would work as
well.</p>

<h3 id="cpack">CPack</h3>

<h4 id="configure-package-without-components">Configure Package Without Components</h4>

<p>Configure package for cpack which does not leverage components</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>VERSION - The package version</li>
          <li>MAINTAINER_NAME - The package maintainer name</li>
          <li>MAINTAINER_EMAIL - The package maintainer email</li>
          <li>VENDOR - The package vender</li>
          <li>DESCRIPTION - The package description</li>
          <li>LICENSE_FILE - The package license file</li>
          <li>README_FILE - The package readme</li>
          <li>PACKAGE_PREFIX - The package prefix applied to all cpack
generated files</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>LINUX_BUILD_DEPENDS - The linux build dependencies
required via apt install (If not provided LINUX_DEPENDS is
used)</li>
          <li>WINDOWS_BUILD_DEPENDS - The windows build dependencies
required via nuget install (If not provided WINDOWS_DEPENDS
is used)</li>
          <li>LINUX_DEPENDS - The linux dependencies required via apt
install</li>
          <li>WINDOWS_DEPENDS - The windows dependencies required via
nuget install</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
cpack(
  VERSION ${pkg_extracted_version}
  MAINTAINER <a href="https://github.com/ros-industrial-consortium/tesseract">https://github.com/ros-industrial-consortium/tesseract</a>
  DESCRIPTION ${pkg_extracted_description}
  LICENSE_FILE ${CMAKE_CURRENT_LIST_DIR}/../LICENSE
  README_FILE ${CMAKE_CURRENT_LIST_DIR}/../README.md
  LINUX_DEPENDS
    “libboost-system-dev”
    “libboost-filesystem-dev”
    “libboost-serialization-dev”
    “libconsole-bridge-dev”
    “libtinyxml2-dev”
    “libeigen3-dev”
    “libyaml-cpp-dev”
  WINDOWS_DEPENDS
    “boost_system”
    “boost_filesystem;”
    “boost_serialization”
    “console-bridge”
    “tinyxml2”
    “Eigen3”
    “yaml-cpp”)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#### Configure Package With Components

This requires two macros one used in the components cmake file another
for the top most package cmake file.

##### Configure Component

Configure components for cpack

-   

    One Value Args:

    :   -   COMPONENT - The component name
        -   VERSION - The package version
        -   DESCRIPTION - The package description
        -   PACKAGE\_PREFIX - The package prefix applied to all cpack
            generated files

-   

    Multi Value Args:

    :   -   LINUX\_BUILD\_DEPENDS - The linux build dependencies
            required via apt install (If not provided LINUX\_DEPENDS is
            used)
        -   WINDOWS\_BUILD\_DEPENDS - The windows build dependencies
            required via nuget install (If not provided WINDOWS\_DEPENDS
            is used)
        -   LINUX\_DEPENDS - The linux dependencies required via apt
            install
        -   WINDOWS\_DEPENDS - The windows dependencies required via
            nuget install
        -   COMPONENT\_DEPENDS - The component dependencies required
            from this package


``` {.sourceCode .cmake}
cpack_component(
  COMPONENT IKFAST # must be uppercase
  VERSION ${pkg_extracted_version}
  DESCRIPTION "Tesseract Kinematics ikfast implementation"
  COMPONENT_DEPENDS core)

</code></pre></div></div>

<h5 id="configure-components-package">Configure Components Package</h5>

<p>Configure package leveraging components for cpack</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>VERSION - The package version</li>
          <li>MAINTAINER_NAME - The package maintainer name</li>
          <li>MAINTAINER_EMAIL - The package maintainer email</li>
          <li>VENDOR - The package vender</li>
          <li>DESCRIPTION - The package description</li>
          <li>LICENSE_FILE - The package license file</li>
          <li>README_FILE - The package readme</li>
          <li>PACKAGE_PREFIX - The package prefix applied to all cpack
generated files</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>COMPONENT_DEPENDS - The component dependencies required
from this package</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
cpack_component_package(
  VERSION ${pkg_extracted_version}
  MAINTAINER <a href="https://github.com/ros-industrial-consortium/tesseract">https://github.com/ros-industrial-consortium/tesseract</a>
  DESCRIPTION ${pkg_extracted_description}
  LICENSE_FILE ${CMAKE_CURRENT_LIST_DIR}/../LICENSE
  README_FILE ${CMAKE_CURRENT_LIST_DIR}/../README.md)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
##### Configure Debian Source Package

Create debian source package leveraging cpack for upload to ppa like
launchpad.net

-   

    One Value Args:

    :   -   CHANGLELOG (Required) - The file path to the package
            CHANGELOG.rst
        -   PACKAGE\_PREFIX (Optional) - The package prefix applied to
            all cpack generated files
        -   UPLOAD (Optional) - Indicate if it should be uploaded to ppa
        -   DEBIAN\_INCREMENT - The debian increment to be used, default
            is zero
        -   DPUT\_HOST (Optional/Required) - The ppa to upload to. Only
            required if UPLOAD is enabled
        -   DPUT\_CONFIG\_IN (Optional) - The dput config.in file. If
            not provide one is created.

-   

    Multi Value Args:

    :   -   DISTRIBUTIONS - The linux distrabution to deploy

-   

    Leveraged CPack Variable: When using the cpack macros above these are automatically set

    :   -   CPACK\_PACKAGE\_DESCRIPTION (Required)
        -   CPACK\_PACKAGE\_VERSION (Required)
        -   CPACK\_PACKAGE\_DESCRIPTION\_FILE (Optional)
        -   CPACK\_SOURCE\_IGNORE\_FILES (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_NAME (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_SECTION (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_PRIORITY (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_MAINTAINER (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_MAINTAINER\_NAME (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_MAINTAINER\_EMAIL (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_ARCHITECTURE (Required)
        -   CPACK\_DEBIAN\_PACKAGE\_DESCRIPTION (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_BUILD\_DEPENDS (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_DEPENDS (Optional)
        -   CPACK\_DEBIAN\_PACKAGE\_HOMEPAGE (Optional)
        -   [CPACK\_COMPONENT]()\&lt;COMPONENT\&gt;\_DEPENDS (Reqired if
            components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_ARCHITECTURE
            (Reqired if components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_DESCRIPTION (Reqired if
            components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_ARCHITECTURE
            (Reqired if components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_DEPENDS (Reqired if
            components exist and enabled)
        -   [CPACK\_DEBIAN]()\&lt;COMPONENT\&gt;\_PACKAGE\_BUILD\_DEPENDS
            (Reqired if components exist and enabled)


``` {.sourceCode .cmake}
cpack_debian_source_package(
  CHANGLELOG ${CMAKE_CURRENT_LIST_DIR}/CHANGELOG.rst
  UPLOAD ${RICB_PACKAGE_SOURCE_UPLOAD}
  DPUT_HOST ${RICB_PACKAGE_SOURCE_DPUT_HOST}
  DEBIAN_INCREMENT ${RICB_PACKAGE_SOURCE_DEBIAN_INCREMENT}
  DISTRIBUTIONS ${RICB_PACKAGE_SOURCE_DISTRIBUTIONS}
)

</code></pre></div></div>

<h3 id="configure-pure-cmake-package">Configure (Pure CMake Package)</h3>

<p>This CMake macro simplifies the CMake package configure and install by
performing multiple operations</p>

<h4 id="configure-package">Configure Package</h4>

<p>Performs multiple operation so other packages may find a package</p>

<p>If Namespace is provided but no targets it is assumed targets were
installed and must be exported</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>NAMESPACE - This will prepend &lt;namespace&gt;:: to the target
names as they are written to the import file</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>TARGETS - The targets from the project to be installed</li>
          <li>COMPONENTS - The packages supported find_package components
if any</li>
          <li>DEPENDENCIES - The dependencies to be written to the
packages Config.cmake file</li>
          <li>CFG_EXTRAS - The extra cmake files to be include in the
packages Config.cmake file</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Usage:</dt>
      <dd>
        <ul>
          <li>It installs the provided targets</li>
          <li>It exports the provided targets under the provided namespace</li>
          <li>It installs the package.xml file</li>
          <li>It creates and installs the ${PROJECT_NAME}-config.cmake
and ${PROJECT_NAME}-config-version.cmake</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
configure_package(
  NAMESPACE <package_namespace>
  TARGETS <target_name_a> <target_name_b>
  COMPONENTS <component_name_a> <component_name_b>
  DEPENDENCIES <deps>...
  CFG_EXTRAS <cmake files="">...
)</cmake></deps></component_name_b></component_name_a></target_name_b></target_name_a></package_namespace></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Example:


``` {.sourceCode .cmake}
configure_package(
  NAMESPACE
    tesseract
  TARGETS
    ${PROJECT_NAME}
  DEPENDENCIES
    Eigen3
    TinyXML2
    yaml-cpp
    "Boost COMPONENTS system filesystem serialization"
  CFG_EXTRAS
    cmake/tesseract_common-extras.cmake
)

</code></pre></div></div>

<p>To create the config cmake file, the macro by default looks for a
configuration template <code class="language-plaintext highlighter-rouge">cmake/${PROJECT_NAME}-config.cmake.in</code> provided
by the package. If not present, a default one will be generated. If
generated automatically, package dependencies will be included from the
arguments listed by <code class="language-plaintext highlighter-rouge">DEPENDENCIES</code>. Additional configuration CMake
scripts can also be included with relative paths listed in the
<code class="language-plaintext highlighter-rouge">CFG_EXTRAS</code> argument. The scripts should be installed alongside the
generated package config file, in <code class="language-plaintext highlighter-rouge">lib/cmake/${PROJECT_NAME}</code>.</p>

<h4 id="configure-component">Configure Component</h4>

<p>Performs multiple operation so other packages may find a package's
component</p>

<p>If Namespace is provided but no targets it is assumed targets were
installed and must be exported</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>NAMESPACE - This will prepend &lt;namespace&gt;:: to the target
names as they are written to the import file</li>
          <li>COMPONENT - The component name</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>TARGETS - The targets from the project to be installed</li>
          <li>DEPENDENCIES - The dependencies to be written to the
packages Config.cmake file</li>
          <li>CFG_EXTRAS - The extra cmake files to be include in the
packages Config.cmake file</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Usage:</dt>
      <dd>
        <ul>
          <li>It installs the provided targets</li>
          <li>It exports the provided targets under the provided namespace</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
configure_component(
  COMPONENT <component_name>
  NAMESPACE <package_namespace>
  TARGETS <target_name_a> <target_name_b>
  DEPENDENCIES <deps>...
  CFG_EXTRAS <cmake files="">...
)</cmake></deps></target_name_b></target_name_a></package_namespace></component_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Example:


``` {.sourceCode .cmake}
configure_component(
  COMPONENT
    kdl
  NAMESPACE
    tesseract
  TARGETS
    ${PROJECT_NAME}_kdl ${PROJECT_NAME}_kdl_factories
  DEPENDENCIES
    Eigen3
    TinyXML2
    yaml-cpp
    "Boost COMPONENTS system filesystem serialization"
  CFG_EXTRAS
    cmake/tesseract_common-extras.cmake
)

</code></pre></div></div>

<p>To create the config cmake file, the macro by default looks for a
configuration template <code class="language-plaintext highlighter-rouge">cmake/&lt;COMPONENT_NAME&gt;-config.cmake.in</code> provided
by the package. If not present, a default one will be generated. If
generated automatically, package dependencies will be included from the
arguments listed by <code class="language-plaintext highlighter-rouge">DEPENDENCIES</code>. Additional configuration CMake
scripts can also be included with relative paths listed in the
<code class="language-plaintext highlighter-rouge">CFG_EXTRAS</code> argument. The scripts should be installed alongside the
generated package config file, in <code class="language-plaintext highlighter-rouge">lib/cmake/${PROJECT_NAME}</code>.</p>

<h4 id="sub-macros-used-in-configure-the-package">Sub macros used in configure the package</h4>

<p>The following macros are used by configure_package and can be used
independently if needed</p>

<h5 id="install-targets">Install Targets</h5>

<p>This will install targets along associated with the provided component
and export them to ${ARG_COMPONENT}-targets</p>

<ul>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>COMPONENT (Optional) - The component name to associate the
targets with, if not provided ${PROJECT_NAME} is used</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>TARGETS - The targets from the project to be installed</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}
install_targets(TARGETS targetA targetb)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
##### Install package.xml

This will install the package.xml file


``` {.sourceCode .cmake}
install_pkgxml()

</code></pre></div></div>

<h5 id="generate-cmake-config-files">Generate CMake Config Files</h5>

<p>Performs multiple operation so other packages may find a package and
package components The default export name is ${PROJECT_NAME} but it
can be overriden by providing EXPORT_NAME</p>

<ul>
  <li>

    <dl>
      <dt>Options:</dt>
      <dd>
        <ul>
          <li>EXPORT - indicate if trargets should be exported</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>One Value Args:</dt>
      <dd>
        <ul>
          <li>COMPONENT (Optional) - the name given to the export
${ARG_COMPONENT}-targets, if not provided PROJECT_NAME is
used</li>
          <li>CONFIG_NAME (Optional) - the name given to the export
${ARG_COMPONENT}-config.cmake, if not provided COMPONENT
is used</li>
          <li>NAMESPACE (Optional) - the namespace assigned for exported
targets</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Multi Value Args:</dt>
      <dd>
        <ul>
          <li>DEPENDENCIES (Optional) - list of dependencies to be loaded
in the package config</li>
          <li>CFG_EXTRAS (Optional) - list of extra cmake config files to
be loaded in package config</li>
          <li>SUPPORTED_COMPONENTS (Optional) - list of supported
components</li>
        </ul>
      </dd>
    </dl>
  </li>
  <li>

    <dl>
      <dt>Usage:</dt>
      <dd>
        <ul>
          <li>generate_package_config(EXPORT NAMSPACE namespace) Install
export targets with provided namespace</li>
          <li>generate_package_config(EXPORT) Install export targets
with no namespace</li>
          <li>generate_package_config() Install cmake config files and
not install export targets</li>
          <li>It exports the provided targets under the provided namespace
${ARG_COMPONENT}-targets, if EXPORT option is set</li>
          <li>It creates and install the
${ARG_CONFIG_NAME}-config.cmake</li>
          <li>In not component, it create and installs
${ARG_CONFIG_NAME}-config-version.cmake</li>
        </ul>
      </dd>
    </dl>
  </li>
</ul>

<p>``` {.sourceCode .cmake}</p>
<h1 id="install-and-export-targets-with-provided-namespace">Install and export targets with provided namespace</h1>
<p>generate_package_config(EXPORT NAMSPACE namespace)</p>

<p>#Install and export targets with no namespace
generate_package_config(EXPORT)</p>

<h1 id="install-cmake-config-files-and-not-install-export-targets">Install CMake config files and not install export targets</h1>
<p>generate_package_config() Install CMake config files and not install export targets</p>

<h1 id="install-and-export-targets-for-package-with-components">Install and export targets for package with components</h1>
<p>generate_package_config(EXPORT CONFIG_NAME ${PROJECT_NAME} SUPPORTED_COMPONENTS componentA componentB)</p>

<h1 id="install-and-export-targets-for-component">Install and export targets for component</h1>
<p>generate_package_config(EXPORT
  COMPONENT kdl
  NAMESPACE namespace
  DEPENDENCIES packageA packageB
  CFG_EXTRAS extraA.cmake extraB.cmake)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Additionally, `DEPENDENCIES`, `CFG_EXTRAS` and `SUPPORTED_COMPONENTS`
are passed for generated CMake config files.

##### Install Ament Hooks

Allows Colcon to find non-Ament packages when using workspace underlays


``` {.sourceCode .cmake}
install_ament_hooks()

</code></pre></div></div>

<h3 id="set-target-cxx-version">Set Target CXX VERSION</h3>

<p>This CMake macro simplifies setting the CXX version for the target</p>

<p>``` {.sourceCode .cmake}
target_cxx_version(${PACKAGE_NAME} &lt;INTERFACE|PRIVATE|PUBLIC&gt; VERSION <cxx_version>)</cxx_version></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Example: Set the version to 14 and PUBLIC.


``` {.sourceCode .cmake}
target_cxx_version(${PACKAGE_NAME} PUBLIC VERSION 14)

</code></pre></div></div>

<h3 id="find-gtest-pure-cmake-package">Find GTest (Pure CMake Package)</h3>

<p>This CMake macro calls <code class="language-plaintext highlighter-rouge">find_package(GTest REQUIRED)</code> and checks for the
<code class="language-plaintext highlighter-rouge">GTest::GTest</code> and <code class="language-plaintext highlighter-rouge">GTest::Main</code> targets. If the targets are missing it
will create the targets using the CMake variables.</p>

<p>``` {.sourceCode .cmake}
find_gtest()</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### Add Run Tests Target (Pure CMake Package)

This CMake macro adds a custom target that will run the tests after they
are finished building. You may pass an optional argument true\|false
adding the ability to disable the running of tests as part of the build
for CI which calls make test.

Add run test target (These will automatically run the test after build
finishes)


``` {.sourceCode .cmake}
add_run_tests_target(&lt;TARGET_NAME&gt;)

</code></pre></div></div>

<p>``` {.sourceCode .cmake}
add_run_tests_target(<target_name> true)</target_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Add empty run test target


``` {.sourceCode .cmake}
add_run_tests_target(&lt;TARGET_NAME&gt; false)

</code></pre></div></div>

<h3 id="add-gtest-discover-tests-pure-cmake-package">Add GTest Discover Tests (Pure CMake Package)</h3>

<p>This CMake macro call the appropriate GTest function to add a test based
on the CMake version</p>

<p>``` {.sourceCode .cmake}
add_gtest_discover_tests(<target_name>)</target_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### Add Run Benchmark Target

This CMake macro adds a custom target that will run the benchmarks after
they are finished building.

Add run benchmark target (These will automatically run the benchmark
after build finishes)


``` {.sourceCode .cmake}
add_run_benchmark_target(&lt;TARGET_NAME&gt;)

</code></pre></div></div>

<p>``` {.sourceCode .cmake}
add_run_benchmark_target(<target_name> true)</target_name></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Add empty run benchmark target


``` {.sourceCode .cmake}
add_run_benchmark_target(&lt;TARGET_NAME&gt; false)

</code></pre></div></div>

<h3 id="code-coverage">Code Coverage</h3>

<p>These CMake macros add code coverage.</p>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Must call <strong>initialize_code_coverage()</strong> after project() in the
CMakeLists.txt. This is required for all examples below.
:::</p>

<p>From this point, there are two primary methods for adding
instrumentation to targets: 1. A blanket instrumentation by calling
[add_code_coverage()]{.title-ref}, where all targets in that directory
and all subdirectories are automatically instrumented. 2. Per-target
instrumentation by calling
[target_code_coverage(&lt;TARGET_NAME&gt;)]{.title-ref}, where the target
is given and thus only that target is instrumented. This applies to both
libraries and executables.</p>

<p>To add coverage targets, such as calling [make ccov]{.title-ref} to
generate the actual coverage information for perusal or consumption,
call [target_code_coverage(&lt;TARGET_NAME&gt;)]{.title-ref} on an
<em>executable</em> target.</p>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>Each of the macros can take an ENABLE ON/OFF so they can easily be
enabled by an external flag. If not provided it is automatically
enabled.
:::</p>

<h4 id="exclude-code-from-code-coverage">Exclude Code From Code Coverage</h4>

<p>Keyword             Description
  ——————- —————————————————————————————
  LCOV_EXCL_LINE    Lines containing this marker will be excluded.
  LCOV_EXCL_START   Marks the beginning of an excluded section. The current line is part of this section.
  LCOV_EXCL_STOP    Marks the end of an excluded section. The current line not part of this section.</p>

<p>::: {.note}
::: {.admonition-title}
Note
:::</p>

<p>You can replace LCOV above with GCOV or GCOVR.
:::</p>

<h4 id="example-1-all-targets-instrumented">Example 1: All targets instrumented</h4>

<p>In this case, the coverage information reported will be that of the
[theLib]{.title-ref} library target and [theExe]{.title-ref} executable.</p>

<h5 id="1a-via-global-command">1a: Via global command</h5>

<p>``` {.sourceCode .cmake}
add_code_coverage() # Adds instrumentation to all targets
add_library(theLib lib.cpp)
add_executable(theExe main.cpp)
target_link_libraries(theExe PRIVATE theLib)
target_code_coverage(theExe) # As an executable target, adds the ‘ccov-theExe’ target (instrumentation already added via global anyways) for generating code coverage reports.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
##### 1b: Via target commands


``` {.sourceCode .cmake}
add_library(theLib lib.cpp)
target_code_coverage(theLib) # As a library target, adds coverage instrumentation but no targets.
add_executable(theExe main.cpp)
target_link_libraries(theExe PRIVATE theLib)
target_code_coverage(theExe) # As an executable target, adds the 'ccov-theExe' target and instrumentation for generating code coverage reports.

</code></pre></div></div>

<h4 id="example-2-target-instrumented-but-with-regex-pattern-of-files-to-be-excluded-from-the-report">Example 2: Target instrumented, but with regex pattern of files to be excluded from the report</h4>

<p>``` {.sourceCode .cmake}
add_executable(theExe main.cpp non_covered.cpp)
target_code_coverage(theExe EXCLUDE non_covered.cpp test/*) # As an executable target, the reports will exclude the non-covered.cpp file, and any files in a test/ folder.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#### Example 3: Target added to the \'ccov\' and \'ccov-all\' targets


``` {.sourceCode .cmake}
add_code_coverage_all_targets(EXCLUDE test/*) # Adds the 'ccov-all' target set and sets it to exclude all files in test/ folders.
add_executable(theExe main.cpp non_covered.cpp)
target_code_coverage(theExe AUTO ALL EXCLUDE non_covered.cpp test/*) # As an executable target, adds to the 'ccov' and ccov-all' targets, and the reports will exclude the non-covered.cpp file, and any files in a test/ folder.

</code></pre></div></div>

<h4 id="example-4-ros-add_rostest_gtest-usage">Example 4: ROS add_rostest_gtest usage</h4>

<p>``` {.sourceCode .cmake}
add_rostest_gtest(test_node test/test_node.test test/test_node.cpp)
target_include_directories(test_node SYSTEM PUBLIC {catkin_INCLUDE_DIRS})
target_link_libraries(test_node ${catkin_LIBRARIES})
target_code_coverage(
  test_node
  ALL
  RUN_COMMAND rostest test_node test_node.test
  EXCLUDE ${COVERAGE_EXCLUDE}
  ENABLE ${ENABLE_CODE_COVERAGE})</p>

<p>```</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.
</code></pre></div></div>
</div>
              <hr id="melodic-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="melodic-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#melodic-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#melodic-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#melodic-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="melodic-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="melodic-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="melodic-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/ros-industrial/ros_industrial_cmake_boilerplate.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
