<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/ublox/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">ublox</li>
        <!--<li class="active">ublox</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-primary" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-primary" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-primary" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-primary" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-default" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-primary" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class=" older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class=" older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class=" older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ublox">ublox</a> <small>repository</small></h3>
        <span class="label label-default">gps</span> <span class="label label-default">ublox</span> <span class="label label-default">ros</span> <span class="label label-default">ros-driver</span> <span class="label label-default">ublox-gps</span> 
        
        <a class="label label-primary pkg-label" href="/p/ublox">ublox</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_gps">ublox_gps</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_msgs">ublox_msgs</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_serialization">ublox_serialization</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-KumarRobotics-ublox
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-KumarRobotics-ublox" role="menuitem" tabindex="-1" href="/r/ublox/github-KumarRobotics-ublox" data="github-KumarRobotics-ublox">
                    <span class="glyphicon glyphicon-star"></span>
                    github-KumarRobotics-ublox
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">A driver for ublox gps</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/KumarRobotics/ublox.git">https://github.com/KumarRobotics/ublox.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">ros2</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-12-04
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">gps</span> <span class="label label-default">ublox</span> <span class="label label-default">ros</span> <span class="label label-default">ros-driver</span> <span class="label label-default">ublox-gps</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ublox/#humble-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ublox/#humble-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ublox/#humble-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ublox">ublox</a></td>
                    <td>2.3.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_gps">ublox_gps</a></td>
                    <td>2.3.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_msgs">ublox_msgs</a></td>
                    <td>2.3.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_serialization">ublox_serialization</a></td>
                    <td>2.3.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="ublox">ublox</h1>
<p>The <code class="language-plaintext highlighter-rouge">ublox</code> package provides support for <a href="http://www.u-blox.com">u-blox</a> GPS receivers. Only the <em>serial</em> configuration of the driver is documented here, but TCP/UDP communication is also supported by the driver (untested).</p>

<p>The driver was originally written by Johannes Meyer. Changes made later are detailed in the version history below.</p>

<h2 id="options">Options</h2>

<p>Example .yaml configuration files are included in <code class="language-plaintext highlighter-rouge">ublox_gps/config</code>. Consult the u-blox documentation for your device for the recommended settings.</p>

<p>The <code class="language-plaintext highlighter-rouge">ublox_gps</code> node supports the following parameters for all products and firmware versions:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">device</code>: Path to the device port. Defaults to <code class="language-plaintext highlighter-rouge">/dev/ttyACM0</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">raw_data</code>: Whether the device is a raw data product. Defaults to false. Firmware &lt;= 7.03 only.</li>
  <li>
<code class="language-plaintext highlighter-rouge">load</code>: Parameters for loading the configuration to non-volatile memory. See <code class="language-plaintext highlighter-rouge">ublox_msgs/CfgCFG.msg</code>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">load/mask</code>: uint32_t. Mask of the configurations to load.</li>
      <li>
<code class="language-plaintext highlighter-rouge">load/device</code>: uint32_t. Mask which selects the devices for the load command.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">save</code>: Parameters for saving the configuration to non-volatile memory. See <code class="language-plaintext highlighter-rouge">ublox_msgs/CfgCFG.msg</code>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">save/mask</code>: uint32_t. Mask of the configurations to save.</li>
      <li>
<code class="language-plaintext highlighter-rouge">save/device</code>: uint32_t. Mask which selects the devices for the save command.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">uart1/baudrate</code>: Bit rate of the serial communication. Defaults to 9600.</li>
  <li>
<code class="language-plaintext highlighter-rouge">uart1/in</code>: UART1 in communication protocol. Defaults to UBX, NMEA &amp; RTCM. See <code class="language-plaintext highlighter-rouge">CfgPRT</code> message for possible values.</li>
  <li>
<code class="language-plaintext highlighter-rouge">uart1/out</code>: UART1 out communication protocol. Defaults to UBX, NMEA &amp; RTCM. See <code class="language-plaintext highlighter-rouge">CfgPRT</code> message for possible values.</li>
  <li>
<code class="language-plaintext highlighter-rouge">frame_id</code>: ROS name prepended to frames produced by the node. Defaults to <code class="language-plaintext highlighter-rouge">gps</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">rate</code>: Rate in Hz of measurements. Defaults to 4.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nav_rate</code>: How often navigation solutions are published in number of measurement cycles. Defaults to 1.</li>
  <li>
<code class="language-plaintext highlighter-rouge">enable_ppp</code>: Enable precise-point-positioning system. Defaults to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">gnss/sbas</code>: Enable satellite-based augmentation system. Defaults to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sbas/max</code>: Maximum number of SBAS channels. Defaults to 0.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sbas/usage</code>: See <code class="language-plaintext highlighter-rouge">CfgSBAS</code> message for details. Defaults to 0.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dynamic_model</code>: Possible values below. Defaults to <code class="language-plaintext highlighter-rouge">portable</code>. See u-blox documentation for further description.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">portable</code></li>
      <li><code class="language-plaintext highlighter-rouge">stationary</code></li>
      <li><code class="language-plaintext highlighter-rouge">pedestrian</code></li>
      <li><code class="language-plaintext highlighter-rouge">automotive</code></li>
      <li><code class="language-plaintext highlighter-rouge">sea</code></li>
      <li>
<code class="language-plaintext highlighter-rouge">airborne1</code>: Airborne, max acceleration = 1G</li>
      <li>
<code class="language-plaintext highlighter-rouge">airborne2</code>: Airborne, max acceleration = 2G</li>
      <li>
<code class="language-plaintext highlighter-rouge">airborne4</code>: Airborne, max acceleration = 4G</li>
      <li><code class="language-plaintext highlighter-rouge">wristwatch</code></li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">fix_mode</code>: Type of fixes supported: <code class="language-plaintext highlighter-rouge">2d</code>, <code class="language-plaintext highlighter-rouge">3d</code> or <code class="language-plaintext highlighter-rouge">both</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dr_limit</code>: Max time in seconds to use dead reckoning after signal is lost. Defaults to 0.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dat</code>: Configuring the datum type (optional). See the CfgDAT message.
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">dat/set</code>: If true, the node will the datum based on the parameters below (required if true). Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/majA</code>: Semi-major Axis [m]</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/flat</code>: 1.0 / Flattening</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/shift</code>: [X-axis, Y-axis, Z-axis] shift [m]</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/rot</code>: [X, Y, Z] rotation [s]</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/scale</code>: scale change [ppm]</li>
    </ul>
  </li>
</ul>

<h3 id="for-firmware-version-6">For firmware version 6:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/set</code>: If true, the NMEA will be configured with the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/version</code>: NMEA version. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/num_sv</code>: Maximum Number of SVs to report per TalkerId. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/compat</code>: Enable compatibility mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/consider</code>: Enable considering mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/filter</code>: Namespace for filter flags.
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/pos</code>: Disable position filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/msk_pos</code>: Disable masked position filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/time</code>: Disable time filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/date</code>: Disable date filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/sbas</code>: Enable SBAS filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/track</code>: Disable track filtering. Defaults to false.</li>
    </ul>
  </li>
</ul>

<h3 id="for-devices-with-firmware--7">For devices with firmware &gt;= 7:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">gnss</code> parameters:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/gps</code>: Enable GPS receiver. Defaults to true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/glonass</code>: Enable GLONASS receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/beidou</code>: Enable BeiDou receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/qzss</code>: Enable QZSS receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/qzss_sig_cfg</code>: QZSS signal configuration. Defaults to L1CA. See <code class="language-plaintext highlighter-rouge">CfgGNSS</code> message for constants.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea</code> parameters:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/set</code>: If true, the NMEA will be configured.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/version</code>: NMEA version. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/num_sv</code>: Maximum Number of SVs to report per TalkerId. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/sv_numbering</code>: Configures the display of satellites that do not have an NMEA-defined value. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/compat</code>: Enable compatibility mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/consider</code>: Enable considering mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/limit82</code>: Enable strict limit to 82 characters maximum. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/high_prec</code>: Enable high precision mode. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter</code>: Namespace for filter flags.
        <ul>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/pos</code>: Enable position output for failed or invalid fixes. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/msk_pos</code>: Enable position output for invalid fixes. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/time</code>: Enable time output for invalid times. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/date</code>: Enable date output for invalid dates. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/gps_only</code>: Restrict output to GPS satellites only. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/track</code>: Enable COG output even if COG is frozen. Defaults to false.</li>
        </ul>
      </li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt</code>: Filters out satellites based on their GNSS.
        <ul>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/gps</code>: Disable reporting of GPS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/sbas</code>: Disable reporting of SBAS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/qzss</code>: Disable reporting of QZSS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/glonass</code>: Disable reporting of GLONASS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/beidou</code>: Disable reporting of BeiDou satellites. Defaults to false.</li>
        </ul>
      </li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/main_talker_id</code>: This field enables the main Talker ID to be overridden. Defaults to 0.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/gsv_talker_id</code>:  This field enables the GSV Talker ID to be overridden. Defaults to [0, 0].</li>
    </ul>
  </li>
</ul>

<h3 id="for-devices-with-firmware--8">For devices with firmware &gt;= 8:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">save_on_shutdown</code>: If true, the node will send a <code class="language-plaintext highlighter-rouge">UBX-UPD-SOS</code> command to save the BBR to flash memory on shutdown. Defaults to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">clear_bbr</code>: If true, the node will send a <code class="language-plaintext highlighter-rouge">UBX-UPD-SOS</code> command to clear the flash memory during configuration. Defaults to false.</li>
  <li>Additional <code class="language-plaintext highlighter-rouge">gnss</code> params
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/galileo</code>: Enable Galileo receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/imes</code>: Enable IMES receiver. Defaults to false.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/bds_talker_id</code>: (See other NMEA configuration parameters above) Sets the two characters that should be used for the BeiDou Talker ID.</li>
</ul>

<h3 id="for-udradr-devices">For UDR/ADR devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">use_adr</code>: Enable ADR/UDR. Defaults to true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nav_rate</code> should be set to 1 Hz.</li>
</ul>

<h3 id="for-hpg-reference-devices">For HPG Reference devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">tmode3</code>: Time Mode. Required. See CfgTMODE3 for constants.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/lla_flag</code>: True if the Fixed position is in Lat, Lon, Alt coordinates. False if ECEF. Required if <code class="language-plaintext highlighter-rouge">tmode3</code> is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/position</code>: Antenna Reference Point position in [m] or [deg]. Required if <code class="language-plaintext highlighter-rouge">tmode3</code> is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/position_hp</code>: Antenna Reference Point High Precision position in [0.1 mm] or [deg * 1e-9]. Required if tmode3 is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/acc</code>: Fixed position accuracy in [m]. Required if <code class="language-plaintext highlighter-rouge">tmode3</code> is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sv_in/reset</code>: Whether or not to reset the survey in upon initialization. If false, it will only reset if the TMODE is disabled. Defaults to true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sv_in/min_dur</code>: The minimum Survey-In Duration time in seconds. Required tmode3 is set to survey in.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sv_in/acc_lim</code>: The minimum accuracy level of the survey in position in meters. Required <code class="language-plaintext highlighter-rouge">tmode3</code> is set to survey in.</li>
</ul>

<h3 id="for-hpg-rover-devices">For HPG Rover devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">dgnss_mode</code>: The Differential GNSS mode. Defaults to RTK FIXED. See <code class="language-plaintext highlighter-rouge">CfgDGNSS</code> message for constants.</li>
</ul>

<h3 id="for-tim-devices">For TIM devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">tim_tm2</code>: Enable this message for GPS time-stamps everytime an external interrupt signal is received.</li>
</ul>

<h3 id="for-fts-devices">For FTS devices:</h3>
<ul>
  <li>currently unimplemented. See <code class="language-plaintext highlighter-rouge">FtsProduct</code> class in <code class="language-plaintext highlighter-rouge">ublox_gps</code> package <code class="language-plaintext highlighter-rouge">node.h</code> &amp; <code class="language-plaintext highlighter-rouge">node.cpp</code> files.</li>
</ul>

<h2 id="fix-topics">Fix Topics</h2>

<p><code class="language-plaintext highlighter-rouge">~fix</code>(<a href="http://docs.ros.org/api/sensor_msgs/html/msg/NavSatFix.html">sensor_msgs/NavSatFix</a>)</p>

<p>Navigation Satellite fix.</p>

<p><code class="language-plaintext highlighter-rouge">~fix_velocity</code>(<a href="http://docs.ros.org/jade/api/geometry_msgs/html/msg/TwistWithCovarianceStamped.html">geometry_msgs/TwistWithCovarianceStamped</a>)</p>

<p>Velocity in local ENU frame.</p>

<h2 id="inf-messages">INF messages</h2>
<p>To enable printing INF messages to the ROS console, set the parameters below.</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">inf/all</code>: This is the default value for the INF parameters below, which enable printing u-blox <code class="language-plaintext highlighter-rouge">INF</code> messages to the ROS console. It defaults to true. Individual message types can be turned off by setting their corresponding parameter to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/debug</code>: Whether to configure the UBX and NMEA ports to send Debug messages and print received <code class="language-plaintext highlighter-rouge">INF-Debug</code> messages to <code class="language-plaintext highlighter-rouge">ROS_DEBUG</code> console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/error</code>: Whether to enable Error messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Error</code> messages to <code class="language-plaintext highlighter-rouge">ROS_ERROR</code> console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/notice</code>: Whether to enable Notice messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Notice messages to </code>ROS_INFO` console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/test</code>: Whether to enable Test messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Test</code> messages to <code class="language-plaintext highlighter-rouge">ROS_INFO</code> console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/warning</code>: Whether to enable Warning messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Warning</code> messages to the <code class="language-plaintext highlighter-rouge">ROS_WARN</code> console.</li>
</ul>

<h2 id="additional-topics">Additional Topics</h2>
<p>To publish a given u-blox message to a ROS topic, set the parameter shown below to true. The node sets the rate of the u-blox messages to 1 measurement cycle.</p>

<h3 id="all-messages">All messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/all</code>: This is the default value for <code class="language-plaintext highlighter-rouge">publish/&lt;class&gt;/all</code> parameters below. It defaults to false. Individual message classes and messages can be enabled or disabled by setting the parameters described below to false.</li>
</ul>

<h3 id="aid-messages">AID messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/aid/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/alm</code>: Topic <code class="language-plaintext highlighter-rouge">~aidalm</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/eph</code>: Topic <code class="language-plaintext highlighter-rouge">~aideph</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/hui</code>: Topic <code class="language-plaintext highlighter-rouge">~aidhui</code>
</li>
</ul>

<h3 id="rxm-messages">RXM messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/rxm/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/alm</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmalm</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/eph</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmeph</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/raw</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmraw</code>. Type is either <code class="language-plaintext highlighter-rouge">RxmRAW</code> or <code class="language-plaintext highlighter-rouge">RxmRAWX</code> depending on firmware version.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/rtcm</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmrtcm</code>. <strong>Firmware &gt;= 8 only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/sfrb</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmsfrb</code>. Type is either <code class="language-plaintext highlighter-rouge">RxmSFRB</code> or <code class="language-plaintext highlighter-rouge">RxmSFRBX</code> depending on firmware version.</li>
</ul>

<h3 id="mon-messages">MON messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/mon/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/mon/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/mon/hw</code>: Topic <code class="language-plaintext highlighter-rouge">~monhw</code>
</li>
</ul>

<h3 id="nav-messages">NAV messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/mon/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/att</code>: Topic <code class="language-plaintext highlighter-rouge">~navatt</code>. <strong>ADR/UDR devices only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/clock</code>: Topic <code class="language-plaintext highlighter-rouge">~navclock</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/posecef</code>: Topic <code class="language-plaintext highlighter-rouge">~navposecef</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/posllh</code>: Topic <code class="language-plaintext highlighter-rouge">~navposllh</code>. <strong>Firmware &lt;= 6 only.</strong> For firmware 7 and above, see NavPVT</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/pvt</code>: Topic <code class="language-plaintext highlighter-rouge">~navpvt</code>. <strong>Firmware &gt;= 7 only.</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/relposned</code>: Topic <code class="language-plaintext highlighter-rouge">~navrelposned</code>. <strong>HPG Rover devices only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/heading</code>: Topic <code class="language-plaintext highlighter-rouge">~navheading</code>. <strong>HP Position receiver devices only.</strong> For firmware 9 and above</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/sat</code>: Topic <code class="language-plaintext highlighter-rouge">~navsat</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/sol</code>: Topic <code class="language-plaintext highlighter-rouge">~navsol</code>. <strong>Firmware &lt;= 6 only.</strong> For firmware 7 and above, see NavPVT</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/status</code>: Topic <code class="language-plaintext highlighter-rouge">~navstatus</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/svin</code>: Topic <code class="language-plaintext highlighter-rouge">~navsvin</code>. <strong>HPG Reference Station Devices only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/svinfo</code>: Topic <code class="language-plaintext highlighter-rouge">~navsvinfo</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/velned</code>: Topic <code class="language-plaintext highlighter-rouge">~navvelned</code>. <strong>Firmware &lt;= 6 only.</strong> For firmware 7 and above, see NavPVT</li>
</ul>

<h3 id="esf-messages">ESF messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/esf/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code> for <strong>ADR/UDR devices</strong>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/ins</code>: Topic <code class="language-plaintext highlighter-rouge">~esfins</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/meas</code>: Topic <code class="language-plaintext highlighter-rouge">~esfmeas</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/raw</code>: Topic <code class="language-plaintext highlighter-rouge">~esfraw</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/status</code>: Topic <code class="language-plaintext highlighter-rouge">~esfstatus</code>
</li>
</ul>

<h3 id="hnr-messages">HNR messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/hnr/pvt</code>: Topic <code class="language-plaintext highlighter-rouge">~hnrpvt</code>. <strong>ADR/UDR devices only</strong>
</li>
</ul>

<h3 id="tim-messages">TIM messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/tim/tm2</code>: Topic <code class="language-plaintext highlighter-rouge">timtm2</code>. <strong>TIM devices only</strong>
</li>
</ul>

<h2 id="launch">Launch</h2>

<p>A sample launch file <code class="language-plaintext highlighter-rouge">ublox_device.launch</code> loads the parameters from a <code class="language-plaintext highlighter-rouge">.yaml</code> file in the <code class="language-plaintext highlighter-rouge">ublox_gps/config</code> folder, sample configuration files are included. The required arguments are <code class="language-plaintext highlighter-rouge">node_name</code> and <code class="language-plaintext highlighter-rouge">param_file_name</code>.
The two topics to which you should subscribe are <code class="language-plaintext highlighter-rouge">~fix</code> and <code class="language-plaintext highlighter-rouge">~fix_velocity</code>. The angular component of <code class="language-plaintext highlighter-rouge">fix_velocity</code> is unused.</p>

<h1 id="version-history">Version history</h1>

<ul>
  <li>
<strong>1.1.4</strong>:
    <ul>
      <li>Added messages for firmware 9: <code class="language-plaintext highlighter-rouge">NavRELPOSNED9</code>.</li>
      <li>Added option to publish <code class="language-plaintext highlighter-rouge">sensor_msgs/Imu</code> message for High Precision Position Receiver devices with firmware version &gt;= 9 for moving base applications (For example ZED-F9P; <a href="https://www.u-blox.com/sites/default/files/ZED-F9P-MovingBase_AppNote_%28UBX-19009093%29.pdf">UBX-19009093 AppNote</a>).</li>
    </ul>
  </li>
  <li>
<strong>1.1.3</strong>:
    <ul>
      <li>Update by TUC-ProAut</li>
      <li>Added raw data stream output. To publish ros messages set rosparam <code class="language-plaintext highlighter-rouge">raw_data_stream/publish</code> to true. To store to a logfile set rosparam <code class="language-plaintext highlighter-rouge">set raw_data_stream/dir</code> to the appropriated directory. This feature has nothing todo with Raw Data Products.</li>
      <li>Added flag <code class="language-plaintext highlighter-rouge">config_on_startup</code> to deactivate configuration of ublox.</li>
    </ul>
  </li>
  <li>
<strong>1.1.2</strong>:
    <ul>
      <li>BUG FIX for NavSatFix messages for firmware &gt;=7. The NavSatFix now only uses the NavPVT message time if it is valid, otherwise it uses ROS time.</li>
      <li>BUG FIX for TMODE3 Fixed mode configuration. The ARP High Precision position is now configured correctly.</li>
      <li>BUG FIX for <code class="language-plaintext highlighter-rouge">NavDGPS</code> message which had the wrong Message ID.</li>
      <li>After GNSS configuration &amp; reset, I/O resets automatically, without need for restart.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">UBX-UPD</code> messages. For firmware version 8, the node can now save the flash memory on shutdown and clear the flash memory during configuration based on ROS params.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">CfgGPS</code> message and <code class="language-plaintext highlighter-rouge">MonHW6</code> message for firmware version 6.</li>
      <li>Added respawn parameters to example launch file.</li>
      <li>Added parameters to load/save configuration.</li>
      <li>Added raw_data parameter for Raw Data Products.</li>
      <li>Changed name of “subscribe” parameter namespace to “publish” for clarity.</li>
      <li>Migrated all callback handling to <code class="language-plaintext highlighter-rouge">callback.h</code> from <code class="language-plaintext highlighter-rouge">gps.h</code> and <code class="language-plaintext highlighter-rouge">gps.cpp</code>. ACK messages are now processed through callback handlers.</li>
      <li>Modified how the I/O stream is initialized so that the node now handles parsing the port string.</li>
      <li>Changed class names of Ublox product components (e.g. UbloxTim -&gt; TimProduct) for clarity.</li>
      <li>Cleaned up ublox custom serialization classes by adding typedefs and using count to determine repeating block statements instead of using try-catch statements to serialize stream.</li>
      <li>Added doxygen documentation</li>
    </ul>
  </li>
  <li>
<strong>1.1.1</strong>:
    <ul>
      <li>BUG FIX for acknowledgments. The last received ack message was accessed by multiple threads but was not atomic. This variable is now thread safe.</li>
      <li>BUG FIX for GNSS configuration for Firmware 8, the GNSS configuration is now verified &amp; modified properly.</li>
      <li>BUG FIX for fix diagnostics. NumSV was displaying incorrectly. For firmware versions &gt;=7, the NavPVT flags variable is now compared to the constants from the NavPVT message not NavSOL.</li>
      <li>Removed ublox_version param, value is now determined by parsing MonVER.</li>
      <li>Organized parameters into namespaces.</li>
      <li>Better parameter checking. Checks that unsigned ints and vectors of unsigned ints are in bounds.</li>
      <li>Changed rtcm/rate parameter to a vector instead of a scalar, now each RTCM id can be set to a different rate.</li>
      <li>Diagnostic variables are displayed more clearly with units included.</li>
      <li>For HPG Rovers, added diagnostic updater for Carrier Phase Solution.</li>
      <li>Added CfgNMEA messages for each firmware version and a CfgDAT message, as well as parameters to configure the NMEA and Datum.</li>
      <li>Added constants for NavSAT_SV flags bit mask.</li>
    </ul>
  </li>
  <li>
<strong>1.1.0</strong>:
    <ul>
      <li>BUG FIX for NAV-PVT messages for firmware 7. The NAV-PVT message is shorter for firmware version 7, the new message is <code class="language-plaintext highlighter-rouge">NavPVT7</code>
</li>
      <li>BUG FIX for SBAS configuration, it now configures SBAS only if the device is SBAS capable. Previously, if enable_sbas was set to false, it would not configure, meaning that SBAS could not be turned off.</li>
      <li>BUG FIX, the baudrate of the serial I/O port was not configured correctly, on the device it was set to the user desired settings, but on the computer it was always set to 4800.</li>
      <li>BUG FIX, Diagnostics for Nav Status are now updated in firmware version 6.</li>
      <li>BUG FIX, The method which waited for ACKs now checks if the ACK is from the correct class and message ID.</li>
      <li>Added messages for <code class="language-plaintext highlighter-rouge">CfgTMODE3</code>, <code class="language-plaintext highlighter-rouge">CfgHNR</code>, <code class="language-plaintext highlighter-rouge">CfgRST</code>, <code class="language-plaintext highlighter-rouge">CfgINF</code>, <code class="language-plaintext highlighter-rouge">NavATT</code>, <code class="language-plaintext highlighter-rouge">ESF</code> messages, <code class="language-plaintext highlighter-rouge">Inf</code> message (for all INF types), <code class="language-plaintext highlighter-rouge">HnrPVT</code>, <code class="language-plaintext highlighter-rouge">MgaGAL</code>, <code class="language-plaintext highlighter-rouge">NavSAT</code>, <code class="language-plaintext highlighter-rouge">MonHw</code>, <code class="language-plaintext highlighter-rouge">NavPVT7</code> (for firmware version 7).</li>
      <li>Restructured Node class so that it now uses composition. The main node contains instances of classes which implement <code class="language-plaintext highlighter-rouge">UBloxInterface</code>, and calls the methods for each interface added to the node. The classes which implement the interface add new features that are not generic to all firmware versions or products. Each firmware version (6-8) has an interface, and each product category has one (SPG, HPG REF, HPG ROV, TIM, FTS, ADR/UDR). The product type is determined from parsing the <code class="language-plaintext highlighter-rouge">MonVER</code> message.</li>
      <li>Added implementations of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> called <code class="language-plaintext highlighter-rouge">UbloxHpgRef</code> and <code class="language-plaintext highlighter-rouge">UbloxHpgRov</code> for HPG reference station and rover devices. The reference station tmode3 can be configured upon startup (see Options section) and the rover dgnss mode can be set. After survey in, once the reference station entire time mode, the nav_rate is set to the user desired value (it must be 1 Hz during survey-in) and the RTCM output messages are enabled. The state can be monitored through the rqt_runtime_monitor. These classes were tested on C94-M8P devices.</li>
      <li>Added an implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> called <code class="language-plaintext highlighter-rouge">UbloxAdrUdr</code> for ADR/UDR devices. It which subscribes to <code class="language-plaintext highlighter-rouge">NavATT</code> and ESF messages and configures useAdr. The diagnostics monitor specific to these devices is not implemented. This class has not been tested on a hardware device.</li>
      <li>Added a partial implementation of <code class="language-plaintext highlighter-rouge">UbloxTim</code> for TIM devices which subscribes to <code class="language-plaintext highlighter-rouge">RxmRAWX</code> and <code class="language-plaintext highlighter-rouge">RxmSFRBX</code> messages. The <code class="language-plaintext highlighter-rouge">getRosParams()</code>, <code class="language-plaintext highlighter-rouge">configureUblox()</code>, and <code class="language-plaintext highlighter-rouge">initializeDiagnostics()</code> methods are unimplemented.</li>
      <li>Added a skeleton class for <code class="language-plaintext highlighter-rouge">UbloxFts</code> for FTS devices which is unimplemented. See the <code class="language-plaintext highlighter-rouge">ublox_gps</code> <code class="language-plaintext highlighter-rouge">node.cpp</code> and <code class="language-plaintext highlighter-rouge">node.h</code> files.</li>
      <li>Changed how GNSS is configured in firmware version 8. The documentation recommends a cold restart after reconfiguring the GNSS, and will reset the device if it receives a <code class="language-plaintext highlighter-rouge">CfgGNSS</code> message, even if the settings do not change. For firmware version 8, before reconfiguring, the node first checks if the current GNSS settings are the same as the desired settings. If so, it will not send a CfgGNSS message to the device. After reconfiguring, it will cold reset the GNSS.</li>
      <li>Migrated I/O initialization to the <code class="language-plaintext highlighter-rouge">Gps</code> class from the <code class="language-plaintext highlighter-rouge">Node</code> class.</li>
      <li>INF messages are now printed to the ROS console.</li>
      <li>Changed how debug statements are displayed. If the debug parameter is set to 1 or greater, it prints debug messages.</li>
    </ul>
  </li>
  <li>
<strong>1.0.0</strong>:
    <ul>
      <li>Added messages for firmware 8: <code class="language-plaintext highlighter-rouge">NavPVT</code>, <code class="language-plaintext highlighter-rouge">RxmRAWX</code>, <code class="language-plaintext highlighter-rouge">RxmSFRBX</code>.</li>
      <li>Modified ConfigGNSS and MonVER to include repeated blocks and added 
ConfigGNSS_Block (configures all GNSS at once) and MonVER_Extension 
(for MonVER_Char blocks).</li>
      <li>MonVER info is now published upon initialization.</li>
      <li>Fixed SBAS crashing issue (node crashed if device didn’t have SBAS 
capabilities)</li>
      <li>Modified remaining messages to update to firmware 8</li>
      <li>Added <code class="language-plaintext highlighter-rouge">UbloxNode</code> abstract class which does all previous node functions which 
are the same for all firmware versions. Added subclasses which do functions
specific to a given firmware version (e.g. subscribing to NavPVT messages).</li>
      <li>Added a read lock to AsyncWorker</li>
      <li>Removed hard-coded values from <code class="language-plaintext highlighter-rouge">Gps</code> and <code class="language-plaintext highlighter-rouge">Node</code> classes specific to a certain 
device and changed them to configurable parameters. Modified example
launch file accordingly.</li>
      <li>Added example parameter yaml files and launch file to load parameters from
this file.</li>
      <li>Moved implementations of Callback functions into <code class="language-plaintext highlighter-rouge">callback.h</code> (from <code class="language-plaintext highlighter-rouge">gps.h</code> 
and <code class="language-plaintext highlighter-rouge">gps.cpp</code>)</li>
      <li>Updated formatting of some files per google style guide spec (e.g. 80 chars
per line).</li>
    </ul>
  </li>
  <li>
<strong>0.0.5</strong>:
    <ul>
      <li>Reformat files under <code class="language-plaintext highlighter-rouge">ublox_gps</code>
</li>
    </ul>
  </li>
  <li>
<strong>0.0.4</strong>:
    <ul>
      <li>Added install targets.</li>
    </ul>
  </li>
  <li>
<strong>0.0.3</strong>:
    <ul>
      <li>Added the <code class="language-plaintext highlighter-rouge">enable_glonass</code>, <code class="language-plaintext highlighter-rouge">enable_beidou</code> and <code class="language-plaintext highlighter-rouge">enable_ppp</code> options.</li>
      <li>Added the <code class="language-plaintext highlighter-rouge">ublox_version</code> option. Consult known issues for important details.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">numSVs</code> field to the RQT monitor.</li>
    </ul>
  </li>
  <li>
<strong>0.0.2</strong>:
    <ul>
      <li>Changed <code class="language-plaintext highlighter-rouge">meas_rate</code> to simply <code class="language-plaintext highlighter-rouge">rate</code>, which is in Hz. <code class="language-plaintext highlighter-rouge">meas_rate</code> is computed automatically.</li>
    </ul>
  </li>
  <li>
<strong>0.0.1</strong>:
    <ul>
      <li>All topics are now published on a private node handle.</li>
      <li>Velocities are published as stamped twist messages with covariance. Angular components are unused.</li>
      <li>
<code class="language-plaintext highlighter-rouge">hAcc</code>, <code class="language-plaintext highlighter-rouge">vAcc</code> and <code class="language-plaintext highlighter-rouge">sAcc</code> are used to generate diagonal covariances.</li>
      <li>Velocities use the correct convention: X-Y-Z = East-North-Up.</li>
      <li>2D <strong>or</strong> 3D fix correspond to <code class="language-plaintext highlighter-rouge">STATUS_FIX</code> (previously only 3D).</li>
      <li>
<code class="language-plaintext highlighter-rouge">fix</code> and <code class="language-plaintext highlighter-rouge">fix_velocity</code> are time-stamped synchronously, using the <code class="language-plaintext highlighter-rouge">iTOW</code> to check arrival times.</li>
      <li>Added options for changing the CFG-NAV5 settings (see above).</li>
      <li>Added support for <code class="language-plaintext highlighter-rouge">diagnostic_updater</code>.</li>
      <li>
<em>“received ACK”</em> messages are elevated to debug level 2.</li>
      <li>Corrected issue where baudrate was not set correctly using rosparam.</li>
      <li>Corrected issue where socket destructors were not called.</li>
    </ul>
  </li>
  <li>
<strong>0.0.0</strong>:
    <ul>
      <li>Forked from https://github.com/tu-darmstadt-ros-pkg/ublox</li>
      <li>Updated to use catkin.</li>
    </ul>
  </li>
</ul>

<h1 id="adding-new-features">Adding new features</h1>
<h2 id="adding-new-messages">Adding new messages</h2>
<ol>
  <li>
    <p>Create the .msg file and add it to <code class="language-plaintext highlighter-rouge">ublox_msgs/msg</code>. Make sure the file includes the constants <code class="language-plaintext highlighter-rouge">CLASS_ID</code> and <code class="language-plaintext highlighter-rouge">MESSAGE_ID</code>.</p>
  </li>
  <li>
    <p>Modify <code class="language-plaintext highlighter-rouge">ublox_msgs/include/ublox_msgs/ublox_msgs.h</code>. 
a. Include the message header. 
b. Make sure the message’s class constant is declared in the <code class="language-plaintext highlighter-rouge">ublox_msgs::Class</code> namespace. 
c. Declare the message’s ID constant in the <code class="language-plaintext highlighter-rouge">ublox_messages::Message::&lt;CLASS_NAME&gt;</code> namespace.</p>
  </li>
  <li>
    <p>Declare the message in <code class="language-plaintext highlighter-rouge">ublox_msgs/src/ublox_msgs.cpp</code>.</p>
  </li>
  <li>
    <p>If the message has a repeated or optional block of varying size, create an additional message for the repeating block and include it in the message. 
a. Include the block message in the <code class="language-plaintext highlighter-rouge">ublox_msgs/include/ublox_msgs/ublox_msgs.h</code> file. 
b. Modify <code class="language-plaintext highlighter-rouge">ublox_msgs/include/ublox/serialization/ublox_msgs.h</code> and add a custom <code class="language-plaintext highlighter-rouge">Serializer</code>. If the message doesn’t include the number of repeating/optional blocks as a parameter, you can infer it from the count/size of the message, which is the length of the payload.</p>
  </li>
  <li>
    <p>Modify <code class="language-plaintext highlighter-rouge">ublox_gps/src/node.cpp</code> (and the header file if necessary) to either subscribe to the message or send the configuration message. Be sure to modify the appropriate subscribe function. For messages which apply to all firmware/hardware, modify <code class="language-plaintext highlighter-rouge">UbloxNode::subscribe()</code>. Otherwise modify the appropriate firmware or hardware’s subscribe function, e.g. <code class="language-plaintext highlighter-rouge">UbloxFirmware8::subscribe()</code>, <code class="language-plaintext highlighter-rouge">HpgRovProduct::subscribe()</code>. If the message is a configuration message, consider modifying <code class="language-plaintext highlighter-rouge">ublox_gps/src/gps.cpp</code> (and the header file) to add a configuration function.</p>
  </li>
</ol>

<h3 id="one-message-protocol-for-multiple-ids-eg-inf-message">One message protocol for multiple IDs (e.g. INF message)</h3>
<p>If a given message protocol applies to multiple message IDs (e.g. the <code class="language-plaintext highlighter-rouge">Inf</code> message), do not include the message ID in the message itself.
When declaring the message, for the first declaration, use <code class="language-plaintext highlighter-rouge">DECLARE_UBLOX_MESSAGE</code> macro. For the following declarations use the <code class="language-plaintext highlighter-rouge">DECLARE_UBLOX_MESSAGE_ID</code> macro.</p>

<h2 id="adding-device--firmware-specific-functionality">Adding device / firmware specific functionality</h2>

<p>The <code class="language-plaintext highlighter-rouge">node.cpp</code> file in <code class="language-plaintext highlighter-rouge">ublox_gps</code> contains a main Node class called UbloxNode which acts as the ROS Node and handles the node initialization, publishers, and diagnostics. <code class="language-plaintext highlighter-rouge">UbloxNode</code> contains a vector <code class="language-plaintext highlighter-rouge">components_</code> of instances of <code class="language-plaintext highlighter-rouge">ComponentInterface</code>. The <code class="language-plaintext highlighter-rouge">UbloxNode::initialize()</code> calls each component’s public interface methods. The node contains components for both the firmware version and the product category, which are added after parsing the <code class="language-plaintext highlighter-rouge">MonVER</code> message. Any class which implements <code class="language-plaintext highlighter-rouge">ComponentInterface</code> can be added to the <code class="language-plaintext highlighter-rouge">UbloxNode</code> <code class="language-plaintext highlighter-rouge">components_</code> vector and its methods will be called by <code class="language-plaintext highlighter-rouge">UbloxNode</code>. Simply add an implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> to the ublox_gps <code class="language-plaintext highlighter-rouge">node.h</code> and <code class="language-plaintext highlighter-rouge">node.cpp</code> files. Behavior specific to a given firmware or product should not be implemented in the <code class="language-plaintext highlighter-rouge">UbloxNode</code> class and instead should be implemented in an implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code>.</p>

<p>Currently there are implementations of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> for firmware versions 6-8 and product categories <code class="language-plaintext highlighter-rouge">HpgRefProduct</code>, <code class="language-plaintext highlighter-rouge">HpgRovProduct</code>, <code class="language-plaintext highlighter-rouge">AdrUdrProduct</code>, <code class="language-plaintext highlighter-rouge">TimProduct</code>, <code class="language-plaintext highlighter-rouge">FtsProduct</code>.  SPG products do not have their own implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code>, since the Firmware classes implement all of the behavior of SPG devices.</p>

<p><code class="language-plaintext highlighter-rouge">HpgRefProduct</code> and <code class="language-plaintext highlighter-rouge">HpgRovProduct</code> have been tested on the C94-M8P device.</p>

<h2 id="adding-new-parameters">Adding new parameters</h2>
<ol>
  <li>Modify the <code class="language-plaintext highlighter-rouge">getRosParams()</code> method in the appropriate implementation of ComponentInterface (e.g. UbloxNode, UbloxFirmware8, HpgRefProduct, etc.) and get the parameter. Group multiple related parameters into a namespace. Use all lower case names for parameters and namespaces separated with underscores.
    <ul>
      <li>If the type is an unsigned integer (of any size) or vector of unsigned integers, use the <code class="language-plaintext highlighter-rouge">ublox_node::getRosUint</code> method which will verify the bounds of the parameter.</li>
      <li>If the type is an int8 or int16 or vector of int8’s or int16’s, use the <code class="language-plaintext highlighter-rouge">ublox_nod::getRosInt</code> method which will verify the bounds of the parameter. (This method can also be used for int32’s but ROS has methods to get int32 parameters as well).</li>
    </ul>
  </li>
  <li>If the parameter is used during configuration also modify the <code class="language-plaintext highlighter-rouge">ComponentInterface</code>’s <code class="language-plaintext highlighter-rouge">configureUblox()</code> method to send the appropriate configuration message. Do not send configuration messages in <code class="language-plaintext highlighter-rouge">getRosParams()</code>.</li>
  <li>Modify this README file and add the parameter name and description in the appropriate section. State whether there is a default value or if the parameter is required.</li>
  <li>Modify one of the sample <code class="language-plaintext highlighter-rouge">.yaml</code> configuration files in <code class="language-plaintext highlighter-rouge">ublox_gps/config</code> to include the parameter or add a new sample <code class="language-plaintext highlighter-rouge">.yaml</code> for your device.</li>
</ol>

<h1 id="known-issues">Known Issues</h1>

<h2 id="unimplemented--untested-devices">Unimplemented / Untested Devices</h2>

<p><code class="language-plaintext highlighter-rouge">TimProduct</code> and <code class="language-plaintext highlighter-rouge">FtsProduct</code> are currently unimplemented skeleton classes. <code class="language-plaintext highlighter-rouge">AdrUdrProduct</code> is implemented, with the exception of <code class="language-plaintext highlighter-rouge">initializeRosDiagnostics()</code> and has not been tested on hardware.</p>

<p><code class="language-plaintext highlighter-rouge">UbloxFirmware7</code> has not been properly tested on a device with firmware version 7. <code class="language-plaintext highlighter-rouge">UbloxFirmware6</code> has been tested on a device with firmware version 8, but not with firmware version 6.</p>

<h2 id="debugging">Debugging</h2>

<p>For debugging messages set the debug parameter to &gt; 0. The range for debug is 0-4. At level 1 it prints configuration messages and checksum errors, at level 2 it also prints ACK/NACK messages and sent messages. At level 3 it prints the received bytes being decoded by a specific message reader. At level 4 it prints the incoming buffer before it is split by message header.</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<ol>
  <li>Why can’t the ublox_gps node open my device, even though I have correctly specified the path in <code class="language-plaintext highlighter-rouge">/dev</code>?
    <ul>
      <li>Make sure you are the owner of the device, or a member of <code class="language-plaintext highlighter-rouge">dialout</code> group.</li>
    </ul>
  </li>
</ol>

<h1 id="links">Links</h1>
<p>Consult the <a href="https://www.u-blox.com/sites/default/files/products/documents/u-blox8-M8_ReceiverDescrProtSpec_(UBX-13003221)_Public.pdf">official protocol spec</a> for details on packets supported by u-blox devices.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ublox">ublox</a> <small>repository</small></h3>
        <span class="label label-default">gps</span> <span class="label label-default">ublox</span> <span class="label label-default">ros</span> <span class="label label-default">ros-driver</span> <span class="label label-default">ublox-gps</span> 
        
        <a class="label label-primary pkg-label" href="/p/ublox">ublox</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_gps">ublox_gps</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_msgs">ublox_msgs</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_serialization">ublox_serialization</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-KumarRobotics-ublox
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-KumarRobotics-ublox" role="menuitem" tabindex="-1" href="/r/ublox/github-KumarRobotics-ublox" data="github-KumarRobotics-ublox">
                    <span class="glyphicon glyphicon-star"></span>
                    github-KumarRobotics-ublox
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">A driver for ublox gps</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/KumarRobotics/ublox.git">https://github.com/KumarRobotics/ublox.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">ros2</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-12-04
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">gps</span> <span class="label label-default">ublox</span> <span class="label label-default">ros</span> <span class="label label-default">ros-driver</span> <span class="label label-default">ublox-gps</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ublox/#jazzy-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ublox/#jazzy-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ublox/#jazzy-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ublox">ublox</a></td>
                    <td>2.3.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_gps">ublox_gps</a></td>
                    <td>2.3.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_msgs">ublox_msgs</a></td>
                    <td>2.3.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_serialization">ublox_serialization</a></td>
                    <td>2.3.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="ublox">ublox</h1>
<p>The <code class="language-plaintext highlighter-rouge">ublox</code> package provides support for <a href="http://www.u-blox.com">u-blox</a> GPS receivers. Only the <em>serial</em> configuration of the driver is documented here, but TCP/UDP communication is also supported by the driver (untested).</p>

<p>The driver was originally written by Johannes Meyer. Changes made later are detailed in the version history below.</p>

<h2 id="options">Options</h2>

<p>Example .yaml configuration files are included in <code class="language-plaintext highlighter-rouge">ublox_gps/config</code>. Consult the u-blox documentation for your device for the recommended settings.</p>

<p>The <code class="language-plaintext highlighter-rouge">ublox_gps</code> node supports the following parameters for all products and firmware versions:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">device</code>: Path to the device port. Defaults to <code class="language-plaintext highlighter-rouge">/dev/ttyACM0</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">raw_data</code>: Whether the device is a raw data product. Defaults to false. Firmware &lt;= 7.03 only.</li>
  <li>
<code class="language-plaintext highlighter-rouge">load</code>: Parameters for loading the configuration to non-volatile memory. See <code class="language-plaintext highlighter-rouge">ublox_msgs/CfgCFG.msg</code>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">load/mask</code>: uint32_t. Mask of the configurations to load.</li>
      <li>
<code class="language-plaintext highlighter-rouge">load/device</code>: uint32_t. Mask which selects the devices for the load command.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">save</code>: Parameters for saving the configuration to non-volatile memory. See <code class="language-plaintext highlighter-rouge">ublox_msgs/CfgCFG.msg</code>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">save/mask</code>: uint32_t. Mask of the configurations to save.</li>
      <li>
<code class="language-plaintext highlighter-rouge">save/device</code>: uint32_t. Mask which selects the devices for the save command.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">uart1/baudrate</code>: Bit rate of the serial communication. Defaults to 9600.</li>
  <li>
<code class="language-plaintext highlighter-rouge">uart1/in</code>: UART1 in communication protocol. Defaults to UBX, NMEA &amp; RTCM. See <code class="language-plaintext highlighter-rouge">CfgPRT</code> message for possible values.</li>
  <li>
<code class="language-plaintext highlighter-rouge">uart1/out</code>: UART1 out communication protocol. Defaults to UBX, NMEA &amp; RTCM. See <code class="language-plaintext highlighter-rouge">CfgPRT</code> message for possible values.</li>
  <li>
<code class="language-plaintext highlighter-rouge">frame_id</code>: ROS name prepended to frames produced by the node. Defaults to <code class="language-plaintext highlighter-rouge">gps</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">rate</code>: Rate in Hz of measurements. Defaults to 4.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nav_rate</code>: How often navigation solutions are published in number of measurement cycles. Defaults to 1.</li>
  <li>
<code class="language-plaintext highlighter-rouge">enable_ppp</code>: Enable precise-point-positioning system. Defaults to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">gnss/sbas</code>: Enable satellite-based augmentation system. Defaults to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sbas/max</code>: Maximum number of SBAS channels. Defaults to 0.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sbas/usage</code>: See <code class="language-plaintext highlighter-rouge">CfgSBAS</code> message for details. Defaults to 0.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dynamic_model</code>: Possible values below. Defaults to <code class="language-plaintext highlighter-rouge">portable</code>. See u-blox documentation for further description.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">portable</code></li>
      <li><code class="language-plaintext highlighter-rouge">stationary</code></li>
      <li><code class="language-plaintext highlighter-rouge">pedestrian</code></li>
      <li><code class="language-plaintext highlighter-rouge">automotive</code></li>
      <li><code class="language-plaintext highlighter-rouge">sea</code></li>
      <li>
<code class="language-plaintext highlighter-rouge">airborne1</code>: Airborne, max acceleration = 1G</li>
      <li>
<code class="language-plaintext highlighter-rouge">airborne2</code>: Airborne, max acceleration = 2G</li>
      <li>
<code class="language-plaintext highlighter-rouge">airborne4</code>: Airborne, max acceleration = 4G</li>
      <li><code class="language-plaintext highlighter-rouge">wristwatch</code></li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">fix_mode</code>: Type of fixes supported: <code class="language-plaintext highlighter-rouge">2d</code>, <code class="language-plaintext highlighter-rouge">3d</code> or <code class="language-plaintext highlighter-rouge">both</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dr_limit</code>: Max time in seconds to use dead reckoning after signal is lost. Defaults to 0.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dat</code>: Configuring the datum type (optional). See the CfgDAT message.
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">dat/set</code>: If true, the node will the datum based on the parameters below (required if true). Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/majA</code>: Semi-major Axis [m]</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/flat</code>: 1.0 / Flattening</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/shift</code>: [X-axis, Y-axis, Z-axis] shift [m]</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/rot</code>: [X, Y, Z] rotation [s]</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/scale</code>: scale change [ppm]</li>
    </ul>
  </li>
</ul>

<h3 id="for-firmware-version-6">For firmware version 6:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/set</code>: If true, the NMEA will be configured with the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/version</code>: NMEA version. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/num_sv</code>: Maximum Number of SVs to report per TalkerId. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/compat</code>: Enable compatibility mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/consider</code>: Enable considering mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/filter</code>: Namespace for filter flags.
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/pos</code>: Disable position filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/msk_pos</code>: Disable masked position filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/time</code>: Disable time filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/date</code>: Disable date filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/sbas</code>: Enable SBAS filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/track</code>: Disable track filtering. Defaults to false.</li>
    </ul>
  </li>
</ul>

<h3 id="for-devices-with-firmware--7">For devices with firmware &gt;= 7:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">gnss</code> parameters:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/gps</code>: Enable GPS receiver. Defaults to true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/glonass</code>: Enable GLONASS receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/beidou</code>: Enable BeiDou receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/qzss</code>: Enable QZSS receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/qzss_sig_cfg</code>: QZSS signal configuration. Defaults to L1CA. See <code class="language-plaintext highlighter-rouge">CfgGNSS</code> message for constants.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea</code> parameters:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/set</code>: If true, the NMEA will be configured.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/version</code>: NMEA version. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/num_sv</code>: Maximum Number of SVs to report per TalkerId. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/sv_numbering</code>: Configures the display of satellites that do not have an NMEA-defined value. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/compat</code>: Enable compatibility mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/consider</code>: Enable considering mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/limit82</code>: Enable strict limit to 82 characters maximum. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/high_prec</code>: Enable high precision mode. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter</code>: Namespace for filter flags.
        <ul>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/pos</code>: Enable position output for failed or invalid fixes. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/msk_pos</code>: Enable position output for invalid fixes. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/time</code>: Enable time output for invalid times. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/date</code>: Enable date output for invalid dates. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/gps_only</code>: Restrict output to GPS satellites only. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/track</code>: Enable COG output even if COG is frozen. Defaults to false.</li>
        </ul>
      </li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt</code>: Filters out satellites based on their GNSS.
        <ul>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/gps</code>: Disable reporting of GPS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/sbas</code>: Disable reporting of SBAS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/qzss</code>: Disable reporting of QZSS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/glonass</code>: Disable reporting of GLONASS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/beidou</code>: Disable reporting of BeiDou satellites. Defaults to false.</li>
        </ul>
      </li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/main_talker_id</code>: This field enables the main Talker ID to be overridden. Defaults to 0.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/gsv_talker_id</code>:  This field enables the GSV Talker ID to be overridden. Defaults to [0, 0].</li>
    </ul>
  </li>
</ul>

<h3 id="for-devices-with-firmware--8">For devices with firmware &gt;= 8:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">save_on_shutdown</code>: If true, the node will send a <code class="language-plaintext highlighter-rouge">UBX-UPD-SOS</code> command to save the BBR to flash memory on shutdown. Defaults to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">clear_bbr</code>: If true, the node will send a <code class="language-plaintext highlighter-rouge">UBX-UPD-SOS</code> command to clear the flash memory during configuration. Defaults to false.</li>
  <li>Additional <code class="language-plaintext highlighter-rouge">gnss</code> params
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/galileo</code>: Enable Galileo receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/imes</code>: Enable IMES receiver. Defaults to false.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/bds_talker_id</code>: (See other NMEA configuration parameters above) Sets the two characters that should be used for the BeiDou Talker ID.</li>
</ul>

<h3 id="for-udradr-devices">For UDR/ADR devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">use_adr</code>: Enable ADR/UDR. Defaults to true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nav_rate</code> should be set to 1 Hz.</li>
</ul>

<h3 id="for-hpg-reference-devices">For HPG Reference devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">tmode3</code>: Time Mode. Required. See CfgTMODE3 for constants.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/lla_flag</code>: True if the Fixed position is in Lat, Lon, Alt coordinates. False if ECEF. Required if <code class="language-plaintext highlighter-rouge">tmode3</code> is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/position</code>: Antenna Reference Point position in [m] or [deg]. Required if <code class="language-plaintext highlighter-rouge">tmode3</code> is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/position_hp</code>: Antenna Reference Point High Precision position in [0.1 mm] or [deg * 1e-9]. Required if tmode3 is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/acc</code>: Fixed position accuracy in [m]. Required if <code class="language-plaintext highlighter-rouge">tmode3</code> is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sv_in/reset</code>: Whether or not to reset the survey in upon initialization. If false, it will only reset if the TMODE is disabled. Defaults to true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sv_in/min_dur</code>: The minimum Survey-In Duration time in seconds. Required tmode3 is set to survey in.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sv_in/acc_lim</code>: The minimum accuracy level of the survey in position in meters. Required <code class="language-plaintext highlighter-rouge">tmode3</code> is set to survey in.</li>
</ul>

<h3 id="for-hpg-rover-devices">For HPG Rover devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">dgnss_mode</code>: The Differential GNSS mode. Defaults to RTK FIXED. See <code class="language-plaintext highlighter-rouge">CfgDGNSS</code> message for constants.</li>
</ul>

<h3 id="for-tim-devices">For TIM devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">tim_tm2</code>: Enable this message for GPS time-stamps everytime an external interrupt signal is received.</li>
</ul>

<h3 id="for-fts-devices">For FTS devices:</h3>
<ul>
  <li>currently unimplemented. See <code class="language-plaintext highlighter-rouge">FtsProduct</code> class in <code class="language-plaintext highlighter-rouge">ublox_gps</code> package <code class="language-plaintext highlighter-rouge">node.h</code> &amp; <code class="language-plaintext highlighter-rouge">node.cpp</code> files.</li>
</ul>

<h2 id="fix-topics">Fix Topics</h2>

<p><code class="language-plaintext highlighter-rouge">~fix</code>(<a href="http://docs.ros.org/api/sensor_msgs/html/msg/NavSatFix.html">sensor_msgs/NavSatFix</a>)</p>

<p>Navigation Satellite fix.</p>

<p><code class="language-plaintext highlighter-rouge">~fix_velocity</code>(<a href="http://docs.ros.org/jade/api/geometry_msgs/html/msg/TwistWithCovarianceStamped.html">geometry_msgs/TwistWithCovarianceStamped</a>)</p>

<p>Velocity in local ENU frame.</p>

<h2 id="inf-messages">INF messages</h2>
<p>To enable printing INF messages to the ROS console, set the parameters below.</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">inf/all</code>: This is the default value for the INF parameters below, which enable printing u-blox <code class="language-plaintext highlighter-rouge">INF</code> messages to the ROS console. It defaults to true. Individual message types can be turned off by setting their corresponding parameter to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/debug</code>: Whether to configure the UBX and NMEA ports to send Debug messages and print received <code class="language-plaintext highlighter-rouge">INF-Debug</code> messages to <code class="language-plaintext highlighter-rouge">ROS_DEBUG</code> console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/error</code>: Whether to enable Error messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Error</code> messages to <code class="language-plaintext highlighter-rouge">ROS_ERROR</code> console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/notice</code>: Whether to enable Notice messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Notice messages to </code>ROS_INFO` console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/test</code>: Whether to enable Test messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Test</code> messages to <code class="language-plaintext highlighter-rouge">ROS_INFO</code> console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/warning</code>: Whether to enable Warning messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Warning</code> messages to the <code class="language-plaintext highlighter-rouge">ROS_WARN</code> console.</li>
</ul>

<h2 id="additional-topics">Additional Topics</h2>
<p>To publish a given u-blox message to a ROS topic, set the parameter shown below to true. The node sets the rate of the u-blox messages to 1 measurement cycle.</p>

<h3 id="all-messages">All messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/all</code>: This is the default value for <code class="language-plaintext highlighter-rouge">publish/&lt;class&gt;/all</code> parameters below. It defaults to false. Individual message classes and messages can be enabled or disabled by setting the parameters described below to false.</li>
</ul>

<h3 id="aid-messages">AID messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/aid/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/alm</code>: Topic <code class="language-plaintext highlighter-rouge">~aidalm</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/eph</code>: Topic <code class="language-plaintext highlighter-rouge">~aideph</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/hui</code>: Topic <code class="language-plaintext highlighter-rouge">~aidhui</code>
</li>
</ul>

<h3 id="rxm-messages">RXM messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/rxm/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/alm</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmalm</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/eph</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmeph</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/raw</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmraw</code>. Type is either <code class="language-plaintext highlighter-rouge">RxmRAW</code> or <code class="language-plaintext highlighter-rouge">RxmRAWX</code> depending on firmware version.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/rtcm</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmrtcm</code>. <strong>Firmware &gt;= 8 only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/sfrb</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmsfrb</code>. Type is either <code class="language-plaintext highlighter-rouge">RxmSFRB</code> or <code class="language-plaintext highlighter-rouge">RxmSFRBX</code> depending on firmware version.</li>
</ul>

<h3 id="mon-messages">MON messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/mon/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/mon/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/mon/hw</code>: Topic <code class="language-plaintext highlighter-rouge">~monhw</code>
</li>
</ul>

<h3 id="nav-messages">NAV messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/mon/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/att</code>: Topic <code class="language-plaintext highlighter-rouge">~navatt</code>. <strong>ADR/UDR devices only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/clock</code>: Topic <code class="language-plaintext highlighter-rouge">~navclock</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/posecef</code>: Topic <code class="language-plaintext highlighter-rouge">~navposecef</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/posllh</code>: Topic <code class="language-plaintext highlighter-rouge">~navposllh</code>. <strong>Firmware &lt;= 6 only.</strong> For firmware 7 and above, see NavPVT</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/pvt</code>: Topic <code class="language-plaintext highlighter-rouge">~navpvt</code>. <strong>Firmware &gt;= 7 only.</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/relposned</code>: Topic <code class="language-plaintext highlighter-rouge">~navrelposned</code>. <strong>HPG Rover devices only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/heading</code>: Topic <code class="language-plaintext highlighter-rouge">~navheading</code>. <strong>HP Position receiver devices only.</strong> For firmware 9 and above</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/sat</code>: Topic <code class="language-plaintext highlighter-rouge">~navsat</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/sol</code>: Topic <code class="language-plaintext highlighter-rouge">~navsol</code>. <strong>Firmware &lt;= 6 only.</strong> For firmware 7 and above, see NavPVT</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/status</code>: Topic <code class="language-plaintext highlighter-rouge">~navstatus</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/svin</code>: Topic <code class="language-plaintext highlighter-rouge">~navsvin</code>. <strong>HPG Reference Station Devices only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/svinfo</code>: Topic <code class="language-plaintext highlighter-rouge">~navsvinfo</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/velned</code>: Topic <code class="language-plaintext highlighter-rouge">~navvelned</code>. <strong>Firmware &lt;= 6 only.</strong> For firmware 7 and above, see NavPVT</li>
</ul>

<h3 id="esf-messages">ESF messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/esf/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code> for <strong>ADR/UDR devices</strong>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/ins</code>: Topic <code class="language-plaintext highlighter-rouge">~esfins</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/meas</code>: Topic <code class="language-plaintext highlighter-rouge">~esfmeas</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/raw</code>: Topic <code class="language-plaintext highlighter-rouge">~esfraw</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/status</code>: Topic <code class="language-plaintext highlighter-rouge">~esfstatus</code>
</li>
</ul>

<h3 id="hnr-messages">HNR messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/hnr/pvt</code>: Topic <code class="language-plaintext highlighter-rouge">~hnrpvt</code>. <strong>ADR/UDR devices only</strong>
</li>
</ul>

<h3 id="tim-messages">TIM messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/tim/tm2</code>: Topic <code class="language-plaintext highlighter-rouge">timtm2</code>. <strong>TIM devices only</strong>
</li>
</ul>

<h2 id="launch">Launch</h2>

<p>A sample launch file <code class="language-plaintext highlighter-rouge">ublox_device.launch</code> loads the parameters from a <code class="language-plaintext highlighter-rouge">.yaml</code> file in the <code class="language-plaintext highlighter-rouge">ublox_gps/config</code> folder, sample configuration files are included. The required arguments are <code class="language-plaintext highlighter-rouge">node_name</code> and <code class="language-plaintext highlighter-rouge">param_file_name</code>.
The two topics to which you should subscribe are <code class="language-plaintext highlighter-rouge">~fix</code> and <code class="language-plaintext highlighter-rouge">~fix_velocity</code>. The angular component of <code class="language-plaintext highlighter-rouge">fix_velocity</code> is unused.</p>

<h1 id="version-history">Version history</h1>

<ul>
  <li>
<strong>1.1.4</strong>:
    <ul>
      <li>Added messages for firmware 9: <code class="language-plaintext highlighter-rouge">NavRELPOSNED9</code>.</li>
      <li>Added option to publish <code class="language-plaintext highlighter-rouge">sensor_msgs/Imu</code> message for High Precision Position Receiver devices with firmware version &gt;= 9 for moving base applications (For example ZED-F9P; <a href="https://www.u-blox.com/sites/default/files/ZED-F9P-MovingBase_AppNote_%28UBX-19009093%29.pdf">UBX-19009093 AppNote</a>).</li>
    </ul>
  </li>
  <li>
<strong>1.1.3</strong>:
    <ul>
      <li>Update by TUC-ProAut</li>
      <li>Added raw data stream output. To publish ros messages set rosparam <code class="language-plaintext highlighter-rouge">raw_data_stream/publish</code> to true. To store to a logfile set rosparam <code class="language-plaintext highlighter-rouge">set raw_data_stream/dir</code> to the appropriated directory. This feature has nothing todo with Raw Data Products.</li>
      <li>Added flag <code class="language-plaintext highlighter-rouge">config_on_startup</code> to deactivate configuration of ublox.</li>
    </ul>
  </li>
  <li>
<strong>1.1.2</strong>:
    <ul>
      <li>BUG FIX for NavSatFix messages for firmware &gt;=7. The NavSatFix now only uses the NavPVT message time if it is valid, otherwise it uses ROS time.</li>
      <li>BUG FIX for TMODE3 Fixed mode configuration. The ARP High Precision position is now configured correctly.</li>
      <li>BUG FIX for <code class="language-plaintext highlighter-rouge">NavDGPS</code> message which had the wrong Message ID.</li>
      <li>After GNSS configuration &amp; reset, I/O resets automatically, without need for restart.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">UBX-UPD</code> messages. For firmware version 8, the node can now save the flash memory on shutdown and clear the flash memory during configuration based on ROS params.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">CfgGPS</code> message and <code class="language-plaintext highlighter-rouge">MonHW6</code> message for firmware version 6.</li>
      <li>Added respawn parameters to example launch file.</li>
      <li>Added parameters to load/save configuration.</li>
      <li>Added raw_data parameter for Raw Data Products.</li>
      <li>Changed name of “subscribe” parameter namespace to “publish” for clarity.</li>
      <li>Migrated all callback handling to <code class="language-plaintext highlighter-rouge">callback.h</code> from <code class="language-plaintext highlighter-rouge">gps.h</code> and <code class="language-plaintext highlighter-rouge">gps.cpp</code>. ACK messages are now processed through callback handlers.</li>
      <li>Modified how the I/O stream is initialized so that the node now handles parsing the port string.</li>
      <li>Changed class names of Ublox product components (e.g. UbloxTim -&gt; TimProduct) for clarity.</li>
      <li>Cleaned up ublox custom serialization classes by adding typedefs and using count to determine repeating block statements instead of using try-catch statements to serialize stream.</li>
      <li>Added doxygen documentation</li>
    </ul>
  </li>
  <li>
<strong>1.1.1</strong>:
    <ul>
      <li>BUG FIX for acknowledgments. The last received ack message was accessed by multiple threads but was not atomic. This variable is now thread safe.</li>
      <li>BUG FIX for GNSS configuration for Firmware 8, the GNSS configuration is now verified &amp; modified properly.</li>
      <li>BUG FIX for fix diagnostics. NumSV was displaying incorrectly. For firmware versions &gt;=7, the NavPVT flags variable is now compared to the constants from the NavPVT message not NavSOL.</li>
      <li>Removed ublox_version param, value is now determined by parsing MonVER.</li>
      <li>Organized parameters into namespaces.</li>
      <li>Better parameter checking. Checks that unsigned ints and vectors of unsigned ints are in bounds.</li>
      <li>Changed rtcm/rate parameter to a vector instead of a scalar, now each RTCM id can be set to a different rate.</li>
      <li>Diagnostic variables are displayed more clearly with units included.</li>
      <li>For HPG Rovers, added diagnostic updater for Carrier Phase Solution.</li>
      <li>Added CfgNMEA messages for each firmware version and a CfgDAT message, as well as parameters to configure the NMEA and Datum.</li>
      <li>Added constants for NavSAT_SV flags bit mask.</li>
    </ul>
  </li>
  <li>
<strong>1.1.0</strong>:
    <ul>
      <li>BUG FIX for NAV-PVT messages for firmware 7. The NAV-PVT message is shorter for firmware version 7, the new message is <code class="language-plaintext highlighter-rouge">NavPVT7</code>
</li>
      <li>BUG FIX for SBAS configuration, it now configures SBAS only if the device is SBAS capable. Previously, if enable_sbas was set to false, it would not configure, meaning that SBAS could not be turned off.</li>
      <li>BUG FIX, the baudrate of the serial I/O port was not configured correctly, on the device it was set to the user desired settings, but on the computer it was always set to 4800.</li>
      <li>BUG FIX, Diagnostics for Nav Status are now updated in firmware version 6.</li>
      <li>BUG FIX, The method which waited for ACKs now checks if the ACK is from the correct class and message ID.</li>
      <li>Added messages for <code class="language-plaintext highlighter-rouge">CfgTMODE3</code>, <code class="language-plaintext highlighter-rouge">CfgHNR</code>, <code class="language-plaintext highlighter-rouge">CfgRST</code>, <code class="language-plaintext highlighter-rouge">CfgINF</code>, <code class="language-plaintext highlighter-rouge">NavATT</code>, <code class="language-plaintext highlighter-rouge">ESF</code> messages, <code class="language-plaintext highlighter-rouge">Inf</code> message (for all INF types), <code class="language-plaintext highlighter-rouge">HnrPVT</code>, <code class="language-plaintext highlighter-rouge">MgaGAL</code>, <code class="language-plaintext highlighter-rouge">NavSAT</code>, <code class="language-plaintext highlighter-rouge">MonHw</code>, <code class="language-plaintext highlighter-rouge">NavPVT7</code> (for firmware version 7).</li>
      <li>Restructured Node class so that it now uses composition. The main node contains instances of classes which implement <code class="language-plaintext highlighter-rouge">UBloxInterface</code>, and calls the methods for each interface added to the node. The classes which implement the interface add new features that are not generic to all firmware versions or products. Each firmware version (6-8) has an interface, and each product category has one (SPG, HPG REF, HPG ROV, TIM, FTS, ADR/UDR). The product type is determined from parsing the <code class="language-plaintext highlighter-rouge">MonVER</code> message.</li>
      <li>Added implementations of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> called <code class="language-plaintext highlighter-rouge">UbloxHpgRef</code> and <code class="language-plaintext highlighter-rouge">UbloxHpgRov</code> for HPG reference station and rover devices. The reference station tmode3 can be configured upon startup (see Options section) and the rover dgnss mode can be set. After survey in, once the reference station entire time mode, the nav_rate is set to the user desired value (it must be 1 Hz during survey-in) and the RTCM output messages are enabled. The state can be monitored through the rqt_runtime_monitor. These classes were tested on C94-M8P devices.</li>
      <li>Added an implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> called <code class="language-plaintext highlighter-rouge">UbloxAdrUdr</code> for ADR/UDR devices. It which subscribes to <code class="language-plaintext highlighter-rouge">NavATT</code> and ESF messages and configures useAdr. The diagnostics monitor specific to these devices is not implemented. This class has not been tested on a hardware device.</li>
      <li>Added a partial implementation of <code class="language-plaintext highlighter-rouge">UbloxTim</code> for TIM devices which subscribes to <code class="language-plaintext highlighter-rouge">RxmRAWX</code> and <code class="language-plaintext highlighter-rouge">RxmSFRBX</code> messages. The <code class="language-plaintext highlighter-rouge">getRosParams()</code>, <code class="language-plaintext highlighter-rouge">configureUblox()</code>, and <code class="language-plaintext highlighter-rouge">initializeDiagnostics()</code> methods are unimplemented.</li>
      <li>Added a skeleton class for <code class="language-plaintext highlighter-rouge">UbloxFts</code> for FTS devices which is unimplemented. See the <code class="language-plaintext highlighter-rouge">ublox_gps</code> <code class="language-plaintext highlighter-rouge">node.cpp</code> and <code class="language-plaintext highlighter-rouge">node.h</code> files.</li>
      <li>Changed how GNSS is configured in firmware version 8. The documentation recommends a cold restart after reconfiguring the GNSS, and will reset the device if it receives a <code class="language-plaintext highlighter-rouge">CfgGNSS</code> message, even if the settings do not change. For firmware version 8, before reconfiguring, the node first checks if the current GNSS settings are the same as the desired settings. If so, it will not send a CfgGNSS message to the device. After reconfiguring, it will cold reset the GNSS.</li>
      <li>Migrated I/O initialization to the <code class="language-plaintext highlighter-rouge">Gps</code> class from the <code class="language-plaintext highlighter-rouge">Node</code> class.</li>
      <li>INF messages are now printed to the ROS console.</li>
      <li>Changed how debug statements are displayed. If the debug parameter is set to 1 or greater, it prints debug messages.</li>
    </ul>
  </li>
  <li>
<strong>1.0.0</strong>:
    <ul>
      <li>Added messages for firmware 8: <code class="language-plaintext highlighter-rouge">NavPVT</code>, <code class="language-plaintext highlighter-rouge">RxmRAWX</code>, <code class="language-plaintext highlighter-rouge">RxmSFRBX</code>.</li>
      <li>Modified ConfigGNSS and MonVER to include repeated blocks and added 
ConfigGNSS_Block (configures all GNSS at once) and MonVER_Extension 
(for MonVER_Char blocks).</li>
      <li>MonVER info is now published upon initialization.</li>
      <li>Fixed SBAS crashing issue (node crashed if device didn’t have SBAS 
capabilities)</li>
      <li>Modified remaining messages to update to firmware 8</li>
      <li>Added <code class="language-plaintext highlighter-rouge">UbloxNode</code> abstract class which does all previous node functions which 
are the same for all firmware versions. Added subclasses which do functions
specific to a given firmware version (e.g. subscribing to NavPVT messages).</li>
      <li>Added a read lock to AsyncWorker</li>
      <li>Removed hard-coded values from <code class="language-plaintext highlighter-rouge">Gps</code> and <code class="language-plaintext highlighter-rouge">Node</code> classes specific to a certain 
device and changed them to configurable parameters. Modified example
launch file accordingly.</li>
      <li>Added example parameter yaml files and launch file to load parameters from
this file.</li>
      <li>Moved implementations of Callback functions into <code class="language-plaintext highlighter-rouge">callback.h</code> (from <code class="language-plaintext highlighter-rouge">gps.h</code> 
and <code class="language-plaintext highlighter-rouge">gps.cpp</code>)</li>
      <li>Updated formatting of some files per google style guide spec (e.g. 80 chars
per line).</li>
    </ul>
  </li>
  <li>
<strong>0.0.5</strong>:
    <ul>
      <li>Reformat files under <code class="language-plaintext highlighter-rouge">ublox_gps</code>
</li>
    </ul>
  </li>
  <li>
<strong>0.0.4</strong>:
    <ul>
      <li>Added install targets.</li>
    </ul>
  </li>
  <li>
<strong>0.0.3</strong>:
    <ul>
      <li>Added the <code class="language-plaintext highlighter-rouge">enable_glonass</code>, <code class="language-plaintext highlighter-rouge">enable_beidou</code> and <code class="language-plaintext highlighter-rouge">enable_ppp</code> options.</li>
      <li>Added the <code class="language-plaintext highlighter-rouge">ublox_version</code> option. Consult known issues for important details.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">numSVs</code> field to the RQT monitor.</li>
    </ul>
  </li>
  <li>
<strong>0.0.2</strong>:
    <ul>
      <li>Changed <code class="language-plaintext highlighter-rouge">meas_rate</code> to simply <code class="language-plaintext highlighter-rouge">rate</code>, which is in Hz. <code class="language-plaintext highlighter-rouge">meas_rate</code> is computed automatically.</li>
    </ul>
  </li>
  <li>
<strong>0.0.1</strong>:
    <ul>
      <li>All topics are now published on a private node handle.</li>
      <li>Velocities are published as stamped twist messages with covariance. Angular components are unused.</li>
      <li>
<code class="language-plaintext highlighter-rouge">hAcc</code>, <code class="language-plaintext highlighter-rouge">vAcc</code> and <code class="language-plaintext highlighter-rouge">sAcc</code> are used to generate diagonal covariances.</li>
      <li>Velocities use the correct convention: X-Y-Z = East-North-Up.</li>
      <li>2D <strong>or</strong> 3D fix correspond to <code class="language-plaintext highlighter-rouge">STATUS_FIX</code> (previously only 3D).</li>
      <li>
<code class="language-plaintext highlighter-rouge">fix</code> and <code class="language-plaintext highlighter-rouge">fix_velocity</code> are time-stamped synchronously, using the <code class="language-plaintext highlighter-rouge">iTOW</code> to check arrival times.</li>
      <li>Added options for changing the CFG-NAV5 settings (see above).</li>
      <li>Added support for <code class="language-plaintext highlighter-rouge">diagnostic_updater</code>.</li>
      <li>
<em>“received ACK”</em> messages are elevated to debug level 2.</li>
      <li>Corrected issue where baudrate was not set correctly using rosparam.</li>
      <li>Corrected issue where socket destructors were not called.</li>
    </ul>
  </li>
  <li>
<strong>0.0.0</strong>:
    <ul>
      <li>Forked from https://github.com/tu-darmstadt-ros-pkg/ublox</li>
      <li>Updated to use catkin.</li>
    </ul>
  </li>
</ul>

<h1 id="adding-new-features">Adding new features</h1>
<h2 id="adding-new-messages">Adding new messages</h2>
<ol>
  <li>
    <p>Create the .msg file and add it to <code class="language-plaintext highlighter-rouge">ublox_msgs/msg</code>. Make sure the file includes the constants <code class="language-plaintext highlighter-rouge">CLASS_ID</code> and <code class="language-plaintext highlighter-rouge">MESSAGE_ID</code>.</p>
  </li>
  <li>
    <p>Modify <code class="language-plaintext highlighter-rouge">ublox_msgs/include/ublox_msgs/ublox_msgs.h</code>. 
a. Include the message header. 
b. Make sure the message’s class constant is declared in the <code class="language-plaintext highlighter-rouge">ublox_msgs::Class</code> namespace. 
c. Declare the message’s ID constant in the <code class="language-plaintext highlighter-rouge">ublox_messages::Message::&lt;CLASS_NAME&gt;</code> namespace.</p>
  </li>
  <li>
    <p>Declare the message in <code class="language-plaintext highlighter-rouge">ublox_msgs/src/ublox_msgs.cpp</code>.</p>
  </li>
  <li>
    <p>If the message has a repeated or optional block of varying size, create an additional message for the repeating block and include it in the message. 
a. Include the block message in the <code class="language-plaintext highlighter-rouge">ublox_msgs/include/ublox_msgs/ublox_msgs.h</code> file. 
b. Modify <code class="language-plaintext highlighter-rouge">ublox_msgs/include/ublox/serialization/ublox_msgs.h</code> and add a custom <code class="language-plaintext highlighter-rouge">Serializer</code>. If the message doesn’t include the number of repeating/optional blocks as a parameter, you can infer it from the count/size of the message, which is the length of the payload.</p>
  </li>
  <li>
    <p>Modify <code class="language-plaintext highlighter-rouge">ublox_gps/src/node.cpp</code> (and the header file if necessary) to either subscribe to the message or send the configuration message. Be sure to modify the appropriate subscribe function. For messages which apply to all firmware/hardware, modify <code class="language-plaintext highlighter-rouge">UbloxNode::subscribe()</code>. Otherwise modify the appropriate firmware or hardware’s subscribe function, e.g. <code class="language-plaintext highlighter-rouge">UbloxFirmware8::subscribe()</code>, <code class="language-plaintext highlighter-rouge">HpgRovProduct::subscribe()</code>. If the message is a configuration message, consider modifying <code class="language-plaintext highlighter-rouge">ublox_gps/src/gps.cpp</code> (and the header file) to add a configuration function.</p>
  </li>
</ol>

<h3 id="one-message-protocol-for-multiple-ids-eg-inf-message">One message protocol for multiple IDs (e.g. INF message)</h3>
<p>If a given message protocol applies to multiple message IDs (e.g. the <code class="language-plaintext highlighter-rouge">Inf</code> message), do not include the message ID in the message itself.
When declaring the message, for the first declaration, use <code class="language-plaintext highlighter-rouge">DECLARE_UBLOX_MESSAGE</code> macro. For the following declarations use the <code class="language-plaintext highlighter-rouge">DECLARE_UBLOX_MESSAGE_ID</code> macro.</p>

<h2 id="adding-device--firmware-specific-functionality">Adding device / firmware specific functionality</h2>

<p>The <code class="language-plaintext highlighter-rouge">node.cpp</code> file in <code class="language-plaintext highlighter-rouge">ublox_gps</code> contains a main Node class called UbloxNode which acts as the ROS Node and handles the node initialization, publishers, and diagnostics. <code class="language-plaintext highlighter-rouge">UbloxNode</code> contains a vector <code class="language-plaintext highlighter-rouge">components_</code> of instances of <code class="language-plaintext highlighter-rouge">ComponentInterface</code>. The <code class="language-plaintext highlighter-rouge">UbloxNode::initialize()</code> calls each component’s public interface methods. The node contains components for both the firmware version and the product category, which are added after parsing the <code class="language-plaintext highlighter-rouge">MonVER</code> message. Any class which implements <code class="language-plaintext highlighter-rouge">ComponentInterface</code> can be added to the <code class="language-plaintext highlighter-rouge">UbloxNode</code> <code class="language-plaintext highlighter-rouge">components_</code> vector and its methods will be called by <code class="language-plaintext highlighter-rouge">UbloxNode</code>. Simply add an implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> to the ublox_gps <code class="language-plaintext highlighter-rouge">node.h</code> and <code class="language-plaintext highlighter-rouge">node.cpp</code> files. Behavior specific to a given firmware or product should not be implemented in the <code class="language-plaintext highlighter-rouge">UbloxNode</code> class and instead should be implemented in an implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code>.</p>

<p>Currently there are implementations of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> for firmware versions 6-8 and product categories <code class="language-plaintext highlighter-rouge">HpgRefProduct</code>, <code class="language-plaintext highlighter-rouge">HpgRovProduct</code>, <code class="language-plaintext highlighter-rouge">AdrUdrProduct</code>, <code class="language-plaintext highlighter-rouge">TimProduct</code>, <code class="language-plaintext highlighter-rouge">FtsProduct</code>.  SPG products do not have their own implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code>, since the Firmware classes implement all of the behavior of SPG devices.</p>

<p><code class="language-plaintext highlighter-rouge">HpgRefProduct</code> and <code class="language-plaintext highlighter-rouge">HpgRovProduct</code> have been tested on the C94-M8P device.</p>

<h2 id="adding-new-parameters">Adding new parameters</h2>
<ol>
  <li>Modify the <code class="language-plaintext highlighter-rouge">getRosParams()</code> method in the appropriate implementation of ComponentInterface (e.g. UbloxNode, UbloxFirmware8, HpgRefProduct, etc.) and get the parameter. Group multiple related parameters into a namespace. Use all lower case names for parameters and namespaces separated with underscores.
    <ul>
      <li>If the type is an unsigned integer (of any size) or vector of unsigned integers, use the <code class="language-plaintext highlighter-rouge">ublox_node::getRosUint</code> method which will verify the bounds of the parameter.</li>
      <li>If the type is an int8 or int16 or vector of int8’s or int16’s, use the <code class="language-plaintext highlighter-rouge">ublox_nod::getRosInt</code> method which will verify the bounds of the parameter. (This method can also be used for int32’s but ROS has methods to get int32 parameters as well).</li>
    </ul>
  </li>
  <li>If the parameter is used during configuration also modify the <code class="language-plaintext highlighter-rouge">ComponentInterface</code>’s <code class="language-plaintext highlighter-rouge">configureUblox()</code> method to send the appropriate configuration message. Do not send configuration messages in <code class="language-plaintext highlighter-rouge">getRosParams()</code>.</li>
  <li>Modify this README file and add the parameter name and description in the appropriate section. State whether there is a default value or if the parameter is required.</li>
  <li>Modify one of the sample <code class="language-plaintext highlighter-rouge">.yaml</code> configuration files in <code class="language-plaintext highlighter-rouge">ublox_gps/config</code> to include the parameter or add a new sample <code class="language-plaintext highlighter-rouge">.yaml</code> for your device.</li>
</ol>

<h1 id="known-issues">Known Issues</h1>

<h2 id="unimplemented--untested-devices">Unimplemented / Untested Devices</h2>

<p><code class="language-plaintext highlighter-rouge">TimProduct</code> and <code class="language-plaintext highlighter-rouge">FtsProduct</code> are currently unimplemented skeleton classes. <code class="language-plaintext highlighter-rouge">AdrUdrProduct</code> is implemented, with the exception of <code class="language-plaintext highlighter-rouge">initializeRosDiagnostics()</code> and has not been tested on hardware.</p>

<p><code class="language-plaintext highlighter-rouge">UbloxFirmware7</code> has not been properly tested on a device with firmware version 7. <code class="language-plaintext highlighter-rouge">UbloxFirmware6</code> has been tested on a device with firmware version 8, but not with firmware version 6.</p>

<h2 id="debugging">Debugging</h2>

<p>For debugging messages set the debug parameter to &gt; 0. The range for debug is 0-4. At level 1 it prints configuration messages and checksum errors, at level 2 it also prints ACK/NACK messages and sent messages. At level 3 it prints the received bytes being decoded by a specific message reader. At level 4 it prints the incoming buffer before it is split by message header.</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<ol>
  <li>Why can’t the ublox_gps node open my device, even though I have correctly specified the path in <code class="language-plaintext highlighter-rouge">/dev</code>?
    <ul>
      <li>Make sure you are the owner of the device, or a member of <code class="language-plaintext highlighter-rouge">dialout</code> group.</li>
    </ul>
  </li>
</ol>

<h1 id="links">Links</h1>
<p>Consult the <a href="https://www.u-blox.com/sites/default/files/products/documents/u-blox8-M8_ReceiverDescrProtSpec_(UBX-13003221)_Public.pdf">official protocol spec</a> for details on packets supported by u-blox devices.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ublox">ublox</a> <small>repository</small></h3>
        <span class="label label-default">gps</span> <span class="label label-default">ublox</span> <span class="label label-default">ros</span> <span class="label label-default">ros-driver</span> <span class="label label-default">ublox-gps</span> 
        
        <a class="label label-primary pkg-label" href="/p/ublox">ublox</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_gps">ublox_gps</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_msgs">ublox_msgs</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_serialization">ublox_serialization</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-KumarRobotics-ublox
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-KumarRobotics-ublox" role="menuitem" tabindex="-1" href="/r/ublox/github-KumarRobotics-ublox" data="github-KumarRobotics-ublox">
                    <span class="glyphicon glyphicon-star"></span>
                    github-KumarRobotics-ublox
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">A driver for ublox gps</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/KumarRobotics/ublox.git">https://github.com/KumarRobotics/ublox.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">ros2</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-12-04
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">gps</span> <span class="label label-default">ublox</span> <span class="label label-default">ros</span> <span class="label label-default">ros-driver</span> <span class="label label-default">ublox-gps</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ublox/#kilted-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ublox/#kilted-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ublox/#kilted-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ublox">ublox</a></td>
                    <td>2.3.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_gps">ublox_gps</a></td>
                    <td>2.3.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_msgs">ublox_msgs</a></td>
                    <td>2.3.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_serialization">ublox_serialization</a></td>
                    <td>2.3.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="ublox">ublox</h1>
<p>The <code class="language-plaintext highlighter-rouge">ublox</code> package provides support for <a href="http://www.u-blox.com">u-blox</a> GPS receivers. Only the <em>serial</em> configuration of the driver is documented here, but TCP/UDP communication is also supported by the driver (untested).</p>

<p>The driver was originally written by Johannes Meyer. Changes made later are detailed in the version history below.</p>

<h2 id="options">Options</h2>

<p>Example .yaml configuration files are included in <code class="language-plaintext highlighter-rouge">ublox_gps/config</code>. Consult the u-blox documentation for your device for the recommended settings.</p>

<p>The <code class="language-plaintext highlighter-rouge">ublox_gps</code> node supports the following parameters for all products and firmware versions:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">device</code>: Path to the device port. Defaults to <code class="language-plaintext highlighter-rouge">/dev/ttyACM0</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">raw_data</code>: Whether the device is a raw data product. Defaults to false. Firmware &lt;= 7.03 only.</li>
  <li>
<code class="language-plaintext highlighter-rouge">load</code>: Parameters for loading the configuration to non-volatile memory. See <code class="language-plaintext highlighter-rouge">ublox_msgs/CfgCFG.msg</code>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">load/mask</code>: uint32_t. Mask of the configurations to load.</li>
      <li>
<code class="language-plaintext highlighter-rouge">load/device</code>: uint32_t. Mask which selects the devices for the load command.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">save</code>: Parameters for saving the configuration to non-volatile memory. See <code class="language-plaintext highlighter-rouge">ublox_msgs/CfgCFG.msg</code>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">save/mask</code>: uint32_t. Mask of the configurations to save.</li>
      <li>
<code class="language-plaintext highlighter-rouge">save/device</code>: uint32_t. Mask which selects the devices for the save command.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">uart1/baudrate</code>: Bit rate of the serial communication. Defaults to 9600.</li>
  <li>
<code class="language-plaintext highlighter-rouge">uart1/in</code>: UART1 in communication protocol. Defaults to UBX, NMEA &amp; RTCM. See <code class="language-plaintext highlighter-rouge">CfgPRT</code> message for possible values.</li>
  <li>
<code class="language-plaintext highlighter-rouge">uart1/out</code>: UART1 out communication protocol. Defaults to UBX, NMEA &amp; RTCM. See <code class="language-plaintext highlighter-rouge">CfgPRT</code> message for possible values.</li>
  <li>
<code class="language-plaintext highlighter-rouge">frame_id</code>: ROS name prepended to frames produced by the node. Defaults to <code class="language-plaintext highlighter-rouge">gps</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">rate</code>: Rate in Hz of measurements. Defaults to 4.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nav_rate</code>: How often navigation solutions are published in number of measurement cycles. Defaults to 1.</li>
  <li>
<code class="language-plaintext highlighter-rouge">enable_ppp</code>: Enable precise-point-positioning system. Defaults to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">gnss/sbas</code>: Enable satellite-based augmentation system. Defaults to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sbas/max</code>: Maximum number of SBAS channels. Defaults to 0.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sbas/usage</code>: See <code class="language-plaintext highlighter-rouge">CfgSBAS</code> message for details. Defaults to 0.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dynamic_model</code>: Possible values below. Defaults to <code class="language-plaintext highlighter-rouge">portable</code>. See u-blox documentation for further description.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">portable</code></li>
      <li><code class="language-plaintext highlighter-rouge">stationary</code></li>
      <li><code class="language-plaintext highlighter-rouge">pedestrian</code></li>
      <li><code class="language-plaintext highlighter-rouge">automotive</code></li>
      <li><code class="language-plaintext highlighter-rouge">sea</code></li>
      <li>
<code class="language-plaintext highlighter-rouge">airborne1</code>: Airborne, max acceleration = 1G</li>
      <li>
<code class="language-plaintext highlighter-rouge">airborne2</code>: Airborne, max acceleration = 2G</li>
      <li>
<code class="language-plaintext highlighter-rouge">airborne4</code>: Airborne, max acceleration = 4G</li>
      <li><code class="language-plaintext highlighter-rouge">wristwatch</code></li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">fix_mode</code>: Type of fixes supported: <code class="language-plaintext highlighter-rouge">2d</code>, <code class="language-plaintext highlighter-rouge">3d</code> or <code class="language-plaintext highlighter-rouge">both</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dr_limit</code>: Max time in seconds to use dead reckoning after signal is lost. Defaults to 0.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dat</code>: Configuring the datum type (optional). See the CfgDAT message.
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">dat/set</code>: If true, the node will the datum based on the parameters below (required if true). Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/majA</code>: Semi-major Axis [m]</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/flat</code>: 1.0 / Flattening</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/shift</code>: [X-axis, Y-axis, Z-axis] shift [m]</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/rot</code>: [X, Y, Z] rotation [s]</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/scale</code>: scale change [ppm]</li>
    </ul>
  </li>
</ul>

<h3 id="for-firmware-version-6">For firmware version 6:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/set</code>: If true, the NMEA will be configured with the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/version</code>: NMEA version. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/num_sv</code>: Maximum Number of SVs to report per TalkerId. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/compat</code>: Enable compatibility mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/consider</code>: Enable considering mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/filter</code>: Namespace for filter flags.
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/pos</code>: Disable position filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/msk_pos</code>: Disable masked position filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/time</code>: Disable time filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/date</code>: Disable date filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/sbas</code>: Enable SBAS filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/track</code>: Disable track filtering. Defaults to false.</li>
    </ul>
  </li>
</ul>

<h3 id="for-devices-with-firmware--7">For devices with firmware &gt;= 7:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">gnss</code> parameters:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/gps</code>: Enable GPS receiver. Defaults to true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/glonass</code>: Enable GLONASS receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/beidou</code>: Enable BeiDou receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/qzss</code>: Enable QZSS receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/qzss_sig_cfg</code>: QZSS signal configuration. Defaults to L1CA. See <code class="language-plaintext highlighter-rouge">CfgGNSS</code> message for constants.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea</code> parameters:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/set</code>: If true, the NMEA will be configured.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/version</code>: NMEA version. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/num_sv</code>: Maximum Number of SVs to report per TalkerId. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/sv_numbering</code>: Configures the display of satellites that do not have an NMEA-defined value. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/compat</code>: Enable compatibility mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/consider</code>: Enable considering mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/limit82</code>: Enable strict limit to 82 characters maximum. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/high_prec</code>: Enable high precision mode. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter</code>: Namespace for filter flags.
        <ul>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/pos</code>: Enable position output for failed or invalid fixes. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/msk_pos</code>: Enable position output for invalid fixes. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/time</code>: Enable time output for invalid times. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/date</code>: Enable date output for invalid dates. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/gps_only</code>: Restrict output to GPS satellites only. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/track</code>: Enable COG output even if COG is frozen. Defaults to false.</li>
        </ul>
      </li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt</code>: Filters out satellites based on their GNSS.
        <ul>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/gps</code>: Disable reporting of GPS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/sbas</code>: Disable reporting of SBAS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/qzss</code>: Disable reporting of QZSS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/glonass</code>: Disable reporting of GLONASS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/beidou</code>: Disable reporting of BeiDou satellites. Defaults to false.</li>
        </ul>
      </li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/main_talker_id</code>: This field enables the main Talker ID to be overridden. Defaults to 0.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/gsv_talker_id</code>:  This field enables the GSV Talker ID to be overridden. Defaults to [0, 0].</li>
    </ul>
  </li>
</ul>

<h3 id="for-devices-with-firmware--8">For devices with firmware &gt;= 8:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">save_on_shutdown</code>: If true, the node will send a <code class="language-plaintext highlighter-rouge">UBX-UPD-SOS</code> command to save the BBR to flash memory on shutdown. Defaults to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">clear_bbr</code>: If true, the node will send a <code class="language-plaintext highlighter-rouge">UBX-UPD-SOS</code> command to clear the flash memory during configuration. Defaults to false.</li>
  <li>Additional <code class="language-plaintext highlighter-rouge">gnss</code> params
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/galileo</code>: Enable Galileo receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/imes</code>: Enable IMES receiver. Defaults to false.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/bds_talker_id</code>: (See other NMEA configuration parameters above) Sets the two characters that should be used for the BeiDou Talker ID.</li>
</ul>

<h3 id="for-udradr-devices">For UDR/ADR devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">use_adr</code>: Enable ADR/UDR. Defaults to true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nav_rate</code> should be set to 1 Hz.</li>
</ul>

<h3 id="for-hpg-reference-devices">For HPG Reference devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">tmode3</code>: Time Mode. Required. See CfgTMODE3 for constants.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/lla_flag</code>: True if the Fixed position is in Lat, Lon, Alt coordinates. False if ECEF. Required if <code class="language-plaintext highlighter-rouge">tmode3</code> is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/position</code>: Antenna Reference Point position in [m] or [deg]. Required if <code class="language-plaintext highlighter-rouge">tmode3</code> is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/position_hp</code>: Antenna Reference Point High Precision position in [0.1 mm] or [deg * 1e-9]. Required if tmode3 is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/acc</code>: Fixed position accuracy in [m]. Required if <code class="language-plaintext highlighter-rouge">tmode3</code> is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sv_in/reset</code>: Whether or not to reset the survey in upon initialization. If false, it will only reset if the TMODE is disabled. Defaults to true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sv_in/min_dur</code>: The minimum Survey-In Duration time in seconds. Required tmode3 is set to survey in.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sv_in/acc_lim</code>: The minimum accuracy level of the survey in position in meters. Required <code class="language-plaintext highlighter-rouge">tmode3</code> is set to survey in.</li>
</ul>

<h3 id="for-hpg-rover-devices">For HPG Rover devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">dgnss_mode</code>: The Differential GNSS mode. Defaults to RTK FIXED. See <code class="language-plaintext highlighter-rouge">CfgDGNSS</code> message for constants.</li>
</ul>

<h3 id="for-tim-devices">For TIM devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">tim_tm2</code>: Enable this message for GPS time-stamps everytime an external interrupt signal is received.</li>
</ul>

<h3 id="for-fts-devices">For FTS devices:</h3>
<ul>
  <li>currently unimplemented. See <code class="language-plaintext highlighter-rouge">FtsProduct</code> class in <code class="language-plaintext highlighter-rouge">ublox_gps</code> package <code class="language-plaintext highlighter-rouge">node.h</code> &amp; <code class="language-plaintext highlighter-rouge">node.cpp</code> files.</li>
</ul>

<h2 id="fix-topics">Fix Topics</h2>

<p><code class="language-plaintext highlighter-rouge">~fix</code>(<a href="http://docs.ros.org/api/sensor_msgs/html/msg/NavSatFix.html">sensor_msgs/NavSatFix</a>)</p>

<p>Navigation Satellite fix.</p>

<p><code class="language-plaintext highlighter-rouge">~fix_velocity</code>(<a href="http://docs.ros.org/jade/api/geometry_msgs/html/msg/TwistWithCovarianceStamped.html">geometry_msgs/TwistWithCovarianceStamped</a>)</p>

<p>Velocity in local ENU frame.</p>

<h2 id="inf-messages">INF messages</h2>
<p>To enable printing INF messages to the ROS console, set the parameters below.</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">inf/all</code>: This is the default value for the INF parameters below, which enable printing u-blox <code class="language-plaintext highlighter-rouge">INF</code> messages to the ROS console. It defaults to true. Individual message types can be turned off by setting their corresponding parameter to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/debug</code>: Whether to configure the UBX and NMEA ports to send Debug messages and print received <code class="language-plaintext highlighter-rouge">INF-Debug</code> messages to <code class="language-plaintext highlighter-rouge">ROS_DEBUG</code> console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/error</code>: Whether to enable Error messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Error</code> messages to <code class="language-plaintext highlighter-rouge">ROS_ERROR</code> console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/notice</code>: Whether to enable Notice messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Notice messages to </code>ROS_INFO` console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/test</code>: Whether to enable Test messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Test</code> messages to <code class="language-plaintext highlighter-rouge">ROS_INFO</code> console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/warning</code>: Whether to enable Warning messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Warning</code> messages to the <code class="language-plaintext highlighter-rouge">ROS_WARN</code> console.</li>
</ul>

<h2 id="additional-topics">Additional Topics</h2>
<p>To publish a given u-blox message to a ROS topic, set the parameter shown below to true. The node sets the rate of the u-blox messages to 1 measurement cycle.</p>

<h3 id="all-messages">All messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/all</code>: This is the default value for <code class="language-plaintext highlighter-rouge">publish/&lt;class&gt;/all</code> parameters below. It defaults to false. Individual message classes and messages can be enabled or disabled by setting the parameters described below to false.</li>
</ul>

<h3 id="aid-messages">AID messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/aid/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/alm</code>: Topic <code class="language-plaintext highlighter-rouge">~aidalm</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/eph</code>: Topic <code class="language-plaintext highlighter-rouge">~aideph</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/hui</code>: Topic <code class="language-plaintext highlighter-rouge">~aidhui</code>
</li>
</ul>

<h3 id="rxm-messages">RXM messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/rxm/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/alm</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmalm</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/eph</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmeph</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/raw</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmraw</code>. Type is either <code class="language-plaintext highlighter-rouge">RxmRAW</code> or <code class="language-plaintext highlighter-rouge">RxmRAWX</code> depending on firmware version.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/rtcm</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmrtcm</code>. <strong>Firmware &gt;= 8 only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/sfrb</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmsfrb</code>. Type is either <code class="language-plaintext highlighter-rouge">RxmSFRB</code> or <code class="language-plaintext highlighter-rouge">RxmSFRBX</code> depending on firmware version.</li>
</ul>

<h3 id="mon-messages">MON messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/mon/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/mon/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/mon/hw</code>: Topic <code class="language-plaintext highlighter-rouge">~monhw</code>
</li>
</ul>

<h3 id="nav-messages">NAV messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/mon/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/att</code>: Topic <code class="language-plaintext highlighter-rouge">~navatt</code>. <strong>ADR/UDR devices only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/clock</code>: Topic <code class="language-plaintext highlighter-rouge">~navclock</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/posecef</code>: Topic <code class="language-plaintext highlighter-rouge">~navposecef</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/posllh</code>: Topic <code class="language-plaintext highlighter-rouge">~navposllh</code>. <strong>Firmware &lt;= 6 only.</strong> For firmware 7 and above, see NavPVT</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/pvt</code>: Topic <code class="language-plaintext highlighter-rouge">~navpvt</code>. <strong>Firmware &gt;= 7 only.</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/relposned</code>: Topic <code class="language-plaintext highlighter-rouge">~navrelposned</code>. <strong>HPG Rover devices only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/heading</code>: Topic <code class="language-plaintext highlighter-rouge">~navheading</code>. <strong>HP Position receiver devices only.</strong> For firmware 9 and above</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/sat</code>: Topic <code class="language-plaintext highlighter-rouge">~navsat</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/sol</code>: Topic <code class="language-plaintext highlighter-rouge">~navsol</code>. <strong>Firmware &lt;= 6 only.</strong> For firmware 7 and above, see NavPVT</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/status</code>: Topic <code class="language-plaintext highlighter-rouge">~navstatus</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/svin</code>: Topic <code class="language-plaintext highlighter-rouge">~navsvin</code>. <strong>HPG Reference Station Devices only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/svinfo</code>: Topic <code class="language-plaintext highlighter-rouge">~navsvinfo</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/velned</code>: Topic <code class="language-plaintext highlighter-rouge">~navvelned</code>. <strong>Firmware &lt;= 6 only.</strong> For firmware 7 and above, see NavPVT</li>
</ul>

<h3 id="esf-messages">ESF messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/esf/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code> for <strong>ADR/UDR devices</strong>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/ins</code>: Topic <code class="language-plaintext highlighter-rouge">~esfins</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/meas</code>: Topic <code class="language-plaintext highlighter-rouge">~esfmeas</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/raw</code>: Topic <code class="language-plaintext highlighter-rouge">~esfraw</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/status</code>: Topic <code class="language-plaintext highlighter-rouge">~esfstatus</code>
</li>
</ul>

<h3 id="hnr-messages">HNR messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/hnr/pvt</code>: Topic <code class="language-plaintext highlighter-rouge">~hnrpvt</code>. <strong>ADR/UDR devices only</strong>
</li>
</ul>

<h3 id="tim-messages">TIM messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/tim/tm2</code>: Topic <code class="language-plaintext highlighter-rouge">timtm2</code>. <strong>TIM devices only</strong>
</li>
</ul>

<h2 id="launch">Launch</h2>

<p>A sample launch file <code class="language-plaintext highlighter-rouge">ublox_device.launch</code> loads the parameters from a <code class="language-plaintext highlighter-rouge">.yaml</code> file in the <code class="language-plaintext highlighter-rouge">ublox_gps/config</code> folder, sample configuration files are included. The required arguments are <code class="language-plaintext highlighter-rouge">node_name</code> and <code class="language-plaintext highlighter-rouge">param_file_name</code>.
The two topics to which you should subscribe are <code class="language-plaintext highlighter-rouge">~fix</code> and <code class="language-plaintext highlighter-rouge">~fix_velocity</code>. The angular component of <code class="language-plaintext highlighter-rouge">fix_velocity</code> is unused.</p>

<h1 id="version-history">Version history</h1>

<ul>
  <li>
<strong>1.1.4</strong>:
    <ul>
      <li>Added messages for firmware 9: <code class="language-plaintext highlighter-rouge">NavRELPOSNED9</code>.</li>
      <li>Added option to publish <code class="language-plaintext highlighter-rouge">sensor_msgs/Imu</code> message for High Precision Position Receiver devices with firmware version &gt;= 9 for moving base applications (For example ZED-F9P; <a href="https://www.u-blox.com/sites/default/files/ZED-F9P-MovingBase_AppNote_%28UBX-19009093%29.pdf">UBX-19009093 AppNote</a>).</li>
    </ul>
  </li>
  <li>
<strong>1.1.3</strong>:
    <ul>
      <li>Update by TUC-ProAut</li>
      <li>Added raw data stream output. To publish ros messages set rosparam <code class="language-plaintext highlighter-rouge">raw_data_stream/publish</code> to true. To store to a logfile set rosparam <code class="language-plaintext highlighter-rouge">set raw_data_stream/dir</code> to the appropriated directory. This feature has nothing todo with Raw Data Products.</li>
      <li>Added flag <code class="language-plaintext highlighter-rouge">config_on_startup</code> to deactivate configuration of ublox.</li>
    </ul>
  </li>
  <li>
<strong>1.1.2</strong>:
    <ul>
      <li>BUG FIX for NavSatFix messages for firmware &gt;=7. The NavSatFix now only uses the NavPVT message time if it is valid, otherwise it uses ROS time.</li>
      <li>BUG FIX for TMODE3 Fixed mode configuration. The ARP High Precision position is now configured correctly.</li>
      <li>BUG FIX for <code class="language-plaintext highlighter-rouge">NavDGPS</code> message which had the wrong Message ID.</li>
      <li>After GNSS configuration &amp; reset, I/O resets automatically, without need for restart.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">UBX-UPD</code> messages. For firmware version 8, the node can now save the flash memory on shutdown and clear the flash memory during configuration based on ROS params.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">CfgGPS</code> message and <code class="language-plaintext highlighter-rouge">MonHW6</code> message for firmware version 6.</li>
      <li>Added respawn parameters to example launch file.</li>
      <li>Added parameters to load/save configuration.</li>
      <li>Added raw_data parameter for Raw Data Products.</li>
      <li>Changed name of “subscribe” parameter namespace to “publish” for clarity.</li>
      <li>Migrated all callback handling to <code class="language-plaintext highlighter-rouge">callback.h</code> from <code class="language-plaintext highlighter-rouge">gps.h</code> and <code class="language-plaintext highlighter-rouge">gps.cpp</code>. ACK messages are now processed through callback handlers.</li>
      <li>Modified how the I/O stream is initialized so that the node now handles parsing the port string.</li>
      <li>Changed class names of Ublox product components (e.g. UbloxTim -&gt; TimProduct) for clarity.</li>
      <li>Cleaned up ublox custom serialization classes by adding typedefs and using count to determine repeating block statements instead of using try-catch statements to serialize stream.</li>
      <li>Added doxygen documentation</li>
    </ul>
  </li>
  <li>
<strong>1.1.1</strong>:
    <ul>
      <li>BUG FIX for acknowledgments. The last received ack message was accessed by multiple threads but was not atomic. This variable is now thread safe.</li>
      <li>BUG FIX for GNSS configuration for Firmware 8, the GNSS configuration is now verified &amp; modified properly.</li>
      <li>BUG FIX for fix diagnostics. NumSV was displaying incorrectly. For firmware versions &gt;=7, the NavPVT flags variable is now compared to the constants from the NavPVT message not NavSOL.</li>
      <li>Removed ublox_version param, value is now determined by parsing MonVER.</li>
      <li>Organized parameters into namespaces.</li>
      <li>Better parameter checking. Checks that unsigned ints and vectors of unsigned ints are in bounds.</li>
      <li>Changed rtcm/rate parameter to a vector instead of a scalar, now each RTCM id can be set to a different rate.</li>
      <li>Diagnostic variables are displayed more clearly with units included.</li>
      <li>For HPG Rovers, added diagnostic updater for Carrier Phase Solution.</li>
      <li>Added CfgNMEA messages for each firmware version and a CfgDAT message, as well as parameters to configure the NMEA and Datum.</li>
      <li>Added constants for NavSAT_SV flags bit mask.</li>
    </ul>
  </li>
  <li>
<strong>1.1.0</strong>:
    <ul>
      <li>BUG FIX for NAV-PVT messages for firmware 7. The NAV-PVT message is shorter for firmware version 7, the new message is <code class="language-plaintext highlighter-rouge">NavPVT7</code>
</li>
      <li>BUG FIX for SBAS configuration, it now configures SBAS only if the device is SBAS capable. Previously, if enable_sbas was set to false, it would not configure, meaning that SBAS could not be turned off.</li>
      <li>BUG FIX, the baudrate of the serial I/O port was not configured correctly, on the device it was set to the user desired settings, but on the computer it was always set to 4800.</li>
      <li>BUG FIX, Diagnostics for Nav Status are now updated in firmware version 6.</li>
      <li>BUG FIX, The method which waited for ACKs now checks if the ACK is from the correct class and message ID.</li>
      <li>Added messages for <code class="language-plaintext highlighter-rouge">CfgTMODE3</code>, <code class="language-plaintext highlighter-rouge">CfgHNR</code>, <code class="language-plaintext highlighter-rouge">CfgRST</code>, <code class="language-plaintext highlighter-rouge">CfgINF</code>, <code class="language-plaintext highlighter-rouge">NavATT</code>, <code class="language-plaintext highlighter-rouge">ESF</code> messages, <code class="language-plaintext highlighter-rouge">Inf</code> message (for all INF types), <code class="language-plaintext highlighter-rouge">HnrPVT</code>, <code class="language-plaintext highlighter-rouge">MgaGAL</code>, <code class="language-plaintext highlighter-rouge">NavSAT</code>, <code class="language-plaintext highlighter-rouge">MonHw</code>, <code class="language-plaintext highlighter-rouge">NavPVT7</code> (for firmware version 7).</li>
      <li>Restructured Node class so that it now uses composition. The main node contains instances of classes which implement <code class="language-plaintext highlighter-rouge">UBloxInterface</code>, and calls the methods for each interface added to the node. The classes which implement the interface add new features that are not generic to all firmware versions or products. Each firmware version (6-8) has an interface, and each product category has one (SPG, HPG REF, HPG ROV, TIM, FTS, ADR/UDR). The product type is determined from parsing the <code class="language-plaintext highlighter-rouge">MonVER</code> message.</li>
      <li>Added implementations of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> called <code class="language-plaintext highlighter-rouge">UbloxHpgRef</code> and <code class="language-plaintext highlighter-rouge">UbloxHpgRov</code> for HPG reference station and rover devices. The reference station tmode3 can be configured upon startup (see Options section) and the rover dgnss mode can be set. After survey in, once the reference station entire time mode, the nav_rate is set to the user desired value (it must be 1 Hz during survey-in) and the RTCM output messages are enabled. The state can be monitored through the rqt_runtime_monitor. These classes were tested on C94-M8P devices.</li>
      <li>Added an implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> called <code class="language-plaintext highlighter-rouge">UbloxAdrUdr</code> for ADR/UDR devices. It which subscribes to <code class="language-plaintext highlighter-rouge">NavATT</code> and ESF messages and configures useAdr. The diagnostics monitor specific to these devices is not implemented. This class has not been tested on a hardware device.</li>
      <li>Added a partial implementation of <code class="language-plaintext highlighter-rouge">UbloxTim</code> for TIM devices which subscribes to <code class="language-plaintext highlighter-rouge">RxmRAWX</code> and <code class="language-plaintext highlighter-rouge">RxmSFRBX</code> messages. The <code class="language-plaintext highlighter-rouge">getRosParams()</code>, <code class="language-plaintext highlighter-rouge">configureUblox()</code>, and <code class="language-plaintext highlighter-rouge">initializeDiagnostics()</code> methods are unimplemented.</li>
      <li>Added a skeleton class for <code class="language-plaintext highlighter-rouge">UbloxFts</code> for FTS devices which is unimplemented. See the <code class="language-plaintext highlighter-rouge">ublox_gps</code> <code class="language-plaintext highlighter-rouge">node.cpp</code> and <code class="language-plaintext highlighter-rouge">node.h</code> files.</li>
      <li>Changed how GNSS is configured in firmware version 8. The documentation recommends a cold restart after reconfiguring the GNSS, and will reset the device if it receives a <code class="language-plaintext highlighter-rouge">CfgGNSS</code> message, even if the settings do not change. For firmware version 8, before reconfiguring, the node first checks if the current GNSS settings are the same as the desired settings. If so, it will not send a CfgGNSS message to the device. After reconfiguring, it will cold reset the GNSS.</li>
      <li>Migrated I/O initialization to the <code class="language-plaintext highlighter-rouge">Gps</code> class from the <code class="language-plaintext highlighter-rouge">Node</code> class.</li>
      <li>INF messages are now printed to the ROS console.</li>
      <li>Changed how debug statements are displayed. If the debug parameter is set to 1 or greater, it prints debug messages.</li>
    </ul>
  </li>
  <li>
<strong>1.0.0</strong>:
    <ul>
      <li>Added messages for firmware 8: <code class="language-plaintext highlighter-rouge">NavPVT</code>, <code class="language-plaintext highlighter-rouge">RxmRAWX</code>, <code class="language-plaintext highlighter-rouge">RxmSFRBX</code>.</li>
      <li>Modified ConfigGNSS and MonVER to include repeated blocks and added 
ConfigGNSS_Block (configures all GNSS at once) and MonVER_Extension 
(for MonVER_Char blocks).</li>
      <li>MonVER info is now published upon initialization.</li>
      <li>Fixed SBAS crashing issue (node crashed if device didn’t have SBAS 
capabilities)</li>
      <li>Modified remaining messages to update to firmware 8</li>
      <li>Added <code class="language-plaintext highlighter-rouge">UbloxNode</code> abstract class which does all previous node functions which 
are the same for all firmware versions. Added subclasses which do functions
specific to a given firmware version (e.g. subscribing to NavPVT messages).</li>
      <li>Added a read lock to AsyncWorker</li>
      <li>Removed hard-coded values from <code class="language-plaintext highlighter-rouge">Gps</code> and <code class="language-plaintext highlighter-rouge">Node</code> classes specific to a certain 
device and changed them to configurable parameters. Modified example
launch file accordingly.</li>
      <li>Added example parameter yaml files and launch file to load parameters from
this file.</li>
      <li>Moved implementations of Callback functions into <code class="language-plaintext highlighter-rouge">callback.h</code> (from <code class="language-plaintext highlighter-rouge">gps.h</code> 
and <code class="language-plaintext highlighter-rouge">gps.cpp</code>)</li>
      <li>Updated formatting of some files per google style guide spec (e.g. 80 chars
per line).</li>
    </ul>
  </li>
  <li>
<strong>0.0.5</strong>:
    <ul>
      <li>Reformat files under <code class="language-plaintext highlighter-rouge">ublox_gps</code>
</li>
    </ul>
  </li>
  <li>
<strong>0.0.4</strong>:
    <ul>
      <li>Added install targets.</li>
    </ul>
  </li>
  <li>
<strong>0.0.3</strong>:
    <ul>
      <li>Added the <code class="language-plaintext highlighter-rouge">enable_glonass</code>, <code class="language-plaintext highlighter-rouge">enable_beidou</code> and <code class="language-plaintext highlighter-rouge">enable_ppp</code> options.</li>
      <li>Added the <code class="language-plaintext highlighter-rouge">ublox_version</code> option. Consult known issues for important details.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">numSVs</code> field to the RQT monitor.</li>
    </ul>
  </li>
  <li>
<strong>0.0.2</strong>:
    <ul>
      <li>Changed <code class="language-plaintext highlighter-rouge">meas_rate</code> to simply <code class="language-plaintext highlighter-rouge">rate</code>, which is in Hz. <code class="language-plaintext highlighter-rouge">meas_rate</code> is computed automatically.</li>
    </ul>
  </li>
  <li>
<strong>0.0.1</strong>:
    <ul>
      <li>All topics are now published on a private node handle.</li>
      <li>Velocities are published as stamped twist messages with covariance. Angular components are unused.</li>
      <li>
<code class="language-plaintext highlighter-rouge">hAcc</code>, <code class="language-plaintext highlighter-rouge">vAcc</code> and <code class="language-plaintext highlighter-rouge">sAcc</code> are used to generate diagonal covariances.</li>
      <li>Velocities use the correct convention: X-Y-Z = East-North-Up.</li>
      <li>2D <strong>or</strong> 3D fix correspond to <code class="language-plaintext highlighter-rouge">STATUS_FIX</code> (previously only 3D).</li>
      <li>
<code class="language-plaintext highlighter-rouge">fix</code> and <code class="language-plaintext highlighter-rouge">fix_velocity</code> are time-stamped synchronously, using the <code class="language-plaintext highlighter-rouge">iTOW</code> to check arrival times.</li>
      <li>Added options for changing the CFG-NAV5 settings (see above).</li>
      <li>Added support for <code class="language-plaintext highlighter-rouge">diagnostic_updater</code>.</li>
      <li>
<em>“received ACK”</em> messages are elevated to debug level 2.</li>
      <li>Corrected issue where baudrate was not set correctly using rosparam.</li>
      <li>Corrected issue where socket destructors were not called.</li>
    </ul>
  </li>
  <li>
<strong>0.0.0</strong>:
    <ul>
      <li>Forked from https://github.com/tu-darmstadt-ros-pkg/ublox</li>
      <li>Updated to use catkin.</li>
    </ul>
  </li>
</ul>

<h1 id="adding-new-features">Adding new features</h1>
<h2 id="adding-new-messages">Adding new messages</h2>
<ol>
  <li>
    <p>Create the .msg file and add it to <code class="language-plaintext highlighter-rouge">ublox_msgs/msg</code>. Make sure the file includes the constants <code class="language-plaintext highlighter-rouge">CLASS_ID</code> and <code class="language-plaintext highlighter-rouge">MESSAGE_ID</code>.</p>
  </li>
  <li>
    <p>Modify <code class="language-plaintext highlighter-rouge">ublox_msgs/include/ublox_msgs/ublox_msgs.h</code>. 
a. Include the message header. 
b. Make sure the message’s class constant is declared in the <code class="language-plaintext highlighter-rouge">ublox_msgs::Class</code> namespace. 
c. Declare the message’s ID constant in the <code class="language-plaintext highlighter-rouge">ublox_messages::Message::&lt;CLASS_NAME&gt;</code> namespace.</p>
  </li>
  <li>
    <p>Declare the message in <code class="language-plaintext highlighter-rouge">ublox_msgs/src/ublox_msgs.cpp</code>.</p>
  </li>
  <li>
    <p>If the message has a repeated or optional block of varying size, create an additional message for the repeating block and include it in the message. 
a. Include the block message in the <code class="language-plaintext highlighter-rouge">ublox_msgs/include/ublox_msgs/ublox_msgs.h</code> file. 
b. Modify <code class="language-plaintext highlighter-rouge">ublox_msgs/include/ublox/serialization/ublox_msgs.h</code> and add a custom <code class="language-plaintext highlighter-rouge">Serializer</code>. If the message doesn’t include the number of repeating/optional blocks as a parameter, you can infer it from the count/size of the message, which is the length of the payload.</p>
  </li>
  <li>
    <p>Modify <code class="language-plaintext highlighter-rouge">ublox_gps/src/node.cpp</code> (and the header file if necessary) to either subscribe to the message or send the configuration message. Be sure to modify the appropriate subscribe function. For messages which apply to all firmware/hardware, modify <code class="language-plaintext highlighter-rouge">UbloxNode::subscribe()</code>. Otherwise modify the appropriate firmware or hardware’s subscribe function, e.g. <code class="language-plaintext highlighter-rouge">UbloxFirmware8::subscribe()</code>, <code class="language-plaintext highlighter-rouge">HpgRovProduct::subscribe()</code>. If the message is a configuration message, consider modifying <code class="language-plaintext highlighter-rouge">ublox_gps/src/gps.cpp</code> (and the header file) to add a configuration function.</p>
  </li>
</ol>

<h3 id="one-message-protocol-for-multiple-ids-eg-inf-message">One message protocol for multiple IDs (e.g. INF message)</h3>
<p>If a given message protocol applies to multiple message IDs (e.g. the <code class="language-plaintext highlighter-rouge">Inf</code> message), do not include the message ID in the message itself.
When declaring the message, for the first declaration, use <code class="language-plaintext highlighter-rouge">DECLARE_UBLOX_MESSAGE</code> macro. For the following declarations use the <code class="language-plaintext highlighter-rouge">DECLARE_UBLOX_MESSAGE_ID</code> macro.</p>

<h2 id="adding-device--firmware-specific-functionality">Adding device / firmware specific functionality</h2>

<p>The <code class="language-plaintext highlighter-rouge">node.cpp</code> file in <code class="language-plaintext highlighter-rouge">ublox_gps</code> contains a main Node class called UbloxNode which acts as the ROS Node and handles the node initialization, publishers, and diagnostics. <code class="language-plaintext highlighter-rouge">UbloxNode</code> contains a vector <code class="language-plaintext highlighter-rouge">components_</code> of instances of <code class="language-plaintext highlighter-rouge">ComponentInterface</code>. The <code class="language-plaintext highlighter-rouge">UbloxNode::initialize()</code> calls each component’s public interface methods. The node contains components for both the firmware version and the product category, which are added after parsing the <code class="language-plaintext highlighter-rouge">MonVER</code> message. Any class which implements <code class="language-plaintext highlighter-rouge">ComponentInterface</code> can be added to the <code class="language-plaintext highlighter-rouge">UbloxNode</code> <code class="language-plaintext highlighter-rouge">components_</code> vector and its methods will be called by <code class="language-plaintext highlighter-rouge">UbloxNode</code>. Simply add an implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> to the ublox_gps <code class="language-plaintext highlighter-rouge">node.h</code> and <code class="language-plaintext highlighter-rouge">node.cpp</code> files. Behavior specific to a given firmware or product should not be implemented in the <code class="language-plaintext highlighter-rouge">UbloxNode</code> class and instead should be implemented in an implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code>.</p>

<p>Currently there are implementations of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> for firmware versions 6-8 and product categories <code class="language-plaintext highlighter-rouge">HpgRefProduct</code>, <code class="language-plaintext highlighter-rouge">HpgRovProduct</code>, <code class="language-plaintext highlighter-rouge">AdrUdrProduct</code>, <code class="language-plaintext highlighter-rouge">TimProduct</code>, <code class="language-plaintext highlighter-rouge">FtsProduct</code>.  SPG products do not have their own implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code>, since the Firmware classes implement all of the behavior of SPG devices.</p>

<p><code class="language-plaintext highlighter-rouge">HpgRefProduct</code> and <code class="language-plaintext highlighter-rouge">HpgRovProduct</code> have been tested on the C94-M8P device.</p>

<h2 id="adding-new-parameters">Adding new parameters</h2>
<ol>
  <li>Modify the <code class="language-plaintext highlighter-rouge">getRosParams()</code> method in the appropriate implementation of ComponentInterface (e.g. UbloxNode, UbloxFirmware8, HpgRefProduct, etc.) and get the parameter. Group multiple related parameters into a namespace. Use all lower case names for parameters and namespaces separated with underscores.
    <ul>
      <li>If the type is an unsigned integer (of any size) or vector of unsigned integers, use the <code class="language-plaintext highlighter-rouge">ublox_node::getRosUint</code> method which will verify the bounds of the parameter.</li>
      <li>If the type is an int8 or int16 or vector of int8’s or int16’s, use the <code class="language-plaintext highlighter-rouge">ublox_nod::getRosInt</code> method which will verify the bounds of the parameter. (This method can also be used for int32’s but ROS has methods to get int32 parameters as well).</li>
    </ul>
  </li>
  <li>If the parameter is used during configuration also modify the <code class="language-plaintext highlighter-rouge">ComponentInterface</code>’s <code class="language-plaintext highlighter-rouge">configureUblox()</code> method to send the appropriate configuration message. Do not send configuration messages in <code class="language-plaintext highlighter-rouge">getRosParams()</code>.</li>
  <li>Modify this README file and add the parameter name and description in the appropriate section. State whether there is a default value or if the parameter is required.</li>
  <li>Modify one of the sample <code class="language-plaintext highlighter-rouge">.yaml</code> configuration files in <code class="language-plaintext highlighter-rouge">ublox_gps/config</code> to include the parameter or add a new sample <code class="language-plaintext highlighter-rouge">.yaml</code> for your device.</li>
</ol>

<h1 id="known-issues">Known Issues</h1>

<h2 id="unimplemented--untested-devices">Unimplemented / Untested Devices</h2>

<p><code class="language-plaintext highlighter-rouge">TimProduct</code> and <code class="language-plaintext highlighter-rouge">FtsProduct</code> are currently unimplemented skeleton classes. <code class="language-plaintext highlighter-rouge">AdrUdrProduct</code> is implemented, with the exception of <code class="language-plaintext highlighter-rouge">initializeRosDiagnostics()</code> and has not been tested on hardware.</p>

<p><code class="language-plaintext highlighter-rouge">UbloxFirmware7</code> has not been properly tested on a device with firmware version 7. <code class="language-plaintext highlighter-rouge">UbloxFirmware6</code> has been tested on a device with firmware version 8, but not with firmware version 6.</p>

<h2 id="debugging">Debugging</h2>

<p>For debugging messages set the debug parameter to &gt; 0. The range for debug is 0-4. At level 1 it prints configuration messages and checksum errors, at level 2 it also prints ACK/NACK messages and sent messages. At level 3 it prints the received bytes being decoded by a specific message reader. At level 4 it prints the incoming buffer before it is split by message header.</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<ol>
  <li>Why can’t the ublox_gps node open my device, even though I have correctly specified the path in <code class="language-plaintext highlighter-rouge">/dev</code>?
    <ul>
      <li>Make sure you are the owner of the device, or a member of <code class="language-plaintext highlighter-rouge">dialout</code> group.</li>
    </ul>
  </li>
</ol>

<h1 id="links">Links</h1>
<p>Consult the <a href="https://www.u-blox.com/sites/default/files/products/documents/u-blox8-M8_ReceiverDescrProtSpec_(UBX-13003221)_Public.pdf">official protocol spec</a> for details on packets supported by u-blox devices.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ublox">ublox</a> <small>repository</small></h3>
        <span class="label label-default">gps</span> <span class="label label-default">ublox</span> <span class="label label-default">ros</span> <span class="label label-default">ros-driver</span> <span class="label label-default">ublox-gps</span> 
        
        <a class="label label-primary pkg-label" href="/p/ublox">ublox</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_gps">ublox_gps</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_msgs">ublox_msgs</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_serialization">ublox_serialization</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-KumarRobotics-ublox
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-KumarRobotics-ublox" role="menuitem" tabindex="-1" href="/r/ublox/github-KumarRobotics-ublox" data="github-KumarRobotics-ublox">
                    <span class="glyphicon glyphicon-star"></span>
                    github-KumarRobotics-ublox
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">A driver for ublox gps</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/KumarRobotics/ublox.git">https://github.com/KumarRobotics/ublox.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">ros2</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-12-04
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">gps</span> <span class="label label-default">ublox</span> <span class="label label-default">ros</span> <span class="label label-default">ros-driver</span> <span class="label label-default">ublox-gps</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ublox/#rolling-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ublox/#rolling-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ublox/#rolling-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ublox">ublox</a></td>
                    <td>2.3.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_gps">ublox_gps</a></td>
                    <td>2.3.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_msgs">ublox_msgs</a></td>
                    <td>2.3.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_serialization">ublox_serialization</a></td>
                    <td>2.3.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="ublox">ublox</h1>
<p>The <code class="language-plaintext highlighter-rouge">ublox</code> package provides support for <a href="http://www.u-blox.com">u-blox</a> GPS receivers. Only the <em>serial</em> configuration of the driver is documented here, but TCP/UDP communication is also supported by the driver (untested).</p>

<p>The driver was originally written by Johannes Meyer. Changes made later are detailed in the version history below.</p>

<h2 id="options">Options</h2>

<p>Example .yaml configuration files are included in <code class="language-plaintext highlighter-rouge">ublox_gps/config</code>. Consult the u-blox documentation for your device for the recommended settings.</p>

<p>The <code class="language-plaintext highlighter-rouge">ublox_gps</code> node supports the following parameters for all products and firmware versions:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">device</code>: Path to the device port. Defaults to <code class="language-plaintext highlighter-rouge">/dev/ttyACM0</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">raw_data</code>: Whether the device is a raw data product. Defaults to false. Firmware &lt;= 7.03 only.</li>
  <li>
<code class="language-plaintext highlighter-rouge">load</code>: Parameters for loading the configuration to non-volatile memory. See <code class="language-plaintext highlighter-rouge">ublox_msgs/CfgCFG.msg</code>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">load/mask</code>: uint32_t. Mask of the configurations to load.</li>
      <li>
<code class="language-plaintext highlighter-rouge">load/device</code>: uint32_t. Mask which selects the devices for the load command.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">save</code>: Parameters for saving the configuration to non-volatile memory. See <code class="language-plaintext highlighter-rouge">ublox_msgs/CfgCFG.msg</code>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">save/mask</code>: uint32_t. Mask of the configurations to save.</li>
      <li>
<code class="language-plaintext highlighter-rouge">save/device</code>: uint32_t. Mask which selects the devices for the save command.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">uart1/baudrate</code>: Bit rate of the serial communication. Defaults to 9600.</li>
  <li>
<code class="language-plaintext highlighter-rouge">uart1/in</code>: UART1 in communication protocol. Defaults to UBX, NMEA &amp; RTCM. See <code class="language-plaintext highlighter-rouge">CfgPRT</code> message for possible values.</li>
  <li>
<code class="language-plaintext highlighter-rouge">uart1/out</code>: UART1 out communication protocol. Defaults to UBX, NMEA &amp; RTCM. See <code class="language-plaintext highlighter-rouge">CfgPRT</code> message for possible values.</li>
  <li>
<code class="language-plaintext highlighter-rouge">frame_id</code>: ROS name prepended to frames produced by the node. Defaults to <code class="language-plaintext highlighter-rouge">gps</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">rate</code>: Rate in Hz of measurements. Defaults to 4.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nav_rate</code>: How often navigation solutions are published in number of measurement cycles. Defaults to 1.</li>
  <li>
<code class="language-plaintext highlighter-rouge">enable_ppp</code>: Enable precise-point-positioning system. Defaults to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">gnss/sbas</code>: Enable satellite-based augmentation system. Defaults to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sbas/max</code>: Maximum number of SBAS channels. Defaults to 0.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sbas/usage</code>: See <code class="language-plaintext highlighter-rouge">CfgSBAS</code> message for details. Defaults to 0.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dynamic_model</code>: Possible values below. Defaults to <code class="language-plaintext highlighter-rouge">portable</code>. See u-blox documentation for further description.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">portable</code></li>
      <li><code class="language-plaintext highlighter-rouge">stationary</code></li>
      <li><code class="language-plaintext highlighter-rouge">pedestrian</code></li>
      <li><code class="language-plaintext highlighter-rouge">automotive</code></li>
      <li><code class="language-plaintext highlighter-rouge">sea</code></li>
      <li>
<code class="language-plaintext highlighter-rouge">airborne1</code>: Airborne, max acceleration = 1G</li>
      <li>
<code class="language-plaintext highlighter-rouge">airborne2</code>: Airborne, max acceleration = 2G</li>
      <li>
<code class="language-plaintext highlighter-rouge">airborne4</code>: Airborne, max acceleration = 4G</li>
      <li><code class="language-plaintext highlighter-rouge">wristwatch</code></li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">fix_mode</code>: Type of fixes supported: <code class="language-plaintext highlighter-rouge">2d</code>, <code class="language-plaintext highlighter-rouge">3d</code> or <code class="language-plaintext highlighter-rouge">both</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dr_limit</code>: Max time in seconds to use dead reckoning after signal is lost. Defaults to 0.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dat</code>: Configuring the datum type (optional). See the CfgDAT message.
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">dat/set</code>: If true, the node will the datum based on the parameters below (required if true). Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/majA</code>: Semi-major Axis [m]</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/flat</code>: 1.0 / Flattening</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/shift</code>: [X-axis, Y-axis, Z-axis] shift [m]</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/rot</code>: [X, Y, Z] rotation [s]</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/scale</code>: scale change [ppm]</li>
    </ul>
  </li>
</ul>

<h3 id="for-firmware-version-6">For firmware version 6:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/set</code>: If true, the NMEA will be configured with the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/version</code>: NMEA version. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/num_sv</code>: Maximum Number of SVs to report per TalkerId. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/compat</code>: Enable compatibility mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/consider</code>: Enable considering mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/filter</code>: Namespace for filter flags.
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/pos</code>: Disable position filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/msk_pos</code>: Disable masked position filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/time</code>: Disable time filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/date</code>: Disable date filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/sbas</code>: Enable SBAS filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/track</code>: Disable track filtering. Defaults to false.</li>
    </ul>
  </li>
</ul>

<h3 id="for-devices-with-firmware--7">For devices with firmware &gt;= 7:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">gnss</code> parameters:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/gps</code>: Enable GPS receiver. Defaults to true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/glonass</code>: Enable GLONASS receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/beidou</code>: Enable BeiDou receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/qzss</code>: Enable QZSS receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/qzss_sig_cfg</code>: QZSS signal configuration. Defaults to L1CA. See <code class="language-plaintext highlighter-rouge">CfgGNSS</code> message for constants.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea</code> parameters:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/set</code>: If true, the NMEA will be configured.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/version</code>: NMEA version. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/num_sv</code>: Maximum Number of SVs to report per TalkerId. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/sv_numbering</code>: Configures the display of satellites that do not have an NMEA-defined value. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/compat</code>: Enable compatibility mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/consider</code>: Enable considering mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/limit82</code>: Enable strict limit to 82 characters maximum. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/high_prec</code>: Enable high precision mode. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter</code>: Namespace for filter flags.
        <ul>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/pos</code>: Enable position output for failed or invalid fixes. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/msk_pos</code>: Enable position output for invalid fixes. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/time</code>: Enable time output for invalid times. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/date</code>: Enable date output for invalid dates. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/gps_only</code>: Restrict output to GPS satellites only. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/track</code>: Enable COG output even if COG is frozen. Defaults to false.</li>
        </ul>
      </li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt</code>: Filters out satellites based on their GNSS.
        <ul>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/gps</code>: Disable reporting of GPS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/sbas</code>: Disable reporting of SBAS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/qzss</code>: Disable reporting of QZSS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/glonass</code>: Disable reporting of GLONASS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/beidou</code>: Disable reporting of BeiDou satellites. Defaults to false.</li>
        </ul>
      </li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/main_talker_id</code>: This field enables the main Talker ID to be overridden. Defaults to 0.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/gsv_talker_id</code>:  This field enables the GSV Talker ID to be overridden. Defaults to [0, 0].</li>
    </ul>
  </li>
</ul>

<h3 id="for-devices-with-firmware--8">For devices with firmware &gt;= 8:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">save_on_shutdown</code>: If true, the node will send a <code class="language-plaintext highlighter-rouge">UBX-UPD-SOS</code> command to save the BBR to flash memory on shutdown. Defaults to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">clear_bbr</code>: If true, the node will send a <code class="language-plaintext highlighter-rouge">UBX-UPD-SOS</code> command to clear the flash memory during configuration. Defaults to false.</li>
  <li>Additional <code class="language-plaintext highlighter-rouge">gnss</code> params
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/galileo</code>: Enable Galileo receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/imes</code>: Enable IMES receiver. Defaults to false.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/bds_talker_id</code>: (See other NMEA configuration parameters above) Sets the two characters that should be used for the BeiDou Talker ID.</li>
</ul>

<h3 id="for-udradr-devices">For UDR/ADR devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">use_adr</code>: Enable ADR/UDR. Defaults to true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nav_rate</code> should be set to 1 Hz.</li>
</ul>

<h3 id="for-hpg-reference-devices">For HPG Reference devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">tmode3</code>: Time Mode. Required. See CfgTMODE3 for constants.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/lla_flag</code>: True if the Fixed position is in Lat, Lon, Alt coordinates. False if ECEF. Required if <code class="language-plaintext highlighter-rouge">tmode3</code> is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/position</code>: Antenna Reference Point position in [m] or [deg]. Required if <code class="language-plaintext highlighter-rouge">tmode3</code> is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/position_hp</code>: Antenna Reference Point High Precision position in [0.1 mm] or [deg * 1e-9]. Required if tmode3 is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/acc</code>: Fixed position accuracy in [m]. Required if <code class="language-plaintext highlighter-rouge">tmode3</code> is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sv_in/reset</code>: Whether or not to reset the survey in upon initialization. If false, it will only reset if the TMODE is disabled. Defaults to true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sv_in/min_dur</code>: The minimum Survey-In Duration time in seconds. Required tmode3 is set to survey in.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sv_in/acc_lim</code>: The minimum accuracy level of the survey in position in meters. Required <code class="language-plaintext highlighter-rouge">tmode3</code> is set to survey in.</li>
</ul>

<h3 id="for-hpg-rover-devices">For HPG Rover devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">dgnss_mode</code>: The Differential GNSS mode. Defaults to RTK FIXED. See <code class="language-plaintext highlighter-rouge">CfgDGNSS</code> message for constants.</li>
</ul>

<h3 id="for-tim-devices">For TIM devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">tim_tm2</code>: Enable this message for GPS time-stamps everytime an external interrupt signal is received.</li>
</ul>

<h3 id="for-fts-devices">For FTS devices:</h3>
<ul>
  <li>currently unimplemented. See <code class="language-plaintext highlighter-rouge">FtsProduct</code> class in <code class="language-plaintext highlighter-rouge">ublox_gps</code> package <code class="language-plaintext highlighter-rouge">node.h</code> &amp; <code class="language-plaintext highlighter-rouge">node.cpp</code> files.</li>
</ul>

<h2 id="fix-topics">Fix Topics</h2>

<p><code class="language-plaintext highlighter-rouge">~fix</code>(<a href="http://docs.ros.org/api/sensor_msgs/html/msg/NavSatFix.html">sensor_msgs/NavSatFix</a>)</p>

<p>Navigation Satellite fix.</p>

<p><code class="language-plaintext highlighter-rouge">~fix_velocity</code>(<a href="http://docs.ros.org/jade/api/geometry_msgs/html/msg/TwistWithCovarianceStamped.html">geometry_msgs/TwistWithCovarianceStamped</a>)</p>

<p>Velocity in local ENU frame.</p>

<h2 id="inf-messages">INF messages</h2>
<p>To enable printing INF messages to the ROS console, set the parameters below.</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">inf/all</code>: This is the default value for the INF parameters below, which enable printing u-blox <code class="language-plaintext highlighter-rouge">INF</code> messages to the ROS console. It defaults to true. Individual message types can be turned off by setting their corresponding parameter to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/debug</code>: Whether to configure the UBX and NMEA ports to send Debug messages and print received <code class="language-plaintext highlighter-rouge">INF-Debug</code> messages to <code class="language-plaintext highlighter-rouge">ROS_DEBUG</code> console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/error</code>: Whether to enable Error messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Error</code> messages to <code class="language-plaintext highlighter-rouge">ROS_ERROR</code> console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/notice</code>: Whether to enable Notice messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Notice messages to </code>ROS_INFO` console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/test</code>: Whether to enable Test messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Test</code> messages to <code class="language-plaintext highlighter-rouge">ROS_INFO</code> console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/warning</code>: Whether to enable Warning messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Warning</code> messages to the <code class="language-plaintext highlighter-rouge">ROS_WARN</code> console.</li>
</ul>

<h2 id="additional-topics">Additional Topics</h2>
<p>To publish a given u-blox message to a ROS topic, set the parameter shown below to true. The node sets the rate of the u-blox messages to 1 measurement cycle.</p>

<h3 id="all-messages">All messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/all</code>: This is the default value for <code class="language-plaintext highlighter-rouge">publish/&lt;class&gt;/all</code> parameters below. It defaults to false. Individual message classes and messages can be enabled or disabled by setting the parameters described below to false.</li>
</ul>

<h3 id="aid-messages">AID messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/aid/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/alm</code>: Topic <code class="language-plaintext highlighter-rouge">~aidalm</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/eph</code>: Topic <code class="language-plaintext highlighter-rouge">~aideph</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/hui</code>: Topic <code class="language-plaintext highlighter-rouge">~aidhui</code>
</li>
</ul>

<h3 id="rxm-messages">RXM messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/rxm/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/alm</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmalm</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/eph</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmeph</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/raw</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmraw</code>. Type is either <code class="language-plaintext highlighter-rouge">RxmRAW</code> or <code class="language-plaintext highlighter-rouge">RxmRAWX</code> depending on firmware version.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/rtcm</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmrtcm</code>. <strong>Firmware &gt;= 8 only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/sfrb</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmsfrb</code>. Type is either <code class="language-plaintext highlighter-rouge">RxmSFRB</code> or <code class="language-plaintext highlighter-rouge">RxmSFRBX</code> depending on firmware version.</li>
</ul>

<h3 id="mon-messages">MON messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/mon/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/mon/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/mon/hw</code>: Topic <code class="language-plaintext highlighter-rouge">~monhw</code>
</li>
</ul>

<h3 id="nav-messages">NAV messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/mon/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/att</code>: Topic <code class="language-plaintext highlighter-rouge">~navatt</code>. <strong>ADR/UDR devices only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/clock</code>: Topic <code class="language-plaintext highlighter-rouge">~navclock</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/posecef</code>: Topic <code class="language-plaintext highlighter-rouge">~navposecef</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/posllh</code>: Topic <code class="language-plaintext highlighter-rouge">~navposllh</code>. <strong>Firmware &lt;= 6 only.</strong> For firmware 7 and above, see NavPVT</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/pvt</code>: Topic <code class="language-plaintext highlighter-rouge">~navpvt</code>. <strong>Firmware &gt;= 7 only.</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/relposned</code>: Topic <code class="language-plaintext highlighter-rouge">~navrelposned</code>. <strong>HPG Rover devices only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/heading</code>: Topic <code class="language-plaintext highlighter-rouge">~navheading</code>. <strong>HP Position receiver devices only.</strong> For firmware 9 and above</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/sat</code>: Topic <code class="language-plaintext highlighter-rouge">~navsat</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/sol</code>: Topic <code class="language-plaintext highlighter-rouge">~navsol</code>. <strong>Firmware &lt;= 6 only.</strong> For firmware 7 and above, see NavPVT</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/status</code>: Topic <code class="language-plaintext highlighter-rouge">~navstatus</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/svin</code>: Topic <code class="language-plaintext highlighter-rouge">~navsvin</code>. <strong>HPG Reference Station Devices only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/svinfo</code>: Topic <code class="language-plaintext highlighter-rouge">~navsvinfo</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/velned</code>: Topic <code class="language-plaintext highlighter-rouge">~navvelned</code>. <strong>Firmware &lt;= 6 only.</strong> For firmware 7 and above, see NavPVT</li>
</ul>

<h3 id="esf-messages">ESF messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/esf/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code> for <strong>ADR/UDR devices</strong>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/ins</code>: Topic <code class="language-plaintext highlighter-rouge">~esfins</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/meas</code>: Topic <code class="language-plaintext highlighter-rouge">~esfmeas</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/raw</code>: Topic <code class="language-plaintext highlighter-rouge">~esfraw</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/status</code>: Topic <code class="language-plaintext highlighter-rouge">~esfstatus</code>
</li>
</ul>

<h3 id="hnr-messages">HNR messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/hnr/pvt</code>: Topic <code class="language-plaintext highlighter-rouge">~hnrpvt</code>. <strong>ADR/UDR devices only</strong>
</li>
</ul>

<h3 id="tim-messages">TIM messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/tim/tm2</code>: Topic <code class="language-plaintext highlighter-rouge">timtm2</code>. <strong>TIM devices only</strong>
</li>
</ul>

<h2 id="launch">Launch</h2>

<p>A sample launch file <code class="language-plaintext highlighter-rouge">ublox_device.launch</code> loads the parameters from a <code class="language-plaintext highlighter-rouge">.yaml</code> file in the <code class="language-plaintext highlighter-rouge">ublox_gps/config</code> folder, sample configuration files are included. The required arguments are <code class="language-plaintext highlighter-rouge">node_name</code> and <code class="language-plaintext highlighter-rouge">param_file_name</code>.
The two topics to which you should subscribe are <code class="language-plaintext highlighter-rouge">~fix</code> and <code class="language-plaintext highlighter-rouge">~fix_velocity</code>. The angular component of <code class="language-plaintext highlighter-rouge">fix_velocity</code> is unused.</p>

<h1 id="version-history">Version history</h1>

<ul>
  <li>
<strong>1.1.4</strong>:
    <ul>
      <li>Added messages for firmware 9: <code class="language-plaintext highlighter-rouge">NavRELPOSNED9</code>.</li>
      <li>Added option to publish <code class="language-plaintext highlighter-rouge">sensor_msgs/Imu</code> message for High Precision Position Receiver devices with firmware version &gt;= 9 for moving base applications (For example ZED-F9P; <a href="https://www.u-blox.com/sites/default/files/ZED-F9P-MovingBase_AppNote_%28UBX-19009093%29.pdf">UBX-19009093 AppNote</a>).</li>
    </ul>
  </li>
  <li>
<strong>1.1.3</strong>:
    <ul>
      <li>Update by TUC-ProAut</li>
      <li>Added raw data stream output. To publish ros messages set rosparam <code class="language-plaintext highlighter-rouge">raw_data_stream/publish</code> to true. To store to a logfile set rosparam <code class="language-plaintext highlighter-rouge">set raw_data_stream/dir</code> to the appropriated directory. This feature has nothing todo with Raw Data Products.</li>
      <li>Added flag <code class="language-plaintext highlighter-rouge">config_on_startup</code> to deactivate configuration of ublox.</li>
    </ul>
  </li>
  <li>
<strong>1.1.2</strong>:
    <ul>
      <li>BUG FIX for NavSatFix messages for firmware &gt;=7. The NavSatFix now only uses the NavPVT message time if it is valid, otherwise it uses ROS time.</li>
      <li>BUG FIX for TMODE3 Fixed mode configuration. The ARP High Precision position is now configured correctly.</li>
      <li>BUG FIX for <code class="language-plaintext highlighter-rouge">NavDGPS</code> message which had the wrong Message ID.</li>
      <li>After GNSS configuration &amp; reset, I/O resets automatically, without need for restart.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">UBX-UPD</code> messages. For firmware version 8, the node can now save the flash memory on shutdown and clear the flash memory during configuration based on ROS params.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">CfgGPS</code> message and <code class="language-plaintext highlighter-rouge">MonHW6</code> message for firmware version 6.</li>
      <li>Added respawn parameters to example launch file.</li>
      <li>Added parameters to load/save configuration.</li>
      <li>Added raw_data parameter for Raw Data Products.</li>
      <li>Changed name of “subscribe” parameter namespace to “publish” for clarity.</li>
      <li>Migrated all callback handling to <code class="language-plaintext highlighter-rouge">callback.h</code> from <code class="language-plaintext highlighter-rouge">gps.h</code> and <code class="language-plaintext highlighter-rouge">gps.cpp</code>. ACK messages are now processed through callback handlers.</li>
      <li>Modified how the I/O stream is initialized so that the node now handles parsing the port string.</li>
      <li>Changed class names of Ublox product components (e.g. UbloxTim -&gt; TimProduct) for clarity.</li>
      <li>Cleaned up ublox custom serialization classes by adding typedefs and using count to determine repeating block statements instead of using try-catch statements to serialize stream.</li>
      <li>Added doxygen documentation</li>
    </ul>
  </li>
  <li>
<strong>1.1.1</strong>:
    <ul>
      <li>BUG FIX for acknowledgments. The last received ack message was accessed by multiple threads but was not atomic. This variable is now thread safe.</li>
      <li>BUG FIX for GNSS configuration for Firmware 8, the GNSS configuration is now verified &amp; modified properly.</li>
      <li>BUG FIX for fix diagnostics. NumSV was displaying incorrectly. For firmware versions &gt;=7, the NavPVT flags variable is now compared to the constants from the NavPVT message not NavSOL.</li>
      <li>Removed ublox_version param, value is now determined by parsing MonVER.</li>
      <li>Organized parameters into namespaces.</li>
      <li>Better parameter checking. Checks that unsigned ints and vectors of unsigned ints are in bounds.</li>
      <li>Changed rtcm/rate parameter to a vector instead of a scalar, now each RTCM id can be set to a different rate.</li>
      <li>Diagnostic variables are displayed more clearly with units included.</li>
      <li>For HPG Rovers, added diagnostic updater for Carrier Phase Solution.</li>
      <li>Added CfgNMEA messages for each firmware version and a CfgDAT message, as well as parameters to configure the NMEA and Datum.</li>
      <li>Added constants for NavSAT_SV flags bit mask.</li>
    </ul>
  </li>
  <li>
<strong>1.1.0</strong>:
    <ul>
      <li>BUG FIX for NAV-PVT messages for firmware 7. The NAV-PVT message is shorter for firmware version 7, the new message is <code class="language-plaintext highlighter-rouge">NavPVT7</code>
</li>
      <li>BUG FIX for SBAS configuration, it now configures SBAS only if the device is SBAS capable. Previously, if enable_sbas was set to false, it would not configure, meaning that SBAS could not be turned off.</li>
      <li>BUG FIX, the baudrate of the serial I/O port was not configured correctly, on the device it was set to the user desired settings, but on the computer it was always set to 4800.</li>
      <li>BUG FIX, Diagnostics for Nav Status are now updated in firmware version 6.</li>
      <li>BUG FIX, The method which waited for ACKs now checks if the ACK is from the correct class and message ID.</li>
      <li>Added messages for <code class="language-plaintext highlighter-rouge">CfgTMODE3</code>, <code class="language-plaintext highlighter-rouge">CfgHNR</code>, <code class="language-plaintext highlighter-rouge">CfgRST</code>, <code class="language-plaintext highlighter-rouge">CfgINF</code>, <code class="language-plaintext highlighter-rouge">NavATT</code>, <code class="language-plaintext highlighter-rouge">ESF</code> messages, <code class="language-plaintext highlighter-rouge">Inf</code> message (for all INF types), <code class="language-plaintext highlighter-rouge">HnrPVT</code>, <code class="language-plaintext highlighter-rouge">MgaGAL</code>, <code class="language-plaintext highlighter-rouge">NavSAT</code>, <code class="language-plaintext highlighter-rouge">MonHw</code>, <code class="language-plaintext highlighter-rouge">NavPVT7</code> (for firmware version 7).</li>
      <li>Restructured Node class so that it now uses composition. The main node contains instances of classes which implement <code class="language-plaintext highlighter-rouge">UBloxInterface</code>, and calls the methods for each interface added to the node. The classes which implement the interface add new features that are not generic to all firmware versions or products. Each firmware version (6-8) has an interface, and each product category has one (SPG, HPG REF, HPG ROV, TIM, FTS, ADR/UDR). The product type is determined from parsing the <code class="language-plaintext highlighter-rouge">MonVER</code> message.</li>
      <li>Added implementations of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> called <code class="language-plaintext highlighter-rouge">UbloxHpgRef</code> and <code class="language-plaintext highlighter-rouge">UbloxHpgRov</code> for HPG reference station and rover devices. The reference station tmode3 can be configured upon startup (see Options section) and the rover dgnss mode can be set. After survey in, once the reference station entire time mode, the nav_rate is set to the user desired value (it must be 1 Hz during survey-in) and the RTCM output messages are enabled. The state can be monitored through the rqt_runtime_monitor. These classes were tested on C94-M8P devices.</li>
      <li>Added an implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> called <code class="language-plaintext highlighter-rouge">UbloxAdrUdr</code> for ADR/UDR devices. It which subscribes to <code class="language-plaintext highlighter-rouge">NavATT</code> and ESF messages and configures useAdr. The diagnostics monitor specific to these devices is not implemented. This class has not been tested on a hardware device.</li>
      <li>Added a partial implementation of <code class="language-plaintext highlighter-rouge">UbloxTim</code> for TIM devices which subscribes to <code class="language-plaintext highlighter-rouge">RxmRAWX</code> and <code class="language-plaintext highlighter-rouge">RxmSFRBX</code> messages. The <code class="language-plaintext highlighter-rouge">getRosParams()</code>, <code class="language-plaintext highlighter-rouge">configureUblox()</code>, and <code class="language-plaintext highlighter-rouge">initializeDiagnostics()</code> methods are unimplemented.</li>
      <li>Added a skeleton class for <code class="language-plaintext highlighter-rouge">UbloxFts</code> for FTS devices which is unimplemented. See the <code class="language-plaintext highlighter-rouge">ublox_gps</code> <code class="language-plaintext highlighter-rouge">node.cpp</code> and <code class="language-plaintext highlighter-rouge">node.h</code> files.</li>
      <li>Changed how GNSS is configured in firmware version 8. The documentation recommends a cold restart after reconfiguring the GNSS, and will reset the device if it receives a <code class="language-plaintext highlighter-rouge">CfgGNSS</code> message, even if the settings do not change. For firmware version 8, before reconfiguring, the node first checks if the current GNSS settings are the same as the desired settings. If so, it will not send a CfgGNSS message to the device. After reconfiguring, it will cold reset the GNSS.</li>
      <li>Migrated I/O initialization to the <code class="language-plaintext highlighter-rouge">Gps</code> class from the <code class="language-plaintext highlighter-rouge">Node</code> class.</li>
      <li>INF messages are now printed to the ROS console.</li>
      <li>Changed how debug statements are displayed. If the debug parameter is set to 1 or greater, it prints debug messages.</li>
    </ul>
  </li>
  <li>
<strong>1.0.0</strong>:
    <ul>
      <li>Added messages for firmware 8: <code class="language-plaintext highlighter-rouge">NavPVT</code>, <code class="language-plaintext highlighter-rouge">RxmRAWX</code>, <code class="language-plaintext highlighter-rouge">RxmSFRBX</code>.</li>
      <li>Modified ConfigGNSS and MonVER to include repeated blocks and added 
ConfigGNSS_Block (configures all GNSS at once) and MonVER_Extension 
(for MonVER_Char blocks).</li>
      <li>MonVER info is now published upon initialization.</li>
      <li>Fixed SBAS crashing issue (node crashed if device didn’t have SBAS 
capabilities)</li>
      <li>Modified remaining messages to update to firmware 8</li>
      <li>Added <code class="language-plaintext highlighter-rouge">UbloxNode</code> abstract class which does all previous node functions which 
are the same for all firmware versions. Added subclasses which do functions
specific to a given firmware version (e.g. subscribing to NavPVT messages).</li>
      <li>Added a read lock to AsyncWorker</li>
      <li>Removed hard-coded values from <code class="language-plaintext highlighter-rouge">Gps</code> and <code class="language-plaintext highlighter-rouge">Node</code> classes specific to a certain 
device and changed them to configurable parameters. Modified example
launch file accordingly.</li>
      <li>Added example parameter yaml files and launch file to load parameters from
this file.</li>
      <li>Moved implementations of Callback functions into <code class="language-plaintext highlighter-rouge">callback.h</code> (from <code class="language-plaintext highlighter-rouge">gps.h</code> 
and <code class="language-plaintext highlighter-rouge">gps.cpp</code>)</li>
      <li>Updated formatting of some files per google style guide spec (e.g. 80 chars
per line).</li>
    </ul>
  </li>
  <li>
<strong>0.0.5</strong>:
    <ul>
      <li>Reformat files under <code class="language-plaintext highlighter-rouge">ublox_gps</code>
</li>
    </ul>
  </li>
  <li>
<strong>0.0.4</strong>:
    <ul>
      <li>Added install targets.</li>
    </ul>
  </li>
  <li>
<strong>0.0.3</strong>:
    <ul>
      <li>Added the <code class="language-plaintext highlighter-rouge">enable_glonass</code>, <code class="language-plaintext highlighter-rouge">enable_beidou</code> and <code class="language-plaintext highlighter-rouge">enable_ppp</code> options.</li>
      <li>Added the <code class="language-plaintext highlighter-rouge">ublox_version</code> option. Consult known issues for important details.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">numSVs</code> field to the RQT monitor.</li>
    </ul>
  </li>
  <li>
<strong>0.0.2</strong>:
    <ul>
      <li>Changed <code class="language-plaintext highlighter-rouge">meas_rate</code> to simply <code class="language-plaintext highlighter-rouge">rate</code>, which is in Hz. <code class="language-plaintext highlighter-rouge">meas_rate</code> is computed automatically.</li>
    </ul>
  </li>
  <li>
<strong>0.0.1</strong>:
    <ul>
      <li>All topics are now published on a private node handle.</li>
      <li>Velocities are published as stamped twist messages with covariance. Angular components are unused.</li>
      <li>
<code class="language-plaintext highlighter-rouge">hAcc</code>, <code class="language-plaintext highlighter-rouge">vAcc</code> and <code class="language-plaintext highlighter-rouge">sAcc</code> are used to generate diagonal covariances.</li>
      <li>Velocities use the correct convention: X-Y-Z = East-North-Up.</li>
      <li>2D <strong>or</strong> 3D fix correspond to <code class="language-plaintext highlighter-rouge">STATUS_FIX</code> (previously only 3D).</li>
      <li>
<code class="language-plaintext highlighter-rouge">fix</code> and <code class="language-plaintext highlighter-rouge">fix_velocity</code> are time-stamped synchronously, using the <code class="language-plaintext highlighter-rouge">iTOW</code> to check arrival times.</li>
      <li>Added options for changing the CFG-NAV5 settings (see above).</li>
      <li>Added support for <code class="language-plaintext highlighter-rouge">diagnostic_updater</code>.</li>
      <li>
<em>“received ACK”</em> messages are elevated to debug level 2.</li>
      <li>Corrected issue where baudrate was not set correctly using rosparam.</li>
      <li>Corrected issue where socket destructors were not called.</li>
    </ul>
  </li>
  <li>
<strong>0.0.0</strong>:
    <ul>
      <li>Forked from https://github.com/tu-darmstadt-ros-pkg/ublox</li>
      <li>Updated to use catkin.</li>
    </ul>
  </li>
</ul>

<h1 id="adding-new-features">Adding new features</h1>
<h2 id="adding-new-messages">Adding new messages</h2>
<ol>
  <li>
    <p>Create the .msg file and add it to <code class="language-plaintext highlighter-rouge">ublox_msgs/msg</code>. Make sure the file includes the constants <code class="language-plaintext highlighter-rouge">CLASS_ID</code> and <code class="language-plaintext highlighter-rouge">MESSAGE_ID</code>.</p>
  </li>
  <li>
    <p>Modify <code class="language-plaintext highlighter-rouge">ublox_msgs/include/ublox_msgs/ublox_msgs.h</code>. 
a. Include the message header. 
b. Make sure the message’s class constant is declared in the <code class="language-plaintext highlighter-rouge">ublox_msgs::Class</code> namespace. 
c. Declare the message’s ID constant in the <code class="language-plaintext highlighter-rouge">ublox_messages::Message::&lt;CLASS_NAME&gt;</code> namespace.</p>
  </li>
  <li>
    <p>Declare the message in <code class="language-plaintext highlighter-rouge">ublox_msgs/src/ublox_msgs.cpp</code>.</p>
  </li>
  <li>
    <p>If the message has a repeated or optional block of varying size, create an additional message for the repeating block and include it in the message. 
a. Include the block message in the <code class="language-plaintext highlighter-rouge">ublox_msgs/include/ublox_msgs/ublox_msgs.h</code> file. 
b. Modify <code class="language-plaintext highlighter-rouge">ublox_msgs/include/ublox/serialization/ublox_msgs.h</code> and add a custom <code class="language-plaintext highlighter-rouge">Serializer</code>. If the message doesn’t include the number of repeating/optional blocks as a parameter, you can infer it from the count/size of the message, which is the length of the payload.</p>
  </li>
  <li>
    <p>Modify <code class="language-plaintext highlighter-rouge">ublox_gps/src/node.cpp</code> (and the header file if necessary) to either subscribe to the message or send the configuration message. Be sure to modify the appropriate subscribe function. For messages which apply to all firmware/hardware, modify <code class="language-plaintext highlighter-rouge">UbloxNode::subscribe()</code>. Otherwise modify the appropriate firmware or hardware’s subscribe function, e.g. <code class="language-plaintext highlighter-rouge">UbloxFirmware8::subscribe()</code>, <code class="language-plaintext highlighter-rouge">HpgRovProduct::subscribe()</code>. If the message is a configuration message, consider modifying <code class="language-plaintext highlighter-rouge">ublox_gps/src/gps.cpp</code> (and the header file) to add a configuration function.</p>
  </li>
</ol>

<h3 id="one-message-protocol-for-multiple-ids-eg-inf-message">One message protocol for multiple IDs (e.g. INF message)</h3>
<p>If a given message protocol applies to multiple message IDs (e.g. the <code class="language-plaintext highlighter-rouge">Inf</code> message), do not include the message ID in the message itself.
When declaring the message, for the first declaration, use <code class="language-plaintext highlighter-rouge">DECLARE_UBLOX_MESSAGE</code> macro. For the following declarations use the <code class="language-plaintext highlighter-rouge">DECLARE_UBLOX_MESSAGE_ID</code> macro.</p>

<h2 id="adding-device--firmware-specific-functionality">Adding device / firmware specific functionality</h2>

<p>The <code class="language-plaintext highlighter-rouge">node.cpp</code> file in <code class="language-plaintext highlighter-rouge">ublox_gps</code> contains a main Node class called UbloxNode which acts as the ROS Node and handles the node initialization, publishers, and diagnostics. <code class="language-plaintext highlighter-rouge">UbloxNode</code> contains a vector <code class="language-plaintext highlighter-rouge">components_</code> of instances of <code class="language-plaintext highlighter-rouge">ComponentInterface</code>. The <code class="language-plaintext highlighter-rouge">UbloxNode::initialize()</code> calls each component’s public interface methods. The node contains components for both the firmware version and the product category, which are added after parsing the <code class="language-plaintext highlighter-rouge">MonVER</code> message. Any class which implements <code class="language-plaintext highlighter-rouge">ComponentInterface</code> can be added to the <code class="language-plaintext highlighter-rouge">UbloxNode</code> <code class="language-plaintext highlighter-rouge">components_</code> vector and its methods will be called by <code class="language-plaintext highlighter-rouge">UbloxNode</code>. Simply add an implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> to the ublox_gps <code class="language-plaintext highlighter-rouge">node.h</code> and <code class="language-plaintext highlighter-rouge">node.cpp</code> files. Behavior specific to a given firmware or product should not be implemented in the <code class="language-plaintext highlighter-rouge">UbloxNode</code> class and instead should be implemented in an implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code>.</p>

<p>Currently there are implementations of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> for firmware versions 6-8 and product categories <code class="language-plaintext highlighter-rouge">HpgRefProduct</code>, <code class="language-plaintext highlighter-rouge">HpgRovProduct</code>, <code class="language-plaintext highlighter-rouge">AdrUdrProduct</code>, <code class="language-plaintext highlighter-rouge">TimProduct</code>, <code class="language-plaintext highlighter-rouge">FtsProduct</code>.  SPG products do not have their own implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code>, since the Firmware classes implement all of the behavior of SPG devices.</p>

<p><code class="language-plaintext highlighter-rouge">HpgRefProduct</code> and <code class="language-plaintext highlighter-rouge">HpgRovProduct</code> have been tested on the C94-M8P device.</p>

<h2 id="adding-new-parameters">Adding new parameters</h2>
<ol>
  <li>Modify the <code class="language-plaintext highlighter-rouge">getRosParams()</code> method in the appropriate implementation of ComponentInterface (e.g. UbloxNode, UbloxFirmware8, HpgRefProduct, etc.) and get the parameter. Group multiple related parameters into a namespace. Use all lower case names for parameters and namespaces separated with underscores.
    <ul>
      <li>If the type is an unsigned integer (of any size) or vector of unsigned integers, use the <code class="language-plaintext highlighter-rouge">ublox_node::getRosUint</code> method which will verify the bounds of the parameter.</li>
      <li>If the type is an int8 or int16 or vector of int8’s or int16’s, use the <code class="language-plaintext highlighter-rouge">ublox_nod::getRosInt</code> method which will verify the bounds of the parameter. (This method can also be used for int32’s but ROS has methods to get int32 parameters as well).</li>
    </ul>
  </li>
  <li>If the parameter is used during configuration also modify the <code class="language-plaintext highlighter-rouge">ComponentInterface</code>’s <code class="language-plaintext highlighter-rouge">configureUblox()</code> method to send the appropriate configuration message. Do not send configuration messages in <code class="language-plaintext highlighter-rouge">getRosParams()</code>.</li>
  <li>Modify this README file and add the parameter name and description in the appropriate section. State whether there is a default value or if the parameter is required.</li>
  <li>Modify one of the sample <code class="language-plaintext highlighter-rouge">.yaml</code> configuration files in <code class="language-plaintext highlighter-rouge">ublox_gps/config</code> to include the parameter or add a new sample <code class="language-plaintext highlighter-rouge">.yaml</code> for your device.</li>
</ol>

<h1 id="known-issues">Known Issues</h1>

<h2 id="unimplemented--untested-devices">Unimplemented / Untested Devices</h2>

<p><code class="language-plaintext highlighter-rouge">TimProduct</code> and <code class="language-plaintext highlighter-rouge">FtsProduct</code> are currently unimplemented skeleton classes. <code class="language-plaintext highlighter-rouge">AdrUdrProduct</code> is implemented, with the exception of <code class="language-plaintext highlighter-rouge">initializeRosDiagnostics()</code> and has not been tested on hardware.</p>

<p><code class="language-plaintext highlighter-rouge">UbloxFirmware7</code> has not been properly tested on a device with firmware version 7. <code class="language-plaintext highlighter-rouge">UbloxFirmware6</code> has been tested on a device with firmware version 8, but not with firmware version 6.</p>

<h2 id="debugging">Debugging</h2>

<p>For debugging messages set the debug parameter to &gt; 0. The range for debug is 0-4. At level 1 it prints configuration messages and checksum errors, at level 2 it also prints ACK/NACK messages and sent messages. At level 3 it prints the received bytes being decoded by a specific message reader. At level 4 it prints the incoming buffer before it is split by message header.</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<ol>
  <li>Why can’t the ublox_gps node open my device, even though I have correctly specified the path in <code class="language-plaintext highlighter-rouge">/dev</code>?
    <ul>
      <li>Make sure you are the owner of the device, or a member of <code class="language-plaintext highlighter-rouge">dialout</code> group.</li>
    </ul>
  </li>
</ol>

<h1 id="links">Links</h1>
<p>Consult the <a href="https://www.u-blox.com/sites/default/files/products/documents/u-blox8-M8_ReceiverDescrProtSpec_(UBX-13003221)_Public.pdf">official protocol spec</a> for details on packets supported by u-blox devices.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ublox">ublox</a> <small>repository</small></h3>
        <span class="label label-default">gps</span> <span class="label label-default">ublox</span> <span class="label label-default">ros</span> <span class="label label-default">ros-driver</span> <span class="label label-default">ublox-gps</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-KumarRobotics-ublox
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-KumarRobotics-ublox" role="menuitem" tabindex="-1" href="/r/ublox/github-KumarRobotics-ublox" data="github-KumarRobotics-ublox">
                    <span class="glyphicon glyphicon-star"></span>
                    github-KumarRobotics-ublox
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>github</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ublox">ublox</a> <small>repository</small></h3>
        <span class="label label-default">gps</span> <span class="label label-default">ublox</span> <span class="label label-default">ros</span> <span class="label label-default">ros-driver</span> <span class="label label-default">ublox-gps</span> 
        
        <a class="label label-primary pkg-label" href="/p/ublox">ublox</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_gps">ublox_gps</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_msg_filters">ublox_msg_filters</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_msgs">ublox_msgs</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_serialization">ublox_serialization</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-KumarRobotics-ublox
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-KumarRobotics-ublox" role="menuitem" tabindex="-1" href="/r/ublox/github-KumarRobotics-ublox" data="github-KumarRobotics-ublox">
                    <span class="glyphicon glyphicon-star"></span>
                    github-KumarRobotics-ublox
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">A driver for ublox gps</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/KumarRobotics/ublox.git">https://github.com/KumarRobotics/ublox.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2022-12-07
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">gps</span> <span class="label label-default">ublox</span> <span class="label label-default">ros</span> <span class="label label-default">ros-driver</span> <span class="label label-default">ublox-gps</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ublox/#noetic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ublox/#noetic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ublox/#noetic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ublox">ublox</a></td>
                    <td>1.5.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_gps">ublox_gps</a></td>
                    <td>1.5.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_msg_filters">ublox_msg_filters</a></td>
                    <td>0.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_msgs">ublox_msgs</a></td>
                    <td>1.5.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_serialization">ublox_serialization</a></td>
                    <td>1.5.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="ublox">ublox</h1>
<p>The <code class="language-plaintext highlighter-rouge">ublox</code> package provides support for <a href="http://www.u-blox.com">u-blox</a> GPS receivers. Only the <em>serial</em> configuration of the driver is documented here, but TCP/UDP communication is also supported by the driver (untested).</p>

<p>The driver was originally written by Johannes Meyer. Changes made later are detailed in the version history below.</p>

<h2 id="options">Options</h2>

<p>Example .yaml configuration files are included in <code class="language-plaintext highlighter-rouge">ublox_gps/config</code>. Consult the u-blox documentation for your device for the recommended settings.</p>

<p>The <code class="language-plaintext highlighter-rouge">ublox_gps</code> node supports the following parameters for all products and firmware versions:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">device</code>: Path to the device port. Defaults to <code class="language-plaintext highlighter-rouge">/dev/ttyACM0</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">raw_data</code>: Whether the device is a raw data product. Defaults to false. Firmware &lt;= 7.03 only.</li>
  <li>
<code class="language-plaintext highlighter-rouge">load</code>: Parameters for loading the configuration to non-volatile memory. See <code class="language-plaintext highlighter-rouge">ublox_msgs/CfgCFG.msg</code>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">load/mask</code>: uint32_t. Mask of the configurations to load.</li>
      <li>
<code class="language-plaintext highlighter-rouge">load/device</code>: uint32_t. Mask which selects the devices for the load command.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">save</code>: Parameters for saving the configuration to non-volatile memory. See <code class="language-plaintext highlighter-rouge">ublox_msgs/CfgCFG.msg</code>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">save/mask</code>: uint32_t. Mask of the configurations to save.</li>
      <li>
<code class="language-plaintext highlighter-rouge">save/device</code>: uint32_t. Mask which selects the devices for the save command.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">uart1/baudrate</code>: Bit rate of the serial communication. Defaults to 9600.</li>
  <li>
<code class="language-plaintext highlighter-rouge">uart1/in</code>: UART1 in communication protocol. Defaults to UBX, NMEA &amp; RTCM. See <code class="language-plaintext highlighter-rouge">CfgPRT</code> message for possible values.</li>
  <li>
<code class="language-plaintext highlighter-rouge">uart1/out</code>: UART1 out communication protocol. Defaults to UBX, NMEA &amp; RTCM. See <code class="language-plaintext highlighter-rouge">CfgPRT</code> message for possible values.</li>
  <li>
<code class="language-plaintext highlighter-rouge">frame_id</code>: ROS name prepended to frames produced by the node. Defaults to <code class="language-plaintext highlighter-rouge">gps</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">rate</code>: Rate in Hz of measurements. Defaults to 4.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nav_rate</code>: How often navigation solutions are published in number of measurement cycles. Defaults to 1.</li>
  <li>
<code class="language-plaintext highlighter-rouge">enable_ppp</code>: Enable precise-point-positioning system. Defaults to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">gnss/sbas</code>: Enable satellite-based augmentation system. Defaults to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sbas/max</code>: Maximum number of SBAS channels. Defaults to 0.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sbas/usage</code>: See <code class="language-plaintext highlighter-rouge">CfgSBAS</code> message for details. Defaults to 0.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dynamic_model</code>: Possible values below. Defaults to <code class="language-plaintext highlighter-rouge">portable</code>. See u-blox documentation for further description.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">portable</code></li>
      <li><code class="language-plaintext highlighter-rouge">stationary</code></li>
      <li><code class="language-plaintext highlighter-rouge">pedestrian</code></li>
      <li><code class="language-plaintext highlighter-rouge">automotive</code></li>
      <li><code class="language-plaintext highlighter-rouge">sea</code></li>
      <li>
<code class="language-plaintext highlighter-rouge">airborne1</code>: Airborne, max acceleration = 1G</li>
      <li>
<code class="language-plaintext highlighter-rouge">airborne2</code>: Airborne, max acceleration = 2G</li>
      <li>
<code class="language-plaintext highlighter-rouge">airborne4</code>: Airborne, max acceleration = 4G</li>
      <li><code class="language-plaintext highlighter-rouge">wristwatch</code></li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">fix_mode</code>: Type of fixes supported: <code class="language-plaintext highlighter-rouge">2d</code>, <code class="language-plaintext highlighter-rouge">3d</code> or <code class="language-plaintext highlighter-rouge">both</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dr_limit</code>: Max time in seconds to use dead reckoning after signal is lost. Defaults to 0.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dat</code>: Configuring the datum type (optional). See the CfgDAT message.
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">dat/set</code>: If true, the node will the datum based on the parameters below (required if true). Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/majA</code>: Semi-major Axis [m]</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/flat</code>: 1.0 / Flattening</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/shift</code>: [X-axis, Y-axis, Z-axis] shift [m]</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/rot</code>: [X, Y, Z] rotation [s]</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/scale</code>: scale change [ppm]</li>
    </ul>
  </li>
</ul>

<h3 id="for-firmware-version-6">For firmware version 6:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/set</code>: If true, the NMEA will be configured with the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/version</code>: NMEA version. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/num_sv</code>: Maximum Number of SVs to report per TalkerId. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/compat</code>: Enable compatibility mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/consider</code>: Enable considering mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/filter</code>: Namespace for filter flags.
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/pos</code>: Disable position filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/msk_pos</code>: Disable masked position filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/time</code>: Disable time filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/date</code>: Disable date filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/sbas</code>: Enable SBAS filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/track</code>: Disable track filtering. Defaults to false.</li>
    </ul>
  </li>
</ul>

<h3 id="for-devices-with-firmware--7">For devices with firmware &gt;= 7:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">gnss</code> parameters:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/gps</code>: Enable GPS receiver. Defaults to true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/glonass</code>: Enable GLONASS receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/beidou</code>: Enable BeiDou receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/qzss</code>: Enable QZSS receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/qzss_sig_cfg</code>: QZSS signal configuration. Defaults to L1CA. See <code class="language-plaintext highlighter-rouge">CfgGNSS</code> message for constants.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea</code> parameters:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/set</code>: If true, the NMEA will be configured.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/version</code>: NMEA version. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/num_sv</code>: Maximum Number of SVs to report per TalkerId. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/sv_numbering</code>: Configures the display of satellites that do not have an NMEA-defined value. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/compat</code>: Enable compatibility mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/consider</code>: Enable considering mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/limit82</code>: Enable strict limit to 82 characters maximum. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/high_prec</code>: Enable high precision mode. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter</code>: Namespace for filter flags.
        <ul>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/pos</code>: Enable position output for failed or invalid fixes. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/msk_pos</code>: Enable position output for invalid fixes. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/time</code>: Enable time output for invalid times. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/date</code>: Enable date output for invalid dates. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/gps_only</code>: Restrict output to GPS satellites only. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/track</code>: Enable COG output even if COG is frozen. Defaults to false.</li>
        </ul>
      </li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt</code>: Filters out satellites based on their GNSS.
        <ul>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/gps</code>: Disable reporting of GPS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/sbas</code>: Disable reporting of SBAS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/qzss</code>: Disable reporting of QZSS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/glonass</code>: Disable reporting of GLONASS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/beidou</code>: Disable reporting of BeiDou satellites. Defaults to false.</li>
        </ul>
      </li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/main_talker_id</code>: This field enables the main Talker ID to be overridden. Defaults to 0.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/gsv_talker_id</code>:  This field enables the GSV Talker ID to be overridden. Defaults to [0, 0].</li>
    </ul>
  </li>
</ul>

<h3 id="for-devices-with-firmware--8">For devices with firmware &gt;= 8:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">save_on_shutdown</code>: If true, the node will send a <code class="language-plaintext highlighter-rouge">UBX-UPD-SOS</code> command to save the BBR to flash memory on shutdown. Defaults to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">clear_bbr</code>: If true, the node will send a <code class="language-plaintext highlighter-rouge">UBX-UPD-SOS</code> command to clear the flash memory during configuration. Defaults to false.</li>
  <li>Additional <code class="language-plaintext highlighter-rouge">gnss</code> params
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/galileo</code>: Enable Galileo receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/imes</code>: Enable IMES receiver. Defaults to false.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/bds_talker_id</code>: (See other NMEA configuration parameters above) Sets the two characters that should be used for the BeiDou Talker ID.</li>
</ul>

<h3 id="for-udradr-devices">For UDR/ADR devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">use_adr</code>: Enable ADR/UDR. Defaults to true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nav_rate</code> should be set to 1 Hz.</li>
</ul>

<h3 id="for-hpg-reference-devices">For HPG Reference devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">tmode3</code>: Time Mode. Required. See CfgTMODE3 for constants.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/lla_flag</code>: True if the Fixed position is in Lat, Lon, Alt coordinates. False if ECEF. Required if <code class="language-plaintext highlighter-rouge">tmode3</code> is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/position</code>: Antenna Reference Point position in [m] or [deg]. Required if <code class="language-plaintext highlighter-rouge">tmode3</code> is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/position_hp</code>: Antenna Reference Point High Precision position in [0.1 mm] or [deg * 1e-9]. Required if tmode3 is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/acc</code>: Fixed position accuracy in [m]. Required if <code class="language-plaintext highlighter-rouge">tmode3</code> is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sv_in/reset</code>: Whether or not to reset the survey in upon initialization. If false, it will only reset if the TMODE is disabled. Defaults to true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sv_in/min_dur</code>: The minimum Survey-In Duration time in seconds. Required tmode3 is set to survey in.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sv_in/acc_lim</code>: The minimum accuracy level of the survey in position in meters. Required <code class="language-plaintext highlighter-rouge">tmode3</code> is set to survey in.</li>
</ul>

<h3 id="for-hpg-rover-devices">For HPG Rover devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">dgnss_mode</code>: The Differential GNSS mode. Defaults to RTK FIXED. See <code class="language-plaintext highlighter-rouge">CfgDGNSS</code> message for constants.</li>
</ul>

<h3 id="for-tim-devices">For TIM devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">tim_tm2</code>: Enable this message for GPS time-stamps everytime an external interrupt signal is received.</li>
</ul>

<h3 id="for-fts-devices">For FTS devices:</h3>
<ul>
  <li>currently unimplemented. See <code class="language-plaintext highlighter-rouge">FtsProduct</code> class in <code class="language-plaintext highlighter-rouge">ublox_gps</code> package <code class="language-plaintext highlighter-rouge">node.h</code> &amp; <code class="language-plaintext highlighter-rouge">node.cpp</code> files.</li>
</ul>

<h2 id="fix-topics">Fix Topics</h2>

<p><code class="language-plaintext highlighter-rouge">~fix</code>(<a href="http://docs.ros.org/api/sensor_msgs/html/msg/NavSatFix.html">sensor_msgs/NavSatFix</a>)</p>

<p>Navigation Satellite fix.</p>

<p><code class="language-plaintext highlighter-rouge">~fix_velocity</code>(<a href="http://docs.ros.org/jade/api/geometry_msgs/html/msg/TwistWithCovarianceStamped.html">geometry_msgs/TwistWithCovarianceStamped</a>)</p>

<p>Velocity in local ENU frame.</p>

<h2 id="inf-messages">INF messages</h2>
<p>To enable printing INF messages to the ROS console, set the parameters below.</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">inf/all</code>: This is the default value for the INF parameters below, which enable printing u-blox <code class="language-plaintext highlighter-rouge">INF</code> messages to the ROS console. It defaults to true. Individual message types can be turned off by setting their corresponding parameter to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/debug</code>: Whether to configure the UBX and NMEA ports to send Debug messages and print received <code class="language-plaintext highlighter-rouge">INF-Debug</code> messages to <code class="language-plaintext highlighter-rouge">ROS_DEBUG</code> console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/error</code>: Whether to enable Error messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Error</code> messages to <code class="language-plaintext highlighter-rouge">ROS_ERROR</code> console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/notice</code>: Whether to enable Notice messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Notice messages to </code>ROS_INFO` console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/test</code>: Whether to enable Test messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Test</code> messages to <code class="language-plaintext highlighter-rouge">ROS_INFO</code> console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/warning</code>: Whether to enable Warning messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Warning</code> messages to the <code class="language-plaintext highlighter-rouge">ROS_WARN</code> console.</li>
</ul>

<h2 id="additional-topics">Additional Topics</h2>
<p>To publish a given u-blox message to a ROS topic, set the parameter shown below to true. The node sets the rate of the u-blox messages to 1 measurement cycle.</p>

<h3 id="all-messages">All messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/all</code>: This is the default value for <code class="language-plaintext highlighter-rouge">publish/&lt;class&gt;/all</code> parameters below. It defaults to false. Individual message classes and messages can be enabled or disabled by setting the parameters described below to false.</li>
</ul>

<h3 id="aid-messages">AID messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/aid/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/alm</code>: Topic <code class="language-plaintext highlighter-rouge">~aidalm</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/eph</code>: Topic <code class="language-plaintext highlighter-rouge">~aideph</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/hui</code>: Topic <code class="language-plaintext highlighter-rouge">~aidhui</code>
</li>
</ul>

<h3 id="rxm-messages">RXM messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/rxm/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/alm</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmalm</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/eph</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmeph</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/raw</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmraw</code>. Type is either <code class="language-plaintext highlighter-rouge">RxmRAW</code> or <code class="language-plaintext highlighter-rouge">RxmRAWX</code> depending on firmware version.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/rtcm</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmrtcm</code>. <strong>Firmware &gt;= 8 only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/sfrb</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmsfrb</code>. Type is either <code class="language-plaintext highlighter-rouge">RxmSFRB</code> or <code class="language-plaintext highlighter-rouge">RxmSFRBX</code> depending on firmware version.</li>
</ul>

<h3 id="mon-messages">MON messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/mon/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/mon/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/mon/hw</code>: Topic <code class="language-plaintext highlighter-rouge">~monhw</code>
</li>
</ul>

<h3 id="nav-messages">NAV messages</h3>
<ul>
  <li>NAV messages are time stamped with <code class="language-plaintext highlighter-rouge">iTOW</code>, and multiple messages can be synchronized with <a href="https://github.com/KumarRobotics/ublox/tree/master/ublox_msg_filters">ublox_msg_filters</a>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/mon/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/att</code>: Topic <code class="language-plaintext highlighter-rouge">~navatt</code>. <strong>ADR/UDR devices only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/clock</code>: Topic <code class="language-plaintext highlighter-rouge">~navclock</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/posecef</code>: Topic <code class="language-plaintext highlighter-rouge">~navposecef</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/posllh</code>: Topic <code class="language-plaintext highlighter-rouge">~navposllh</code>. <strong>Firmware &lt;= 6 only.</strong> For firmware 7 and above, see NavPVT</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/pvt</code>: Topic <code class="language-plaintext highlighter-rouge">~navpvt</code>. <strong>Firmware &gt;= 7 only.</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/relposned</code>: Topic <code class="language-plaintext highlighter-rouge">~navrelposned</code>. <strong>HPG Rover devices only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/heading</code>: Topic <code class="language-plaintext highlighter-rouge">~navheading</code>. <strong>HP Position receiver devices only.</strong> For firmware 9 and above</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/sat</code>: Topic <code class="language-plaintext highlighter-rouge">~navsat</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/sol</code>: Topic <code class="language-plaintext highlighter-rouge">~navsol</code>. <strong>Firmware &lt;= 6 only.</strong> For firmware 7 and above, see NavPVT</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/status</code>: Topic <code class="language-plaintext highlighter-rouge">~navstatus</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/svin</code>: Topic <code class="language-plaintext highlighter-rouge">~navsvin</code>. <strong>HPG Reference Station Devices only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/svinfo</code>: Topic <code class="language-plaintext highlighter-rouge">~navsvinfo</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/velned</code>: Topic <code class="language-plaintext highlighter-rouge">~navvelned</code>. <strong>Firmware &lt;= 6 only.</strong> For firmware 7 and above, see NavPVT</li>
</ul>

<h3 id="esf-messages">ESF messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/esf/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code> for <strong>ADR/UDR devices</strong>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/alg</code>: Topic <code class="language-plaintext highlighter-rouge">~esfalg</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/ins</code>: Topic <code class="language-plaintext highlighter-rouge">~esfins</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/meas</code>: Topic <code class="language-plaintext highlighter-rouge">~esfmeas</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/raw</code>: Topic <code class="language-plaintext highlighter-rouge">~esfraw</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/status</code>: Topic <code class="language-plaintext highlighter-rouge">~esfstatus</code>
</li>
</ul>

<h3 id="hnr-messages">HNR messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/hnr/pvt</code>: Topic <code class="language-plaintext highlighter-rouge">~hnrpvt</code>. <strong>ADR/UDR devices only</strong>
</li>
</ul>

<h3 id="tim-messages">TIM messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/tim/tm2</code>: Topic <code class="language-plaintext highlighter-rouge">timtm2</code>. <strong>TIM devices only</strong>
</li>
</ul>

<h2 id="launch">Launch</h2>

<p>A sample launch file <code class="language-plaintext highlighter-rouge">ublox_device.launch</code> loads the parameters from a <code class="language-plaintext highlighter-rouge">.yaml</code> file in the <code class="language-plaintext highlighter-rouge">ublox_gps/config</code> folder, sample configuration files are included. The required arguments are <code class="language-plaintext highlighter-rouge">node_name</code> and <code class="language-plaintext highlighter-rouge">param_file_name</code>.
The two topics to which you should subscribe are <code class="language-plaintext highlighter-rouge">~fix</code> and <code class="language-plaintext highlighter-rouge">~fix_velocity</code>. The angular component of <code class="language-plaintext highlighter-rouge">fix_velocity</code> is unused.</p>

<h1 id="version-history">Version history</h1>

<ul>
  <li>
<strong>1.1.4</strong>:
    <ul>
      <li>Added messages for firmware 9: <code class="language-plaintext highlighter-rouge">NavRELPOSNED9</code>.</li>
      <li>Added option to publish <code class="language-plaintext highlighter-rouge">sensor_msgs/Imu</code> message for High Precision Position Receiver devices with firmware version &gt;= 9 for moving base applications (For example ZED-F9P; <a href="https://www.u-blox.com/sites/default/files/ZED-F9P-MovingBase_AppNote_%28UBX-19009093%29.pdf">UBX-19009093 AppNote</a>).</li>
    </ul>
  </li>
  <li>
<strong>1.1.3</strong>:
    <ul>
      <li>Update by TUC-ProAut</li>
      <li>Added raw data stream output. To publish ros messages set rosparam <code class="language-plaintext highlighter-rouge">raw_data_stream/publish</code> to true. To store to a logfile set rosparam <code class="language-plaintext highlighter-rouge">set raw_data_stream/dir</code> to the appropriated directory. This feature has nothing todo with Raw Data Products.</li>
      <li>Added flag <code class="language-plaintext highlighter-rouge">config_on_startup</code> to deactivate configuration of ublox.</li>
    </ul>
  </li>
  <li>
<strong>1.1.2</strong>:
    <ul>
      <li>BUG FIX for NavSatFix messages for firmware &gt;=7. The NavSatFix now only uses the NavPVT message time if it is valid, otherwise it uses ROS time.</li>
      <li>BUG FIX for TMODE3 Fixed mode configuration. The ARP High Precision position is now configured correctly.</li>
      <li>BUG FIX for <code class="language-plaintext highlighter-rouge">NavDGPS</code> message which had the wrong Message ID.</li>
      <li>After GNSS configuration &amp; reset, I/O resets automatically, without need for restart.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">UBX-UPD</code> messages. For firmware version 8, the node can now save the flash memory on shutdown and clear the flash memory during configuration based on ROS params.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">CfgGPS</code> message and <code class="language-plaintext highlighter-rouge">MonHW6</code> message for firmware version 6.</li>
      <li>Added respawn parameters to example launch file.</li>
      <li>Added parameters to load/save configuration.</li>
      <li>Added raw_data parameter for Raw Data Products.</li>
      <li>Changed name of “subscribe” parameter namespace to “publish” for clarity.</li>
      <li>Migrated all callback handling to <code class="language-plaintext highlighter-rouge">callback.h</code> from <code class="language-plaintext highlighter-rouge">gps.h</code> and <code class="language-plaintext highlighter-rouge">gps.cpp</code>. ACK messages are now processed through callback handlers.</li>
      <li>Modified how the I/O stream is initialized so that the node now handles parsing the port string.</li>
      <li>Changed class names of Ublox product components (e.g. UbloxTim -&gt; TimProduct) for clarity.</li>
      <li>Cleaned up ublox custom serialization classes by adding typedefs and using count to determine repeating block statements instead of using try-catch statements to serialize stream.</li>
      <li>Added doxygen documentation</li>
    </ul>
  </li>
  <li>
<strong>1.1.1</strong>:
    <ul>
      <li>BUG FIX for acknowledgments. The last received ack message was accessed by multiple threads but was not atomic. This variable is now thread safe.</li>
      <li>BUG FIX for GNSS configuration for Firmware 8, the GNSS configuration is now verified &amp; modified properly.</li>
      <li>BUG FIX for fix diagnostics. NumSV was displaying incorrectly. For firmware versions &gt;=7, the NavPVT flags variable is now compared to the constants from the NavPVT message not NavSOL.</li>
      <li>Removed ublox_version param, value is now determined by parsing MonVER.</li>
      <li>Organized parameters into namespaces.</li>
      <li>Better parameter checking. Checks that unsigned ints and vectors of unsigned ints are in bounds.</li>
      <li>Changed rtcm/rate parameter to a vector instead of a scalar, now each RTCM id can be set to a different rate.</li>
      <li>Diagnostic variables are displayed more clearly with units included.</li>
      <li>For HPG Rovers, added diagnostic updater for Carrier Phase Solution.</li>
      <li>Added CfgNMEA messages for each firmware version and a CfgDAT message, as well as parameters to configure the NMEA and Datum.</li>
      <li>Added constants for NavSAT_SV flags bit mask.</li>
    </ul>
  </li>
  <li>
<strong>1.1.0</strong>:
    <ul>
      <li>BUG FIX for NAV-PVT messages for firmware 7. The NAV-PVT message is shorter for firmware version 7, the new message is <code class="language-plaintext highlighter-rouge">NavPVT7</code>
</li>
      <li>BUG FIX for SBAS configuration, it now configures SBAS only if the device is SBAS capable. Previously, if enable_sbas was set to false, it would not configure, meaning that SBAS could not be turned off.</li>
      <li>BUG FIX, the baudrate of the serial I/O port was not configured correctly, on the device it was set to the user desired settings, but on the computer it was always set to 4800.</li>
      <li>BUG FIX, Diagnostics for Nav Status are now updated in firmware version 6.</li>
      <li>BUG FIX, The method which waited for ACKs now checks if the ACK is from the correct class and message ID.</li>
      <li>Added messages for <code class="language-plaintext highlighter-rouge">CfgTMODE3</code>, <code class="language-plaintext highlighter-rouge">CfgHNR</code>, <code class="language-plaintext highlighter-rouge">CfgRST</code>, <code class="language-plaintext highlighter-rouge">CfgINF</code>, <code class="language-plaintext highlighter-rouge">NavATT</code>, <code class="language-plaintext highlighter-rouge">ESF</code> messages, <code class="language-plaintext highlighter-rouge">Inf</code> message (for all INF types), <code class="language-plaintext highlighter-rouge">HnrPVT</code>, <code class="language-plaintext highlighter-rouge">MgaGAL</code>, <code class="language-plaintext highlighter-rouge">NavSAT</code>, <code class="language-plaintext highlighter-rouge">MonHw</code>, <code class="language-plaintext highlighter-rouge">NavPVT7</code> (for firmware version 7).</li>
      <li>Restructured Node class so that it now uses composition. The main node contains instances of classes which implement <code class="language-plaintext highlighter-rouge">UBloxInterface</code>, and calls the methods for each interface added to the node. The classes which implement the interface add new features that are not generic to all firmware versions or products. Each firmware version (6-8) has an interface, and each product category has one (SPG, HPG REF, HPG ROV, TIM, FTS, ADR/UDR). The product type is determined from parsing the <code class="language-plaintext highlighter-rouge">MonVER</code> message.</li>
      <li>Added implementations of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> called <code class="language-plaintext highlighter-rouge">UbloxHpgRef</code> and <code class="language-plaintext highlighter-rouge">UbloxHpgRov</code> for HPG reference station and rover devices. The reference station tmode3 can be configured upon startup (see Options section) and the rover dgnss mode can be set. After survey in, once the reference station entire time mode, the nav_rate is set to the user desired value (it must be 1 Hz during survey-in) and the RTCM output messages are enabled. The state can be monitored through the rqt_runtime_monitor. These classes were tested on C94-M8P devices.</li>
      <li>Added an implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> called <code class="language-plaintext highlighter-rouge">UbloxAdrUdr</code> for ADR/UDR devices. It which subscribes to <code class="language-plaintext highlighter-rouge">NavATT</code> and ESF messages and configures useAdr. The diagnostics monitor specific to these devices is not implemented. This class has not been tested on a hardware device.</li>
      <li>Added a partial implementation of <code class="language-plaintext highlighter-rouge">UbloxTim</code> for TIM devices which subscribes to <code class="language-plaintext highlighter-rouge">RxmRAWX</code> and <code class="language-plaintext highlighter-rouge">RxmSFRBX</code> messages. The <code class="language-plaintext highlighter-rouge">getRosParams()</code>, <code class="language-plaintext highlighter-rouge">configureUblox()</code>, and <code class="language-plaintext highlighter-rouge">initializeDiagnostics()</code> methods are unimplemented.</li>
      <li>Added a skeleton class for <code class="language-plaintext highlighter-rouge">UbloxFts</code> for FTS devices which is unimplemented. See the <code class="language-plaintext highlighter-rouge">ublox_gps</code> <code class="language-plaintext highlighter-rouge">node.cpp</code> and <code class="language-plaintext highlighter-rouge">node.h</code> files.</li>
      <li>Changed how GNSS is configured in firmware version 8. The documentation recommends a cold restart after reconfiguring the GNSS, and will reset the device if it receives a <code class="language-plaintext highlighter-rouge">CfgGNSS</code> message, even if the settings do not change. For firmware version 8, before reconfiguring, the node first checks if the current GNSS settings are the same as the desired settings. If so, it will not send a CfgGNSS message to the device. After reconfiguring, it will cold reset the GNSS.</li>
      <li>Migrated I/O initialization to the <code class="language-plaintext highlighter-rouge">Gps</code> class from the <code class="language-plaintext highlighter-rouge">Node</code> class.</li>
      <li>INF messages are now printed to the ROS console.</li>
      <li>Changed how debug statements are displayed. If the debug parameter is set to 1 or greater, it prints debug messages.</li>
    </ul>
  </li>
  <li>
<strong>1.0.0</strong>:
    <ul>
      <li>Added messages for firmware 8: <code class="language-plaintext highlighter-rouge">NavPVT</code>, <code class="language-plaintext highlighter-rouge">RxmRAWX</code>, <code class="language-plaintext highlighter-rouge">RxmSFRBX</code>.</li>
      <li>Modified ConfigGNSS and MonVER to include repeated blocks and added 
ConfigGNSS_Block (configures all GNSS at once) and MonVER_Extension 
(for MonVER_Char blocks).</li>
      <li>MonVER info is now published upon initialization.</li>
      <li>Fixed SBAS crashing issue (node crashed if device didn’t have SBAS 
capabilities)</li>
      <li>Modified remaining messages to update to firmware 8</li>
      <li>Added <code class="language-plaintext highlighter-rouge">UbloxNode</code> abstract class which does all previous node functions which 
are the same for all firmware versions. Added subclasses which do functions
specific to a given firmware version (e.g. subscribing to NavPVT messages).</li>
      <li>Added a read lock to AsyncWorker</li>
      <li>Removed hard-coded values from <code class="language-plaintext highlighter-rouge">Gps</code> and <code class="language-plaintext highlighter-rouge">Node</code> classes specific to a certain 
device and changed them to configurable parameters. Modified example
launch file accordingly.</li>
      <li>Added example parameter yaml files and launch file to load parameters from
this file.</li>
      <li>Moved implementations of Callback functions into <code class="language-plaintext highlighter-rouge">callback.h</code> (from <code class="language-plaintext highlighter-rouge">gps.h</code> 
and <code class="language-plaintext highlighter-rouge">gps.cpp</code>)</li>
      <li>Updated formatting of some files per google style guide spec (e.g. 80 chars
per line).</li>
    </ul>
  </li>
  <li>
<strong>0.0.5</strong>:
    <ul>
      <li>Reformat files under <code class="language-plaintext highlighter-rouge">ublox_gps</code>
</li>
    </ul>
  </li>
  <li>
<strong>0.0.4</strong>:
    <ul>
      <li>Added install targets.</li>
    </ul>
  </li>
  <li>
<strong>0.0.3</strong>:
    <ul>
      <li>Added the <code class="language-plaintext highlighter-rouge">enable_glonass</code>, <code class="language-plaintext highlighter-rouge">enable_beidou</code> and <code class="language-plaintext highlighter-rouge">enable_ppp</code> options.</li>
      <li>Added the <code class="language-plaintext highlighter-rouge">ublox_version</code> option. Consult known issues for important details.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">numSVs</code> field to the RQT monitor.</li>
    </ul>
  </li>
  <li>
<strong>0.0.2</strong>:
    <ul>
      <li>Changed <code class="language-plaintext highlighter-rouge">meas_rate</code> to simply <code class="language-plaintext highlighter-rouge">rate</code>, which is in Hz. <code class="language-plaintext highlighter-rouge">meas_rate</code> is computed automatically.</li>
    </ul>
  </li>
  <li>
<strong>0.0.1</strong>:
    <ul>
      <li>All topics are now published on a private node handle.</li>
      <li>Velocities are published as stamped twist messages with covariance. Angular components are unused.</li>
      <li>
<code class="language-plaintext highlighter-rouge">hAcc</code>, <code class="language-plaintext highlighter-rouge">vAcc</code> and <code class="language-plaintext highlighter-rouge">sAcc</code> are used to generate diagonal covariances.</li>
      <li>Velocities use the correct convention: X-Y-Z = East-North-Up.</li>
      <li>2D <strong>or</strong> 3D fix correspond to <code class="language-plaintext highlighter-rouge">STATUS_FIX</code> (previously only 3D).</li>
      <li>
<code class="language-plaintext highlighter-rouge">fix</code> and <code class="language-plaintext highlighter-rouge">fix_velocity</code> are time-stamped synchronously, using the <code class="language-plaintext highlighter-rouge">iTOW</code> to check arrival times.</li>
      <li>Added options for changing the CFG-NAV5 settings (see above).</li>
      <li>Added support for <code class="language-plaintext highlighter-rouge">diagnostic_updater</code>.</li>
      <li>
<em>“received ACK”</em> messages are elevated to debug level 2.</li>
      <li>Corrected issue where baudrate was not set correctly using rosparam.</li>
      <li>Corrected issue where socket destructors were not called.</li>
    </ul>
  </li>
  <li>
<strong>0.0.0</strong>:
    <ul>
      <li>Forked from https://github.com/tu-darmstadt-ros-pkg/ublox</li>
      <li>Updated to use catkin.</li>
    </ul>
  </li>
</ul>

<h1 id="adding-new-features">Adding new features</h1>
<h2 id="adding-new-messages">Adding new messages</h2>
<ol>
  <li>
    <p>Create the .msg file and add it to <code class="language-plaintext highlighter-rouge">ublox_msgs/msg</code>. Make sure the file includes the constants <code class="language-plaintext highlighter-rouge">CLASS_ID</code> and <code class="language-plaintext highlighter-rouge">MESSAGE_ID</code>.</p>
  </li>
  <li>
    <p>Modify <code class="language-plaintext highlighter-rouge">ublox_msgs/include/ublox_msgs/ublox_msgs.h</code>. 
a. Include the message header. 
b. Make sure the message’s class constant is declared in the <code class="language-plaintext highlighter-rouge">ublox_msgs::Class</code> namespace. 
c. Declare the message’s ID constant in the <code class="language-plaintext highlighter-rouge">ublox_messages::Message::&lt;CLASS_NAME&gt;</code> namespace.</p>
  </li>
  <li>
    <p>Declare the message in <code class="language-plaintext highlighter-rouge">ublox_msgs/src/ublox_msgs.cpp</code>.</p>
  </li>
  <li>
    <p>If the message has a repeated or optional block of varying size, create an additional message for the repeating block and include it in the message. 
a. Include the block message in the <code class="language-plaintext highlighter-rouge">ublox_msgs/include/ublox_msgs/ublox_msgs.h</code> file. 
b. Modify <code class="language-plaintext highlighter-rouge">ublox_msgs/include/ublox/serialization/ublox_msgs.h</code> and add a custom <code class="language-plaintext highlighter-rouge">Serializer</code>. If the message doesn’t include the number of repeating/optional blocks as a parameter, you can infer it from the count/size of the message, which is the length of the payload.</p>
  </li>
  <li>
    <p>Modify <code class="language-plaintext highlighter-rouge">ublox_gps/src/node.cpp</code> (and the header file if necessary) to either subscribe to the message or send the configuration message. Be sure to modify the appropriate subscribe function. For messages which apply to all firmware/hardware, modify <code class="language-plaintext highlighter-rouge">UbloxNode::subscribe()</code>. Otherwise modify the appropriate firmware or hardware’s subscribe function, e.g. <code class="language-plaintext highlighter-rouge">UbloxFirmware8::subscribe()</code>, <code class="language-plaintext highlighter-rouge">HpgRovProduct::subscribe()</code>. If the message is a configuration message, consider modifying <code class="language-plaintext highlighter-rouge">ublox_gps/src/gps.cpp</code> (and the header file) to add a configuration function.</p>
  </li>
</ol>

<h3 id="one-message-protocol-for-multiple-ids-eg-inf-message">One message protocol for multiple IDs (e.g. INF message)</h3>
<p>If a given message protocol applies to multiple message IDs (e.g. the <code class="language-plaintext highlighter-rouge">Inf</code> message), do not include the message ID in the message itself.
When declaring the message, for the first declaration, use <code class="language-plaintext highlighter-rouge">DECLARE_UBLOX_MESSAGE</code> macro. For the following declarations use the <code class="language-plaintext highlighter-rouge">DECLARE_UBLOX_MESSAGE_ID</code> macro.</p>

<h2 id="adding-device--firmware-specific-functionality">Adding device / firmware specific functionality</h2>

<p>The <code class="language-plaintext highlighter-rouge">node.cpp</code> file in <code class="language-plaintext highlighter-rouge">ublox_gps</code> contains a main Node class called UbloxNode which acts as the ROS Node and handles the node initialization, publishers, and diagnostics. <code class="language-plaintext highlighter-rouge">UbloxNode</code> contains a vector <code class="language-plaintext highlighter-rouge">components_</code> of instances of <code class="language-plaintext highlighter-rouge">ComponentInterface</code>. The <code class="language-plaintext highlighter-rouge">UbloxNode::initialize()</code> calls each component’s public interface methods. The node contains components for both the firmware version and the product category, which are added after parsing the <code class="language-plaintext highlighter-rouge">MonVER</code> message. Any class which implements <code class="language-plaintext highlighter-rouge">ComponentInterface</code> can be added to the <code class="language-plaintext highlighter-rouge">UbloxNode</code> <code class="language-plaintext highlighter-rouge">components_</code> vector and its methods will be called by <code class="language-plaintext highlighter-rouge">UbloxNode</code>. Simply add an implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> to the ublox_gps <code class="language-plaintext highlighter-rouge">node.h</code> and <code class="language-plaintext highlighter-rouge">node.cpp</code> files. Behavior specific to a given firmware or product should not be implemented in the <code class="language-plaintext highlighter-rouge">UbloxNode</code> class and instead should be implemented in an implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code>.</p>

<p>Currently there are implementations of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> for firmware versions 6-8 and product categories <code class="language-plaintext highlighter-rouge">HpgRefProduct</code>, <code class="language-plaintext highlighter-rouge">HpgRovProduct</code>, <code class="language-plaintext highlighter-rouge">AdrUdrProduct</code>, <code class="language-plaintext highlighter-rouge">TimProduct</code>, <code class="language-plaintext highlighter-rouge">FtsProduct</code>.  SPG products do not have their own implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code>, since the Firmware classes implement all of the behavior of SPG devices.</p>

<p><code class="language-plaintext highlighter-rouge">HpgRefProduct</code> and <code class="language-plaintext highlighter-rouge">HpgRovProduct</code> have been tested on the C94-M8P device.</p>

<h2 id="adding-new-parameters">Adding new parameters</h2>
<ol>
  <li>Modify the <code class="language-plaintext highlighter-rouge">getRosParams()</code> method in the appropriate implementation of ComponentInterface (e.g. UbloxNode, UbloxFirmware8, HpgRefProduct, etc.) and get the parameter. Group multiple related parameters into a namespace. Use all lower case names for parameters and namespaces separated with underscores.
    <ul>
      <li>If the type is an unsigned integer (of any size) or vector of unsigned integers, use the <code class="language-plaintext highlighter-rouge">ublox_node::getRosUint</code> method which will verify the bounds of the parameter.</li>
      <li>If the type is an int8 or int16 or vector of int8’s or int16’s, use the <code class="language-plaintext highlighter-rouge">ublox_nod::getRosInt</code> method which will verify the bounds of the parameter. (This method can also be used for int32’s but ROS has methods to get int32 parameters as well).</li>
    </ul>
  </li>
  <li>If the parameter is used during configuration also modify the <code class="language-plaintext highlighter-rouge">ComponentInterface</code>’s <code class="language-plaintext highlighter-rouge">configureUblox()</code> method to send the appropriate configuration message. Do not send configuration messages in <code class="language-plaintext highlighter-rouge">getRosParams()</code>.</li>
  <li>Modify this README file and add the parameter name and description in the appropriate section. State whether there is a default value or if the parameter is required.</li>
  <li>Modify one of the sample <code class="language-plaintext highlighter-rouge">.yaml</code> configuration files in <code class="language-plaintext highlighter-rouge">ublox_gps/config</code> to include the parameter or add a new sample <code class="language-plaintext highlighter-rouge">.yaml</code> for your device.</li>
</ol>

<h1 id="known-issues">Known Issues</h1>

<h2 id="unimplemented--untested-devices">Unimplemented / Untested Devices</h2>

<p><code class="language-plaintext highlighter-rouge">TimProduct</code> and <code class="language-plaintext highlighter-rouge">FtsProduct</code> are currently unimplemented skeleton classes. <code class="language-plaintext highlighter-rouge">AdrUdrProduct</code> is implemented, with the exception of <code class="language-plaintext highlighter-rouge">initializeRosDiagnostics()</code> and has not been tested on hardware.</p>

<p><code class="language-plaintext highlighter-rouge">UbloxFirmware7</code> has not been properly tested on a device with firmware version 7. <code class="language-plaintext highlighter-rouge">UbloxFirmware6</code> has been tested on a device with firmware version 8, but not with firmware version 6.</p>

<h2 id="debugging">Debugging</h2>

<p>For debugging messages set the debug parameter to &gt; 0. The range for debug is 0-4. At level 1 it prints configuration messages and checksum errors, at level 2 it also prints ACK/NACK messages and sent messages. At level 3 it prints the received bytes being decoded by a specific message reader. At level 4 it prints the incoming buffer before it is split by message header.</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<ol>
  <li>Why can’t the ublox_gps node open my device, even though I have correctly specified the path in <code class="language-plaintext highlighter-rouge">/dev</code>?
    <ul>
      <li>Make sure you are the owner of the device, or a member of <code class="language-plaintext highlighter-rouge">dialout</code> group.</li>
    </ul>
  </li>
</ol>

<h1 id="links">Links</h1>
<p>Consult the <a href="https://www.u-blox.com/sites/default/files/products/documents/u-blox8-M8_ReceiverDescrProtSpec_(UBX-13003221)_Public.pdf">official protocol spec</a> for details on packets supported by u-blox devices.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ublox">ublox</a> <small>repository</small></h3>
        <span class="label label-default">gps</span> <span class="label label-default">ublox</span> <span class="label label-default">ros</span> <span class="label label-default">ros-driver</span> <span class="label label-default">ublox-gps</span> 
        
        <a class="label label-primary pkg-label" href="/p/ublox">ublox</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_gps">ublox_gps</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_msgs">ublox_msgs</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_serialization">ublox_serialization</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-KumarRobotics-ublox
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-KumarRobotics-ublox" role="menuitem" tabindex="-1" href="/r/ublox/github-KumarRobotics-ublox" data="github-KumarRobotics-ublox">
                    <span class="glyphicon glyphicon-star"></span>
                    github-KumarRobotics-ublox
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">A driver for ublox gps</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/KumarRobotics/ublox.git">https://github.com/KumarRobotics/ublox.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">galactic-devel</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2022-04-13
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">gps</span> <span class="label label-default">ublox</span> <span class="label label-default">ros</span> <span class="label label-default">ros-driver</span> <span class="label label-default">ublox-gps</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ublox/#galactic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ublox/#galactic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ublox/#galactic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ublox">ublox</a></td>
                    <td>2.2.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_gps">ublox_gps</a></td>
                    <td>2.2.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_msgs">ublox_msgs</a></td>
                    <td>2.2.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_serialization">ublox_serialization</a></td>
                    <td>2.2.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="ublox">ublox</h1>
<p>The <code class="language-plaintext highlighter-rouge">ublox</code> package provides support for <a href="http://www.u-blox.com">u-blox</a> GPS receivers. Only the <em>serial</em> configuration of the driver is documented here, but TCP/UDP communication is also supported by the driver (untested).</p>

<p>The driver was originally written by Johannes Meyer. Changes made later are detailed in the version history below.</p>

<h2 id="options">Options</h2>

<p>Example .yaml configuration files are included in <code class="language-plaintext highlighter-rouge">ublox_gps/config</code>. Consult the u-blox documentation for your device for the recommended settings.</p>

<p>The <code class="language-plaintext highlighter-rouge">ublox_gps</code> node supports the following parameters for all products and firmware versions:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">device</code>: Path to the device port. Defaults to <code class="language-plaintext highlighter-rouge">/dev/ttyACM0</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">raw_data</code>: Whether the device is a raw data product. Defaults to false. Firmware &lt;= 7.03 only.</li>
  <li>
<code class="language-plaintext highlighter-rouge">load</code>: Parameters for loading the configuration to non-volatile memory. See <code class="language-plaintext highlighter-rouge">ublox_msgs/CfgCFG.msg</code>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">load/mask</code>: uint32_t. Mask of the configurations to load.</li>
      <li>
<code class="language-plaintext highlighter-rouge">load/device</code>: uint32_t. Mask which selects the devices for the load command.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">save</code>: Parameters for saving the configuration to non-volatile memory. See <code class="language-plaintext highlighter-rouge">ublox_msgs/CfgCFG.msg</code>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">save/mask</code>: uint32_t. Mask of the configurations to save.</li>
      <li>
<code class="language-plaintext highlighter-rouge">save/device</code>: uint32_t. Mask which selects the devices for the save command.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">uart1/baudrate</code>: Bit rate of the serial communication. Defaults to 9600.</li>
  <li>
<code class="language-plaintext highlighter-rouge">uart1/in</code>: UART1 in communication protocol. Defaults to UBX, NMEA &amp; RTCM. See <code class="language-plaintext highlighter-rouge">CfgPRT</code> message for possible values.</li>
  <li>
<code class="language-plaintext highlighter-rouge">uart1/out</code>: UART1 out communication protocol. Defaults to UBX, NMEA &amp; RTCM. See <code class="language-plaintext highlighter-rouge">CfgPRT</code> message for possible values.</li>
  <li>
<code class="language-plaintext highlighter-rouge">frame_id</code>: ROS name prepended to frames produced by the node. Defaults to <code class="language-plaintext highlighter-rouge">gps</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">rate</code>: Rate in Hz of measurements. Defaults to 4.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nav_rate</code>: How often navigation solutions are published in number of measurement cycles. Defaults to 1.</li>
  <li>
<code class="language-plaintext highlighter-rouge">enable_ppp</code>: Enable precise-point-positioning system. Defaults to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">gnss/sbas</code>: Enable satellite-based augmentation system. Defaults to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sbas/max</code>: Maximum number of SBAS channels. Defaults to 0.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sbas/usage</code>: See <code class="language-plaintext highlighter-rouge">CfgSBAS</code> message for details. Defaults to 0.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dynamic_model</code>: Possible values below. Defaults to <code class="language-plaintext highlighter-rouge">portable</code>. See u-blox documentation for further description.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">portable</code></li>
      <li><code class="language-plaintext highlighter-rouge">stationary</code></li>
      <li><code class="language-plaintext highlighter-rouge">pedestrian</code></li>
      <li><code class="language-plaintext highlighter-rouge">automotive</code></li>
      <li><code class="language-plaintext highlighter-rouge">sea</code></li>
      <li>
<code class="language-plaintext highlighter-rouge">airborne1</code>: Airborne, max acceleration = 1G</li>
      <li>
<code class="language-plaintext highlighter-rouge">airborne2</code>: Airborne, max acceleration = 2G</li>
      <li>
<code class="language-plaintext highlighter-rouge">airborne4</code>: Airborne, max acceleration = 4G</li>
      <li><code class="language-plaintext highlighter-rouge">wristwatch</code></li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">fix_mode</code>: Type of fixes supported: <code class="language-plaintext highlighter-rouge">2d</code>, <code class="language-plaintext highlighter-rouge">3d</code> or <code class="language-plaintext highlighter-rouge">both</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dr_limit</code>: Max time in seconds to use dead reckoning after signal is lost. Defaults to 0.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dat</code>: Configuring the datum type (optional). See the CfgDAT message.
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">dat/set</code>: If true, the node will the datum based on the parameters below (required if true). Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/majA</code>: Semi-major Axis [m]</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/flat</code>: 1.0 / Flattening</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/shift</code>: [X-axis, Y-axis, Z-axis] shift [m]</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/rot</code>: [X, Y, Z] rotation [s]</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/scale</code>: scale change [ppm]</li>
    </ul>
  </li>
</ul>

<h3 id="for-firmware-version-6">For firmware version 6:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/set</code>: If true, the NMEA will be configured with the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/version</code>: NMEA version. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/num_sv</code>: Maximum Number of SVs to report per TalkerId. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/compat</code>: Enable compatibility mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/consider</code>: Enable considering mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/filter</code>: Namespace for filter flags.
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/pos</code>: Disable position filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/msk_pos</code>: Disable masked position filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/time</code>: Disable time filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/date</code>: Disable date filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/sbas</code>: Enable SBAS filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/track</code>: Disable track filtering. Defaults to false.</li>
    </ul>
  </li>
</ul>

<h3 id="for-devices-with-firmware--7">For devices with firmware &gt;= 7:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">gnss</code> parameters:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/gps</code>: Enable GPS receiver. Defaults to true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/glonass</code>: Enable GLONASS receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/beidou</code>: Enable BeiDou receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/qzss</code>: Enable QZSS receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/qzss_sig_cfg</code>: QZSS signal configuration. Defaults to L1CA. See <code class="language-plaintext highlighter-rouge">CfgGNSS</code> message for constants.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea</code> parameters:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/set</code>: If true, the NMEA will be configured.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/version</code>: NMEA version. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/num_sv</code>: Maximum Number of SVs to report per TalkerId. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/sv_numbering</code>: Configures the display of satellites that do not have an NMEA-defined value. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/compat</code>: Enable compatibility mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/consider</code>: Enable considering mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/limit82</code>: Enable strict limit to 82 characters maximum. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/high_prec</code>: Enable high precision mode. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter</code>: Namespace for filter flags.
        <ul>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/pos</code>: Enable position output for failed or invalid fixes. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/msk_pos</code>: Enable position output for invalid fixes. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/time</code>: Enable time output for invalid times. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/date</code>: Enable date output for invalid dates. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/gps_only</code>: Restrict output to GPS satellites only. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/track</code>: Enable COG output even if COG is frozen. Defaults to false.</li>
        </ul>
      </li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt</code>: Filters out satellites based on their GNSS.
        <ul>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/gps</code>: Disable reporting of GPS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/sbas</code>: Disable reporting of SBAS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/qzss</code>: Disable reporting of QZSS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/glonass</code>: Disable reporting of GLONASS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/beidou</code>: Disable reporting of BeiDou satellites. Defaults to false.</li>
        </ul>
      </li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/main_talker_id</code>: This field enables the main Talker ID to be overridden. Defaults to 0.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/gsv_talker_id</code>:  This field enables the GSV Talker ID to be overridden. Defaults to [0, 0].</li>
    </ul>
  </li>
</ul>

<h3 id="for-devices-with-firmware--8">For devices with firmware &gt;= 8:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">save_on_shutdown</code>: If true, the node will send a <code class="language-plaintext highlighter-rouge">UBX-UPD-SOS</code> command to save the BBR to flash memory on shutdown. Defaults to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">clear_bbr</code>: If true, the node will send a <code class="language-plaintext highlighter-rouge">UBX-UPD-SOS</code> command to clear the flash memory during configuration. Defaults to false.</li>
  <li>Additional <code class="language-plaintext highlighter-rouge">gnss</code> params
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/galileo</code>: Enable Galileo receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/imes</code>: Enable IMES receiver. Defaults to false.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/bds_talker_id</code>: (See other NMEA configuration parameters above) Sets the two characters that should be used for the BeiDou Talker ID.</li>
</ul>

<h3 id="for-udradr-devices">For UDR/ADR devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">use_adr</code>: Enable ADR/UDR. Defaults to true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nav_rate</code> should be set to 1 Hz.</li>
</ul>

<h3 id="for-hpg-reference-devices">For HPG Reference devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">tmode3</code>: Time Mode. Required. See CfgTMODE3 for constants.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/lla_flag</code>: True if the Fixed position is in Lat, Lon, Alt coordinates. False if ECEF. Required if <code class="language-plaintext highlighter-rouge">tmode3</code> is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/position</code>: Antenna Reference Point position in [m] or [deg]. Required if <code class="language-plaintext highlighter-rouge">tmode3</code> is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/position_hp</code>: Antenna Reference Point High Precision position in [0.1 mm] or [deg * 1e-9]. Required if tmode3 is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/acc</code>: Fixed position accuracy in [m]. Required if <code class="language-plaintext highlighter-rouge">tmode3</code> is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sv_in/reset</code>: Whether or not to reset the survey in upon initialization. If false, it will only reset if the TMODE is disabled. Defaults to true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sv_in/min_dur</code>: The minimum Survey-In Duration time in seconds. Required tmode3 is set to survey in.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sv_in/acc_lim</code>: The minimum accuracy level of the survey in position in meters. Required <code class="language-plaintext highlighter-rouge">tmode3</code> is set to survey in.</li>
</ul>

<h3 id="for-hpg-rover-devices">For HPG Rover devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">dgnss_mode</code>: The Differential GNSS mode. Defaults to RTK FIXED. See <code class="language-plaintext highlighter-rouge">CfgDGNSS</code> message for constants.</li>
</ul>

<h3 id="for-tim-devices">For TIM devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">tim_tm2</code>: Enable this message for GPS time-stamps everytime an external interrupt signal is received.</li>
</ul>

<h3 id="for-fts-devices">For FTS devices:</h3>
<ul>
  <li>currently unimplemented. See <code class="language-plaintext highlighter-rouge">FtsProduct</code> class in <code class="language-plaintext highlighter-rouge">ublox_gps</code> package <code class="language-plaintext highlighter-rouge">node.h</code> &amp; <code class="language-plaintext highlighter-rouge">node.cpp</code> files.</li>
</ul>

<h2 id="fix-topics">Fix Topics</h2>

<p><code class="language-plaintext highlighter-rouge">~fix</code>(<a href="http://docs.ros.org/api/sensor_msgs/html/msg/NavSatFix.html">sensor_msgs/NavSatFix</a>)</p>

<p>Navigation Satellite fix.</p>

<p><code class="language-plaintext highlighter-rouge">~fix_velocity</code>(<a href="http://docs.ros.org/jade/api/geometry_msgs/html/msg/TwistWithCovarianceStamped.html">geometry_msgs/TwistWithCovarianceStamped</a>)</p>

<p>Velocity in local ENU frame.</p>

<h2 id="inf-messages">INF messages</h2>
<p>To enable printing INF messages to the ROS console, set the parameters below.</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">inf/all</code>: This is the default value for the INF parameters below, which enable printing u-blox <code class="language-plaintext highlighter-rouge">INF</code> messages to the ROS console. It defaults to true. Individual message types can be turned off by setting their corresponding parameter to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/debug</code>: Whether to configure the UBX and NMEA ports to send Debug messages and print received <code class="language-plaintext highlighter-rouge">INF-Debug</code> messages to <code class="language-plaintext highlighter-rouge">ROS_DEBUG</code> console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/error</code>: Whether to enable Error messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Error</code> messages to <code class="language-plaintext highlighter-rouge">ROS_ERROR</code> console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/notice</code>: Whether to enable Notice messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Notice messages to </code>ROS_INFO` console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/test</code>: Whether to enable Test messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Test</code> messages to <code class="language-plaintext highlighter-rouge">ROS_INFO</code> console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/warning</code>: Whether to enable Warning messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Warning</code> messages to the <code class="language-plaintext highlighter-rouge">ROS_WARN</code> console.</li>
</ul>

<h2 id="additional-topics">Additional Topics</h2>
<p>To publish a given u-blox message to a ROS topic, set the parameter shown below to true. The node sets the rate of the u-blox messages to 1 measurement cycle.</p>

<h3 id="all-messages">All messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/all</code>: This is the default value for <code class="language-plaintext highlighter-rouge">publish/&lt;class&gt;/all</code> parameters below. It defaults to false. Individual message classes and messages can be enabled or disabled by setting the parameters described below to false.</li>
</ul>

<h3 id="aid-messages">AID messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/aid/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/alm</code>: Topic <code class="language-plaintext highlighter-rouge">~aidalm</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/eph</code>: Topic <code class="language-plaintext highlighter-rouge">~aideph</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/hui</code>: Topic <code class="language-plaintext highlighter-rouge">~aidhui</code>
</li>
</ul>

<h3 id="rxm-messages">RXM messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/rxm/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/alm</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmalm</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/eph</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmeph</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/raw</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmraw</code>. Type is either <code class="language-plaintext highlighter-rouge">RxmRAW</code> or <code class="language-plaintext highlighter-rouge">RxmRAWX</code> depending on firmware version.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/rtcm</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmrtcm</code>. <strong>Firmware &gt;= 8 only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/sfrb</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmsfrb</code>. Type is either <code class="language-plaintext highlighter-rouge">RxmSFRB</code> or <code class="language-plaintext highlighter-rouge">RxmSFRBX</code> depending on firmware version.</li>
</ul>

<h3 id="mon-messages">MON messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/mon/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/mon/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/mon/hw</code>: Topic <code class="language-plaintext highlighter-rouge">~monhw</code>
</li>
</ul>

<h3 id="nav-messages">NAV messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/mon/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/att</code>: Topic <code class="language-plaintext highlighter-rouge">~navatt</code>. <strong>ADR/UDR devices only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/clock</code>: Topic <code class="language-plaintext highlighter-rouge">~navclock</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/posecef</code>: Topic <code class="language-plaintext highlighter-rouge">~navposecef</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/posllh</code>: Topic <code class="language-plaintext highlighter-rouge">~navposllh</code>. <strong>Firmware &lt;= 6 only.</strong> For firmware 7 and above, see NavPVT</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/pvt</code>: Topic <code class="language-plaintext highlighter-rouge">~navpvt</code>. <strong>Firmware &gt;= 7 only.</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/relposned</code>: Topic <code class="language-plaintext highlighter-rouge">~navrelposned</code>. <strong>HPG Rover devices only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/heading</code>: Topic <code class="language-plaintext highlighter-rouge">~navheading</code>. <strong>HP Position receiver devices only.</strong> For firmware 9 and above</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/sat</code>: Topic <code class="language-plaintext highlighter-rouge">~navsat</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/sol</code>: Topic <code class="language-plaintext highlighter-rouge">~navsol</code>. <strong>Firmware &lt;= 6 only.</strong> For firmware 7 and above, see NavPVT</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/status</code>: Topic <code class="language-plaintext highlighter-rouge">~navstatus</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/svin</code>: Topic <code class="language-plaintext highlighter-rouge">~navsvin</code>. <strong>HPG Reference Station Devices only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/svinfo</code>: Topic <code class="language-plaintext highlighter-rouge">~navsvinfo</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/velned</code>: Topic <code class="language-plaintext highlighter-rouge">~navvelned</code>. <strong>Firmware &lt;= 6 only.</strong> For firmware 7 and above, see NavPVT</li>
</ul>

<h3 id="esf-messages">ESF messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/esf/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code> for <strong>ADR/UDR devices</strong>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/ins</code>: Topic <code class="language-plaintext highlighter-rouge">~esfins</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/meas</code>: Topic <code class="language-plaintext highlighter-rouge">~esfmeas</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/raw</code>: Topic <code class="language-plaintext highlighter-rouge">~esfraw</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/status</code>: Topic <code class="language-plaintext highlighter-rouge">~esfstatus</code>
</li>
</ul>

<h3 id="hnr-messages">HNR messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/hnr/pvt</code>: Topic <code class="language-plaintext highlighter-rouge">~hnrpvt</code>. <strong>ADR/UDR devices only</strong>
</li>
</ul>

<h3 id="tim-messages">TIM messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/tim/tm2</code>: Topic <code class="language-plaintext highlighter-rouge">timtm2</code>. <strong>TIM devices only</strong>
</li>
</ul>

<h2 id="launch">Launch</h2>

<p>A sample launch file <code class="language-plaintext highlighter-rouge">ublox_device.launch</code> loads the parameters from a <code class="language-plaintext highlighter-rouge">.yaml</code> file in the <code class="language-plaintext highlighter-rouge">ublox_gps/config</code> folder, sample configuration files are included. The required arguments are <code class="language-plaintext highlighter-rouge">node_name</code> and <code class="language-plaintext highlighter-rouge">param_file_name</code>.
The two topics to which you should subscribe are <code class="language-plaintext highlighter-rouge">~fix</code> and <code class="language-plaintext highlighter-rouge">~fix_velocity</code>. The angular component of <code class="language-plaintext highlighter-rouge">fix_velocity</code> is unused.</p>

<h1 id="version-history">Version history</h1>

<ul>
  <li>
<strong>1.1.4</strong>:
    <ul>
      <li>Added messages for firmware 9: <code class="language-plaintext highlighter-rouge">NavRELPOSNED9</code>.</li>
      <li>Added option to publish <code class="language-plaintext highlighter-rouge">sensor_msgs/Imu</code> message for High Precision Position Receiver devices with firmware version &gt;= 9 for moving base applications (For example ZED-F9P; <a href="https://www.u-blox.com/sites/default/files/ZED-F9P-MovingBase_AppNote_%28UBX-19009093%29.pdf">UBX-19009093 AppNote</a>).</li>
    </ul>
  </li>
  <li>
<strong>1.1.3</strong>:
    <ul>
      <li>Update by TUC-ProAut</li>
      <li>Added raw data stream output. To publish ros messages set rosparam <code class="language-plaintext highlighter-rouge">raw_data_stream/publish</code> to true. To store to a logfile set rosparam <code class="language-plaintext highlighter-rouge">set raw_data_stream/dir</code> to the appropriated directory. This feature has nothing todo with Raw Data Products.</li>
      <li>Added flag <code class="language-plaintext highlighter-rouge">config_on_startup</code> to deactivate configuration of ublox.</li>
    </ul>
  </li>
  <li>
<strong>1.1.2</strong>:
    <ul>
      <li>BUG FIX for NavSatFix messages for firmware &gt;=7. The NavSatFix now only uses the NavPVT message time if it is valid, otherwise it uses ROS time.</li>
      <li>BUG FIX for TMODE3 Fixed mode configuration. The ARP High Precision position is now configured correctly.</li>
      <li>BUG FIX for <code class="language-plaintext highlighter-rouge">NavDGPS</code> message which had the wrong Message ID.</li>
      <li>After GNSS configuration &amp; reset, I/O resets automatically, without need for restart.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">UBX-UPD</code> messages. For firmware version 8, the node can now save the flash memory on shutdown and clear the flash memory during configuration based on ROS params.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">CfgGPS</code> message and <code class="language-plaintext highlighter-rouge">MonHW6</code> message for firmware version 6.</li>
      <li>Added respawn parameters to example launch file.</li>
      <li>Added parameters to load/save configuration.</li>
      <li>Added raw_data parameter for Raw Data Products.</li>
      <li>Changed name of “subscribe” parameter namespace to “publish” for clarity.</li>
      <li>Migrated all callback handling to <code class="language-plaintext highlighter-rouge">callback.h</code> from <code class="language-plaintext highlighter-rouge">gps.h</code> and <code class="language-plaintext highlighter-rouge">gps.cpp</code>. ACK messages are now processed through callback handlers.</li>
      <li>Modified how the I/O stream is initialized so that the node now handles parsing the port string.</li>
      <li>Changed class names of Ublox product components (e.g. UbloxTim -&gt; TimProduct) for clarity.</li>
      <li>Cleaned up ublox custom serialization classes by adding typedefs and using count to determine repeating block statements instead of using try-catch statements to serialize stream.</li>
      <li>Added doxygen documentation</li>
    </ul>
  </li>
  <li>
<strong>1.1.1</strong>:
    <ul>
      <li>BUG FIX for acknowledgments. The last received ack message was accessed by multiple threads but was not atomic. This variable is now thread safe.</li>
      <li>BUG FIX for GNSS configuration for Firmware 8, the GNSS configuration is now verified &amp; modified properly.</li>
      <li>BUG FIX for fix diagnostics. NumSV was displaying incorrectly. For firmware versions &gt;=7, the NavPVT flags variable is now compared to the constants from the NavPVT message not NavSOL.</li>
      <li>Removed ublox_version param, value is now determined by parsing MonVER.</li>
      <li>Organized parameters into namespaces.</li>
      <li>Better parameter checking. Checks that unsigned ints and vectors of unsigned ints are in bounds.</li>
      <li>Changed rtcm/rate parameter to a vector instead of a scalar, now each RTCM id can be set to a different rate.</li>
      <li>Diagnostic variables are displayed more clearly with units included.</li>
      <li>For HPG Rovers, added diagnostic updater for Carrier Phase Solution.</li>
      <li>Added CfgNMEA messages for each firmware version and a CfgDAT message, as well as parameters to configure the NMEA and Datum.</li>
      <li>Added constants for NavSAT_SV flags bit mask.</li>
    </ul>
  </li>
  <li>
<strong>1.1.0</strong>:
    <ul>
      <li>BUG FIX for NAV-PVT messages for firmware 7. The NAV-PVT message is shorter for firmware version 7, the new message is <code class="language-plaintext highlighter-rouge">NavPVT7</code>
</li>
      <li>BUG FIX for SBAS configuration, it now configures SBAS only if the device is SBAS capable. Previously, if enable_sbas was set to false, it would not configure, meaning that SBAS could not be turned off.</li>
      <li>BUG FIX, the baudrate of the serial I/O port was not configured correctly, on the device it was set to the user desired settings, but on the computer it was always set to 4800.</li>
      <li>BUG FIX, Diagnostics for Nav Status are now updated in firmware version 6.</li>
      <li>BUG FIX, The method which waited for ACKs now checks if the ACK is from the correct class and message ID.</li>
      <li>Added messages for <code class="language-plaintext highlighter-rouge">CfgTMODE3</code>, <code class="language-plaintext highlighter-rouge">CfgHNR</code>, <code class="language-plaintext highlighter-rouge">CfgRST</code>, <code class="language-plaintext highlighter-rouge">CfgINF</code>, <code class="language-plaintext highlighter-rouge">NavATT</code>, <code class="language-plaintext highlighter-rouge">ESF</code> messages, <code class="language-plaintext highlighter-rouge">Inf</code> message (for all INF types), <code class="language-plaintext highlighter-rouge">HnrPVT</code>, <code class="language-plaintext highlighter-rouge">MgaGAL</code>, <code class="language-plaintext highlighter-rouge">NavSAT</code>, <code class="language-plaintext highlighter-rouge">MonHw</code>, <code class="language-plaintext highlighter-rouge">NavPVT7</code> (for firmware version 7).</li>
      <li>Restructured Node class so that it now uses composition. The main node contains instances of classes which implement <code class="language-plaintext highlighter-rouge">UBloxInterface</code>, and calls the methods for each interface added to the node. The classes which implement the interface add new features that are not generic to all firmware versions or products. Each firmware version (6-8) has an interface, and each product category has one (SPG, HPG REF, HPG ROV, TIM, FTS, ADR/UDR). The product type is determined from parsing the <code class="language-plaintext highlighter-rouge">MonVER</code> message.</li>
      <li>Added implementations of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> called <code class="language-plaintext highlighter-rouge">UbloxHpgRef</code> and <code class="language-plaintext highlighter-rouge">UbloxHpgRov</code> for HPG reference station and rover devices. The reference station tmode3 can be configured upon startup (see Options section) and the rover dgnss mode can be set. After survey in, once the reference station entire time mode, the nav_rate is set to the user desired value (it must be 1 Hz during survey-in) and the RTCM output messages are enabled. The state can be monitored through the rqt_runtime_monitor. These classes were tested on C94-M8P devices.</li>
      <li>Added an implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> called <code class="language-plaintext highlighter-rouge">UbloxAdrUdr</code> for ADR/UDR devices. It which subscribes to <code class="language-plaintext highlighter-rouge">NavATT</code> and ESF messages and configures useAdr. The diagnostics monitor specific to these devices is not implemented. This class has not been tested on a hardware device.</li>
      <li>Added a partial implementation of <code class="language-plaintext highlighter-rouge">UbloxTim</code> for TIM devices which subscribes to <code class="language-plaintext highlighter-rouge">RxmRAWX</code> and <code class="language-plaintext highlighter-rouge">RxmSFRBX</code> messages. The <code class="language-plaintext highlighter-rouge">getRosParams()</code>, <code class="language-plaintext highlighter-rouge">configureUblox()</code>, and <code class="language-plaintext highlighter-rouge">initializeDiagnostics()</code> methods are unimplemented.</li>
      <li>Added a skeleton class for <code class="language-plaintext highlighter-rouge">UbloxFts</code> for FTS devices which is unimplemented. See the <code class="language-plaintext highlighter-rouge">ublox_gps</code> <code class="language-plaintext highlighter-rouge">node.cpp</code> and <code class="language-plaintext highlighter-rouge">node.h</code> files.</li>
      <li>Changed how GNSS is configured in firmware version 8. The documentation recommends a cold restart after reconfiguring the GNSS, and will reset the device if it receives a <code class="language-plaintext highlighter-rouge">CfgGNSS</code> message, even if the settings do not change. For firmware version 8, before reconfiguring, the node first checks if the current GNSS settings are the same as the desired settings. If so, it will not send a CfgGNSS message to the device. After reconfiguring, it will cold reset the GNSS.</li>
      <li>Migrated I/O initialization to the <code class="language-plaintext highlighter-rouge">Gps</code> class from the <code class="language-plaintext highlighter-rouge">Node</code> class.</li>
      <li>INF messages are now printed to the ROS console.</li>
      <li>Changed how debug statements are displayed. If the debug parameter is set to 1 or greater, it prints debug messages.</li>
    </ul>
  </li>
  <li>
<strong>1.0.0</strong>:
    <ul>
      <li>Added messages for firmware 8: <code class="language-plaintext highlighter-rouge">NavPVT</code>, <code class="language-plaintext highlighter-rouge">RxmRAWX</code>, <code class="language-plaintext highlighter-rouge">RxmSFRBX</code>.</li>
      <li>Modified ConfigGNSS and MonVER to include repeated blocks and added 
ConfigGNSS_Block (configures all GNSS at once) and MonVER_Extension 
(for MonVER_Char blocks).</li>
      <li>MonVER info is now published upon initialization.</li>
      <li>Fixed SBAS crashing issue (node crashed if device didn’t have SBAS 
capabilities)</li>
      <li>Modified remaining messages to update to firmware 8</li>
      <li>Added <code class="language-plaintext highlighter-rouge">UbloxNode</code> abstract class which does all previous node functions which 
are the same for all firmware versions. Added subclasses which do functions
specific to a given firmware version (e.g. subscribing to NavPVT messages).</li>
      <li>Added a read lock to AsyncWorker</li>
      <li>Removed hard-coded values from <code class="language-plaintext highlighter-rouge">Gps</code> and <code class="language-plaintext highlighter-rouge">Node</code> classes specific to a certain 
device and changed them to configurable parameters. Modified example
launch file accordingly.</li>
      <li>Added example parameter yaml files and launch file to load parameters from
this file.</li>
      <li>Moved implementations of Callback functions into <code class="language-plaintext highlighter-rouge">callback.h</code> (from <code class="language-plaintext highlighter-rouge">gps.h</code> 
and <code class="language-plaintext highlighter-rouge">gps.cpp</code>)</li>
      <li>Updated formatting of some files per google style guide spec (e.g. 80 chars
per line).</li>
    </ul>
  </li>
  <li>
<strong>0.0.5</strong>:
    <ul>
      <li>Reformat files under <code class="language-plaintext highlighter-rouge">ublox_gps</code>
</li>
    </ul>
  </li>
  <li>
<strong>0.0.4</strong>:
    <ul>
      <li>Added install targets.</li>
    </ul>
  </li>
  <li>
<strong>0.0.3</strong>:
    <ul>
      <li>Added the <code class="language-plaintext highlighter-rouge">enable_glonass</code>, <code class="language-plaintext highlighter-rouge">enable_beidou</code> and <code class="language-plaintext highlighter-rouge">enable_ppp</code> options.</li>
      <li>Added the <code class="language-plaintext highlighter-rouge">ublox_version</code> option. Consult known issues for important details.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">numSVs</code> field to the RQT monitor.</li>
    </ul>
  </li>
  <li>
<strong>0.0.2</strong>:
    <ul>
      <li>Changed <code class="language-plaintext highlighter-rouge">meas_rate</code> to simply <code class="language-plaintext highlighter-rouge">rate</code>, which is in Hz. <code class="language-plaintext highlighter-rouge">meas_rate</code> is computed automatically.</li>
    </ul>
  </li>
  <li>
<strong>0.0.1</strong>:
    <ul>
      <li>All topics are now published on a private node handle.</li>
      <li>Velocities are published as stamped twist messages with covariance. Angular components are unused.</li>
      <li>
<code class="language-plaintext highlighter-rouge">hAcc</code>, <code class="language-plaintext highlighter-rouge">vAcc</code> and <code class="language-plaintext highlighter-rouge">sAcc</code> are used to generate diagonal covariances.</li>
      <li>Velocities use the correct convention: X-Y-Z = East-North-Up.</li>
      <li>2D <strong>or</strong> 3D fix correspond to <code class="language-plaintext highlighter-rouge">STATUS_FIX</code> (previously only 3D).</li>
      <li>
<code class="language-plaintext highlighter-rouge">fix</code> and <code class="language-plaintext highlighter-rouge">fix_velocity</code> are time-stamped synchronously, using the <code class="language-plaintext highlighter-rouge">iTOW</code> to check arrival times.</li>
      <li>Added options for changing the CFG-NAV5 settings (see above).</li>
      <li>Added support for <code class="language-plaintext highlighter-rouge">diagnostic_updater</code>.</li>
      <li>
<em>“received ACK”</em> messages are elevated to debug level 2.</li>
      <li>Corrected issue where baudrate was not set correctly using rosparam.</li>
      <li>Corrected issue where socket destructors were not called.</li>
    </ul>
  </li>
  <li>
<strong>0.0.0</strong>:
    <ul>
      <li>Forked from https://github.com/tu-darmstadt-ros-pkg/ublox</li>
      <li>Updated to use catkin.</li>
    </ul>
  </li>
</ul>

<h1 id="adding-new-features">Adding new features</h1>
<h2 id="adding-new-messages">Adding new messages</h2>
<ol>
  <li>
    <p>Create the .msg file and add it to <code class="language-plaintext highlighter-rouge">ublox_msgs/msg</code>. Make sure the file includes the constants <code class="language-plaintext highlighter-rouge">CLASS_ID</code> and <code class="language-plaintext highlighter-rouge">MESSAGE_ID</code>.</p>
  </li>
  <li>
    <p>Modify <code class="language-plaintext highlighter-rouge">ublox_msgs/include/ublox_msgs/ublox_msgs.h</code>. 
a. Include the message header. 
b. Make sure the message’s class constant is declared in the <code class="language-plaintext highlighter-rouge">ublox_msgs::Class</code> namespace. 
c. Declare the message’s ID constant in the <code class="language-plaintext highlighter-rouge">ublox_messages::Message::&lt;CLASS_NAME&gt;</code> namespace.</p>
  </li>
  <li>
    <p>Declare the message in <code class="language-plaintext highlighter-rouge">ublox_msgs/src/ublox_msgs.cpp</code>.</p>
  </li>
  <li>
    <p>If the message has a repeated or optional block of varying size, create an additional message for the repeating block and include it in the message. 
a. Include the block message in the <code class="language-plaintext highlighter-rouge">ublox_msgs/include/ublox_msgs/ublox_msgs.h</code> file. 
b. Modify <code class="language-plaintext highlighter-rouge">ublox_msgs/include/ublox/serialization/ublox_msgs.h</code> and add a custom <code class="language-plaintext highlighter-rouge">Serializer</code>. If the message doesn’t include the number of repeating/optional blocks as a parameter, you can infer it from the count/size of the message, which is the length of the payload.</p>
  </li>
  <li>
    <p>Modify <code class="language-plaintext highlighter-rouge">ublox_gps/src/node.cpp</code> (and the header file if necessary) to either subscribe to the message or send the configuration message. Be sure to modify the appropriate subscribe function. For messages which apply to all firmware/hardware, modify <code class="language-plaintext highlighter-rouge">UbloxNode::subscribe()</code>. Otherwise modify the appropriate firmware or hardware’s subscribe function, e.g. <code class="language-plaintext highlighter-rouge">UbloxFirmware8::subscribe()</code>, <code class="language-plaintext highlighter-rouge">HpgRovProduct::subscribe()</code>. If the message is a configuration message, consider modifying <code class="language-plaintext highlighter-rouge">ublox_gps/src/gps.cpp</code> (and the header file) to add a configuration function.</p>
  </li>
</ol>

<h3 id="one-message-protocol-for-multiple-ids-eg-inf-message">One message protocol for multiple IDs (e.g. INF message)</h3>
<p>If a given message protocol applies to multiple message IDs (e.g. the <code class="language-plaintext highlighter-rouge">Inf</code> message), do not include the message ID in the message itself.
When declaring the message, for the first declaration, use <code class="language-plaintext highlighter-rouge">DECLARE_UBLOX_MESSAGE</code> macro. For the following declarations use the <code class="language-plaintext highlighter-rouge">DECLARE_UBLOX_MESSAGE_ID</code> macro.</p>

<h2 id="adding-device--firmware-specific-functionality">Adding device / firmware specific functionality</h2>

<p>The <code class="language-plaintext highlighter-rouge">node.cpp</code> file in <code class="language-plaintext highlighter-rouge">ublox_gps</code> contains a main Node class called UbloxNode which acts as the ROS Node and handles the node initialization, publishers, and diagnostics. <code class="language-plaintext highlighter-rouge">UbloxNode</code> contains a vector <code class="language-plaintext highlighter-rouge">components_</code> of instances of <code class="language-plaintext highlighter-rouge">ComponentInterface</code>. The <code class="language-plaintext highlighter-rouge">UbloxNode::initialize()</code> calls each component’s public interface methods. The node contains components for both the firmware version and the product category, which are added after parsing the <code class="language-plaintext highlighter-rouge">MonVER</code> message. Any class which implements <code class="language-plaintext highlighter-rouge">ComponentInterface</code> can be added to the <code class="language-plaintext highlighter-rouge">UbloxNode</code> <code class="language-plaintext highlighter-rouge">components_</code> vector and its methods will be called by <code class="language-plaintext highlighter-rouge">UbloxNode</code>. Simply add an implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> to the ublox_gps <code class="language-plaintext highlighter-rouge">node.h</code> and <code class="language-plaintext highlighter-rouge">node.cpp</code> files. Behavior specific to a given firmware or product should not be implemented in the <code class="language-plaintext highlighter-rouge">UbloxNode</code> class and instead should be implemented in an implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code>.</p>

<p>Currently there are implementations of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> for firmware versions 6-8 and product categories <code class="language-plaintext highlighter-rouge">HpgRefProduct</code>, <code class="language-plaintext highlighter-rouge">HpgRovProduct</code>, <code class="language-plaintext highlighter-rouge">AdrUdrProduct</code>, <code class="language-plaintext highlighter-rouge">TimProduct</code>, <code class="language-plaintext highlighter-rouge">FtsProduct</code>.  SPG products do not have their own implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code>, since the Firmware classes implement all of the behavior of SPG devices.</p>

<p><code class="language-plaintext highlighter-rouge">HpgRefProduct</code> and <code class="language-plaintext highlighter-rouge">HpgRovProduct</code> have been tested on the C94-M8P device.</p>

<h2 id="adding-new-parameters">Adding new parameters</h2>
<ol>
  <li>Modify the <code class="language-plaintext highlighter-rouge">getRosParams()</code> method in the appropriate implementation of ComponentInterface (e.g. UbloxNode, UbloxFirmware8, HpgRefProduct, etc.) and get the parameter. Group multiple related parameters into a namespace. Use all lower case names for parameters and namespaces separated with underscores.
    <ul>
      <li>If the type is an unsigned integer (of any size) or vector of unsigned integers, use the <code class="language-plaintext highlighter-rouge">ublox_node::getRosUint</code> method which will verify the bounds of the parameter.</li>
      <li>If the type is an int8 or int16 or vector of int8’s or int16’s, use the <code class="language-plaintext highlighter-rouge">ublox_nod::getRosInt</code> method which will verify the bounds of the parameter. (This method can also be used for int32’s but ROS has methods to get int32 parameters as well).</li>
    </ul>
  </li>
  <li>If the parameter is used during configuration also modify the <code class="language-plaintext highlighter-rouge">ComponentInterface</code>’s <code class="language-plaintext highlighter-rouge">configureUblox()</code> method to send the appropriate configuration message. Do not send configuration messages in <code class="language-plaintext highlighter-rouge">getRosParams()</code>.</li>
  <li>Modify this README file and add the parameter name and description in the appropriate section. State whether there is a default value or if the parameter is required.</li>
  <li>Modify one of the sample <code class="language-plaintext highlighter-rouge">.yaml</code> configuration files in <code class="language-plaintext highlighter-rouge">ublox_gps/config</code> to include the parameter or add a new sample <code class="language-plaintext highlighter-rouge">.yaml</code> for your device.</li>
</ol>

<h1 id="known-issues">Known Issues</h1>

<h2 id="unimplemented--untested-devices">Unimplemented / Untested Devices</h2>

<p><code class="language-plaintext highlighter-rouge">TimProduct</code> and <code class="language-plaintext highlighter-rouge">FtsProduct</code> are currently unimplemented skeleton classes. <code class="language-plaintext highlighter-rouge">AdrUdrProduct</code> is implemented, with the exception of <code class="language-plaintext highlighter-rouge">initializeRosDiagnostics()</code> and has not been tested on hardware.</p>

<p><code class="language-plaintext highlighter-rouge">UbloxFirmware7</code> has not been properly tested on a device with firmware version 7. <code class="language-plaintext highlighter-rouge">UbloxFirmware6</code> has been tested on a device with firmware version 8, but not with firmware version 6.</p>

<h2 id="debugging">Debugging</h2>

<p>For debugging messages set the debug parameter to &gt; 0. The range for debug is 0-4. At level 1 it prints configuration messages and checksum errors, at level 2 it also prints ACK/NACK messages and sent messages. At level 3 it prints the received bytes being decoded by a specific message reader. At level 4 it prints the incoming buffer before it is split by message header.</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<ol>
  <li>Why can’t the ublox_gps node open my device, even though I have correctly specified the path in <code class="language-plaintext highlighter-rouge">/dev</code>?
    <ul>
      <li>Make sure you are the owner of the device, or a member of <code class="language-plaintext highlighter-rouge">dialout</code> group.</li>
    </ul>
  </li>
</ol>

<h1 id="links">Links</h1>
<p>Consult the <a href="https://www.u-blox.com/sites/default/files/products/documents/u-blox8-M8_ReceiverDescrProtSpec_(UBX-13003221)_Public.pdf">official protocol spec</a> for details on packets supported by u-blox devices.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ublox">ublox</a> <small>repository</small></h3>
        <span class="label label-default">gps</span> <span class="label label-default">ublox</span> <span class="label label-default">ros</span> <span class="label label-default">ros-driver</span> <span class="label label-default">ublox-gps</span> 
        
        <a class="label label-primary pkg-label" href="/p/ublox">ublox</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_gps">ublox_gps</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_msgs">ublox_msgs</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_serialization">ublox_serialization</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-KumarRobotics-ublox
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-KumarRobotics-ublox" role="menuitem" tabindex="-1" href="/r/ublox/github-KumarRobotics-ublox" data="github-KumarRobotics-ublox">
                    <span class="glyphicon glyphicon-star"></span>
                    github-KumarRobotics-ublox
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">A driver for ublox gps</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/KumarRobotics/ublox.git">https://github.com/KumarRobotics/ublox.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">ros2</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-12-04
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">gps</span> <span class="label label-default">ublox</span> <span class="label label-default">ros</span> <span class="label label-default">ros-driver</span> <span class="label label-default">ublox-gps</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ublox/#iron-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ublox/#iron-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ublox/#iron-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ublox">ublox</a></td>
                    <td>2.3.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_gps">ublox_gps</a></td>
                    <td>2.3.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_msgs">ublox_msgs</a></td>
                    <td>2.3.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_serialization">ublox_serialization</a></td>
                    <td>2.3.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="ublox">ublox</h1>
<p>The <code class="language-plaintext highlighter-rouge">ublox</code> package provides support for <a href="http://www.u-blox.com">u-blox</a> GPS receivers. Only the <em>serial</em> configuration of the driver is documented here, but TCP/UDP communication is also supported by the driver (untested).</p>

<p>The driver was originally written by Johannes Meyer. Changes made later are detailed in the version history below.</p>

<h2 id="options">Options</h2>

<p>Example .yaml configuration files are included in <code class="language-plaintext highlighter-rouge">ublox_gps/config</code>. Consult the u-blox documentation for your device for the recommended settings.</p>

<p>The <code class="language-plaintext highlighter-rouge">ublox_gps</code> node supports the following parameters for all products and firmware versions:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">device</code>: Path to the device port. Defaults to <code class="language-plaintext highlighter-rouge">/dev/ttyACM0</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">raw_data</code>: Whether the device is a raw data product. Defaults to false. Firmware &lt;= 7.03 only.</li>
  <li>
<code class="language-plaintext highlighter-rouge">load</code>: Parameters for loading the configuration to non-volatile memory. See <code class="language-plaintext highlighter-rouge">ublox_msgs/CfgCFG.msg</code>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">load/mask</code>: uint32_t. Mask of the configurations to load.</li>
      <li>
<code class="language-plaintext highlighter-rouge">load/device</code>: uint32_t. Mask which selects the devices for the load command.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">save</code>: Parameters for saving the configuration to non-volatile memory. See <code class="language-plaintext highlighter-rouge">ublox_msgs/CfgCFG.msg</code>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">save/mask</code>: uint32_t. Mask of the configurations to save.</li>
      <li>
<code class="language-plaintext highlighter-rouge">save/device</code>: uint32_t. Mask which selects the devices for the save command.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">uart1/baudrate</code>: Bit rate of the serial communication. Defaults to 9600.</li>
  <li>
<code class="language-plaintext highlighter-rouge">uart1/in</code>: UART1 in communication protocol. Defaults to UBX, NMEA &amp; RTCM. See <code class="language-plaintext highlighter-rouge">CfgPRT</code> message for possible values.</li>
  <li>
<code class="language-plaintext highlighter-rouge">uart1/out</code>: UART1 out communication protocol. Defaults to UBX, NMEA &amp; RTCM. See <code class="language-plaintext highlighter-rouge">CfgPRT</code> message for possible values.</li>
  <li>
<code class="language-plaintext highlighter-rouge">frame_id</code>: ROS name prepended to frames produced by the node. Defaults to <code class="language-plaintext highlighter-rouge">gps</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">rate</code>: Rate in Hz of measurements. Defaults to 4.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nav_rate</code>: How often navigation solutions are published in number of measurement cycles. Defaults to 1.</li>
  <li>
<code class="language-plaintext highlighter-rouge">enable_ppp</code>: Enable precise-point-positioning system. Defaults to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">gnss/sbas</code>: Enable satellite-based augmentation system. Defaults to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sbas/max</code>: Maximum number of SBAS channels. Defaults to 0.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sbas/usage</code>: See <code class="language-plaintext highlighter-rouge">CfgSBAS</code> message for details. Defaults to 0.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dynamic_model</code>: Possible values below. Defaults to <code class="language-plaintext highlighter-rouge">portable</code>. See u-blox documentation for further description.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">portable</code></li>
      <li><code class="language-plaintext highlighter-rouge">stationary</code></li>
      <li><code class="language-plaintext highlighter-rouge">pedestrian</code></li>
      <li><code class="language-plaintext highlighter-rouge">automotive</code></li>
      <li><code class="language-plaintext highlighter-rouge">sea</code></li>
      <li>
<code class="language-plaintext highlighter-rouge">airborne1</code>: Airborne, max acceleration = 1G</li>
      <li>
<code class="language-plaintext highlighter-rouge">airborne2</code>: Airborne, max acceleration = 2G</li>
      <li>
<code class="language-plaintext highlighter-rouge">airborne4</code>: Airborne, max acceleration = 4G</li>
      <li><code class="language-plaintext highlighter-rouge">wristwatch</code></li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">fix_mode</code>: Type of fixes supported: <code class="language-plaintext highlighter-rouge">2d</code>, <code class="language-plaintext highlighter-rouge">3d</code> or <code class="language-plaintext highlighter-rouge">both</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dr_limit</code>: Max time in seconds to use dead reckoning after signal is lost. Defaults to 0.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dat</code>: Configuring the datum type (optional). See the CfgDAT message.
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">dat/set</code>: If true, the node will the datum based on the parameters below (required if true). Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/majA</code>: Semi-major Axis [m]</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/flat</code>: 1.0 / Flattening</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/shift</code>: [X-axis, Y-axis, Z-axis] shift [m]</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/rot</code>: [X, Y, Z] rotation [s]</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/scale</code>: scale change [ppm]</li>
    </ul>
  </li>
</ul>

<h3 id="for-firmware-version-6">For firmware version 6:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/set</code>: If true, the NMEA will be configured with the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/version</code>: NMEA version. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/num_sv</code>: Maximum Number of SVs to report per TalkerId. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/compat</code>: Enable compatibility mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/consider</code>: Enable considering mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/filter</code>: Namespace for filter flags.
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/pos</code>: Disable position filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/msk_pos</code>: Disable masked position filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/time</code>: Disable time filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/date</code>: Disable date filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/sbas</code>: Enable SBAS filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/track</code>: Disable track filtering. Defaults to false.</li>
    </ul>
  </li>
</ul>

<h3 id="for-devices-with-firmware--7">For devices with firmware &gt;= 7:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">gnss</code> parameters:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/gps</code>: Enable GPS receiver. Defaults to true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/glonass</code>: Enable GLONASS receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/beidou</code>: Enable BeiDou receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/qzss</code>: Enable QZSS receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/qzss_sig_cfg</code>: QZSS signal configuration. Defaults to L1CA. See <code class="language-plaintext highlighter-rouge">CfgGNSS</code> message for constants.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea</code> parameters:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/set</code>: If true, the NMEA will be configured.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/version</code>: NMEA version. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/num_sv</code>: Maximum Number of SVs to report per TalkerId. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/sv_numbering</code>: Configures the display of satellites that do not have an NMEA-defined value. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/compat</code>: Enable compatibility mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/consider</code>: Enable considering mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/limit82</code>: Enable strict limit to 82 characters maximum. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/high_prec</code>: Enable high precision mode. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter</code>: Namespace for filter flags.
        <ul>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/pos</code>: Enable position output for failed or invalid fixes. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/msk_pos</code>: Enable position output for invalid fixes. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/time</code>: Enable time output for invalid times. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/date</code>: Enable date output for invalid dates. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/gps_only</code>: Restrict output to GPS satellites only. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/track</code>: Enable COG output even if COG is frozen. Defaults to false.</li>
        </ul>
      </li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt</code>: Filters out satellites based on their GNSS.
        <ul>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/gps</code>: Disable reporting of GPS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/sbas</code>: Disable reporting of SBAS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/qzss</code>: Disable reporting of QZSS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/glonass</code>: Disable reporting of GLONASS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/beidou</code>: Disable reporting of BeiDou satellites. Defaults to false.</li>
        </ul>
      </li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/main_talker_id</code>: This field enables the main Talker ID to be overridden. Defaults to 0.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/gsv_talker_id</code>:  This field enables the GSV Talker ID to be overridden. Defaults to [0, 0].</li>
    </ul>
  </li>
</ul>

<h3 id="for-devices-with-firmware--8">For devices with firmware &gt;= 8:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">save_on_shutdown</code>: If true, the node will send a <code class="language-plaintext highlighter-rouge">UBX-UPD-SOS</code> command to save the BBR to flash memory on shutdown. Defaults to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">clear_bbr</code>: If true, the node will send a <code class="language-plaintext highlighter-rouge">UBX-UPD-SOS</code> command to clear the flash memory during configuration. Defaults to false.</li>
  <li>Additional <code class="language-plaintext highlighter-rouge">gnss</code> params
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/galileo</code>: Enable Galileo receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/imes</code>: Enable IMES receiver. Defaults to false.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/bds_talker_id</code>: (See other NMEA configuration parameters above) Sets the two characters that should be used for the BeiDou Talker ID.</li>
</ul>

<h3 id="for-udradr-devices">For UDR/ADR devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">use_adr</code>: Enable ADR/UDR. Defaults to true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nav_rate</code> should be set to 1 Hz.</li>
</ul>

<h3 id="for-hpg-reference-devices">For HPG Reference devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">tmode3</code>: Time Mode. Required. See CfgTMODE3 for constants.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/lla_flag</code>: True if the Fixed position is in Lat, Lon, Alt coordinates. False if ECEF. Required if <code class="language-plaintext highlighter-rouge">tmode3</code> is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/position</code>: Antenna Reference Point position in [m] or [deg]. Required if <code class="language-plaintext highlighter-rouge">tmode3</code> is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/position_hp</code>: Antenna Reference Point High Precision position in [0.1 mm] or [deg * 1e-9]. Required if tmode3 is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/acc</code>: Fixed position accuracy in [m]. Required if <code class="language-plaintext highlighter-rouge">tmode3</code> is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sv_in/reset</code>: Whether or not to reset the survey in upon initialization. If false, it will only reset if the TMODE is disabled. Defaults to true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sv_in/min_dur</code>: The minimum Survey-In Duration time in seconds. Required tmode3 is set to survey in.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sv_in/acc_lim</code>: The minimum accuracy level of the survey in position in meters. Required <code class="language-plaintext highlighter-rouge">tmode3</code> is set to survey in.</li>
</ul>

<h3 id="for-hpg-rover-devices">For HPG Rover devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">dgnss_mode</code>: The Differential GNSS mode. Defaults to RTK FIXED. See <code class="language-plaintext highlighter-rouge">CfgDGNSS</code> message for constants.</li>
</ul>

<h3 id="for-tim-devices">For TIM devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">tim_tm2</code>: Enable this message for GPS time-stamps everytime an external interrupt signal is received.</li>
</ul>

<h3 id="for-fts-devices">For FTS devices:</h3>
<ul>
  <li>currently unimplemented. See <code class="language-plaintext highlighter-rouge">FtsProduct</code> class in <code class="language-plaintext highlighter-rouge">ublox_gps</code> package <code class="language-plaintext highlighter-rouge">node.h</code> &amp; <code class="language-plaintext highlighter-rouge">node.cpp</code> files.</li>
</ul>

<h2 id="fix-topics">Fix Topics</h2>

<p><code class="language-plaintext highlighter-rouge">~fix</code>(<a href="http://docs.ros.org/api/sensor_msgs/html/msg/NavSatFix.html">sensor_msgs/NavSatFix</a>)</p>

<p>Navigation Satellite fix.</p>

<p><code class="language-plaintext highlighter-rouge">~fix_velocity</code>(<a href="http://docs.ros.org/jade/api/geometry_msgs/html/msg/TwistWithCovarianceStamped.html">geometry_msgs/TwistWithCovarianceStamped</a>)</p>

<p>Velocity in local ENU frame.</p>

<h2 id="inf-messages">INF messages</h2>
<p>To enable printing INF messages to the ROS console, set the parameters below.</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">inf/all</code>: This is the default value for the INF parameters below, which enable printing u-blox <code class="language-plaintext highlighter-rouge">INF</code> messages to the ROS console. It defaults to true. Individual message types can be turned off by setting their corresponding parameter to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/debug</code>: Whether to configure the UBX and NMEA ports to send Debug messages and print received <code class="language-plaintext highlighter-rouge">INF-Debug</code> messages to <code class="language-plaintext highlighter-rouge">ROS_DEBUG</code> console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/error</code>: Whether to enable Error messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Error</code> messages to <code class="language-plaintext highlighter-rouge">ROS_ERROR</code> console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/notice</code>: Whether to enable Notice messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Notice messages to </code>ROS_INFO` console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/test</code>: Whether to enable Test messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Test</code> messages to <code class="language-plaintext highlighter-rouge">ROS_INFO</code> console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/warning</code>: Whether to enable Warning messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Warning</code> messages to the <code class="language-plaintext highlighter-rouge">ROS_WARN</code> console.</li>
</ul>

<h2 id="additional-topics">Additional Topics</h2>
<p>To publish a given u-blox message to a ROS topic, set the parameter shown below to true. The node sets the rate of the u-blox messages to 1 measurement cycle.</p>

<h3 id="all-messages">All messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/all</code>: This is the default value for <code class="language-plaintext highlighter-rouge">publish/&lt;class&gt;/all</code> parameters below. It defaults to false. Individual message classes and messages can be enabled or disabled by setting the parameters described below to false.</li>
</ul>

<h3 id="aid-messages">AID messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/aid/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/alm</code>: Topic <code class="language-plaintext highlighter-rouge">~aidalm</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/eph</code>: Topic <code class="language-plaintext highlighter-rouge">~aideph</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/hui</code>: Topic <code class="language-plaintext highlighter-rouge">~aidhui</code>
</li>
</ul>

<h3 id="rxm-messages">RXM messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/rxm/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/alm</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmalm</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/eph</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmeph</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/raw</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmraw</code>. Type is either <code class="language-plaintext highlighter-rouge">RxmRAW</code> or <code class="language-plaintext highlighter-rouge">RxmRAWX</code> depending on firmware version.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/rtcm</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmrtcm</code>. <strong>Firmware &gt;= 8 only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/sfrb</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmsfrb</code>. Type is either <code class="language-plaintext highlighter-rouge">RxmSFRB</code> or <code class="language-plaintext highlighter-rouge">RxmSFRBX</code> depending on firmware version.</li>
</ul>

<h3 id="mon-messages">MON messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/mon/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/mon/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/mon/hw</code>: Topic <code class="language-plaintext highlighter-rouge">~monhw</code>
</li>
</ul>

<h3 id="nav-messages">NAV messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/mon/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/att</code>: Topic <code class="language-plaintext highlighter-rouge">~navatt</code>. <strong>ADR/UDR devices only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/clock</code>: Topic <code class="language-plaintext highlighter-rouge">~navclock</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/posecef</code>: Topic <code class="language-plaintext highlighter-rouge">~navposecef</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/posllh</code>: Topic <code class="language-plaintext highlighter-rouge">~navposllh</code>. <strong>Firmware &lt;= 6 only.</strong> For firmware 7 and above, see NavPVT</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/pvt</code>: Topic <code class="language-plaintext highlighter-rouge">~navpvt</code>. <strong>Firmware &gt;= 7 only.</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/relposned</code>: Topic <code class="language-plaintext highlighter-rouge">~navrelposned</code>. <strong>HPG Rover devices only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/heading</code>: Topic <code class="language-plaintext highlighter-rouge">~navheading</code>. <strong>HP Position receiver devices only.</strong> For firmware 9 and above</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/sat</code>: Topic <code class="language-plaintext highlighter-rouge">~navsat</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/sol</code>: Topic <code class="language-plaintext highlighter-rouge">~navsol</code>. <strong>Firmware &lt;= 6 only.</strong> For firmware 7 and above, see NavPVT</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/status</code>: Topic <code class="language-plaintext highlighter-rouge">~navstatus</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/svin</code>: Topic <code class="language-plaintext highlighter-rouge">~navsvin</code>. <strong>HPG Reference Station Devices only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/svinfo</code>: Topic <code class="language-plaintext highlighter-rouge">~navsvinfo</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/velned</code>: Topic <code class="language-plaintext highlighter-rouge">~navvelned</code>. <strong>Firmware &lt;= 6 only.</strong> For firmware 7 and above, see NavPVT</li>
</ul>

<h3 id="esf-messages">ESF messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/esf/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code> for <strong>ADR/UDR devices</strong>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/ins</code>: Topic <code class="language-plaintext highlighter-rouge">~esfins</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/meas</code>: Topic <code class="language-plaintext highlighter-rouge">~esfmeas</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/raw</code>: Topic <code class="language-plaintext highlighter-rouge">~esfraw</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/status</code>: Topic <code class="language-plaintext highlighter-rouge">~esfstatus</code>
</li>
</ul>

<h3 id="hnr-messages">HNR messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/hnr/pvt</code>: Topic <code class="language-plaintext highlighter-rouge">~hnrpvt</code>. <strong>ADR/UDR devices only</strong>
</li>
</ul>

<h3 id="tim-messages">TIM messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/tim/tm2</code>: Topic <code class="language-plaintext highlighter-rouge">timtm2</code>. <strong>TIM devices only</strong>
</li>
</ul>

<h2 id="launch">Launch</h2>

<p>A sample launch file <code class="language-plaintext highlighter-rouge">ublox_device.launch</code> loads the parameters from a <code class="language-plaintext highlighter-rouge">.yaml</code> file in the <code class="language-plaintext highlighter-rouge">ublox_gps/config</code> folder, sample configuration files are included. The required arguments are <code class="language-plaintext highlighter-rouge">node_name</code> and <code class="language-plaintext highlighter-rouge">param_file_name</code>.
The two topics to which you should subscribe are <code class="language-plaintext highlighter-rouge">~fix</code> and <code class="language-plaintext highlighter-rouge">~fix_velocity</code>. The angular component of <code class="language-plaintext highlighter-rouge">fix_velocity</code> is unused.</p>

<h1 id="version-history">Version history</h1>

<ul>
  <li>
<strong>1.1.4</strong>:
    <ul>
      <li>Added messages for firmware 9: <code class="language-plaintext highlighter-rouge">NavRELPOSNED9</code>.</li>
      <li>Added option to publish <code class="language-plaintext highlighter-rouge">sensor_msgs/Imu</code> message for High Precision Position Receiver devices with firmware version &gt;= 9 for moving base applications (For example ZED-F9P; <a href="https://www.u-blox.com/sites/default/files/ZED-F9P-MovingBase_AppNote_%28UBX-19009093%29.pdf">UBX-19009093 AppNote</a>).</li>
    </ul>
  </li>
  <li>
<strong>1.1.3</strong>:
    <ul>
      <li>Update by TUC-ProAut</li>
      <li>Added raw data stream output. To publish ros messages set rosparam <code class="language-plaintext highlighter-rouge">raw_data_stream/publish</code> to true. To store to a logfile set rosparam <code class="language-plaintext highlighter-rouge">set raw_data_stream/dir</code> to the appropriated directory. This feature has nothing todo with Raw Data Products.</li>
      <li>Added flag <code class="language-plaintext highlighter-rouge">config_on_startup</code> to deactivate configuration of ublox.</li>
    </ul>
  </li>
  <li>
<strong>1.1.2</strong>:
    <ul>
      <li>BUG FIX for NavSatFix messages for firmware &gt;=7. The NavSatFix now only uses the NavPVT message time if it is valid, otherwise it uses ROS time.</li>
      <li>BUG FIX for TMODE3 Fixed mode configuration. The ARP High Precision position is now configured correctly.</li>
      <li>BUG FIX for <code class="language-plaintext highlighter-rouge">NavDGPS</code> message which had the wrong Message ID.</li>
      <li>After GNSS configuration &amp; reset, I/O resets automatically, without need for restart.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">UBX-UPD</code> messages. For firmware version 8, the node can now save the flash memory on shutdown and clear the flash memory during configuration based on ROS params.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">CfgGPS</code> message and <code class="language-plaintext highlighter-rouge">MonHW6</code> message for firmware version 6.</li>
      <li>Added respawn parameters to example launch file.</li>
      <li>Added parameters to load/save configuration.</li>
      <li>Added raw_data parameter for Raw Data Products.</li>
      <li>Changed name of “subscribe” parameter namespace to “publish” for clarity.</li>
      <li>Migrated all callback handling to <code class="language-plaintext highlighter-rouge">callback.h</code> from <code class="language-plaintext highlighter-rouge">gps.h</code> and <code class="language-plaintext highlighter-rouge">gps.cpp</code>. ACK messages are now processed through callback handlers.</li>
      <li>Modified how the I/O stream is initialized so that the node now handles parsing the port string.</li>
      <li>Changed class names of Ublox product components (e.g. UbloxTim -&gt; TimProduct) for clarity.</li>
      <li>Cleaned up ublox custom serialization classes by adding typedefs and using count to determine repeating block statements instead of using try-catch statements to serialize stream.</li>
      <li>Added doxygen documentation</li>
    </ul>
  </li>
  <li>
<strong>1.1.1</strong>:
    <ul>
      <li>BUG FIX for acknowledgments. The last received ack message was accessed by multiple threads but was not atomic. This variable is now thread safe.</li>
      <li>BUG FIX for GNSS configuration for Firmware 8, the GNSS configuration is now verified &amp; modified properly.</li>
      <li>BUG FIX for fix diagnostics. NumSV was displaying incorrectly. For firmware versions &gt;=7, the NavPVT flags variable is now compared to the constants from the NavPVT message not NavSOL.</li>
      <li>Removed ublox_version param, value is now determined by parsing MonVER.</li>
      <li>Organized parameters into namespaces.</li>
      <li>Better parameter checking. Checks that unsigned ints and vectors of unsigned ints are in bounds.</li>
      <li>Changed rtcm/rate parameter to a vector instead of a scalar, now each RTCM id can be set to a different rate.</li>
      <li>Diagnostic variables are displayed more clearly with units included.</li>
      <li>For HPG Rovers, added diagnostic updater for Carrier Phase Solution.</li>
      <li>Added CfgNMEA messages for each firmware version and a CfgDAT message, as well as parameters to configure the NMEA and Datum.</li>
      <li>Added constants for NavSAT_SV flags bit mask.</li>
    </ul>
  </li>
  <li>
<strong>1.1.0</strong>:
    <ul>
      <li>BUG FIX for NAV-PVT messages for firmware 7. The NAV-PVT message is shorter for firmware version 7, the new message is <code class="language-plaintext highlighter-rouge">NavPVT7</code>
</li>
      <li>BUG FIX for SBAS configuration, it now configures SBAS only if the device is SBAS capable. Previously, if enable_sbas was set to false, it would not configure, meaning that SBAS could not be turned off.</li>
      <li>BUG FIX, the baudrate of the serial I/O port was not configured correctly, on the device it was set to the user desired settings, but on the computer it was always set to 4800.</li>
      <li>BUG FIX, Diagnostics for Nav Status are now updated in firmware version 6.</li>
      <li>BUG FIX, The method which waited for ACKs now checks if the ACK is from the correct class and message ID.</li>
      <li>Added messages for <code class="language-plaintext highlighter-rouge">CfgTMODE3</code>, <code class="language-plaintext highlighter-rouge">CfgHNR</code>, <code class="language-plaintext highlighter-rouge">CfgRST</code>, <code class="language-plaintext highlighter-rouge">CfgINF</code>, <code class="language-plaintext highlighter-rouge">NavATT</code>, <code class="language-plaintext highlighter-rouge">ESF</code> messages, <code class="language-plaintext highlighter-rouge">Inf</code> message (for all INF types), <code class="language-plaintext highlighter-rouge">HnrPVT</code>, <code class="language-plaintext highlighter-rouge">MgaGAL</code>, <code class="language-plaintext highlighter-rouge">NavSAT</code>, <code class="language-plaintext highlighter-rouge">MonHw</code>, <code class="language-plaintext highlighter-rouge">NavPVT7</code> (for firmware version 7).</li>
      <li>Restructured Node class so that it now uses composition. The main node contains instances of classes which implement <code class="language-plaintext highlighter-rouge">UBloxInterface</code>, and calls the methods for each interface added to the node. The classes which implement the interface add new features that are not generic to all firmware versions or products. Each firmware version (6-8) has an interface, and each product category has one (SPG, HPG REF, HPG ROV, TIM, FTS, ADR/UDR). The product type is determined from parsing the <code class="language-plaintext highlighter-rouge">MonVER</code> message.</li>
      <li>Added implementations of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> called <code class="language-plaintext highlighter-rouge">UbloxHpgRef</code> and <code class="language-plaintext highlighter-rouge">UbloxHpgRov</code> for HPG reference station and rover devices. The reference station tmode3 can be configured upon startup (see Options section) and the rover dgnss mode can be set. After survey in, once the reference station entire time mode, the nav_rate is set to the user desired value (it must be 1 Hz during survey-in) and the RTCM output messages are enabled. The state can be monitored through the rqt_runtime_monitor. These classes were tested on C94-M8P devices.</li>
      <li>Added an implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> called <code class="language-plaintext highlighter-rouge">UbloxAdrUdr</code> for ADR/UDR devices. It which subscribes to <code class="language-plaintext highlighter-rouge">NavATT</code> and ESF messages and configures useAdr. The diagnostics monitor specific to these devices is not implemented. This class has not been tested on a hardware device.</li>
      <li>Added a partial implementation of <code class="language-plaintext highlighter-rouge">UbloxTim</code> for TIM devices which subscribes to <code class="language-plaintext highlighter-rouge">RxmRAWX</code> and <code class="language-plaintext highlighter-rouge">RxmSFRBX</code> messages. The <code class="language-plaintext highlighter-rouge">getRosParams()</code>, <code class="language-plaintext highlighter-rouge">configureUblox()</code>, and <code class="language-plaintext highlighter-rouge">initializeDiagnostics()</code> methods are unimplemented.</li>
      <li>Added a skeleton class for <code class="language-plaintext highlighter-rouge">UbloxFts</code> for FTS devices which is unimplemented. See the <code class="language-plaintext highlighter-rouge">ublox_gps</code> <code class="language-plaintext highlighter-rouge">node.cpp</code> and <code class="language-plaintext highlighter-rouge">node.h</code> files.</li>
      <li>Changed how GNSS is configured in firmware version 8. The documentation recommends a cold restart after reconfiguring the GNSS, and will reset the device if it receives a <code class="language-plaintext highlighter-rouge">CfgGNSS</code> message, even if the settings do not change. For firmware version 8, before reconfiguring, the node first checks if the current GNSS settings are the same as the desired settings. If so, it will not send a CfgGNSS message to the device. After reconfiguring, it will cold reset the GNSS.</li>
      <li>Migrated I/O initialization to the <code class="language-plaintext highlighter-rouge">Gps</code> class from the <code class="language-plaintext highlighter-rouge">Node</code> class.</li>
      <li>INF messages are now printed to the ROS console.</li>
      <li>Changed how debug statements are displayed. If the debug parameter is set to 1 or greater, it prints debug messages.</li>
    </ul>
  </li>
  <li>
<strong>1.0.0</strong>:
    <ul>
      <li>Added messages for firmware 8: <code class="language-plaintext highlighter-rouge">NavPVT</code>, <code class="language-plaintext highlighter-rouge">RxmRAWX</code>, <code class="language-plaintext highlighter-rouge">RxmSFRBX</code>.</li>
      <li>Modified ConfigGNSS and MonVER to include repeated blocks and added 
ConfigGNSS_Block (configures all GNSS at once) and MonVER_Extension 
(for MonVER_Char blocks).</li>
      <li>MonVER info is now published upon initialization.</li>
      <li>Fixed SBAS crashing issue (node crashed if device didn’t have SBAS 
capabilities)</li>
      <li>Modified remaining messages to update to firmware 8</li>
      <li>Added <code class="language-plaintext highlighter-rouge">UbloxNode</code> abstract class which does all previous node functions which 
are the same for all firmware versions. Added subclasses which do functions
specific to a given firmware version (e.g. subscribing to NavPVT messages).</li>
      <li>Added a read lock to AsyncWorker</li>
      <li>Removed hard-coded values from <code class="language-plaintext highlighter-rouge">Gps</code> and <code class="language-plaintext highlighter-rouge">Node</code> classes specific to a certain 
device and changed them to configurable parameters. Modified example
launch file accordingly.</li>
      <li>Added example parameter yaml files and launch file to load parameters from
this file.</li>
      <li>Moved implementations of Callback functions into <code class="language-plaintext highlighter-rouge">callback.h</code> (from <code class="language-plaintext highlighter-rouge">gps.h</code> 
and <code class="language-plaintext highlighter-rouge">gps.cpp</code>)</li>
      <li>Updated formatting of some files per google style guide spec (e.g. 80 chars
per line).</li>
    </ul>
  </li>
  <li>
<strong>0.0.5</strong>:
    <ul>
      <li>Reformat files under <code class="language-plaintext highlighter-rouge">ublox_gps</code>
</li>
    </ul>
  </li>
  <li>
<strong>0.0.4</strong>:
    <ul>
      <li>Added install targets.</li>
    </ul>
  </li>
  <li>
<strong>0.0.3</strong>:
    <ul>
      <li>Added the <code class="language-plaintext highlighter-rouge">enable_glonass</code>, <code class="language-plaintext highlighter-rouge">enable_beidou</code> and <code class="language-plaintext highlighter-rouge">enable_ppp</code> options.</li>
      <li>Added the <code class="language-plaintext highlighter-rouge">ublox_version</code> option. Consult known issues for important details.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">numSVs</code> field to the RQT monitor.</li>
    </ul>
  </li>
  <li>
<strong>0.0.2</strong>:
    <ul>
      <li>Changed <code class="language-plaintext highlighter-rouge">meas_rate</code> to simply <code class="language-plaintext highlighter-rouge">rate</code>, which is in Hz. <code class="language-plaintext highlighter-rouge">meas_rate</code> is computed automatically.</li>
    </ul>
  </li>
  <li>
<strong>0.0.1</strong>:
    <ul>
      <li>All topics are now published on a private node handle.</li>
      <li>Velocities are published as stamped twist messages with covariance. Angular components are unused.</li>
      <li>
<code class="language-plaintext highlighter-rouge">hAcc</code>, <code class="language-plaintext highlighter-rouge">vAcc</code> and <code class="language-plaintext highlighter-rouge">sAcc</code> are used to generate diagonal covariances.</li>
      <li>Velocities use the correct convention: X-Y-Z = East-North-Up.</li>
      <li>2D <strong>or</strong> 3D fix correspond to <code class="language-plaintext highlighter-rouge">STATUS_FIX</code> (previously only 3D).</li>
      <li>
<code class="language-plaintext highlighter-rouge">fix</code> and <code class="language-plaintext highlighter-rouge">fix_velocity</code> are time-stamped synchronously, using the <code class="language-plaintext highlighter-rouge">iTOW</code> to check arrival times.</li>
      <li>Added options for changing the CFG-NAV5 settings (see above).</li>
      <li>Added support for <code class="language-plaintext highlighter-rouge">diagnostic_updater</code>.</li>
      <li>
<em>“received ACK”</em> messages are elevated to debug level 2.</li>
      <li>Corrected issue where baudrate was not set correctly using rosparam.</li>
      <li>Corrected issue where socket destructors were not called.</li>
    </ul>
  </li>
  <li>
<strong>0.0.0</strong>:
    <ul>
      <li>Forked from https://github.com/tu-darmstadt-ros-pkg/ublox</li>
      <li>Updated to use catkin.</li>
    </ul>
  </li>
</ul>

<h1 id="adding-new-features">Adding new features</h1>
<h2 id="adding-new-messages">Adding new messages</h2>
<ol>
  <li>
    <p>Create the .msg file and add it to <code class="language-plaintext highlighter-rouge">ublox_msgs/msg</code>. Make sure the file includes the constants <code class="language-plaintext highlighter-rouge">CLASS_ID</code> and <code class="language-plaintext highlighter-rouge">MESSAGE_ID</code>.</p>
  </li>
  <li>
    <p>Modify <code class="language-plaintext highlighter-rouge">ublox_msgs/include/ublox_msgs/ublox_msgs.h</code>. 
a. Include the message header. 
b. Make sure the message’s class constant is declared in the <code class="language-plaintext highlighter-rouge">ublox_msgs::Class</code> namespace. 
c. Declare the message’s ID constant in the <code class="language-plaintext highlighter-rouge">ublox_messages::Message::&lt;CLASS_NAME&gt;</code> namespace.</p>
  </li>
  <li>
    <p>Declare the message in <code class="language-plaintext highlighter-rouge">ublox_msgs/src/ublox_msgs.cpp</code>.</p>
  </li>
  <li>
    <p>If the message has a repeated or optional block of varying size, create an additional message for the repeating block and include it in the message. 
a. Include the block message in the <code class="language-plaintext highlighter-rouge">ublox_msgs/include/ublox_msgs/ublox_msgs.h</code> file. 
b. Modify <code class="language-plaintext highlighter-rouge">ublox_msgs/include/ublox/serialization/ublox_msgs.h</code> and add a custom <code class="language-plaintext highlighter-rouge">Serializer</code>. If the message doesn’t include the number of repeating/optional blocks as a parameter, you can infer it from the count/size of the message, which is the length of the payload.</p>
  </li>
  <li>
    <p>Modify <code class="language-plaintext highlighter-rouge">ublox_gps/src/node.cpp</code> (and the header file if necessary) to either subscribe to the message or send the configuration message. Be sure to modify the appropriate subscribe function. For messages which apply to all firmware/hardware, modify <code class="language-plaintext highlighter-rouge">UbloxNode::subscribe()</code>. Otherwise modify the appropriate firmware or hardware’s subscribe function, e.g. <code class="language-plaintext highlighter-rouge">UbloxFirmware8::subscribe()</code>, <code class="language-plaintext highlighter-rouge">HpgRovProduct::subscribe()</code>. If the message is a configuration message, consider modifying <code class="language-plaintext highlighter-rouge">ublox_gps/src/gps.cpp</code> (and the header file) to add a configuration function.</p>
  </li>
</ol>

<h3 id="one-message-protocol-for-multiple-ids-eg-inf-message">One message protocol for multiple IDs (e.g. INF message)</h3>
<p>If a given message protocol applies to multiple message IDs (e.g. the <code class="language-plaintext highlighter-rouge">Inf</code> message), do not include the message ID in the message itself.
When declaring the message, for the first declaration, use <code class="language-plaintext highlighter-rouge">DECLARE_UBLOX_MESSAGE</code> macro. For the following declarations use the <code class="language-plaintext highlighter-rouge">DECLARE_UBLOX_MESSAGE_ID</code> macro.</p>

<h2 id="adding-device--firmware-specific-functionality">Adding device / firmware specific functionality</h2>

<p>The <code class="language-plaintext highlighter-rouge">node.cpp</code> file in <code class="language-plaintext highlighter-rouge">ublox_gps</code> contains a main Node class called UbloxNode which acts as the ROS Node and handles the node initialization, publishers, and diagnostics. <code class="language-plaintext highlighter-rouge">UbloxNode</code> contains a vector <code class="language-plaintext highlighter-rouge">components_</code> of instances of <code class="language-plaintext highlighter-rouge">ComponentInterface</code>. The <code class="language-plaintext highlighter-rouge">UbloxNode::initialize()</code> calls each component’s public interface methods. The node contains components for both the firmware version and the product category, which are added after parsing the <code class="language-plaintext highlighter-rouge">MonVER</code> message. Any class which implements <code class="language-plaintext highlighter-rouge">ComponentInterface</code> can be added to the <code class="language-plaintext highlighter-rouge">UbloxNode</code> <code class="language-plaintext highlighter-rouge">components_</code> vector and its methods will be called by <code class="language-plaintext highlighter-rouge">UbloxNode</code>. Simply add an implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> to the ublox_gps <code class="language-plaintext highlighter-rouge">node.h</code> and <code class="language-plaintext highlighter-rouge">node.cpp</code> files. Behavior specific to a given firmware or product should not be implemented in the <code class="language-plaintext highlighter-rouge">UbloxNode</code> class and instead should be implemented in an implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code>.</p>

<p>Currently there are implementations of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> for firmware versions 6-8 and product categories <code class="language-plaintext highlighter-rouge">HpgRefProduct</code>, <code class="language-plaintext highlighter-rouge">HpgRovProduct</code>, <code class="language-plaintext highlighter-rouge">AdrUdrProduct</code>, <code class="language-plaintext highlighter-rouge">TimProduct</code>, <code class="language-plaintext highlighter-rouge">FtsProduct</code>.  SPG products do not have their own implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code>, since the Firmware classes implement all of the behavior of SPG devices.</p>

<p><code class="language-plaintext highlighter-rouge">HpgRefProduct</code> and <code class="language-plaintext highlighter-rouge">HpgRovProduct</code> have been tested on the C94-M8P device.</p>

<h2 id="adding-new-parameters">Adding new parameters</h2>
<ol>
  <li>Modify the <code class="language-plaintext highlighter-rouge">getRosParams()</code> method in the appropriate implementation of ComponentInterface (e.g. UbloxNode, UbloxFirmware8, HpgRefProduct, etc.) and get the parameter. Group multiple related parameters into a namespace. Use all lower case names for parameters and namespaces separated with underscores.
    <ul>
      <li>If the type is an unsigned integer (of any size) or vector of unsigned integers, use the <code class="language-plaintext highlighter-rouge">ublox_node::getRosUint</code> method which will verify the bounds of the parameter.</li>
      <li>If the type is an int8 or int16 or vector of int8’s or int16’s, use the <code class="language-plaintext highlighter-rouge">ublox_nod::getRosInt</code> method which will verify the bounds of the parameter. (This method can also be used for int32’s but ROS has methods to get int32 parameters as well).</li>
    </ul>
  </li>
  <li>If the parameter is used during configuration also modify the <code class="language-plaintext highlighter-rouge">ComponentInterface</code>’s <code class="language-plaintext highlighter-rouge">configureUblox()</code> method to send the appropriate configuration message. Do not send configuration messages in <code class="language-plaintext highlighter-rouge">getRosParams()</code>.</li>
  <li>Modify this README file and add the parameter name and description in the appropriate section. State whether there is a default value or if the parameter is required.</li>
  <li>Modify one of the sample <code class="language-plaintext highlighter-rouge">.yaml</code> configuration files in <code class="language-plaintext highlighter-rouge">ublox_gps/config</code> to include the parameter or add a new sample <code class="language-plaintext highlighter-rouge">.yaml</code> for your device.</li>
</ol>

<h1 id="known-issues">Known Issues</h1>

<h2 id="unimplemented--untested-devices">Unimplemented / Untested Devices</h2>

<p><code class="language-plaintext highlighter-rouge">TimProduct</code> and <code class="language-plaintext highlighter-rouge">FtsProduct</code> are currently unimplemented skeleton classes. <code class="language-plaintext highlighter-rouge">AdrUdrProduct</code> is implemented, with the exception of <code class="language-plaintext highlighter-rouge">initializeRosDiagnostics()</code> and has not been tested on hardware.</p>

<p><code class="language-plaintext highlighter-rouge">UbloxFirmware7</code> has not been properly tested on a device with firmware version 7. <code class="language-plaintext highlighter-rouge">UbloxFirmware6</code> has been tested on a device with firmware version 8, but not with firmware version 6.</p>

<h2 id="debugging">Debugging</h2>

<p>For debugging messages set the debug parameter to &gt; 0. The range for debug is 0-4. At level 1 it prints configuration messages and checksum errors, at level 2 it also prints ACK/NACK messages and sent messages. At level 3 it prints the received bytes being decoded by a specific message reader. At level 4 it prints the incoming buffer before it is split by message header.</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<ol>
  <li>Why can’t the ublox_gps node open my device, even though I have correctly specified the path in <code class="language-plaintext highlighter-rouge">/dev</code>?
    <ul>
      <li>Make sure you are the owner of the device, or a member of <code class="language-plaintext highlighter-rouge">dialout</code> group.</li>
    </ul>
  </li>
</ol>

<h1 id="links">Links</h1>
<p>Consult the <a href="https://www.u-blox.com/sites/default/files/products/documents/u-blox8-M8_ReceiverDescrProtSpec_(UBX-13003221)_Public.pdf">official protocol spec</a> for details on packets supported by u-blox devices.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ublox">ublox</a> <small>repository</small></h3>
        <span class="label label-default">gps</span> <span class="label label-default">ublox</span> <span class="label label-default">ros</span> <span class="label label-default">ros-driver</span> <span class="label label-default">ublox-gps</span> 
        
        <a class="label label-primary pkg-label" href="/p/ublox">ublox</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_gps">ublox_gps</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_msg_filters">ublox_msg_filters</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_msgs">ublox_msgs</a>
        
        <a class="label label-primary pkg-label" href="/p/ublox_serialization">ublox_serialization</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-KumarRobotics-ublox
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-KumarRobotics-ublox" role="menuitem" tabindex="-1" href="/r/ublox/github-KumarRobotics-ublox" data="github-KumarRobotics-ublox">
                    <span class="glyphicon glyphicon-star"></span>
                    github-KumarRobotics-ublox
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">A driver for ublox gps</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/KumarRobotics/ublox.git">https://github.com/KumarRobotics/ublox.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2022-12-07
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">gps</span> <span class="label label-default">ublox</span> <span class="label label-default">ros</span> <span class="label label-default">ros-driver</span> <span class="label label-default">ublox-gps</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ublox/#melodic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ublox/#melodic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ublox/#melodic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ublox">ublox</a></td>
                    <td>1.5.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_gps">ublox_gps</a></td>
                    <td>1.5.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_msg_filters">ublox_msg_filters</a></td>
                    <td>0.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_msgs">ublox_msgs</a></td>
                    <td>1.5.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ublox_serialization">ublox_serialization</a></td>
                    <td>1.5.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="ublox">ublox</h1>
<p>The <code class="language-plaintext highlighter-rouge">ublox</code> package provides support for <a href="http://www.u-blox.com">u-blox</a> GPS receivers. Only the <em>serial</em> configuration of the driver is documented here, but TCP/UDP communication is also supported by the driver (untested).</p>

<p>The driver was originally written by Johannes Meyer. Changes made later are detailed in the version history below.</p>

<h2 id="options">Options</h2>

<p>Example .yaml configuration files are included in <code class="language-plaintext highlighter-rouge">ublox_gps/config</code>. Consult the u-blox documentation for your device for the recommended settings.</p>

<p>The <code class="language-plaintext highlighter-rouge">ublox_gps</code> node supports the following parameters for all products and firmware versions:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">device</code>: Path to the device port. Defaults to <code class="language-plaintext highlighter-rouge">/dev/ttyACM0</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">raw_data</code>: Whether the device is a raw data product. Defaults to false. Firmware &lt;= 7.03 only.</li>
  <li>
<code class="language-plaintext highlighter-rouge">load</code>: Parameters for loading the configuration to non-volatile memory. See <code class="language-plaintext highlighter-rouge">ublox_msgs/CfgCFG.msg</code>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">load/mask</code>: uint32_t. Mask of the configurations to load.</li>
      <li>
<code class="language-plaintext highlighter-rouge">load/device</code>: uint32_t. Mask which selects the devices for the load command.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">save</code>: Parameters for saving the configuration to non-volatile memory. See <code class="language-plaintext highlighter-rouge">ublox_msgs/CfgCFG.msg</code>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">save/mask</code>: uint32_t. Mask of the configurations to save.</li>
      <li>
<code class="language-plaintext highlighter-rouge">save/device</code>: uint32_t. Mask which selects the devices for the save command.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">uart1/baudrate</code>: Bit rate of the serial communication. Defaults to 9600.</li>
  <li>
<code class="language-plaintext highlighter-rouge">uart1/in</code>: UART1 in communication protocol. Defaults to UBX, NMEA &amp; RTCM. See <code class="language-plaintext highlighter-rouge">CfgPRT</code> message for possible values.</li>
  <li>
<code class="language-plaintext highlighter-rouge">uart1/out</code>: UART1 out communication protocol. Defaults to UBX, NMEA &amp; RTCM. See <code class="language-plaintext highlighter-rouge">CfgPRT</code> message for possible values.</li>
  <li>
<code class="language-plaintext highlighter-rouge">frame_id</code>: ROS name prepended to frames produced by the node. Defaults to <code class="language-plaintext highlighter-rouge">gps</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">rate</code>: Rate in Hz of measurements. Defaults to 4.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nav_rate</code>: How often navigation solutions are published in number of measurement cycles. Defaults to 1.</li>
  <li>
<code class="language-plaintext highlighter-rouge">enable_ppp</code>: Enable precise-point-positioning system. Defaults to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">gnss/sbas</code>: Enable satellite-based augmentation system. Defaults to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sbas/max</code>: Maximum number of SBAS channels. Defaults to 0.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sbas/usage</code>: See <code class="language-plaintext highlighter-rouge">CfgSBAS</code> message for details. Defaults to 0.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dynamic_model</code>: Possible values below. Defaults to <code class="language-plaintext highlighter-rouge">portable</code>. See u-blox documentation for further description.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">portable</code></li>
      <li><code class="language-plaintext highlighter-rouge">stationary</code></li>
      <li><code class="language-plaintext highlighter-rouge">pedestrian</code></li>
      <li><code class="language-plaintext highlighter-rouge">automotive</code></li>
      <li><code class="language-plaintext highlighter-rouge">sea</code></li>
      <li>
<code class="language-plaintext highlighter-rouge">airborne1</code>: Airborne, max acceleration = 1G</li>
      <li>
<code class="language-plaintext highlighter-rouge">airborne2</code>: Airborne, max acceleration = 2G</li>
      <li>
<code class="language-plaintext highlighter-rouge">airborne4</code>: Airborne, max acceleration = 4G</li>
      <li><code class="language-plaintext highlighter-rouge">wristwatch</code></li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">fix_mode</code>: Type of fixes supported: <code class="language-plaintext highlighter-rouge">2d</code>, <code class="language-plaintext highlighter-rouge">3d</code> or <code class="language-plaintext highlighter-rouge">both</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dr_limit</code>: Max time in seconds to use dead reckoning after signal is lost. Defaults to 0.</li>
  <li>
<code class="language-plaintext highlighter-rouge">dat</code>: Configuring the datum type (optional). See the CfgDAT message.
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">dat/set</code>: If true, the node will the datum based on the parameters below (required if true). Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/majA</code>: Semi-major Axis [m]</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/flat</code>: 1.0 / Flattening</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/shift</code>: [X-axis, Y-axis, Z-axis] shift [m]</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/rot</code>: [X, Y, Z] rotation [s]</li>
      <li>
<code class="language-plaintext highlighter-rouge">dat/scale</code>: scale change [ppm]</li>
    </ul>
  </li>
</ul>

<h3 id="for-firmware-version-6">For firmware version 6:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/set</code>: If true, the NMEA will be configured with the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/version</code>: NMEA version. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/num_sv</code>: Maximum Number of SVs to report per TalkerId. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/compat</code>: Enable compatibility mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/consider</code>: Enable considering mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/filter</code>: Namespace for filter flags.
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/pos</code>: Disable position filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/msk_pos</code>: Disable masked position filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/time</code>: Disable time filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/date</code>: Disable date filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/sbas</code>: Enable SBAS filtering. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/track</code>: Disable track filtering. Defaults to false.</li>
    </ul>
  </li>
</ul>

<h3 id="for-devices-with-firmware--7">For devices with firmware &gt;= 7:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">gnss</code> parameters:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/gps</code>: Enable GPS receiver. Defaults to true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/glonass</code>: Enable GLONASS receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/beidou</code>: Enable BeiDou receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/qzss</code>: Enable QZSS receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/qzss_sig_cfg</code>: QZSS signal configuration. Defaults to L1CA. See <code class="language-plaintext highlighter-rouge">CfgGNSS</code> message for constants.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea</code> parameters:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/set</code>: If true, the NMEA will be configured.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/version</code>: NMEA version. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/num_sv</code>: Maximum Number of SVs to report per TalkerId. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/sv_numbering</code>: Configures the display of satellites that do not have an NMEA-defined value. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/compat</code>: Enable compatibility mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/consider</code>: Enable considering mode. Must be set if <code class="language-plaintext highlighter-rouge">nmea/set</code> is true.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/limit82</code>: Enable strict limit to 82 characters maximum. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/high_prec</code>: Enable high precision mode. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/filter</code>: Namespace for filter flags.
        <ul>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/pos</code>: Enable position output for failed or invalid fixes. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/msk_pos</code>: Enable position output for invalid fixes. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/time</code>: Enable time output for invalid times. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/date</code>: Enable date output for invalid dates. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/gps_only</code>: Restrict output to GPS satellites only. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/filter/track</code>: Enable COG output even if COG is frozen. Defaults to false.</li>
        </ul>
      </li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt</code>: Filters out satellites based on their GNSS.
        <ul>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/gps</code>: Disable reporting of GPS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/sbas</code>: Disable reporting of SBAS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/qzss</code>: Disable reporting of QZSS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/glonass</code>: Disable reporting of GLONASS satellites. Defaults to false.</li>
          <li>
<code class="language-plaintext highlighter-rouge">nmea/gnssToFilt/beidou</code>: Disable reporting of BeiDou satellites. Defaults to false.</li>
        </ul>
      </li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/main_talker_id</code>: This field enables the main Talker ID to be overridden. Defaults to 0.</li>
      <li>
<code class="language-plaintext highlighter-rouge">nmea/gsv_talker_id</code>:  This field enables the GSV Talker ID to be overridden. Defaults to [0, 0].</li>
    </ul>
  </li>
</ul>

<h3 id="for-devices-with-firmware--8">For devices with firmware &gt;= 8:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">save_on_shutdown</code>: If true, the node will send a <code class="language-plaintext highlighter-rouge">UBX-UPD-SOS</code> command to save the BBR to flash memory on shutdown. Defaults to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">clear_bbr</code>: If true, the node will send a <code class="language-plaintext highlighter-rouge">UBX-UPD-SOS</code> command to clear the flash memory during configuration. Defaults to false.</li>
  <li>Additional <code class="language-plaintext highlighter-rouge">gnss</code> params
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/galileo</code>: Enable Galileo receiver. Defaults to false.</li>
      <li>
<code class="language-plaintext highlighter-rouge">gnss/imes</code>: Enable IMES receiver. Defaults to false.</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">nmea/bds_talker_id</code>: (See other NMEA configuration parameters above) Sets the two characters that should be used for the BeiDou Talker ID.</li>
</ul>

<h3 id="for-udradr-devices">For UDR/ADR devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">use_adr</code>: Enable ADR/UDR. Defaults to true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">nav_rate</code> should be set to 1 Hz.</li>
</ul>

<h3 id="for-hpg-reference-devices">For HPG Reference devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">tmode3</code>: Time Mode. Required. See CfgTMODE3 for constants.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/lla_flag</code>: True if the Fixed position is in Lat, Lon, Alt coordinates. False if ECEF. Required if <code class="language-plaintext highlighter-rouge">tmode3</code> is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/position</code>: Antenna Reference Point position in [m] or [deg]. Required if <code class="language-plaintext highlighter-rouge">tmode3</code> is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/position_hp</code>: Antenna Reference Point High Precision position in [0.1 mm] or [deg * 1e-9]. Required if tmode3 is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">arp/acc</code>: Fixed position accuracy in [m]. Required if <code class="language-plaintext highlighter-rouge">tmode3</code> is set to fixed.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sv_in/reset</code>: Whether or not to reset the survey in upon initialization. If false, it will only reset if the TMODE is disabled. Defaults to true.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sv_in/min_dur</code>: The minimum Survey-In Duration time in seconds. Required tmode3 is set to survey in.</li>
  <li>
<code class="language-plaintext highlighter-rouge">sv_in/acc_lim</code>: The minimum accuracy level of the survey in position in meters. Required <code class="language-plaintext highlighter-rouge">tmode3</code> is set to survey in.</li>
</ul>

<h3 id="for-hpg-rover-devices">For HPG Rover devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">dgnss_mode</code>: The Differential GNSS mode. Defaults to RTK FIXED. See <code class="language-plaintext highlighter-rouge">CfgDGNSS</code> message for constants.</li>
</ul>

<h3 id="for-tim-devices">For TIM devices:</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">tim_tm2</code>: Enable this message for GPS time-stamps everytime an external interrupt signal is received.</li>
</ul>

<h3 id="for-fts-devices">For FTS devices:</h3>
<ul>
  <li>currently unimplemented. See <code class="language-plaintext highlighter-rouge">FtsProduct</code> class in <code class="language-plaintext highlighter-rouge">ublox_gps</code> package <code class="language-plaintext highlighter-rouge">node.h</code> &amp; <code class="language-plaintext highlighter-rouge">node.cpp</code> files.</li>
</ul>

<h2 id="fix-topics">Fix Topics</h2>

<p><code class="language-plaintext highlighter-rouge">~fix</code>(<a href="http://docs.ros.org/api/sensor_msgs/html/msg/NavSatFix.html">sensor_msgs/NavSatFix</a>)</p>

<p>Navigation Satellite fix.</p>

<p><code class="language-plaintext highlighter-rouge">~fix_velocity</code>(<a href="http://docs.ros.org/jade/api/geometry_msgs/html/msg/TwistWithCovarianceStamped.html">geometry_msgs/TwistWithCovarianceStamped</a>)</p>

<p>Velocity in local ENU frame.</p>

<h2 id="inf-messages">INF messages</h2>
<p>To enable printing INF messages to the ROS console, set the parameters below.</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">inf/all</code>: This is the default value for the INF parameters below, which enable printing u-blox <code class="language-plaintext highlighter-rouge">INF</code> messages to the ROS console. It defaults to true. Individual message types can be turned off by setting their corresponding parameter to false.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/debug</code>: Whether to configure the UBX and NMEA ports to send Debug messages and print received <code class="language-plaintext highlighter-rouge">INF-Debug</code> messages to <code class="language-plaintext highlighter-rouge">ROS_DEBUG</code> console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/error</code>: Whether to enable Error messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Error</code> messages to <code class="language-plaintext highlighter-rouge">ROS_ERROR</code> console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/notice</code>: Whether to enable Notice messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Notice messages to </code>ROS_INFO` console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/test</code>: Whether to enable Test messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Test</code> messages to <code class="language-plaintext highlighter-rouge">ROS_INFO</code> console.</li>
  <li>
<code class="language-plaintext highlighter-rouge">inf/warning</code>: Whether to enable Warning messages for the UBX and NMEA ports and print received <code class="language-plaintext highlighter-rouge">INF-Warning</code> messages to the <code class="language-plaintext highlighter-rouge">ROS_WARN</code> console.</li>
</ul>

<h2 id="additional-topics">Additional Topics</h2>
<p>To publish a given u-blox message to a ROS topic, set the parameter shown below to true. The node sets the rate of the u-blox messages to 1 measurement cycle.</p>

<h3 id="all-messages">All messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/all</code>: This is the default value for <code class="language-plaintext highlighter-rouge">publish/&lt;class&gt;/all</code> parameters below. It defaults to false. Individual message classes and messages can be enabled or disabled by setting the parameters described below to false.</li>
</ul>

<h3 id="aid-messages">AID messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/aid/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/alm</code>: Topic <code class="language-plaintext highlighter-rouge">~aidalm</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/eph</code>: Topic <code class="language-plaintext highlighter-rouge">~aideph</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/aid/hui</code>: Topic <code class="language-plaintext highlighter-rouge">~aidhui</code>
</li>
</ul>

<h3 id="rxm-messages">RXM messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/rxm/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/alm</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmalm</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/eph</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmeph</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/raw</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmraw</code>. Type is either <code class="language-plaintext highlighter-rouge">RxmRAW</code> or <code class="language-plaintext highlighter-rouge">RxmRAWX</code> depending on firmware version.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/rtcm</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmrtcm</code>. <strong>Firmware &gt;= 8 only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/rxm/sfrb</code>: Topic <code class="language-plaintext highlighter-rouge">~rxmsfrb</code>. Type is either <code class="language-plaintext highlighter-rouge">RxmSFRB</code> or <code class="language-plaintext highlighter-rouge">RxmSFRBX</code> depending on firmware version.</li>
</ul>

<h3 id="mon-messages">MON messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/mon/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/mon/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/mon/hw</code>: Topic <code class="language-plaintext highlighter-rouge">~monhw</code>
</li>
</ul>

<h3 id="nav-messages">NAV messages</h3>
<ul>
  <li>NAV messages are time stamped with <code class="language-plaintext highlighter-rouge">iTOW</code>, and multiple messages can be synchronized with <a href="https://github.com/KumarRobotics/ublox/tree/master/ublox_msg_filters">ublox_msg_filters</a>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/mon/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/att</code>: Topic <code class="language-plaintext highlighter-rouge">~navatt</code>. <strong>ADR/UDR devices only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/clock</code>: Topic <code class="language-plaintext highlighter-rouge">~navclock</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/posecef</code>: Topic <code class="language-plaintext highlighter-rouge">~navposecef</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/posllh</code>: Topic <code class="language-plaintext highlighter-rouge">~navposllh</code>. <strong>Firmware &lt;= 6 only.</strong> For firmware 7 and above, see NavPVT</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/pvt</code>: Topic <code class="language-plaintext highlighter-rouge">~navpvt</code>. <strong>Firmware &gt;= 7 only.</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/relposned</code>: Topic <code class="language-plaintext highlighter-rouge">~navrelposned</code>. <strong>HPG Rover devices only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/heading</code>: Topic <code class="language-plaintext highlighter-rouge">~navheading</code>. <strong>HP Position receiver devices only.</strong> For firmware 9 and above</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/sat</code>: Topic <code class="language-plaintext highlighter-rouge">~navsat</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/sol</code>: Topic <code class="language-plaintext highlighter-rouge">~navsol</code>. <strong>Firmware &lt;= 6 only.</strong> For firmware 7 and above, see NavPVT</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/status</code>: Topic <code class="language-plaintext highlighter-rouge">~navstatus</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/svin</code>: Topic <code class="language-plaintext highlighter-rouge">~navsvin</code>. <strong>HPG Reference Station Devices only</strong>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/svinfo</code>: Topic <code class="language-plaintext highlighter-rouge">~navsvinfo</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/nav/velned</code>: Topic <code class="language-plaintext highlighter-rouge">~navvelned</code>. <strong>Firmware &lt;= 6 only.</strong> For firmware 7 and above, see NavPVT</li>
</ul>

<h3 id="esf-messages">ESF messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/all</code>: This is the default value for the <code class="language-plaintext highlighter-rouge">publish/esf/&lt;message&gt;</code> parameters below. It defaults to <code class="language-plaintext highlighter-rouge">publish/all</code> for <strong>ADR/UDR devices</strong>. Individual messages can be enabled or disabled by setting the parameters below.</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/alg</code>: Topic <code class="language-plaintext highlighter-rouge">~esfalg</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/ins</code>: Topic <code class="language-plaintext highlighter-rouge">~esfins</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/meas</code>: Topic <code class="language-plaintext highlighter-rouge">~esfmeas</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/raw</code>: Topic <code class="language-plaintext highlighter-rouge">~esfraw</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">publish/esf/status</code>: Topic <code class="language-plaintext highlighter-rouge">~esfstatus</code>
</li>
</ul>

<h3 id="hnr-messages">HNR messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/hnr/pvt</code>: Topic <code class="language-plaintext highlighter-rouge">~hnrpvt</code>. <strong>ADR/UDR devices only</strong>
</li>
</ul>

<h3 id="tim-messages">TIM messages</h3>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">publish/tim/tm2</code>: Topic <code class="language-plaintext highlighter-rouge">timtm2</code>. <strong>TIM devices only</strong>
</li>
</ul>

<h2 id="launch">Launch</h2>

<p>A sample launch file <code class="language-plaintext highlighter-rouge">ublox_device.launch</code> loads the parameters from a <code class="language-plaintext highlighter-rouge">.yaml</code> file in the <code class="language-plaintext highlighter-rouge">ublox_gps/config</code> folder, sample configuration files are included. The required arguments are <code class="language-plaintext highlighter-rouge">node_name</code> and <code class="language-plaintext highlighter-rouge">param_file_name</code>.
The two topics to which you should subscribe are <code class="language-plaintext highlighter-rouge">~fix</code> and <code class="language-plaintext highlighter-rouge">~fix_velocity</code>. The angular component of <code class="language-plaintext highlighter-rouge">fix_velocity</code> is unused.</p>

<h1 id="version-history">Version history</h1>

<ul>
  <li>
<strong>1.1.4</strong>:
    <ul>
      <li>Added messages for firmware 9: <code class="language-plaintext highlighter-rouge">NavRELPOSNED9</code>.</li>
      <li>Added option to publish <code class="language-plaintext highlighter-rouge">sensor_msgs/Imu</code> message for High Precision Position Receiver devices with firmware version &gt;= 9 for moving base applications (For example ZED-F9P; <a href="https://www.u-blox.com/sites/default/files/ZED-F9P-MovingBase_AppNote_%28UBX-19009093%29.pdf">UBX-19009093 AppNote</a>).</li>
    </ul>
  </li>
  <li>
<strong>1.1.3</strong>:
    <ul>
      <li>Update by TUC-ProAut</li>
      <li>Added raw data stream output. To publish ros messages set rosparam <code class="language-plaintext highlighter-rouge">raw_data_stream/publish</code> to true. To store to a logfile set rosparam <code class="language-plaintext highlighter-rouge">set raw_data_stream/dir</code> to the appropriated directory. This feature has nothing todo with Raw Data Products.</li>
      <li>Added flag <code class="language-plaintext highlighter-rouge">config_on_startup</code> to deactivate configuration of ublox.</li>
    </ul>
  </li>
  <li>
<strong>1.1.2</strong>:
    <ul>
      <li>BUG FIX for NavSatFix messages for firmware &gt;=7. The NavSatFix now only uses the NavPVT message time if it is valid, otherwise it uses ROS time.</li>
      <li>BUG FIX for TMODE3 Fixed mode configuration. The ARP High Precision position is now configured correctly.</li>
      <li>BUG FIX for <code class="language-plaintext highlighter-rouge">NavDGPS</code> message which had the wrong Message ID.</li>
      <li>After GNSS configuration &amp; reset, I/O resets automatically, without need for restart.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">UBX-UPD</code> messages. For firmware version 8, the node can now save the flash memory on shutdown and clear the flash memory during configuration based on ROS params.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">CfgGPS</code> message and <code class="language-plaintext highlighter-rouge">MonHW6</code> message for firmware version 6.</li>
      <li>Added respawn parameters to example launch file.</li>
      <li>Added parameters to load/save configuration.</li>
      <li>Added raw_data parameter for Raw Data Products.</li>
      <li>Changed name of “subscribe” parameter namespace to “publish” for clarity.</li>
      <li>Migrated all callback handling to <code class="language-plaintext highlighter-rouge">callback.h</code> from <code class="language-plaintext highlighter-rouge">gps.h</code> and <code class="language-plaintext highlighter-rouge">gps.cpp</code>. ACK messages are now processed through callback handlers.</li>
      <li>Modified how the I/O stream is initialized so that the node now handles parsing the port string.</li>
      <li>Changed class names of Ublox product components (e.g. UbloxTim -&gt; TimProduct) for clarity.</li>
      <li>Cleaned up ublox custom serialization classes by adding typedefs and using count to determine repeating block statements instead of using try-catch statements to serialize stream.</li>
      <li>Added doxygen documentation</li>
    </ul>
  </li>
  <li>
<strong>1.1.1</strong>:
    <ul>
      <li>BUG FIX for acknowledgments. The last received ack message was accessed by multiple threads but was not atomic. This variable is now thread safe.</li>
      <li>BUG FIX for GNSS configuration for Firmware 8, the GNSS configuration is now verified &amp; modified properly.</li>
      <li>BUG FIX for fix diagnostics. NumSV was displaying incorrectly. For firmware versions &gt;=7, the NavPVT flags variable is now compared to the constants from the NavPVT message not NavSOL.</li>
      <li>Removed ublox_version param, value is now determined by parsing MonVER.</li>
      <li>Organized parameters into namespaces.</li>
      <li>Better parameter checking. Checks that unsigned ints and vectors of unsigned ints are in bounds.</li>
      <li>Changed rtcm/rate parameter to a vector instead of a scalar, now each RTCM id can be set to a different rate.</li>
      <li>Diagnostic variables are displayed more clearly with units included.</li>
      <li>For HPG Rovers, added diagnostic updater for Carrier Phase Solution.</li>
      <li>Added CfgNMEA messages for each firmware version and a CfgDAT message, as well as parameters to configure the NMEA and Datum.</li>
      <li>Added constants for NavSAT_SV flags bit mask.</li>
    </ul>
  </li>
  <li>
<strong>1.1.0</strong>:
    <ul>
      <li>BUG FIX for NAV-PVT messages for firmware 7. The NAV-PVT message is shorter for firmware version 7, the new message is <code class="language-plaintext highlighter-rouge">NavPVT7</code>
</li>
      <li>BUG FIX for SBAS configuration, it now configures SBAS only if the device is SBAS capable. Previously, if enable_sbas was set to false, it would not configure, meaning that SBAS could not be turned off.</li>
      <li>BUG FIX, the baudrate of the serial I/O port was not configured correctly, on the device it was set to the user desired settings, but on the computer it was always set to 4800.</li>
      <li>BUG FIX, Diagnostics for Nav Status are now updated in firmware version 6.</li>
      <li>BUG FIX, The method which waited for ACKs now checks if the ACK is from the correct class and message ID.</li>
      <li>Added messages for <code class="language-plaintext highlighter-rouge">CfgTMODE3</code>, <code class="language-plaintext highlighter-rouge">CfgHNR</code>, <code class="language-plaintext highlighter-rouge">CfgRST</code>, <code class="language-plaintext highlighter-rouge">CfgINF</code>, <code class="language-plaintext highlighter-rouge">NavATT</code>, <code class="language-plaintext highlighter-rouge">ESF</code> messages, <code class="language-plaintext highlighter-rouge">Inf</code> message (for all INF types), <code class="language-plaintext highlighter-rouge">HnrPVT</code>, <code class="language-plaintext highlighter-rouge">MgaGAL</code>, <code class="language-plaintext highlighter-rouge">NavSAT</code>, <code class="language-plaintext highlighter-rouge">MonHw</code>, <code class="language-plaintext highlighter-rouge">NavPVT7</code> (for firmware version 7).</li>
      <li>Restructured Node class so that it now uses composition. The main node contains instances of classes which implement <code class="language-plaintext highlighter-rouge">UBloxInterface</code>, and calls the methods for each interface added to the node. The classes which implement the interface add new features that are not generic to all firmware versions or products. Each firmware version (6-8) has an interface, and each product category has one (SPG, HPG REF, HPG ROV, TIM, FTS, ADR/UDR). The product type is determined from parsing the <code class="language-plaintext highlighter-rouge">MonVER</code> message.</li>
      <li>Added implementations of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> called <code class="language-plaintext highlighter-rouge">UbloxHpgRef</code> and <code class="language-plaintext highlighter-rouge">UbloxHpgRov</code> for HPG reference station and rover devices. The reference station tmode3 can be configured upon startup (see Options section) and the rover dgnss mode can be set. After survey in, once the reference station entire time mode, the nav_rate is set to the user desired value (it must be 1 Hz during survey-in) and the RTCM output messages are enabled. The state can be monitored through the rqt_runtime_monitor. These classes were tested on C94-M8P devices.</li>
      <li>Added an implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> called <code class="language-plaintext highlighter-rouge">UbloxAdrUdr</code> for ADR/UDR devices. It which subscribes to <code class="language-plaintext highlighter-rouge">NavATT</code> and ESF messages and configures useAdr. The diagnostics monitor specific to these devices is not implemented. This class has not been tested on a hardware device.</li>
      <li>Added a partial implementation of <code class="language-plaintext highlighter-rouge">UbloxTim</code> for TIM devices which subscribes to <code class="language-plaintext highlighter-rouge">RxmRAWX</code> and <code class="language-plaintext highlighter-rouge">RxmSFRBX</code> messages. The <code class="language-plaintext highlighter-rouge">getRosParams()</code>, <code class="language-plaintext highlighter-rouge">configureUblox()</code>, and <code class="language-plaintext highlighter-rouge">initializeDiagnostics()</code> methods are unimplemented.</li>
      <li>Added a skeleton class for <code class="language-plaintext highlighter-rouge">UbloxFts</code> for FTS devices which is unimplemented. See the <code class="language-plaintext highlighter-rouge">ublox_gps</code> <code class="language-plaintext highlighter-rouge">node.cpp</code> and <code class="language-plaintext highlighter-rouge">node.h</code> files.</li>
      <li>Changed how GNSS is configured in firmware version 8. The documentation recommends a cold restart after reconfiguring the GNSS, and will reset the device if it receives a <code class="language-plaintext highlighter-rouge">CfgGNSS</code> message, even if the settings do not change. For firmware version 8, before reconfiguring, the node first checks if the current GNSS settings are the same as the desired settings. If so, it will not send a CfgGNSS message to the device. After reconfiguring, it will cold reset the GNSS.</li>
      <li>Migrated I/O initialization to the <code class="language-plaintext highlighter-rouge">Gps</code> class from the <code class="language-plaintext highlighter-rouge">Node</code> class.</li>
      <li>INF messages are now printed to the ROS console.</li>
      <li>Changed how debug statements are displayed. If the debug parameter is set to 1 or greater, it prints debug messages.</li>
    </ul>
  </li>
  <li>
<strong>1.0.0</strong>:
    <ul>
      <li>Added messages for firmware 8: <code class="language-plaintext highlighter-rouge">NavPVT</code>, <code class="language-plaintext highlighter-rouge">RxmRAWX</code>, <code class="language-plaintext highlighter-rouge">RxmSFRBX</code>.</li>
      <li>Modified ConfigGNSS and MonVER to include repeated blocks and added 
ConfigGNSS_Block (configures all GNSS at once) and MonVER_Extension 
(for MonVER_Char blocks).</li>
      <li>MonVER info is now published upon initialization.</li>
      <li>Fixed SBAS crashing issue (node crashed if device didn’t have SBAS 
capabilities)</li>
      <li>Modified remaining messages to update to firmware 8</li>
      <li>Added <code class="language-plaintext highlighter-rouge">UbloxNode</code> abstract class which does all previous node functions which 
are the same for all firmware versions. Added subclasses which do functions
specific to a given firmware version (e.g. subscribing to NavPVT messages).</li>
      <li>Added a read lock to AsyncWorker</li>
      <li>Removed hard-coded values from <code class="language-plaintext highlighter-rouge">Gps</code> and <code class="language-plaintext highlighter-rouge">Node</code> classes specific to a certain 
device and changed them to configurable parameters. Modified example
launch file accordingly.</li>
      <li>Added example parameter yaml files and launch file to load parameters from
this file.</li>
      <li>Moved implementations of Callback functions into <code class="language-plaintext highlighter-rouge">callback.h</code> (from <code class="language-plaintext highlighter-rouge">gps.h</code> 
and <code class="language-plaintext highlighter-rouge">gps.cpp</code>)</li>
      <li>Updated formatting of some files per google style guide spec (e.g. 80 chars
per line).</li>
    </ul>
  </li>
  <li>
<strong>0.0.5</strong>:
    <ul>
      <li>Reformat files under <code class="language-plaintext highlighter-rouge">ublox_gps</code>
</li>
    </ul>
  </li>
  <li>
<strong>0.0.4</strong>:
    <ul>
      <li>Added install targets.</li>
    </ul>
  </li>
  <li>
<strong>0.0.3</strong>:
    <ul>
      <li>Added the <code class="language-plaintext highlighter-rouge">enable_glonass</code>, <code class="language-plaintext highlighter-rouge">enable_beidou</code> and <code class="language-plaintext highlighter-rouge">enable_ppp</code> options.</li>
      <li>Added the <code class="language-plaintext highlighter-rouge">ublox_version</code> option. Consult known issues for important details.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">numSVs</code> field to the RQT monitor.</li>
    </ul>
  </li>
  <li>
<strong>0.0.2</strong>:
    <ul>
      <li>Changed <code class="language-plaintext highlighter-rouge">meas_rate</code> to simply <code class="language-plaintext highlighter-rouge">rate</code>, which is in Hz. <code class="language-plaintext highlighter-rouge">meas_rate</code> is computed automatically.</li>
    </ul>
  </li>
  <li>
<strong>0.0.1</strong>:
    <ul>
      <li>All topics are now published on a private node handle.</li>
      <li>Velocities are published as stamped twist messages with covariance. Angular components are unused.</li>
      <li>
<code class="language-plaintext highlighter-rouge">hAcc</code>, <code class="language-plaintext highlighter-rouge">vAcc</code> and <code class="language-plaintext highlighter-rouge">sAcc</code> are used to generate diagonal covariances.</li>
      <li>Velocities use the correct convention: X-Y-Z = East-North-Up.</li>
      <li>2D <strong>or</strong> 3D fix correspond to <code class="language-plaintext highlighter-rouge">STATUS_FIX</code> (previously only 3D).</li>
      <li>
<code class="language-plaintext highlighter-rouge">fix</code> and <code class="language-plaintext highlighter-rouge">fix_velocity</code> are time-stamped synchronously, using the <code class="language-plaintext highlighter-rouge">iTOW</code> to check arrival times.</li>
      <li>Added options for changing the CFG-NAV5 settings (see above).</li>
      <li>Added support for <code class="language-plaintext highlighter-rouge">diagnostic_updater</code>.</li>
      <li>
<em>“received ACK”</em> messages are elevated to debug level 2.</li>
      <li>Corrected issue where baudrate was not set correctly using rosparam.</li>
      <li>Corrected issue where socket destructors were not called.</li>
    </ul>
  </li>
  <li>
<strong>0.0.0</strong>:
    <ul>
      <li>Forked from https://github.com/tu-darmstadt-ros-pkg/ublox</li>
      <li>Updated to use catkin.</li>
    </ul>
  </li>
</ul>

<h1 id="adding-new-features">Adding new features</h1>
<h2 id="adding-new-messages">Adding new messages</h2>
<ol>
  <li>
    <p>Create the .msg file and add it to <code class="language-plaintext highlighter-rouge">ublox_msgs/msg</code>. Make sure the file includes the constants <code class="language-plaintext highlighter-rouge">CLASS_ID</code> and <code class="language-plaintext highlighter-rouge">MESSAGE_ID</code>.</p>
  </li>
  <li>
    <p>Modify <code class="language-plaintext highlighter-rouge">ublox_msgs/include/ublox_msgs/ublox_msgs.h</code>. 
a. Include the message header. 
b. Make sure the message’s class constant is declared in the <code class="language-plaintext highlighter-rouge">ublox_msgs::Class</code> namespace. 
c. Declare the message’s ID constant in the <code class="language-plaintext highlighter-rouge">ublox_messages::Message::&lt;CLASS_NAME&gt;</code> namespace.</p>
  </li>
  <li>
    <p>Declare the message in <code class="language-plaintext highlighter-rouge">ublox_msgs/src/ublox_msgs.cpp</code>.</p>
  </li>
  <li>
    <p>If the message has a repeated or optional block of varying size, create an additional message for the repeating block and include it in the message. 
a. Include the block message in the <code class="language-plaintext highlighter-rouge">ublox_msgs/include/ublox_msgs/ublox_msgs.h</code> file. 
b. Modify <code class="language-plaintext highlighter-rouge">ublox_msgs/include/ublox/serialization/ublox_msgs.h</code> and add a custom <code class="language-plaintext highlighter-rouge">Serializer</code>. If the message doesn’t include the number of repeating/optional blocks as a parameter, you can infer it from the count/size of the message, which is the length of the payload.</p>
  </li>
  <li>
    <p>Modify <code class="language-plaintext highlighter-rouge">ublox_gps/src/node.cpp</code> (and the header file if necessary) to either subscribe to the message or send the configuration message. Be sure to modify the appropriate subscribe function. For messages which apply to all firmware/hardware, modify <code class="language-plaintext highlighter-rouge">UbloxNode::subscribe()</code>. Otherwise modify the appropriate firmware or hardware’s subscribe function, e.g. <code class="language-plaintext highlighter-rouge">UbloxFirmware8::subscribe()</code>, <code class="language-plaintext highlighter-rouge">HpgRovProduct::subscribe()</code>. If the message is a configuration message, consider modifying <code class="language-plaintext highlighter-rouge">ublox_gps/src/gps.cpp</code> (and the header file) to add a configuration function.</p>
  </li>
</ol>

<h3 id="one-message-protocol-for-multiple-ids-eg-inf-message">One message protocol for multiple IDs (e.g. INF message)</h3>
<p>If a given message protocol applies to multiple message IDs (e.g. the <code class="language-plaintext highlighter-rouge">Inf</code> message), do not include the message ID in the message itself.
When declaring the message, for the first declaration, use <code class="language-plaintext highlighter-rouge">DECLARE_UBLOX_MESSAGE</code> macro. For the following declarations use the <code class="language-plaintext highlighter-rouge">DECLARE_UBLOX_MESSAGE_ID</code> macro.</p>

<h2 id="adding-device--firmware-specific-functionality">Adding device / firmware specific functionality</h2>

<p>The <code class="language-plaintext highlighter-rouge">node.cpp</code> file in <code class="language-plaintext highlighter-rouge">ublox_gps</code> contains a main Node class called UbloxNode which acts as the ROS Node and handles the node initialization, publishers, and diagnostics. <code class="language-plaintext highlighter-rouge">UbloxNode</code> contains a vector <code class="language-plaintext highlighter-rouge">components_</code> of instances of <code class="language-plaintext highlighter-rouge">ComponentInterface</code>. The <code class="language-plaintext highlighter-rouge">UbloxNode::initialize()</code> calls each component’s public interface methods. The node contains components for both the firmware version and the product category, which are added after parsing the <code class="language-plaintext highlighter-rouge">MonVER</code> message. Any class which implements <code class="language-plaintext highlighter-rouge">ComponentInterface</code> can be added to the <code class="language-plaintext highlighter-rouge">UbloxNode</code> <code class="language-plaintext highlighter-rouge">components_</code> vector and its methods will be called by <code class="language-plaintext highlighter-rouge">UbloxNode</code>. Simply add an implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> to the ublox_gps <code class="language-plaintext highlighter-rouge">node.h</code> and <code class="language-plaintext highlighter-rouge">node.cpp</code> files. Behavior specific to a given firmware or product should not be implemented in the <code class="language-plaintext highlighter-rouge">UbloxNode</code> class and instead should be implemented in an implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code>.</p>

<p>Currently there are implementations of <code class="language-plaintext highlighter-rouge">ComponentInterface</code> for firmware versions 6-8 and product categories <code class="language-plaintext highlighter-rouge">HpgRefProduct</code>, <code class="language-plaintext highlighter-rouge">HpgRovProduct</code>, <code class="language-plaintext highlighter-rouge">AdrUdrProduct</code>, <code class="language-plaintext highlighter-rouge">TimProduct</code>, <code class="language-plaintext highlighter-rouge">FtsProduct</code>.  SPG products do not have their own implementation of <code class="language-plaintext highlighter-rouge">ComponentInterface</code>, since the Firmware classes implement all of the behavior of SPG devices.</p>

<p><code class="language-plaintext highlighter-rouge">HpgRefProduct</code> and <code class="language-plaintext highlighter-rouge">HpgRovProduct</code> have been tested on the C94-M8P device.</p>

<h2 id="adding-new-parameters">Adding new parameters</h2>
<ol>
  <li>Modify the <code class="language-plaintext highlighter-rouge">getRosParams()</code> method in the appropriate implementation of ComponentInterface (e.g. UbloxNode, UbloxFirmware8, HpgRefProduct, etc.) and get the parameter. Group multiple related parameters into a namespace. Use all lower case names for parameters and namespaces separated with underscores.
    <ul>
      <li>If the type is an unsigned integer (of any size) or vector of unsigned integers, use the <code class="language-plaintext highlighter-rouge">ublox_node::getRosUint</code> method which will verify the bounds of the parameter.</li>
      <li>If the type is an int8 or int16 or vector of int8’s or int16’s, use the <code class="language-plaintext highlighter-rouge">ublox_nod::getRosInt</code> method which will verify the bounds of the parameter. (This method can also be used for int32’s but ROS has methods to get int32 parameters as well).</li>
    </ul>
  </li>
  <li>If the parameter is used during configuration also modify the <code class="language-plaintext highlighter-rouge">ComponentInterface</code>’s <code class="language-plaintext highlighter-rouge">configureUblox()</code> method to send the appropriate configuration message. Do not send configuration messages in <code class="language-plaintext highlighter-rouge">getRosParams()</code>.</li>
  <li>Modify this README file and add the parameter name and description in the appropriate section. State whether there is a default value or if the parameter is required.</li>
  <li>Modify one of the sample <code class="language-plaintext highlighter-rouge">.yaml</code> configuration files in <code class="language-plaintext highlighter-rouge">ublox_gps/config</code> to include the parameter or add a new sample <code class="language-plaintext highlighter-rouge">.yaml</code> for your device.</li>
</ol>

<h1 id="known-issues">Known Issues</h1>

<h2 id="unimplemented--untested-devices">Unimplemented / Untested Devices</h2>

<p><code class="language-plaintext highlighter-rouge">TimProduct</code> and <code class="language-plaintext highlighter-rouge">FtsProduct</code> are currently unimplemented skeleton classes. <code class="language-plaintext highlighter-rouge">AdrUdrProduct</code> is implemented, with the exception of <code class="language-plaintext highlighter-rouge">initializeRosDiagnostics()</code> and has not been tested on hardware.</p>

<p><code class="language-plaintext highlighter-rouge">UbloxFirmware7</code> has not been properly tested on a device with firmware version 7. <code class="language-plaintext highlighter-rouge">UbloxFirmware6</code> has been tested on a device with firmware version 8, but not with firmware version 6.</p>

<h2 id="debugging">Debugging</h2>

<p>For debugging messages set the debug parameter to &gt; 0. The range for debug is 0-4. At level 1 it prints configuration messages and checksum errors, at level 2 it also prints ACK/NACK messages and sent messages. At level 3 it prints the received bytes being decoded by a specific message reader. At level 4 it prints the incoming buffer before it is split by message header.</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<ol>
  <li>Why can’t the ublox_gps node open my device, even though I have correctly specified the path in <code class="language-plaintext highlighter-rouge">/dev</code>?
    <ul>
      <li>Make sure you are the owner of the device, or a member of <code class="language-plaintext highlighter-rouge">dialout</code> group.</li>
    </ul>
  </li>
</ol>

<h1 id="links">Links</h1>
<p>Consult the <a href="https://www.u-blox.com/sites/default/files/products/documents/u-blox8-M8_ReceiverDescrProtSpec_(UBX-13003221)_Public.pdf">official protocol spec</a> for details on packets supported by u-blox devices.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/KumarRobotics/ublox.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
