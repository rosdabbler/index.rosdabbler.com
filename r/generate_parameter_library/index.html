<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/generate_parameter_library/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">generate_parameter_library</li>
        <!--<li class="active">generate_parameter_library</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-primary" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-primary" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-primary" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-primary" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-default" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class=" older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/generate_parameter_library">generate_parameter_library</a> <small>repository</small></h3>
        <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_library_example">generate_parameter_library_example</a>
        
        <a class="label label-primary pkg-label" href="/p/cmake_generate_parameter_module_example">cmake_generate_parameter_module_example</a>
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_library_example_external">generate_parameter_library_example_external</a>
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_module_example">generate_parameter_module_example</a>
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_library">generate_parameter_library</a>
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_library_py">generate_parameter_library_py</a>
        
        <a class="label label-primary pkg-label" href="/p/parameter_traits">parameter_traits</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-PickNikRobotics-generate_parameter_library
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-PickNikRobotics-generate_parameter_library" role="menuitem" tabindex="-1" href="/r/generate_parameter_library/github-PickNikRobotics-generate_parameter_library" data="github-PickNikRobotics-generate_parameter_library">
                    <span class="glyphicon glyphicon-star"></span>
                    github-PickNikRobotics-generate_parameter_library
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Declarative ROS 2 Parameters</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/PickNikRobotics/generate_parameter_library.git">https://github.com/PickNikRobotics/generate_parameter_library.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-02-13
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/generate_parameter_library/#humble-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/generate_parameter_library/#humble-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/generate_parameter_library/#humble-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/generate_parameter_library_example">generate_parameter_library_example</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/cmake_generate_parameter_module_example">cmake_generate_parameter_module_example</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/generate_parameter_library_example_external">generate_parameter_library_example_external</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/generate_parameter_module_example">generate_parameter_module_example</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/generate_parameter_library">generate_parameter_library</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/generate_parameter_library_py">generate_parameter_library_py</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/parameter_traits">parameter_traits</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="generate_parameter_library">generate_parameter_library</h1>
<p>Generate C++ or Python code for ROS 2 parameter declaration, getting, and validation using declarative YAML.
The generated library contains a C++ struct with specified parameters.
Additionally, dynamic parameters and custom validation are made easy.</p>

<h2 id="killer-features">Killer Features</h2>
<ul>
  <li>Declarative YAML syntax for ROS 2 Parameters converted into C++ or Python struct</li>
  <li>Declaring, Getting, Validating, and Updating handled by generated code</li>
  <li>Dynamic ROS 2 Parameters made easy</li>
  <li>Custom user-specified validator functions</li>
  <li>Automatically create documentation of parameters</li>
</ul>

<h2 id="basic-usage">Basic Usage</h2>
<ol>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#create-yaml-parameter-codegen-file">Create YAML parameter codegen file</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#add-parameter-library-generation-to-project">Add parameter library generation to project</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#use-generated-struct-into-project-source-code">Use generated struct into project source code</a></li>
</ol>

<h3 id="create-yaml-parameter-codegen-file">Create yaml parameter codegen file</h3>
<p>Write a yaml file to declare your parameters and their attributes.</p>

<p><strong>src/turtlesim_parameters.yaml</strong></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">turtlesim</span><span class="pi">:</span>
  <span class="na">background</span><span class="pi">:</span>
    <span class="na">r</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">int</span>
      <span class="na">default_value</span><span class="pi">:</span> <span class="m">0</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Red</span><span class="nv"> </span><span class="s">color</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">background,</span><span class="nv"> </span><span class="s">8-bit"</span>
      <span class="na">validation</span><span class="pi">:</span>
        <span class="na">bounds&lt;&gt;</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0</span><span class="pi">,</span> <span class="nv">255</span><span class="pi">]</span>
    <span class="na">g</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">int</span>
      <span class="na">default_value</span><span class="pi">:</span> <span class="m">0</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Green</span><span class="nv"> </span><span class="s">color</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">background,</span><span class="nv"> </span><span class="s">8-bit"</span>
      <span class="na">validation</span><span class="pi">:</span>
        <span class="na">bounds&lt;&gt;</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0</span><span class="pi">,</span> <span class="nv">255</span><span class="pi">]</span>
    <span class="na">b</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">int</span>
      <span class="na">default_value</span><span class="pi">:</span> <span class="m">0</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Blue</span><span class="nv"> </span><span class="s">color</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">background,</span><span class="nv"> </span><span class="s">8-bit"</span>
      <span class="na">validation</span><span class="pi">:</span>
        <span class="na">bounds&lt;&gt;</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0</span><span class="pi">,</span> <span class="nv">255</span><span class="pi">]</span>

</code></pre></div></div>

<h3 id="add-parameter-library-generation-to-project">Add parameter library generation to project</h3>

<p><strong>package.xml</strong></p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;depend&gt;</span>generate_parameter_library<span class="nt">&lt;/depend&gt;</span>

</code></pre></div></div>

<p><strong>CMakeLists.txt</strong></p>

<div class="language-cmake highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">find_package</span><span class="p">(</span>generate_parameter_library REQUIRED<span class="p">)</span>

<span class="nf">generate_parameter_library</span><span class="p">(</span>
  turtlesim_parameters <span class="c1"># cmake target name for the parameter library</span>
  src/turtlesim_parameters.yaml <span class="c1"># path to input yaml file</span>
<span class="p">)</span>

<span class="nb">add_executable</span><span class="p">(</span>minimal_node src/turtlesim.cpp<span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span>minimal_node PRIVATE
  rclcpp::rclcpp
  turtlesim_parameters
<span class="p">)</span>

<span class="nb">install</span><span class="p">(</span>TARGETS minimal_node turtlesim_parameters
  EXPORT <span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>Targets<span class="p">)</span>
<span class="nf">ament_export_targets</span><span class="p">(</span><span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>Targets HAS_LIBRARY_TARGET<span class="p">)</span>

</code></pre></div></div>

<p><strong>setup.py</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">generate_parameter_library_py.setup_helper</span> <span class="kn">import</span> <span class="n">generate_parameter_module</span>

<span class="nf">generate_parameter_module</span><span class="p">(</span>
  <span class="sh">"</span><span class="s">turtlesim_parameters</span><span class="sh">"</span><span class="p">,</span> <span class="c1"># python module name for parameter library
</span>  <span class="sh">"</span><span class="s">turtlesim/turtlesim_parameters.yaml</span><span class="sh">"</span><span class="p">,</span> <span class="c1"># path to input yaml file
</span><span class="p">)</span>

</code></pre></div></div>

<h3 id="use-generated-struct-in-project-source-code">Use generated struct in project source code</h3>

<p><strong>src/turtlesim.cpp</strong></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;rclcpp/rclcpp.hpp&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;turtlesim/turtlesim_parameters.hpp&gt;</span><span class="c1">  // you can also use the deprecated #include "turtlesim_parameters.hpp"</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
  <span class="n">rclcpp</span><span class="o">::</span><span class="n">init</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>
  <span class="k">auto</span> <span class="n">node</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"turtlesim"</span><span class="p">);</span>
  <span class="k">auto</span> <span class="n">param_listener</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">turtlesim</span><span class="o">::</span><span class="n">ParamListener</span><span class="o">&gt;</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
  <span class="k">auto</span> <span class="n">params</span> <span class="o">=</span> <span class="n">param_listener</span><span class="o">-&gt;</span><span class="n">get_params</span><span class="p">();</span>

  <span class="k">auto</span> <span class="n">color</span> <span class="o">=</span> <span class="n">params</span><span class="p">.</span><span class="n">background</span><span class="p">;</span>
  <span class="n">RCLCPP_INFO</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">get_logger</span><span class="p">(),</span>
    <span class="s">"Background color (r,g,b): %d, %d, %d"</span><span class="p">,</span>
    <span class="n">color</span><span class="p">.</span><span class="n">r</span><span class="p">,</span> <span class="n">color</span><span class="p">.</span><span class="n">g</span><span class="p">,</span> <span class="n">color</span><span class="p">.</span><span class="n">b</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div></div>

<p><strong>turtlesim/turtlesim.py</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">rclpy</span>
<span class="kn">from</span> <span class="n">rclpy.node</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="kn">from</span> <span class="n">turtlesim_pkg.turtlesim_parameters</span> <span class="kn">import</span> <span class="n">turtlesim_parameters</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
  <span class="n">rclpy</span><span class="p">.</span><span class="nf">init</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">)</span>
  <span class="n">node</span> <span class="o">=</span> <span class="nc">Node</span><span class="p">(</span><span class="sh">"</span><span class="s">turtlesim</span><span class="sh">"</span><span class="p">)</span>
  <span class="n">param_listener</span> <span class="o">=</span> <span class="n">turtlesim_parameters</span><span class="p">.</span><span class="nc">ParamListener</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
  <span class="n">params</span> <span class="o">=</span> <span class="n">param_listener</span><span class="p">.</span><span class="nf">get_params</span><span class="p">()</span>

  <span class="n">color</span> <span class="o">=</span> <span class="n">params</span><span class="p">.</span><span class="n">background</span>
  <span class="n">node</span><span class="p">.</span><span class="nf">get_logger</span><span class="p">().</span><span class="nf">info</span><span class="p">(</span>
    <span class="sh">"</span><span class="s">Background color (r,g,b): %d, %d, %d</span><span class="sh">"</span> <span class="o">%</span>
    <span class="n">color</span><span class="p">.</span><span class="n">r</span><span class="p">,</span> <span class="n">color</span><span class="p">.</span><span class="n">g</span><span class="p">,</span> <span class="n">color</span><span class="p">.</span><span class="n">b</span><span class="p">)</span>

</code></pre></div></div>

<h3 id="use-example-yaml-files-in-tests">Use example yaml files in tests</h3>
<p>When using parameter library generation it can happen that there are issues when executing tests since parameters are not defined and the library defines them as mandatory.
To overcome this it is recommended to define example yaml files for tests and use them as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find_package(ament_cmake_gtest REQUIRED)
add_rostest_with_parameters_gtest(test_turtlesim_parameters test/test_turtlesim_parameters.cpp
  ${CMAKE_CURRENT_SOURCE_DIR}/test/example_turtlesim_parameters.yaml)
target_include_directories(test_turtlesim_parameters PRIVATE include)
target_link_libraries(test_turtlesim_parameters turtlesim_parameters)
ament_target_dependencies(test_turtlesim_parameters rclcpp)

</code></pre></div></div>

<p>when using <code class="language-plaintext highlighter-rouge">gtest</code>, or:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find_package(ament_cmake_gmock REQUIRED)
add_rostest_with_parameters_gmock(test_turtlesim_parameters test/test_turtlesim_parameters.cpp
  ${CMAKE_CURRENT_SOURCE_DIR}/test/example_turtlesim_parameters.yaml)
target_include_directories(test_turtlesim_parameters PRIVATE include)
target_link_libraries(test_turtlesim_parameters turtlesim_parameters)
ament_target_dependencies(test_turtlesim_parameters rclcpp)

</code></pre></div></div>
<p>when using <code class="language-plaintext highlighter-rouge">gmock</code> test library.</p>

<p>🤖 P.S. having this example yaml files will make your users very grateful because they will always have a working example of a configuration for your node.</p>

<h2 id="detailed-documentation">Detailed Documentation</h2>
<ul>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#cpp-namespace">Cpp namespace</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#parameter-definition">Parameter definition</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#built-in-validators">Built-In Validators</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#custom-validator-functions">Custom validator functions</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#nested-structures">Nested structures</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#use-generated-struct-in-cpp">Use generated struct in Cpp</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#dynamic-parameters">Dynamic Parameters</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#example-project">Example Project</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#generated-code-output">Generated code output</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#generate-markdown-documentation">Generate markdown documentation</a></li>
</ul>

<h3 id="cpp-namespace">Cpp namespace</h3>
<p>The root element of the YAML file determines the namespace used in the generated C++ code.
We use this to put the <code class="language-plaintext highlighter-rouge">Params</code> struct in the same namespace as your C++ code.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cpp_namespace</span><span class="pi">:</span>
<span class="c1"># additionally fields  ...</span>

</code></pre></div></div>

<h3 id="parameter-definition">Parameter definition</h3>
<p>The YAML syntax can be thought of as a tree since it allows for arbitrary nesting of key-value pairs.
For clarity, the last non-nested value is referred to as a leaf.
A leaf represents a single parameter and has the following format.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cpp_namespace</span><span class="pi">:</span>
  <span class="na">param_name</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">int</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="m">3</span>
    <span class="na">read_only</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">additional_constraints</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{</span><span class="nv"> </span><span class="s">type:</span><span class="nv"> </span><span class="s">'number',</span><span class="nv"> </span><span class="s">multipleOf:</span><span class="nv"> </span><span class="s">3</span><span class="nv"> </span><span class="s">}"</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">A</span><span class="nv"> </span><span class="s">read-only</span><span class="nv">  </span><span class="s">integer</span><span class="nv"> </span><span class="s">parameter</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">default</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">3"</span>
    <span class="na">validation</span><span class="pi">:</span>
      <span class="c1"># validation functions ...</span>

</code></pre></div></div>

<p>A parameter is a YAML dictionary with the only required key being <code class="language-plaintext highlighter-rouge">type</code>.</p>

<table>
  <thead>
    <tr>
      <th>Field</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>type</td>
      <td>The type (string, double, etc) of the parameter.</td>
    </tr>
    <tr>
      <td>default_value</td>
      <td>Value for the parameter if the user does not specify a value.</td>
    </tr>
    <tr>
      <td>read_only</td>
      <td>Can only be set at launch and are not dynamic.</td>
    </tr>
    <tr>
      <td>description</td>
      <td>Displayed by <code class="language-plaintext highlighter-rouge">ros2 param describe</code>.</td>
    </tr>
    <tr>
      <td>validation</td>
      <td>Dictionary of validation functions and their parameters.</td>
    </tr>
    <tr>
      <td>additional_constraints</td>
      <td>Additional constraints that end up on the ParameterDescriptor but are not used for validation by this package.</td>
    </tr>
  </tbody>
</table>

<p>The types of parameters in ros2 map to C++ types.</p>

<table>
  <thead>
    <tr>
      <th>Parameter Type</th>
      <th>C++ Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>string</td>
      <td><code class="language-plaintext highlighter-rouge">std::string</code></td>
    </tr>
    <tr>
      <td>double</td>
      <td><code class="language-plaintext highlighter-rouge">double</code></td>
    </tr>
    <tr>
      <td>int</td>
      <td><code class="language-plaintext highlighter-rouge">int</code></td>
    </tr>
    <tr>
      <td>bool</td>
      <td><code class="language-plaintext highlighter-rouge">bool</code></td>
    </tr>
    <tr>
      <td>string_array</td>
      <td><code class="language-plaintext highlighter-rouge">std::vector&lt;std::string&gt;</code></td>
    </tr>
    <tr>
      <td>double_array</td>
      <td><code class="language-plaintext highlighter-rouge">std::vector&lt;double&gt;</code></td>
    </tr>
    <tr>
      <td>int_array</td>
      <td><code class="language-plaintext highlighter-rouge">std::vector&lt;int&gt;</code></td>
    </tr>
    <tr>
      <td>bool_array</td>
      <td><code class="language-plaintext highlighter-rouge">std::vector&lt;bool&gt;</code></td>
    </tr>
    <tr>
      <td>string_fixed_XX</td>
      <td><code class="language-plaintext highlighter-rouge">FixedSizeString&lt;XX&gt;</code></td>
    </tr>
    <tr>
      <td>none</td>
      <td>NO CODE GENERATED</td>
    </tr>
  </tbody>
</table>

<p>Fixed-size types are denoted with a suffix <code class="language-plaintext highlighter-rouge">_fixed_XX</code>, where <code class="language-plaintext highlighter-rouge">XX</code> is the desired size.
The corresponding C++ type is a data wrapper class for conveniently accessing the data.
Note that any fixed size type will automatically use a <code class="language-plaintext highlighter-rouge">size_lt</code> validator. Validators are explained in the next section.</p>

<p>The purpose of the <code class="language-plaintext highlighter-rouge">none</code> type is purely documentation, and won’t generate any C++ code. See <a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#parameter-documentation">Parameter documentation</a> for details.</p>

<h3 id="built-in-validators">Built-In Validators</h3>
<p>Validators are C++ functions that take arguments represented by a key-value pair in yaml.
The key is the name of the function.
The value is an array of values that are passed in as parameters to the function.
If the function does not take any values you write <code class="language-plaintext highlighter-rouge">null</code> or <code class="language-plaintext highlighter-rouge">[]</code> to for the value.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">joint_trajectory_controller</span><span class="pi">:</span>
  <span class="na">command_interfaces</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string_array</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Names</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">command</span><span class="nv"> </span><span class="s">interfaces</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">claim"</span>
    <span class="na">validation</span><span class="pi">:</span>
      <span class="na">size_gt&lt;&gt;</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0</span><span class="pi">]</span>
      <span class="na">unique&lt;&gt;</span><span class="pi">:</span> <span class="kc">null</span>
      <span class="na">subset_of&lt;&gt;</span><span class="pi">:</span> <span class="pi">[[</span><span class="s2">"</span><span class="s">position"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">velocity"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">acceleration"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">effort"</span><span class="pi">,]]</span>

</code></pre></div></div>

<p>Above are validations for <code class="language-plaintext highlighter-rouge">command_interfaces</code> from <code class="language-plaintext highlighter-rouge">ros2_controllers</code>.
This will require this string_array to have these properties:</p>

<ul>
  <li>There is at least one value in the array</li>
  <li>All values are unique</li>
  <li>Values are only in the set <code class="language-plaintext highlighter-rouge">["position", "velocity", "acceleration", "effort",]</code>
</li>
</ul>

<p>You will note that some validators have a suffix of <code class="language-plaintext highlighter-rouge">&lt;&gt;</code>, this tells the code generator to pass the C++ type of the parameter as a function template.
Some of these validators work only on value types, some on string types, and others on array types.
The built-in validator functions provided by this package are:</p>

<p><strong>Value validators</strong>
| Function | Arguments           | Description                          |
| ——– | ——————- | ———————————— |
| bounds&lt;&gt; | [lower, upper]      | Bounds checking (inclusive)          |
| lt&lt;&gt;     | [value]             | parameter &lt; value                    |
| gt&lt;&gt;     | [value]             | parameter &gt; value                    |
| lt_eq&lt;&gt;  | [value]             | parameter &lt;= value                   |
| gt_eq&lt;&gt;  | [value]             | parameter &gt;= value                   |
| one_of&lt;&gt; | [[val1, val2, …]] | Value is one of the specified values |</p>

<p><strong>String validators</strong>
| Function     | Arguments           | Description                                    |
| ———— | ——————- | ———————————————- |
| fixed_size&lt;&gt; | [length]            | Length string is specified length              |
| size_gt&lt;&gt;    | [length]            | Length string is greater than specified length |
| size_lt&lt;&gt;    | [length]            | Length string is less less specified length    |
| not_empty&lt;&gt;  | []                  | String parameter is not empty                  |
| one_of&lt;&gt;     | [[val1, val2, …]] | String is one of the specified values          |</p>

<p><strong>Array validators</strong>
| Function               | Arguments           | Description                                         |
| ———————- | ——————- | ————————————————— |
| unique&lt;&gt;               | []                  | Contains no duplicates                              |
| subset_of&lt;&gt;            | [[val1, val2, …]] | Every element is one of the list                    |
| fixed_size&lt;&gt;           | [length]            | Number of elements is specified length              |
| size_gt&lt;&gt;              | [length]            | Number of elements is greater than specified length |
| size_lt&lt;&gt;              | [length]            | Number of elements is less less specified length    |
| not_empty&lt;&gt;            | []                  | Has at-least one element                            |
| element_bounds&lt;&gt;       | [lower, upper]      | Bounds checking each element (inclusive)            |
| lower_element_bounds&lt;&gt; | [lower]             | Lower bound for each element (inclusive)            |
| upper_element_bounds&lt;&gt; | [upper]             | Upper bound for each element (inclusive)            |</p>

<h3 id="custom-validator-functions">Custom validator functions</h3>
<p>Validators are functions that return a <code class="language-plaintext highlighter-rouge">tl::expected&lt;void, std::string&gt;</code> type and accept a <code class="language-plaintext highlighter-rouge">rclcpp::Parameter const&amp;</code> as their first argument and any number of arguments after that can be specified in YAML.
Validators are C++ functions defined in a header file similar to the example shown below.</p>

<p>Here is an example custom validator.</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;rclcpp/rclcpp.hpp&gt;</span><span class="cp">
</span>
<span class="cp">#include</span> <span class="cpf">&lt;fmt/core.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;tl_expected/expected.hpp&gt;</span><span class="cp">
</span>
<span class="k">namespace</span> <span class="n">my_project</span> <span class="p">{</span>

<span class="n">tl</span><span class="o">::</span><span class="n">expected</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">integer_equal_value</span><span class="p">(</span>
    <span class="n">rclcpp</span><span class="o">::</span><span class="n">Parameter</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">parameter</span><span class="p">,</span> <span class="kt">int</span> <span class="n">expected_value</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">param_value</span> <span class="o">=</span> <span class="n">parameter</span><span class="p">.</span><span class="n">as_int</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">param_value</span> <span class="o">!=</span> <span class="n">expected_value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">tl</span><span class="o">::</span><span class="n">make_unexpected</span><span class="p">(</span><span class="n">fmt</span><span class="o">::</span><span class="n">format</span><span class="p">(</span>
            <span class="s">"Invalid value {} for parameter {}. Expected {}"</span>
            <span class="n">param_value</span><span class="p">,</span> <span class="n">parameter</span><span class="p">.</span><span class="n">get_name</span><span class="p">(),</span> <span class="n">expected_value</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">{};</span>
<span class="p">}</span>

<span class="p">}</span>  <span class="c1">// namespace my_project</span>

</code></pre></div></div>
<p>To configure a parameter to be validated with the custom validator function <code class="language-plaintext highlighter-rouge">integer_equal_value</code> with an <code class="language-plaintext highlighter-rouge">expected_value</code> of <code class="language-plaintext highlighter-rouge">3</code> you could would this to the YAML.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">validation</span><span class="pi">:</span>
  <span class="s2">"</span><span class="s">my_project::integer_equal_value"</span><span class="err">:</span> <span class="pi">[</span><span class="nv">3</span><span class="pi">]</span>

</code></pre></div></div>

<h3 id="nested-structures">Nested structures</h3>
<p>After the top-level key, every subsequent non-leaf key will generate a nested C++ struct. The struct instance will have
the same name as the key.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cpp_name_space</span><span class="pi">:</span>
  <span class="na">nest1</span><span class="pi">:</span>
    <span class="na">nest2</span><span class="pi">:</span>
      <span class="na">param_name</span><span class="pi">:</span> <span class="c1"># this is a leaf</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string_array</span>

</code></pre></div></div>

<p>The generated parameter value can then be accessed with <code class="language-plaintext highlighter-rouge">params.nest1.nest2.param_name</code></p>

<h3 id="mapped-parameters">Mapped parameters</h3>
<p>You can use parameter maps, where a map with keys from another <code class="language-plaintext highlighter-rouge">string_array</code> parameter is created. Add the <code class="language-plaintext highlighter-rouge">__map_</code> prefix followed by the key parameter name as follows:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cpp_name_space</span><span class="pi">:</span>
  <span class="na">joints</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string_array</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">joint1"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">joint2"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">joint3"</span><span class="pi">]</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">specifies</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">joints</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">used</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">controller"</span>
  <span class="na">interfaces</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string_array</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">position"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">velocity"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">acceleration"</span><span class="pi">]</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">interfaces</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">used</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">controller"</span>
  <span class="c1"># nested mapped example</span>
  <span class="na">gain</span><span class="pi">:</span>
    <span class="na">__map_joints</span><span class="pi">:</span> <span class="c1"># create a map with joints as keys</span>
      <span class="na">__map_interfaces</span><span class="pi">:</span>  <span class="c1"># create a map with interfaces as keys</span>
        <span class="na">value</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">double</span>
  <span class="c1"># simple mapped example</span>
  <span class="na">pid</span><span class="pi">:</span>
    <span class="na">__map_joints</span><span class="pi">:</span> <span class="c1"># create a map with joints as keys</span>
      <span class="na">values</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">double_array</span>

</code></pre></div></div>

<p>The generated parameter value for the nested map example can then be accessed with:</p>

<p><strong>C++</strong></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">params</span><span class="p">.</span><span class="n">gain</span><span class="p">.</span><span class="n">joints_map</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="s">"joint1"</span><span class="p">).</span><span class="n">interfaces_map</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="s">"position"</span><span class="p">).</span><span class="n">value</span>

</code></pre></div></div>

<p><strong>Python</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">params</span><span class="p">.</span><span class="n">gain</span><span class="p">.</span><span class="nf">get_entry</span><span class="p">(</span><span class="sh">"</span><span class="s">joint1</span><span class="sh">"</span><span class="p">).</span><span class="nf">get_entry</span><span class="p">(</span><span class="sh">"</span><span class="s">position</span><span class="sh">"</span><span class="p">).</span><span class="n">value</span>

</code></pre></div></div>

<h3 id="use-generated-struct-in-cpp">Use generated struct in Cpp</h3>
<p>The generated header file is named based on the target library name you passed as the first argument to the cmake function.
If you specified it to be <code class="language-plaintext highlighter-rouge">turtlesim_parameters</code> you can then include the generated code with <code class="language-plaintext highlighter-rouge">#include &lt;turtlesim/turtlesim_parameters.hpp&gt;</code>.</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;turtlesim/turtlesim_parameters.hpp&gt;</span><span class="cp">
</span>
</code></pre></div></div>

<p>Note that this header can also be used from another package:</p>

<div class="language-cmake highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cmake_minimum_required</span><span class="p">(</span>VERSION 3.8<span class="p">)</span>
<span class="nb">project</span><span class="p">(</span>my_other_package<span class="p">)</span>


<span class="nb">include</span><span class="p">(</span>GNUInstallDirs<span class="p">)</span>

<span class="c1"># find dependencies</span>
<span class="nb">find_package</span><span class="p">(</span>ament_cmake REQUIRED<span class="p">)</span>
<span class="nb">find_package</span><span class="p">(</span>turtelsim REQUIRED<span class="p">)</span>

<span class="nb">add_library</span><span class="p">(</span>my_lib src/my_lib.cpp<span class="p">)</span>
<span class="nb">target_include_directories</span><span class="p">(</span>my_lib PUBLIC
    $&lt;BUILD_INTERFACE:<span class="si">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="si">}</span>/include&gt;
    $&lt;INSTALL_INTERFACE:include&gt;<span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span>my_lib PUBLIC turtlesim::turtlesim_parameters<span class="p">)</span>

<span class="c1">#############</span>
<span class="c1">## Install ##</span>
<span class="c1">#############</span>

<span class="nb">install</span><span class="p">(</span>DIRECTORY include/<span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>/ DESTINATION <span class="si">${</span><span class="nv">CMAKE_INSTALL_INCLUDEDIR</span><span class="si">}</span>/<span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span><span class="p">)</span>

<span class="nb">install</span><span class="p">(</span>TARGETS my_lib
  EXPORT <span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>Targets
  ARCHIVE DESTINATION <span class="si">${</span><span class="nv">CMAKE_INSTALL_LIBDIR</span><span class="si">}</span>
  LIBRARY DESTINATION <span class="si">${</span><span class="nv">CMAKE_INSTALL_LIBDIR</span><span class="si">}</span>
  RUNTIME DESTINATION lib/<span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span><span class="p">)</span>

<span class="nf">ament_export_targets</span><span class="p">(</span><span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>Targets HAS_LIBRARY_TARGET<span class="p">)</span>
<span class="nf">ament_export_dependencies</span><span class="p">(</span>turtlesim<span class="p">)</span>
<span class="nf">ament_package</span><span class="p">()</span>

</code></pre></div></div>

<p>In your initialization code, create a <code class="language-plaintext highlighter-rouge">ParamListener</code> which will declare and get the parameters.
An exception will be thrown if any validation fails or any required parameters were not set.
Then call <code class="language-plaintext highlighter-rouge">get_params</code> on the listener to get a copy of the <code class="language-plaintext highlighter-rouge">Params</code> struct.</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">auto</span> <span class="n">param_listener</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">turtlesim</span><span class="o">::</span><span class="n">ParamListener</span><span class="o">&gt;</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
<span class="k">auto</span> <span class="n">params</span> <span class="o">=</span> <span class="n">param_listener</span><span class="o">-&gt;</span><span class="n">get_params</span><span class="p">();</span>

</code></pre></div></div>

<h3 id="dynamic-parameters">Dynamic Parameters</h3>
<p>If you are using dynamic parameters, you can use the following code to check if any of your parameters have changed and then get a new copy of the <code class="language-plaintext highlighter-rouge">Params</code> struct.</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="n">param_listener</span><span class="o">-&gt;</span><span class="n">is_old</span><span class="p">(</span><span class="n">params_</span><span class="p">))</span> <span class="p">{</span>
  <span class="n">params_</span> <span class="o">=</span> <span class="n">param_listener</span><span class="o">-&gt;</span><span class="n">get_params</span><span class="p">();</span>
<span class="p">}</span>

</code></pre></div></div>

<h3 id="parameter-documentation">Parameter documentation</h3>

<p>In some cases, parameters might be unknown only at compile-time, and cannot be part of the generated C++ code. However, for documentation purpose of such parameters, the type <code class="language-plaintext highlighter-rouge">none</code> was introduced.</p>

<p>Parameters with <code class="language-plaintext highlighter-rouge">none</code> type won’t generate any C++ code, but can exist to describe the expected name or namespace, that might be declared by an external piece of code and used in an override.</p>

<p>A typical use case is a controller, loading pluginlib-based filters, that themselves require (and declare) parameters in a known structure.</p>

<p>Example of declarative YAML</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">force_torque_broadcaster_controller</span><span class="pi">:</span>
  <span class="na">sensor_name</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Name</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">sensor</span><span class="nv"> </span><span class="s">used</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">prefix</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">interfaces</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">there</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">no</span><span class="nv"> </span><span class="s">individual</span><span class="nv"> </span><span class="s">interface</span><span class="nv"> </span><span class="s">names</span><span class="nv"> </span><span class="s">defined."</span>
  <span class="na">frame_id</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Sensor's</span><span class="nv"> </span><span class="s">frame_id</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">values</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">published."</span>
  <span class="na">sensor_filter_chain</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">none</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Map</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">parameters</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">defines</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">filter</span><span class="nv"> </span><span class="s">chain,</span><span class="nv"> </span><span class="s">containing</span><span class="nv"> </span><span class="s">filterN</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">key</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">underlying</span><span class="nv"> </span><span class="s">map</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">parameters</span><span class="nv"> </span><span class="s">needed</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">specific</span><span class="nv"> </span><span class="s">filter.</span><span class="nv"> </span><span class="s">See</span><span class="nv"> </span><span class="s">&lt;some</span><span class="nv"> </span><span class="s">docs&gt;</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">more</span><span class="nv"> </span><span class="s">details."</span>

</code></pre></div></div>

<p>Example of parameters for that controller</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">force_torque_broadcaster_controller</span><span class="pi">:</span>
  <span class="na">ros__parameters</span><span class="pi">:</span>
    <span class="na">sensor_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">fts_sensor"</span>
    <span class="na">frame_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">fts_sensor_frame"</span>
    <span class="na">sensor_filter_chain</span><span class="pi">:</span>
      <span class="na">filter1</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">control_filters/LowPassFilterWrench"</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">low_pass_filter"</span>
        <span class="na">params</span><span class="pi">:</span>
          <span class="na">sampling_frequency</span><span class="pi">:</span> <span class="m">200.0</span>
          <span class="na">damping_frequency</span><span class="pi">:</span> <span class="m">50.0</span>
          <span class="na">damping_intensity</span><span class="pi">:</span> <span class="m">1.0</span>

</code></pre></div></div>

<h3 id="example-project">Example Project</h3>
<p>See <a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/example/">cpp example</a> or <a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/example_python/">python example</a> for complete examples of how to use the generate_parameter_library.</p>

<h3 id="generated-code-output">Generated code output</h3>
<p>The generated code primarily consists of two major components:
1) <code class="language-plaintext highlighter-rouge">struct Params</code> that contains values of all parameters and
2) <code class="language-plaintext highlighter-rouge">class ParamListener</code> that handles parameter declaration, updating, and validation.
   The general structure is shown below.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">namespace</span> <span class="n">cpp_namespace</span> <span class="p">{</span>

<span class="k">struct</span> <span class="nc">Params</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">param_name</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
  <span class="k">struct</span> <span class="p">{</span>
    <span class="k">struct</span><span class="p">{</span>
      <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">param_name</span><span class="p">;</span>
      <span class="c1">// arbitrary nesting depth...</span>
    <span class="p">}</span> <span class="n">nest2</span><span class="p">;</span>
  <span class="p">}</span> <span class="n">nest1</span><span class="p">;</span>
  <span class="c1">// for detecting if the parameter struct has been updated</span>
  <span class="n">rclcpp</span><span class="o">::</span><span class="n">Time</span> <span class="n">__stamp</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">ParamListener</span> <span class="p">{</span>
 <span class="nl">public:</span>
  <span class="n">ParamListener</span><span class="p">(</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">ParameterInterface</span><span class="p">);</span>
  <span class="n">ParamListener</span><span class="p">(</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">::</span><span class="n">SharedPtr</span> <span class="n">node</span><span class="p">)</span>
    <span class="o">:</span> <span class="n">ParameterListener</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">get_parameters_interface</span><span class="p">())</span> <span class="p">{}</span>
  <span class="n">ParamListener</span><span class="p">(</span><span class="n">rclcpp_lifecycle</span><span class="o">::</span><span class="n">LifecycleNode</span><span class="o">::</span><span class="n">SharedPtr</span> <span class="n">node</span><span class="p">)</span>
    <span class="o">:</span> <span class="n">ParameterListener</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">get_parameters_interface</span><span class="p">())</span> <span class="p">{}</span>

  <span class="c1">// create a copy of current parameter values</span>
  <span class="n">Params</span> <span class="n">get_params</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

  <span class="c1">// returns true if parameters have been updated since last time get_params was called</span>
  <span class="kt">bool</span> <span class="n">is_old</span><span class="p">(</span><span class="n">Params</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>

  <span class="c1">// loop over all parameters: perform validation then update</span>
  <span class="n">rcl_interfaces</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">SetParametersResult</span> <span class="nf">update</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Parameter</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">parameters</span><span class="p">);</span>

  <span class="c1">// declare all parameters and throw an exception if a non-optional value is missing or validation fails</span>
  <span class="kt">void</span> <span class="nf">declare_params</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">node_interfaces</span><span class="o">::</span><span class="n">NodeParametersInterface</span><span class="o">&gt;&amp;</span> <span class="n">parameters_interface</span><span class="p">);</span>

 <span class="k">private</span><span class="o">:</span>
  <span class="n">Params</span> <span class="n">params_</span><span class="p">;</span>
<span class="p">};</span>

<span class="p">}</span> <span class="c1">// namespace cpp_namespace</span>

</code></pre></div></div>
<p>The structure of the <code class="language-plaintext highlighter-rouge">Params</code> struct and the logic for declaring and updating parameters is generated from a YAML file specification.</p>

<h3 id="generate-markdown-documentation">Generate markdown documentation</h3>

<p>Using generate_parameter_library you can generate a Markdown-file for your <code class="language-plaintext highlighter-rouge">parameters.yaml</code> file.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>generate_parameter_library_markdown --input_yaml example/src/parameters.yaml --output_markdown_file parameters.md

</code></pre></div></div>

<p>This will generate a file <code class="language-plaintext highlighter-rouge">parameters.md</code> in the current folder that contains a markdown
representation of the <code class="language-plaintext highlighter-rouge">parameters.yaml</code> file that you can directly include into your documentation.</p>

<h1 id="faq">FAQ</h1>

<p>Q. What happens if I declare a parameter twice? Will I get an error at runtime?
A. The declare routine that is generated checks to see if each parameter has been declared first before declaring it. Because of this you can declare a parameter twice but it will only have the properties of the first time you declared it. Here is some example generated code.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">parameters_interface_</span><span class="o">-&gt;</span><span class="n">has_parameter</span><span class="p">(</span><span class="n">prefix_</span> <span class="o">+</span> <span class="s">"scientific_notation_num"</span><span class="p">))</span> <span class="p">{</span>
    <span class="n">rcl_interfaces</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">ParameterDescriptor</span> <span class="n">descriptor</span><span class="p">;</span>
    <span class="n">descriptor</span><span class="p">.</span><span class="n">description</span> <span class="o">=</span> <span class="s">"Test scientific notation"</span><span class="p">;</span>
    <span class="n">descriptor</span><span class="p">.</span><span class="n">read_only</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="k">auto</span> <span class="n">parameter</span> <span class="o">=</span> <span class="n">to_parameter_value</span><span class="p">(</span><span class="n">updated_params</span><span class="p">.</span><span class="n">scientific_notation_num</span><span class="p">);</span>
    <span class="n">parameters_interface_</span><span class="o">-&gt;</span><span class="n">declare_parameter</span><span class="p">(</span><span class="n">prefix_</span> <span class="o">+</span> <span class="s">"scientific_notation_num"</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">descriptor</span><span class="p">);</span>
<span class="p">}</span>

</code></pre></div></div>

<p>Q: How do I log when parameters change?
A. The generated library outputs debug logs whenever a parameter is read from ROS.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the 3-Clause BSD License, as dictated by that
<a href="https://opensource.org/licenses/BSD-3-Clause">license</a>.</p>
</div>
              <hr id="humble-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="humble-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#humble-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#humble-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#humble-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="humble-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="humble-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="humble-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/generate_parameter_library">generate_parameter_library</a> <small>repository</small></h3>
        <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_library_example">generate_parameter_library_example</a>
        
        <a class="label label-primary pkg-label" href="/p/cmake_generate_parameter_module_example">cmake_generate_parameter_module_example</a>
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_library_example_external">generate_parameter_library_example_external</a>
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_module_example">generate_parameter_module_example</a>
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_library">generate_parameter_library</a>
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_library_py">generate_parameter_library_py</a>
        
        <a class="label label-primary pkg-label" href="/p/parameter_traits">parameter_traits</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-PickNikRobotics-generate_parameter_library
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-PickNikRobotics-generate_parameter_library" role="menuitem" tabindex="-1" href="/r/generate_parameter_library/github-PickNikRobotics-generate_parameter_library" data="github-PickNikRobotics-generate_parameter_library">
                    <span class="glyphicon glyphicon-star"></span>
                    github-PickNikRobotics-generate_parameter_library
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Declarative ROS 2 Parameters</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/PickNikRobotics/generate_parameter_library.git">https://github.com/PickNikRobotics/generate_parameter_library.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-02-13
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/generate_parameter_library/#jazzy-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/generate_parameter_library/#jazzy-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/generate_parameter_library/#jazzy-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/generate_parameter_library_example">generate_parameter_library_example</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/cmake_generate_parameter_module_example">cmake_generate_parameter_module_example</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/generate_parameter_library_example_external">generate_parameter_library_example_external</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/generate_parameter_module_example">generate_parameter_module_example</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/generate_parameter_library">generate_parameter_library</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/generate_parameter_library_py">generate_parameter_library_py</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/parameter_traits">parameter_traits</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="generate_parameter_library">generate_parameter_library</h1>
<p>Generate C++ or Python code for ROS 2 parameter declaration, getting, and validation using declarative YAML.
The generated library contains a C++ struct with specified parameters.
Additionally, dynamic parameters and custom validation are made easy.</p>

<h2 id="killer-features">Killer Features</h2>
<ul>
  <li>Declarative YAML syntax for ROS 2 Parameters converted into C++ or Python struct</li>
  <li>Declaring, Getting, Validating, and Updating handled by generated code</li>
  <li>Dynamic ROS 2 Parameters made easy</li>
  <li>Custom user-specified validator functions</li>
  <li>Automatically create documentation of parameters</li>
</ul>

<h2 id="basic-usage">Basic Usage</h2>
<ol>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#create-yaml-parameter-codegen-file">Create YAML parameter codegen file</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#add-parameter-library-generation-to-project">Add parameter library generation to project</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#use-generated-struct-into-project-source-code">Use generated struct into project source code</a></li>
</ol>

<h3 id="create-yaml-parameter-codegen-file">Create yaml parameter codegen file</h3>
<p>Write a yaml file to declare your parameters and their attributes.</p>

<p><strong>src/turtlesim_parameters.yaml</strong></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">turtlesim</span><span class="pi">:</span>
  <span class="na">background</span><span class="pi">:</span>
    <span class="na">r</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">int</span>
      <span class="na">default_value</span><span class="pi">:</span> <span class="m">0</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Red</span><span class="nv"> </span><span class="s">color</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">background,</span><span class="nv"> </span><span class="s">8-bit"</span>
      <span class="na">validation</span><span class="pi">:</span>
        <span class="na">bounds&lt;&gt;</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0</span><span class="pi">,</span> <span class="nv">255</span><span class="pi">]</span>
    <span class="na">g</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">int</span>
      <span class="na">default_value</span><span class="pi">:</span> <span class="m">0</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Green</span><span class="nv"> </span><span class="s">color</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">background,</span><span class="nv"> </span><span class="s">8-bit"</span>
      <span class="na">validation</span><span class="pi">:</span>
        <span class="na">bounds&lt;&gt;</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0</span><span class="pi">,</span> <span class="nv">255</span><span class="pi">]</span>
    <span class="na">b</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">int</span>
      <span class="na">default_value</span><span class="pi">:</span> <span class="m">0</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Blue</span><span class="nv"> </span><span class="s">color</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">background,</span><span class="nv"> </span><span class="s">8-bit"</span>
      <span class="na">validation</span><span class="pi">:</span>
        <span class="na">bounds&lt;&gt;</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0</span><span class="pi">,</span> <span class="nv">255</span><span class="pi">]</span>

</code></pre></div></div>

<h3 id="add-parameter-library-generation-to-project">Add parameter library generation to project</h3>

<p><strong>package.xml</strong></p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;depend&gt;</span>generate_parameter_library<span class="nt">&lt;/depend&gt;</span>

</code></pre></div></div>

<p><strong>CMakeLists.txt</strong></p>

<div class="language-cmake highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">find_package</span><span class="p">(</span>generate_parameter_library REQUIRED<span class="p">)</span>

<span class="nf">generate_parameter_library</span><span class="p">(</span>
  turtlesim_parameters <span class="c1"># cmake target name for the parameter library</span>
  src/turtlesim_parameters.yaml <span class="c1"># path to input yaml file</span>
<span class="p">)</span>

<span class="nb">add_executable</span><span class="p">(</span>minimal_node src/turtlesim.cpp<span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span>minimal_node PRIVATE
  rclcpp::rclcpp
  turtlesim_parameters
<span class="p">)</span>

<span class="nb">install</span><span class="p">(</span>TARGETS minimal_node turtlesim_parameters
  EXPORT <span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>Targets<span class="p">)</span>
<span class="nf">ament_export_targets</span><span class="p">(</span><span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>Targets HAS_LIBRARY_TARGET<span class="p">)</span>

</code></pre></div></div>

<p><strong>setup.py</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">generate_parameter_library_py.setup_helper</span> <span class="kn">import</span> <span class="n">generate_parameter_module</span>

<span class="nf">generate_parameter_module</span><span class="p">(</span>
  <span class="sh">"</span><span class="s">turtlesim_parameters</span><span class="sh">"</span><span class="p">,</span> <span class="c1"># python module name for parameter library
</span>  <span class="sh">"</span><span class="s">turtlesim/turtlesim_parameters.yaml</span><span class="sh">"</span><span class="p">,</span> <span class="c1"># path to input yaml file
</span><span class="p">)</span>

</code></pre></div></div>

<h3 id="use-generated-struct-in-project-source-code">Use generated struct in project source code</h3>

<p><strong>src/turtlesim.cpp</strong></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;rclcpp/rclcpp.hpp&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;turtlesim/turtlesim_parameters.hpp&gt;</span><span class="c1">  // you can also use the deprecated #include "turtlesim_parameters.hpp"</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
  <span class="n">rclcpp</span><span class="o">::</span><span class="n">init</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>
  <span class="k">auto</span> <span class="n">node</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"turtlesim"</span><span class="p">);</span>
  <span class="k">auto</span> <span class="n">param_listener</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">turtlesim</span><span class="o">::</span><span class="n">ParamListener</span><span class="o">&gt;</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
  <span class="k">auto</span> <span class="n">params</span> <span class="o">=</span> <span class="n">param_listener</span><span class="o">-&gt;</span><span class="n">get_params</span><span class="p">();</span>

  <span class="k">auto</span> <span class="n">color</span> <span class="o">=</span> <span class="n">params</span><span class="p">.</span><span class="n">background</span><span class="p">;</span>
  <span class="n">RCLCPP_INFO</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">get_logger</span><span class="p">(),</span>
    <span class="s">"Background color (r,g,b): %d, %d, %d"</span><span class="p">,</span>
    <span class="n">color</span><span class="p">.</span><span class="n">r</span><span class="p">,</span> <span class="n">color</span><span class="p">.</span><span class="n">g</span><span class="p">,</span> <span class="n">color</span><span class="p">.</span><span class="n">b</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div></div>

<p><strong>turtlesim/turtlesim.py</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">rclpy</span>
<span class="kn">from</span> <span class="n">rclpy.node</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="kn">from</span> <span class="n">turtlesim_pkg.turtlesim_parameters</span> <span class="kn">import</span> <span class="n">turtlesim_parameters</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
  <span class="n">rclpy</span><span class="p">.</span><span class="nf">init</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">)</span>
  <span class="n">node</span> <span class="o">=</span> <span class="nc">Node</span><span class="p">(</span><span class="sh">"</span><span class="s">turtlesim</span><span class="sh">"</span><span class="p">)</span>
  <span class="n">param_listener</span> <span class="o">=</span> <span class="n">turtlesim_parameters</span><span class="p">.</span><span class="nc">ParamListener</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
  <span class="n">params</span> <span class="o">=</span> <span class="n">param_listener</span><span class="p">.</span><span class="nf">get_params</span><span class="p">()</span>

  <span class="n">color</span> <span class="o">=</span> <span class="n">params</span><span class="p">.</span><span class="n">background</span>
  <span class="n">node</span><span class="p">.</span><span class="nf">get_logger</span><span class="p">().</span><span class="nf">info</span><span class="p">(</span>
    <span class="sh">"</span><span class="s">Background color (r,g,b): %d, %d, %d</span><span class="sh">"</span> <span class="o">%</span>
    <span class="n">color</span><span class="p">.</span><span class="n">r</span><span class="p">,</span> <span class="n">color</span><span class="p">.</span><span class="n">g</span><span class="p">,</span> <span class="n">color</span><span class="p">.</span><span class="n">b</span><span class="p">)</span>

</code></pre></div></div>

<h3 id="use-example-yaml-files-in-tests">Use example yaml files in tests</h3>
<p>When using parameter library generation it can happen that there are issues when executing tests since parameters are not defined and the library defines them as mandatory.
To overcome this it is recommended to define example yaml files for tests and use them as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find_package(ament_cmake_gtest REQUIRED)
add_rostest_with_parameters_gtest(test_turtlesim_parameters test/test_turtlesim_parameters.cpp
  ${CMAKE_CURRENT_SOURCE_DIR}/test/example_turtlesim_parameters.yaml)
target_include_directories(test_turtlesim_parameters PRIVATE include)
target_link_libraries(test_turtlesim_parameters turtlesim_parameters)
ament_target_dependencies(test_turtlesim_parameters rclcpp)

</code></pre></div></div>

<p>when using <code class="language-plaintext highlighter-rouge">gtest</code>, or:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find_package(ament_cmake_gmock REQUIRED)
add_rostest_with_parameters_gmock(test_turtlesim_parameters test/test_turtlesim_parameters.cpp
  ${CMAKE_CURRENT_SOURCE_DIR}/test/example_turtlesim_parameters.yaml)
target_include_directories(test_turtlesim_parameters PRIVATE include)
target_link_libraries(test_turtlesim_parameters turtlesim_parameters)
ament_target_dependencies(test_turtlesim_parameters rclcpp)

</code></pre></div></div>
<p>when using <code class="language-plaintext highlighter-rouge">gmock</code> test library.</p>

<p>🤖 P.S. having this example yaml files will make your users very grateful because they will always have a working example of a configuration for your node.</p>

<h2 id="detailed-documentation">Detailed Documentation</h2>
<ul>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#cpp-namespace">Cpp namespace</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#parameter-definition">Parameter definition</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#built-in-validators">Built-In Validators</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#custom-validator-functions">Custom validator functions</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#nested-structures">Nested structures</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#use-generated-struct-in-cpp">Use generated struct in Cpp</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#dynamic-parameters">Dynamic Parameters</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#example-project">Example Project</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#generated-code-output">Generated code output</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#generate-markdown-documentation">Generate markdown documentation</a></li>
</ul>

<h3 id="cpp-namespace">Cpp namespace</h3>
<p>The root element of the YAML file determines the namespace used in the generated C++ code.
We use this to put the <code class="language-plaintext highlighter-rouge">Params</code> struct in the same namespace as your C++ code.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cpp_namespace</span><span class="pi">:</span>
<span class="c1"># additionally fields  ...</span>

</code></pre></div></div>

<h3 id="parameter-definition">Parameter definition</h3>
<p>The YAML syntax can be thought of as a tree since it allows for arbitrary nesting of key-value pairs.
For clarity, the last non-nested value is referred to as a leaf.
A leaf represents a single parameter and has the following format.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cpp_namespace</span><span class="pi">:</span>
  <span class="na">param_name</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">int</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="m">3</span>
    <span class="na">read_only</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">additional_constraints</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{</span><span class="nv"> </span><span class="s">type:</span><span class="nv"> </span><span class="s">'number',</span><span class="nv"> </span><span class="s">multipleOf:</span><span class="nv"> </span><span class="s">3</span><span class="nv"> </span><span class="s">}"</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">A</span><span class="nv"> </span><span class="s">read-only</span><span class="nv">  </span><span class="s">integer</span><span class="nv"> </span><span class="s">parameter</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">default</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">3"</span>
    <span class="na">validation</span><span class="pi">:</span>
      <span class="c1"># validation functions ...</span>

</code></pre></div></div>

<p>A parameter is a YAML dictionary with the only required key being <code class="language-plaintext highlighter-rouge">type</code>.</p>

<table>
  <thead>
    <tr>
      <th>Field</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>type</td>
      <td>The type (string, double, etc) of the parameter.</td>
    </tr>
    <tr>
      <td>default_value</td>
      <td>Value for the parameter if the user does not specify a value.</td>
    </tr>
    <tr>
      <td>read_only</td>
      <td>Can only be set at launch and are not dynamic.</td>
    </tr>
    <tr>
      <td>description</td>
      <td>Displayed by <code class="language-plaintext highlighter-rouge">ros2 param describe</code>.</td>
    </tr>
    <tr>
      <td>validation</td>
      <td>Dictionary of validation functions and their parameters.</td>
    </tr>
    <tr>
      <td>additional_constraints</td>
      <td>Additional constraints that end up on the ParameterDescriptor but are not used for validation by this package.</td>
    </tr>
  </tbody>
</table>

<p>The types of parameters in ros2 map to C++ types.</p>

<table>
  <thead>
    <tr>
      <th>Parameter Type</th>
      <th>C++ Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>string</td>
      <td><code class="language-plaintext highlighter-rouge">std::string</code></td>
    </tr>
    <tr>
      <td>double</td>
      <td><code class="language-plaintext highlighter-rouge">double</code></td>
    </tr>
    <tr>
      <td>int</td>
      <td><code class="language-plaintext highlighter-rouge">int</code></td>
    </tr>
    <tr>
      <td>bool</td>
      <td><code class="language-plaintext highlighter-rouge">bool</code></td>
    </tr>
    <tr>
      <td>string_array</td>
      <td><code class="language-plaintext highlighter-rouge">std::vector&lt;std::string&gt;</code></td>
    </tr>
    <tr>
      <td>double_array</td>
      <td><code class="language-plaintext highlighter-rouge">std::vector&lt;double&gt;</code></td>
    </tr>
    <tr>
      <td>int_array</td>
      <td><code class="language-plaintext highlighter-rouge">std::vector&lt;int&gt;</code></td>
    </tr>
    <tr>
      <td>bool_array</td>
      <td><code class="language-plaintext highlighter-rouge">std::vector&lt;bool&gt;</code></td>
    </tr>
    <tr>
      <td>string_fixed_XX</td>
      <td><code class="language-plaintext highlighter-rouge">FixedSizeString&lt;XX&gt;</code></td>
    </tr>
    <tr>
      <td>none</td>
      <td>NO CODE GENERATED</td>
    </tr>
  </tbody>
</table>

<p>Fixed-size types are denoted with a suffix <code class="language-plaintext highlighter-rouge">_fixed_XX</code>, where <code class="language-plaintext highlighter-rouge">XX</code> is the desired size.
The corresponding C++ type is a data wrapper class for conveniently accessing the data.
Note that any fixed size type will automatically use a <code class="language-plaintext highlighter-rouge">size_lt</code> validator. Validators are explained in the next section.</p>

<p>The purpose of the <code class="language-plaintext highlighter-rouge">none</code> type is purely documentation, and won’t generate any C++ code. See <a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#parameter-documentation">Parameter documentation</a> for details.</p>

<h3 id="built-in-validators">Built-In Validators</h3>
<p>Validators are C++ functions that take arguments represented by a key-value pair in yaml.
The key is the name of the function.
The value is an array of values that are passed in as parameters to the function.
If the function does not take any values you write <code class="language-plaintext highlighter-rouge">null</code> or <code class="language-plaintext highlighter-rouge">[]</code> to for the value.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">joint_trajectory_controller</span><span class="pi">:</span>
  <span class="na">command_interfaces</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string_array</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Names</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">command</span><span class="nv"> </span><span class="s">interfaces</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">claim"</span>
    <span class="na">validation</span><span class="pi">:</span>
      <span class="na">size_gt&lt;&gt;</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0</span><span class="pi">]</span>
      <span class="na">unique&lt;&gt;</span><span class="pi">:</span> <span class="kc">null</span>
      <span class="na">subset_of&lt;&gt;</span><span class="pi">:</span> <span class="pi">[[</span><span class="s2">"</span><span class="s">position"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">velocity"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">acceleration"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">effort"</span><span class="pi">,]]</span>

</code></pre></div></div>

<p>Above are validations for <code class="language-plaintext highlighter-rouge">command_interfaces</code> from <code class="language-plaintext highlighter-rouge">ros2_controllers</code>.
This will require this string_array to have these properties:</p>

<ul>
  <li>There is at least one value in the array</li>
  <li>All values are unique</li>
  <li>Values are only in the set <code class="language-plaintext highlighter-rouge">["position", "velocity", "acceleration", "effort",]</code>
</li>
</ul>

<p>You will note that some validators have a suffix of <code class="language-plaintext highlighter-rouge">&lt;&gt;</code>, this tells the code generator to pass the C++ type of the parameter as a function template.
Some of these validators work only on value types, some on string types, and others on array types.
The built-in validator functions provided by this package are:</p>

<p><strong>Value validators</strong>
| Function | Arguments           | Description                          |
| ——– | ——————- | ———————————— |
| bounds&lt;&gt; | [lower, upper]      | Bounds checking (inclusive)          |
| lt&lt;&gt;     | [value]             | parameter &lt; value                    |
| gt&lt;&gt;     | [value]             | parameter &gt; value                    |
| lt_eq&lt;&gt;  | [value]             | parameter &lt;= value                   |
| gt_eq&lt;&gt;  | [value]             | parameter &gt;= value                   |
| one_of&lt;&gt; | [[val1, val2, …]] | Value is one of the specified values |</p>

<p><strong>String validators</strong>
| Function     | Arguments           | Description                                    |
| ———— | ——————- | ———————————————- |
| fixed_size&lt;&gt; | [length]            | Length string is specified length              |
| size_gt&lt;&gt;    | [length]            | Length string is greater than specified length |
| size_lt&lt;&gt;    | [length]            | Length string is less less specified length    |
| not_empty&lt;&gt;  | []                  | String parameter is not empty                  |
| one_of&lt;&gt;     | [[val1, val2, …]] | String is one of the specified values          |</p>

<p><strong>Array validators</strong>
| Function               | Arguments           | Description                                         |
| ———————- | ——————- | ————————————————— |
| unique&lt;&gt;               | []                  | Contains no duplicates                              |
| subset_of&lt;&gt;            | [[val1, val2, …]] | Every element is one of the list                    |
| fixed_size&lt;&gt;           | [length]            | Number of elements is specified length              |
| size_gt&lt;&gt;              | [length]            | Number of elements is greater than specified length |
| size_lt&lt;&gt;              | [length]            | Number of elements is less less specified length    |
| not_empty&lt;&gt;            | []                  | Has at-least one element                            |
| element_bounds&lt;&gt;       | [lower, upper]      | Bounds checking each element (inclusive)            |
| lower_element_bounds&lt;&gt; | [lower]             | Lower bound for each element (inclusive)            |
| upper_element_bounds&lt;&gt; | [upper]             | Upper bound for each element (inclusive)            |</p>

<h3 id="custom-validator-functions">Custom validator functions</h3>
<p>Validators are functions that return a <code class="language-plaintext highlighter-rouge">tl::expected&lt;void, std::string&gt;</code> type and accept a <code class="language-plaintext highlighter-rouge">rclcpp::Parameter const&amp;</code> as their first argument and any number of arguments after that can be specified in YAML.
Validators are C++ functions defined in a header file similar to the example shown below.</p>

<p>Here is an example custom validator.</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;rclcpp/rclcpp.hpp&gt;</span><span class="cp">
</span>
<span class="cp">#include</span> <span class="cpf">&lt;fmt/core.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;tl_expected/expected.hpp&gt;</span><span class="cp">
</span>
<span class="k">namespace</span> <span class="n">my_project</span> <span class="p">{</span>

<span class="n">tl</span><span class="o">::</span><span class="n">expected</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">integer_equal_value</span><span class="p">(</span>
    <span class="n">rclcpp</span><span class="o">::</span><span class="n">Parameter</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">parameter</span><span class="p">,</span> <span class="kt">int</span> <span class="n">expected_value</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">param_value</span> <span class="o">=</span> <span class="n">parameter</span><span class="p">.</span><span class="n">as_int</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">param_value</span> <span class="o">!=</span> <span class="n">expected_value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">tl</span><span class="o">::</span><span class="n">make_unexpected</span><span class="p">(</span><span class="n">fmt</span><span class="o">::</span><span class="n">format</span><span class="p">(</span>
            <span class="s">"Invalid value {} for parameter {}. Expected {}"</span>
            <span class="n">param_value</span><span class="p">,</span> <span class="n">parameter</span><span class="p">.</span><span class="n">get_name</span><span class="p">(),</span> <span class="n">expected_value</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">{};</span>
<span class="p">}</span>

<span class="p">}</span>  <span class="c1">// namespace my_project</span>

</code></pre></div></div>
<p>To configure a parameter to be validated with the custom validator function <code class="language-plaintext highlighter-rouge">integer_equal_value</code> with an <code class="language-plaintext highlighter-rouge">expected_value</code> of <code class="language-plaintext highlighter-rouge">3</code> you could would this to the YAML.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">validation</span><span class="pi">:</span>
  <span class="s2">"</span><span class="s">my_project::integer_equal_value"</span><span class="err">:</span> <span class="pi">[</span><span class="nv">3</span><span class="pi">]</span>

</code></pre></div></div>

<h3 id="nested-structures">Nested structures</h3>
<p>After the top-level key, every subsequent non-leaf key will generate a nested C++ struct. The struct instance will have
the same name as the key.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cpp_name_space</span><span class="pi">:</span>
  <span class="na">nest1</span><span class="pi">:</span>
    <span class="na">nest2</span><span class="pi">:</span>
      <span class="na">param_name</span><span class="pi">:</span> <span class="c1"># this is a leaf</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string_array</span>

</code></pre></div></div>

<p>The generated parameter value can then be accessed with <code class="language-plaintext highlighter-rouge">params.nest1.nest2.param_name</code></p>

<h3 id="mapped-parameters">Mapped parameters</h3>
<p>You can use parameter maps, where a map with keys from another <code class="language-plaintext highlighter-rouge">string_array</code> parameter is created. Add the <code class="language-plaintext highlighter-rouge">__map_</code> prefix followed by the key parameter name as follows:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cpp_name_space</span><span class="pi">:</span>
  <span class="na">joints</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string_array</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">joint1"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">joint2"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">joint3"</span><span class="pi">]</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">specifies</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">joints</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">used</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">controller"</span>
  <span class="na">interfaces</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string_array</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">position"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">velocity"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">acceleration"</span><span class="pi">]</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">interfaces</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">used</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">controller"</span>
  <span class="c1"># nested mapped example</span>
  <span class="na">gain</span><span class="pi">:</span>
    <span class="na">__map_joints</span><span class="pi">:</span> <span class="c1"># create a map with joints as keys</span>
      <span class="na">__map_interfaces</span><span class="pi">:</span>  <span class="c1"># create a map with interfaces as keys</span>
        <span class="na">value</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">double</span>
  <span class="c1"># simple mapped example</span>
  <span class="na">pid</span><span class="pi">:</span>
    <span class="na">__map_joints</span><span class="pi">:</span> <span class="c1"># create a map with joints as keys</span>
      <span class="na">values</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">double_array</span>

</code></pre></div></div>

<p>The generated parameter value for the nested map example can then be accessed with:</p>

<p><strong>C++</strong></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">params</span><span class="p">.</span><span class="n">gain</span><span class="p">.</span><span class="n">joints_map</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="s">"joint1"</span><span class="p">).</span><span class="n">interfaces_map</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="s">"position"</span><span class="p">).</span><span class="n">value</span>

</code></pre></div></div>

<p><strong>Python</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">params</span><span class="p">.</span><span class="n">gain</span><span class="p">.</span><span class="nf">get_entry</span><span class="p">(</span><span class="sh">"</span><span class="s">joint1</span><span class="sh">"</span><span class="p">).</span><span class="nf">get_entry</span><span class="p">(</span><span class="sh">"</span><span class="s">position</span><span class="sh">"</span><span class="p">).</span><span class="n">value</span>

</code></pre></div></div>

<h3 id="use-generated-struct-in-cpp">Use generated struct in Cpp</h3>
<p>The generated header file is named based on the target library name you passed as the first argument to the cmake function.
If you specified it to be <code class="language-plaintext highlighter-rouge">turtlesim_parameters</code> you can then include the generated code with <code class="language-plaintext highlighter-rouge">#include &lt;turtlesim/turtlesim_parameters.hpp&gt;</code>.</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;turtlesim/turtlesim_parameters.hpp&gt;</span><span class="cp">
</span>
</code></pre></div></div>

<p>Note that this header can also be used from another package:</p>

<div class="language-cmake highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cmake_minimum_required</span><span class="p">(</span>VERSION 3.8<span class="p">)</span>
<span class="nb">project</span><span class="p">(</span>my_other_package<span class="p">)</span>


<span class="nb">include</span><span class="p">(</span>GNUInstallDirs<span class="p">)</span>

<span class="c1"># find dependencies</span>
<span class="nb">find_package</span><span class="p">(</span>ament_cmake REQUIRED<span class="p">)</span>
<span class="nb">find_package</span><span class="p">(</span>turtelsim REQUIRED<span class="p">)</span>

<span class="nb">add_library</span><span class="p">(</span>my_lib src/my_lib.cpp<span class="p">)</span>
<span class="nb">target_include_directories</span><span class="p">(</span>my_lib PUBLIC
    $&lt;BUILD_INTERFACE:<span class="si">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="si">}</span>/include&gt;
    $&lt;INSTALL_INTERFACE:include&gt;<span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span>my_lib PUBLIC turtlesim::turtlesim_parameters<span class="p">)</span>

<span class="c1">#############</span>
<span class="c1">## Install ##</span>
<span class="c1">#############</span>

<span class="nb">install</span><span class="p">(</span>DIRECTORY include/<span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>/ DESTINATION <span class="si">${</span><span class="nv">CMAKE_INSTALL_INCLUDEDIR</span><span class="si">}</span>/<span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span><span class="p">)</span>

<span class="nb">install</span><span class="p">(</span>TARGETS my_lib
  EXPORT <span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>Targets
  ARCHIVE DESTINATION <span class="si">${</span><span class="nv">CMAKE_INSTALL_LIBDIR</span><span class="si">}</span>
  LIBRARY DESTINATION <span class="si">${</span><span class="nv">CMAKE_INSTALL_LIBDIR</span><span class="si">}</span>
  RUNTIME DESTINATION lib/<span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span><span class="p">)</span>

<span class="nf">ament_export_targets</span><span class="p">(</span><span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>Targets HAS_LIBRARY_TARGET<span class="p">)</span>
<span class="nf">ament_export_dependencies</span><span class="p">(</span>turtlesim<span class="p">)</span>
<span class="nf">ament_package</span><span class="p">()</span>

</code></pre></div></div>

<p>In your initialization code, create a <code class="language-plaintext highlighter-rouge">ParamListener</code> which will declare and get the parameters.
An exception will be thrown if any validation fails or any required parameters were not set.
Then call <code class="language-plaintext highlighter-rouge">get_params</code> on the listener to get a copy of the <code class="language-plaintext highlighter-rouge">Params</code> struct.</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">auto</span> <span class="n">param_listener</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">turtlesim</span><span class="o">::</span><span class="n">ParamListener</span><span class="o">&gt;</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
<span class="k">auto</span> <span class="n">params</span> <span class="o">=</span> <span class="n">param_listener</span><span class="o">-&gt;</span><span class="n">get_params</span><span class="p">();</span>

</code></pre></div></div>

<h3 id="dynamic-parameters">Dynamic Parameters</h3>
<p>If you are using dynamic parameters, you can use the following code to check if any of your parameters have changed and then get a new copy of the <code class="language-plaintext highlighter-rouge">Params</code> struct.</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="n">param_listener</span><span class="o">-&gt;</span><span class="n">is_old</span><span class="p">(</span><span class="n">params_</span><span class="p">))</span> <span class="p">{</span>
  <span class="n">params_</span> <span class="o">=</span> <span class="n">param_listener</span><span class="o">-&gt;</span><span class="n">get_params</span><span class="p">();</span>
<span class="p">}</span>

</code></pre></div></div>

<h3 id="parameter-documentation">Parameter documentation</h3>

<p>In some cases, parameters might be unknown only at compile-time, and cannot be part of the generated C++ code. However, for documentation purpose of such parameters, the type <code class="language-plaintext highlighter-rouge">none</code> was introduced.</p>

<p>Parameters with <code class="language-plaintext highlighter-rouge">none</code> type won’t generate any C++ code, but can exist to describe the expected name or namespace, that might be declared by an external piece of code and used in an override.</p>

<p>A typical use case is a controller, loading pluginlib-based filters, that themselves require (and declare) parameters in a known structure.</p>

<p>Example of declarative YAML</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">force_torque_broadcaster_controller</span><span class="pi">:</span>
  <span class="na">sensor_name</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Name</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">sensor</span><span class="nv"> </span><span class="s">used</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">prefix</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">interfaces</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">there</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">no</span><span class="nv"> </span><span class="s">individual</span><span class="nv"> </span><span class="s">interface</span><span class="nv"> </span><span class="s">names</span><span class="nv"> </span><span class="s">defined."</span>
  <span class="na">frame_id</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Sensor's</span><span class="nv"> </span><span class="s">frame_id</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">values</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">published."</span>
  <span class="na">sensor_filter_chain</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">none</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Map</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">parameters</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">defines</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">filter</span><span class="nv"> </span><span class="s">chain,</span><span class="nv"> </span><span class="s">containing</span><span class="nv"> </span><span class="s">filterN</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">key</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">underlying</span><span class="nv"> </span><span class="s">map</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">parameters</span><span class="nv"> </span><span class="s">needed</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">specific</span><span class="nv"> </span><span class="s">filter.</span><span class="nv"> </span><span class="s">See</span><span class="nv"> </span><span class="s">&lt;some</span><span class="nv"> </span><span class="s">docs&gt;</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">more</span><span class="nv"> </span><span class="s">details."</span>

</code></pre></div></div>

<p>Example of parameters for that controller</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">force_torque_broadcaster_controller</span><span class="pi">:</span>
  <span class="na">ros__parameters</span><span class="pi">:</span>
    <span class="na">sensor_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">fts_sensor"</span>
    <span class="na">frame_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">fts_sensor_frame"</span>
    <span class="na">sensor_filter_chain</span><span class="pi">:</span>
      <span class="na">filter1</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">control_filters/LowPassFilterWrench"</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">low_pass_filter"</span>
        <span class="na">params</span><span class="pi">:</span>
          <span class="na">sampling_frequency</span><span class="pi">:</span> <span class="m">200.0</span>
          <span class="na">damping_frequency</span><span class="pi">:</span> <span class="m">50.0</span>
          <span class="na">damping_intensity</span><span class="pi">:</span> <span class="m">1.0</span>

</code></pre></div></div>

<h3 id="example-project">Example Project</h3>
<p>See <a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/example/">cpp example</a> or <a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/example_python/">python example</a> for complete examples of how to use the generate_parameter_library.</p>

<h3 id="generated-code-output">Generated code output</h3>
<p>The generated code primarily consists of two major components:
1) <code class="language-plaintext highlighter-rouge">struct Params</code> that contains values of all parameters and
2) <code class="language-plaintext highlighter-rouge">class ParamListener</code> that handles parameter declaration, updating, and validation.
   The general structure is shown below.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">namespace</span> <span class="n">cpp_namespace</span> <span class="p">{</span>

<span class="k">struct</span> <span class="nc">Params</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">param_name</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
  <span class="k">struct</span> <span class="p">{</span>
    <span class="k">struct</span><span class="p">{</span>
      <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">param_name</span><span class="p">;</span>
      <span class="c1">// arbitrary nesting depth...</span>
    <span class="p">}</span> <span class="n">nest2</span><span class="p">;</span>
  <span class="p">}</span> <span class="n">nest1</span><span class="p">;</span>
  <span class="c1">// for detecting if the parameter struct has been updated</span>
  <span class="n">rclcpp</span><span class="o">::</span><span class="n">Time</span> <span class="n">__stamp</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">ParamListener</span> <span class="p">{</span>
 <span class="nl">public:</span>
  <span class="n">ParamListener</span><span class="p">(</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">ParameterInterface</span><span class="p">);</span>
  <span class="n">ParamListener</span><span class="p">(</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">::</span><span class="n">SharedPtr</span> <span class="n">node</span><span class="p">)</span>
    <span class="o">:</span> <span class="n">ParameterListener</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">get_parameters_interface</span><span class="p">())</span> <span class="p">{}</span>
  <span class="n">ParamListener</span><span class="p">(</span><span class="n">rclcpp_lifecycle</span><span class="o">::</span><span class="n">LifecycleNode</span><span class="o">::</span><span class="n">SharedPtr</span> <span class="n">node</span><span class="p">)</span>
    <span class="o">:</span> <span class="n">ParameterListener</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">get_parameters_interface</span><span class="p">())</span> <span class="p">{}</span>

  <span class="c1">// create a copy of current parameter values</span>
  <span class="n">Params</span> <span class="n">get_params</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

  <span class="c1">// returns true if parameters have been updated since last time get_params was called</span>
  <span class="kt">bool</span> <span class="n">is_old</span><span class="p">(</span><span class="n">Params</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>

  <span class="c1">// loop over all parameters: perform validation then update</span>
  <span class="n">rcl_interfaces</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">SetParametersResult</span> <span class="nf">update</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Parameter</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">parameters</span><span class="p">);</span>

  <span class="c1">// declare all parameters and throw an exception if a non-optional value is missing or validation fails</span>
  <span class="kt">void</span> <span class="nf">declare_params</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">node_interfaces</span><span class="o">::</span><span class="n">NodeParametersInterface</span><span class="o">&gt;&amp;</span> <span class="n">parameters_interface</span><span class="p">);</span>

 <span class="k">private</span><span class="o">:</span>
  <span class="n">Params</span> <span class="n">params_</span><span class="p">;</span>
<span class="p">};</span>

<span class="p">}</span> <span class="c1">// namespace cpp_namespace</span>

</code></pre></div></div>
<p>The structure of the <code class="language-plaintext highlighter-rouge">Params</code> struct and the logic for declaring and updating parameters is generated from a YAML file specification.</p>

<h3 id="generate-markdown-documentation">Generate markdown documentation</h3>

<p>Using generate_parameter_library you can generate a Markdown-file for your <code class="language-plaintext highlighter-rouge">parameters.yaml</code> file.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>generate_parameter_library_markdown --input_yaml example/src/parameters.yaml --output_markdown_file parameters.md

</code></pre></div></div>

<p>This will generate a file <code class="language-plaintext highlighter-rouge">parameters.md</code> in the current folder that contains a markdown
representation of the <code class="language-plaintext highlighter-rouge">parameters.yaml</code> file that you can directly include into your documentation.</p>

<h1 id="faq">FAQ</h1>

<p>Q. What happens if I declare a parameter twice? Will I get an error at runtime?
A. The declare routine that is generated checks to see if each parameter has been declared first before declaring it. Because of this you can declare a parameter twice but it will only have the properties of the first time you declared it. Here is some example generated code.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">parameters_interface_</span><span class="o">-&gt;</span><span class="n">has_parameter</span><span class="p">(</span><span class="n">prefix_</span> <span class="o">+</span> <span class="s">"scientific_notation_num"</span><span class="p">))</span> <span class="p">{</span>
    <span class="n">rcl_interfaces</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">ParameterDescriptor</span> <span class="n">descriptor</span><span class="p">;</span>
    <span class="n">descriptor</span><span class="p">.</span><span class="n">description</span> <span class="o">=</span> <span class="s">"Test scientific notation"</span><span class="p">;</span>
    <span class="n">descriptor</span><span class="p">.</span><span class="n">read_only</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="k">auto</span> <span class="n">parameter</span> <span class="o">=</span> <span class="n">to_parameter_value</span><span class="p">(</span><span class="n">updated_params</span><span class="p">.</span><span class="n">scientific_notation_num</span><span class="p">);</span>
    <span class="n">parameters_interface_</span><span class="o">-&gt;</span><span class="n">declare_parameter</span><span class="p">(</span><span class="n">prefix_</span> <span class="o">+</span> <span class="s">"scientific_notation_num"</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">descriptor</span><span class="p">);</span>
<span class="p">}</span>

</code></pre></div></div>

<p>Q: How do I log when parameters change?
A. The generated library outputs debug logs whenever a parameter is read from ROS.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the 3-Clause BSD License, as dictated by that
<a href="https://opensource.org/licenses/BSD-3-Clause">license</a>.</p>
</div>
              <hr id="jazzy-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="jazzy-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#jazzy-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#jazzy-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#jazzy-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="jazzy-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="jazzy-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="jazzy-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/generate_parameter_library">generate_parameter_library</a> <small>repository</small></h3>
        <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_library_example">generate_parameter_library_example</a>
        
        <a class="label label-primary pkg-label" href="/p/cmake_generate_parameter_module_example">cmake_generate_parameter_module_example</a>
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_library_example_external">generate_parameter_library_example_external</a>
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_module_example">generate_parameter_module_example</a>
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_library">generate_parameter_library</a>
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_library_py">generate_parameter_library_py</a>
        
        <a class="label label-primary pkg-label" href="/p/parameter_traits">parameter_traits</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-PickNikRobotics-generate_parameter_library
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-PickNikRobotics-generate_parameter_library" role="menuitem" tabindex="-1" href="/r/generate_parameter_library/github-PickNikRobotics-generate_parameter_library" data="github-PickNikRobotics-generate_parameter_library">
                    <span class="glyphicon glyphicon-star"></span>
                    github-PickNikRobotics-generate_parameter_library
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Declarative ROS 2 Parameters</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/PickNikRobotics/generate_parameter_library.git">https://github.com/PickNikRobotics/generate_parameter_library.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-02-13
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/generate_parameter_library/#kilted-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/generate_parameter_library/#kilted-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/generate_parameter_library/#kilted-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/generate_parameter_library_example">generate_parameter_library_example</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/cmake_generate_parameter_module_example">cmake_generate_parameter_module_example</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/generate_parameter_library_example_external">generate_parameter_library_example_external</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/generate_parameter_module_example">generate_parameter_module_example</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/generate_parameter_library">generate_parameter_library</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/generate_parameter_library_py">generate_parameter_library_py</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/parameter_traits">parameter_traits</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="generate_parameter_library">generate_parameter_library</h1>
<p>Generate C++ or Python code for ROS 2 parameter declaration, getting, and validation using declarative YAML.
The generated library contains a C++ struct with specified parameters.
Additionally, dynamic parameters and custom validation are made easy.</p>

<h2 id="killer-features">Killer Features</h2>
<ul>
  <li>Declarative YAML syntax for ROS 2 Parameters converted into C++ or Python struct</li>
  <li>Declaring, Getting, Validating, and Updating handled by generated code</li>
  <li>Dynamic ROS 2 Parameters made easy</li>
  <li>Custom user-specified validator functions</li>
  <li>Automatically create documentation of parameters</li>
</ul>

<h2 id="basic-usage">Basic Usage</h2>
<ol>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#create-yaml-parameter-codegen-file">Create YAML parameter codegen file</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#add-parameter-library-generation-to-project">Add parameter library generation to project</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#use-generated-struct-into-project-source-code">Use generated struct into project source code</a></li>
</ol>

<h3 id="create-yaml-parameter-codegen-file">Create yaml parameter codegen file</h3>
<p>Write a yaml file to declare your parameters and their attributes.</p>

<p><strong>src/turtlesim_parameters.yaml</strong></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">turtlesim</span><span class="pi">:</span>
  <span class="na">background</span><span class="pi">:</span>
    <span class="na">r</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">int</span>
      <span class="na">default_value</span><span class="pi">:</span> <span class="m">0</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Red</span><span class="nv"> </span><span class="s">color</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">background,</span><span class="nv"> </span><span class="s">8-bit"</span>
      <span class="na">validation</span><span class="pi">:</span>
        <span class="na">bounds&lt;&gt;</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0</span><span class="pi">,</span> <span class="nv">255</span><span class="pi">]</span>
    <span class="na">g</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">int</span>
      <span class="na">default_value</span><span class="pi">:</span> <span class="m">0</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Green</span><span class="nv"> </span><span class="s">color</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">background,</span><span class="nv"> </span><span class="s">8-bit"</span>
      <span class="na">validation</span><span class="pi">:</span>
        <span class="na">bounds&lt;&gt;</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0</span><span class="pi">,</span> <span class="nv">255</span><span class="pi">]</span>
    <span class="na">b</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">int</span>
      <span class="na">default_value</span><span class="pi">:</span> <span class="m">0</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Blue</span><span class="nv"> </span><span class="s">color</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">background,</span><span class="nv"> </span><span class="s">8-bit"</span>
      <span class="na">validation</span><span class="pi">:</span>
        <span class="na">bounds&lt;&gt;</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0</span><span class="pi">,</span> <span class="nv">255</span><span class="pi">]</span>

</code></pre></div></div>

<h3 id="add-parameter-library-generation-to-project">Add parameter library generation to project</h3>

<p><strong>package.xml</strong></p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;depend&gt;</span>generate_parameter_library<span class="nt">&lt;/depend&gt;</span>

</code></pre></div></div>

<p><strong>CMakeLists.txt</strong></p>

<div class="language-cmake highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">find_package</span><span class="p">(</span>generate_parameter_library REQUIRED<span class="p">)</span>

<span class="nf">generate_parameter_library</span><span class="p">(</span>
  turtlesim_parameters <span class="c1"># cmake target name for the parameter library</span>
  src/turtlesim_parameters.yaml <span class="c1"># path to input yaml file</span>
<span class="p">)</span>

<span class="nb">add_executable</span><span class="p">(</span>minimal_node src/turtlesim.cpp<span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span>minimal_node PRIVATE
  rclcpp::rclcpp
  turtlesim_parameters
<span class="p">)</span>

<span class="nb">install</span><span class="p">(</span>TARGETS minimal_node turtlesim_parameters
  EXPORT <span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>Targets<span class="p">)</span>
<span class="nf">ament_export_targets</span><span class="p">(</span><span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>Targets HAS_LIBRARY_TARGET<span class="p">)</span>

</code></pre></div></div>

<p><strong>setup.py</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">generate_parameter_library_py.setup_helper</span> <span class="kn">import</span> <span class="n">generate_parameter_module</span>

<span class="nf">generate_parameter_module</span><span class="p">(</span>
  <span class="sh">"</span><span class="s">turtlesim_parameters</span><span class="sh">"</span><span class="p">,</span> <span class="c1"># python module name for parameter library
</span>  <span class="sh">"</span><span class="s">turtlesim/turtlesim_parameters.yaml</span><span class="sh">"</span><span class="p">,</span> <span class="c1"># path to input yaml file
</span><span class="p">)</span>

</code></pre></div></div>

<h3 id="use-generated-struct-in-project-source-code">Use generated struct in project source code</h3>

<p><strong>src/turtlesim.cpp</strong></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;rclcpp/rclcpp.hpp&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;turtlesim/turtlesim_parameters.hpp&gt;</span><span class="c1">  // you can also use the deprecated #include "turtlesim_parameters.hpp"</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
  <span class="n">rclcpp</span><span class="o">::</span><span class="n">init</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>
  <span class="k">auto</span> <span class="n">node</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"turtlesim"</span><span class="p">);</span>
  <span class="k">auto</span> <span class="n">param_listener</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">turtlesim</span><span class="o">::</span><span class="n">ParamListener</span><span class="o">&gt;</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
  <span class="k">auto</span> <span class="n">params</span> <span class="o">=</span> <span class="n">param_listener</span><span class="o">-&gt;</span><span class="n">get_params</span><span class="p">();</span>

  <span class="k">auto</span> <span class="n">color</span> <span class="o">=</span> <span class="n">params</span><span class="p">.</span><span class="n">background</span><span class="p">;</span>
  <span class="n">RCLCPP_INFO</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">get_logger</span><span class="p">(),</span>
    <span class="s">"Background color (r,g,b): %d, %d, %d"</span><span class="p">,</span>
    <span class="n">color</span><span class="p">.</span><span class="n">r</span><span class="p">,</span> <span class="n">color</span><span class="p">.</span><span class="n">g</span><span class="p">,</span> <span class="n">color</span><span class="p">.</span><span class="n">b</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div></div>

<p><strong>turtlesim/turtlesim.py</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">rclpy</span>
<span class="kn">from</span> <span class="n">rclpy.node</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="kn">from</span> <span class="n">turtlesim_pkg.turtlesim_parameters</span> <span class="kn">import</span> <span class="n">turtlesim_parameters</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
  <span class="n">rclpy</span><span class="p">.</span><span class="nf">init</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">)</span>
  <span class="n">node</span> <span class="o">=</span> <span class="nc">Node</span><span class="p">(</span><span class="sh">"</span><span class="s">turtlesim</span><span class="sh">"</span><span class="p">)</span>
  <span class="n">param_listener</span> <span class="o">=</span> <span class="n">turtlesim_parameters</span><span class="p">.</span><span class="nc">ParamListener</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
  <span class="n">params</span> <span class="o">=</span> <span class="n">param_listener</span><span class="p">.</span><span class="nf">get_params</span><span class="p">()</span>

  <span class="n">color</span> <span class="o">=</span> <span class="n">params</span><span class="p">.</span><span class="n">background</span>
  <span class="n">node</span><span class="p">.</span><span class="nf">get_logger</span><span class="p">().</span><span class="nf">info</span><span class="p">(</span>
    <span class="sh">"</span><span class="s">Background color (r,g,b): %d, %d, %d</span><span class="sh">"</span> <span class="o">%</span>
    <span class="n">color</span><span class="p">.</span><span class="n">r</span><span class="p">,</span> <span class="n">color</span><span class="p">.</span><span class="n">g</span><span class="p">,</span> <span class="n">color</span><span class="p">.</span><span class="n">b</span><span class="p">)</span>

</code></pre></div></div>

<h3 id="use-example-yaml-files-in-tests">Use example yaml files in tests</h3>
<p>When using parameter library generation it can happen that there are issues when executing tests since parameters are not defined and the library defines them as mandatory.
To overcome this it is recommended to define example yaml files for tests and use them as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find_package(ament_cmake_gtest REQUIRED)
add_rostest_with_parameters_gtest(test_turtlesim_parameters test/test_turtlesim_parameters.cpp
  ${CMAKE_CURRENT_SOURCE_DIR}/test/example_turtlesim_parameters.yaml)
target_include_directories(test_turtlesim_parameters PRIVATE include)
target_link_libraries(test_turtlesim_parameters turtlesim_parameters)
ament_target_dependencies(test_turtlesim_parameters rclcpp)

</code></pre></div></div>

<p>when using <code class="language-plaintext highlighter-rouge">gtest</code>, or:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find_package(ament_cmake_gmock REQUIRED)
add_rostest_with_parameters_gmock(test_turtlesim_parameters test/test_turtlesim_parameters.cpp
  ${CMAKE_CURRENT_SOURCE_DIR}/test/example_turtlesim_parameters.yaml)
target_include_directories(test_turtlesim_parameters PRIVATE include)
target_link_libraries(test_turtlesim_parameters turtlesim_parameters)
ament_target_dependencies(test_turtlesim_parameters rclcpp)

</code></pre></div></div>
<p>when using <code class="language-plaintext highlighter-rouge">gmock</code> test library.</p>

<p>🤖 P.S. having this example yaml files will make your users very grateful because they will always have a working example of a configuration for your node.</p>

<h2 id="detailed-documentation">Detailed Documentation</h2>
<ul>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#cpp-namespace">Cpp namespace</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#parameter-definition">Parameter definition</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#built-in-validators">Built-In Validators</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#custom-validator-functions">Custom validator functions</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#nested-structures">Nested structures</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#use-generated-struct-in-cpp">Use generated struct in Cpp</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#dynamic-parameters">Dynamic Parameters</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#example-project">Example Project</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#generated-code-output">Generated code output</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#generate-markdown-documentation">Generate markdown documentation</a></li>
</ul>

<h3 id="cpp-namespace">Cpp namespace</h3>
<p>The root element of the YAML file determines the namespace used in the generated C++ code.
We use this to put the <code class="language-plaintext highlighter-rouge">Params</code> struct in the same namespace as your C++ code.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cpp_namespace</span><span class="pi">:</span>
<span class="c1"># additionally fields  ...</span>

</code></pre></div></div>

<h3 id="parameter-definition">Parameter definition</h3>
<p>The YAML syntax can be thought of as a tree since it allows for arbitrary nesting of key-value pairs.
For clarity, the last non-nested value is referred to as a leaf.
A leaf represents a single parameter and has the following format.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cpp_namespace</span><span class="pi">:</span>
  <span class="na">param_name</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">int</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="m">3</span>
    <span class="na">read_only</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">additional_constraints</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{</span><span class="nv"> </span><span class="s">type:</span><span class="nv"> </span><span class="s">'number',</span><span class="nv"> </span><span class="s">multipleOf:</span><span class="nv"> </span><span class="s">3</span><span class="nv"> </span><span class="s">}"</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">A</span><span class="nv"> </span><span class="s">read-only</span><span class="nv">  </span><span class="s">integer</span><span class="nv"> </span><span class="s">parameter</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">default</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">3"</span>
    <span class="na">validation</span><span class="pi">:</span>
      <span class="c1"># validation functions ...</span>

</code></pre></div></div>

<p>A parameter is a YAML dictionary with the only required key being <code class="language-plaintext highlighter-rouge">type</code>.</p>

<table>
  <thead>
    <tr>
      <th>Field</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>type</td>
      <td>The type (string, double, etc) of the parameter.</td>
    </tr>
    <tr>
      <td>default_value</td>
      <td>Value for the parameter if the user does not specify a value.</td>
    </tr>
    <tr>
      <td>read_only</td>
      <td>Can only be set at launch and are not dynamic.</td>
    </tr>
    <tr>
      <td>description</td>
      <td>Displayed by <code class="language-plaintext highlighter-rouge">ros2 param describe</code>.</td>
    </tr>
    <tr>
      <td>validation</td>
      <td>Dictionary of validation functions and their parameters.</td>
    </tr>
    <tr>
      <td>additional_constraints</td>
      <td>Additional constraints that end up on the ParameterDescriptor but are not used for validation by this package.</td>
    </tr>
  </tbody>
</table>

<p>The types of parameters in ros2 map to C++ types.</p>

<table>
  <thead>
    <tr>
      <th>Parameter Type</th>
      <th>C++ Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>string</td>
      <td><code class="language-plaintext highlighter-rouge">std::string</code></td>
    </tr>
    <tr>
      <td>double</td>
      <td><code class="language-plaintext highlighter-rouge">double</code></td>
    </tr>
    <tr>
      <td>int</td>
      <td><code class="language-plaintext highlighter-rouge">int</code></td>
    </tr>
    <tr>
      <td>bool</td>
      <td><code class="language-plaintext highlighter-rouge">bool</code></td>
    </tr>
    <tr>
      <td>string_array</td>
      <td><code class="language-plaintext highlighter-rouge">std::vector&lt;std::string&gt;</code></td>
    </tr>
    <tr>
      <td>double_array</td>
      <td><code class="language-plaintext highlighter-rouge">std::vector&lt;double&gt;</code></td>
    </tr>
    <tr>
      <td>int_array</td>
      <td><code class="language-plaintext highlighter-rouge">std::vector&lt;int&gt;</code></td>
    </tr>
    <tr>
      <td>bool_array</td>
      <td><code class="language-plaintext highlighter-rouge">std::vector&lt;bool&gt;</code></td>
    </tr>
    <tr>
      <td>string_fixed_XX</td>
      <td><code class="language-plaintext highlighter-rouge">FixedSizeString&lt;XX&gt;</code></td>
    </tr>
    <tr>
      <td>none</td>
      <td>NO CODE GENERATED</td>
    </tr>
  </tbody>
</table>

<p>Fixed-size types are denoted with a suffix <code class="language-plaintext highlighter-rouge">_fixed_XX</code>, where <code class="language-plaintext highlighter-rouge">XX</code> is the desired size.
The corresponding C++ type is a data wrapper class for conveniently accessing the data.
Note that any fixed size type will automatically use a <code class="language-plaintext highlighter-rouge">size_lt</code> validator. Validators are explained in the next section.</p>

<p>The purpose of the <code class="language-plaintext highlighter-rouge">none</code> type is purely documentation, and won’t generate any C++ code. See <a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#parameter-documentation">Parameter documentation</a> for details.</p>

<h3 id="built-in-validators">Built-In Validators</h3>
<p>Validators are C++ functions that take arguments represented by a key-value pair in yaml.
The key is the name of the function.
The value is an array of values that are passed in as parameters to the function.
If the function does not take any values you write <code class="language-plaintext highlighter-rouge">null</code> or <code class="language-plaintext highlighter-rouge">[]</code> to for the value.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">joint_trajectory_controller</span><span class="pi">:</span>
  <span class="na">command_interfaces</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string_array</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Names</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">command</span><span class="nv"> </span><span class="s">interfaces</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">claim"</span>
    <span class="na">validation</span><span class="pi">:</span>
      <span class="na">size_gt&lt;&gt;</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0</span><span class="pi">]</span>
      <span class="na">unique&lt;&gt;</span><span class="pi">:</span> <span class="kc">null</span>
      <span class="na">subset_of&lt;&gt;</span><span class="pi">:</span> <span class="pi">[[</span><span class="s2">"</span><span class="s">position"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">velocity"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">acceleration"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">effort"</span><span class="pi">,]]</span>

</code></pre></div></div>

<p>Above are validations for <code class="language-plaintext highlighter-rouge">command_interfaces</code> from <code class="language-plaintext highlighter-rouge">ros2_controllers</code>.
This will require this string_array to have these properties:</p>

<ul>
  <li>There is at least one value in the array</li>
  <li>All values are unique</li>
  <li>Values are only in the set <code class="language-plaintext highlighter-rouge">["position", "velocity", "acceleration", "effort",]</code>
</li>
</ul>

<p>You will note that some validators have a suffix of <code class="language-plaintext highlighter-rouge">&lt;&gt;</code>, this tells the code generator to pass the C++ type of the parameter as a function template.
Some of these validators work only on value types, some on string types, and others on array types.
The built-in validator functions provided by this package are:</p>

<p><strong>Value validators</strong>
| Function | Arguments           | Description                          |
| ——– | ——————- | ———————————— |
| bounds&lt;&gt; | [lower, upper]      | Bounds checking (inclusive)          |
| lt&lt;&gt;     | [value]             | parameter &lt; value                    |
| gt&lt;&gt;     | [value]             | parameter &gt; value                    |
| lt_eq&lt;&gt;  | [value]             | parameter &lt;= value                   |
| gt_eq&lt;&gt;  | [value]             | parameter &gt;= value                   |
| one_of&lt;&gt; | [[val1, val2, …]] | Value is one of the specified values |</p>

<p><strong>String validators</strong>
| Function     | Arguments           | Description                                    |
| ———— | ——————- | ———————————————- |
| fixed_size&lt;&gt; | [length]            | Length string is specified length              |
| size_gt&lt;&gt;    | [length]            | Length string is greater than specified length |
| size_lt&lt;&gt;    | [length]            | Length string is less less specified length    |
| not_empty&lt;&gt;  | []                  | String parameter is not empty                  |
| one_of&lt;&gt;     | [[val1, val2, …]] | String is one of the specified values          |</p>

<p><strong>Array validators</strong>
| Function               | Arguments           | Description                                         |
| ———————- | ——————- | ————————————————— |
| unique&lt;&gt;               | []                  | Contains no duplicates                              |
| subset_of&lt;&gt;            | [[val1, val2, …]] | Every element is one of the list                    |
| fixed_size&lt;&gt;           | [length]            | Number of elements is specified length              |
| size_gt&lt;&gt;              | [length]            | Number of elements is greater than specified length |
| size_lt&lt;&gt;              | [length]            | Number of elements is less less specified length    |
| not_empty&lt;&gt;            | []                  | Has at-least one element                            |
| element_bounds&lt;&gt;       | [lower, upper]      | Bounds checking each element (inclusive)            |
| lower_element_bounds&lt;&gt; | [lower]             | Lower bound for each element (inclusive)            |
| upper_element_bounds&lt;&gt; | [upper]             | Upper bound for each element (inclusive)            |</p>

<h3 id="custom-validator-functions">Custom validator functions</h3>
<p>Validators are functions that return a <code class="language-plaintext highlighter-rouge">tl::expected&lt;void, std::string&gt;</code> type and accept a <code class="language-plaintext highlighter-rouge">rclcpp::Parameter const&amp;</code> as their first argument and any number of arguments after that can be specified in YAML.
Validators are C++ functions defined in a header file similar to the example shown below.</p>

<p>Here is an example custom validator.</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;rclcpp/rclcpp.hpp&gt;</span><span class="cp">
</span>
<span class="cp">#include</span> <span class="cpf">&lt;fmt/core.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;tl_expected/expected.hpp&gt;</span><span class="cp">
</span>
<span class="k">namespace</span> <span class="n">my_project</span> <span class="p">{</span>

<span class="n">tl</span><span class="o">::</span><span class="n">expected</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">integer_equal_value</span><span class="p">(</span>
    <span class="n">rclcpp</span><span class="o">::</span><span class="n">Parameter</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">parameter</span><span class="p">,</span> <span class="kt">int</span> <span class="n">expected_value</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">param_value</span> <span class="o">=</span> <span class="n">parameter</span><span class="p">.</span><span class="n">as_int</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">param_value</span> <span class="o">!=</span> <span class="n">expected_value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">tl</span><span class="o">::</span><span class="n">make_unexpected</span><span class="p">(</span><span class="n">fmt</span><span class="o">::</span><span class="n">format</span><span class="p">(</span>
            <span class="s">"Invalid value {} for parameter {}. Expected {}"</span>
            <span class="n">param_value</span><span class="p">,</span> <span class="n">parameter</span><span class="p">.</span><span class="n">get_name</span><span class="p">(),</span> <span class="n">expected_value</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">{};</span>
<span class="p">}</span>

<span class="p">}</span>  <span class="c1">// namespace my_project</span>

</code></pre></div></div>
<p>To configure a parameter to be validated with the custom validator function <code class="language-plaintext highlighter-rouge">integer_equal_value</code> with an <code class="language-plaintext highlighter-rouge">expected_value</code> of <code class="language-plaintext highlighter-rouge">3</code> you could would this to the YAML.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">validation</span><span class="pi">:</span>
  <span class="s2">"</span><span class="s">my_project::integer_equal_value"</span><span class="err">:</span> <span class="pi">[</span><span class="nv">3</span><span class="pi">]</span>

</code></pre></div></div>

<h3 id="nested-structures">Nested structures</h3>
<p>After the top-level key, every subsequent non-leaf key will generate a nested C++ struct. The struct instance will have
the same name as the key.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cpp_name_space</span><span class="pi">:</span>
  <span class="na">nest1</span><span class="pi">:</span>
    <span class="na">nest2</span><span class="pi">:</span>
      <span class="na">param_name</span><span class="pi">:</span> <span class="c1"># this is a leaf</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string_array</span>

</code></pre></div></div>

<p>The generated parameter value can then be accessed with <code class="language-plaintext highlighter-rouge">params.nest1.nest2.param_name</code></p>

<h3 id="mapped-parameters">Mapped parameters</h3>
<p>You can use parameter maps, where a map with keys from another <code class="language-plaintext highlighter-rouge">string_array</code> parameter is created. Add the <code class="language-plaintext highlighter-rouge">__map_</code> prefix followed by the key parameter name as follows:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cpp_name_space</span><span class="pi">:</span>
  <span class="na">joints</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string_array</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">joint1"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">joint2"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">joint3"</span><span class="pi">]</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">specifies</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">joints</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">used</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">controller"</span>
  <span class="na">interfaces</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string_array</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">position"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">velocity"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">acceleration"</span><span class="pi">]</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">interfaces</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">used</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">controller"</span>
  <span class="c1"># nested mapped example</span>
  <span class="na">gain</span><span class="pi">:</span>
    <span class="na">__map_joints</span><span class="pi">:</span> <span class="c1"># create a map with joints as keys</span>
      <span class="na">__map_interfaces</span><span class="pi">:</span>  <span class="c1"># create a map with interfaces as keys</span>
        <span class="na">value</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">double</span>
  <span class="c1"># simple mapped example</span>
  <span class="na">pid</span><span class="pi">:</span>
    <span class="na">__map_joints</span><span class="pi">:</span> <span class="c1"># create a map with joints as keys</span>
      <span class="na">values</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">double_array</span>

</code></pre></div></div>

<p>The generated parameter value for the nested map example can then be accessed with:</p>

<p><strong>C++</strong></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">params</span><span class="p">.</span><span class="n">gain</span><span class="p">.</span><span class="n">joints_map</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="s">"joint1"</span><span class="p">).</span><span class="n">interfaces_map</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="s">"position"</span><span class="p">).</span><span class="n">value</span>

</code></pre></div></div>

<p><strong>Python</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">params</span><span class="p">.</span><span class="n">gain</span><span class="p">.</span><span class="nf">get_entry</span><span class="p">(</span><span class="sh">"</span><span class="s">joint1</span><span class="sh">"</span><span class="p">).</span><span class="nf">get_entry</span><span class="p">(</span><span class="sh">"</span><span class="s">position</span><span class="sh">"</span><span class="p">).</span><span class="n">value</span>

</code></pre></div></div>

<h3 id="use-generated-struct-in-cpp">Use generated struct in Cpp</h3>
<p>The generated header file is named based on the target library name you passed as the first argument to the cmake function.
If you specified it to be <code class="language-plaintext highlighter-rouge">turtlesim_parameters</code> you can then include the generated code with <code class="language-plaintext highlighter-rouge">#include &lt;turtlesim/turtlesim_parameters.hpp&gt;</code>.</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;turtlesim/turtlesim_parameters.hpp&gt;</span><span class="cp">
</span>
</code></pre></div></div>

<p>Note that this header can also be used from another package:</p>

<div class="language-cmake highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cmake_minimum_required</span><span class="p">(</span>VERSION 3.8<span class="p">)</span>
<span class="nb">project</span><span class="p">(</span>my_other_package<span class="p">)</span>


<span class="nb">include</span><span class="p">(</span>GNUInstallDirs<span class="p">)</span>

<span class="c1"># find dependencies</span>
<span class="nb">find_package</span><span class="p">(</span>ament_cmake REQUIRED<span class="p">)</span>
<span class="nb">find_package</span><span class="p">(</span>turtelsim REQUIRED<span class="p">)</span>

<span class="nb">add_library</span><span class="p">(</span>my_lib src/my_lib.cpp<span class="p">)</span>
<span class="nb">target_include_directories</span><span class="p">(</span>my_lib PUBLIC
    $&lt;BUILD_INTERFACE:<span class="si">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="si">}</span>/include&gt;
    $&lt;INSTALL_INTERFACE:include&gt;<span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span>my_lib PUBLIC turtlesim::turtlesim_parameters<span class="p">)</span>

<span class="c1">#############</span>
<span class="c1">## Install ##</span>
<span class="c1">#############</span>

<span class="nb">install</span><span class="p">(</span>DIRECTORY include/<span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>/ DESTINATION <span class="si">${</span><span class="nv">CMAKE_INSTALL_INCLUDEDIR</span><span class="si">}</span>/<span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span><span class="p">)</span>

<span class="nb">install</span><span class="p">(</span>TARGETS my_lib
  EXPORT <span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>Targets
  ARCHIVE DESTINATION <span class="si">${</span><span class="nv">CMAKE_INSTALL_LIBDIR</span><span class="si">}</span>
  LIBRARY DESTINATION <span class="si">${</span><span class="nv">CMAKE_INSTALL_LIBDIR</span><span class="si">}</span>
  RUNTIME DESTINATION lib/<span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span><span class="p">)</span>

<span class="nf">ament_export_targets</span><span class="p">(</span><span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>Targets HAS_LIBRARY_TARGET<span class="p">)</span>
<span class="nf">ament_export_dependencies</span><span class="p">(</span>turtlesim<span class="p">)</span>
<span class="nf">ament_package</span><span class="p">()</span>

</code></pre></div></div>

<p>In your initialization code, create a <code class="language-plaintext highlighter-rouge">ParamListener</code> which will declare and get the parameters.
An exception will be thrown if any validation fails or any required parameters were not set.
Then call <code class="language-plaintext highlighter-rouge">get_params</code> on the listener to get a copy of the <code class="language-plaintext highlighter-rouge">Params</code> struct.</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">auto</span> <span class="n">param_listener</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">turtlesim</span><span class="o">::</span><span class="n">ParamListener</span><span class="o">&gt;</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
<span class="k">auto</span> <span class="n">params</span> <span class="o">=</span> <span class="n">param_listener</span><span class="o">-&gt;</span><span class="n">get_params</span><span class="p">();</span>

</code></pre></div></div>

<h3 id="dynamic-parameters">Dynamic Parameters</h3>
<p>If you are using dynamic parameters, you can use the following code to check if any of your parameters have changed and then get a new copy of the <code class="language-plaintext highlighter-rouge">Params</code> struct.</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="n">param_listener</span><span class="o">-&gt;</span><span class="n">is_old</span><span class="p">(</span><span class="n">params_</span><span class="p">))</span> <span class="p">{</span>
  <span class="n">params_</span> <span class="o">=</span> <span class="n">param_listener</span><span class="o">-&gt;</span><span class="n">get_params</span><span class="p">();</span>
<span class="p">}</span>

</code></pre></div></div>

<h3 id="parameter-documentation">Parameter documentation</h3>

<p>In some cases, parameters might be unknown only at compile-time, and cannot be part of the generated C++ code. However, for documentation purpose of such parameters, the type <code class="language-plaintext highlighter-rouge">none</code> was introduced.</p>

<p>Parameters with <code class="language-plaintext highlighter-rouge">none</code> type won’t generate any C++ code, but can exist to describe the expected name or namespace, that might be declared by an external piece of code and used in an override.</p>

<p>A typical use case is a controller, loading pluginlib-based filters, that themselves require (and declare) parameters in a known structure.</p>

<p>Example of declarative YAML</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">force_torque_broadcaster_controller</span><span class="pi">:</span>
  <span class="na">sensor_name</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Name</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">sensor</span><span class="nv"> </span><span class="s">used</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">prefix</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">interfaces</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">there</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">no</span><span class="nv"> </span><span class="s">individual</span><span class="nv"> </span><span class="s">interface</span><span class="nv"> </span><span class="s">names</span><span class="nv"> </span><span class="s">defined."</span>
  <span class="na">frame_id</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Sensor's</span><span class="nv"> </span><span class="s">frame_id</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">values</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">published."</span>
  <span class="na">sensor_filter_chain</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">none</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Map</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">parameters</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">defines</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">filter</span><span class="nv"> </span><span class="s">chain,</span><span class="nv"> </span><span class="s">containing</span><span class="nv"> </span><span class="s">filterN</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">key</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">underlying</span><span class="nv"> </span><span class="s">map</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">parameters</span><span class="nv"> </span><span class="s">needed</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">specific</span><span class="nv"> </span><span class="s">filter.</span><span class="nv"> </span><span class="s">See</span><span class="nv"> </span><span class="s">&lt;some</span><span class="nv"> </span><span class="s">docs&gt;</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">more</span><span class="nv"> </span><span class="s">details."</span>

</code></pre></div></div>

<p>Example of parameters for that controller</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">force_torque_broadcaster_controller</span><span class="pi">:</span>
  <span class="na">ros__parameters</span><span class="pi">:</span>
    <span class="na">sensor_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">fts_sensor"</span>
    <span class="na">frame_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">fts_sensor_frame"</span>
    <span class="na">sensor_filter_chain</span><span class="pi">:</span>
      <span class="na">filter1</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">control_filters/LowPassFilterWrench"</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">low_pass_filter"</span>
        <span class="na">params</span><span class="pi">:</span>
          <span class="na">sampling_frequency</span><span class="pi">:</span> <span class="m">200.0</span>
          <span class="na">damping_frequency</span><span class="pi">:</span> <span class="m">50.0</span>
          <span class="na">damping_intensity</span><span class="pi">:</span> <span class="m">1.0</span>

</code></pre></div></div>

<h3 id="example-project">Example Project</h3>
<p>See <a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/example/">cpp example</a> or <a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/example_python/">python example</a> for complete examples of how to use the generate_parameter_library.</p>

<h3 id="generated-code-output">Generated code output</h3>
<p>The generated code primarily consists of two major components:
1) <code class="language-plaintext highlighter-rouge">struct Params</code> that contains values of all parameters and
2) <code class="language-plaintext highlighter-rouge">class ParamListener</code> that handles parameter declaration, updating, and validation.
   The general structure is shown below.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">namespace</span> <span class="n">cpp_namespace</span> <span class="p">{</span>

<span class="k">struct</span> <span class="nc">Params</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">param_name</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
  <span class="k">struct</span> <span class="p">{</span>
    <span class="k">struct</span><span class="p">{</span>
      <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">param_name</span><span class="p">;</span>
      <span class="c1">// arbitrary nesting depth...</span>
    <span class="p">}</span> <span class="n">nest2</span><span class="p">;</span>
  <span class="p">}</span> <span class="n">nest1</span><span class="p">;</span>
  <span class="c1">// for detecting if the parameter struct has been updated</span>
  <span class="n">rclcpp</span><span class="o">::</span><span class="n">Time</span> <span class="n">__stamp</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">ParamListener</span> <span class="p">{</span>
 <span class="nl">public:</span>
  <span class="n">ParamListener</span><span class="p">(</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">ParameterInterface</span><span class="p">);</span>
  <span class="n">ParamListener</span><span class="p">(</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">::</span><span class="n">SharedPtr</span> <span class="n">node</span><span class="p">)</span>
    <span class="o">:</span> <span class="n">ParameterListener</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">get_parameters_interface</span><span class="p">())</span> <span class="p">{}</span>
  <span class="n">ParamListener</span><span class="p">(</span><span class="n">rclcpp_lifecycle</span><span class="o">::</span><span class="n">LifecycleNode</span><span class="o">::</span><span class="n">SharedPtr</span> <span class="n">node</span><span class="p">)</span>
    <span class="o">:</span> <span class="n">ParameterListener</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">get_parameters_interface</span><span class="p">())</span> <span class="p">{}</span>

  <span class="c1">// create a copy of current parameter values</span>
  <span class="n">Params</span> <span class="n">get_params</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

  <span class="c1">// returns true if parameters have been updated since last time get_params was called</span>
  <span class="kt">bool</span> <span class="n">is_old</span><span class="p">(</span><span class="n">Params</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>

  <span class="c1">// loop over all parameters: perform validation then update</span>
  <span class="n">rcl_interfaces</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">SetParametersResult</span> <span class="nf">update</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Parameter</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">parameters</span><span class="p">);</span>

  <span class="c1">// declare all parameters and throw an exception if a non-optional value is missing or validation fails</span>
  <span class="kt">void</span> <span class="nf">declare_params</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">node_interfaces</span><span class="o">::</span><span class="n">NodeParametersInterface</span><span class="o">&gt;&amp;</span> <span class="n">parameters_interface</span><span class="p">);</span>

 <span class="k">private</span><span class="o">:</span>
  <span class="n">Params</span> <span class="n">params_</span><span class="p">;</span>
<span class="p">};</span>

<span class="p">}</span> <span class="c1">// namespace cpp_namespace</span>

</code></pre></div></div>
<p>The structure of the <code class="language-plaintext highlighter-rouge">Params</code> struct and the logic for declaring and updating parameters is generated from a YAML file specification.</p>

<h3 id="generate-markdown-documentation">Generate markdown documentation</h3>

<p>Using generate_parameter_library you can generate a Markdown-file for your <code class="language-plaintext highlighter-rouge">parameters.yaml</code> file.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>generate_parameter_library_markdown --input_yaml example/src/parameters.yaml --output_markdown_file parameters.md

</code></pre></div></div>

<p>This will generate a file <code class="language-plaintext highlighter-rouge">parameters.md</code> in the current folder that contains a markdown
representation of the <code class="language-plaintext highlighter-rouge">parameters.yaml</code> file that you can directly include into your documentation.</p>

<h1 id="faq">FAQ</h1>

<p>Q. What happens if I declare a parameter twice? Will I get an error at runtime?
A. The declare routine that is generated checks to see if each parameter has been declared first before declaring it. Because of this you can declare a parameter twice but it will only have the properties of the first time you declared it. Here is some example generated code.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">parameters_interface_</span><span class="o">-&gt;</span><span class="n">has_parameter</span><span class="p">(</span><span class="n">prefix_</span> <span class="o">+</span> <span class="s">"scientific_notation_num"</span><span class="p">))</span> <span class="p">{</span>
    <span class="n">rcl_interfaces</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">ParameterDescriptor</span> <span class="n">descriptor</span><span class="p">;</span>
    <span class="n">descriptor</span><span class="p">.</span><span class="n">description</span> <span class="o">=</span> <span class="s">"Test scientific notation"</span><span class="p">;</span>
    <span class="n">descriptor</span><span class="p">.</span><span class="n">read_only</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="k">auto</span> <span class="n">parameter</span> <span class="o">=</span> <span class="n">to_parameter_value</span><span class="p">(</span><span class="n">updated_params</span><span class="p">.</span><span class="n">scientific_notation_num</span><span class="p">);</span>
    <span class="n">parameters_interface_</span><span class="o">-&gt;</span><span class="n">declare_parameter</span><span class="p">(</span><span class="n">prefix_</span> <span class="o">+</span> <span class="s">"scientific_notation_num"</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">descriptor</span><span class="p">);</span>
<span class="p">}</span>

</code></pre></div></div>

<p>Q: How do I log when parameters change?
A. The generated library outputs debug logs whenever a parameter is read from ROS.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the 3-Clause BSD License, as dictated by that
<a href="https://opensource.org/licenses/BSD-3-Clause">license</a>.</p>
</div>
              <hr id="kilted-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="kilted-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#kilted-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#kilted-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#kilted-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="kilted-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="kilted-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="kilted-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/generate_parameter_library">generate_parameter_library</a> <small>repository</small></h3>
        <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_library_example">generate_parameter_library_example</a>
        
        <a class="label label-primary pkg-label" href="/p/cmake_generate_parameter_module_example">cmake_generate_parameter_module_example</a>
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_library_example_external">generate_parameter_library_example_external</a>
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_module_example">generate_parameter_module_example</a>
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_library">generate_parameter_library</a>
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_library_py">generate_parameter_library_py</a>
        
        <a class="label label-primary pkg-label" href="/p/parameter_traits">parameter_traits</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-PickNikRobotics-generate_parameter_library
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-PickNikRobotics-generate_parameter_library" role="menuitem" tabindex="-1" href="/r/generate_parameter_library/github-PickNikRobotics-generate_parameter_library" data="github-PickNikRobotics-generate_parameter_library">
                    <span class="glyphicon glyphicon-star"></span>
                    github-PickNikRobotics-generate_parameter_library
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Declarative ROS 2 Parameters</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/PickNikRobotics/generate_parameter_library.git">https://github.com/PickNikRobotics/generate_parameter_library.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-02-13
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/generate_parameter_library/#rolling-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/generate_parameter_library/#rolling-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/generate_parameter_library/#rolling-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/generate_parameter_library_example">generate_parameter_library_example</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/cmake_generate_parameter_module_example">cmake_generate_parameter_module_example</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/generate_parameter_library_example_external">generate_parameter_library_example_external</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/generate_parameter_module_example">generate_parameter_module_example</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/generate_parameter_library">generate_parameter_library</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/generate_parameter_library_py">generate_parameter_library_py</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/parameter_traits">parameter_traits</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="generate_parameter_library">generate_parameter_library</h1>
<p>Generate C++ or Python code for ROS 2 parameter declaration, getting, and validation using declarative YAML.
The generated library contains a C++ struct with specified parameters.
Additionally, dynamic parameters and custom validation are made easy.</p>

<h2 id="killer-features">Killer Features</h2>
<ul>
  <li>Declarative YAML syntax for ROS 2 Parameters converted into C++ or Python struct</li>
  <li>Declaring, Getting, Validating, and Updating handled by generated code</li>
  <li>Dynamic ROS 2 Parameters made easy</li>
  <li>Custom user-specified validator functions</li>
  <li>Automatically create documentation of parameters</li>
</ul>

<h2 id="basic-usage">Basic Usage</h2>
<ol>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#create-yaml-parameter-codegen-file">Create YAML parameter codegen file</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#add-parameter-library-generation-to-project">Add parameter library generation to project</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#use-generated-struct-into-project-source-code">Use generated struct into project source code</a></li>
</ol>

<h3 id="create-yaml-parameter-codegen-file">Create yaml parameter codegen file</h3>
<p>Write a yaml file to declare your parameters and their attributes.</p>

<p><strong>src/turtlesim_parameters.yaml</strong></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">turtlesim</span><span class="pi">:</span>
  <span class="na">background</span><span class="pi">:</span>
    <span class="na">r</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">int</span>
      <span class="na">default_value</span><span class="pi">:</span> <span class="m">0</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Red</span><span class="nv"> </span><span class="s">color</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">background,</span><span class="nv"> </span><span class="s">8-bit"</span>
      <span class="na">validation</span><span class="pi">:</span>
        <span class="na">bounds&lt;&gt;</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0</span><span class="pi">,</span> <span class="nv">255</span><span class="pi">]</span>
    <span class="na">g</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">int</span>
      <span class="na">default_value</span><span class="pi">:</span> <span class="m">0</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Green</span><span class="nv"> </span><span class="s">color</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">background,</span><span class="nv"> </span><span class="s">8-bit"</span>
      <span class="na">validation</span><span class="pi">:</span>
        <span class="na">bounds&lt;&gt;</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0</span><span class="pi">,</span> <span class="nv">255</span><span class="pi">]</span>
    <span class="na">b</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">int</span>
      <span class="na">default_value</span><span class="pi">:</span> <span class="m">0</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Blue</span><span class="nv"> </span><span class="s">color</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">background,</span><span class="nv"> </span><span class="s">8-bit"</span>
      <span class="na">validation</span><span class="pi">:</span>
        <span class="na">bounds&lt;&gt;</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0</span><span class="pi">,</span> <span class="nv">255</span><span class="pi">]</span>

</code></pre></div></div>

<h3 id="add-parameter-library-generation-to-project">Add parameter library generation to project</h3>

<p><strong>package.xml</strong></p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;depend&gt;</span>generate_parameter_library<span class="nt">&lt;/depend&gt;</span>

</code></pre></div></div>

<p><strong>CMakeLists.txt</strong></p>

<div class="language-cmake highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">find_package</span><span class="p">(</span>generate_parameter_library REQUIRED<span class="p">)</span>

<span class="nf">generate_parameter_library</span><span class="p">(</span>
  turtlesim_parameters <span class="c1"># cmake target name for the parameter library</span>
  src/turtlesim_parameters.yaml <span class="c1"># path to input yaml file</span>
<span class="p">)</span>

<span class="nb">add_executable</span><span class="p">(</span>minimal_node src/turtlesim.cpp<span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span>minimal_node PRIVATE
  rclcpp::rclcpp
  turtlesim_parameters
<span class="p">)</span>

<span class="nb">install</span><span class="p">(</span>TARGETS minimal_node turtlesim_parameters
  EXPORT <span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>Targets<span class="p">)</span>
<span class="nf">ament_export_targets</span><span class="p">(</span><span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>Targets HAS_LIBRARY_TARGET<span class="p">)</span>

</code></pre></div></div>

<p><strong>setup.py</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">generate_parameter_library_py.setup_helper</span> <span class="kn">import</span> <span class="n">generate_parameter_module</span>

<span class="nf">generate_parameter_module</span><span class="p">(</span>
  <span class="sh">"</span><span class="s">turtlesim_parameters</span><span class="sh">"</span><span class="p">,</span> <span class="c1"># python module name for parameter library
</span>  <span class="sh">"</span><span class="s">turtlesim/turtlesim_parameters.yaml</span><span class="sh">"</span><span class="p">,</span> <span class="c1"># path to input yaml file
</span><span class="p">)</span>

</code></pre></div></div>

<h3 id="use-generated-struct-in-project-source-code">Use generated struct in project source code</h3>

<p><strong>src/turtlesim.cpp</strong></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;rclcpp/rclcpp.hpp&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;turtlesim/turtlesim_parameters.hpp&gt;</span><span class="c1">  // you can also use the deprecated #include "turtlesim_parameters.hpp"</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
  <span class="n">rclcpp</span><span class="o">::</span><span class="n">init</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>
  <span class="k">auto</span> <span class="n">node</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"turtlesim"</span><span class="p">);</span>
  <span class="k">auto</span> <span class="n">param_listener</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">turtlesim</span><span class="o">::</span><span class="n">ParamListener</span><span class="o">&gt;</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
  <span class="k">auto</span> <span class="n">params</span> <span class="o">=</span> <span class="n">param_listener</span><span class="o">-&gt;</span><span class="n">get_params</span><span class="p">();</span>

  <span class="k">auto</span> <span class="n">color</span> <span class="o">=</span> <span class="n">params</span><span class="p">.</span><span class="n">background</span><span class="p">;</span>
  <span class="n">RCLCPP_INFO</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">get_logger</span><span class="p">(),</span>
    <span class="s">"Background color (r,g,b): %d, %d, %d"</span><span class="p">,</span>
    <span class="n">color</span><span class="p">.</span><span class="n">r</span><span class="p">,</span> <span class="n">color</span><span class="p">.</span><span class="n">g</span><span class="p">,</span> <span class="n">color</span><span class="p">.</span><span class="n">b</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div></div>

<p><strong>turtlesim/turtlesim.py</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">rclpy</span>
<span class="kn">from</span> <span class="n">rclpy.node</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="kn">from</span> <span class="n">turtlesim_pkg.turtlesim_parameters</span> <span class="kn">import</span> <span class="n">turtlesim_parameters</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
  <span class="n">rclpy</span><span class="p">.</span><span class="nf">init</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">)</span>
  <span class="n">node</span> <span class="o">=</span> <span class="nc">Node</span><span class="p">(</span><span class="sh">"</span><span class="s">turtlesim</span><span class="sh">"</span><span class="p">)</span>
  <span class="n">param_listener</span> <span class="o">=</span> <span class="n">turtlesim_parameters</span><span class="p">.</span><span class="nc">ParamListener</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
  <span class="n">params</span> <span class="o">=</span> <span class="n">param_listener</span><span class="p">.</span><span class="nf">get_params</span><span class="p">()</span>

  <span class="n">color</span> <span class="o">=</span> <span class="n">params</span><span class="p">.</span><span class="n">background</span>
  <span class="n">node</span><span class="p">.</span><span class="nf">get_logger</span><span class="p">().</span><span class="nf">info</span><span class="p">(</span>
    <span class="sh">"</span><span class="s">Background color (r,g,b): %d, %d, %d</span><span class="sh">"</span> <span class="o">%</span>
    <span class="n">color</span><span class="p">.</span><span class="n">r</span><span class="p">,</span> <span class="n">color</span><span class="p">.</span><span class="n">g</span><span class="p">,</span> <span class="n">color</span><span class="p">.</span><span class="n">b</span><span class="p">)</span>

</code></pre></div></div>

<h3 id="use-example-yaml-files-in-tests">Use example yaml files in tests</h3>
<p>When using parameter library generation it can happen that there are issues when executing tests since parameters are not defined and the library defines them as mandatory.
To overcome this it is recommended to define example yaml files for tests and use them as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find_package(ament_cmake_gtest REQUIRED)
add_rostest_with_parameters_gtest(test_turtlesim_parameters test/test_turtlesim_parameters.cpp
  ${CMAKE_CURRENT_SOURCE_DIR}/test/example_turtlesim_parameters.yaml)
target_include_directories(test_turtlesim_parameters PRIVATE include)
target_link_libraries(test_turtlesim_parameters turtlesim_parameters)
ament_target_dependencies(test_turtlesim_parameters rclcpp)

</code></pre></div></div>

<p>when using <code class="language-plaintext highlighter-rouge">gtest</code>, or:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find_package(ament_cmake_gmock REQUIRED)
add_rostest_with_parameters_gmock(test_turtlesim_parameters test/test_turtlesim_parameters.cpp
  ${CMAKE_CURRENT_SOURCE_DIR}/test/example_turtlesim_parameters.yaml)
target_include_directories(test_turtlesim_parameters PRIVATE include)
target_link_libraries(test_turtlesim_parameters turtlesim_parameters)
ament_target_dependencies(test_turtlesim_parameters rclcpp)

</code></pre></div></div>
<p>when using <code class="language-plaintext highlighter-rouge">gmock</code> test library.</p>

<p>🤖 P.S. having this example yaml files will make your users very grateful because they will always have a working example of a configuration for your node.</p>

<h2 id="detailed-documentation">Detailed Documentation</h2>
<ul>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#cpp-namespace">Cpp namespace</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#parameter-definition">Parameter definition</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#built-in-validators">Built-In Validators</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#custom-validator-functions">Custom validator functions</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#nested-structures">Nested structures</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#use-generated-struct-in-cpp">Use generated struct in Cpp</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#dynamic-parameters">Dynamic Parameters</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#example-project">Example Project</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#generated-code-output">Generated code output</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#generate-markdown-documentation">Generate markdown documentation</a></li>
</ul>

<h3 id="cpp-namespace">Cpp namespace</h3>
<p>The root element of the YAML file determines the namespace used in the generated C++ code.
We use this to put the <code class="language-plaintext highlighter-rouge">Params</code> struct in the same namespace as your C++ code.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cpp_namespace</span><span class="pi">:</span>
<span class="c1"># additionally fields  ...</span>

</code></pre></div></div>

<h3 id="parameter-definition">Parameter definition</h3>
<p>The YAML syntax can be thought of as a tree since it allows for arbitrary nesting of key-value pairs.
For clarity, the last non-nested value is referred to as a leaf.
A leaf represents a single parameter and has the following format.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cpp_namespace</span><span class="pi">:</span>
  <span class="na">param_name</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">int</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="m">3</span>
    <span class="na">read_only</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">additional_constraints</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{</span><span class="nv"> </span><span class="s">type:</span><span class="nv"> </span><span class="s">'number',</span><span class="nv"> </span><span class="s">multipleOf:</span><span class="nv"> </span><span class="s">3</span><span class="nv"> </span><span class="s">}"</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">A</span><span class="nv"> </span><span class="s">read-only</span><span class="nv">  </span><span class="s">integer</span><span class="nv"> </span><span class="s">parameter</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">default</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">3"</span>
    <span class="na">validation</span><span class="pi">:</span>
      <span class="c1"># validation functions ...</span>

</code></pre></div></div>

<p>A parameter is a YAML dictionary with the only required key being <code class="language-plaintext highlighter-rouge">type</code>.</p>

<table>
  <thead>
    <tr>
      <th>Field</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>type</td>
      <td>The type (string, double, etc) of the parameter.</td>
    </tr>
    <tr>
      <td>default_value</td>
      <td>Value for the parameter if the user does not specify a value.</td>
    </tr>
    <tr>
      <td>read_only</td>
      <td>Can only be set at launch and are not dynamic.</td>
    </tr>
    <tr>
      <td>description</td>
      <td>Displayed by <code class="language-plaintext highlighter-rouge">ros2 param describe</code>.</td>
    </tr>
    <tr>
      <td>validation</td>
      <td>Dictionary of validation functions and their parameters.</td>
    </tr>
    <tr>
      <td>additional_constraints</td>
      <td>Additional constraints that end up on the ParameterDescriptor but are not used for validation by this package.</td>
    </tr>
  </tbody>
</table>

<p>The types of parameters in ros2 map to C++ types.</p>

<table>
  <thead>
    <tr>
      <th>Parameter Type</th>
      <th>C++ Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>string</td>
      <td><code class="language-plaintext highlighter-rouge">std::string</code></td>
    </tr>
    <tr>
      <td>double</td>
      <td><code class="language-plaintext highlighter-rouge">double</code></td>
    </tr>
    <tr>
      <td>int</td>
      <td><code class="language-plaintext highlighter-rouge">int</code></td>
    </tr>
    <tr>
      <td>bool</td>
      <td><code class="language-plaintext highlighter-rouge">bool</code></td>
    </tr>
    <tr>
      <td>string_array</td>
      <td><code class="language-plaintext highlighter-rouge">std::vector&lt;std::string&gt;</code></td>
    </tr>
    <tr>
      <td>double_array</td>
      <td><code class="language-plaintext highlighter-rouge">std::vector&lt;double&gt;</code></td>
    </tr>
    <tr>
      <td>int_array</td>
      <td><code class="language-plaintext highlighter-rouge">std::vector&lt;int&gt;</code></td>
    </tr>
    <tr>
      <td>bool_array</td>
      <td><code class="language-plaintext highlighter-rouge">std::vector&lt;bool&gt;</code></td>
    </tr>
    <tr>
      <td>string_fixed_XX</td>
      <td><code class="language-plaintext highlighter-rouge">FixedSizeString&lt;XX&gt;</code></td>
    </tr>
    <tr>
      <td>none</td>
      <td>NO CODE GENERATED</td>
    </tr>
  </tbody>
</table>

<p>Fixed-size types are denoted with a suffix <code class="language-plaintext highlighter-rouge">_fixed_XX</code>, where <code class="language-plaintext highlighter-rouge">XX</code> is the desired size.
The corresponding C++ type is a data wrapper class for conveniently accessing the data.
Note that any fixed size type will automatically use a <code class="language-plaintext highlighter-rouge">size_lt</code> validator. Validators are explained in the next section.</p>

<p>The purpose of the <code class="language-plaintext highlighter-rouge">none</code> type is purely documentation, and won’t generate any C++ code. See <a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#parameter-documentation">Parameter documentation</a> for details.</p>

<h3 id="built-in-validators">Built-In Validators</h3>
<p>Validators are C++ functions that take arguments represented by a key-value pair in yaml.
The key is the name of the function.
The value is an array of values that are passed in as parameters to the function.
If the function does not take any values you write <code class="language-plaintext highlighter-rouge">null</code> or <code class="language-plaintext highlighter-rouge">[]</code> to for the value.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">joint_trajectory_controller</span><span class="pi">:</span>
  <span class="na">command_interfaces</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string_array</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Names</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">command</span><span class="nv"> </span><span class="s">interfaces</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">claim"</span>
    <span class="na">validation</span><span class="pi">:</span>
      <span class="na">size_gt&lt;&gt;</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0</span><span class="pi">]</span>
      <span class="na">unique&lt;&gt;</span><span class="pi">:</span> <span class="kc">null</span>
      <span class="na">subset_of&lt;&gt;</span><span class="pi">:</span> <span class="pi">[[</span><span class="s2">"</span><span class="s">position"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">velocity"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">acceleration"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">effort"</span><span class="pi">,]]</span>

</code></pre></div></div>

<p>Above are validations for <code class="language-plaintext highlighter-rouge">command_interfaces</code> from <code class="language-plaintext highlighter-rouge">ros2_controllers</code>.
This will require this string_array to have these properties:</p>

<ul>
  <li>There is at least one value in the array</li>
  <li>All values are unique</li>
  <li>Values are only in the set <code class="language-plaintext highlighter-rouge">["position", "velocity", "acceleration", "effort",]</code>
</li>
</ul>

<p>You will note that some validators have a suffix of <code class="language-plaintext highlighter-rouge">&lt;&gt;</code>, this tells the code generator to pass the C++ type of the parameter as a function template.
Some of these validators work only on value types, some on string types, and others on array types.
The built-in validator functions provided by this package are:</p>

<p><strong>Value validators</strong>
| Function | Arguments           | Description                          |
| ——– | ——————- | ———————————— |
| bounds&lt;&gt; | [lower, upper]      | Bounds checking (inclusive)          |
| lt&lt;&gt;     | [value]             | parameter &lt; value                    |
| gt&lt;&gt;     | [value]             | parameter &gt; value                    |
| lt_eq&lt;&gt;  | [value]             | parameter &lt;= value                   |
| gt_eq&lt;&gt;  | [value]             | parameter &gt;= value                   |
| one_of&lt;&gt; | [[val1, val2, …]] | Value is one of the specified values |</p>

<p><strong>String validators</strong>
| Function     | Arguments           | Description                                    |
| ———— | ——————- | ———————————————- |
| fixed_size&lt;&gt; | [length]            | Length string is specified length              |
| size_gt&lt;&gt;    | [length]            | Length string is greater than specified length |
| size_lt&lt;&gt;    | [length]            | Length string is less less specified length    |
| not_empty&lt;&gt;  | []                  | String parameter is not empty                  |
| one_of&lt;&gt;     | [[val1, val2, …]] | String is one of the specified values          |</p>

<p><strong>Array validators</strong>
| Function               | Arguments           | Description                                         |
| ———————- | ——————- | ————————————————— |
| unique&lt;&gt;               | []                  | Contains no duplicates                              |
| subset_of&lt;&gt;            | [[val1, val2, …]] | Every element is one of the list                    |
| fixed_size&lt;&gt;           | [length]            | Number of elements is specified length              |
| size_gt&lt;&gt;              | [length]            | Number of elements is greater than specified length |
| size_lt&lt;&gt;              | [length]            | Number of elements is less less specified length    |
| not_empty&lt;&gt;            | []                  | Has at-least one element                            |
| element_bounds&lt;&gt;       | [lower, upper]      | Bounds checking each element (inclusive)            |
| lower_element_bounds&lt;&gt; | [lower]             | Lower bound for each element (inclusive)            |
| upper_element_bounds&lt;&gt; | [upper]             | Upper bound for each element (inclusive)            |</p>

<h3 id="custom-validator-functions">Custom validator functions</h3>
<p>Validators are functions that return a <code class="language-plaintext highlighter-rouge">tl::expected&lt;void, std::string&gt;</code> type and accept a <code class="language-plaintext highlighter-rouge">rclcpp::Parameter const&amp;</code> as their first argument and any number of arguments after that can be specified in YAML.
Validators are C++ functions defined in a header file similar to the example shown below.</p>

<p>Here is an example custom validator.</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;rclcpp/rclcpp.hpp&gt;</span><span class="cp">
</span>
<span class="cp">#include</span> <span class="cpf">&lt;fmt/core.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;tl_expected/expected.hpp&gt;</span><span class="cp">
</span>
<span class="k">namespace</span> <span class="n">my_project</span> <span class="p">{</span>

<span class="n">tl</span><span class="o">::</span><span class="n">expected</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">integer_equal_value</span><span class="p">(</span>
    <span class="n">rclcpp</span><span class="o">::</span><span class="n">Parameter</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">parameter</span><span class="p">,</span> <span class="kt">int</span> <span class="n">expected_value</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">param_value</span> <span class="o">=</span> <span class="n">parameter</span><span class="p">.</span><span class="n">as_int</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">param_value</span> <span class="o">!=</span> <span class="n">expected_value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">tl</span><span class="o">::</span><span class="n">make_unexpected</span><span class="p">(</span><span class="n">fmt</span><span class="o">::</span><span class="n">format</span><span class="p">(</span>
            <span class="s">"Invalid value {} for parameter {}. Expected {}"</span>
            <span class="n">param_value</span><span class="p">,</span> <span class="n">parameter</span><span class="p">.</span><span class="n">get_name</span><span class="p">(),</span> <span class="n">expected_value</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">{};</span>
<span class="p">}</span>

<span class="p">}</span>  <span class="c1">// namespace my_project</span>

</code></pre></div></div>
<p>To configure a parameter to be validated with the custom validator function <code class="language-plaintext highlighter-rouge">integer_equal_value</code> with an <code class="language-plaintext highlighter-rouge">expected_value</code> of <code class="language-plaintext highlighter-rouge">3</code> you could would this to the YAML.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">validation</span><span class="pi">:</span>
  <span class="s2">"</span><span class="s">my_project::integer_equal_value"</span><span class="err">:</span> <span class="pi">[</span><span class="nv">3</span><span class="pi">]</span>

</code></pre></div></div>

<h3 id="nested-structures">Nested structures</h3>
<p>After the top-level key, every subsequent non-leaf key will generate a nested C++ struct. The struct instance will have
the same name as the key.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cpp_name_space</span><span class="pi">:</span>
  <span class="na">nest1</span><span class="pi">:</span>
    <span class="na">nest2</span><span class="pi">:</span>
      <span class="na">param_name</span><span class="pi">:</span> <span class="c1"># this is a leaf</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string_array</span>

</code></pre></div></div>

<p>The generated parameter value can then be accessed with <code class="language-plaintext highlighter-rouge">params.nest1.nest2.param_name</code></p>

<h3 id="mapped-parameters">Mapped parameters</h3>
<p>You can use parameter maps, where a map with keys from another <code class="language-plaintext highlighter-rouge">string_array</code> parameter is created. Add the <code class="language-plaintext highlighter-rouge">__map_</code> prefix followed by the key parameter name as follows:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cpp_name_space</span><span class="pi">:</span>
  <span class="na">joints</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string_array</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">joint1"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">joint2"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">joint3"</span><span class="pi">]</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">specifies</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">joints</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">used</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">controller"</span>
  <span class="na">interfaces</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string_array</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">position"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">velocity"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">acceleration"</span><span class="pi">]</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">interfaces</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">used</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">controller"</span>
  <span class="c1"># nested mapped example</span>
  <span class="na">gain</span><span class="pi">:</span>
    <span class="na">__map_joints</span><span class="pi">:</span> <span class="c1"># create a map with joints as keys</span>
      <span class="na">__map_interfaces</span><span class="pi">:</span>  <span class="c1"># create a map with interfaces as keys</span>
        <span class="na">value</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">double</span>
  <span class="c1"># simple mapped example</span>
  <span class="na">pid</span><span class="pi">:</span>
    <span class="na">__map_joints</span><span class="pi">:</span> <span class="c1"># create a map with joints as keys</span>
      <span class="na">values</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">double_array</span>

</code></pre></div></div>

<p>The generated parameter value for the nested map example can then be accessed with:</p>

<p><strong>C++</strong></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">params</span><span class="p">.</span><span class="n">gain</span><span class="p">.</span><span class="n">joints_map</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="s">"joint1"</span><span class="p">).</span><span class="n">interfaces_map</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="s">"position"</span><span class="p">).</span><span class="n">value</span>

</code></pre></div></div>

<p><strong>Python</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">params</span><span class="p">.</span><span class="n">gain</span><span class="p">.</span><span class="nf">get_entry</span><span class="p">(</span><span class="sh">"</span><span class="s">joint1</span><span class="sh">"</span><span class="p">).</span><span class="nf">get_entry</span><span class="p">(</span><span class="sh">"</span><span class="s">position</span><span class="sh">"</span><span class="p">).</span><span class="n">value</span>

</code></pre></div></div>

<h3 id="use-generated-struct-in-cpp">Use generated struct in Cpp</h3>
<p>The generated header file is named based on the target library name you passed as the first argument to the cmake function.
If you specified it to be <code class="language-plaintext highlighter-rouge">turtlesim_parameters</code> you can then include the generated code with <code class="language-plaintext highlighter-rouge">#include &lt;turtlesim/turtlesim_parameters.hpp&gt;</code>.</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;turtlesim/turtlesim_parameters.hpp&gt;</span><span class="cp">
</span>
</code></pre></div></div>

<p>Note that this header can also be used from another package:</p>

<div class="language-cmake highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cmake_minimum_required</span><span class="p">(</span>VERSION 3.8<span class="p">)</span>
<span class="nb">project</span><span class="p">(</span>my_other_package<span class="p">)</span>


<span class="nb">include</span><span class="p">(</span>GNUInstallDirs<span class="p">)</span>

<span class="c1"># find dependencies</span>
<span class="nb">find_package</span><span class="p">(</span>ament_cmake REQUIRED<span class="p">)</span>
<span class="nb">find_package</span><span class="p">(</span>turtelsim REQUIRED<span class="p">)</span>

<span class="nb">add_library</span><span class="p">(</span>my_lib src/my_lib.cpp<span class="p">)</span>
<span class="nb">target_include_directories</span><span class="p">(</span>my_lib PUBLIC
    $&lt;BUILD_INTERFACE:<span class="si">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="si">}</span>/include&gt;
    $&lt;INSTALL_INTERFACE:include&gt;<span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span>my_lib PUBLIC turtlesim::turtlesim_parameters<span class="p">)</span>

<span class="c1">#############</span>
<span class="c1">## Install ##</span>
<span class="c1">#############</span>

<span class="nb">install</span><span class="p">(</span>DIRECTORY include/<span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>/ DESTINATION <span class="si">${</span><span class="nv">CMAKE_INSTALL_INCLUDEDIR</span><span class="si">}</span>/<span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span><span class="p">)</span>

<span class="nb">install</span><span class="p">(</span>TARGETS my_lib
  EXPORT <span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>Targets
  ARCHIVE DESTINATION <span class="si">${</span><span class="nv">CMAKE_INSTALL_LIBDIR</span><span class="si">}</span>
  LIBRARY DESTINATION <span class="si">${</span><span class="nv">CMAKE_INSTALL_LIBDIR</span><span class="si">}</span>
  RUNTIME DESTINATION lib/<span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span><span class="p">)</span>

<span class="nf">ament_export_targets</span><span class="p">(</span><span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>Targets HAS_LIBRARY_TARGET<span class="p">)</span>
<span class="nf">ament_export_dependencies</span><span class="p">(</span>turtlesim<span class="p">)</span>
<span class="nf">ament_package</span><span class="p">()</span>

</code></pre></div></div>

<p>In your initialization code, create a <code class="language-plaintext highlighter-rouge">ParamListener</code> which will declare and get the parameters.
An exception will be thrown if any validation fails or any required parameters were not set.
Then call <code class="language-plaintext highlighter-rouge">get_params</code> on the listener to get a copy of the <code class="language-plaintext highlighter-rouge">Params</code> struct.</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">auto</span> <span class="n">param_listener</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">turtlesim</span><span class="o">::</span><span class="n">ParamListener</span><span class="o">&gt;</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
<span class="k">auto</span> <span class="n">params</span> <span class="o">=</span> <span class="n">param_listener</span><span class="o">-&gt;</span><span class="n">get_params</span><span class="p">();</span>

</code></pre></div></div>

<h3 id="dynamic-parameters">Dynamic Parameters</h3>
<p>If you are using dynamic parameters, you can use the following code to check if any of your parameters have changed and then get a new copy of the <code class="language-plaintext highlighter-rouge">Params</code> struct.</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="n">param_listener</span><span class="o">-&gt;</span><span class="n">is_old</span><span class="p">(</span><span class="n">params_</span><span class="p">))</span> <span class="p">{</span>
  <span class="n">params_</span> <span class="o">=</span> <span class="n">param_listener</span><span class="o">-&gt;</span><span class="n">get_params</span><span class="p">();</span>
<span class="p">}</span>

</code></pre></div></div>

<h3 id="parameter-documentation">Parameter documentation</h3>

<p>In some cases, parameters might be unknown only at compile-time, and cannot be part of the generated C++ code. However, for documentation purpose of such parameters, the type <code class="language-plaintext highlighter-rouge">none</code> was introduced.</p>

<p>Parameters with <code class="language-plaintext highlighter-rouge">none</code> type won’t generate any C++ code, but can exist to describe the expected name or namespace, that might be declared by an external piece of code and used in an override.</p>

<p>A typical use case is a controller, loading pluginlib-based filters, that themselves require (and declare) parameters in a known structure.</p>

<p>Example of declarative YAML</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">force_torque_broadcaster_controller</span><span class="pi">:</span>
  <span class="na">sensor_name</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Name</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">sensor</span><span class="nv"> </span><span class="s">used</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">prefix</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">interfaces</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">there</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">no</span><span class="nv"> </span><span class="s">individual</span><span class="nv"> </span><span class="s">interface</span><span class="nv"> </span><span class="s">names</span><span class="nv"> </span><span class="s">defined."</span>
  <span class="na">frame_id</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Sensor's</span><span class="nv"> </span><span class="s">frame_id</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">values</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">published."</span>
  <span class="na">sensor_filter_chain</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">none</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Map</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">parameters</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">defines</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">filter</span><span class="nv"> </span><span class="s">chain,</span><span class="nv"> </span><span class="s">containing</span><span class="nv"> </span><span class="s">filterN</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">key</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">underlying</span><span class="nv"> </span><span class="s">map</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">parameters</span><span class="nv"> </span><span class="s">needed</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">specific</span><span class="nv"> </span><span class="s">filter.</span><span class="nv"> </span><span class="s">See</span><span class="nv"> </span><span class="s">&lt;some</span><span class="nv"> </span><span class="s">docs&gt;</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">more</span><span class="nv"> </span><span class="s">details."</span>

</code></pre></div></div>

<p>Example of parameters for that controller</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">force_torque_broadcaster_controller</span><span class="pi">:</span>
  <span class="na">ros__parameters</span><span class="pi">:</span>
    <span class="na">sensor_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">fts_sensor"</span>
    <span class="na">frame_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">fts_sensor_frame"</span>
    <span class="na">sensor_filter_chain</span><span class="pi">:</span>
      <span class="na">filter1</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">control_filters/LowPassFilterWrench"</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">low_pass_filter"</span>
        <span class="na">params</span><span class="pi">:</span>
          <span class="na">sampling_frequency</span><span class="pi">:</span> <span class="m">200.0</span>
          <span class="na">damping_frequency</span><span class="pi">:</span> <span class="m">50.0</span>
          <span class="na">damping_intensity</span><span class="pi">:</span> <span class="m">1.0</span>

</code></pre></div></div>

<h3 id="example-project">Example Project</h3>
<p>See <a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/example/">cpp example</a> or <a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/example_python/">python example</a> for complete examples of how to use the generate_parameter_library.</p>

<h3 id="generated-code-output">Generated code output</h3>
<p>The generated code primarily consists of two major components:
1) <code class="language-plaintext highlighter-rouge">struct Params</code> that contains values of all parameters and
2) <code class="language-plaintext highlighter-rouge">class ParamListener</code> that handles parameter declaration, updating, and validation.
   The general structure is shown below.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">namespace</span> <span class="n">cpp_namespace</span> <span class="p">{</span>

<span class="k">struct</span> <span class="nc">Params</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">param_name</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
  <span class="k">struct</span> <span class="p">{</span>
    <span class="k">struct</span><span class="p">{</span>
      <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">param_name</span><span class="p">;</span>
      <span class="c1">// arbitrary nesting depth...</span>
    <span class="p">}</span> <span class="n">nest2</span><span class="p">;</span>
  <span class="p">}</span> <span class="n">nest1</span><span class="p">;</span>
  <span class="c1">// for detecting if the parameter struct has been updated</span>
  <span class="n">rclcpp</span><span class="o">::</span><span class="n">Time</span> <span class="n">__stamp</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">ParamListener</span> <span class="p">{</span>
 <span class="nl">public:</span>
  <span class="n">ParamListener</span><span class="p">(</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">ParameterInterface</span><span class="p">);</span>
  <span class="n">ParamListener</span><span class="p">(</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">::</span><span class="n">SharedPtr</span> <span class="n">node</span><span class="p">)</span>
    <span class="o">:</span> <span class="n">ParameterListener</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">get_parameters_interface</span><span class="p">())</span> <span class="p">{}</span>
  <span class="n">ParamListener</span><span class="p">(</span><span class="n">rclcpp_lifecycle</span><span class="o">::</span><span class="n">LifecycleNode</span><span class="o">::</span><span class="n">SharedPtr</span> <span class="n">node</span><span class="p">)</span>
    <span class="o">:</span> <span class="n">ParameterListener</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">get_parameters_interface</span><span class="p">())</span> <span class="p">{}</span>

  <span class="c1">// create a copy of current parameter values</span>
  <span class="n">Params</span> <span class="n">get_params</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

  <span class="c1">// returns true if parameters have been updated since last time get_params was called</span>
  <span class="kt">bool</span> <span class="n">is_old</span><span class="p">(</span><span class="n">Params</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>

  <span class="c1">// loop over all parameters: perform validation then update</span>
  <span class="n">rcl_interfaces</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">SetParametersResult</span> <span class="nf">update</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Parameter</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">parameters</span><span class="p">);</span>

  <span class="c1">// declare all parameters and throw an exception if a non-optional value is missing or validation fails</span>
  <span class="kt">void</span> <span class="nf">declare_params</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">node_interfaces</span><span class="o">::</span><span class="n">NodeParametersInterface</span><span class="o">&gt;&amp;</span> <span class="n">parameters_interface</span><span class="p">);</span>

 <span class="k">private</span><span class="o">:</span>
  <span class="n">Params</span> <span class="n">params_</span><span class="p">;</span>
<span class="p">};</span>

<span class="p">}</span> <span class="c1">// namespace cpp_namespace</span>

</code></pre></div></div>
<p>The structure of the <code class="language-plaintext highlighter-rouge">Params</code> struct and the logic for declaring and updating parameters is generated from a YAML file specification.</p>

<h3 id="generate-markdown-documentation">Generate markdown documentation</h3>

<p>Using generate_parameter_library you can generate a Markdown-file for your <code class="language-plaintext highlighter-rouge">parameters.yaml</code> file.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>generate_parameter_library_markdown --input_yaml example/src/parameters.yaml --output_markdown_file parameters.md

</code></pre></div></div>

<p>This will generate a file <code class="language-plaintext highlighter-rouge">parameters.md</code> in the current folder that contains a markdown
representation of the <code class="language-plaintext highlighter-rouge">parameters.yaml</code> file that you can directly include into your documentation.</p>

<h1 id="faq">FAQ</h1>

<p>Q. What happens if I declare a parameter twice? Will I get an error at runtime?
A. The declare routine that is generated checks to see if each parameter has been declared first before declaring it. Because of this you can declare a parameter twice but it will only have the properties of the first time you declared it. Here is some example generated code.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">parameters_interface_</span><span class="o">-&gt;</span><span class="n">has_parameter</span><span class="p">(</span><span class="n">prefix_</span> <span class="o">+</span> <span class="s">"scientific_notation_num"</span><span class="p">))</span> <span class="p">{</span>
    <span class="n">rcl_interfaces</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">ParameterDescriptor</span> <span class="n">descriptor</span><span class="p">;</span>
    <span class="n">descriptor</span><span class="p">.</span><span class="n">description</span> <span class="o">=</span> <span class="s">"Test scientific notation"</span><span class="p">;</span>
    <span class="n">descriptor</span><span class="p">.</span><span class="n">read_only</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="k">auto</span> <span class="n">parameter</span> <span class="o">=</span> <span class="n">to_parameter_value</span><span class="p">(</span><span class="n">updated_params</span><span class="p">.</span><span class="n">scientific_notation_num</span><span class="p">);</span>
    <span class="n">parameters_interface_</span><span class="o">-&gt;</span><span class="n">declare_parameter</span><span class="p">(</span><span class="n">prefix_</span> <span class="o">+</span> <span class="s">"scientific_notation_num"</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">descriptor</span><span class="p">);</span>
<span class="p">}</span>

</code></pre></div></div>

<p>Q: How do I log when parameters change?
A. The generated library outputs debug logs whenever a parameter is read from ROS.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the 3-Clause BSD License, as dictated by that
<a href="https://opensource.org/licenses/BSD-3-Clause">license</a>.</p>
</div>
              <hr id="rolling-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="rolling-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#rolling-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#rolling-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#rolling-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="rolling-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="rolling-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="rolling-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/generate_parameter_library">generate_parameter_library</a> <small>repository</small></h3>
        <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-PickNikRobotics-generate_parameter_library
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-PickNikRobotics-generate_parameter_library" role="menuitem" tabindex="-1" href="/r/generate_parameter_library/github-PickNikRobotics-generate_parameter_library" data="github-PickNikRobotics-generate_parameter_library">
                    <span class="glyphicon glyphicon-star"></span>
                    github-PickNikRobotics-generate_parameter_library
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>github</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/generate_parameter_library">generate_parameter_library</a> <small>repository</small></h3>
        <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-PickNikRobotics-generate_parameter_library
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-PickNikRobotics-generate_parameter_library" role="menuitem" tabindex="-1" href="/r/generate_parameter_library/github-PickNikRobotics-generate_parameter_library" data="github-PickNikRobotics-generate_parameter_library">
                    <span class="glyphicon glyphicon-star"></span>
                    github-PickNikRobotics-generate_parameter_library
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/generate_parameter_library">generate_parameter_library</a> <small>repository</small></h3>
        <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-PickNikRobotics-generate_parameter_library
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-PickNikRobotics-generate_parameter_library" role="menuitem" tabindex="-1" href="/r/generate_parameter_library/github-PickNikRobotics-generate_parameter_library" data="github-PickNikRobotics-generate_parameter_library">
                    <span class="glyphicon glyphicon-star"></span>
                    github-PickNikRobotics-generate_parameter_library
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/generate_parameter_library">generate_parameter_library</a> <small>repository</small></h3>
        <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_library_example">generate_parameter_library_example</a>
        
        <a class="label label-primary pkg-label" href="/p/cmake_generate_parameter_module_example">cmake_generate_parameter_module_example</a>
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_library_example_external">generate_parameter_library_example_external</a>
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_module_example">generate_parameter_module_example</a>
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_library">generate_parameter_library</a>
        
        <a class="label label-primary pkg-label" href="/p/generate_parameter_library_py">generate_parameter_library_py</a>
        
        <a class="label label-primary pkg-label" href="/p/parameter_traits">parameter_traits</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-PickNikRobotics-generate_parameter_library
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-PickNikRobotics-generate_parameter_library" role="menuitem" tabindex="-1" href="/r/generate_parameter_library/github-PickNikRobotics-generate_parameter_library" data="github-PickNikRobotics-generate_parameter_library">
                    <span class="glyphicon glyphicon-star"></span>
                    github-PickNikRobotics-generate_parameter_library
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Declarative ROS 2 Parameters</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/PickNikRobotics/generate_parameter_library.git">https://github.com/PickNikRobotics/generate_parameter_library.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-02-13
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/generate_parameter_library/#iron-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/generate_parameter_library/#iron-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/generate_parameter_library/#iron-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/generate_parameter_library_example">generate_parameter_library_example</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/cmake_generate_parameter_module_example">cmake_generate_parameter_module_example</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/generate_parameter_library_example_external">generate_parameter_library_example_external</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/generate_parameter_module_example">generate_parameter_module_example</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/generate_parameter_library">generate_parameter_library</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/generate_parameter_library_py">generate_parameter_library_py</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/parameter_traits">parameter_traits</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="generate_parameter_library">generate_parameter_library</h1>
<p>Generate C++ or Python code for ROS 2 parameter declaration, getting, and validation using declarative YAML.
The generated library contains a C++ struct with specified parameters.
Additionally, dynamic parameters and custom validation are made easy.</p>

<h2 id="killer-features">Killer Features</h2>
<ul>
  <li>Declarative YAML syntax for ROS 2 Parameters converted into C++ or Python struct</li>
  <li>Declaring, Getting, Validating, and Updating handled by generated code</li>
  <li>Dynamic ROS 2 Parameters made easy</li>
  <li>Custom user-specified validator functions</li>
  <li>Automatically create documentation of parameters</li>
</ul>

<h2 id="basic-usage">Basic Usage</h2>
<ol>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#create-yaml-parameter-codegen-file">Create YAML parameter codegen file</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#add-parameter-library-generation-to-project">Add parameter library generation to project</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#use-generated-struct-into-project-source-code">Use generated struct into project source code</a></li>
</ol>

<h3 id="create-yaml-parameter-codegen-file">Create yaml parameter codegen file</h3>
<p>Write a yaml file to declare your parameters and their attributes.</p>

<p><strong>src/turtlesim_parameters.yaml</strong></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">turtlesim</span><span class="pi">:</span>
  <span class="na">background</span><span class="pi">:</span>
    <span class="na">r</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">int</span>
      <span class="na">default_value</span><span class="pi">:</span> <span class="m">0</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Red</span><span class="nv"> </span><span class="s">color</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">background,</span><span class="nv"> </span><span class="s">8-bit"</span>
      <span class="na">validation</span><span class="pi">:</span>
        <span class="na">bounds&lt;&gt;</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0</span><span class="pi">,</span> <span class="nv">255</span><span class="pi">]</span>
    <span class="na">g</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">int</span>
      <span class="na">default_value</span><span class="pi">:</span> <span class="m">0</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Green</span><span class="nv"> </span><span class="s">color</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">background,</span><span class="nv"> </span><span class="s">8-bit"</span>
      <span class="na">validation</span><span class="pi">:</span>
        <span class="na">bounds&lt;&gt;</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0</span><span class="pi">,</span> <span class="nv">255</span><span class="pi">]</span>
    <span class="na">b</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">int</span>
      <span class="na">default_value</span><span class="pi">:</span> <span class="m">0</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Blue</span><span class="nv"> </span><span class="s">color</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">background,</span><span class="nv"> </span><span class="s">8-bit"</span>
      <span class="na">validation</span><span class="pi">:</span>
        <span class="na">bounds&lt;&gt;</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0</span><span class="pi">,</span> <span class="nv">255</span><span class="pi">]</span>

</code></pre></div></div>

<h3 id="add-parameter-library-generation-to-project">Add parameter library generation to project</h3>

<p><strong>package.xml</strong></p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;depend&gt;</span>generate_parameter_library<span class="nt">&lt;/depend&gt;</span>

</code></pre></div></div>

<p><strong>CMakeLists.txt</strong></p>

<div class="language-cmake highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">find_package</span><span class="p">(</span>generate_parameter_library REQUIRED<span class="p">)</span>

<span class="nf">generate_parameter_library</span><span class="p">(</span>
  turtlesim_parameters <span class="c1"># cmake target name for the parameter library</span>
  src/turtlesim_parameters.yaml <span class="c1"># path to input yaml file</span>
<span class="p">)</span>

<span class="nb">add_executable</span><span class="p">(</span>minimal_node src/turtlesim.cpp<span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span>minimal_node PRIVATE
  rclcpp::rclcpp
  turtlesim_parameters
<span class="p">)</span>

<span class="nb">install</span><span class="p">(</span>TARGETS minimal_node turtlesim_parameters
  EXPORT <span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>Targets<span class="p">)</span>
<span class="nf">ament_export_targets</span><span class="p">(</span><span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>Targets HAS_LIBRARY_TARGET<span class="p">)</span>

</code></pre></div></div>

<p><strong>setup.py</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">generate_parameter_library_py.setup_helper</span> <span class="kn">import</span> <span class="n">generate_parameter_module</span>

<span class="nf">generate_parameter_module</span><span class="p">(</span>
  <span class="sh">"</span><span class="s">turtlesim_parameters</span><span class="sh">"</span><span class="p">,</span> <span class="c1"># python module name for parameter library
</span>  <span class="sh">"</span><span class="s">turtlesim/turtlesim_parameters.yaml</span><span class="sh">"</span><span class="p">,</span> <span class="c1"># path to input yaml file
</span><span class="p">)</span>

</code></pre></div></div>

<h3 id="use-generated-struct-in-project-source-code">Use generated struct in project source code</h3>

<p><strong>src/turtlesim.cpp</strong></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;rclcpp/rclcpp.hpp&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;turtlesim/turtlesim_parameters.hpp&gt;</span><span class="c1">  // you can also use the deprecated #include "turtlesim_parameters.hpp"</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
  <span class="n">rclcpp</span><span class="o">::</span><span class="n">init</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>
  <span class="k">auto</span> <span class="n">node</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"turtlesim"</span><span class="p">);</span>
  <span class="k">auto</span> <span class="n">param_listener</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">turtlesim</span><span class="o">::</span><span class="n">ParamListener</span><span class="o">&gt;</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
  <span class="k">auto</span> <span class="n">params</span> <span class="o">=</span> <span class="n">param_listener</span><span class="o">-&gt;</span><span class="n">get_params</span><span class="p">();</span>

  <span class="k">auto</span> <span class="n">color</span> <span class="o">=</span> <span class="n">params</span><span class="p">.</span><span class="n">background</span><span class="p">;</span>
  <span class="n">RCLCPP_INFO</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">get_logger</span><span class="p">(),</span>
    <span class="s">"Background color (r,g,b): %d, %d, %d"</span><span class="p">,</span>
    <span class="n">color</span><span class="p">.</span><span class="n">r</span><span class="p">,</span> <span class="n">color</span><span class="p">.</span><span class="n">g</span><span class="p">,</span> <span class="n">color</span><span class="p">.</span><span class="n">b</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div></div>

<p><strong>turtlesim/turtlesim.py</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">rclpy</span>
<span class="kn">from</span> <span class="n">rclpy.node</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="kn">from</span> <span class="n">turtlesim_pkg.turtlesim_parameters</span> <span class="kn">import</span> <span class="n">turtlesim_parameters</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
  <span class="n">rclpy</span><span class="p">.</span><span class="nf">init</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">)</span>
  <span class="n">node</span> <span class="o">=</span> <span class="nc">Node</span><span class="p">(</span><span class="sh">"</span><span class="s">turtlesim</span><span class="sh">"</span><span class="p">)</span>
  <span class="n">param_listener</span> <span class="o">=</span> <span class="n">turtlesim_parameters</span><span class="p">.</span><span class="nc">ParamListener</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
  <span class="n">params</span> <span class="o">=</span> <span class="n">param_listener</span><span class="p">.</span><span class="nf">get_params</span><span class="p">()</span>

  <span class="n">color</span> <span class="o">=</span> <span class="n">params</span><span class="p">.</span><span class="n">background</span>
  <span class="n">node</span><span class="p">.</span><span class="nf">get_logger</span><span class="p">().</span><span class="nf">info</span><span class="p">(</span>
    <span class="sh">"</span><span class="s">Background color (r,g,b): %d, %d, %d</span><span class="sh">"</span> <span class="o">%</span>
    <span class="n">color</span><span class="p">.</span><span class="n">r</span><span class="p">,</span> <span class="n">color</span><span class="p">.</span><span class="n">g</span><span class="p">,</span> <span class="n">color</span><span class="p">.</span><span class="n">b</span><span class="p">)</span>

</code></pre></div></div>

<h3 id="use-example-yaml-files-in-tests">Use example yaml files in tests</h3>
<p>When using parameter library generation it can happen that there are issues when executing tests since parameters are not defined and the library defines them as mandatory.
To overcome this it is recommended to define example yaml files for tests and use them as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find_package(ament_cmake_gtest REQUIRED)
add_rostest_with_parameters_gtest(test_turtlesim_parameters test/test_turtlesim_parameters.cpp
  ${CMAKE_CURRENT_SOURCE_DIR}/test/example_turtlesim_parameters.yaml)
target_include_directories(test_turtlesim_parameters PRIVATE include)
target_link_libraries(test_turtlesim_parameters turtlesim_parameters)
ament_target_dependencies(test_turtlesim_parameters rclcpp)

</code></pre></div></div>

<p>when using <code class="language-plaintext highlighter-rouge">gtest</code>, or:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find_package(ament_cmake_gmock REQUIRED)
add_rostest_with_parameters_gmock(test_turtlesim_parameters test/test_turtlesim_parameters.cpp
  ${CMAKE_CURRENT_SOURCE_DIR}/test/example_turtlesim_parameters.yaml)
target_include_directories(test_turtlesim_parameters PRIVATE include)
target_link_libraries(test_turtlesim_parameters turtlesim_parameters)
ament_target_dependencies(test_turtlesim_parameters rclcpp)

</code></pre></div></div>
<p>when using <code class="language-plaintext highlighter-rouge">gmock</code> test library.</p>

<p>🤖 P.S. having this example yaml files will make your users very grateful because they will always have a working example of a configuration for your node.</p>

<h2 id="detailed-documentation">Detailed Documentation</h2>
<ul>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#cpp-namespace">Cpp namespace</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#parameter-definition">Parameter definition</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#built-in-validators">Built-In Validators</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#custom-validator-functions">Custom validator functions</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#nested-structures">Nested structures</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#use-generated-struct-in-cpp">Use generated struct in Cpp</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#dynamic-parameters">Dynamic Parameters</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#example-project">Example Project</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#generated-code-output">Generated code output</a></li>
  <li><a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#generate-markdown-documentation">Generate markdown documentation</a></li>
</ul>

<h3 id="cpp-namespace">Cpp namespace</h3>
<p>The root element of the YAML file determines the namespace used in the generated C++ code.
We use this to put the <code class="language-plaintext highlighter-rouge">Params</code> struct in the same namespace as your C++ code.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cpp_namespace</span><span class="pi">:</span>
<span class="c1"># additionally fields  ...</span>

</code></pre></div></div>

<h3 id="parameter-definition">Parameter definition</h3>
<p>The YAML syntax can be thought of as a tree since it allows for arbitrary nesting of key-value pairs.
For clarity, the last non-nested value is referred to as a leaf.
A leaf represents a single parameter and has the following format.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cpp_namespace</span><span class="pi">:</span>
  <span class="na">param_name</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">int</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="m">3</span>
    <span class="na">read_only</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">additional_constraints</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{</span><span class="nv"> </span><span class="s">type:</span><span class="nv"> </span><span class="s">'number',</span><span class="nv"> </span><span class="s">multipleOf:</span><span class="nv"> </span><span class="s">3</span><span class="nv"> </span><span class="s">}"</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">A</span><span class="nv"> </span><span class="s">read-only</span><span class="nv">  </span><span class="s">integer</span><span class="nv"> </span><span class="s">parameter</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">default</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">3"</span>
    <span class="na">validation</span><span class="pi">:</span>
      <span class="c1"># validation functions ...</span>

</code></pre></div></div>

<p>A parameter is a YAML dictionary with the only required key being <code class="language-plaintext highlighter-rouge">type</code>.</p>

<table>
  <thead>
    <tr>
      <th>Field</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>type</td>
      <td>The type (string, double, etc) of the parameter.</td>
    </tr>
    <tr>
      <td>default_value</td>
      <td>Value for the parameter if the user does not specify a value.</td>
    </tr>
    <tr>
      <td>read_only</td>
      <td>Can only be set at launch and are not dynamic.</td>
    </tr>
    <tr>
      <td>description</td>
      <td>Displayed by <code class="language-plaintext highlighter-rouge">ros2 param describe</code>.</td>
    </tr>
    <tr>
      <td>validation</td>
      <td>Dictionary of validation functions and their parameters.</td>
    </tr>
    <tr>
      <td>additional_constraints</td>
      <td>Additional constraints that end up on the ParameterDescriptor but are not used for validation by this package.</td>
    </tr>
  </tbody>
</table>

<p>The types of parameters in ros2 map to C++ types.</p>

<table>
  <thead>
    <tr>
      <th>Parameter Type</th>
      <th>C++ Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>string</td>
      <td><code class="language-plaintext highlighter-rouge">std::string</code></td>
    </tr>
    <tr>
      <td>double</td>
      <td><code class="language-plaintext highlighter-rouge">double</code></td>
    </tr>
    <tr>
      <td>int</td>
      <td><code class="language-plaintext highlighter-rouge">int</code></td>
    </tr>
    <tr>
      <td>bool</td>
      <td><code class="language-plaintext highlighter-rouge">bool</code></td>
    </tr>
    <tr>
      <td>string_array</td>
      <td><code class="language-plaintext highlighter-rouge">std::vector&lt;std::string&gt;</code></td>
    </tr>
    <tr>
      <td>double_array</td>
      <td><code class="language-plaintext highlighter-rouge">std::vector&lt;double&gt;</code></td>
    </tr>
    <tr>
      <td>int_array</td>
      <td><code class="language-plaintext highlighter-rouge">std::vector&lt;int&gt;</code></td>
    </tr>
    <tr>
      <td>bool_array</td>
      <td><code class="language-plaintext highlighter-rouge">std::vector&lt;bool&gt;</code></td>
    </tr>
    <tr>
      <td>string_fixed_XX</td>
      <td><code class="language-plaintext highlighter-rouge">FixedSizeString&lt;XX&gt;</code></td>
    </tr>
    <tr>
      <td>none</td>
      <td>NO CODE GENERATED</td>
    </tr>
  </tbody>
</table>

<p>Fixed-size types are denoted with a suffix <code class="language-plaintext highlighter-rouge">_fixed_XX</code>, where <code class="language-plaintext highlighter-rouge">XX</code> is the desired size.
The corresponding C++ type is a data wrapper class for conveniently accessing the data.
Note that any fixed size type will automatically use a <code class="language-plaintext highlighter-rouge">size_lt</code> validator. Validators are explained in the next section.</p>

<p>The purpose of the <code class="language-plaintext highlighter-rouge">none</code> type is purely documentation, and won’t generate any C++ code. See <a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/#parameter-documentation">Parameter documentation</a> for details.</p>

<h3 id="built-in-validators">Built-In Validators</h3>
<p>Validators are C++ functions that take arguments represented by a key-value pair in yaml.
The key is the name of the function.
The value is an array of values that are passed in as parameters to the function.
If the function does not take any values you write <code class="language-plaintext highlighter-rouge">null</code> or <code class="language-plaintext highlighter-rouge">[]</code> to for the value.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">joint_trajectory_controller</span><span class="pi">:</span>
  <span class="na">command_interfaces</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string_array</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Names</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">command</span><span class="nv"> </span><span class="s">interfaces</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">claim"</span>
    <span class="na">validation</span><span class="pi">:</span>
      <span class="na">size_gt&lt;&gt;</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0</span><span class="pi">]</span>
      <span class="na">unique&lt;&gt;</span><span class="pi">:</span> <span class="kc">null</span>
      <span class="na">subset_of&lt;&gt;</span><span class="pi">:</span> <span class="pi">[[</span><span class="s2">"</span><span class="s">position"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">velocity"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">acceleration"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">effort"</span><span class="pi">,]]</span>

</code></pre></div></div>

<p>Above are validations for <code class="language-plaintext highlighter-rouge">command_interfaces</code> from <code class="language-plaintext highlighter-rouge">ros2_controllers</code>.
This will require this string_array to have these properties:</p>

<ul>
  <li>There is at least one value in the array</li>
  <li>All values are unique</li>
  <li>Values are only in the set <code class="language-plaintext highlighter-rouge">["position", "velocity", "acceleration", "effort",]</code>
</li>
</ul>

<p>You will note that some validators have a suffix of <code class="language-plaintext highlighter-rouge">&lt;&gt;</code>, this tells the code generator to pass the C++ type of the parameter as a function template.
Some of these validators work only on value types, some on string types, and others on array types.
The built-in validator functions provided by this package are:</p>

<p><strong>Value validators</strong>
| Function | Arguments           | Description                          |
| ——– | ——————- | ———————————— |
| bounds&lt;&gt; | [lower, upper]      | Bounds checking (inclusive)          |
| lt&lt;&gt;     | [value]             | parameter &lt; value                    |
| gt&lt;&gt;     | [value]             | parameter &gt; value                    |
| lt_eq&lt;&gt;  | [value]             | parameter &lt;= value                   |
| gt_eq&lt;&gt;  | [value]             | parameter &gt;= value                   |
| one_of&lt;&gt; | [[val1, val2, …]] | Value is one of the specified values |</p>

<p><strong>String validators</strong>
| Function     | Arguments           | Description                                    |
| ———— | ——————- | ———————————————- |
| fixed_size&lt;&gt; | [length]            | Length string is specified length              |
| size_gt&lt;&gt;    | [length]            | Length string is greater than specified length |
| size_lt&lt;&gt;    | [length]            | Length string is less less specified length    |
| not_empty&lt;&gt;  | []                  | String parameter is not empty                  |
| one_of&lt;&gt;     | [[val1, val2, …]] | String is one of the specified values          |</p>

<p><strong>Array validators</strong>
| Function               | Arguments           | Description                                         |
| ———————- | ——————- | ————————————————— |
| unique&lt;&gt;               | []                  | Contains no duplicates                              |
| subset_of&lt;&gt;            | [[val1, val2, …]] | Every element is one of the list                    |
| fixed_size&lt;&gt;           | [length]            | Number of elements is specified length              |
| size_gt&lt;&gt;              | [length]            | Number of elements is greater than specified length |
| size_lt&lt;&gt;              | [length]            | Number of elements is less less specified length    |
| not_empty&lt;&gt;            | []                  | Has at-least one element                            |
| element_bounds&lt;&gt;       | [lower, upper]      | Bounds checking each element (inclusive)            |
| lower_element_bounds&lt;&gt; | [lower]             | Lower bound for each element (inclusive)            |
| upper_element_bounds&lt;&gt; | [upper]             | Upper bound for each element (inclusive)            |</p>

<h3 id="custom-validator-functions">Custom validator functions</h3>
<p>Validators are functions that return a <code class="language-plaintext highlighter-rouge">tl::expected&lt;void, std::string&gt;</code> type and accept a <code class="language-plaintext highlighter-rouge">rclcpp::Parameter const&amp;</code> as their first argument and any number of arguments after that can be specified in YAML.
Validators are C++ functions defined in a header file similar to the example shown below.</p>

<p>Here is an example custom validator.</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;rclcpp/rclcpp.hpp&gt;</span><span class="cp">
</span>
<span class="cp">#include</span> <span class="cpf">&lt;fmt/core.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;tl_expected/expected.hpp&gt;</span><span class="cp">
</span>
<span class="k">namespace</span> <span class="n">my_project</span> <span class="p">{</span>

<span class="n">tl</span><span class="o">::</span><span class="n">expected</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">integer_equal_value</span><span class="p">(</span>
    <span class="n">rclcpp</span><span class="o">::</span><span class="n">Parameter</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">parameter</span><span class="p">,</span> <span class="kt">int</span> <span class="n">expected_value</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">param_value</span> <span class="o">=</span> <span class="n">parameter</span><span class="p">.</span><span class="n">as_int</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">param_value</span> <span class="o">!=</span> <span class="n">expected_value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">tl</span><span class="o">::</span><span class="n">make_unexpected</span><span class="p">(</span><span class="n">fmt</span><span class="o">::</span><span class="n">format</span><span class="p">(</span>
            <span class="s">"Invalid value {} for parameter {}. Expected {}"</span>
            <span class="n">param_value</span><span class="p">,</span> <span class="n">parameter</span><span class="p">.</span><span class="n">get_name</span><span class="p">(),</span> <span class="n">expected_value</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">{};</span>
<span class="p">}</span>

<span class="p">}</span>  <span class="c1">// namespace my_project</span>

</code></pre></div></div>
<p>To configure a parameter to be validated with the custom validator function <code class="language-plaintext highlighter-rouge">integer_equal_value</code> with an <code class="language-plaintext highlighter-rouge">expected_value</code> of <code class="language-plaintext highlighter-rouge">3</code> you could would this to the YAML.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">validation</span><span class="pi">:</span>
  <span class="s2">"</span><span class="s">my_project::integer_equal_value"</span><span class="err">:</span> <span class="pi">[</span><span class="nv">3</span><span class="pi">]</span>

</code></pre></div></div>

<h3 id="nested-structures">Nested structures</h3>
<p>After the top-level key, every subsequent non-leaf key will generate a nested C++ struct. The struct instance will have
the same name as the key.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cpp_name_space</span><span class="pi">:</span>
  <span class="na">nest1</span><span class="pi">:</span>
    <span class="na">nest2</span><span class="pi">:</span>
      <span class="na">param_name</span><span class="pi">:</span> <span class="c1"># this is a leaf</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string_array</span>

</code></pre></div></div>

<p>The generated parameter value can then be accessed with <code class="language-plaintext highlighter-rouge">params.nest1.nest2.param_name</code></p>

<h3 id="mapped-parameters">Mapped parameters</h3>
<p>You can use parameter maps, where a map with keys from another <code class="language-plaintext highlighter-rouge">string_array</code> parameter is created. Add the <code class="language-plaintext highlighter-rouge">__map_</code> prefix followed by the key parameter name as follows:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cpp_name_space</span><span class="pi">:</span>
  <span class="na">joints</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string_array</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">joint1"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">joint2"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">joint3"</span><span class="pi">]</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">specifies</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">joints</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">used</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">controller"</span>
  <span class="na">interfaces</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string_array</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">position"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">velocity"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">acceleration"</span><span class="pi">]</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">interfaces</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">used</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">controller"</span>
  <span class="c1"># nested mapped example</span>
  <span class="na">gain</span><span class="pi">:</span>
    <span class="na">__map_joints</span><span class="pi">:</span> <span class="c1"># create a map with joints as keys</span>
      <span class="na">__map_interfaces</span><span class="pi">:</span>  <span class="c1"># create a map with interfaces as keys</span>
        <span class="na">value</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">double</span>
  <span class="c1"># simple mapped example</span>
  <span class="na">pid</span><span class="pi">:</span>
    <span class="na">__map_joints</span><span class="pi">:</span> <span class="c1"># create a map with joints as keys</span>
      <span class="na">values</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">double_array</span>

</code></pre></div></div>

<p>The generated parameter value for the nested map example can then be accessed with:</p>

<p><strong>C++</strong></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">params</span><span class="p">.</span><span class="n">gain</span><span class="p">.</span><span class="n">joints_map</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="s">"joint1"</span><span class="p">).</span><span class="n">interfaces_map</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="s">"position"</span><span class="p">).</span><span class="n">value</span>

</code></pre></div></div>

<p><strong>Python</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">params</span><span class="p">.</span><span class="n">gain</span><span class="p">.</span><span class="nf">get_entry</span><span class="p">(</span><span class="sh">"</span><span class="s">joint1</span><span class="sh">"</span><span class="p">).</span><span class="nf">get_entry</span><span class="p">(</span><span class="sh">"</span><span class="s">position</span><span class="sh">"</span><span class="p">).</span><span class="n">value</span>

</code></pre></div></div>

<h3 id="use-generated-struct-in-cpp">Use generated struct in Cpp</h3>
<p>The generated header file is named based on the target library name you passed as the first argument to the cmake function.
If you specified it to be <code class="language-plaintext highlighter-rouge">turtlesim_parameters</code> you can then include the generated code with <code class="language-plaintext highlighter-rouge">#include &lt;turtlesim/turtlesim_parameters.hpp&gt;</code>.</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;turtlesim/turtlesim_parameters.hpp&gt;</span><span class="cp">
</span>
</code></pre></div></div>

<p>Note that this header can also be used from another package:</p>

<div class="language-cmake highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cmake_minimum_required</span><span class="p">(</span>VERSION 3.8<span class="p">)</span>
<span class="nb">project</span><span class="p">(</span>my_other_package<span class="p">)</span>


<span class="nb">include</span><span class="p">(</span>GNUInstallDirs<span class="p">)</span>

<span class="c1"># find dependencies</span>
<span class="nb">find_package</span><span class="p">(</span>ament_cmake REQUIRED<span class="p">)</span>
<span class="nb">find_package</span><span class="p">(</span>turtelsim REQUIRED<span class="p">)</span>

<span class="nb">add_library</span><span class="p">(</span>my_lib src/my_lib.cpp<span class="p">)</span>
<span class="nb">target_include_directories</span><span class="p">(</span>my_lib PUBLIC
    $&lt;BUILD_INTERFACE:<span class="si">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="si">}</span>/include&gt;
    $&lt;INSTALL_INTERFACE:include&gt;<span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span>my_lib PUBLIC turtlesim::turtlesim_parameters<span class="p">)</span>

<span class="c1">#############</span>
<span class="c1">## Install ##</span>
<span class="c1">#############</span>

<span class="nb">install</span><span class="p">(</span>DIRECTORY include/<span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>/ DESTINATION <span class="si">${</span><span class="nv">CMAKE_INSTALL_INCLUDEDIR</span><span class="si">}</span>/<span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span><span class="p">)</span>

<span class="nb">install</span><span class="p">(</span>TARGETS my_lib
  EXPORT <span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>Targets
  ARCHIVE DESTINATION <span class="si">${</span><span class="nv">CMAKE_INSTALL_LIBDIR</span><span class="si">}</span>
  LIBRARY DESTINATION <span class="si">${</span><span class="nv">CMAKE_INSTALL_LIBDIR</span><span class="si">}</span>
  RUNTIME DESTINATION lib/<span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span><span class="p">)</span>

<span class="nf">ament_export_targets</span><span class="p">(</span><span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>Targets HAS_LIBRARY_TARGET<span class="p">)</span>
<span class="nf">ament_export_dependencies</span><span class="p">(</span>turtlesim<span class="p">)</span>
<span class="nf">ament_package</span><span class="p">()</span>

</code></pre></div></div>

<p>In your initialization code, create a <code class="language-plaintext highlighter-rouge">ParamListener</code> which will declare and get the parameters.
An exception will be thrown if any validation fails or any required parameters were not set.
Then call <code class="language-plaintext highlighter-rouge">get_params</code> on the listener to get a copy of the <code class="language-plaintext highlighter-rouge">Params</code> struct.</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">auto</span> <span class="n">param_listener</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">turtlesim</span><span class="o">::</span><span class="n">ParamListener</span><span class="o">&gt;</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
<span class="k">auto</span> <span class="n">params</span> <span class="o">=</span> <span class="n">param_listener</span><span class="o">-&gt;</span><span class="n">get_params</span><span class="p">();</span>

</code></pre></div></div>

<h3 id="dynamic-parameters">Dynamic Parameters</h3>
<p>If you are using dynamic parameters, you can use the following code to check if any of your parameters have changed and then get a new copy of the <code class="language-plaintext highlighter-rouge">Params</code> struct.</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="n">param_listener</span><span class="o">-&gt;</span><span class="n">is_old</span><span class="p">(</span><span class="n">params_</span><span class="p">))</span> <span class="p">{</span>
  <span class="n">params_</span> <span class="o">=</span> <span class="n">param_listener</span><span class="o">-&gt;</span><span class="n">get_params</span><span class="p">();</span>
<span class="p">}</span>

</code></pre></div></div>

<h3 id="parameter-documentation">Parameter documentation</h3>

<p>In some cases, parameters might be unknown only at compile-time, and cannot be part of the generated C++ code. However, for documentation purpose of such parameters, the type <code class="language-plaintext highlighter-rouge">none</code> was introduced.</p>

<p>Parameters with <code class="language-plaintext highlighter-rouge">none</code> type won’t generate any C++ code, but can exist to describe the expected name or namespace, that might be declared by an external piece of code and used in an override.</p>

<p>A typical use case is a controller, loading pluginlib-based filters, that themselves require (and declare) parameters in a known structure.</p>

<p>Example of declarative YAML</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">force_torque_broadcaster_controller</span><span class="pi">:</span>
  <span class="na">sensor_name</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Name</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">sensor</span><span class="nv"> </span><span class="s">used</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">prefix</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">interfaces</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">there</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">no</span><span class="nv"> </span><span class="s">individual</span><span class="nv"> </span><span class="s">interface</span><span class="nv"> </span><span class="s">names</span><span class="nv"> </span><span class="s">defined."</span>
  <span class="na">frame_id</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
    <span class="na">default_value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Sensor's</span><span class="nv"> </span><span class="s">frame_id</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">values</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">published."</span>
  <span class="na">sensor_filter_chain</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">none</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Map</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">parameters</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">defines</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">filter</span><span class="nv"> </span><span class="s">chain,</span><span class="nv"> </span><span class="s">containing</span><span class="nv"> </span><span class="s">filterN</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">key</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">underlying</span><span class="nv"> </span><span class="s">map</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">parameters</span><span class="nv"> </span><span class="s">needed</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">specific</span><span class="nv"> </span><span class="s">filter.</span><span class="nv"> </span><span class="s">See</span><span class="nv"> </span><span class="s">&lt;some</span><span class="nv"> </span><span class="s">docs&gt;</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">more</span><span class="nv"> </span><span class="s">details."</span>

</code></pre></div></div>

<p>Example of parameters for that controller</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">force_torque_broadcaster_controller</span><span class="pi">:</span>
  <span class="na">ros__parameters</span><span class="pi">:</span>
    <span class="na">sensor_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">fts_sensor"</span>
    <span class="na">frame_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">fts_sensor_frame"</span>
    <span class="na">sensor_filter_chain</span><span class="pi">:</span>
      <span class="na">filter1</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">control_filters/LowPassFilterWrench"</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">low_pass_filter"</span>
        <span class="na">params</span><span class="pi">:</span>
          <span class="na">sampling_frequency</span><span class="pi">:</span> <span class="m">200.0</span>
          <span class="na">damping_frequency</span><span class="pi">:</span> <span class="m">50.0</span>
          <span class="na">damping_intensity</span><span class="pi">:</span> <span class="m">1.0</span>

</code></pre></div></div>

<h3 id="example-project">Example Project</h3>
<p>See <a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/example/">cpp example</a> or <a href="https://github.com/PickNikRobotics/generate_parameter_library/tree/main/example_python/">python example</a> for complete examples of how to use the generate_parameter_library.</p>

<h3 id="generated-code-output">Generated code output</h3>
<p>The generated code primarily consists of two major components:
1) <code class="language-plaintext highlighter-rouge">struct Params</code> that contains values of all parameters and
2) <code class="language-plaintext highlighter-rouge">class ParamListener</code> that handles parameter declaration, updating, and validation.
   The general structure is shown below.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">namespace</span> <span class="n">cpp_namespace</span> <span class="p">{</span>

<span class="k">struct</span> <span class="nc">Params</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">param_name</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
  <span class="k">struct</span> <span class="p">{</span>
    <span class="k">struct</span><span class="p">{</span>
      <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">param_name</span><span class="p">;</span>
      <span class="c1">// arbitrary nesting depth...</span>
    <span class="p">}</span> <span class="n">nest2</span><span class="p">;</span>
  <span class="p">}</span> <span class="n">nest1</span><span class="p">;</span>
  <span class="c1">// for detecting if the parameter struct has been updated</span>
  <span class="n">rclcpp</span><span class="o">::</span><span class="n">Time</span> <span class="n">__stamp</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">ParamListener</span> <span class="p">{</span>
 <span class="nl">public:</span>
  <span class="n">ParamListener</span><span class="p">(</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">ParameterInterface</span><span class="p">);</span>
  <span class="n">ParamListener</span><span class="p">(</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">::</span><span class="n">SharedPtr</span> <span class="n">node</span><span class="p">)</span>
    <span class="o">:</span> <span class="n">ParameterListener</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">get_parameters_interface</span><span class="p">())</span> <span class="p">{}</span>
  <span class="n">ParamListener</span><span class="p">(</span><span class="n">rclcpp_lifecycle</span><span class="o">::</span><span class="n">LifecycleNode</span><span class="o">::</span><span class="n">SharedPtr</span> <span class="n">node</span><span class="p">)</span>
    <span class="o">:</span> <span class="n">ParameterListener</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">get_parameters_interface</span><span class="p">())</span> <span class="p">{}</span>

  <span class="c1">// create a copy of current parameter values</span>
  <span class="n">Params</span> <span class="n">get_params</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

  <span class="c1">// returns true if parameters have been updated since last time get_params was called</span>
  <span class="kt">bool</span> <span class="n">is_old</span><span class="p">(</span><span class="n">Params</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>

  <span class="c1">// loop over all parameters: perform validation then update</span>
  <span class="n">rcl_interfaces</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">SetParametersResult</span> <span class="nf">update</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Parameter</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">parameters</span><span class="p">);</span>

  <span class="c1">// declare all parameters and throw an exception if a non-optional value is missing or validation fails</span>
  <span class="kt">void</span> <span class="nf">declare_params</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">node_interfaces</span><span class="o">::</span><span class="n">NodeParametersInterface</span><span class="o">&gt;&amp;</span> <span class="n">parameters_interface</span><span class="p">);</span>

 <span class="k">private</span><span class="o">:</span>
  <span class="n">Params</span> <span class="n">params_</span><span class="p">;</span>
<span class="p">};</span>

<span class="p">}</span> <span class="c1">// namespace cpp_namespace</span>

</code></pre></div></div>
<p>The structure of the <code class="language-plaintext highlighter-rouge">Params</code> struct and the logic for declaring and updating parameters is generated from a YAML file specification.</p>

<h3 id="generate-markdown-documentation">Generate markdown documentation</h3>

<p>Using generate_parameter_library you can generate a Markdown-file for your <code class="language-plaintext highlighter-rouge">parameters.yaml</code> file.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>generate_parameter_library_markdown --input_yaml example/src/parameters.yaml --output_markdown_file parameters.md

</code></pre></div></div>

<p>This will generate a file <code class="language-plaintext highlighter-rouge">parameters.md</code> in the current folder that contains a markdown
representation of the <code class="language-plaintext highlighter-rouge">parameters.yaml</code> file that you can directly include into your documentation.</p>

<h1 id="faq">FAQ</h1>

<p>Q. What happens if I declare a parameter twice? Will I get an error at runtime?
A. The declare routine that is generated checks to see if each parameter has been declared first before declaring it. Because of this you can declare a parameter twice but it will only have the properties of the first time you declared it. Here is some example generated code.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">parameters_interface_</span><span class="o">-&gt;</span><span class="n">has_parameter</span><span class="p">(</span><span class="n">prefix_</span> <span class="o">+</span> <span class="s">"scientific_notation_num"</span><span class="p">))</span> <span class="p">{</span>
    <span class="n">rcl_interfaces</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">ParameterDescriptor</span> <span class="n">descriptor</span><span class="p">;</span>
    <span class="n">descriptor</span><span class="p">.</span><span class="n">description</span> <span class="o">=</span> <span class="s">"Test scientific notation"</span><span class="p">;</span>
    <span class="n">descriptor</span><span class="p">.</span><span class="n">read_only</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="k">auto</span> <span class="n">parameter</span> <span class="o">=</span> <span class="n">to_parameter_value</span><span class="p">(</span><span class="n">updated_params</span><span class="p">.</span><span class="n">scientific_notation_num</span><span class="p">);</span>
    <span class="n">parameters_interface_</span><span class="o">-&gt;</span><span class="n">declare_parameter</span><span class="p">(</span><span class="n">prefix_</span> <span class="o">+</span> <span class="s">"scientific_notation_num"</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">descriptor</span><span class="p">);</span>
<span class="p">}</span>

</code></pre></div></div>

<p>Q: How do I log when parameters change?
A. The generated library outputs debug logs whenever a parameter is read from ROS.</p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>Any contribution that you make to this repository will
be under the 3-Clause BSD License, as dictated by that
<a href="https://opensource.org/licenses/BSD-3-Clause">license</a>.</p>
</div>
              <hr id="iron-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="iron-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#iron-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#iron-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#iron-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="iron-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="iron-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="iron-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/generate_parameter_library">generate_parameter_library</a> <small>repository</small></h3>
        <span class="label label-default">ros</span> <span class="label label-default">ros2</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-PickNikRobotics-generate_parameter_library
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-PickNikRobotics-generate_parameter_library" role="menuitem" tabindex="-1" href="/r/generate_parameter_library/github-PickNikRobotics-generate_parameter_library" data="github-PickNikRobotics-generate_parameter_library">
                    <span class="glyphicon glyphicon-star"></span>
                    github-PickNikRobotics-generate_parameter_library
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/PickNikRobotics/generate_parameter_library.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
