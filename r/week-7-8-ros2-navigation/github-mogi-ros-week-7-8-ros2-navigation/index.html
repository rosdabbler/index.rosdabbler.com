<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/week-7-8-ros2-navigation/github-mogi-ros-week-7-8-ros2-navigation/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">week-7-8-ros2-navigation</li>
        <!--<li class="active">week-7-8-ros2-navigation</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-default" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-default" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-default" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-default" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-primary" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class="disabled older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/week-7-8-ros2-navigation">week-7-8-ros2-navigation</a> <small>repository</small></h3>
        <span class="label label-default">localization</span> <span class="label label-default">navigation</span> <span class="label label-default">exploration</span> <span class="label label-default">gazebo</span> <span class="label label-default">slam</span> <span class="label label-default">harmonic</span> <span class="label label-default">amcl</span> <span class="label label-default">ros2</span> <span class="label label-default">mppi</span> <span class="label label-default">gazebosim</span> <span class="label label-default">slam-toolbox</span> <span class="label label-default">nav2</span> <span class="label label-default">ros2-jazzy</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mogi-ros-week-7-8-ros2-navigation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mogi-ros-week-7-8-ros2-navigation" role="menuitem" tabindex="-1" href="/r/week-7-8-ros2-navigation/github-mogi-ros-week-7-8-ros2-navigation" data="github-mogi-ros-week-7-8-ros2-navigation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mogi-ros-week-7-8-ros2-navigation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>humble</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/week-7-8-ros2-navigation">week-7-8-ros2-navigation</a> <small>repository</small></h3>
        <span class="label label-default">localization</span> <span class="label label-default">navigation</span> <span class="label label-default">exploration</span> <span class="label label-default">gazebo</span> <span class="label label-default">slam</span> <span class="label label-default">harmonic</span> <span class="label label-default">amcl</span> <span class="label label-default">ros2</span> <span class="label label-default">mppi</span> <span class="label label-default">gazebosim</span> <span class="label label-default">slam-toolbox</span> <span class="label label-default">nav2</span> <span class="label label-default">ros2-jazzy</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mogi-ros-week-7-8-ros2-navigation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mogi-ros-week-7-8-ros2-navigation" role="menuitem" tabindex="-1" href="/r/week-7-8-ros2-navigation/github-mogi-ros-week-7-8-ros2-navigation" data="github-mogi-ros-week-7-8-ros2-navigation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mogi-ros-week-7-8-ros2-navigation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jazzy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/week-7-8-ros2-navigation">week-7-8-ros2-navigation</a> <small>repository</small></h3>
        <span class="label label-default">localization</span> <span class="label label-default">navigation</span> <span class="label label-default">exploration</span> <span class="label label-default">gazebo</span> <span class="label label-default">slam</span> <span class="label label-default">harmonic</span> <span class="label label-default">amcl</span> <span class="label label-default">ros2</span> <span class="label label-default">mppi</span> <span class="label label-default">gazebosim</span> <span class="label label-default">slam-toolbox</span> <span class="label label-default">nav2</span> <span class="label label-default">ros2-jazzy</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mogi-ros-week-7-8-ros2-navigation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mogi-ros-week-7-8-ros2-navigation" role="menuitem" tabindex="-1" href="/r/week-7-8-ros2-navigation/github-mogi-ros-week-7-8-ros2-navigation" data="github-mogi-ros-week-7-8-ros2-navigation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mogi-ros-week-7-8-ros2-navigation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>kilted</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/week-7-8-ros2-navigation">week-7-8-ros2-navigation</a> <small>repository</small></h3>
        <span class="label label-default">localization</span> <span class="label label-default">navigation</span> <span class="label label-default">exploration</span> <span class="label label-default">gazebo</span> <span class="label label-default">slam</span> <span class="label label-default">harmonic</span> <span class="label label-default">amcl</span> <span class="label label-default">ros2</span> <span class="label label-default">mppi</span> <span class="label label-default">gazebosim</span> <span class="label label-default">slam-toolbox</span> <span class="label label-default">nav2</span> <span class="label label-default">ros2-jazzy</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mogi-ros-week-7-8-ros2-navigation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mogi-ros-week-7-8-ros2-navigation" role="menuitem" tabindex="-1" href="/r/week-7-8-ros2-navigation/github-mogi-ros-week-7-8-ros2-navigation" data="github-mogi-ros-week-7-8-ros2-navigation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mogi-ros-week-7-8-ros2-navigation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>rolling</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/week-7-8-ros2-navigation">week-7-8-ros2-navigation</a> <small>repository</small></h3>
        <span class="label label-default">localization</span> <span class="label label-default">navigation</span> <span class="label label-default">exploration</span> <span class="label label-default">gazebo</span> <span class="label label-default">slam</span> <span class="label label-default">harmonic</span> <span class="label label-default">amcl</span> <span class="label label-default">ros2</span> <span class="label label-default">mppi</span> <span class="label label-default">gazebosim</span> <span class="label label-default">slam-toolbox</span> <span class="label label-default">nav2</span> <span class="label label-default">ros2-jazzy</span> 
        
        <a class="label label-primary pkg-label" href="/p/bme_ros2_navigation">bme_ros2_navigation</a>
        
        <a class="label label-primary pkg-label" href="/p/bme_ros2_navigation_py">bme_ros2_navigation_py</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mogi-ros-week-7-8-ros2-navigation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mogi-ros-week-7-8-ros2-navigation" role="menuitem" tabindex="-1" href="/r/week-7-8-ros2-navigation/github-mogi-ros-week-7-8-ros2-navigation" data="github-mogi-ros-week-7-8-ros2-navigation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mogi-ros-week-7-8-ros2-navigation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Mapping, localization and using the navigation stack with ROS2 Jazzy</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/mogi-ros/week-7-8-ros2-navigation.git">https://github.com/mogi-ros/week-7-8-ros2-navigation.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-02-09
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNKNOWN
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">localization</span> <span class="label label-default">navigation</span> <span class="label label-default">exploration</span> <span class="label label-default">gazebo</span> <span class="label label-default">slam</span> <span class="label label-default">harmonic</span> <span class="label label-default">amcl</span> <span class="label label-default">ros2</span> <span class="label label-default">mppi</span> <span class="label label-default">gazebosim</span> <span class="label label-default">slam-toolbox</span> <span class="label label-default">nav2</span> <span class="label label-default">ros2-jazzy</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/week-7-8-ros2-navigation/#github-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/week-7-8-ros2-navigation/#github-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/week-7-8-ros2-navigation/#github-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/bme_ros2_navigation">bme_ros2_navigation</a></td>
                    <td>1.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/bme_ros2_navigation_py">bme_ros2_navigation_py</a></td>
                    <td>1.0.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="week-7-8-navigation">Week 7-8: Navigation</h1>

<h2 id="this-is-how-far-we-will-get-by-the-end-of-this-lesson">This is how far we will get by the end of this lesson:</h2>
<p><a href="https://youtu.be/NkOX4zX9XbQ"><img width="600" src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/youtube-navigation.png"></a></p>

<h1 id="table-of-contents">Table of Contents</h1>
<ol>
  <li>
<a href="https://github.com/mogi-ros/week-7-8-ros2-navigation/tree/main/#introduction">Introduction</a><br>
1.1. <a href="https://github.com/mogi-ros/week-7-8-ros2-navigation/tree/main/#download-ros-package">Download ROS package</a><br>
1.2. <a href="https://github.com/mogi-ros/week-7-8-ros2-navigation/tree/main/#test-the-starter-package">Test the starter package</a>
</li>
  <li>
<a href="https://github.com/mogi-ros/week-7-8-ros2-navigation/tree/main/#mapping">Mapping</a><br>
2.1. <a href="https://github.com/mogi-ros/week-7-8-ros2-navigation/tree/main/#slam-toolbox">SLAM toolbox</a>
</li>
  <li>
<a href="https://github.com/mogi-ros/week-7-8-ros2-navigation/tree/main/#localization">Localization</a><br>
3.1. <a href="https://github.com/mogi-ros/week-7-8-ros2-navigation/tree/main/#localization-with-amcl">Localization with AMCL</a><br>
3.2. <a href="https://github.com/mogi-ros/week-7-8-ros2-navigation/tree/main/#localization-with-slam-toolbox">Localization with SLAM toolbox</a>
</li>
  <li>
<a href="https://github.com/mogi-ros/week-7-8-ros2-navigation/tree/main/#navigation">Navigation</a><br>
4.1. <a href="https://github.com/mogi-ros/week-7-8-ros2-navigation/tree/main/#waypoint-navigation">Waypoint navigation</a><br>
4.2. <a href="https://github.com/mogi-ros/week-7-8-ros2-navigation/tree/main/#navigation-with-slam">Navigation with SLAM</a>
</li>
  <li><a href="https://github.com/mogi-ros/week-7-8-ros2-navigation/tree/main/#exploration">Exploration</a></li>
</ol>

<h1 id="introduction">Introduction</h1>

<p>In this lesson we’ll lear how to map the robot’s environment, how to do localization on an existing map and we’ll learn to use ROS2’s navigation stack.</p>

<h2 id="download-ros-package">Download ROS package</h2>

<p>To download the starter package, clone the following git repo with the <code class="language-plaintext highlighter-rouge">starter-branch</code> (using the <code class="language-plaintext highlighter-rouge">-b branch</code> flag) into your colcon workspace:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone <span class="nt">-b</span> starter-branch https://github.com/MOGI-ROS/Week-7-8-ROS2-Navigation

</code></pre></div></div>

<p>Let’s take a look what’s inside the <code class="language-plaintext highlighter-rouge">bme_ros2_navigation</code> package with the <code class="language-plaintext highlighter-rouge">tree</code> command!</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">.</span>
├── CMakeLists.txt
├── package.xml
├── config
│   ├── amcl_localization.yaml
│   ├── ekf.yaml
│   ├── gz_bridge.yaml
│   ├── navigation.yaml
│   ├── slam_toolbox_localization.yaml
│   ├── slam_toolbox_mapping.yaml
│   └── waypoints.yaml
├── launch
│   ├── check_urdf.launch.py
│   ├── spawn_robot.launch.py
│   └── world.launch.py
├── maps
│   ├── my_map.pgm
│   ├── my_map.yaml
│   ├── serialized.data
│   └── serialized.posegraph
├── meshes
│   ├── lidar.dae
│   ├── mogi_bot.dae
│   └── wheel.dae
├── rviz
│   ├── localization.rviz
│   ├── mapping.rviz
│   ├── navigation.rviz
│   ├── rviz.rviz
│   └── urdf.rviz
├── urdf
│   ├── materials.xacro
│   ├── mogi_bot.gazebo
│   └── mogi_bot.urdf
└── worlds
    ├── empty.sdf
    └── home.sdf

</code></pre></div></div>

<p>Let’s see what will we do with the existing files and folders:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">config</code>: As we saw previously, we usually store parameters and large configuration files for ROS packages which aren’t comfortable to handle from the launchfiles directly. In this lesson we will use more configuration files from this folder.</li>
  <li>
<code class="language-plaintext highlighter-rouge">launch</code>: Default launch files are already part of the starting package, we can test the package with <code class="language-plaintext highlighter-rouge">spawn_robot.launch.py</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">maps</code>: Offline map files for the Gazebo world</li>
  <li>
<code class="language-plaintext highlighter-rouge">meshes</code>: this folder contains the 3D models in <code class="language-plaintext highlighter-rouge">dae</code> format (collada mesh) that we use for our robot’s body, wheels and lidar sensor.</li>
  <li>
<code class="language-plaintext highlighter-rouge">rviz</code>: Pre-configured RViz2 layouts</li>
  <li>
<code class="language-plaintext highlighter-rouge">urdf</code>: The URDF models of our robot, we’ll extend the <code class="language-plaintext highlighter-rouge">mogi_bot.urdf</code> and <code class="language-plaintext highlighter-rouge">gazebo</code> files through this lesson</li>
  <li>
<code class="language-plaintext highlighter-rouge">worlds</code>: default Gazebo worlds that we’ll use in the simulations.</li>
</ul>

<p>We have another package <code class="language-plaintext highlighter-rouge">bme_ros2_navigation_py</code> for our python scripts:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">.</span>
├── bme_ros2_navigation_py
│   ├── __init__.py
│   ├── send_initialpose.py
│   └── slam_toolbox_load_map.py
├── package.xml
├── resource
│   └── bme_ros2_navigation_py
├── setup.cfg
└── setup.py

</code></pre></div></div>

<h2 id="test-the-starter-package">Test the starter package</h2>

<p>After we downloaded the <code class="language-plaintext highlighter-rouge">starter-branch</code> from GitHub, let’s rebuild the workspace and source the <code class="language-plaintext highlighter-rouge">install/setup.bash</code> file to make sure ROS and its tools are aware about the new package. Before we test it let’s take a look on the <code class="language-plaintext highlighter-rouge">spawn_robot.launch.py</code>, we’ll notice a few important changes!</p>
<ul>
  <li>This package uses ekf sensor fusion by default, we don’t forward the <code class="language-plaintext highlighter-rouge">tf</code> transformations from Gazebo, because it’s done by the <code class="language-plaintext highlighter-rouge">robot_localization</code> package.</li>
  <li>We moved all the <code class="language-plaintext highlighter-rouge">parameter_bridge</code> topics into a yaml config file <code class="language-plaintext highlighter-rouge">gz_bridge.yaml</code>, we don’t describe them in the launch file anymore, this is more comfortable when we forward many topics.</li>
  <li>There is a new node in the launch file <code class="language-plaintext highlighter-rouge">marker_server</code> from the <code class="language-plaintext highlighter-rouge">interactive-marker-twist-server</code> this can be used to move and rotate our robot directly from RViz. Let’s install it with <code class="language-plaintext highlighter-rouge">sudo apt install ros-jazzy-interactive-marker-twist-server</code>!</li>
</ul>

<p>Now we are ready to test the package with the usual launch file:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_ros2_navigation spawn_robot.launch.py

</code></pre></div></div>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/starter-package.png" alt="alt text" title="Starter package"></p>

<p>Let’s see the <code class="language-plaintext highlighter-rouge">rqt_graph</code> tool to see the connections between the nodes:
<img src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/rqt-graph.png" alt="alt text" title="rqt_graph"></p>

<p>And also try the <code class="language-plaintext highlighter-rouge">rqt_tf_tree</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run rqt_tf_tree rqt_tf_tree

</code></pre></div></div>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/tf-tree.png" alt="alt text" title="rqt_tf_tree"></p>

<h1 id="mapping">Mapping</h1>

<p>Let’s learn how to create the map of the robot’s surrounding. In practice we are using SLAM algorithms, SLAM stands for Simultaneous Localization and Mapping. It is a fundamental technique in robotics (and other fields) that allows a robot to:</p>
<ol>
  <li>Build a map of an unknown environment (mapping).</li>
  <li>Track its own pose (position and orientation) within that map at the same time (localization).</li>
</ol>

<p>Usually SLAM algorithms consists of 4 core functionalities:</p>
<ol>
  <li>Sensor inputs<br>
SLAM typically uses sensor data (e.g., LIDAR scans, camera images, or depth sensor measurements) to detect features or landmarks in the environment.</li>
  <li>State estimation<br>
An internal state (the robot’s pose, including x, y, yaw) is estimated using algorithms like Extended Kalman Filters, Particle Filters, or Graph Optimization.</li>
  <li>Map building<br>
As the robot moves, it accumulates new sensor data. The SLAM algorithm integrates that data into a global map (2D grid map, 3D point cloud, or other representations).</li>
  <li>Loop closure<br>
When the robot revisits a previously mapped area, the SLAM algorithm detects that it’s the same place (loop closure). This knowledge is used to reduce accumulated drift and refine both the map and pose estimates.</li>
</ol>

<h2 id="slam-toolbox">SLAM Toolbox</h2>

<p>In this lesson we will use the <code class="language-plaintext highlighter-rouge">slam_toolbox</code> package that has to be installed first:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>ros-jazzy-slam-toolbox

</code></pre></div></div>

<p>After installing it we will create a new launch file for mapping, the <code class="language-plaintext highlighter-rouge">slam_toolbox</code> parameters are already in the <code class="language-plaintext highlighter-rouge">config</code> folder (<code class="language-plaintext highlighter-rouge">slam_toolbox_mapping.yaml</code>) we’ll use these parameters. Let’s also move the <code class="language-plaintext highlighter-rouge">interactive_twist_marker</code> and RViz related functions into the new launch file from <code class="language-plaintext highlighter-rouge">spawn_robot.launch.py</code>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">#launchDescriptionObject.add_action(rviz_launch_arg)
</span>    <span class="c1">#launchDescriptionObject.add_action(rviz_config_arg)
</span>    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">world_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">model_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">x_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">y_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">yaw_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">sim_time_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">world_launch</span><span class="p">)</span>
    <span class="c1">#launchDescriptionObject.add_action(rviz_node)
</span>    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">spawn_urdf_node</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">gz_bridge_node</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">gz_image_bridge_node</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">relay_camera_info_node</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">robot_state_publisher_node</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">trajectory_node</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">ekf_node</span><span class="p">)</span>
    <span class="c1">#launchDescriptionObject.add_action(interactive_marker_twist_server_node)
</span>
</code></pre></div></div>

<p>Also change the <code class="language-plaintext highlighter-rouge">reference_frame_id</code> of <code class="language-plaintext highlighter-rouge">mogi_trajectory_server</code> from <code class="language-plaintext highlighter-rouge">odom</code> to <code class="language-plaintext highlighter-rouge">map</code> because this will be our new reference frame when we have a map!</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">trajectory_node</span> <span class="o">=</span> <span class="nc">Node</span><span class="p">(</span>
        <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">mogi_trajectory_server</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">executable</span><span class="o">=</span><span class="sh">'</span><span class="s">mogi_trajectory_server</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">mogi_trajectory_server</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">parameters</span><span class="o">=</span><span class="p">[{</span><span class="sh">'</span><span class="s">reference_frame_id</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">map</span><span class="sh">'</span><span class="p">}]</span>
    <span class="p">)</span>

</code></pre></div></div>

<p>Let’s create <code class="language-plaintext highlighter-rouge">mapping.launch.py</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">os</span>
<span class="kn">from</span> <span class="n">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">from</span> <span class="n">launch.actions</span> <span class="kn">import</span> <span class="n">DeclareLaunchArgument</span><span class="p">,</span> <span class="n">IncludeLaunchDescription</span>
<span class="kn">from</span> <span class="n">launch.conditions</span> <span class="kn">import</span> <span class="n">IfCondition</span>
<span class="kn">from</span> <span class="n">launch.launch_description_sources</span> <span class="kn">import</span> <span class="n">PythonLaunchDescriptionSource</span>
<span class="kn">from</span> <span class="n">launch.substitutions</span> <span class="kn">import</span> <span class="n">LaunchConfiguration</span><span class="p">,</span> <span class="n">PathJoinSubstitution</span><span class="p">,</span> <span class="n">Command</span>
<span class="kn">from</span> <span class="n">launch_ros.actions</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="kn">from</span> <span class="n">ament_index_python.packages</span> <span class="kn">import</span> <span class="n">get_package_share_directory</span>

<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>

    <span class="n">pkg_bme_ros2_navigation</span> <span class="o">=</span> <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">bme_ros2_navigation</span><span class="sh">'</span><span class="p">)</span>

    <span class="n">gazebo_models_path</span><span class="p">,</span> <span class="n">ignore_last_dir</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="n">pkg_bme_ros2_navigation</span><span class="p">)</span>
    <span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">[</span><span class="sh">"</span><span class="s">GZ_SIM_RESOURCE_PATH</span><span class="sh">"</span><span class="p">]</span> <span class="o">+=</span> <span class="n">os</span><span class="p">.</span><span class="n">pathsep</span> <span class="o">+</span> <span class="n">gazebo_models_path</span>

    <span class="n">rviz_launch_arg</span> <span class="o">=</span> <span class="nc">DeclareLaunchArgument</span><span class="p">(</span>
        <span class="sh">'</span><span class="s">rviz</span><span class="sh">'</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="sh">'</span><span class="s">true</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="sh">'</span><span class="s">Open RViz</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">rviz_config_arg</span> <span class="o">=</span> <span class="nc">DeclareLaunchArgument</span><span class="p">(</span>
        <span class="sh">'</span><span class="s">rviz_config</span><span class="sh">'</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="sh">'</span><span class="s">mapping.rviz</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="sh">'</span><span class="s">RViz config file</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">sim_time_arg</span> <span class="o">=</span> <span class="nc">DeclareLaunchArgument</span><span class="p">(</span>
        <span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="sh">'</span><span class="s">True</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="sh">'</span><span class="s">Flag to enable use_sim_time</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="c1"># Generate path to config file
</span>    <span class="n">interactive_marker_config_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span>
        <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">interactive_marker_twist_server</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">config</span><span class="sh">'</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">linear.yaml</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="c1"># Path to the Slam Toolbox launch file
</span>    <span class="n">slam_toolbox_launch_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span>
        <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">slam_toolbox</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">launch</span><span class="sh">'</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">online_async_launch.py</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">slam_toolbox_params_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span>
        <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">bme_ros2_navigation</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">config</span><span class="sh">'</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">slam_toolbox_mapping.yaml</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="c1"># Launch rviz
</span>    <span class="n">rviz_node</span> <span class="o">=</span> <span class="nc">Node</span><span class="p">(</span>
        <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">rviz2</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">executable</span><span class="o">=</span><span class="sh">'</span><span class="s">rviz2</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">arguments</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">-d</span><span class="sh">'</span><span class="p">,</span> <span class="nc">PathJoinSubstitution</span><span class="p">([</span><span class="n">pkg_bme_ros2_navigation</span><span class="p">,</span> <span class="sh">'</span><span class="s">rviz</span><span class="sh">'</span><span class="p">,</span> <span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">rviz_config</span><span class="sh">'</span><span class="p">)])],</span>
        <span class="n">condition</span><span class="o">=</span><span class="nc">IfCondition</span><span class="p">(</span><span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">rviz</span><span class="sh">'</span><span class="p">)),</span>
        <span class="n">parameters</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span><span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">:</span> <span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">)},</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="n">interactive_marker_twist_server_node</span> <span class="o">=</span> <span class="nc">Node</span><span class="p">(</span>
        <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">interactive_marker_twist_server</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">executable</span><span class="o">=</span><span class="sh">'</span><span class="s">marker_server</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">twist_server_node</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="n">interactive_marker_config_file_path</span><span class="p">],</span>
        <span class="n">output</span><span class="o">=</span><span class="sh">'</span><span class="s">screen</span><span class="sh">'</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">slam_toolbox_launch</span> <span class="o">=</span> <span class="nc">IncludeLaunchDescription</span><span class="p">(</span>
        <span class="nc">PythonLaunchDescriptionSource</span><span class="p">(</span><span class="n">slam_toolbox_launch_path</span><span class="p">),</span>
        <span class="n">launch_arguments</span><span class="o">=</span><span class="p">{</span>
                <span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">:</span> <span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">),</span>
                <span class="sh">'</span><span class="s">slam_params_file</span><span class="sh">'</span><span class="p">:</span> <span class="n">slam_toolbox_params_path</span><span class="p">,</span>
        <span class="p">}.</span><span class="nf">items</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="n">launchDescriptionObject</span> <span class="o">=</span> <span class="nc">LaunchDescription</span><span class="p">()</span>

    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">rviz_launch_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">rviz_config_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">sim_time_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">rviz_node</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">interactive_marker_twist_server_node</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">slam_toolbox_launch</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">launchDescriptionObject</span>

</code></pre></div></div>

<p>Build the workspace and we’ll need 2 terminals, in the first we launch the simulation like before (but this time it won’t open RViz):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_ros2_navigation spawn_robot.launch.py

</code></pre></div></div>

<p>And in another terminal we launch the new <code class="language-plaintext highlighter-rouge">mapping.launch.py</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_ros2_navigation mapping.launch.py

</code></pre></div></div>

<p>Let’s take a look first on <code class="language-plaintext highlighter-rouge">rqt_tf_tree</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run rqt_tf_tree rqt_tf_tree

</code></pre></div></div>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/tf-tree-1.png" alt="alt text" title="rqt_tf_tree"></p>

<p>We can see an additional frame <code class="language-plaintext highlighter-rouge">map</code> over the <code class="language-plaintext highlighter-rouge">odom</code> odometry frame. We can also visualize this transformation in RViz:
<img src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/mapping.png" alt="alt text" title="mapping"></p>

<p>The difference between the <code class="language-plaintext highlighter-rouge">odom</code> and <code class="language-plaintext highlighter-rouge">map</code> frames show the accumulated drift of our odometry over time. don’t forget that this is already improved a lot thanks to the sensor fusion between the raw odometry and the IMU.</p>

<p>With SLAM Toolbox we can also save the maps, we have two options:
1) <code class="language-plaintext highlighter-rouge">Save Map</code>: The map is saved as a <code class="language-plaintext highlighter-rouge">.pgm</code> file and a <code class="language-plaintext highlighter-rouge">.yaml</code> file. This is a black and white image file that can be used with other ROS nodes for localization as we will see later. Since it’s only an image file it’s impossible to continue the mapping with such a file because SLAM Toolbox handles the map in the background as a graph that cannot be restored from an image.
2) <code class="language-plaintext highlighter-rouge">Serialize Map</code>: With this feature we can serialize and later deserialize SLAM Toolbox’s graph, so it can be loaded and the mapping can be continued. Although other ROS nodes won’t be able to read or use it for localization.</p>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/save-map.png" alt="alt text" title="Save map"></p>

<p>After saving a serialized map next time we can load (deserialize it):
<img src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/load-map.png" alt="alt text" title="Load map"></p>

<p>And we can also load the map that is in the starter package of this lesson:
<img src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/load-map-1.png" alt="alt text" title="Load map"></p>

<p>We can also use a custom node to deserialize the already saved map, it implements the same functionality as the <code class="language-plaintext highlighter-rouge">Deserialize Map</code> button in RViz:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run bme_ros2_navigation_py slam_toolbox_load_map

</code></pre></div></div>

<p>Another way to save the <code class="language-plaintext highlighter-rouge">.pgm</code> and <code class="language-plaintext highlighter-rouge">.yaml</code> map for later use is the <code class="language-plaintext highlighter-rouge">map_saver_cli</code> tool of the navigation stack.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run nav2_map_server map_saver_cli <span class="nt">-f</span> my_map

</code></pre></div></div>

<p>To use it, <code class="language-plaintext highlighter-rouge">map_server</code> has to be installed:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>ros-jazzy-nav2-map-server

</code></pre></div></div>

<h1 id="localization">Localization</h1>

<p>While mapping was the process of creating a representation (a map) of an environment. Localization is the process by which a robot determines its own position and orientation within a known environment (map). In other words:</p>
<ul>
  <li>The environment or map is typically already available or pre-built.</li>
  <li>The robot’s task is to figure out “Where am I?” or “Which direction am I facing?” using sensor data, often by matching its current perceptions to the known map.</li>
</ul>

<h2 id="localization-with-amcl">Localization with AMCL</h2>

<p>AMCL (Adaptive Monte Carlo Localization) is a particle filter–based 2D localization algorithm. The robot’s possible poses (position + orientation in 2D) are represented by a set of particles. It adaptively samples the robot’s possible poses according to sensor readings and motion updates, converging on an accurate estimate of where the robot is within a known map.</p>

<p>AMCL is part of the ROS2 navigation stack, let’s install it first:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>ros-jazzy-nav2-bringup 
<span class="nb">sudo </span>apt <span class="nb">install </span>ros-jazzy-nav2-amcl

</code></pre></div></div>

<p>And then let’s create a new launch file <code class="language-plaintext highlighter-rouge">localization.launch.py</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">os</span>
<span class="kn">from</span> <span class="n">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">from</span> <span class="n">launch.actions</span> <span class="kn">import</span> <span class="n">DeclareLaunchArgument</span><span class="p">,</span> <span class="n">IncludeLaunchDescription</span>
<span class="kn">from</span> <span class="n">launch.conditions</span> <span class="kn">import</span> <span class="n">IfCondition</span>
<span class="kn">from</span> <span class="n">launch.launch_description_sources</span> <span class="kn">import</span> <span class="n">PythonLaunchDescriptionSource</span>
<span class="kn">from</span> <span class="n">launch.substitutions</span> <span class="kn">import</span> <span class="n">LaunchConfiguration</span><span class="p">,</span> <span class="n">PathJoinSubstitution</span><span class="p">,</span> <span class="n">Command</span>
<span class="kn">from</span> <span class="n">launch_ros.actions</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="kn">from</span> <span class="n">ament_index_python.packages</span> <span class="kn">import</span> <span class="n">get_package_share_directory</span>

<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>

    <span class="n">pkg_bme_ros2_navigation</span> <span class="o">=</span> <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">bme_ros2_navigation</span><span class="sh">'</span><span class="p">)</span>

    <span class="n">gazebo_models_path</span><span class="p">,</span> <span class="n">ignore_last_dir</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="n">pkg_bme_ros2_navigation</span><span class="p">)</span>
    <span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">[</span><span class="sh">"</span><span class="s">GZ_SIM_RESOURCE_PATH</span><span class="sh">"</span><span class="p">]</span> <span class="o">+=</span> <span class="n">os</span><span class="p">.</span><span class="n">pathsep</span> <span class="o">+</span> <span class="n">gazebo_models_path</span>

    <span class="n">rviz_launch_arg</span> <span class="o">=</span> <span class="nc">DeclareLaunchArgument</span><span class="p">(</span>
        <span class="sh">'</span><span class="s">rviz</span><span class="sh">'</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="sh">'</span><span class="s">true</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="sh">'</span><span class="s">Open RViz</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">rviz_config_arg</span> <span class="o">=</span> <span class="nc">DeclareLaunchArgument</span><span class="p">(</span>
        <span class="sh">'</span><span class="s">rviz_config</span><span class="sh">'</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="sh">'</span><span class="s">localization.rviz</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="sh">'</span><span class="s">RViz config file</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">sim_time_arg</span> <span class="o">=</span> <span class="nc">DeclareLaunchArgument</span><span class="p">(</span>
        <span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="sh">'</span><span class="s">True</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="sh">'</span><span class="s">Flag to enable use_sim_time</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="c1"># Generate path to config file
</span>    <span class="n">interactive_marker_config_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span>
        <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">interactive_marker_twist_server</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">config</span><span class="sh">'</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">linear.yaml</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="c1"># Path to the Slam Toolbox launch file
</span>    <span class="n">nav2_localization_launch_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span>
        <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">nav2_bringup</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">launch</span><span class="sh">'</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">localization_launch.py</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">localization_params_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span>
        <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">bme_ros2_navigation</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">config</span><span class="sh">'</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">amcl_localization.yaml</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">map_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span>
        <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">bme_ros2_navigation</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">maps</span><span class="sh">'</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">my_map.yaml</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="c1"># Launch rviz
</span>    <span class="n">rviz_node</span> <span class="o">=</span> <span class="nc">Node</span><span class="p">(</span>
        <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">rviz2</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">executable</span><span class="o">=</span><span class="sh">'</span><span class="s">rviz2</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">arguments</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">-d</span><span class="sh">'</span><span class="p">,</span> <span class="nc">PathJoinSubstitution</span><span class="p">([</span><span class="n">pkg_bme_ros2_navigation</span><span class="p">,</span> <span class="sh">'</span><span class="s">rviz</span><span class="sh">'</span><span class="p">,</span> <span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">rviz_config</span><span class="sh">'</span><span class="p">)])],</span>
        <span class="n">condition</span><span class="o">=</span><span class="nc">IfCondition</span><span class="p">(</span><span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">rviz</span><span class="sh">'</span><span class="p">)),</span>
        <span class="n">parameters</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span><span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">:</span> <span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">)},</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="n">interactive_marker_twist_server_node</span> <span class="o">=</span> <span class="nc">Node</span><span class="p">(</span>
        <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">interactive_marker_twist_server</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">executable</span><span class="o">=</span><span class="sh">'</span><span class="s">marker_server</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">twist_server_node</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="n">interactive_marker_config_file_path</span><span class="p">],</span>
        <span class="n">output</span><span class="o">=</span><span class="sh">'</span><span class="s">screen</span><span class="sh">'</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">localization_launch</span> <span class="o">=</span> <span class="nc">IncludeLaunchDescription</span><span class="p">(</span>
        <span class="nc">PythonLaunchDescriptionSource</span><span class="p">(</span><span class="n">nav2_localization_launch_path</span><span class="p">),</span>
        <span class="n">launch_arguments</span><span class="o">=</span><span class="p">{</span>
                <span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">:</span> <span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">),</span>
                <span class="sh">'</span><span class="s">params_file</span><span class="sh">'</span><span class="p">:</span> <span class="n">localization_params_path</span><span class="p">,</span>
                <span class="sh">'</span><span class="s">map</span><span class="sh">'</span><span class="p">:</span> <span class="n">map_file_path</span><span class="p">,</span>
        <span class="p">}.</span><span class="nf">items</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="n">launchDescriptionObject</span> <span class="o">=</span> <span class="nc">LaunchDescription</span><span class="p">()</span>

    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">rviz_launch_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">rviz_config_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">sim_time_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">rviz_node</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">interactive_marker_twist_server_node</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">localization_launch</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">launchDescriptionObject</span>

</code></pre></div></div>

<p>Build the workspace and let’s try it, we’ll need 2 terminals again, one for the simulation:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_ros2_navigation spawn_robot.launch.py

</code></pre></div></div>

<p>And another for the new launch file:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_ros2_navigation localization.launch.py

</code></pre></div></div>

<p>To start using AMCL we have to provide an initial pose to the <code class="language-plaintext highlighter-rouge">/initialpose</code> topic. We can use RViz’s built in tool for that.</p>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/localization.png" alt="alt text" title="Localization"></p>

<p>This will initialize AMCL’s particles around the initial pose which can be displayed in RViz as a particle cloud where each particle rerpresnts a pose (position + orientation in 2D).</p>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/localization-1.png" alt="alt text" title="Localization"></p>

<p>The initial distribution and spread of the partciles depends on the covariance matrix of the initial pose that cannot be changed in RViz, but we can publish our own <code class="language-plaintext highlighter-rouge">/initialpose</code> topic by a custom node which is in the package of this lesson, <code class="language-plaintext highlighter-rouge">send_initialpose.py</code>.</p>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/localization-3.png" alt="alt text" title="Localization"></p>

<p>The main purpose of the localization algorithm is establishing the transformation between the fixed map and the robot’s odometry frame based on real time sensor data. We can visualize this in RViz as we saw it during mapping:</p>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/localization-2.png" alt="alt text" title="Localization"></p>

<h2 id="localization-with-slam-toolbox">Localization with SLAM toolbox</h2>

<p>It’s possible to use SLAM toolbox in localization mode, it requires a small adjustment on the parameters which is already part of this lesson, <code class="language-plaintext highlighter-rouge">slam_toolbox_localization.yaml</code>. This requires the path to the serialized map file.</p>

<blockquote>
  <p>Make sure the <code class="language-plaintext highlighter-rouge">map_file_name</code> parameter is changed to the path on your machine to the serialized map file!</p>
</blockquote>

<p>Let’s create the launch file for localization, <code class="language-plaintext highlighter-rouge">localization_slam_toolbox.launch.py</code>, it’s very similar to the SLAM toolbox mapping launch file:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">os</span>
<span class="kn">from</span> <span class="n">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">from</span> <span class="n">launch.actions</span> <span class="kn">import</span> <span class="n">DeclareLaunchArgument</span><span class="p">,</span> <span class="n">IncludeLaunchDescription</span><span class="p">,</span> <span class="n">GroupAction</span>
<span class="kn">from</span> <span class="n">launch.conditions</span> <span class="kn">import</span> <span class="n">IfCondition</span>
<span class="kn">from</span> <span class="n">launch.launch_description_sources</span> <span class="kn">import</span> <span class="n">PythonLaunchDescriptionSource</span>
<span class="kn">from</span> <span class="n">launch.substitutions</span> <span class="kn">import</span> <span class="n">LaunchConfiguration</span><span class="p">,</span> <span class="n">PathJoinSubstitution</span><span class="p">,</span> <span class="n">Command</span>
<span class="kn">from</span> <span class="n">launch_ros.actions</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="kn">from</span> <span class="n">ament_index_python.packages</span> <span class="kn">import</span> <span class="n">get_package_share_directory</span>

<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>

    <span class="n">pkg_bme_ros2_navigation</span> <span class="o">=</span> <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">bme_ros2_navigation</span><span class="sh">'</span><span class="p">)</span>

    <span class="n">gazebo_models_path</span><span class="p">,</span> <span class="n">ignore_last_dir</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="n">pkg_bme_ros2_navigation</span><span class="p">)</span>
    <span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">[</span><span class="sh">"</span><span class="s">GZ_SIM_RESOURCE_PATH</span><span class="sh">"</span><span class="p">]</span> <span class="o">+=</span> <span class="n">os</span><span class="p">.</span><span class="n">pathsep</span> <span class="o">+</span> <span class="n">gazebo_models_path</span>

    <span class="n">rviz_launch_arg</span> <span class="o">=</span> <span class="nc">DeclareLaunchArgument</span><span class="p">(</span>
        <span class="sh">'</span><span class="s">rviz</span><span class="sh">'</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="sh">'</span><span class="s">true</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="sh">'</span><span class="s">Open RViz</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">rviz_config_arg</span> <span class="o">=</span> <span class="nc">DeclareLaunchArgument</span><span class="p">(</span>
        <span class="sh">'</span><span class="s">rviz_config</span><span class="sh">'</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="sh">'</span><span class="s">mapping.rviz</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="sh">'</span><span class="s">RViz config file</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">sim_time_arg</span> <span class="o">=</span> <span class="nc">DeclareLaunchArgument</span><span class="p">(</span>
        <span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="sh">'</span><span class="s">True</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="sh">'</span><span class="s">Flag to enable use_sim_time</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="c1"># Generate path to config file
</span>    <span class="n">interactive_marker_config_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span>
        <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">interactive_marker_twist_server</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">config</span><span class="sh">'</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">linear.yaml</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="c1"># Path to the Slam Toolbox launch file
</span>    <span class="n">slam_toolbox_launch_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span>
        <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">slam_toolbox</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">launch</span><span class="sh">'</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">localization_launch.py</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">slam_toolbox_params_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span>
        <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">bme_ros2_navigation</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">config</span><span class="sh">'</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">slam_toolbox_localization.yaml</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="c1"># Launch rviz
</span>    <span class="n">rviz_node</span> <span class="o">=</span> <span class="nc">Node</span><span class="p">(</span>
        <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">rviz2</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">executable</span><span class="o">=</span><span class="sh">'</span><span class="s">rviz2</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">arguments</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">-d</span><span class="sh">'</span><span class="p">,</span> <span class="nc">PathJoinSubstitution</span><span class="p">([</span><span class="n">pkg_bme_ros2_navigation</span><span class="p">,</span> <span class="sh">'</span><span class="s">rviz</span><span class="sh">'</span><span class="p">,</span> <span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">rviz_config</span><span class="sh">'</span><span class="p">)])],</span>
        <span class="n">condition</span><span class="o">=</span><span class="nc">IfCondition</span><span class="p">(</span><span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">rviz</span><span class="sh">'</span><span class="p">)),</span>
        <span class="n">parameters</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span><span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">:</span> <span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">)},</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="n">interactive_marker_twist_server_node</span> <span class="o">=</span> <span class="nc">Node</span><span class="p">(</span>
        <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">interactive_marker_twist_server</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">executable</span><span class="o">=</span><span class="sh">'</span><span class="s">marker_server</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">twist_server_node</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="n">interactive_marker_config_file_path</span><span class="p">],</span>
        <span class="n">output</span><span class="o">=</span><span class="sh">'</span><span class="s">screen</span><span class="sh">'</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">slam_toolbox_launch</span> <span class="o">=</span> <span class="nc">IncludeLaunchDescription</span><span class="p">(</span>
        <span class="nc">PythonLaunchDescriptionSource</span><span class="p">(</span><span class="n">slam_toolbox_launch_path</span><span class="p">),</span>
        <span class="n">launch_arguments</span><span class="o">=</span><span class="p">{</span>
                <span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">:</span> <span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">),</span>
                <span class="sh">'</span><span class="s">slam_params_file</span><span class="sh">'</span><span class="p">:</span> <span class="n">slam_toolbox_params_path</span><span class="p">,</span>
        <span class="p">}.</span><span class="nf">items</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="n">launchDescriptionObject</span> <span class="o">=</span> <span class="nc">LaunchDescription</span><span class="p">()</span>

    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">rviz_launch_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">rviz_config_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">sim_time_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">rviz_node</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">interactive_marker_twist_server_node</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">slam_toolbox_launch</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">launchDescriptionObject</span>


</code></pre></div></div>

<p>Rebuild the workspace and try it, we’ll see that the map keeps updating unlike with AMCL, this is the normal behavior of the localization with SLAM toolbox. According to <a href="https://joss.theoj.org/papers/10.21105/joss.02783">this paper</a>, the localization mode does continue to update the pose-graph with new constraints and nodes, but the updated map expires over some time. SLAM toolbox describes it as “elastic”, which means it holds the updated graph for some amount of time, but does not add it to the permanent graph.</p>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/localization-4.png" alt="alt text" title="Localization"></p>

<h1 id="navigation">Navigation</h1>

<p>Navigation in robotics is the overall process that enables a robot to move from one location to another in a safe, efficient, and autonomous manner. It typically involves:</p>
<ol>
  <li>Knowing where the robot is (localization or SLAM),</li>
  <li>Knowing where it needs to go (a goal pose or waypoint),</li>
  <li>Planning a path to reach that goal (path planning), and</li>
  <li>Moving along that path while avoiding dynamic and static obstacles (motion control and obstacle avoidance).</li>
</ol>

<p>ROS’s nav2 navigation stack implements the above points 2 to 4, for the first point we already met several possible solutions.</p>

<p>Let’s create a launch file that uses both AMCL and the nav2 navigation stack, <code class="language-plaintext highlighter-rouge">navigation.launch.py</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">os</span>
<span class="kn">from</span> <span class="n">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">from</span> <span class="n">launch.actions</span> <span class="kn">import</span> <span class="n">DeclareLaunchArgument</span><span class="p">,</span> <span class="n">IncludeLaunchDescription</span>
<span class="kn">from</span> <span class="n">launch.conditions</span> <span class="kn">import</span> <span class="n">IfCondition</span>
<span class="kn">from</span> <span class="n">launch.launch_description_sources</span> <span class="kn">import</span> <span class="n">PythonLaunchDescriptionSource</span>
<span class="kn">from</span> <span class="n">launch.substitutions</span> <span class="kn">import</span> <span class="n">LaunchConfiguration</span><span class="p">,</span> <span class="n">PathJoinSubstitution</span><span class="p">,</span> <span class="n">Command</span>
<span class="kn">from</span> <span class="n">launch_ros.actions</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="kn">from</span> <span class="n">ament_index_python.packages</span> <span class="kn">import</span> <span class="n">get_package_share_directory</span>

<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>

    <span class="n">pkg_bme_ros2_navigation</span> <span class="o">=</span> <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">bme_ros2_navigation</span><span class="sh">'</span><span class="p">)</span>

    <span class="n">gazebo_models_path</span><span class="p">,</span> <span class="n">ignore_last_dir</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="n">pkg_bme_ros2_navigation</span><span class="p">)</span>
    <span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">[</span><span class="sh">"</span><span class="s">GZ_SIM_RESOURCE_PATH</span><span class="sh">"</span><span class="p">]</span> <span class="o">+=</span> <span class="n">os</span><span class="p">.</span><span class="n">pathsep</span> <span class="o">+</span> <span class="n">gazebo_models_path</span>

    <span class="n">rviz_launch_arg</span> <span class="o">=</span> <span class="nc">DeclareLaunchArgument</span><span class="p">(</span>
        <span class="sh">'</span><span class="s">rviz</span><span class="sh">'</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="sh">'</span><span class="s">true</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="sh">'</span><span class="s">Open RViz</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">rviz_config_arg</span> <span class="o">=</span> <span class="nc">DeclareLaunchArgument</span><span class="p">(</span>
        <span class="sh">'</span><span class="s">rviz_config</span><span class="sh">'</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="sh">'</span><span class="s">navigation.rviz</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="sh">'</span><span class="s">RViz config file</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">sim_time_arg</span> <span class="o">=</span> <span class="nc">DeclareLaunchArgument</span><span class="p">(</span>
        <span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="sh">'</span><span class="s">True</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="sh">'</span><span class="s">Flag to enable use_sim_time</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="c1"># Generate path to config file
</span>    <span class="n">interactive_marker_config_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span>
        <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">interactive_marker_twist_server</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">config</span><span class="sh">'</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">linear.yaml</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="c1"># Path to the Slam Toolbox launch file
</span>    <span class="n">nav2_localization_launch_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span>
        <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">nav2_bringup</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">launch</span><span class="sh">'</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">localization_launch.py</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">nav2_navigation_launch_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span>
        <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">nav2_bringup</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">launch</span><span class="sh">'</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">navigation_launch.py</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">localization_params_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span>
        <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">bme_ros2_navigation</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">config</span><span class="sh">'</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">amcl_localization.yaml</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">navigation_params_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span>
        <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">bme_ros2_navigation</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">config</span><span class="sh">'</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">navigation.yaml</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">map_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span>
        <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">bme_ros2_navigation</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">maps</span><span class="sh">'</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">my_map.yaml</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="c1"># Launch rviz
</span>    <span class="n">rviz_node</span> <span class="o">=</span> <span class="nc">Node</span><span class="p">(</span>
        <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">rviz2</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">executable</span><span class="o">=</span><span class="sh">'</span><span class="s">rviz2</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">arguments</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">-d</span><span class="sh">'</span><span class="p">,</span> <span class="nc">PathJoinSubstitution</span><span class="p">([</span><span class="n">pkg_bme_ros2_navigation</span><span class="p">,</span> <span class="sh">'</span><span class="s">rviz</span><span class="sh">'</span><span class="p">,</span> <span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">rviz_config</span><span class="sh">'</span><span class="p">)])],</span>
        <span class="n">condition</span><span class="o">=</span><span class="nc">IfCondition</span><span class="p">(</span><span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">rviz</span><span class="sh">'</span><span class="p">)),</span>
        <span class="n">parameters</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span><span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">:</span> <span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">)},</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="n">interactive_marker_twist_server_node</span> <span class="o">=</span> <span class="nc">Node</span><span class="p">(</span>
        <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">interactive_marker_twist_server</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">executable</span><span class="o">=</span><span class="sh">'</span><span class="s">marker_server</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">twist_server_node</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="n">interactive_marker_config_file_path</span><span class="p">],</span>
        <span class="n">output</span><span class="o">=</span><span class="sh">'</span><span class="s">screen</span><span class="sh">'</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">localization_launch</span> <span class="o">=</span> <span class="nc">IncludeLaunchDescription</span><span class="p">(</span>
        <span class="nc">PythonLaunchDescriptionSource</span><span class="p">(</span><span class="n">nav2_localization_launch_path</span><span class="p">),</span>
        <span class="n">launch_arguments</span><span class="o">=</span><span class="p">{</span>
                <span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">:</span> <span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">),</span>
                <span class="sh">'</span><span class="s">params_file</span><span class="sh">'</span><span class="p">:</span> <span class="n">localization_params_path</span><span class="p">,</span>
                <span class="sh">'</span><span class="s">map</span><span class="sh">'</span><span class="p">:</span> <span class="n">map_file_path</span><span class="p">,</span>
        <span class="p">}.</span><span class="nf">items</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="n">navigation_launch</span> <span class="o">=</span> <span class="nc">IncludeLaunchDescription</span><span class="p">(</span>
        <span class="nc">PythonLaunchDescriptionSource</span><span class="p">(</span><span class="n">nav2_navigation_launch_path</span><span class="p">),</span>
        <span class="n">launch_arguments</span><span class="o">=</span><span class="p">{</span>
                <span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">:</span> <span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">),</span>
                <span class="sh">'</span><span class="s">params_file</span><span class="sh">'</span><span class="p">:</span> <span class="n">navigation_params_path</span><span class="p">,</span>
        <span class="p">}.</span><span class="nf">items</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="n">launchDescriptionObject</span> <span class="o">=</span> <span class="nc">LaunchDescription</span><span class="p">()</span>

    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">rviz_launch_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">rviz_config_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">sim_time_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">rviz_node</span><span class="p">)</span>
    <span class="c1">#launchDescriptionObject.add_action(interactive_marker_twist_server_node)
</span>    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">localization_launch</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">navigation_launch</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">launchDescriptionObject</span>

</code></pre></div></div>

<p>We’ll need 2 terminals as before, one for the simulation:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_ros2_navigation spawn_robot.launch.py

</code></pre></div></div>

<p>And in another terminal we launch the new <code class="language-plaintext highlighter-rouge">navigation.launch.py</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_ros2_navigation navigation.launch.py

</code></pre></div></div>

<p>We are using AMCL, so first we’ll have to publish an initial pose, then we have to tell the pose goal to the navigation stack. For that we can also use RViz’s other built-in feature:</p>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/navigation.png" alt="alt text" title="Navigation"></p>

<p>As soon as the pose goal is received the navigation stack plans a global path to the goal and the controller ensures locally that the robot follows the global path while it avoids dynamic obstacles. The controller calculates a cost map around the robot that determines the ideal trajectory of the robot. If there aren’t any obstacles around the robot this cost map weighs the global plan.</p>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/navigation-1.png" alt="alt text" title="Navigation"></p>

<p>If obstacles are detected around the robot those can be visualized as a cost map too:</p>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/navigation-2.png" alt="alt text" title="Navigation"></p>

<h2 id="waypoint-navigation">Waypoint navigation</h2>

<p>We can use the navigation stack for waypoint navigation, this can be done through the GUI of RViz or writing a custom node. Let’s start with the first one.</p>

<p>We’ll need 2 terminals as before, one for the simulation:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_ros2_navigation spawn_robot.launch.py

</code></pre></div></div>

<p>And in another terminal we launch the <code class="language-plaintext highlighter-rouge">navigation.launch.py</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_ros2_navigation navigation.launch.py

</code></pre></div></div>

<p>First, we have to make sure that the <code class="language-plaintext highlighter-rouge">Nav2 Goal</code> toolbar is added to RViz! If not, we can add it under the <code class="language-plaintext highlighter-rouge">+</code> sign.
<img src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/waypoint.png" alt="alt text" title="Waypoint navigation"></p>

<p>Then we have to switch nav2 to waypoint following mode:
<img src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/waypoint-1.png" alt="alt text" title="Waypoint navigation"></p>

<p>Using the <code class="language-plaintext highlighter-rouge">Nav2 Goal</code> tool we can define the waypoints:
<img src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/waypoint-2.png" alt="alt text" title="Waypoint navigation"></p>

<p>And when we are done with the waypoints we can start the navigation through them:
<img src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/waypoint-3.png" alt="alt text" title="Waypoint navigation">
<img src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/waypoint-4.png" alt="alt text" title="Waypoint navigation"></p>

<p>It’s possible to run multiple loops through the waypoints and it’s also possible to save and load the waypoints. One example is already in the <code class="language-plaintext highlighter-rouge">config</code> folder: <code class="language-plaintext highlighter-rouge">waypoints.yaml</code>. You can see a video about it here:</p>

<p><a href="https://youtu.be/ED6AXnAR2sc"><img width="600" src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/youtube-waypoints.png"></a></p>

<p>It’s also possible to follow waypoints through the nav2 navigation stack’s API with a custom node. Let’s create <code class="language-plaintext highlighter-rouge">follow_waypoints.py</code> in the <code class="language-plaintext highlighter-rouge">bme_ros2_navigation_py</code> package:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">rclpy</span>
<span class="kn">from</span> <span class="n">rclpy.node</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="kn">from</span> <span class="n">geometry_msgs.msg</span> <span class="kn">import</span> <span class="n">PoseStamped</span>
<span class="kn">from</span> <span class="n">nav2_msgs.action</span> <span class="kn">import</span> <span class="n">FollowWaypoints</span>
<span class="kn">from</span> <span class="n">rclpy.action</span> <span class="kn">import</span> <span class="n">ActionClient</span>
<span class="kn">from</span> <span class="n">tf_transformations</span> <span class="kn">import</span> <span class="n">quaternion_from_euler</span>

<span class="k">class</span> <span class="nc">WaypointFollower</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">super</span><span class="p">().</span><span class="nf">__init__</span><span class="p">(</span><span class="sh">'</span><span class="s">waypoint_follower</span><span class="sh">'</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">_action_client</span> <span class="o">=</span> <span class="nc">ActionClient</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">FollowWaypoints</span><span class="p">,</span> <span class="sh">'</span><span class="s">follow_waypoints</span><span class="sh">'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">define_waypoints</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">waypoints</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Waypoint 1
</span>        <span class="n">wp1</span> <span class="o">=</span> <span class="nc">PoseStamped</span><span class="p">()</span>
        <span class="n">wp1</span><span class="p">.</span><span class="n">header</span><span class="p">.</span><span class="n">frame_id</span> <span class="o">=</span> <span class="sh">'</span><span class="s">map</span><span class="sh">'</span>
        <span class="n">wp1</span><span class="p">.</span><span class="n">pose</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">6.0</span>
        <span class="n">wp1</span><span class="p">.</span><span class="n">pose</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mf">1.5</span>
        <span class="n">q</span> <span class="o">=</span> <span class="nf">quaternion_from_euler</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">wp1</span><span class="p">.</span><span class="n">pose</span><span class="p">.</span><span class="n">orientation</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">wp1</span><span class="p">.</span><span class="n">pose</span><span class="p">.</span><span class="n">orientation</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">wp1</span><span class="p">.</span><span class="n">pose</span><span class="p">.</span><span class="n">orientation</span><span class="p">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">wp1</span><span class="p">.</span><span class="n">pose</span><span class="p">.</span><span class="n">orientation</span><span class="p">.</span><span class="n">w</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">waypoints</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">wp1</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">waypoints</span>

    <span class="k">def</span> <span class="nf">send_goal</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">waypoints</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">define_waypoints</span><span class="p">()</span>
        <span class="n">goal_msg</span> <span class="o">=</span> <span class="n">FollowWaypoints</span><span class="p">.</span><span class="nc">Goal</span><span class="p">()</span>
        <span class="n">goal_msg</span><span class="p">.</span><span class="n">poses</span> <span class="o">=</span> <span class="n">waypoints</span>

        <span class="n">self</span><span class="p">.</span><span class="n">_action_client</span><span class="p">.</span><span class="nf">wait_for_server</span><span class="p">()</span>
        <span class="n">self</span><span class="p">.</span><span class="n">_send_goal_future</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_action_client</span><span class="p">.</span><span class="nf">send_goal_async</span><span class="p">(</span>
            <span class="n">goal_msg</span><span class="p">,</span> <span class="n">feedback_callback</span><span class="o">=</span><span class="n">self</span><span class="p">.</span><span class="n">feedback_callback</span>
        <span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">_send_goal_future</span><span class="p">.</span><span class="nf">add_done_callback</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">goal_response_callback</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">goal_response_callback</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">future</span><span class="p">):</span>
        <span class="n">goal_handle</span> <span class="o">=</span> <span class="n">future</span><span class="p">.</span><span class="nf">result</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">goal_handle</span><span class="p">.</span><span class="n">accepted</span><span class="p">:</span>
            <span class="n">self</span><span class="p">.</span><span class="nf">get_logger</span><span class="p">().</span><span class="nf">info</span><span class="p">(</span><span class="sh">'</span><span class="s">Goal rejected.</span><span class="sh">'</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">self</span><span class="p">.</span><span class="nf">get_logger</span><span class="p">().</span><span class="nf">info</span><span class="p">(</span><span class="sh">'</span><span class="s">Goal accepted.</span><span class="sh">'</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">_get_result_future</span> <span class="o">=</span> <span class="n">goal_handle</span><span class="p">.</span><span class="nf">get_result_async</span><span class="p">()</span>
        <span class="n">self</span><span class="p">.</span><span class="n">_get_result_future</span><span class="p">.</span><span class="nf">add_done_callback</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">get_result_callback</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">feedback_callback</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">feedback_msg</span><span class="p">):</span>
        <span class="n">feedback</span> <span class="o">=</span> <span class="n">feedback_msg</span><span class="p">.</span><span class="n">feedback</span>
        <span class="n">current_waypoint</span> <span class="o">=</span> <span class="n">feedback</span><span class="p">.</span><span class="n">current_waypoint</span>
        <span class="n">self</span><span class="p">.</span><span class="nf">get_logger</span><span class="p">().</span><span class="nf">info</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="s">Navigating to waypoint </span><span class="si">{</span><span class="n">current_waypoint</span><span class="si">}</span><span class="sh">'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_result_callback</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">future</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">future</span><span class="p">.</span><span class="nf">result</span><span class="p">().</span><span class="n">result</span>
        <span class="n">self</span><span class="p">.</span><span class="nf">get_logger</span><span class="p">().</span><span class="nf">info</span><span class="p">(</span><span class="sh">'</span><span class="s">Waypoint following completed.</span><span class="sh">'</span><span class="p">)</span>
        <span class="n">rclpy</span><span class="p">.</span><span class="nf">shutdown</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">rclpy</span><span class="p">.</span><span class="nf">init</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">)</span>
    <span class="n">waypoint_follower</span> <span class="o">=</span> <span class="nc">WaypointFollower</span><span class="p">()</span>
    <span class="n">waypoint_follower</span><span class="p">.</span><span class="nf">send_goal</span><span class="p">()</span>
    <span class="n">rclpy</span><span class="p">.</span><span class="nf">spin</span><span class="p">(</span><span class="n">waypoint_follower</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="sh">'</span><span class="s">__main__</span><span class="sh">'</span><span class="p">:</span>
    <span class="nf">main</span><span class="p">()</span>

</code></pre></div></div>

<p>The definition of the waypoints are identical to the config file we have, we define the <code class="language-plaintext highlighter-rouge">x</code>, <code class="language-plaintext highlighter-rouge">y</code> and <code class="language-plaintext highlighter-rouge">z</code> position and the orientation in a quaternion.</p>

<p>Let’s add the entry point to the <code class="language-plaintext highlighter-rouge">setup.py</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
        <span class="sh">'</span><span class="s">console_scripts</span><span class="sh">'</span><span class="p">:</span> <span class="p">[</span>
            <span class="sh">'</span><span class="s">send_initialpose = bme_ros2_navigation_py.send_initialpose:main</span><span class="sh">'</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">slam_toolbox_load_map = bme_ros2_navigation_py.slam_toolbox_load_map:main</span><span class="sh">'</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">follow_waypoints = bme_ros2_navigation_py.follow_waypoints:main</span><span class="sh">'</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">},</span>

</code></pre></div></div>

<p>Build the workspace, and we’ll need 3 terminals this time, one for the simulation:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_ros2_navigation spawn_robot.launch.py

</code></pre></div></div>

<p>Another terminal to launch the <code class="language-plaintext highlighter-rouge">navigation.launch.py</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_ros2_navigation navigation.launch.py

</code></pre></div></div>

<p>And in the third one:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run bme_ros2_navigation_py follow_waypoints

</code></pre></div></div>

<p>We can add more waypoints easily:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="bp">...</span>
        <span class="c1"># Waypoint 2
</span>        <span class="n">wp2</span> <span class="o">=</span> <span class="nc">PoseStamped</span><span class="p">()</span>
        <span class="n">wp2</span><span class="p">.</span><span class="n">header</span><span class="p">.</span><span class="n">frame_id</span> <span class="o">=</span> <span class="sh">'</span><span class="s">map</span><span class="sh">'</span>
        <span class="n">wp2</span><span class="p">.</span><span class="n">pose</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mf">2.0</span>
        <span class="n">wp2</span><span class="p">.</span><span class="n">pose</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="mf">8.0</span>
        <span class="n">q</span> <span class="o">=</span> <span class="nf">quaternion_from_euler</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.57</span><span class="p">)</span>
        <span class="n">wp2</span><span class="p">.</span><span class="n">pose</span><span class="p">.</span><span class="n">orientation</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">wp2</span><span class="p">.</span><span class="n">pose</span><span class="p">.</span><span class="n">orientation</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">wp2</span><span class="p">.</span><span class="n">pose</span><span class="p">.</span><span class="n">orientation</span><span class="p">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">wp2</span><span class="p">.</span><span class="n">pose</span><span class="p">.</span><span class="n">orientation</span><span class="p">.</span><span class="n">w</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">waypoints</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">wp2</span><span class="p">)</span>

        <span class="c1"># Waypoint 3
</span>        <span class="n">wp3</span> <span class="o">=</span> <span class="nc">PoseStamped</span><span class="p">()</span>
        <span class="n">wp3</span><span class="p">.</span><span class="n">header</span><span class="p">.</span><span class="n">frame_id</span> <span class="o">=</span> <span class="sh">'</span><span class="s">map</span><span class="sh">'</span>
        <span class="n">wp3</span><span class="p">.</span><span class="n">pose</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">wp3</span><span class="p">.</span><span class="n">pose</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">q</span> <span class="o">=</span> <span class="nf">quaternion_from_euler</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">wp3</span><span class="p">.</span><span class="n">pose</span><span class="p">.</span><span class="n">orientation</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">wp3</span><span class="p">.</span><span class="n">pose</span><span class="p">.</span><span class="n">orientation</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">wp3</span><span class="p">.</span><span class="n">pose</span><span class="p">.</span><span class="n">orientation</span><span class="p">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">wp3</span><span class="p">.</span><span class="n">pose</span><span class="p">.</span><span class="n">orientation</span><span class="p">.</span><span class="n">w</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">waypoints</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">wp3</span><span class="p">)</span>

        <span class="c1"># Add more waypoints as needed
</span><span class="bp">...</span>

</code></pre></div></div>

<p><a href="https://youtu.be/3OhAyDFqBIs"><img width="600" src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/youtube-waypoint-node.png"></a></p>

<h2 id="navigation-with-slam">Navigation with SLAM</h2>

<p>As we saw to navigate a mobile robot we need to know 2 things:</p>
<ol>
  <li>Knowing where the robot is (localization or SLAM),</li>
  <li>Knowing where it needs to go (a goal pose or waypoint)</li>
</ol>

<p>In the previous examples we used localization on a know map, but it’s also possible to navigate together with an online SLAM. It means we don’t know the complete environment around the robot but we can already navigate in the known surrounding.</p>

<p>Let’s create a <code class="language-plaintext highlighter-rouge">navigation_with_slam.launch.py</code> launch file where we start both the SLAM toolbox and the navigation stack:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">os</span>
<span class="kn">from</span> <span class="n">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">from</span> <span class="n">launch.actions</span> <span class="kn">import</span> <span class="n">DeclareLaunchArgument</span><span class="p">,</span> <span class="n">IncludeLaunchDescription</span>
<span class="kn">from</span> <span class="n">launch.conditions</span> <span class="kn">import</span> <span class="n">IfCondition</span>
<span class="kn">from</span> <span class="n">launch.launch_description_sources</span> <span class="kn">import</span> <span class="n">PythonLaunchDescriptionSource</span>
<span class="kn">from</span> <span class="n">launch.substitutions</span> <span class="kn">import</span> <span class="n">LaunchConfiguration</span><span class="p">,</span> <span class="n">PathJoinSubstitution</span><span class="p">,</span> <span class="n">Command</span>
<span class="kn">from</span> <span class="n">launch_ros.actions</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="kn">from</span> <span class="n">ament_index_python.packages</span> <span class="kn">import</span> <span class="n">get_package_share_directory</span>

<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>

    <span class="n">pkg_bme_ros2_navigation</span> <span class="o">=</span> <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">bme_ros2_navigation</span><span class="sh">'</span><span class="p">)</span>

    <span class="n">gazebo_models_path</span><span class="p">,</span> <span class="n">ignore_last_dir</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="n">pkg_bme_ros2_navigation</span><span class="p">)</span>
    <span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">[</span><span class="sh">"</span><span class="s">GZ_SIM_RESOURCE_PATH</span><span class="sh">"</span><span class="p">]</span> <span class="o">+=</span> <span class="n">os</span><span class="p">.</span><span class="n">pathsep</span> <span class="o">+</span> <span class="n">gazebo_models_path</span>

    <span class="n">rviz_launch_arg</span> <span class="o">=</span> <span class="nc">DeclareLaunchArgument</span><span class="p">(</span>
        <span class="sh">'</span><span class="s">rviz</span><span class="sh">'</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="sh">'</span><span class="s">true</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="sh">'</span><span class="s">Open RViz</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">rviz_config_arg</span> <span class="o">=</span> <span class="nc">DeclareLaunchArgument</span><span class="p">(</span>
        <span class="sh">'</span><span class="s">rviz_config</span><span class="sh">'</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="sh">'</span><span class="s">navigation.rviz</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="sh">'</span><span class="s">RViz config file</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">sim_time_arg</span> <span class="o">=</span> <span class="nc">DeclareLaunchArgument</span><span class="p">(</span>
        <span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="sh">'</span><span class="s">True</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="sh">'</span><span class="s">Flag to enable use_sim_time</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="c1"># Generate path to config file
</span>    <span class="n">interactive_marker_config_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span>
        <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">interactive_marker_twist_server</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">config</span><span class="sh">'</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">linear.yaml</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">nav2_navigation_launch_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span>
        <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">nav2_bringup</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">launch</span><span class="sh">'</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">navigation_launch.py</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">navigation_params_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span>
        <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">bme_ros2_navigation</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">config</span><span class="sh">'</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">navigation.yaml</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">slam_toolbox_params_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span>
        <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">bme_ros2_navigation</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">config</span><span class="sh">'</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">slam_toolbox_mapping.yaml</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="c1"># Launch rviz
</span>    <span class="n">rviz_node</span> <span class="o">=</span> <span class="nc">Node</span><span class="p">(</span>
        <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">rviz2</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">executable</span><span class="o">=</span><span class="sh">'</span><span class="s">rviz2</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">arguments</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">-d</span><span class="sh">'</span><span class="p">,</span> <span class="nc">PathJoinSubstitution</span><span class="p">([</span><span class="n">pkg_bme_ros2_navigation</span><span class="p">,</span> <span class="sh">'</span><span class="s">rviz</span><span class="sh">'</span><span class="p">,</span> <span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">rviz_config</span><span class="sh">'</span><span class="p">)])],</span>
        <span class="n">condition</span><span class="o">=</span><span class="nc">IfCondition</span><span class="p">(</span><span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">rviz</span><span class="sh">'</span><span class="p">)),</span>
        <span class="n">parameters</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span><span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">:</span> <span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">)},</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="n">interactive_marker_twist_server_node</span> <span class="o">=</span> <span class="nc">Node</span><span class="p">(</span>
        <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">interactive_marker_twist_server</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">executable</span><span class="o">=</span><span class="sh">'</span><span class="s">marker_server</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">twist_server_node</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="n">interactive_marker_config_file_path</span><span class="p">],</span>
        <span class="n">output</span><span class="o">=</span><span class="sh">'</span><span class="s">screen</span><span class="sh">'</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Path to the Slam Toolbox launch file
</span>    <span class="n">slam_toolbox_launch_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span>
        <span class="nf">get_package_share_directory</span><span class="p">(</span><span class="sh">'</span><span class="s">slam_toolbox</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">launch</span><span class="sh">'</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">online_async_launch.py</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="n">slam_toolbox_launch</span> <span class="o">=</span> <span class="nc">IncludeLaunchDescription</span><span class="p">(</span>
        <span class="nc">PythonLaunchDescriptionSource</span><span class="p">(</span><span class="n">slam_toolbox_launch_path</span><span class="p">),</span>
        <span class="n">launch_arguments</span><span class="o">=</span><span class="p">{</span>
                <span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">:</span> <span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">),</span>
                <span class="sh">'</span><span class="s">slam_params_file</span><span class="sh">'</span><span class="p">:</span> <span class="n">slam_toolbox_params_path</span><span class="p">,</span>
        <span class="p">}.</span><span class="nf">items</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="n">navigation_launch</span> <span class="o">=</span> <span class="nc">IncludeLaunchDescription</span><span class="p">(</span>
        <span class="nc">PythonLaunchDescriptionSource</span><span class="p">(</span><span class="n">nav2_navigation_launch_path</span><span class="p">),</span>
        <span class="n">launch_arguments</span><span class="o">=</span><span class="p">{</span>
                <span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">:</span> <span class="nc">LaunchConfiguration</span><span class="p">(</span><span class="sh">'</span><span class="s">use_sim_time</span><span class="sh">'</span><span class="p">),</span>
                <span class="sh">'</span><span class="s">params_file</span><span class="sh">'</span><span class="p">:</span> <span class="n">navigation_params_path</span><span class="p">,</span>
        <span class="p">}.</span><span class="nf">items</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="n">launchDescriptionObject</span> <span class="o">=</span> <span class="nc">LaunchDescription</span><span class="p">()</span>

    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">rviz_launch_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">rviz_config_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">sim_time_arg</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">rviz_node</span><span class="p">)</span>
    <span class="c1">#launchDescriptionObject.add_action(interactive_marker_twist_server_node)
</span>    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">slam_toolbox_launch</span><span class="p">)</span>
    <span class="n">launchDescriptionObject</span><span class="p">.</span><span class="nf">add_action</span><span class="p">(</span><span class="n">navigation_launch</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">launchDescriptionObject</span>

</code></pre></div></div>

<p>Build the workspace and let’s try it!</p>

<p>We’ll need 2 terminals as before, one for the simulation:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_ros2_navigation spawn_robot.launch.py

</code></pre></div></div>

<p>And in another terminal we launch the new <code class="language-plaintext highlighter-rouge">navigation_with_slam.launch.py</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_ros2_navigation navigation_with_slam.launch.py

</code></pre></div></div>

<p><img src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/navigation-slam.png" alt="alt text" title="Navigation with SLAM"></p>

<p><a href="https://youtu.be/gZrYEP2ctfY"><img width="600" src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/youtube-navigation-slam.png"></a></p>

<h1 id="exploration">Exploration</h1>

<p>Exploration is a process by which a robot operating in an unknown or partially known environment actively searches the space to gather new information. This is a real life use case to use SLAM together with the navigation stack.</p>

<p>There is a simple exploration package that we will use in this lesson, you can download it from the GitHub:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/MOGI-ROS/m-explore-ros2.git

</code></pre></div></div>

<p>Build the workspace and source the <code class="language-plaintext highlighter-rouge">setup.bash</code> to make sure ROS is aware about the new package!</p>

<p>We’ll need 3 terminals, one for the simulation:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_ros2_navigation spawn_robot.launch.py

</code></pre></div></div>

<p>In another terminal we launch the <code class="language-plaintext highlighter-rouge">navigation_with_slam.launch.py</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch bme_ros2_navigation navigation_with_slam.launch.py

</code></pre></div></div>

<p>And in the third one we launch the exploration:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch explore_lite explore.launch.py

</code></pre></div></div>

<p>The exploration node will identify the boundaries of the know surrounding and will navigate the robot until it finds all the physical boundaries of the environment.
<img src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/exploration.png" alt="alt text" title="Exploration"></p>

<p>We can take a look on the <code class="language-plaintext highlighter-rouge">rqt_graph</code> of the simulation, but we’ll see it’s quite big! We can find the exploration node and we can see that it subscribes to the <code class="language-plaintext highlighter-rouge">/map</code> and to the action status and feedback of the navigation stack.
<img src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/rqt-graph-1.png" alt="alt text" title="rqt_graph"></p>

<p>And finally here is a video about exploration:</p>

<p><a href="https://youtu.be/1jlpu-zfNac"><img width="600" src="https://raw.githubusercontent.com/mogi-ros/week-7-8-ros2-navigation/main/./assets/youtube-exploration.png"></a></p>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/week-7-8-ros2-navigation">week-7-8-ros2-navigation</a> <small>repository</small></h3>
        <span class="label label-default">localization</span> <span class="label label-default">navigation</span> <span class="label label-default">exploration</span> <span class="label label-default">gazebo</span> <span class="label label-default">slam</span> <span class="label label-default">harmonic</span> <span class="label label-default">amcl</span> <span class="label label-default">ros2</span> <span class="label label-default">mppi</span> <span class="label label-default">gazebosim</span> <span class="label label-default">slam-toolbox</span> <span class="label label-default">nav2</span> <span class="label label-default">ros2-jazzy</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mogi-ros-week-7-8-ros2-navigation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mogi-ros-week-7-8-ros2-navigation" role="menuitem" tabindex="-1" href="/r/week-7-8-ros2-navigation/github-mogi-ros-week-7-8-ros2-navigation" data="github-mogi-ros-week-7-8-ros2-navigation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mogi-ros-week-7-8-ros2-navigation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/week-7-8-ros2-navigation">week-7-8-ros2-navigation</a> <small>repository</small></h3>
        <span class="label label-default">localization</span> <span class="label label-default">navigation</span> <span class="label label-default">exploration</span> <span class="label label-default">gazebo</span> <span class="label label-default">slam</span> <span class="label label-default">harmonic</span> <span class="label label-default">amcl</span> <span class="label label-default">ros2</span> <span class="label label-default">mppi</span> <span class="label label-default">gazebosim</span> <span class="label label-default">slam-toolbox</span> <span class="label label-default">nav2</span> <span class="label label-default">ros2-jazzy</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mogi-ros-week-7-8-ros2-navigation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mogi-ros-week-7-8-ros2-navigation" role="menuitem" tabindex="-1" href="/r/week-7-8-ros2-navigation/github-mogi-ros-week-7-8-ros2-navigation" data="github-mogi-ros-week-7-8-ros2-navigation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mogi-ros-week-7-8-ros2-navigation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/week-7-8-ros2-navigation">week-7-8-ros2-navigation</a> <small>repository</small></h3>
        <span class="label label-default">localization</span> <span class="label label-default">navigation</span> <span class="label label-default">exploration</span> <span class="label label-default">gazebo</span> <span class="label label-default">slam</span> <span class="label label-default">harmonic</span> <span class="label label-default">amcl</span> <span class="label label-default">ros2</span> <span class="label label-default">mppi</span> <span class="label label-default">gazebosim</span> <span class="label label-default">slam-toolbox</span> <span class="label label-default">nav2</span> <span class="label label-default">ros2-jazzy</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mogi-ros-week-7-8-ros2-navigation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mogi-ros-week-7-8-ros2-navigation" role="menuitem" tabindex="-1" href="/r/week-7-8-ros2-navigation/github-mogi-ros-week-7-8-ros2-navigation" data="github-mogi-ros-week-7-8-ros2-navigation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mogi-ros-week-7-8-ros2-navigation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>iron</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/week-7-8-ros2-navigation">week-7-8-ros2-navigation</a> <small>repository</small></h3>
        <span class="label label-default">localization</span> <span class="label label-default">navigation</span> <span class="label label-default">exploration</span> <span class="label label-default">gazebo</span> <span class="label label-default">slam</span> <span class="label label-default">harmonic</span> <span class="label label-default">amcl</span> <span class="label label-default">ros2</span> <span class="label label-default">mppi</span> <span class="label label-default">gazebosim</span> <span class="label label-default">slam-toolbox</span> <span class="label label-default">nav2</span> <span class="label label-default">ros2-jazzy</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mogi-ros-week-7-8-ros2-navigation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mogi-ros-week-7-8-ros2-navigation" role="menuitem" tabindex="-1" href="/r/week-7-8-ros2-navigation/github-mogi-ros-week-7-8-ros2-navigation" data="github-mogi-ros-week-7-8-ros2-navigation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mogi-ros-week-7-8-ros2-navigation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/mogi-ros/week-7-8-ros2-navigation.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
