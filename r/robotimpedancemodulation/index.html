<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/robotimpedancemodulation/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">robotimpedancemodulation</li>
        <!--<li class="active">robotimpedancemodulation</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-default" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-default" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-default" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-default" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-primary" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class="disabled older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/robotimpedancemodulation">robotimpedancemodulation</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-advrhumanoids-robotimpedancemodulation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-advrhumanoids-robotimpedancemodulation" role="menuitem" tabindex="-1" href="/r/robotimpedancemodulation/github-advrhumanoids-robotimpedancemodulation" data="github-advrhumanoids-robotimpedancemodulation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-advrhumanoids-robotimpedancemodulation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>humble</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/robotimpedancemodulation">robotimpedancemodulation</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-advrhumanoids-robotimpedancemodulation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-advrhumanoids-robotimpedancemodulation" role="menuitem" tabindex="-1" href="/r/robotimpedancemodulation/github-advrhumanoids-robotimpedancemodulation" data="github-advrhumanoids-robotimpedancemodulation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-advrhumanoids-robotimpedancemodulation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jazzy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/robotimpedancemodulation">robotimpedancemodulation</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-advrhumanoids-robotimpedancemodulation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-advrhumanoids-robotimpedancemodulation" role="menuitem" tabindex="-1" href="/r/robotimpedancemodulation/github-advrhumanoids-robotimpedancemodulation" data="github-advrhumanoids-robotimpedancemodulation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-advrhumanoids-robotimpedancemodulation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>kilted</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/robotimpedancemodulation">robotimpedancemodulation</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-advrhumanoids-robotimpedancemodulation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-advrhumanoids-robotimpedancemodulation" role="menuitem" tabindex="-1" href="/r/robotimpedancemodulation/github-advrhumanoids-robotimpedancemodulation" data="github-advrhumanoids-robotimpedancemodulation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-advrhumanoids-robotimpedancemodulation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>rolling</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/robotimpedancemodulation">robotimpedancemodulation</a> <small>repository</small></h3>
        
        
        <a class="label label-primary pkg-label" href="/p/rim">rim</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-advrhumanoids-robotimpedancemodulation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-advrhumanoids-robotimpedancemodulation" role="menuitem" tabindex="-1" href="/r/robotimpedancemodulation/github-advrhumanoids-robotimpedancemodulation" data="github-advrhumanoids-robotimpedancemodulation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-advrhumanoids-robotimpedancemodulation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">A ROS2 package aimed to automatically compute robot impedance based on task execution.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/advrhumanoids/robotimpedancemodulation.git">https://github.com/advrhumanoids/robotimpedancemodulation.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-15
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNKNOWN
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/robotimpedancemodulation/#github-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/robotimpedancemodulation/#github-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/robotimpedancemodulation/#github-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/rim">rim</a></td>
                    <td>0.0.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="-robot-impedance-modulation">➤ Robot Impedance Modulation</h1>

<h2 id="introduction">Introduction</h2>
<p><strong>Robot Impedance Modulation</strong> is a <strong>ROS2</strong> based package aimed to help the community in calculating a <em>variable</em> impedance of a robot. 
Considering a robot having SEA motors, typically used for collaborative robots (Cobots), or a general robot controlled with the following control law</p>

\[\tau = K \\, (q^{ref} - q) - D \dot q + \tau^{ff},\]

<p>the package provides the required <strong>stiffness KK</strong> and <strong>damping DD</strong> (diagonal matrices) to be set in the motors or equivalently used to compute such a control law. By defining the 
required force and admissible error crucial for task execution, the robot impedance is accordingly designed. For further details on the algorithm, you can have a look at the related article 
available <a href="https://ieeexplore.ieee.org/abstract/document/10000215"><strong><em>here</em></strong></a>.</p>

<h2 id="outline">Outline</h2>
<ul>
  <li><a href="https://github.com/advrhumanoids/robotimpedancemodulation/tree/main/#introduction">Introduction</a></li>
  <li><a href="https://github.com/advrhumanoids/robotimpedancemodulation/tree/main/#outline">Outline</a></li>
  <li><a href="https://github.com/advrhumanoids/robotimpedancemodulation/tree/main/#how-to-use-it">How to Use It</a></li>
  <li><a href="https://github.com/advrhumanoids/robotimpedancemodulation/tree/main/#how-to-use-it">How to Configure It</a></li>
  <li><a href="https://github.com/advrhumanoids/robotimpedancemodulation/tree/main/#installation">Installation</a></li>
  <li><a href="https://github.com/advrhumanoids/robotimpedancemodulation/tree/main/#execution">Execution</a></li>
  <li><a href="https://github.com/advrhumanoids/robotimpedancemodulation/tree/main/#dependences">Dependences</a></li>
  <li><a href="https://github.com/advrhumanoids/robotimpedancemodulation/tree/main/#maintaner">Maintaner</a></li>
</ul>

<h2 id="how-to-use-it">How to Use It</h2>

<p>Here, an explanation of how to use the package is given. We start by providing the rationale behind it, and then we detail the practical usage.</p>

<p>As mentioned in the introduction, this package allows you to directly obtain the impedance parameters of a robot, i.e. the values of 
stiffness and damping for each joint <em>“j”</em> of the robot, kjk_j and djd_j, respectively. These values can be used either to set the motor parameters or to calculate the above control law. 
Classical approaches apply fixed values to design these parameters by a manual procedure of trials and errors. For real-time applications in dynamic environments, this procedure can not 
properly generate suitable robot reactions based on occurring changes maybe leading to the failure of the task execution. 
To overcome these drawbacks, here, the impedance modulation is intended to be designed in such a way as to <em>better</em> fit with the task to accomplish. 
For this purpose, by specifying the required force to exert and the precision demanded by the task, the package allows automatically computing a resulting 
<strong>time-varying</strong> and <strong><em>task</em>-varying</strong> robot impedance.</p>

<p>Based on that, we assume that the task to execute is described with</p>
<ul>
  <li>
<strong>force to execute</strong>: expressed as a wrench at the end-effector of the robot, 3D force vector, and 3D moment vector.</li>
  <li>
<strong>precision to satisfy</strong>: expressed as a pose error vector, 3D position error vector, and 3D orientation error vector (Euler angles RPY).</li>
  <li>
<strong>joints position reference vector</strong>: refers to the references of the joints position.</li>
  <li>
<strong>joints position vector</strong>: refers to the measurements of the joints position.</li>
</ul>

<p>For real-time applications, these quantities are expected to be time-varying, at least the joints position vector. Otherwise, the robot is expected to be fixed, and the calculation could not fit the task if it is executed.</p>

<p><strong>In order to properly use the package</strong>, it is required to provide:</p>
<ol>
  <li>the above information</li>
  <li>the model of the robot via standard URDF file.</li>
</ol>

<p>How to do that? how to provide this information, It is specified below.</p>

<p>The task force, precision, joints positions reference, and measurements are assumed to be sent via topic by a publisher using the custom message provided in the package and available in the <em>msg folder</em>. The name of the message is <em>TaskMsg.msg</em> and we report here its content</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bool cartesian_space
float64[] joints_position
float64[] joints_position_reference
float64[] task_pose_reference
float64[] task_wrench
float64[] task_precision

</code></pre></div></div>

<p>By filling these fields, and cyclically sending them on a topic, the package computes the required stiffness and damping to be used. As you can notice, we give the possibility to specify the 
desired robot configuration in terms of the Cartesian pose of the end-effector. By putting true to the boolean cartesian_space, the package will ignore the field <code class="language-plaintext highlighter-rouge">joints_position_reference</code> and it will use <code class="language-plaintext highlighter-rouge">task_pose_reference</code> expressed as translation and orientation. The orientation is required to be expressed in Euler angles RPY and in radiants.</p>

<p>[ATTENTION] Due to the technical details of the implemented algorithm, the package will further provide a torque to be sent to the motors as well. This is due to two reasons, one is related to the control theory and the second is due to practical reasons. Specifically, to determine a robot impedance that satisfies task requirements, the algorithm computes a full stiffness matrix. To realize the computed stiffness thus is required to send to the motors this additional torque.</p>

<p>The result of the calculated impedance is sent via message on a topic. The message sent is a custom message and it is provided in the package as well. It is named <em>ImpedanceMsg.msg</em> and it is in the <em>msg folder</em>. Its content is</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>float64[] robot_stiffness
float64[] robot_damping
float64[] robot_feedforward_torque

</code></pre></div></div>

<p>So, by subscribing to the message you can use these values to control your robot by setting these values in the motors.</p>

<h2 id="how-to-configure-it">How to Configure It</h2>

<p>As we have seen, to use the package, it is necessary to</p>

<ol>
  <li>Have a URDF file of the robot.</li>
  <li>Send a message to give the task information.</li>
  <li>Retrieve the result by listening to a topic.</li>
</ol>

<p>But, to make everything effectively working we need to properly configure the package before using it. In particular, it is required to</p>

<ol>
  <li>provide the URDF file by specifying the path where the file is.</li>
  <li>set the names of the topics.</li>
  <li>set the initial configuration of the robot, defined in terms of joint position at the initial instant time.</li>
  <li>set the maximum stiffness and damping available by the motors.</li>
  <li>set the preset stiffness and damping configured in the robot.</li>
  <li>set the initial force and precision to set on the robot.</li>
  <li>specify the base frame of the kinematic chain intended to control (the same as in the URDF file).</li>
  <li>specify the tip frame of the kinematic chain intended to control (the same as in the URDF file).</li>
  <li>set the transition time (seconds) during which the impedance of the robot is adjusted from its preset values to the one intended to start the task. This is to ensure the smoothness of the impedance profiles. Messages related to this phase will be sent on the topic and must be actuated.</li>
  <li>set the rate of the plugin.</li>
  <li>set the path where you would like to save the logs (the package provides them).</li>
  <li>set the verbose mode if you like.</li>
</ol>

<p>This can be simply done just by inserting the proper values in the configuration file. The file is named <em>impedance_modulation_settings.yaml</em> present in the <em>config folder</em>. The ROS node will start by loading these parameters. Here, we report its content</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">/robot/impedance_settings</span><span class="pi">:</span>
  <span class="na">ros__parameters</span><span class="pi">:</span>
    <span class="na">robot_initial_config</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0.0</span><span class="pi">,</span><span class="nv">-1.56</span><span class="pi">,</span><span class="nv">0.9</span><span class="pi">,</span><span class="nv">0.2</span><span class="pi">,</span><span class="nv">-0.5</span><span class="pi">,</span><span class="nv">1.12</span><span class="pi">]</span>
    <span class="na">stiffness_preset</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">100.0</span><span class="pi">,</span><span class="nv">100.0</span><span class="pi">,</span><span class="nv">100.0</span><span class="pi">,</span><span class="nv">100.0</span><span class="pi">,</span><span class="nv">100.0</span><span class="pi">,</span><span class="nv">100.0</span><span class="pi">]</span>
    <span class="na">stiffness_constant</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">200.0</span><span class="pi">,</span><span class="nv">200.0</span><span class="pi">,</span><span class="nv">200.0</span><span class="pi">,</span><span class="nv">200.0</span><span class="pi">,</span><span class="nv">200.0</span><span class="pi">,</span><span class="nv">200.0</span><span class="pi">]</span>
    <span class="na">stiffness_maximum</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">2000.0</span><span class="pi">,</span><span class="nv">2000.0</span><span class="pi">,</span><span class="nv">2000.0</span><span class="pi">,</span><span class="nv">2000.0</span><span class="pi">,</span><span class="nv">2000.0</span><span class="pi">,</span><span class="nv">2000.0</span><span class="pi">]</span>
    <span class="na">damping_preset</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">100.0</span><span class="pi">,</span><span class="nv">100.0</span><span class="pi">,</span><span class="nv">100.0</span><span class="pi">,</span><span class="nv">100.0</span><span class="pi">,</span><span class="nv">100.0</span><span class="pi">,</span><span class="nv">100.0</span><span class="pi">]</span>
    <span class="na">damping_maximum</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">50.0</span><span class="pi">,</span><span class="nv">50.0</span><span class="pi">,</span><span class="nv">50.0</span><span class="pi">,</span><span class="nv">50.0</span><span class="pi">,</span><span class="nv">50.0</span><span class="pi">,</span><span class="nv">50.0</span><span class="pi">]</span>
    <span class="na">wrench_initial</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0.0</span><span class="pi">,</span><span class="nv">0.0</span><span class="pi">,</span><span class="nv">0.0</span><span class="pi">,</span><span class="nv">0.0</span><span class="pi">,</span><span class="nv">0.0</span><span class="pi">,</span><span class="nv">0.0</span><span class="pi">]</span>
    <span class="na">precision_initial</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0.1</span><span class="pi">,</span><span class="nv">0.1</span><span class="pi">,</span><span class="nv">0.1</span><span class="pi">,</span><span class="nv">0.1</span><span class="pi">,</span><span class="nv">0.1</span><span class="pi">,</span><span class="nv">0.1</span><span class="pi">]</span>
    <span class="na">robot_urdf_model_path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/home/liana/ros2_humble/src/ROS2UtilityNodes/urdf/inail2arm.urdf"</span>
    <span class="na">robot_base_frame_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">base_link"</span>
    <span class="na">robot_tip_frame_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">arm1_6"</span>
    <span class="na">topic_subscriber_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/robot/task_planning"</span>
    <span class="na">topic_publisher_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">impedance_planning"</span>
    <span class="na">transition_time</span><span class="pi">:</span> <span class="m">10.0</span>
    <span class="na">rate</span><span class="pi">:</span> <span class="m">1000</span>
    <span class="na">log_path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/tmp/impedance_planner"</span>
    <span class="na">verbose</span><span class="pi">:</span> <span class="kc">true</span>

</code></pre></div></div>

<p>The values here are just an example. You have to make the proper changes. Please, do not touch any names (the green ones), just modify the fields (the blue ones).</p>

<h2 id="installation">Installation</h2>
<p><strong>To Install</strong> Variable Impedance Modulation Package run</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">git clone https://github.com/ADVRHumanoids/RobotImpedanceModulation.git

</span></code></pre></div></div>
<p>inside the <em><strong>src folder</strong></em> of the workspace run</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">colcon build

</span></code></pre></div></div>

<h2 id="execution">Execution</h2>
<p>To execute the code, just run:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">ros2 launch rim impedance_modulation.launch.py

</span></code></pre></div></div>

<p>Remember to source <code class="language-plaintext highlighter-rouge">install/setup.sh</code>, by simply</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">source install/setup.sh

</span></code></pre></div></div>
<p>inside the principal folder. If everything has been properly set, you should have an output similar to</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">liana:~/ros2_humble$</span><span class="w"> </span>ros2 launch rim impedance_modulation.launch.py 
<span class="go">[INFO] [launch]: All log files can be found below /home/liana/.ros/log/2023-07-08-15-45-00-723821-liana-MS-7820-20325
[INFO] [launch]: Default logging verbosity is set to INFO
[INFO] [ImpedanceModulation-1]: process started with pid [20326]
[ImpedanceModulation-1] [INFO] [1688823900.952604282] [robot.impedance_settings]: I am initializing the ROS node...
[ImpedanceModulation-1] 
[ImpedanceModulation-1] Worked for 0.00 sec (0.0 MB flushed)....average load is -nan 
[ImpedanceModulation-1] [INFO] [1688823900.983917845] [robot.impedance_settings]: I am loading the ROS node params...
[ImpedanceModulation-1] 
[ImpedanceModulation-1] [INFO] [1688823900.990769844] [robot.impedance_settings]: I am initializing the robot impedance...
[ImpedanceModulation-1] 
[ImpedanceModulation-1] Created variable 'EEwrench' (20 blocks, 500 elem each)
[ImpedanceModulation-1] Created variable 'EETaskwrench' (20 blocks, 500 elem each)
[ImpedanceModulation-1] Created variable 'TaskErrorDesired' (20 blocks, 500 elem each)
[ImpedanceModulation-1] Created variable 'CartesianStiffness' (20 blocks, 500 elem each)
[ImpedanceModulation-1] Created variable 'JointStiffness' (20 blocks, 500 elem each)
[ImpedanceModulation-1] Created variable 'JointDamping' (20 blocks, 500 elem each)
[ImpedanceModulation-1] Created variable 'FeedforwardTorque' (20 blocks, 500 elem each)
[ImpedanceModulation-1] Created variable 'JointsPosition' (20 blocks, 500 elem each)
[ImpedanceModulation-1] Created variable 'JointsPositionReference' (20 blocks, 500 elem each)
[ImpedanceModulation-1] Worked for 0.02 sec (2.6 MB flushed)....average load is 0.00 
[ImpedanceModulation-1] ------------------------------------------------------------------------------
[ImpedanceModulation-1] Robot Impedance Modulation started! Ready to accept task planning...

</span></code></pre></div></div>

<p>If yes, then your package is listening to messages and ready to compute the impedance.</p>

<h2 id="dependences">Dependences</h2>
<p>The Robot Impedance Modulation requires the following dependencies:</p>
<ul>
  <li>
<a href="https://eigen.tuxfamily.org/index.php?title=Main_Page">Eigen</a>: to handle with basic algebra;</li>
  <li>
<a href="https://github.com/ADVRHumanoids/MatLogger2">MatLogger2</a>: to log data;</li>
  <li>
<a href="https://www.orocos.org/kdl.html">KDL</a>: to handle robot quantities.</li>
</ul>

<h2 id="maintaner">Maintaner</h2>

<table>
  <thead>
    <tr>
      <th style="text-align: center"><img src="https://avatars0.githubusercontent.com/u/15608027?s=400&amp;u=aa95697b36504a10aeff4bf95d5d2f355ae94f07&amp;v=4" width="180"></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">Liana Bertoni</td>
    </tr>
    <tr>
      <td style="text-align: center">liana.bertoni at iit.it</td>
    </tr>
  </tbody>
</table>

</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <em>No CONTRIBUTING.md found.</em>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/robotimpedancemodulation">robotimpedancemodulation</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-advrhumanoids-robotimpedancemodulation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-advrhumanoids-robotimpedancemodulation" role="menuitem" tabindex="-1" href="/r/robotimpedancemodulation/github-advrhumanoids-robotimpedancemodulation" data="github-advrhumanoids-robotimpedancemodulation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-advrhumanoids-robotimpedancemodulation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/robotimpedancemodulation">robotimpedancemodulation</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-advrhumanoids-robotimpedancemodulation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-advrhumanoids-robotimpedancemodulation" role="menuitem" tabindex="-1" href="/r/robotimpedancemodulation/github-advrhumanoids-robotimpedancemodulation" data="github-advrhumanoids-robotimpedancemodulation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-advrhumanoids-robotimpedancemodulation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/robotimpedancemodulation">robotimpedancemodulation</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-advrhumanoids-robotimpedancemodulation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-advrhumanoids-robotimpedancemodulation" role="menuitem" tabindex="-1" href="/r/robotimpedancemodulation/github-advrhumanoids-robotimpedancemodulation" data="github-advrhumanoids-robotimpedancemodulation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-advrhumanoids-robotimpedancemodulation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>iron</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/robotimpedancemodulation">robotimpedancemodulation</a> <small>repository</small></h3>
        
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-advrhumanoids-robotimpedancemodulation
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-advrhumanoids-robotimpedancemodulation" role="menuitem" tabindex="-1" href="/r/robotimpedancemodulation/github-advrhumanoids-robotimpedancemodulation" data="github-advrhumanoids-robotimpedancemodulation">
                    <span class="glyphicon glyphicon-star"></span>
                    github-advrhumanoids-robotimpedancemodulation
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/advrhumanoids/robotimpedancemodulation.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
