<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/r/ros2_benchmark/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">ros2_benchmark</li>
        <!--<li class="active">ros2_benchmark</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-default" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-default" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-default" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-default" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-primary" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class="disabled older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros2_benchmark">ros2_benchmark</a> <small>repository</small></h3>
        <span class="label label-default">benchmarking</span> <span class="label label-default">performance</span> <span class="label label-default">performance-testing</span> <span class="label label-default">ros2</span> <span class="label label-default">ros2-humble</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-nvidia-isaac-ros-ros2_benchmark
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-nvidia-isaac-ros-ros2_benchmark" role="menuitem" tabindex="-1" href="/r/ros2_benchmark/github-nvidia-isaac-ros-ros2_benchmark" data="github-nvidia-isaac-ros-ros2_benchmark">
                    <span class="glyphicon glyphicon-star"></span>
                    github-nvidia-isaac-ros-ros2_benchmark
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>humble</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros2_benchmark">ros2_benchmark</a> <small>repository</small></h3>
        <span class="label label-default">benchmarking</span> <span class="label label-default">performance</span> <span class="label label-default">performance-testing</span> <span class="label label-default">ros2</span> <span class="label label-default">ros2-humble</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-nvidia-isaac-ros-ros2_benchmark
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-nvidia-isaac-ros-ros2_benchmark" role="menuitem" tabindex="-1" href="/r/ros2_benchmark/github-nvidia-isaac-ros-ros2_benchmark" data="github-nvidia-isaac-ros-ros2_benchmark">
                    <span class="glyphicon glyphicon-star"></span>
                    github-nvidia-isaac-ros-ros2_benchmark
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jazzy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros2_benchmark">ros2_benchmark</a> <small>repository</small></h3>
        <span class="label label-default">benchmarking</span> <span class="label label-default">performance</span> <span class="label label-default">performance-testing</span> <span class="label label-default">ros2</span> <span class="label label-default">ros2-humble</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-nvidia-isaac-ros-ros2_benchmark
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-nvidia-isaac-ros-ros2_benchmark" role="menuitem" tabindex="-1" href="/r/ros2_benchmark/github-nvidia-isaac-ros-ros2_benchmark" data="github-nvidia-isaac-ros-ros2_benchmark">
                    <span class="glyphicon glyphicon-star"></span>
                    github-nvidia-isaac-ros-ros2_benchmark
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>kilted</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros2_benchmark">ros2_benchmark</a> <small>repository</small></h3>
        <span class="label label-default">benchmarking</span> <span class="label label-default">performance</span> <span class="label label-default">performance-testing</span> <span class="label label-default">ros2</span> <span class="label label-default">ros2-humble</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-nvidia-isaac-ros-ros2_benchmark
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-nvidia-isaac-ros-ros2_benchmark" role="menuitem" tabindex="-1" href="/r/ros2_benchmark/github-nvidia-isaac-ros-ros2_benchmark" data="github-nvidia-isaac-ros-ros2_benchmark">
                    <span class="glyphicon glyphicon-star"></span>
                    github-nvidia-isaac-ros-ros2_benchmark
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>rolling</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros2_benchmark">ros2_benchmark</a> <small>repository</small></h3>
        <span class="label label-default">benchmarking</span> <span class="label label-default">performance</span> <span class="label label-default">performance-testing</span> <span class="label label-default">ros2</span> <span class="label label-default">ros2-humble</span> 
        
        <a class="label label-primary pkg-label" href="/p/ros2_benchmark">ros2_benchmark</a>
        
        <a class="label label-primary pkg-label" href="/p/ros2_benchmark_interfaces">ros2_benchmark_interfaces</a>
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-nvidia-isaac-ros-ros2_benchmark
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-nvidia-isaac-ros-ros2_benchmark" role="menuitem" tabindex="-1" href="/r/ros2_benchmark/github-nvidia-isaac-ros-ros2_benchmark" data="github-nvidia-isaac-ros-ros2_benchmark">
                    <span class="glyphicon glyphicon-star"></span>
                    github-nvidia-isaac-ros-ros2_benchmark
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Benchmark the performance of your ROS 2 graphs</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/nvidia-isaac-ros/ros2_benchmark.git">https://github.com/nvidia-isaac-ros/ros2_benchmark.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-02-28
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNKNOWN
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">benchmarking</span> <span class="label label-default">performance</span> <span class="label label-default">performance-testing</span> <span class="label label-default">ros2</span> <span class="label label-default">ros2-humble</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ros2_benchmark/#github-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros2_benchmark/#github-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ros2_benchmark/#github-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ros2_benchmark">ros2_benchmark</a></td>
                    <td>3.2.5</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/ros2_benchmark_interfaces">ros2_benchmark_interfaces</a></td>
                    <td>3.2.5</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="ros2_benchmark">ros2_benchmark</h1>

<div align="center"><img alt="ros2_benchmark introduction" src="https://raw.githubusercontent.com/nvidia-isaac-ros/ros2_benchmark/main/resources/ros2_benchmark_intro.png" width="500px"></div>

<h2 id="overview">Overview</h2>

<p>Robots are real-time systems which require complex graphs of heterogeneous computation to perform perception, planning, and control. These graphs of computation need to perform work deterministically and with known latency. The computing platform has a fixed budget for heterogeneous computation (TOPS) and throughput; computation is typically performed on multiple CPUs, GPUs, and additional special purpose, fixed function hardware accelerators.</p>

<p><code class="language-plaintext highlighter-rouge">ros2_benchmark</code> provides the tools for measuring the throughput, latency, and compute utilization of these complex graphs without altering the code under test. The results can be used to make informed design decisions on how best a robotics application can meet its real-time requirements. Results can be used to optimize system performance by tracking results over time against changes in the implementation and can be used in the development of program flow monitors to detect anomalies during operation of the real-time robotics application.</p>

<p>This tooling allows for realistic assessments of robotics application performance under load including message transport costs in <a href="https://github.com/ros2/rclcpp">RCL</a> for practical benchmarking indicative of your real-world results. Message transport costs can be measured intra-process or inter-process including DDS overhead with support for <a href="https://ros.org/reps/rep-2007.html">type adaptation</a>. This tooling does not require modification of the graph of nodes under test to measure results, allowing both open source and proprietary solutions to be measured with the same tools in an non-intrusive way. Input for benchmarking is standardized with available rosbag datasets accompanying this package.</p>

<p>Designed for local developer use or in CI/CD platforms, these tools can be containerized to run on cloud native platforms such as Kubernetes. The tools are commercially hardened over tens of thousands of runs. We use this nightly on 7 hardware platforms using <code class="language-plaintext highlighter-rouge">aarch64</code> and <code class="language-plaintext highlighter-rouge">x86_64</code> architectures on multiple graph configurations.</p>

<div align="center"><img alt="ros2_benchmark architecture" src="https://raw.githubusercontent.com/nvidia-isaac-ros/ros2_benchmark/main/resources/ros2_benchmark_arch.png" width="800px"></div>
<div align="center"><i><code>ros2_benchmark</code> uses the benchmark controller to orchestrate the data loader, playback and monitor nodes to perform benchmark runs, and calculate performance results into a benchmark report.

<br>
The data loader node fetches input data from rosbag. Input data is pre-processed using a configurable graph of nodes, and buffered into memory in the playback node which supports a plug-in for type adaptation. The graph benchmarked runs unmodified with input from the playback node controlling the data rate to output received at the monitor node.</i></div>

<div align="center"><img alt="ros2_benchmark flow" src="https://raw.githubusercontent.com/nvidia-isaac-ros/ros2_benchmark/main/resources/ros2_benchmark_flow.png" width="900px"></div>
<div align="center"><i><code>ros2_benchmark</code> loads data from rosbag(s), performs any data pre-processing using a graph of ros nodes, and buffers the input data for benchmarking. If measuring peak throughput, the auto finder runs the graph under benchmark at multiple publisher rates to find the maximum publisher rate with less than 5% drops through the graph, otherwise it uses the specified fixed publishing rate or the timing from the rosbag.

<br>
The graph under benchmark is measured multiple times, with calculated results in a benchmark report.</i></div>

<h2 id="table-of-contents">Table of Contents</h2>

<ul>
  <li>
<a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/#ros2_benchmark">ros2_benchmark</a>
    <ul>
      <li><a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/#overview">Overview</a></li>
      <li><a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/#table-of-contents">Table of Contents</a></li>
      <li><a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/#latest-update">Latest Update</a></li>
      <li><a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/#supported-platforms">Supported Platforms</a></li>
      <li><a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/#quickstart">Quickstart</a></li>
      <li>
<a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/#datasets">Datasets</a>
        <ul>
          <li><a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/#r2b-dataset-2024">r2b Dataset 2024</a></li>
          <li><a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/#r2b-dataset-2023">r2b Dataset 2023</a></li>
        </ul>
      </li>
      <li>
<a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/#results">Results</a>
        <ul>
          <li><a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/#example-results">Example Results</a></li>
          <li><a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/#explanation-of-the-results-json-format">Explanation of the Results JSON Format</a></li>
        </ul>
      </li>
      <li><a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/#creating-custom-benchmark">Creating Custom Benchmark</a></li>
      <li><a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/#profiling">Profiling</a></li>
      <li><a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/#live-benchmark-mode">Live Benchmark Mode</a></li>
      <li><a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/#updates">Updates</a></li>
    </ul>
  </li>
</ul>

<h2 id="latest-update">Latest Update</h2>

<p>Update 2023-11-16: Add support for live benchmark mode</p>

<h2 id="supported-platforms">Supported Platforms</h2>

<p>This package is designed and tested to be compatible aarch64 and x86_64 platforms using ROS 2 Humble.</p>

<table>
  <thead>
    <tr>
      <th>Platform hardware</th>
      <th>Platform software</th>
      <th>ROS Version</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>aarch64 <br> x86_64</td>
      <td><a href="https://releases.ubuntu.com/20.04/">Ubuntu 20.04+</a></td>
      <td><a href="https://docs.ros.org/en/humble/index.html">ROS 2 Humble</a></td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p><strong>Note</strong>: <code class="language-plaintext highlighter-rouge">ros2_benchmark</code> has been tested on multiple computing platforms including <a href="https://ark.intel.com/content/www/us/en/ark/products/228816/intel-nuc-11-enterprise-edge-compute-nuc11tnhv70l.html">Intel NUC Corei7 11th Gen</a> and <a href="https://www.nvidia.com/en-us/autonomous-machines/embedded-systems/jetson-orin/">Jetson Orin</a>.</p>
</blockquote>

<h2 id="quickstart">Quickstart</h2>

<p>To use and learn to use <code class="language-plaintext highlighter-rouge">ros2_benchmark</code>, start by running a sample benchmark. Follow the steps below to start measuring the performance of an AprilTag node with <code class="language-plaintext highlighter-rouge">ros2_benchmark</code>.</p>

<ol>
  <li>Install ROS 2 Humble natively (see <a href="https://docs.ros.org/en/humble/Installation.html">here</a>) or launch official Docker container with ROS 2 Humble pre-installed:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    docker run <span class="nt">-it</span> ros:humble
    
</code></pre></div></div>

<ol>
  <li>Setup convenience environment variables and install tools.</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nb">export </span><span class="nv">R2B_WS_HOME</span><span class="o">=</span>~/ros_ws <span class="o">&amp;&amp;</span> <span class="se">\</span>
    <span class="nb">export </span><span class="nv">ROS2_BENCHMARK_OVERRIDE_ASSETS_ROOT</span><span class="o">=</span><span class="nv">$R2B_WS_HOME</span>/src/ros2_benchmark/assets <span class="o">&amp;&amp;</span> <span class="se">\</span>
    <span class="nb">sudo </span>apt-get update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="nt">-y</span> git git-lfs wget
    
</code></pre></div></div>

<ol>
  <li>Clone this repository along with an available implementation of Apriltag detection and install dependencies.</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nb">mkdir</span> <span class="nt">-p</span> <span class="nv">$R2B_WS_HOME</span>/src <span class="o">&amp;&amp;</span> <span class="nb">cd</span> <span class="nv">$R2B_WS_HOME</span>/src <span class="o">&amp;&amp;</span> <span class="se">\</span>
        git clone https://github.com/NVIDIA-ISAAC-ROS/ros2_benchmark.git <span class="o">&amp;&amp;</span> <span class="se">\</span>
        git clone https://github.com/christianrauch/apriltag_ros.git <span class="o">&amp;&amp;</span> <span class="se">\</span>
    <span class="nb">cd</span> <span class="nv">$R2B_WS_HOME</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
        <span class="nb">sudo </span>apt-get update <span class="o">&amp;&amp;</span> <span class="se">\</span>
        rosdep update <span class="o">&amp;&amp;</span> rosdep <span class="nb">install</span> <span class="nt">-i</span> <span class="nt">-r</span> <span class="nt">--from-paths</span> src <span class="nt">--rosdistro</span> humble <span class="nt">-y</span>
    
</code></pre></div></div>

<ol>
  <li>Clone and build <code class="language-plaintext highlighter-rouge">image_proc</code> package with patch to fix incompatible QoS settings.</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nb">cd</span> <span class="nv">$R2B_WS_HOME</span>/src <span class="o">&amp;&amp;</span> <span class="se">\</span>
      git clone https://github.com/ros-perception/vision_opencv.git <span class="o">&amp;&amp;</span> <span class="nb">cd </span>vision_opencv <span class="o">&amp;&amp;</span> git checkout humble <span class="o">&amp;&amp;</span> <span class="se">\</span>
    <span class="nb">cd</span> <span class="nv">$R2B_WS_HOME</span>/src <span class="o">&amp;&amp;</span> <span class="se">\</span>
      git clone https://github.com/ros-perception/image_pipeline.git <span class="o">&amp;&amp;</span> <span class="nb">cd </span>image_pipeline <span class="o">&amp;&amp;</span> git checkout humble <span class="o">&amp;&amp;</span> <span class="se">\</span>
      git config user.email <span class="s2">"benchmarking@ros2_benchmark.com"</span> <span class="o">&amp;&amp;</span> git config user.name <span class="s2">"ROS 2 Developer"</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
      wget https://raw.githubusercontent.com/NVIDIA-ISAAC-ROS/ros2_benchmark/main/resources/patch/resize_qos_profile.patch <span class="o">&amp;&amp;</span> <span class="se">\</span>
      git apply resize_qos_profile.patch <span class="o">&amp;&amp;</span> <span class="se">\</span>
    <span class="nb">cd</span> <span class="nv">$R2B_WS_HOME</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
      <span class="nb">sudo </span>apt-get update <span class="o">&amp;&amp;</span> <span class="se">\</span>
      rosdep update <span class="o">&amp;&amp;</span> rosdep <span class="nb">install</span> <span class="nt">-i</span> <span class="nt">-r</span> <span class="nt">--from-paths</span> src <span class="nt">--rosdistro</span> humble <span class="nt">-y</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
      colcon build <span class="nt">--packages-up-to</span> image_proc
    
</code></pre></div></div>

<ol>
  <li>Pull down <code class="language-plaintext highlighter-rouge">r2b dataset 2023</code> by following the instructions <a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/#datasets">here</a> or fetch just the rosbag used in this Quickstart with the following command.</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nb">mkdir</span> <span class="nt">-p</span> <span class="nv">$R2B_WS_HOME</span>/src/ros2_benchmark/assets/datasets/r2b_dataset/r2b_storage <span class="o">&amp;&amp;</span> <span class="se">\</span>
    <span class="nb">cd</span> <span class="nv">$R2B_WS_HOME</span>/src/ros2_benchmark/assets/datasets/r2b_dataset/r2b_storage <span class="o">&amp;&amp;</span> <span class="se">\</span>
      wget <span class="nt">--content-disposition</span> <span class="s1">'https://api.ngc.nvidia.com/v2/resources/nvidia/isaac/r2bdataset2023/versions/2/files/r2b_storage/metadata.yaml'</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
      wget <span class="nt">--content-disposition</span> <span class="s1">'https://api.ngc.nvidia.com/v2/resources/nvidia/isaac/r2bdataset2023/versions/2/files/r2b_storage/r2b_storage_0.db3'</span>
    
</code></pre></div></div>

<ol>
  <li>Build <code class="language-plaintext highlighter-rouge">ros2_benchmark</code> and source the workspace:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nb">cd</span> <span class="nv">$R2B_WS_HOME</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
      colcon build <span class="nt">--packages-up-to</span> ros2_benchmark apriltag_ros <span class="o">&amp;&amp;</span> <span class="se">\</span>
      <span class="nb">source install</span>/setup.bash
    
</code></pre></div></div>

<ol>
  <li>(Optional) Run tests to verify complete and correct installation:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    colcon <span class="nb">test</span> <span class="nt">--packages-select</span> ros2_benchmark
    
</code></pre></div></div>

<ol>
  <li>Start the AprilTag benchmark:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    launch_test src/ros2_benchmark/scripts/apriltag_ros_apriltag_node.py
    
</code></pre></div></div>

<p>Once the benchmark is finished, the final performance measurements are displayed in the terminal.
Additionally, the final results and benchmark metadata (e.g., system information, benchmark configurations) are also exported as a JSON file.</p>

<h2 id="datasets">Datasets</h2>

<p>Input data for benchmarking is provided in a rosbag.</p>

<p>To provide consistency of results, we have provided multiple dataset sequences in rosbag for use with <code class="language-plaintext highlighter-rouge">ros2_benchmark</code>; input data in other rosbag(s) can be used. These dataset sequences were captured on a robot, using very high precision time synchronization between sensors.  Captured sensor data includes <a href="https://www.leopardimaging.com/li-ar0234cs-stereo-gmsl2-hawk/">HAWK (2mp RGB stereo camera with IMU)</a>, <a href="https://www.intelrealsense.com/depth-camera-d455/">D455</a> and <a href="https://www.hesaitech.com/product/xt32/">XT32</a>.</p>

<p>These datasets are explicitly <strong>not</strong> provided inside this repository. Instead, visit NGC to download the dataset <a href="https://catalog.ngc.nvidia.com/orgs/nvidia/teams/isaac/collections/r2bdataset">here</a>.</p>

<p>You can also download the datasets with command-line tools as follows by first installing the NGC CLI.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget <span class="nt">--content-disposition</span> https://ngc.nvidia.com/downloads/ngccli_linux.zip <span class="o">&amp;&amp;</span> unzip ngccli_linux.zip <span class="o">&amp;&amp;</span> <span class="nb">chmod </span>u+x ngc-cli/ngc

</code></pre></div></div>

<p>With the NGC CLI available, you can download the datasets with the following commands:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./ngc-cli/ngc registry resource download-version <span class="s2">"nvidia/isaac/r2bdataset2023:3"</span>
./ngc-cli/ngc registry resource download-version <span class="s2">"nvidia/isaac/r2bdataset2024:1"</span>

</code></pre></div></div>

<p>Then, move the datasets to their required location:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>assets/datasets/r2b_dataset
<span class="nb">mv </span>r2bdataset2023_v3/<span class="k">*</span> assets/datasets/r2b_dataset
<span class="nb">mv </span>r2bdataset2024_v1/<span class="k">*</span> assets/datasets/r2b_dataset

</code></pre></div></div>

<h3 id="r2b-dataset-2024">r2b Dataset 2024</h3>
<p>| Sequence                                                                                           | Size | Visual                                                                                                                                                                                    | Contents                                                                                                                          | Description                                                                                            |
| ————————————————————————————————– | —- | —————————————————————————————————————————————————————————————– | ——————————————————————————————————————————— | —————————————————————————————————— |
| <a href="https://catalog.ngc.nvidia.com/orgs/nvidia/teams/isaac/resources/r2bdataset2024">r2b_galileo</a>     | 471M | <img alt="galileo sequence" src="https://media.githubusercontent.com/media/NVIDIA-ISAAC-ROS/.github/main/resources/isaac_ngc/r2bdataset/r2b_galileo_sequence.gif" width="300px">         | 4x LI HAWK stereo <br> L+R 1920x1200 RGB 30fps<br><br> IMU <br> Wheel odometry                                                    | Room sequence including robots, shelving, boxes, pallets, with moving obstacles.                       |
| <a href="https://catalog.ngc.nvidia.com/orgs/nvidia/teams/isaac/resources/r2bdataset2024">r2b_galileo2</a>    | 986M | <img alt="galileo2 sequence" src="https://media.githubusercontent.com/media/NVIDIA-ISAAC-ROS/.github/main/resources/isaac_ngc/r2bdataset/r2b_galileo2_sequence.gif" width="300px">       | RealSense D455 <br> L+R 1280x720 IR Mono 30fps <br> Depth 1280x780 30fps <br> 1280x800 RGB 30fps <br><br> IMU <br> Wheel odometry | Room sequence including robots, shelving, boxes, pallets, with moving obstacles.                       |
| <a href="https://catalog.ngc.nvidia.com/orgs/nvidia/teams/isaac/resources/r2bdataset2024">r2b_robotarm</a>    | 1.4G | <img alt="robotarm sequence" src="https://media.githubusercontent.com/media/NVIDIA-ISAAC-ROS/.github/main/resources/isaac_ngc/r2bdataset/r2b_robotarm_sequence.gif" width="300px">       | RealSense D455 <br> L+R 1280x720 IR Mono 30fps <br> Depth 1280x780 30fps <br> 1280x800 RGB 30fps <br><br> Robot joint states      | Robot arm sequence containing objects on a tray.                                                       |
| <a href="https://catalog.ngc.nvidia.com/orgs/nvidia/teams/isaac/resources/r2bdataset2024">r2b_whitetunnel</a> | 503M | <img alt="whitetunnel sequence" src="https://media.githubusercontent.com/media/NVIDIA-ISAAC-ROS/.github/main/resources/isaac_ngc/r2bdataset/r2b_whitetunnel_sequence.gif" width="300px"> | 4x LI HAWK stereo <br> L+R 1920x1200 RGB 30fps<br><br> IMU <br> Wheel odometry                                                    | Hallway sequence with low to no feature not-perpendicular walls, specular highlights, and reflections. |</p>

<h3 id="r2b-dataset-2023">r2b Dataset 2023</h3>
<p>| Sequence                                                                                          | Size | Visual                                                                                     | Contents                                                                                                                                                                       | Description                                                                                                                                                                                        |
| ————————————————————————————————- | —- | —————————————————————————————— | —————————————————————————————————————————————————————————— | ————————————————————————————————————————————————————————————————– |
| <a href="https://catalog.ngc.nvidia.com/orgs/nvidia/teams/isaac/resources/r2bdataset2023">r2b_lounge</a>     | 3.9G | <img alt="lounge sequence" src="https://raw.githubusercontent.com/nvidia-isaac-ros/ros2_benchmark/main/resources/r2b_lounge_sequence.gif" width="300px">         | LI HAWK stereo <br> L+R 1920x1200 RGB 30fps<br><br> RealSense D455 <br> L+R 1280x720 Mono IR 30fps <br> Depth 1280x780 30fps <br> 1280x800 RGB 30fps <br> Hesai XT32 10Hz <br> | Lounge sequence containing couch, table, chairs, and staircase with natural planted background wall.                                                                                               |
| <a href="https://catalog.ngc.nvidia.com/orgs/nvidia/teams/isaac/resources/r2bdataset2023">r2b_storage</a>    | 2.9G | <img alt="storage sequence" src="https://raw.githubusercontent.com/nvidia-isaac-ros/ros2_benchmark/main/resources/r2b_storage_sequence.gif" width="300px">       | LI HAWK stereo <br> L+R 1920x1200 RGB 30fps<br><br> RealSense D455 <br> L+R 1280x720 IR Mono 30fps <br> Depth 1280x780 30fps <br> 1280x800 RGB 30fps <br> Hesai XT32 10Hz <br> | Storage sequence including person, AprilTag, shoe, shelving, boxes, pallets                                                                                                                        | skids, dollys, robots, boundary floor tape, calibration target, and color checker, with 50% reflective background grey walls. |
| <a href="https://catalog.ngc.nvidia.com/orgs/nvidia/teams/isaac/resources/r2bdataset2023">r2b_hallway</a>    | 1.3G | <img alt="hallway sequence" src="https://raw.githubusercontent.com/nvidia-isaac-ros/ros2_benchmark/main/resources/r2b_hallway_sequence.gif" width="300px">       | LI HAWK stereo <br> L+R 1920x1200 RGB 30fps<br><br> RealSense D455 <br> L+R 1280x720 Mono 30fps <br> Depth 1280x780 30fps <br> 1280x800 RGB 30fps <br> Hesai XT32 10Hz <br>    | Hallway sequence with walking persons, low to no feature not-perpendicular walls, specular highlights, and reflections.                                                                            |
| <a href="https://catalog.ngc.nvidia.com/orgs/nvidia/teams/isaac/resources/r2bdataset2023">r2b_datacenter</a> | 1.7G | <img alt="datacenter sequence" src="https://raw.githubusercontent.com/nvidia-isaac-ros/ros2_benchmark/main/resources/r2b_datacenter_sequence.gif" width="300px"> | LI HAWK stereo <br> L+R 1920x1200 RGB 30fps<br><br> RealSense D455 <br> L+R 1280x720 Mono 30fps <br> Depth 1280x780 30fps <br> 1280x800 RGB 30fps <br> Hesai XT32 10Hz <br>    | Datacenter sequence with tall vertical corridor repetitive low-feature surfaces, little color.                                                                                                     |
| <a href="https://catalog.ngc.nvidia.com/orgs/nvidia/teams/isaac/resources/r2bdataset2023">r2b_cafe</a>       | 1.2G | <img alt="cafe sequence" src="https://raw.githubusercontent.com/nvidia-isaac-ros/ros2_benchmark/main/resources/r2b_cafe_sequence.gif" width="300px">             | LI HAWK stereo <br> L+R 1920x1200 RGB 30fps<br><br> RealSense D455 <br> L+R 1280x720 Mono 30fps <br> Depth 1280x780 IR 30fps <br> 1280x800 RGB 30fps <br> Hesai XT32 10Hz <br> | Café sequence including table, chairs, stools, reflective flooring, dark reflective glass walls, specular highlights, low wall features, and vibration from floor surface.                         |
| <a href="https://catalog.ngc.nvidia.com/orgs/nvidia/teams/isaac/resources/r2bdataset2023">r2b_hope</a>       | 30M  | <img alt="hope sequence" src="https://raw.githubusercontent.com/nvidia-isaac-ros/ros2_benchmark/main/resources/r2b_hope_sequence.gif" width="300px">             | D415 RGB                                                                                                                                                                       | Image from <a href="https://github.com/swtyree/hope-dataset/">HOPE dataset</a> for 6-DoF pose estimation from <a href="https://github.com/swtyree/hope-dataset/tree/master/hope-image-preview/scene_0005">scene 0005</a> |
| <a href="https://catalog.ngc.nvidia.com/orgs/nvidia/teams/isaac/resources/r2bdataset2023">r2b_hideaway</a>   | 1.8G | <img alt="hideaway sequence" src="https://raw.githubusercontent.com/nvidia-isaac-ros/ros2_benchmark/main/resources/r2b_hideaway_sequence.gif" width="300px">     | LI HAWK stereo <br> L+R 1920x1200 RGB 30fps<br><br> RealSense D455 <br> L+R 1280x720 IR Mono 30fps <br> Depth 1280x780 30fps <br> 1280x800 RGB 30fps <br> Hesai XT32 10Hz <br> | Hideaway sequence including table, chairs, seated and moving persons specular highlights, low wall features, and vibration from floor surface.                                                     |
| <a href="https://catalog.ngc.nvidia.com/orgs/nvidia/teams/isaac/resources/r2bdataset2023">r2b_mezzanine</a>  | 2.0G | <img alt="mezzanine sequence" src="https://raw.githubusercontent.com/nvidia-isaac-ros/ros2_benchmark/main/resources/r2b_mezzanine_sequence.gif" width="300px">   | LI HAWK stereo <br> L+R 1920x1200 RGB 30fps<br><br> RealSense D455 <br> L+R 1280x720 IR Mono 30fps <br> Depth 1280x780 30fps <br> 1280x800 RGB 30fps <br> Hesai XT32 10Hz <br> | Mezzanine sequence including staircase, railings, table, chairs, highlights, low wall features, and vibration from floor surface.                                                                  |</p>

<h2 id="results">Results</h2>

<p>Performance measurements are output to a results JSON file. JSON provides a human-readable format which allows for traceable independently verifiable results and can be conveniently imported into your visualization tool of choice.</p>

<p>Default measurements include throughput, latency, and jitter.  These measurements can be performed for the sample rate from the dataset sequence of the rosbag input, at peak throughput, and for fixed frequencies often to represent a sensor capture rate; for example 10hz for LIDAR or 30fps for camera.</p>

<p>Included in the log is information on the host system on which results were measured, when they were measured, and the corresponding software version. The input data used, and a hash of the input data file is reported for traceability of results.  The input YAML configuration used for the benchmark run is reported allowing results to be independent reproduced with the same configuration.</p>

<blockquote>
  <p><strong>Note</strong>: We use the naming convention <code class="language-plaintext highlighter-rouge">_node</code> to represent a graph under test that contains a single node (for example, <code class="language-plaintext highlighter-rouge">stereo_image_proc_node.py</code>) and <code class="language-plaintext highlighter-rouge">_graph</code> to represent a graph of multiple nodes (for example, <code class="language-plaintext highlighter-rouge">stereo_image_proc_graph.py</code>).</p>
</blockquote>

<h3 id="example-results">Example Results</h3>

<p>The following are the performance results measured with <code class="language-plaintext highlighter-rouge">ros2_benchmark</code> on <code class="language-plaintext highlighter-rouge">aarch64</code> and <code class="language-plaintext highlighter-rouge">x86_64</code> platforms, using ROS 2 Humble in March 2023. The table below also contains links to the packages for the nodes used in the benchmark and to the complete results JSON files.</p>

<table>
  <thead>
    <tr>
      <th>Node</th>
      <th>Input Size</th>
      <th>Intel NUC Corei7 11th Gen</th>
      <th>AGX Orin (CPU only)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/scripts/apriltag_ros_apriltag_node.py">AprilTag Node</a></td>
      <td>720p</td>
      <td>
<a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/results/apriltag_ros_apriltag_node-nuc_4060ti.json">90.8 fps</a><br>11 ms</td>
      <td>
<a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/results/apriltag_ros_apriltag_node-agx_orin.json">56.3 fps</a><br>18 ms</td>
    </tr>
    <tr>
      <td><a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/scripts/image_proc_rectify_node.py">Rectify Node</a></td>
      <td>1080p</td>
      <td>
<a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/results/image_proc_rectify_node-nuc_4060ti.json">539 fps</a><br>1.9 ms</td>
      <td>
<a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/results/image_proc_rectify_node-agx_orin.json">185 fps</a><br>5.6 ms</td>
    </tr>
    <tr>
      <td><a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/scripts/image_transport_h264_decoder_node.py">H.264 Encoder Node<br>I-frame Support</a></td>
      <td>1080p</td>
      <td>
<a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/results/image_transport_h264_decoder_node-nuc_4060ti.json">60.5 fps</a><br>19 ms</td>
      <td>
<a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/results/image_transport_h264_decoder_node-agx_orin.json">28.0 fps</a><br>37 ms</td>
    </tr>
    <tr>
      <td><a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/scripts/image_transport_h264_encoder_node.py">H.264 Encoder Node<br>P-frame Support</a></td>
      <td>1080p</td>
      <td>
<a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/results/image_transport_h264_encoder_node-nuc_4060ti.json">43.4 fps</a><br>24 ms</td>
      <td>
<a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/results/image_transport_h264_encoder_node-agx_orin.json">10.2 fps</a><br>95 ms</td>
    </tr>
    <tr>
      <td><a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/scripts/stereo_image_proc_node.py">Stereo Disparity Node</a></td>
      <td>1080p</td>
      <td>
<a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/results/stereo_image_proc_node-nuc_4060ti.json">99.5 fps</a><br>6.4 ms</td>
      <td>
<a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/results/stereo_image_proc_node-agx_orin.json">66.5 fps</a><br>15 ms</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th>Graph</th>
      <th>Input Size</th>
      <th>Intel NUC Corei7 11th Gen</th>
      <th>AGX Orin (CPU only)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/scripts/apriltag_ros_apriltag_graph.py">AprilTag Graph</a></td>
      <td>720p</td>
      <td>
<a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/results/apriltag_ros_apriltag_graph-nuc_4060ti.json">88.1 fps</a><br>12 ms</td>
      <td>
<a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/results/apriltag_ros_apriltag_graph-agx_orin.json">56.3 fps</a><br>22 ms</td>
    </tr>
    <tr>
      <td><a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/scripts/stereo_image_proc_graph.py">Stereo Disparity Graph</a></td>
      <td>1080p</td>
      <td>
<a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/results/stereo_image_proc_graph-nuc_4060ti.json">99.4 fps</a><br>16 ms</td>
      <td>
<a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/results/stereo_image_proc_graph-agx_orin.json">63.5 fps</a><br>28 ms</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p><strong>Note</strong>: All results above are using ROS 2 nodes from open source that run computation on the CPU only. For GPU-accelerated equivalent packages, see <a href="https://github.com/NVIDIA-ISAAC-ROS/">Isaac ROS</a>.</p>
</blockquote>

<h3 id="explanation-of-the-results-json-format">Explanation of the Results JSON Format</h3>

<p>After a <code class="language-plaintext highlighter-rouge">ros2_benchmark</code>-based benchmark is complete, the framework will output a detailed log of the results in a JSON format. This section explains that JSON format through the use of an example.</p>

<p>The first section of the output JSON file presents the results achieved running at the peak throughput, as identified by the harness’ auto-tune search process. That peak throughput is logged with the key <code class="language-plaintext highlighter-rouge">MEAN_FRAME_RATE</code>; in this sample, the corresponding value is about ~6.09fps. This iteration of the test was run for <code class="language-plaintext highlighter-rouge">RECEIVED_DURATION = 4919.10</code> milliseconds. There were <code class="language-plaintext highlighter-rouge">NUM_MISSED_FRAMES = 20.0</code> frames dropped somewhere in <code class="language-plaintext highlighter-rouge">rclcpp</code> transport over the path that originates from the playback node, goes through the graph under test, and terminates in the monitor node.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"BasicPerformanceMetrics.RECEIVED_DURATION"</span><span class="p">:</span><span class="w"> </span><span class="mf">4919.0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"BasicPerformanceMetrics.MEAN_PLAYBACK_FRAME_RATE"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.20338761907538</span><span class="p">,</span><span class="w">
  </span><span class="nl">"BasicPerformanceMetrics.MEAN_FRAME_RATE"</span><span class="p">:</span><span class="w"> </span><span class="mf">6.098802584821505</span><span class="p">,</span><span class="w">
  </span><span class="nl">"BasicPerformanceMetrics.NUM_MISSED_FRAMES"</span><span class="p">:</span><span class="w"> </span><span class="mf">20.0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"BasicPerformanceMetrics.NUM_FRAMES_SENT"</span><span class="p">:</span><span class="w"> </span><span class="mf">50.0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"BasicPerformanceMetrics.FIRST_SENT_RECEIVED_LATENCY"</span><span class="p">:</span><span class="w"> </span><span class="mf">29.333333333333332</span><span class="p">,</span><span class="w">
  </span><span class="nl">"BasicPerformanceMetrics.LAST_SENT_RECEIVED_LATENCY"</span><span class="p">:</span><span class="w"> </span><span class="mf">48.0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"BasicPerformanceMetrics.MAX_JITTER"</span><span class="p">:</span><span class="w"> </span><span class="mf">231.0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"BasicPerformanceMetrics.MIN_JITTER"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"BasicPerformanceMetrics.MEAN_JITTER"</span><span class="p">:</span><span class="w"> </span><span class="mf">106.96428571428571</span><span class="p">,</span><span class="w">
  </span><span class="nl">"BasicPerformanceMetrics.STD_DEV_JITTER"</span><span class="p">:</span><span class="w"> </span><span class="mf">54.942484366766024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"CPUProfilingMetrics.MAX_CPU_UTIL"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.633333333333334</span><span class="p">,</span><span class="w">
  </span><span class="nl">"CPUProfilingMetrics.MIN_CPU_UTIL"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05555555555555555</span><span class="p">,</span><span class="w">
  </span><span class="nl">"CPUProfilingMetrics.MEAN_CPU_UTIL"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5159932659932658</span><span class="p">,</span><span class="w">
  </span><span class="nl">"CPUProfilingMetrics.STD_DEV_CPU_UTIL"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.4090849674792143</span><span class="p">,</span><span class="w">
  </span><span class="nl">"CPUProfilingMetrics.BASELINE_CPU_UTIL"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.1425925925925924</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<p>The next section of results measures latency at a fixed input throughput of <code class="language-plaintext highlighter-rouge">10.0fps</code>, as indicated by the section header. In this case, <code class="language-plaintext highlighter-rouge">MEAN_PLAYBACK_FRAME_RATE = 10.2</code> fps indicates that the true input throughput achieved during the test was close but not exactly equal to the nominal value. The <code class="language-plaintext highlighter-rouge">MEAN_JITTER = 115</code> ms and <code class="language-plaintext highlighter-rouge">MAX_JITTER = 251</code> ms indicate the mean and max jitter, respectively. The value <code class="language-plaintext highlighter-rouge">MEAN_FRAME_RATE = 6.12</code> fps indicates that the output throughput of the graph was significantly slower than the input throughput; this corroborates the previous section’s conclusion that the max sustainable frame rate is about ~6.09fps. This iteration of the test was run for <code class="language-plaintext highlighter-rouge">RECEIVED_DURATION = 4900</code> ms with <code class="language-plaintext highlighter-rouge">NUM_MISSED_FRAMES = 20</code> frames dropped somewhere in the <code class="language-plaintext highlighter-rouge">rclcpp</code> transport process.</p>

<p>Latency tests are often run at the processing rate for the graph under test. The playback rate can be tied to the sensor input rate; many LIDARs run at 10Hz, while cameras may run at 30fps or 60fps.</p>

<p>If desired, additional fixed playback rates can be specified to calculate additional latency measurements at multiple processing rates.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"10.0fps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"BasicPerformanceMetrics.RECEIVED_DURATION"</span><span class="p">:</span><span class="w"> </span><span class="mi">4900</span><span class="p">,</span><span class="w">
    </span><span class="nl">"BasicPerformanceMetrics.MEAN_PLAYBACK_FRAME_RATE"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.204081632653061</span><span class="p">,</span><span class="w">
    </span><span class="nl">"BasicPerformanceMetrics.MEAN_FRAME_RATE"</span><span class="p">:</span><span class="w"> </span><span class="mf">6.122448979591836</span><span class="p">,</span><span class="w">
    </span><span class="nl">"BasicPerformanceMetrics.NUM_MISSED_FRAMES"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
    </span><span class="nl">"BasicPerformanceMetrics.NUM_FRAMES_SENT"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
    </span><span class="nl">"BasicPerformanceMetrics.FIRST_SENT_RECEIVED_LATENCY"</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w">
    </span><span class="nl">"BasicPerformanceMetrics.LAST_SENT_RECEIVED_LATENCY"</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w">
    </span><span class="nl">"BasicPerformanceMetrics.MAX_JITTER"</span><span class="p">:</span><span class="w"> </span><span class="mf">251.0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"BasicPerformanceMetrics.MIN_JITTER"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"BasicPerformanceMetrics.MEAN_JITTER"</span><span class="p">:</span><span class="w"> </span><span class="mf">115.64285714285714</span><span class="p">,</span><span class="w">
    </span><span class="nl">"BasicPerformanceMetrics.STD_DEV_JITTER"</span><span class="p">:</span><span class="w"> </span><span class="mf">58.463183949824526</span><span class="p">,</span><span class="w">
    </span><span class="nl">"CPUProfilingMetrics.MAX_CPU_UTIL"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.855555555555556</span><span class="p">,</span><span class="w">
    </span><span class="nl">"CPUProfilingMetrics.MIN_CPU_UTIL"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.16666666666666666</span><span class="p">,</span><span class="w">
    </span><span class="nl">"CPUProfilingMetrics.MEAN_CPU_UTIL"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.264444444444445</span><span class="p">,</span><span class="w">
    </span><span class="nl">"CPUProfilingMetrics.STD_DEV_CPU_UTIL"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.9738969321351676</span><span class="p">,</span><span class="w">
    </span><span class="nl">"CPUProfilingMetrics.BASELINE_CPU_UTIL"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.805555555555555</span><span class="p">,</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<p>Finally, the metadata provided at the end of the JSON file contains system and file information to provide a transparent and reproducible record of how the benchmark results were obtained. <code class="language-plaintext highlighter-rouge">BenchmarkMetadata.CONFIG</code> contains a copy of the configuration file YAML as a string. This configuration can be used to run a benchmark with identical parameters to those from the results file.</p>

<p>The name and checksum of the dataset used for the benchmark are also provided, ensuring that the same dataset has been used when comparing or reproducing independent results.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"BenchmarkMetadata.NAME"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reference AprilTagNode benchmark"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"BenchmarkMetadata.TEST_FILE_PATH"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/workspaces/ros-dev/src/ros2_benchmark/scripts/reference_apriltag_node_test.py"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"BenchmarkMetadata.TEST_DATETIME"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-03-15T22:07:43Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"BenchmarkMetadata.DEVICE_HOSTNAME"</span><span class="p">:</span><span class="w"> </span><span class="s2">"neuromancer"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"BenchmarkMetadata.DEVICE_ARCH"</span><span class="p">:</span><span class="w"> </span><span class="s2">"x86_64"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"BenchmarkMetadata.DEVICE_OS"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Linux 5.10.102.1-microsoft-standard-WSL2 #1 SMP Wed Mar 2 00:30:59 UTC 2022"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"BenchmarkMetadata.BENCHMARK_MODE"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"BenchmarkMetadata.PEAK_THROUGHPUT_PREDICTION"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"BenchmarkMetadata.INPUT_DATA_PATH"</span><span class="p">:</span><span class="w"> </span><span class="s2">"assets/r2b_storage/r2b_storage.db3"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"BenchmarkMetadata.INPUT_DATA_HASH"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b7e276d5105397dfb19a6f2c6db7672f"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"BenchmarkMetadata.CONFIG"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">copy</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">input</span><span class="w"> </span><span class="err">config</span><span class="w"> </span><span class="err">as</span><span class="w"> </span><span class="err">stringified</span><span class="w"> </span><span class="err">YAML</span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: The peak throughput of this sample run was capped at 10fps by the input configuation setting <code class="language-plaintext highlighter-rouge">"BenchmarkMetadata.PEAK_THROUGHPUT_PREDICTION": 10.0</code>.</p>
</blockquote>

<h2 id="creating-custom-benchmark">Creating Custom Benchmark</h2>

<p>Benchmark your own graphs using <code class="language-plaintext highlighter-rouge">ros2_benchmark</code> framework by creating custom benchmark scripts from the minimum template shown below:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">launch_ros.actions</span> <span class="kn">import</span> <span class="n">ComposableNodeContainer</span>
<span class="kn">from</span> <span class="n">launch_ros.descriptions</span> <span class="kn">import</span> <span class="n">ComposableNode</span>

<span class="kn">from</span> <span class="n">ros2_benchmark</span> <span class="kn">import</span> <span class="n">ImageResolution</span>
<span class="kn">from</span> <span class="n">ros2_benchmark</span> <span class="kn">import</span> <span class="n">ROS2BenchmarkConfig</span><span class="p">,</span> <span class="n">ROS2BenchmarkTest</span>

<span class="k">def</span> <span class="nf">launch_setup</span><span class="p">(</span><span class="n">container_prefix</span><span class="p">,</span> <span class="n">container_sigterm_timeout</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Graph setup for benchmarking your custom graph.</span><span class="sh">"""</span>

    <span class="c1"># Insert your composable node declarations
</span>
    <span class="c1"># Required DataLoaderNode
</span>    <span class="n">data_loader_node</span> <span class="o">=</span> <span class="nc">ComposableNode</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">DataLoaderNode</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">namespace</span><span class="o">=</span><span class="n">TestCustomGraph</span><span class="p">.</span><span class="nf">generate_namespace</span><span class="p">(),</span>
        <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">ros2_benchmark</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">plugin</span><span class="o">=</span><span class="sh">'</span><span class="s">ros2_benchmark::DataLoaderNode</span><span class="sh">'</span><span class="p">,</span>
        <span class="c1"># Insert remappings if necessary
</span>    <span class="p">)</span>

    <span class="c1"># Insert your custom preprocessor graph if needed
</span>
    <span class="c1"># Required PlaybackNode
</span>    <span class="n">playback_node</span> <span class="o">=</span> <span class="nc">ComposableNode</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">PlaybackNode</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">namespace</span><span class="o">=</span><span class="n">TestCustomGraph</span><span class="p">.</span><span class="nf">generate_namespace</span><span class="p">(),</span>
        <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">ros2_benchmark</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">plugin</span><span class="o">=</span><span class="sh">'</span><span class="s">ros2_benchmark::PlaybackNode</span><span class="sh">'</span><span class="p">,</span>
        <span class="c1"># Revise "data_formats" based on your graph
</span>        <span class="n">parameters</span><span class="o">=</span><span class="p">[{</span>
            <span class="sh">'</span><span class="s">data_formats</span><span class="sh">'</span><span class="p">:</span> <span class="p">[</span>
                <span class="sh">'</span><span class="s">sensor_msgs/msg/Image</span><span class="sh">'</span><span class="p">,</span>
                <span class="sh">'</span><span class="s">sensor_msgs/msg/CameraInfo</span><span class="sh">'</span>
            <span class="p">],</span>
        <span class="p">}],</span>
        <span class="c1"># Revise "remapping" based on your graph
</span>        <span class="n">remappings</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="sh">'</span><span class="s">buffer/input0</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">data_loader_node/image</span><span class="sh">'</span><span class="p">),</span>
            <span class="p">(</span><span class="sh">'</span><span class="s">input0</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">image</span><span class="sh">'</span><span class="p">),</span>
            <span class="p">(</span><span class="sh">'</span><span class="s">buffer/input1</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">data_loader_node/camera_info</span><span class="sh">'</span><span class="p">),</span>
            <span class="p">(</span><span class="sh">'</span><span class="s">input1</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">camera_info</span><span class="sh">'</span><span class="p">)</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># Required MonitorNode
</span>    <span class="c1"># You can add as many monitor nodes as you need to measure performance
</span>    <span class="c1"># for multiple topics.
</span>    <span class="n">monitor_node</span> <span class="o">=</span> <span class="nc">ComposableNode</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">MonitorNode</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">namespace</span><span class="o">=</span><span class="n">TestCustomGraph</span><span class="p">.</span><span class="nf">generate_namespace</span><span class="p">(),</span>
        <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">ros2_benchmark</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">plugin</span><span class="o">=</span><span class="sh">'</span><span class="s">ros2_benchmark::MonitorNode</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">parameters</span><span class="o">=</span><span class="p">[{</span>
            <span class="c1"># Add "monitor_index" parameter to distinguish between various
</span>            <span class="c1"># monitor nodes when multiple monitor nodes are used.
</span>            <span class="sh">'</span><span class="s">monitor_data_format</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">apriltag_msgs/msg/AprilTagDetectionArray</span><span class="sh">'</span><span class="p">,</span>
        <span class="p">}],</span>
        <span class="c1"># Revise "remapping" based on your graph
</span>        <span class="n">remappings</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="sh">'</span><span class="s">output</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">apriltag_detections</span><span class="sh">'</span><span class="p">)</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># Required composable node container
</span>    <span class="c1"># Insert your composable nodes in the "composable_node_descriptions" list.
</span>    <span class="n">composable_node_container</span> <span class="o">=</span> <span class="nc">ComposableNodeContainer</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">container</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">namespace</span><span class="o">=</span><span class="n">TestCustomGraph</span><span class="p">.</span><span class="nf">generate_namespace</span><span class="p">(),</span>
        <span class="n">package</span><span class="o">=</span><span class="sh">'</span><span class="s">rclcpp_components</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">executable</span><span class="o">=</span><span class="sh">'</span><span class="s">component_container_mt</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">prefix</span><span class="o">=</span><span class="n">container_prefix</span><span class="p">,</span>
        <span class="n">sigterm_timeout</span><span class="o">=</span><span class="n">container_sigterm_timeout</span><span class="p">,</span>
        <span class="n">composable_node_descriptions</span><span class="o">=</span><span class="p">[</span>
            <span class="n">data_loader_node</span><span class="p">,</span>
            <span class="n">playback_node</span><span class="p">,</span>
            <span class="n">monitor_node</span><span class="p">,</span>
            <span class="c1"># Insert custom nodes here
</span>        <span class="p">],</span>
        <span class="n">output</span><span class="o">=</span><span class="sh">'</span><span class="s">screen</span><span class="sh">'</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="p">[</span><span class="n">composable_node_container</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">generate_test_description</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">TestCustomGraph</span><span class="p">.</span><span class="nf">generate_test_description_with_nsys</span><span class="p">(</span><span class="n">launch_setup</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">TestCustomGraph</span><span class="p">(</span><span class="n">ROS2BenchmarkTest</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Performance test for your custom graph.</span><span class="sh">"""</span>

    <span class="c1"># Custom configurations
</span>    <span class="n">config</span> <span class="o">=</span> <span class="nc">ROS2BenchmarkConfig</span><span class="p">(</span>
        <span class="c1"># Insert your custom benchmark configurations
</span>        <span class="n">benchmark_name</span><span class="o">=</span><span class="sh">'</span><span class="s">Custom Graph Benchmark</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">input_data_path</span><span class="o">=</span><span class="sh">'</span><span class="s">datasets/your_custom_rosbag_directory_path</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">publisher_upper_frequency</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span>
        <span class="n">publisher_lower_frequency</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>
        <span class="n">playback_message_buffer_size</span><span class="o">=</span><span class="mi">10</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_benchmark</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="nf">run_benchmark</span><span class="p">()</span>

</code></pre></div></div>

<p>Revise the existing or insert your code in the template based on your graph to be measured.</p>

<p>Follow these steps to ensure that everything in the template is configured correctly:</p>

<ol>
  <li>Insert your custom graph (e.g., composable nodes) in the <code class="language-plaintext highlighter-rouge">launch_setup</code> method.</li>
  <li>Revise <code class="language-plaintext highlighter-rouge">remappings</code> in the data loader node to connect rosbag topics to either your preprocessor graph or a playback node.</li>
  <li>[Optional] Insert your preprocessor graph in the <code class="language-plaintext highlighter-rouge">launch_setup</code> method if required.</li>
  <li>Revise <code class="language-plaintext highlighter-rouge">data_formats</code> and <code class="language-plaintext highlighter-rouge">remappings</code> in the playback node to connect to the loaded/preprocessed data and your custom graph.</li>
  <li>Insert your custom nodes declared in step 1 to the composable node container.</li>
  <li>Revise/add benchmark configurations under <code class="language-plaintext highlighter-rouge">ROS2BenchmarkConfig</code> declaration based on your custom graph.</li>
</ol>

<p>The full benchmark configuration options can be found <a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/ros2_benchmark/ros2_benchmark/default_ros2_benchmark_config.yaml">here</a> in the default <code class="language-plaintext highlighter-rouge">ros2_benchmark</code> configuration file.</p>

<h2 id="profiling">Profiling</h2>

<p>When seeking to optimize performance, profiling is often used to gain deep insight into the call stack, and where processing time is spent in functions. <a href="https://github.com/ros2/ros2_tracing">ros2_tracing</a> provides a tracing instrumentation to better understand performance on a CPU, but lacks information on GPU acceleration.</p>

<p><a href="https://developer.nvidia.com/nsight-systems">Nsight Systems</a> provides tracing instrumentation for CPU, GPU, and other SOC (system-on-chip) hardware accelerators for both <code class="language-plaintext highlighter-rouge">aarch64</code> and <code class="language-plaintext highlighter-rouge">x86_64</code> platforms, and is freely available for download.  We use this tooling to profile our graphs of computation in ROS, to identify areas of improvement for compute optimization, and improvement of synchronization between heterogenous computing hardware. These tools allow for comparison of before and after to inspect profile differences with the benchmark tooling.</p>

<h2 id="live-benchmark-mode">Live Benchmark Mode</h2>

<p>Besides benchmarking a graph with data loaded from rosbags, <code class="language-plaintext highlighter-rouge">ros2_benchmark</code> also supports a live benchmark mode that enables measuring performance outcome of a graph with its data source (e.g., a grph consists of a camera node). A <a href="https://github.com/nvidia-isaac-ros/ros2_benchmark/tree/main/scripts/realsense2_node.py">Realsense benchmark script</a> is provided as an example to showcase the use of the live benchmark mode.</p>

<h2 id="updates">Updates</h2>

<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>Changes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>2024-05-30</td>
      <td>Include r2b Dataset 2024</td>
    </tr>
    <tr>
      <td>2023-11-16</td>
      <td>Add support for live benchmark mode</td>
    </tr>
    <tr>
      <td>2023-04-05</td>
      <td>Initial release</td>
    </tr>
  </tbody>
</table>
</div>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">CONTRIBUTING</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="isaac-ros-contribution-rules">Isaac ROS Contribution Rules</h1>

<p>Any contribution that you make to this repository will
be under the Apache 2 License, as dictated by that
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">license</a>:</p>

<blockquote>
  <p><strong>5. Submission of Contributions.</strong> Unless You explicitly state otherwise, any Contribution intentionally submitted for inclusion in the Work by You to the Licensor shall be under the terms and conditions of this License, without any additional terms or conditions. Notwithstanding the above, nothing herein shall supersede or modify the terms of any separate license agreement you may have executed with Licensor regarding such Contributions.</p>
</blockquote>

<p>Contributors must sign-off each commit by adding a <code class="language-plaintext highlighter-rouge">Signed-off-by: ...</code>
line to commit messages to certify that they have the right to submit
the code they are contributing to the project according to the
<a href="https://developercertificate.org/">Developer Certificate of Origin (DCO)</a>.</p>

</div>
              <hr id="github-contribute-lists">
              <ul class="nav nav-tabs nav-justified" id="github-contribute-lists-tabs">
                <li class="better-tabs active">
                  <a href="#github-contribute-lists-help-wanted" data-toggle="tab"><span class="contribute-lists-help-wanted-count label label-primary">0</span> Help Wanted</a>
                </li>
                <li class="better-tabs">
                  <a href="#github-contribute-lists-good-first-issue" data-toggle="tab"><span class="contribute-lists-good-first-issue-count label label-primary">0</span> Good First Issue</a>
                </li>
                <li class="better-tabs">
                  <a href="#github-contribute-lists-pull-requests" data-toggle="tab"><span class="contribute-lists-pull-requests-count label label-primary">0</span> Pull Requests to Review</a>
                </li>
              </ul>
              <div class="tab-content contribute-lists">
                <div class="tab-pane active" id="github-contribute-lists-help-wanted">
                  <div class="contribute-lists-help-wanted"></div>
                </div>
                <div class="tab-pane" id="github-contribute-lists-good-first-issue">
                  <div class="contribute-lists-good-first-issue"></div>
                </div>
                <div class="tab-pane" id="github-contribute-lists-pull-requests">
                  <div class="contribute-lists-pull-requests"></div>
                </div>
              </div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros2_benchmark">ros2_benchmark</a> <small>repository</small></h3>
        <span class="label label-default">benchmarking</span> <span class="label label-default">performance</span> <span class="label label-default">performance-testing</span> <span class="label label-default">ros2</span> <span class="label label-default">ros2-humble</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-nvidia-isaac-ros-ros2_benchmark
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-nvidia-isaac-ros-ros2_benchmark" role="menuitem" tabindex="-1" href="/r/ros2_benchmark/github-nvidia-isaac-ros-ros2_benchmark" data="github-nvidia-isaac-ros-ros2_benchmark">
                    <span class="glyphicon glyphicon-star"></span>
                    github-nvidia-isaac-ros-ros2_benchmark
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros2_benchmark">ros2_benchmark</a> <small>repository</small></h3>
        <span class="label label-default">benchmarking</span> <span class="label label-default">performance</span> <span class="label label-default">performance-testing</span> <span class="label label-default">ros2</span> <span class="label label-default">ros2-humble</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-nvidia-isaac-ros-ros2_benchmark
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-nvidia-isaac-ros-ros2_benchmark" role="menuitem" tabindex="-1" href="/r/ros2_benchmark/github-nvidia-isaac-ros-ros2_benchmark" data="github-nvidia-isaac-ros-ros2_benchmark">
                    <span class="glyphicon glyphicon-star"></span>
                    github-nvidia-isaac-ros-ros2_benchmark
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros2_benchmark">ros2_benchmark</a> <small>repository</small></h3>
        <span class="label label-default">benchmarking</span> <span class="label label-default">performance</span> <span class="label label-default">performance-testing</span> <span class="label label-default">ros2</span> <span class="label label-default">ros2-humble</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-nvidia-isaac-ros-ros2_benchmark
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-nvidia-isaac-ros-ros2_benchmark" role="menuitem" tabindex="-1" href="/r/ros2_benchmark/github-nvidia-isaac-ros-ros2_benchmark" data="github-nvidia-isaac-ros-ros2_benchmark">
                    <span class="glyphicon glyphicon-star"></span>
                    github-nvidia-isaac-ros-ros2_benchmark
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>iron</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ros2_benchmark">ros2_benchmark</a> <small>repository</small></h3>
        <span class="label label-default">benchmarking</span> <span class="label label-default">performance</span> <span class="label label-default">performance-testing</span> <span class="label label-default">ros2</span> <span class="label label-default">ros2-humble</span> 
        

      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-nvidia-isaac-ros-ros2_benchmark
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-nvidia-isaac-ros-ros2_benchmark" role="menuitem" tabindex="-1" href="/r/ros2_benchmark/github-nvidia-isaac-ros-ros2_benchmark" data="github-nvidia-isaac-ros-ros2_benchmark">
                    <span class="glyphicon glyphicon-star"></span>
                    github-nvidia-isaac-ros-ros2_benchmark
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

      
        <div class="alert alert-warning" role="alert">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
  $(function() {
    setupContributeListTabLinks();
  });
  $(document).ready(function() {
    setupDistroSwitch("humble");
    setupContributeLists("https://github.com/nvidia-isaac-ros/ros2_benchmark.git");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
