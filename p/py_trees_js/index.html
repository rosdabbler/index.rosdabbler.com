<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Package: py_trees_js</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/p/py_trees_js/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top: 20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/?search_packages=true">Packages</a></li>
        <li class="active">py_trees_js</li>
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-primary" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-primary" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-primary" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-primary" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-default" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class=" older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/py_trees_js">py_trees_js</a> <small>package from <a style="text-decoration:none" href="/r/py_trees_js/github-splintered-reality-py_trees_js">py_trees_js</a> repo</small>
        </h3>
          
            
            
              <span class="label label-default pkg-label">

py_trees_js
</span>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/humble/p/py_trees_js"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/splintered-reality/py_trees_js/tree/release/0.6.x/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="humble-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#humble-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#humble-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#humble-deps" data-toggle="tab"><span class="label label-primary">5</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#humble-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#humble-questions" data-toggle="tab"><span id="humble-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="humble-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>0.6.5</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_PYTHON</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Javascript library for behaviour tree visualisation, demo'd with a qt-js hybrid application</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/splintered-reality/py_trees_js.git">https://github.com/splintered-reality/py_trees_js.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">release/0.6.x</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-01-13
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">pyqt5</span> <span class="label label-default">jointjs</span> <span class="label label-default">behaviour-trees</span> <span class="label label-default">qt-js-application</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/py_trees_js/#humble-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/py_trees_js/#humble-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/py_trees_js/#humble-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            
    Javascript library for visualising behaviour trees.
  
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="https://github.com/splintered-treality/py_trees_js">Website</a></li>
                
                  <li><a href="https://github.com/splintered-treality/py_trees_js">Repository</a></li>
                
                  <li><a href="https://github.com/splintered-treality/py_trees_js/issues">Bugtracker</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Daniel Stonier</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Daniel Stonier</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/splintered-reality/py_trees_js/tree/release/0.6.x/./README.md" title="Open in git repository">README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="pytrees-js">PyTrees Js</h1>

<p>[<a href="https://github.com/splintered-reality/py_trees_js/tree/release/0.6.x/./#about">About</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/release/0.6.x/./#features">Features</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/release/0.6.x/./#preview">Preview</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/release/0.6.x/./#example---simple-web-app">Exmaple - Simple Web App</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/release/0.6.x/./#example---pyqt-app">Example - PyQt App</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/release/0.6.x/./#the-json-specification">The JSON Specification</a>]</p>

<h2 id="about">About</h2>

<p>Libraries for visualisation of runtime or replayed behaviour trees.</p>

<ul>
  <li>
<a href="https://github.com/splintered-reality/py_trees_js/tree/release/0.6.x/././js">./js</a> - a self-contained javascript library to build apps around</li>
  <li>
<a href="https://github.com/splintered-reality/py_trees_js/tree/release/0.6.x/././py_trees_js">py_trees_js</a> - a python package that makes the js available as a pyqt resource</li>
  <li>
<a href="https://github.com/splintered-reality/py_trees_js/tree/release/0.6.x/././py_trees_js/viewer">py_trees_js.viewer</a> - a demo pyqtwebengine app</li>
</ul>

<p>See <a href="https://github.com/splintered-reality/py_trees_ros_viewer">py_trees_ros_viewer</a> for a fully fledged pyqt integration that uses <a href="https://github.com/splintered-reality/py_trees_js/tree/release/0.6.x/././py_trees_js">py_trees_js</a>.</p>

<h2 id="features">Features</h2>

<ul>
  <li>Visualise the runtime state of a behaviour tree</li>
  <li>Collapsible subtrees</li>
  <li>Zoom and scale contents to fit</li>
  <li>Timeline rewind &amp; resume</li>
  <li>Blackboard key-value storage view</li>
  <li>Activity log view</li>
</ul>

<p>Although designed for py_trees, the js libs (in particular, the interfaces) are not dependent on py_trees and could be used for other behaviour tree applications.</p>

<h2 id="preview">Preview</h2>

<p>With VSCode DevContainers and on a PC with an NVIDIA GPU:</p>

<ul>
  <li>Install <a href="https://code.visualstudio.com/docs/setup/linux#_debian-and-ubuntu-based-distributions">VSCode</a>
</li>
  <li>Install the <a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html#docker">NVIDIA Container Toolkit</a>
</li>
  <li>Clone and launch the demo:</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git clone https://github.com/splintered-reality/py_trees_js
$ code .
$ cd py_trees_js

# Reopen the project in the devcontainer
$ (use CTRL-SHIFT-P if you miss VSCode's helper dialog)

# Setup and launch
$ poetry install
$ poetry run py-trees-demo-viewer

</code></pre></div></div>
<p align="center">
  <img src="https://raw.githubusercontent.com/splintered-reality/py_trees_js/release/0.6.x/./images/splash.png" width="80%">
  <img src="https://raw.githubusercontent.com/splintered-reality/py_trees_js/release/0.6.x/./images/screenshot.png" width="100%">
</p>

<p>If you do not have a PC that meets those requirements, some alternative options:</p>

<ul>
  <li>Install <a href="https://python-poetry.org/">Poetry</a> and PyQt on your system or in a venv. Clone and launch.</li>
  <li>If you’re just interested in seeing the demo viewer, <code class="language-plaintext highlighter-rouge">pip install --user py_trees_js</code> and launch the viewer</li>
  <li>Create your own devcontainer with something like the <a href="https://github.com/devcontainers/features/tree/main/src/desktop-lite">desktop-lite</a> feature. If this works, send me a PR!</li>
</ul>

<h2 id="example---simple-web-app">Example - Simple Web App</h2>

<p>Building a complete application that can render a behaviour tree stream is an effort that can be decomposed into two tasks:</p>

<ol>
  <li>Creating the web app for rendering trees and visualising a timeline</li>
  <li>Wrapping the web app in a framework and connecting it to an external stream</li>
</ol>

<p>The first stage is purely an exercise with html, css and javascript. The latter will depend on your use case - it could be a qt-js hybrid application (as exemplified here) for developers, an electron application for cross-platform and mobile deployment or a cloud based service.</p>

<p>This section will walk through how to build a web application with the provided js libraries. An example of wrapping the web app within a Qt-Js application will follow.</p>

<p>To get started, let’s begin with a basic html page with two divs, one for the tree canvas and one for the timeline:</p>

<pre><code class="language-xhtml">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;PyTrees Viewer&lt;/title&gt;
  &lt;style&gt;
    html {
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
    body {
      margin: 0;
      overflow:hidden;  /* no scrollbars */
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id="canvas"&gt;&lt;/div&gt;
  &lt;div id="timeline"&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<p>Next, bring in the javascript libraries. For exemplar purposes, it is assumed here that the libraries
have been made available alongside the html page - how is an integration detail depending on the mode
of deployment (see next section for an example).</p>

<p>Note that the <code class="language-plaintext highlighter-rouge">py_trees-&lt;version&gt;.js</code> library has only one dependency, <a href="https://resources.jointjs.com/docs/jointjs/v3.0/joint.html">jointjs</a>,
but that in turn has a few dependencies of it’s own. The bundled libraries in the <code class="language-plaintext highlighter-rouge">js/jointjs</code> folder
of this repository correspond to the requirements for a specific version of jointjs and
have been tested to work with the accompany <code class="language-plaintext highlighter-rouge">py_trees-&lt;version&gt;.js</code> library.</p>

<p>You can verify that the libraries have been properly imported by calling <code class="language-plaintext highlighter-rouge">py_trees.hello()</code> which
will print version information of the loaded javascript libraries (if found) to the javascript console.</p>

<pre><code class="language-xhtml">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;PyTrees Viewer&lt;/title&gt;
  &lt;link rel="stylesheet" href="js/py_trees-0.6.0.css"/&gt;
  &lt;link rel="stylesheet" type="text/css" href="js/jointjs/joint-3.0.4.min.css"/&gt;
  &lt;script src="js/jointjs/dagre-0.8.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/graphlib-2.1.7.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/jquery-3.4.1.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/lodash-4.17.11.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/backbone-1.4.0.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/joint-3.0.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/py_trees-0.6.0.js"&gt;&lt;/script&gt;
  &lt;!-- Web app integration css here --&gt;
  &lt;style&gt;
    html {
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
    body {
      margin: 0;
      overflow:hidden;  /* no scrollbars */
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;script type="text/javascript"&gt;
    py_trees.hello()
  &lt;/script&gt;
  &lt;div id="window"&gt;
    &lt;div id="canvas"&gt;&lt;/div&gt;
    &lt;div id="timeline"&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<p>Output from <code class="language-plaintext highlighter-rouge">py_trees.hello()</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>********************************************************************************
                               Py Trees JS

 A javascript library for visualisation of executing behaviour trees.

 Version &amp; Dependency Info:
  - py_trees:  0.6.0
    - jointjs :  3.1.0
       - backbone:  1.4.0
       - dagre   :  0.8.4
       - jquery  :  3.4.1
       - lodash  :  4.17.11
********************************************************************************

</code></pre></div></div>

<p>In the next iteration, the canvas is initialised and a callback for
accepting incoming trees from an external source is prepared. To test it,
pass it the demo tree provided by the library.</p>

<pre><code class="language-xhtml">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;PyTrees Viewer&lt;/title&gt;
  &lt;link rel="stylesheet" href="js/py_trees-0.6.0.css"/&gt;
  &lt;link rel="stylesheet" type="text/css" href="js/jointjs/joint-3.0.4.min.css"/&gt;
  &lt;script src="js/jointjs/dagre-0.8.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/graphlib-2.1.7.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/jquery-3.4.1.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/lodash-4.17.11.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/backbone-1.4.0.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/joint-3.0.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/py_trees-0.6.0.js"&gt;&lt;/script&gt;
  &lt;!-- Web app integration css here --&gt;
  &lt;style&gt;
    html {
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
    body {
      margin: 0;
      overflow:hidden;  /* no scrollbars */
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;script type="text/javascript"&gt;
    py_trees.hello()
  &lt;/script&gt;
  &lt;div id="window"&gt;
    &lt;div id="canvas"&gt;&lt;/div&gt;
    &lt;div id="timeline"&gt;&lt;/div&gt;
  &lt;/div&gt;
  &lt;script type="text/javascript"&gt;
    // rendering canvas
    canvas_graph = py_trees.canvas.create_graph()
    canvas_paper = py_trees.canvas.create_paper({graph: canvas_graph})

    render_tree = function({tree}) {
      py_trees.canvas.update_graph({graph: canvas_graph, tree: tree})
      py_trees.canvas.layout_graph({graph: canvas_graph})
      if ( canvas_graph.get('scale_content_to_fit') ) {
        py_trees.canvas.scale_content_to_fit(canvas_paper)
      }
      return "rendered"
    }
    render_tree({tree: py_trees.experimental.create_demo_tree_definition()})
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<p>At this point, your web app should be visualising a single tree and
zoom/collapse/scale to fit interactions functional. I’m happy, you should be too!</p>

<p>Adding a timeline to the application is optional, but the code does not
change significantly and is a very useful feature to have. The built-in demo
app’s <a href="https://github.com/splintered-reality/py_trees_js/tree/release/0.6.x/./py_trees_js/viewer/html/index.html">index.html</a> does exactly this. The code is reproduced below for convenience.</p>

<pre><code class="language-xhtml">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;PyTrees Viewer&lt;/title&gt;
  &lt;link rel="stylesheet" href="js/py_trees-0.6.0.css"/&gt;
  &lt;link rel="stylesheet" type="text/css" href="js/jointjs/joint-3.0.4.min.css"/&gt;
  &lt;script src="js/jointjs/dagre-0.8.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/graphlib-2.1.7.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/jquery-3.4.1.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/lodash-4.17.11.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/backbone-1.4.0.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/joint-3.0.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/py_trees-0.6.0.js"&gt;&lt;/script&gt;
  &lt;!-- Web app integration css here --&gt;
  &lt;style&gt;
    html {
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
    body {
      margin: 0;
      overflow:hidden;  /* no scrollbars */
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;script type="text/javascript"&gt;
    py_trees.hello()
  &lt;/script&gt;
  &lt;div id="window"&gt;
    &lt;div id="canvas"&gt;&lt;/div&gt;
    &lt;div id="timeline"&gt;&lt;/div&gt;
  &lt;/div&gt;
  &lt;script type="text/javascript"&gt;
    // rendering canvas
    canvas_graph = py_trees.canvas.create_graph()
    canvas_paper = py_trees.canvas.create_paper({graph: canvas_graph})

    // event timeline
    timeline_graph = py_trees.timeline.create_graph({event_cache_limit: 100});
    timeline_paper = py_trees.timeline.create_paper({
        timeline_graph: timeline_graph,
        canvas_graph: canvas_graph,
        canvas_paper: canvas_paper,
    })

    // react to window resizing events
    $(window).resize(function() {
      py_trees.canvas.on_window_resize(canvas_paper)
      py_trees.timeline.on_window_resize(timeline_paper)
    })

    render_tree = function({tree}) {
      py_trees.timeline.add_tree_to_cache({
          timeline_graph: timeline_graph,
          canvas_graph: canvas_graph,
          canvas_paper: canvas_paper,
          tree: tree
      })
      return "rendered"
    }
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<h2 id="example---pyqt-app">Example - PyQt App</h2>

<p>The <code class="language-plaintext highlighter-rouge">py-trees-demo-viewer</code> app is a qt-js hybrid application using <code class="language-plaintext highlighter-rouge">qtwebengine</code>.
Every time a qt button is pressed, an internally generated tree snapshot is sent to <code class="language-plaintext highlighter-rouge">render_tree()</code> in the embedded web application. From here, it is not too hard to
imagine connecting the qt application to an actual external source. The qt layer
then acts as a shim or relay transferring messages to the internal web app.</p>

<p>How does it work?</p>

<ul>
  <li>The js libs are made available as a <code class="language-plaintext highlighter-rouge">.qrc</code> resource [1]</li>
  <li>A simple web app is made available as another <code class="language-plaintext highlighter-rouge">.qrc</code> resource</li>
  <li>Both resources are consumed by the QWebEngine View to serve the app</li>
</ul>

<p>[1] This can be made available separately and as a dependency to the actual
pyqt application. For instance, the <a href="https://github.com/splintered-reality/py_trees_js/tree/release/0.6.x/././py_trees_js">py_trees_js</a> package is a dependency of <a href="https://github.com/splintered-reality/py_trees_ros_viewer">py_trees_ros_viewer</a>.</p>

<p>In more detail…</p>

<h3 id="the-js-libraries">The JS Libraries</h3>

<ol>
  <li>Bundle the javascript resources into a <code class="language-plaintext highlighter-rouge">.qrc</code> file</li>
  <li>Generate the resources as a c++ library / python module</li>
  <li>Deploy the c++ library/python module in your development environment</li>
</ol>

<p>In this case, the py_trees and jointjs javascript libraries have been listed
in <a href="https://github.com/splintered-reality/py_trees_js/tree/release/0.6.x/./py_trees_js/resources.qrc">py_trees_js/resources.qrc</a>, generated using
<a href="https://github.com/splintered-reality/py_trees_js/tree/release/0.6.x/./py_trees_js/gen.bash">py_trees_js/gen.bash</a>, resulting in the importable module
<a href="https://github.com/splintered-reality/py_trees_js/tree/release/0.6.x/./py_trees_js/resources.py">py_trees_js/resources.py</a>. From this point, any pythonic
Qt application wishing to visualise behaviour trees need only import this module from the <code class="language-plaintext highlighter-rouge">py_trees_js</code> package.</p>

<h3 id="the-web-app">The Web App</h3>

<ol>
  <li>Bundle the <code class="language-plaintext highlighter-rouge">.html</code>/<code class="language-plaintext highlighter-rouge">.css</code> pages into a <code class="language-plaintext highlighter-rouge">.qrc</code> file</li>
  <li>Import into directly into designer when building your Qt application</li>
</ol>

<p>In this case, our web app (<a href="https://github.com/splintered-reality/py_trees_js/tree/release/0.6.x/./py_trees_js/viewer/html/index.html">py_trees_js/viewer/html/index.html</a>) has been rolled into <a href="https://github.com/splintered-reality/py_trees_js/tree/release/0.6.x/./py_trees_js/viewer/web_app.qrc">py_trees_js/viewer/web_app.qrc</a> which is directly loaded into <a href="https://github.com/splintered-reality/py_trees_js/tree/release/0.6.x/./py_trees_js/viewer/web_view.ui">py_trees_js/viewer/web_view.ui</a> where the URL property of the QWebEngineView widget has been configured with the resources <code class="language-plaintext highlighter-rouge">index.html</code>.</p>

<p>You could alternatively, generate a module from the <code class="language-plaintext highlighter-rouge">.qrc</code> and import that into the
relevant python code as was done for the javascript resources.</p>

<h3 id="the-qt-application">The Qt Application</h3>

<p>The Qt application can be designed in whatever way you’re most comfortable with - via
Designer, pure C++ or python. In this case, Qt’s Designer is used to produce the <code class="language-plaintext highlighter-rouge">.ui</code>
files which are generated into python modules and finally customised and brought together
as a PyQt5 application. Refer to <a href="https://github.com/splintered-reality/py_trees_js/tree/release/0.6.x/./py_trees_js/viewer">py_trees_js/viewer</a> for more details
or as a reference example from which to start your own Qt-Js hybrid application.</p>

<p>Key elements:</p>

<ol>
  <li>Build your Qt application around a QWebEngineView widget</li>
  <li>Link/import the javascript module in the web engine view class</li>
  <li>Load the html page into the QWebEngineView view</li>
</ol>

<p>Do not use the QWebView widget - this is deprecating in favour of the QWebEngineView widget. The most notable difference is that QWebView uses Qt’s old webkit, while QWebEngineView makes use of Chromium’s webkit.</p>

<p>Note that the second step automagically makes available the javascript resources to the application
when it’s loaded. It’s not terribly fussy about where it gets loaded, see <a href="https://github.com/splintered-reality/py_trees_js/tree/release/0.6.x/./py_trees_js/viewer/web_view.py">py_trees_js/viewer/web_view.py</a> for an example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># This is the module generated by running pyrcc5 on the js libraries .qrc
# It could have been equivalently deployed in a completely different python package
import py_trees_js.resources

</code></pre></div></div>

<p>Loading the web page can be accomplished in designer. Simply point it at your qresource file
and set the dynamic URL property on the QWebEngineView widget. Alternatively you can import
the resource module and load it via QWebEngineView’s <code class="language-plaintext highlighter-rouge">load</code> api.</p>

<h4 id="qt-js-interactions">Qt-Js Interactions</h4>

<p>Qt and JS can interact directly over snippets of javascript code (via <code class="language-plaintext highlighter-rouge">runJavaScript()</code>
or over QWebChannel (a mechanism similar to sigslots) where more complexity is needed.
The example application here calls on the <code class="language-plaintext highlighter-rouge">render_tree()</code> method we created earlier in
the web application to send trees to the app. Example code from <a href="https://github.com/splintered-reality/py_trees_js/tree/release/0.6.x/./py_trees_js/viewer/viewer.py">py_trees_js/viewer/viewer.py</a> which handles button clicks to cycle through a list of
demonstration trees:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def send_tree_response(reply):
    console.logdebug("reply: '{}' [viewer]".format(reply))


@qt_core.pyqtSlot()
def send_tree(web_view_page, demo_trees, unused_checked):
    demo_trees[send_tree.index]['timestamp'] = time.time()
    console.logdebug("send: tree '{}' [{}][viewer]".format(
        send_tree.index, demo_trees[send_tree.index]['timestamp'])
    )
    javascript_command = "render_tree({{tree: {}}})".format(demo_trees[send_tree.index])
    web_view_page.runJavaScript(javascript_command, send_tree_response)
    send_tree.index = 0 if send_tree.index == 2 else send_tree.index + 1

send_tree.index = 0

</code></pre></div></div>

<h2 id="the-json-specification">The JSON Specification</h2>

<p>TODO: A JSon schema</p>

<p>Roughly, the specification expects json objects of the form:</p>

<ul>
  <li>timestamp: int</li>
  <li>behaviours: dict[str, dict]</li>
  <li>(optional) visited_path: list[str]</li>
  <li>(optional) blackboard: {</li>
  <li>behaviours: dict[str, dict[str, str]],</li>
  <li>data: dict[str, str]</li>
  <li>}</li>
  <li>(optional) activity: list[str]</li>
</ul>

<p>where each behaviour in the dict has specification:</p>

<ul>
  <li>id: str</li>
  <li>status: Union[<code class="language-plaintext highlighter-rouge">INVALID</code>,<code class="language-plaintext highlighter-rouge">FAILURE</code>, <code class="language-plaintext highlighter-rouge">RUNNING</code>, <code class="language-plaintext highlighter-rouge">SUCCESS</code>]</li>
  <li>name: str</li>
  <li>colour: &lt;html style hex code&gt;</li>
  <li>(optional) children: List[str]</li>
  <li>(optional) data: <generic key-value="" dictionary=""></generic>
</li>
</ul>

<p>Identification strings (id’s) must be unique and are used as both keys for the
behaviours dictionary, children and visited_path variables.</p>

<p>An example (extracted from <code class="language-plaintext highlighter-rouge">py_trees.experimental.create_demo_tree_definition()</code>):</p>

<p>```
{
    timestamp: 1563938995,
    visited_path: [‘1’, ‘2’, ‘3’, ‘4’, ‘5’, ‘7’, ‘8’],
    behaviours: {
        ‘1’: {
            id: ‘1’,
            status: ‘RUNNING’,
            name: ‘Selector’,
            colour: ‘#00FFFF’,
            children: [‘2’, ‘3’, ‘4’, ‘6’],
            data: {
                Type: ‘py_trees.composites.Selector’,
                Feedback: “Decision maker”,
            },
        },
        ‘2’: {
            id: ‘2’,
            status: ‘FAILURE’,
            name: ‘Worker’,
            colour: ‘#FFA500’,
            children: [‘7’, ‘8’, ‘9’],
            data: {
                Type: ‘py_trees.composites.Sequence’,
                Feedback: “Worker”
            },
        },
    }
    ‘blackboard’: {
        ‘behaviours’: {  # key metadata per behaviour
            ‘2’: {
                ‘/parameters/initial_value’: ‘r’,
                ‘/state/worker’: ‘w’
            },
        },
        ‘data’: {
            ‘/parameters/initial_value’: ‘foo’,
            ‘/state/worker’: ‘bar’,
        },
    ‘activity’: [
        “<text style="color: blue;">Worker initialised with 'foo'</text>’”,
        “<text style="color: red;">Worker wrote 'bar'</text>’”,
    ]
}</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog">Changelog</h1>

<h2 id="065-2025-01-11">0.6.5 (2025-01-11)</h2>

<ul>
  <li>[formatter] reformat auto-generated resources.py</li>
  <li>[linter] 2 lines between methods</li>
  <li>[readme] fix preview instructions, elucidate non-nvidia
alternatives</li>
  <li>[vscode] devcontainer DISPLAY fix</li>
  <li>Contributors: Daniel Stonier</li>
</ul>

<h2 id="064-2022-02-24">0.6.4 (2022-02-24)</h2>

<ul>
  <li>[actions] pre-merge and update-cache,
<a href="https://github.com/splintered-reality/py_trees_js/pull/146">#146</a>
</li>
  <li>[actions] push containers,
<a href="https://github.com/splintered-reality/py_trees_js/pull/144">#144</a>
</li>
  <li>[poetry] update project to use poetry,
<a href="https://github.com/splintered-reality/py_trees_js/pull/143">#143</a>
</li>
  <li>[vscode] devcontainer workflows,
<a href="https://github.com/splintered-reality/py_trees_js/pull/143">#143</a>
</li>
  <li>[tests] basic tests, formatting, linting,
<a href="https://github.com/splintered-reality/py_trees_js/pull/143">#143</a>
</li>
</ul>

<h2 id="063-2020-05-05">0.6.3 (2020-05-05)</h2>

<ul>
  <li>[js] remove buggy early view update and optimise them,
<a href="https://github.com/splintered-reality/py_trees_js/pull/142">#142</a>
</li>
</ul>

<h2 id="062-2020-03-02">0.6.2 (2020-03-02)</h2>

<ul>
  <li>[js] bugfix accidentally ignored tree_cache size,
<a href="https://github.com/splintered-reality/py_trees_js/pull/123">#123</a>
</li>
  <li>... missed a few pull requests inbetween</li>
</ul>

<h2 id="060-2019-12-27">0.6.0 (2019-12-27)</h2>

<ul>
  <li>[js] accepting trees flagged with no status/graph change,
<a href="https://github.com/splintered-reality/py_trees_js/pull/122">#122</a>
</li>
  <li>[js] blackboard views,
<a href="https://github.com/splintered-reality/py_trees_js/pull/125">#125</a>,
<a href="https://github.com/splintered-reality/py_trees_js/pull/134">#133</a>,
<a href="https://github.com/splintered-reality/py_trees_js/pull/134">#122</a>,
<a href="https://github.com/splintered-reality/py_trees_js/pull/135">#135</a>,
<a href="https://github.com/splintered-reality/py_trees_js/pull/136">#136</a>
</li>
</ul>

<h2 id="051-2019-10-26">0.5.1 (2019-10-26)</h2>

<ul>
  <li>[js] performance improvements,
<a href="https://github.com/splintered-reality/py_trees_js/pull/120">#120</a>
</li>
  <li>[js] highlighted links,
<a href="https://github.com/splintered-reality/py_trees_js/pull/115">#115</a>
</li>
  <li>[js] orthogonal link connections, for better visualisation</li>
  <li>[qt] capture screenshots,
<a href="https://github.com/splintered-reality/py_trees_js/pull/114">#114</a>
</li>
</ul>

<h2 id="050-2019-08-29">0.5.0 (2019-08-29)</h2>

<ul>
  <li>[html] disable scrollbars,
<a href="https://github.com/splintered-reality/py_trees_js/pull/110">#110</a>
</li>
  <li>[js] robustness against identical timestamps,
<a href="https://github.com/splintered-reality/py_trees_js/pull/109">#109</a>
</li>
  <li>[js] improved window resize handling,
<a href="https://github.com/splintered-reality/py_trees_js/pull/111">#111</a>
    <ul>
      <li>new public api <code class="language-plaintext highlighter-rouge">py_trees.canvas.on_window_resize</code> and
<code class="language-plaintext highlighter-rouge">py_trees.timeline.on_window_resize</code>
</li>
    </ul>
  </li>
</ul>

<h2 id="040-2019-08-13">0.4.0 (2019-08-13)</h2>

<ul>
  <li><a href="https://github.com/splintered-reality/py_trees_js/milestone/5">Milestone - Polish &amp;
Release</a></li>
</ul>

<h2 id="031-2019-08-07">0.3.1 (2019-08-07)</h2>

<ul>
  <li><a href="https://github.com/splintered-reality/py_trees_js/milestone/4">Milestone - Interactive Event
Timeline</a></li>
</ul>

<h2 id="020-2019-08-01">0.2.0 (2019-08-01)</h2>

<ul>
  <li><a href="https://github.com/splintered-reality/py_trees_js/milestone/3?closed=1">Milestone - Streaming Trees /
Qt</a></li>
</ul>

<h2 id="010-2019-07-25">0.1.0 (2019-07-25)</h2>

<ul>
  <li><a href="https://github.com/splintered-reality/py_trees_js/milestone/2?closed=1">Milestone - Render a
Tree</a></li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/py_trees_js/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No dependencies on ROS packages.</em>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/python3-setuptools">python3-setuptools</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/pyqt5-dev-tools">pyqt5-dev-tools</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/qttools5-dev-tools">qttools5-dev-tools</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-qt5-bindings">python3-qt5-bindings</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-pyqt5.qtwebengine">python3-pyqt5.qtwebengine</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/py_trees_ros_viewer#humble">py_trees_ros_viewer</a></td>
                      <td class="text-center">
                        
                        <a href="/p/py_trees_ros_viewer#humble-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>py_trees_js</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="humble-question-list" class="panel-body" style="display: none;"></div>
      <div id="humble-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/py_trees_js+humble">here</a>.</p>
      </div>
      <div id="humble-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/splintered-reality/py_trees_js.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/humble/p/py_trees_js"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/splintered-reality/py_trees_js/tree/release/0.6.x/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/py_trees_js">py_trees_js</a> <small>package from <a style="text-decoration:none" href="/r/py_trees_js/github-splintered-reality-py_trees_js">py_trees_js</a> repo</small>
        </h3>
          
            
            
              <span class="label label-default pkg-label">

py_trees_js
</span>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/jazzy/p/py_trees_js"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/splintered-reality/py_trees_js/tree/devel/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="jazzy-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#jazzy-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#jazzy-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#jazzy-deps" data-toggle="tab"><span class="label label-primary">5</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#jazzy-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#jazzy-questions" data-toggle="tab"><span id="jazzy-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="jazzy-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>0.6.6</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_PYTHON</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Javascript library for behaviour tree visualisation, demo'd with a qt-js hybrid application</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/splintered-reality/py_trees_js.git">https://github.com/splintered-reality/py_trees_js.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">devel</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-01-14
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">pyqt5</span> <span class="label label-default">jointjs</span> <span class="label label-default">behaviour-trees</span> <span class="label label-default">qt-js-application</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/py_trees_js/#jazzy-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/py_trees_js/#jazzy-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/py_trees_js/#jazzy-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            
    Javascript library for visualising behaviour trees.
  
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="https://github.com/splintered-reality/py_trees_js">Website</a></li>
                
                  <li><a href="https://github.com/splintered-reality/py_trees_js">Repository</a></li>
                
                  <li><a href="https://github.com/splintered-reality/py_trees_js/issues">Bugtracker</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Daniel Stonier</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Daniel Stonier</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./README.md" title="Open in git repository">README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="pytrees-js">PyTrees Js</h1>

<p>[<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./#about">About</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./#features">Features</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./#preview">Preview</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./#example---simple-web-app">Exmaple - Simple Web App</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./#example---pyqt-app">Example - PyQt App</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./#the-json-specification">The JSON Specification</a>]</p>

<h2 id="about">About</h2>

<p>Libraries for visualisation of runtime or replayed behaviour trees.</p>

<ul>
  <li>
<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/././js">./js</a> - a self-contained javascript library to build apps around</li>
  <li>
<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/././py_trees_js">py_trees_js</a> - a python package that makes the js available as a pyqt resource</li>
  <li>
<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/././py_trees_js/viewer">py_trees_js.viewer</a> - a demo pyqtwebengine app</li>
</ul>

<p>See <a href="https://github.com/splintered-reality/py_trees_ros_viewer">py_trees_ros_viewer</a> for a fully fledged pyqt integration that uses <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/././py_trees_js">py_trees_js</a>.</p>

<h2 id="features">Features</h2>

<ul>
  <li>Visualise the runtime state of a behaviour tree</li>
  <li>Collapsible subtrees</li>
  <li>Zoom and scale contents to fit</li>
  <li>Timeline rewind &amp; resume</li>
  <li>Blackboard key-value storage view</li>
  <li>Activity log view</li>
</ul>

<p>Although designed for py_trees, the js libs (in particular, the interfaces) are not dependent on py_trees and could be used for other behaviour tree applications.</p>

<h2 id="preview">Preview</h2>

<p>With VSCode DevContainers and on a PC with an NVIDIA GPU:</p>

<ul>
  <li>Install <a href="https://code.visualstudio.com/docs/setup/linux#_debian-and-ubuntu-based-distributions">VSCode</a>
</li>
  <li>Install the <a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html#docker">NVIDIA Container Toolkit</a>
</li>
  <li>Clone and launch the demo:</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git clone https://github.com/splintered-reality/py_trees_js
$ code .
$ cd py_trees_js

# Reopen the project in the devcontainer
$ (use CTRL-SHIFT-P if you miss VSCode's helper dialog)

# Setup and launch
$ poetry install
$ poetry run py-trees-demo-viewer

</code></pre></div></div>
<p align="center">
  <img src="https://raw.githubusercontent.com/splintered-reality/py_trees_js/devel/./images/splash.png" width="80%">
  <img src="https://raw.githubusercontent.com/splintered-reality/py_trees_js/devel/./images/screenshot.png" width="100%">
</p>

<p>If you do not have a PC that meets those requirements, some alternative options:</p>

<ul>
  <li>Install <a href="https://python-poetry.org/">Poetry</a> and PyQt on your system or in a venv. Clone and launch.</li>
  <li>If you’re just interested in seeing the demo viewer, <code class="language-plaintext highlighter-rouge">pip install --user py_trees_js</code> and launch the viewer</li>
  <li>Create your own devcontainer with something like the <a href="https://github.com/devcontainers/features/tree/main/src/desktop-lite">desktop-lite</a> feature. If this works, send me a PR!</li>
</ul>

<h2 id="example---simple-web-app">Example - Simple Web App</h2>

<p>Building a complete application that can render a behaviour tree stream is an effort that can be decomposed into two tasks:</p>

<ol>
  <li>Creating the web app for rendering trees and visualising a timeline</li>
  <li>Wrapping the web app in a framework and connecting it to an external stream</li>
</ol>

<p>The first stage is purely an exercise with html, css and javascript. The latter will depend on your use case - it could be a qt-js hybrid application (as exemplified here) for developers, an electron application for cross-platform and mobile deployment or a cloud based service.</p>

<p>This section will walk through how to build a web application with the provided js libraries. An example of wrapping the web app within a Qt-Js application will follow.</p>

<p>To get started, let’s begin with a basic html page with two divs, one for the tree canvas and one for the timeline:</p>

<pre><code class="language-xhtml">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;PyTrees Viewer&lt;/title&gt;
  &lt;style&gt;
    html {
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
    body {
      margin: 0;
      overflow:hidden;  /* no scrollbars */
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id="canvas"&gt;&lt;/div&gt;
  &lt;div id="timeline"&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<p>Next, bring in the javascript libraries. For exemplar purposes, it is assumed here that the libraries
have been made available alongside the html page - how is an integration detail depending on the mode
of deployment (see next section for an example).</p>

<p>Note that the <code class="language-plaintext highlighter-rouge">py_trees-&lt;version&gt;.js</code> library has only one dependency, <a href="https://resources.jointjs.com/docs/jointjs/v3.0/joint.html">jointjs</a>,
but that in turn has a few dependencies of it’s own. The bundled libraries in the <code class="language-plaintext highlighter-rouge">js/jointjs</code> folder
of this repository correspond to the requirements for a specific version of jointjs and
have been tested to work with the accompany <code class="language-plaintext highlighter-rouge">py_trees-&lt;version&gt;.js</code> library.</p>

<p>You can verify that the libraries have been properly imported by calling <code class="language-plaintext highlighter-rouge">py_trees.hello()</code> which
will print version information of the loaded javascript libraries (if found) to the javascript console.</p>

<pre><code class="language-xhtml">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;PyTrees Viewer&lt;/title&gt;
  &lt;link rel="stylesheet" href="js/py_trees-0.6.0.css"/&gt;
  &lt;link rel="stylesheet" type="text/css" href="js/jointjs/joint-3.0.4.min.css"/&gt;
  &lt;script src="js/jointjs/dagre-0.8.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/graphlib-2.1.7.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/jquery-3.4.1.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/lodash-4.17.11.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/backbone-1.4.0.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/joint-3.0.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/py_trees-0.6.0.js"&gt;&lt;/script&gt;
  &lt;!-- Web app integration css here --&gt;
  &lt;style&gt;
    html {
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
    body {
      margin: 0;
      overflow:hidden;  /* no scrollbars */
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;script type="text/javascript"&gt;
    py_trees.hello()
  &lt;/script&gt;
  &lt;div id="window"&gt;
    &lt;div id="canvas"&gt;&lt;/div&gt;
    &lt;div id="timeline"&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<p>Output from <code class="language-plaintext highlighter-rouge">py_trees.hello()</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>********************************************************************************
                               Py Trees JS

 A javascript library for visualisation of executing behaviour trees.

 Version &amp; Dependency Info:
  - py_trees:  0.6.0
    - jointjs :  3.1.0
       - backbone:  1.4.0
       - dagre   :  0.8.4
       - jquery  :  3.4.1
       - lodash  :  4.17.11
********************************************************************************

</code></pre></div></div>

<p>In the next iteration, the canvas is initialised and a callback for
accepting incoming trees from an external source is prepared. To test it,
pass it the demo tree provided by the library.</p>

<pre><code class="language-xhtml">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;PyTrees Viewer&lt;/title&gt;
  &lt;link rel="stylesheet" href="js/py_trees-0.6.0.css"/&gt;
  &lt;link rel="stylesheet" type="text/css" href="js/jointjs/joint-3.0.4.min.css"/&gt;
  &lt;script src="js/jointjs/dagre-0.8.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/graphlib-2.1.7.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/jquery-3.4.1.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/lodash-4.17.11.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/backbone-1.4.0.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/joint-3.0.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/py_trees-0.6.0.js"&gt;&lt;/script&gt;
  &lt;!-- Web app integration css here --&gt;
  &lt;style&gt;
    html {
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
    body {
      margin: 0;
      overflow:hidden;  /* no scrollbars */
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;script type="text/javascript"&gt;
    py_trees.hello()
  &lt;/script&gt;
  &lt;div id="window"&gt;
    &lt;div id="canvas"&gt;&lt;/div&gt;
    &lt;div id="timeline"&gt;&lt;/div&gt;
  &lt;/div&gt;
  &lt;script type="text/javascript"&gt;
    // rendering canvas
    canvas_graph = py_trees.canvas.create_graph()
    canvas_paper = py_trees.canvas.create_paper({graph: canvas_graph})

    render_tree = function({tree}) {
      py_trees.canvas.update_graph({graph: canvas_graph, tree: tree})
      py_trees.canvas.layout_graph({graph: canvas_graph})
      if ( canvas_graph.get('scale_content_to_fit') ) {
        py_trees.canvas.scale_content_to_fit(canvas_paper)
      }
      return "rendered"
    }
    render_tree({tree: py_trees.experimental.create_demo_tree_definition()})
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<p>At this point, your web app should be visualising a single tree and
zoom/collapse/scale to fit interactions functional. I’m happy, you should be too!</p>

<p>Adding a timeline to the application is optional, but the code does not
change significantly and is a very useful feature to have. The built-in demo
app’s <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer/html/index.html">index.html</a> does exactly this. The code is reproduced below for convenience.</p>

<pre><code class="language-xhtml">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;PyTrees Viewer&lt;/title&gt;
  &lt;link rel="stylesheet" href="js/py_trees-0.6.0.css"/&gt;
  &lt;link rel="stylesheet" type="text/css" href="js/jointjs/joint-3.0.4.min.css"/&gt;
  &lt;script src="js/jointjs/dagre-0.8.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/graphlib-2.1.7.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/jquery-3.4.1.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/lodash-4.17.11.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/backbone-1.4.0.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/joint-3.0.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/py_trees-0.6.0.js"&gt;&lt;/script&gt;
  &lt;!-- Web app integration css here --&gt;
  &lt;style&gt;
    html {
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
    body {
      margin: 0;
      overflow:hidden;  /* no scrollbars */
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;script type="text/javascript"&gt;
    py_trees.hello()
  &lt;/script&gt;
  &lt;div id="window"&gt;
    &lt;div id="canvas"&gt;&lt;/div&gt;
    &lt;div id="timeline"&gt;&lt;/div&gt;
  &lt;/div&gt;
  &lt;script type="text/javascript"&gt;
    // rendering canvas
    canvas_graph = py_trees.canvas.create_graph()
    canvas_paper = py_trees.canvas.create_paper({graph: canvas_graph})

    // event timeline
    timeline_graph = py_trees.timeline.create_graph({event_cache_limit: 100});
    timeline_paper = py_trees.timeline.create_paper({
        timeline_graph: timeline_graph,
        canvas_graph: canvas_graph,
        canvas_paper: canvas_paper,
    })

    // react to window resizing events
    $(window).resize(function() {
      py_trees.canvas.on_window_resize(canvas_paper)
      py_trees.timeline.on_window_resize(timeline_paper)
    })

    render_tree = function({tree}) {
      py_trees.timeline.add_tree_to_cache({
          timeline_graph: timeline_graph,
          canvas_graph: canvas_graph,
          canvas_paper: canvas_paper,
          tree: tree
      })
      return "rendered"
    }
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<h2 id="example---pyqt-app">Example - PyQt App</h2>

<p>The <code class="language-plaintext highlighter-rouge">py-trees-demo-viewer</code> app is a qt-js hybrid application using <code class="language-plaintext highlighter-rouge">qtwebengine</code>.
Every time a qt button is pressed, an internally generated tree snapshot is sent to <code class="language-plaintext highlighter-rouge">render_tree()</code> in the embedded web application. From here, it is not too hard to
imagine connecting the qt application to an actual external source. The qt layer
then acts as a shim or relay transferring messages to the internal web app.</p>

<p>How does it work?</p>

<ul>
  <li>The js libs are made available as a <code class="language-plaintext highlighter-rouge">.qrc</code> resource [1]</li>
  <li>A simple web app is made available as another <code class="language-plaintext highlighter-rouge">.qrc</code> resource</li>
  <li>Both resources are consumed by the QWebEngine View to serve the app</li>
</ul>

<p>[1] This can be made available separately and as a dependency to the actual
pyqt application. For instance, the <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/././py_trees_js">py_trees_js</a> package is a dependency of <a href="https://github.com/splintered-reality/py_trees_ros_viewer">py_trees_ros_viewer</a>.</p>

<p>In more detail…</p>

<h3 id="the-js-libraries">The JS Libraries</h3>

<ol>
  <li>Bundle the javascript resources into a <code class="language-plaintext highlighter-rouge">.qrc</code> file</li>
  <li>Generate the resources as a c++ library / python module</li>
  <li>Deploy the c++ library/python module in your development environment</li>
</ol>

<p>In this case, the py_trees and jointjs javascript libraries have been listed
in <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/resources.qrc">py_trees_js/resources.qrc</a>, generated using
<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/gen.bash">py_trees_js/gen.bash</a>, resulting in the importable module
<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/resources.py">py_trees_js/resources.py</a>. From this point, any pythonic
Qt application wishing to visualise behaviour trees need only import this module from the <code class="language-plaintext highlighter-rouge">py_trees_js</code> package.</p>

<h3 id="the-web-app">The Web App</h3>

<ol>
  <li>Bundle the <code class="language-plaintext highlighter-rouge">.html</code>/<code class="language-plaintext highlighter-rouge">.css</code> pages into a <code class="language-plaintext highlighter-rouge">.qrc</code> file</li>
  <li>Import into directly into designer when building your Qt application</li>
</ol>

<p>In this case, our web app (<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer/html/index.html">py_trees_js/viewer/html/index.html</a>) has been rolled into <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer/web_app.qrc">py_trees_js/viewer/web_app.qrc</a> which is directly loaded into <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer/web_view.ui">py_trees_js/viewer/web_view.ui</a> where the URL property of the QWebEngineView widget has been configured with the resources <code class="language-plaintext highlighter-rouge">index.html</code>.</p>

<p>You could alternatively, generate a module from the <code class="language-plaintext highlighter-rouge">.qrc</code> and import that into the
relevant python code as was done for the javascript resources.</p>

<h3 id="the-qt-application">The Qt Application</h3>

<p>The Qt application can be designed in whatever way you’re most comfortable with - via
Designer, pure C++ or python. In this case, Qt’s Designer is used to produce the <code class="language-plaintext highlighter-rouge">.ui</code>
files which are generated into python modules and finally customised and brought together
as a PyQt5 application. Refer to <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer">py_trees_js/viewer</a> for more details
or as a reference example from which to start your own Qt-Js hybrid application.</p>

<p>Key elements:</p>

<ol>
  <li>Build your Qt application around a QWebEngineView widget</li>
  <li>Link/import the javascript module in the web engine view class</li>
  <li>Load the html page into the QWebEngineView view</li>
</ol>

<p>Do not use the QWebView widget - this is deprecating in favour of the QWebEngineView widget. The most notable difference is that QWebView uses Qt’s old webkit, while QWebEngineView makes use of Chromium’s webkit.</p>

<p>Note that the second step automagically makes available the javascript resources to the application
when it’s loaded. It’s not terribly fussy about where it gets loaded, see <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer/web_view.py">py_trees_js/viewer/web_view.py</a> for an example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># This is the module generated by running pyrcc5 on the js libraries .qrc
# It could have been equivalently deployed in a completely different python package
import py_trees_js.resources

</code></pre></div></div>

<p>Loading the web page can be accomplished in designer. Simply point it at your qresource file
and set the dynamic URL property on the QWebEngineView widget. Alternatively you can import
the resource module and load it via QWebEngineView’s <code class="language-plaintext highlighter-rouge">load</code> api.</p>

<h4 id="qt-js-interactions">Qt-Js Interactions</h4>

<p>Qt and JS can interact directly over snippets of javascript code (via <code class="language-plaintext highlighter-rouge">runJavaScript()</code>
or over QWebChannel (a mechanism similar to sigslots) where more complexity is needed.
The example application here calls on the <code class="language-plaintext highlighter-rouge">render_tree()</code> method we created earlier in
the web application to send trees to the app. Example code from <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer/viewer.py">py_trees_js/viewer/viewer.py</a> which handles button clicks to cycle through a list of
demonstration trees:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def send_tree_response(reply):
    console.logdebug("reply: '{}' [viewer]".format(reply))


@qt_core.pyqtSlot()
def send_tree(web_view_page, demo_trees, unused_checked):
    demo_trees[send_tree.index]['timestamp'] = time.time()
    console.logdebug("send: tree '{}' [{}][viewer]".format(
        send_tree.index, demo_trees[send_tree.index]['timestamp'])
    )
    javascript_command = "render_tree({{tree: {}}})".format(demo_trees[send_tree.index])
    web_view_page.runJavaScript(javascript_command, send_tree_response)
    send_tree.index = 0 if send_tree.index == 2 else send_tree.index + 1

send_tree.index = 0

</code></pre></div></div>

<h2 id="the-json-specification">The JSON Specification</h2>

<p>TODO: A JSon schema</p>

<p>Roughly, the specification expects json objects of the form:</p>

<ul>
  <li>timestamp: int</li>
  <li>behaviours: dict[str, dict]</li>
  <li>(optional) visited_path: list[str]</li>
  <li>(optional) blackboard: {</li>
  <li>behaviours: dict[str, dict[str, str]],</li>
  <li>data: dict[str, str]</li>
  <li>}</li>
  <li>(optional) activity: list[str]</li>
</ul>

<p>where each behaviour in the dict has specification:</p>

<ul>
  <li>id: str</li>
  <li>status: Union[<code class="language-plaintext highlighter-rouge">INVALID</code>,<code class="language-plaintext highlighter-rouge">FAILURE</code>, <code class="language-plaintext highlighter-rouge">RUNNING</code>, <code class="language-plaintext highlighter-rouge">SUCCESS</code>]</li>
  <li>name: str</li>
  <li>colour: &lt;html style hex code&gt;</li>
  <li>(optional) children: List[str]</li>
  <li>(optional) data: <generic key-value="" dictionary=""></generic>
</li>
</ul>

<p>Identification strings (id’s) must be unique and are used as both keys for the
behaviours dictionary, children and visited_path variables.</p>

<p>An example (extracted from <code class="language-plaintext highlighter-rouge">py_trees.experimental.create_demo_tree_definition()</code>):</p>

<p>```
{
    timestamp: 1563938995,
    visited_path: [‘1’, ‘2’, ‘3’, ‘4’, ‘5’, ‘7’, ‘8’],
    behaviours: {
        ‘1’: {
            id: ‘1’,
            status: ‘RUNNING’,
            name: ‘Selector’,
            colour: ‘#00FFFF’,
            children: [‘2’, ‘3’, ‘4’, ‘6’],
            data: {
                Type: ‘py_trees.composites.Selector’,
                Feedback: “Decision maker”,
            },
        },
        ‘2’: {
            id: ‘2’,
            status: ‘FAILURE’,
            name: ‘Worker’,
            colour: ‘#FFA500’,
            children: [‘7’, ‘8’, ‘9’],
            data: {
                Type: ‘py_trees.composites.Sequence’,
                Feedback: “Worker”
            },
        },
    }
    ‘blackboard’: {
        ‘behaviours’: {  # key metadata per behaviour
            ‘2’: {
                ‘/parameters/initial_value’: ‘r’,
                ‘/state/worker’: ‘w’
            },
        },
        ‘data’: {
            ‘/parameters/initial_value’: ‘foo’,
            ‘/state/worker’: ‘bar’,
        },
    ‘activity’: [
        “<text style="color: blue;">Worker initialised with 'foo'</text>’”,
        “<text style="color: red;">Worker wrote 'bar'</text>’”,
    ]
}</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog">Changelog</h1>

<h2 id="066-2025-01-13">0.6.6 (2025-01-13)</h2>

<ul>
  <li>[infra] Add dummy test to make buildfarm happy</li>
  <li>[infra] Fix repo URL in package.xml</li>
  <li>Contributors: Sebastian Castro</li>
</ul>

<h2 id="065-2025-01-11">0.6.5 (2025-01-11)</h2>

<ul>
  <li>[formatter] reformat auto-generated resources.py</li>
  <li>[linter] 2 lines between methods</li>
  <li>[readme] fix preview instructions, elucidate non-nvidia
alternatives</li>
  <li>[vscode] devcontainer DISPLAY fix</li>
  <li>Contributors: Daniel Stonier</li>
</ul>

<h2 id="064-2022-02-24">0.6.4 (2022-02-24)</h2>

<ul>
  <li>[actions] pre-merge and update-cache,
<a href="https://github.com/splintered-reality/py_trees_js/pull/146">#146</a>
</li>
  <li>[actions] push containers,
<a href="https://github.com/splintered-reality/py_trees_js/pull/144">#144</a>
</li>
  <li>[poetry] update project to use poetry,
<a href="https://github.com/splintered-reality/py_trees_js/pull/143">#143</a>
</li>
  <li>[vscode] devcontainer workflows,
<a href="https://github.com/splintered-reality/py_trees_js/pull/143">#143</a>
</li>
  <li>[tests] basic tests, formatting, linting,
<a href="https://github.com/splintered-reality/py_trees_js/pull/143">#143</a>
</li>
</ul>

<h2 id="063-2020-05-05">0.6.3 (2020-05-05)</h2>

<ul>
  <li>[js] remove buggy early view update and optimise them,
<a href="https://github.com/splintered-reality/py_trees_js/pull/142">#142</a>
</li>
</ul>

<h2 id="062-2020-03-02">0.6.2 (2020-03-02)</h2>

<ul>
  <li>[js] bugfix accidentally ignored tree_cache size,
<a href="https://github.com/splintered-reality/py_trees_js/pull/123">#123</a>
</li>
  <li>... missed a few pull requests inbetween</li>
</ul>

<h2 id="060-2019-12-27">0.6.0 (2019-12-27)</h2>

<ul>
  <li>[js] accepting trees flagged with no status/graph change,
<a href="https://github.com/splintered-reality/py_trees_js/pull/122">#122</a>
</li>
  <li>[js] blackboard views,
<a href="https://github.com/splintered-reality/py_trees_js/pull/125">#125</a>,
<a href="https://github.com/splintered-reality/py_trees_js/pull/134">#133</a>,
<a href="https://github.com/splintered-reality/py_trees_js/pull/134">#122</a>,
<a href="https://github.com/splintered-reality/py_trees_js/pull/135">#135</a>,
<a href="https://github.com/splintered-reality/py_trees_js/pull/136">#136</a>
</li>
</ul>

<h2 id="051-2019-10-26">0.5.1 (2019-10-26)</h2>

<ul>
  <li>[js] performance improvements,
<a href="https://github.com/splintered-reality/py_trees_js/pull/120">#120</a>
</li>
  <li>[js] highlighted links,
<a href="https://github.com/splintered-reality/py_trees_js/pull/115">#115</a>
</li>
  <li>[js] orthogonal link connections, for better visualisation</li>
  <li>[qt] capture screenshots,
<a href="https://github.com/splintered-reality/py_trees_js/pull/114">#114</a>
</li>
</ul>

<h2 id="050-2019-08-29">0.5.0 (2019-08-29)</h2>

<ul>
  <li>[html] disable scrollbars,
<a href="https://github.com/splintered-reality/py_trees_js/pull/110">#110</a>
</li>
  <li>[js] robustness against identical timestamps,
<a href="https://github.com/splintered-reality/py_trees_js/pull/109">#109</a>
</li>
  <li>[js] improved window resize handling,
<a href="https://github.com/splintered-reality/py_trees_js/pull/111">#111</a>
    <ul>
      <li>new public api <code class="language-plaintext highlighter-rouge">py_trees.canvas.on_window_resize</code> and
<code class="language-plaintext highlighter-rouge">py_trees.timeline.on_window_resize</code>
</li>
    </ul>
  </li>
</ul>

<h2 id="040-2019-08-13">0.4.0 (2019-08-13)</h2>

<ul>
  <li><a href="https://github.com/splintered-reality/py_trees_js/milestone/5">Milestone - Polish &amp;
Release</a></li>
</ul>

<h2 id="031-2019-08-07">0.3.1 (2019-08-07)</h2>

<ul>
  <li><a href="https://github.com/splintered-reality/py_trees_js/milestone/4">Milestone - Interactive Event
Timeline</a></li>
</ul>

<h2 id="020-2019-08-01">0.2.0 (2019-08-01)</h2>

<ul>
  <li><a href="https://github.com/splintered-reality/py_trees_js/milestone/3?closed=1">Milestone - Streaming Trees /
Qt</a></li>
</ul>

<h2 id="010-2019-07-25">0.1.0 (2019-07-25)</h2>

<ul>
  <li><a href="https://github.com/splintered-reality/py_trees_js/milestone/2?closed=1">Milestone - Render a
Tree</a></li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/py_trees_js/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No dependencies on ROS packages.</em>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/python3-setuptools">python3-setuptools</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/pyqt5-dev-tools">pyqt5-dev-tools</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/qttools5-dev-tools">qttools5-dev-tools</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-qt5-bindings">python3-qt5-bindings</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-pyqt5.qtwebengine">python3-pyqt5.qtwebengine</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/py_trees_ros_viewer#jazzy">py_trees_ros_viewer</a></td>
                      <td class="text-center">
                        
                        <a href="/p/py_trees_ros_viewer#jazzy-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>py_trees_js</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="jazzy-question-list" class="panel-body" style="display: none;"></div>
      <div id="jazzy-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/py_trees_js+jazzy">here</a>.</p>
      </div>
      <div id="jazzy-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/splintered-reality/py_trees_js.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/jazzy/p/py_trees_js"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/splintered-reality/py_trees_js/tree/devel/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/py_trees_js">py_trees_js</a> <small>package from <a style="text-decoration:none" href="/r/py_trees_js/github-splintered-reality-py_trees_js">py_trees_js</a> repo</small>
        </h3>
          
            
            
              <span class="label label-default pkg-label">

py_trees_js
</span>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/kilted/p/py_trees_js"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/splintered-reality/py_trees_js/tree/devel/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="kilted-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#kilted-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#kilted-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#kilted-deps" data-toggle="tab"><span class="label label-primary">5</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#kilted-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#kilted-questions" data-toggle="tab"><span id="kilted-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="kilted-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>0.6.6</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_PYTHON</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Javascript library for behaviour tree visualisation, demo'd with a qt-js hybrid application</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/splintered-reality/py_trees_js.git">https://github.com/splintered-reality/py_trees_js.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">devel</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-01-14
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">pyqt5</span> <span class="label label-default">jointjs</span> <span class="label label-default">behaviour-trees</span> <span class="label label-default">qt-js-application</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/py_trees_js/#kilted-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/py_trees_js/#kilted-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/py_trees_js/#kilted-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            
    Javascript library for visualising behaviour trees.
  
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="https://github.com/splintered-reality/py_trees_js">Website</a></li>
                
                  <li><a href="https://github.com/splintered-reality/py_trees_js">Repository</a></li>
                
                  <li><a href="https://github.com/splintered-reality/py_trees_js/issues">Bugtracker</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Daniel Stonier</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Daniel Stonier</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./README.md" title="Open in git repository">README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="pytrees-js">PyTrees Js</h1>

<p>[<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./#about">About</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./#features">Features</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./#preview">Preview</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./#example---simple-web-app">Exmaple - Simple Web App</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./#example---pyqt-app">Example - PyQt App</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./#the-json-specification">The JSON Specification</a>]</p>

<h2 id="about">About</h2>

<p>Libraries for visualisation of runtime or replayed behaviour trees.</p>

<ul>
  <li>
<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/././js">./js</a> - a self-contained javascript library to build apps around</li>
  <li>
<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/././py_trees_js">py_trees_js</a> - a python package that makes the js available as a pyqt resource</li>
  <li>
<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/././py_trees_js/viewer">py_trees_js.viewer</a> - a demo pyqtwebengine app</li>
</ul>

<p>See <a href="https://github.com/splintered-reality/py_trees_ros_viewer">py_trees_ros_viewer</a> for a fully fledged pyqt integration that uses <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/././py_trees_js">py_trees_js</a>.</p>

<h2 id="features">Features</h2>

<ul>
  <li>Visualise the runtime state of a behaviour tree</li>
  <li>Collapsible subtrees</li>
  <li>Zoom and scale contents to fit</li>
  <li>Timeline rewind &amp; resume</li>
  <li>Blackboard key-value storage view</li>
  <li>Activity log view</li>
</ul>

<p>Although designed for py_trees, the js libs (in particular, the interfaces) are not dependent on py_trees and could be used for other behaviour tree applications.</p>

<h2 id="preview">Preview</h2>

<p>With VSCode DevContainers and on a PC with an NVIDIA GPU:</p>

<ul>
  <li>Install <a href="https://code.visualstudio.com/docs/setup/linux#_debian-and-ubuntu-based-distributions">VSCode</a>
</li>
  <li>Install the <a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html#docker">NVIDIA Container Toolkit</a>
</li>
  <li>Clone and launch the demo:</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git clone https://github.com/splintered-reality/py_trees_js
$ code .
$ cd py_trees_js

# Reopen the project in the devcontainer
$ (use CTRL-SHIFT-P if you miss VSCode's helper dialog)

# Setup and launch
$ poetry install
$ poetry run py-trees-demo-viewer

</code></pre></div></div>
<p align="center">
  <img src="https://raw.githubusercontent.com/splintered-reality/py_trees_js/devel/./images/splash.png" width="80%">
  <img src="https://raw.githubusercontent.com/splintered-reality/py_trees_js/devel/./images/screenshot.png" width="100%">
</p>

<p>If you do not have a PC that meets those requirements, some alternative options:</p>

<ul>
  <li>Install <a href="https://python-poetry.org/">Poetry</a> and PyQt on your system or in a venv. Clone and launch.</li>
  <li>If you’re just interested in seeing the demo viewer, <code class="language-plaintext highlighter-rouge">pip install --user py_trees_js</code> and launch the viewer</li>
  <li>Create your own devcontainer with something like the <a href="https://github.com/devcontainers/features/tree/main/src/desktop-lite">desktop-lite</a> feature. If this works, send me a PR!</li>
</ul>

<h2 id="example---simple-web-app">Example - Simple Web App</h2>

<p>Building a complete application that can render a behaviour tree stream is an effort that can be decomposed into two tasks:</p>

<ol>
  <li>Creating the web app for rendering trees and visualising a timeline</li>
  <li>Wrapping the web app in a framework and connecting it to an external stream</li>
</ol>

<p>The first stage is purely an exercise with html, css and javascript. The latter will depend on your use case - it could be a qt-js hybrid application (as exemplified here) for developers, an electron application for cross-platform and mobile deployment or a cloud based service.</p>

<p>This section will walk through how to build a web application with the provided js libraries. An example of wrapping the web app within a Qt-Js application will follow.</p>

<p>To get started, let’s begin with a basic html page with two divs, one for the tree canvas and one for the timeline:</p>

<pre><code class="language-xhtml">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;PyTrees Viewer&lt;/title&gt;
  &lt;style&gt;
    html {
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
    body {
      margin: 0;
      overflow:hidden;  /* no scrollbars */
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id="canvas"&gt;&lt;/div&gt;
  &lt;div id="timeline"&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<p>Next, bring in the javascript libraries. For exemplar purposes, it is assumed here that the libraries
have been made available alongside the html page - how is an integration detail depending on the mode
of deployment (see next section for an example).</p>

<p>Note that the <code class="language-plaintext highlighter-rouge">py_trees-&lt;version&gt;.js</code> library has only one dependency, <a href="https://resources.jointjs.com/docs/jointjs/v3.0/joint.html">jointjs</a>,
but that in turn has a few dependencies of it’s own. The bundled libraries in the <code class="language-plaintext highlighter-rouge">js/jointjs</code> folder
of this repository correspond to the requirements for a specific version of jointjs and
have been tested to work with the accompany <code class="language-plaintext highlighter-rouge">py_trees-&lt;version&gt;.js</code> library.</p>

<p>You can verify that the libraries have been properly imported by calling <code class="language-plaintext highlighter-rouge">py_trees.hello()</code> which
will print version information of the loaded javascript libraries (if found) to the javascript console.</p>

<pre><code class="language-xhtml">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;PyTrees Viewer&lt;/title&gt;
  &lt;link rel="stylesheet" href="js/py_trees-0.6.0.css"/&gt;
  &lt;link rel="stylesheet" type="text/css" href="js/jointjs/joint-3.0.4.min.css"/&gt;
  &lt;script src="js/jointjs/dagre-0.8.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/graphlib-2.1.7.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/jquery-3.4.1.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/lodash-4.17.11.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/backbone-1.4.0.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/joint-3.0.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/py_trees-0.6.0.js"&gt;&lt;/script&gt;
  &lt;!-- Web app integration css here --&gt;
  &lt;style&gt;
    html {
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
    body {
      margin: 0;
      overflow:hidden;  /* no scrollbars */
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;script type="text/javascript"&gt;
    py_trees.hello()
  &lt;/script&gt;
  &lt;div id="window"&gt;
    &lt;div id="canvas"&gt;&lt;/div&gt;
    &lt;div id="timeline"&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<p>Output from <code class="language-plaintext highlighter-rouge">py_trees.hello()</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>********************************************************************************
                               Py Trees JS

 A javascript library for visualisation of executing behaviour trees.

 Version &amp; Dependency Info:
  - py_trees:  0.6.0
    - jointjs :  3.1.0
       - backbone:  1.4.0
       - dagre   :  0.8.4
       - jquery  :  3.4.1
       - lodash  :  4.17.11
********************************************************************************

</code></pre></div></div>

<p>In the next iteration, the canvas is initialised and a callback for
accepting incoming trees from an external source is prepared. To test it,
pass it the demo tree provided by the library.</p>

<pre><code class="language-xhtml">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;PyTrees Viewer&lt;/title&gt;
  &lt;link rel="stylesheet" href="js/py_trees-0.6.0.css"/&gt;
  &lt;link rel="stylesheet" type="text/css" href="js/jointjs/joint-3.0.4.min.css"/&gt;
  &lt;script src="js/jointjs/dagre-0.8.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/graphlib-2.1.7.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/jquery-3.4.1.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/lodash-4.17.11.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/backbone-1.4.0.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/joint-3.0.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/py_trees-0.6.0.js"&gt;&lt;/script&gt;
  &lt;!-- Web app integration css here --&gt;
  &lt;style&gt;
    html {
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
    body {
      margin: 0;
      overflow:hidden;  /* no scrollbars */
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;script type="text/javascript"&gt;
    py_trees.hello()
  &lt;/script&gt;
  &lt;div id="window"&gt;
    &lt;div id="canvas"&gt;&lt;/div&gt;
    &lt;div id="timeline"&gt;&lt;/div&gt;
  &lt;/div&gt;
  &lt;script type="text/javascript"&gt;
    // rendering canvas
    canvas_graph = py_trees.canvas.create_graph()
    canvas_paper = py_trees.canvas.create_paper({graph: canvas_graph})

    render_tree = function({tree}) {
      py_trees.canvas.update_graph({graph: canvas_graph, tree: tree})
      py_trees.canvas.layout_graph({graph: canvas_graph})
      if ( canvas_graph.get('scale_content_to_fit') ) {
        py_trees.canvas.scale_content_to_fit(canvas_paper)
      }
      return "rendered"
    }
    render_tree({tree: py_trees.experimental.create_demo_tree_definition()})
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<p>At this point, your web app should be visualising a single tree and
zoom/collapse/scale to fit interactions functional. I’m happy, you should be too!</p>

<p>Adding a timeline to the application is optional, but the code does not
change significantly and is a very useful feature to have. The built-in demo
app’s <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer/html/index.html">index.html</a> does exactly this. The code is reproduced below for convenience.</p>

<pre><code class="language-xhtml">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;PyTrees Viewer&lt;/title&gt;
  &lt;link rel="stylesheet" href="js/py_trees-0.6.0.css"/&gt;
  &lt;link rel="stylesheet" type="text/css" href="js/jointjs/joint-3.0.4.min.css"/&gt;
  &lt;script src="js/jointjs/dagre-0.8.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/graphlib-2.1.7.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/jquery-3.4.1.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/lodash-4.17.11.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/backbone-1.4.0.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/joint-3.0.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/py_trees-0.6.0.js"&gt;&lt;/script&gt;
  &lt;!-- Web app integration css here --&gt;
  &lt;style&gt;
    html {
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
    body {
      margin: 0;
      overflow:hidden;  /* no scrollbars */
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;script type="text/javascript"&gt;
    py_trees.hello()
  &lt;/script&gt;
  &lt;div id="window"&gt;
    &lt;div id="canvas"&gt;&lt;/div&gt;
    &lt;div id="timeline"&gt;&lt;/div&gt;
  &lt;/div&gt;
  &lt;script type="text/javascript"&gt;
    // rendering canvas
    canvas_graph = py_trees.canvas.create_graph()
    canvas_paper = py_trees.canvas.create_paper({graph: canvas_graph})

    // event timeline
    timeline_graph = py_trees.timeline.create_graph({event_cache_limit: 100});
    timeline_paper = py_trees.timeline.create_paper({
        timeline_graph: timeline_graph,
        canvas_graph: canvas_graph,
        canvas_paper: canvas_paper,
    })

    // react to window resizing events
    $(window).resize(function() {
      py_trees.canvas.on_window_resize(canvas_paper)
      py_trees.timeline.on_window_resize(timeline_paper)
    })

    render_tree = function({tree}) {
      py_trees.timeline.add_tree_to_cache({
          timeline_graph: timeline_graph,
          canvas_graph: canvas_graph,
          canvas_paper: canvas_paper,
          tree: tree
      })
      return "rendered"
    }
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<h2 id="example---pyqt-app">Example - PyQt App</h2>

<p>The <code class="language-plaintext highlighter-rouge">py-trees-demo-viewer</code> app is a qt-js hybrid application using <code class="language-plaintext highlighter-rouge">qtwebengine</code>.
Every time a qt button is pressed, an internally generated tree snapshot is sent to <code class="language-plaintext highlighter-rouge">render_tree()</code> in the embedded web application. From here, it is not too hard to
imagine connecting the qt application to an actual external source. The qt layer
then acts as a shim or relay transferring messages to the internal web app.</p>

<p>How does it work?</p>

<ul>
  <li>The js libs are made available as a <code class="language-plaintext highlighter-rouge">.qrc</code> resource [1]</li>
  <li>A simple web app is made available as another <code class="language-plaintext highlighter-rouge">.qrc</code> resource</li>
  <li>Both resources are consumed by the QWebEngine View to serve the app</li>
</ul>

<p>[1] This can be made available separately and as a dependency to the actual
pyqt application. For instance, the <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/././py_trees_js">py_trees_js</a> package is a dependency of <a href="https://github.com/splintered-reality/py_trees_ros_viewer">py_trees_ros_viewer</a>.</p>

<p>In more detail…</p>

<h3 id="the-js-libraries">The JS Libraries</h3>

<ol>
  <li>Bundle the javascript resources into a <code class="language-plaintext highlighter-rouge">.qrc</code> file</li>
  <li>Generate the resources as a c++ library / python module</li>
  <li>Deploy the c++ library/python module in your development environment</li>
</ol>

<p>In this case, the py_trees and jointjs javascript libraries have been listed
in <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/resources.qrc">py_trees_js/resources.qrc</a>, generated using
<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/gen.bash">py_trees_js/gen.bash</a>, resulting in the importable module
<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/resources.py">py_trees_js/resources.py</a>. From this point, any pythonic
Qt application wishing to visualise behaviour trees need only import this module from the <code class="language-plaintext highlighter-rouge">py_trees_js</code> package.</p>

<h3 id="the-web-app">The Web App</h3>

<ol>
  <li>Bundle the <code class="language-plaintext highlighter-rouge">.html</code>/<code class="language-plaintext highlighter-rouge">.css</code> pages into a <code class="language-plaintext highlighter-rouge">.qrc</code> file</li>
  <li>Import into directly into designer when building your Qt application</li>
</ol>

<p>In this case, our web app (<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer/html/index.html">py_trees_js/viewer/html/index.html</a>) has been rolled into <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer/web_app.qrc">py_trees_js/viewer/web_app.qrc</a> which is directly loaded into <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer/web_view.ui">py_trees_js/viewer/web_view.ui</a> where the URL property of the QWebEngineView widget has been configured with the resources <code class="language-plaintext highlighter-rouge">index.html</code>.</p>

<p>You could alternatively, generate a module from the <code class="language-plaintext highlighter-rouge">.qrc</code> and import that into the
relevant python code as was done for the javascript resources.</p>

<h3 id="the-qt-application">The Qt Application</h3>

<p>The Qt application can be designed in whatever way you’re most comfortable with - via
Designer, pure C++ or python. In this case, Qt’s Designer is used to produce the <code class="language-plaintext highlighter-rouge">.ui</code>
files which are generated into python modules and finally customised and brought together
as a PyQt5 application. Refer to <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer">py_trees_js/viewer</a> for more details
or as a reference example from which to start your own Qt-Js hybrid application.</p>

<p>Key elements:</p>

<ol>
  <li>Build your Qt application around a QWebEngineView widget</li>
  <li>Link/import the javascript module in the web engine view class</li>
  <li>Load the html page into the QWebEngineView view</li>
</ol>

<p>Do not use the QWebView widget - this is deprecating in favour of the QWebEngineView widget. The most notable difference is that QWebView uses Qt’s old webkit, while QWebEngineView makes use of Chromium’s webkit.</p>

<p>Note that the second step automagically makes available the javascript resources to the application
when it’s loaded. It’s not terribly fussy about where it gets loaded, see <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer/web_view.py">py_trees_js/viewer/web_view.py</a> for an example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># This is the module generated by running pyrcc5 on the js libraries .qrc
# It could have been equivalently deployed in a completely different python package
import py_trees_js.resources

</code></pre></div></div>

<p>Loading the web page can be accomplished in designer. Simply point it at your qresource file
and set the dynamic URL property on the QWebEngineView widget. Alternatively you can import
the resource module and load it via QWebEngineView’s <code class="language-plaintext highlighter-rouge">load</code> api.</p>

<h4 id="qt-js-interactions">Qt-Js Interactions</h4>

<p>Qt and JS can interact directly over snippets of javascript code (via <code class="language-plaintext highlighter-rouge">runJavaScript()</code>
or over QWebChannel (a mechanism similar to sigslots) where more complexity is needed.
The example application here calls on the <code class="language-plaintext highlighter-rouge">render_tree()</code> method we created earlier in
the web application to send trees to the app. Example code from <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer/viewer.py">py_trees_js/viewer/viewer.py</a> which handles button clicks to cycle through a list of
demonstration trees:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def send_tree_response(reply):
    console.logdebug("reply: '{}' [viewer]".format(reply))


@qt_core.pyqtSlot()
def send_tree(web_view_page, demo_trees, unused_checked):
    demo_trees[send_tree.index]['timestamp'] = time.time()
    console.logdebug("send: tree '{}' [{}][viewer]".format(
        send_tree.index, demo_trees[send_tree.index]['timestamp'])
    )
    javascript_command = "render_tree({{tree: {}}})".format(demo_trees[send_tree.index])
    web_view_page.runJavaScript(javascript_command, send_tree_response)
    send_tree.index = 0 if send_tree.index == 2 else send_tree.index + 1

send_tree.index = 0

</code></pre></div></div>

<h2 id="the-json-specification">The JSON Specification</h2>

<p>TODO: A JSon schema</p>

<p>Roughly, the specification expects json objects of the form:</p>

<ul>
  <li>timestamp: int</li>
  <li>behaviours: dict[str, dict]</li>
  <li>(optional) visited_path: list[str]</li>
  <li>(optional) blackboard: {</li>
  <li>behaviours: dict[str, dict[str, str]],</li>
  <li>data: dict[str, str]</li>
  <li>}</li>
  <li>(optional) activity: list[str]</li>
</ul>

<p>where each behaviour in the dict has specification:</p>

<ul>
  <li>id: str</li>
  <li>status: Union[<code class="language-plaintext highlighter-rouge">INVALID</code>,<code class="language-plaintext highlighter-rouge">FAILURE</code>, <code class="language-plaintext highlighter-rouge">RUNNING</code>, <code class="language-plaintext highlighter-rouge">SUCCESS</code>]</li>
  <li>name: str</li>
  <li>colour: &lt;html style hex code&gt;</li>
  <li>(optional) children: List[str]</li>
  <li>(optional) data: <generic key-value="" dictionary=""></generic>
</li>
</ul>

<p>Identification strings (id’s) must be unique and are used as both keys for the
behaviours dictionary, children and visited_path variables.</p>

<p>An example (extracted from <code class="language-plaintext highlighter-rouge">py_trees.experimental.create_demo_tree_definition()</code>):</p>

<p>```
{
    timestamp: 1563938995,
    visited_path: [‘1’, ‘2’, ‘3’, ‘4’, ‘5’, ‘7’, ‘8’],
    behaviours: {
        ‘1’: {
            id: ‘1’,
            status: ‘RUNNING’,
            name: ‘Selector’,
            colour: ‘#00FFFF’,
            children: [‘2’, ‘3’, ‘4’, ‘6’],
            data: {
                Type: ‘py_trees.composites.Selector’,
                Feedback: “Decision maker”,
            },
        },
        ‘2’: {
            id: ‘2’,
            status: ‘FAILURE’,
            name: ‘Worker’,
            colour: ‘#FFA500’,
            children: [‘7’, ‘8’, ‘9’],
            data: {
                Type: ‘py_trees.composites.Sequence’,
                Feedback: “Worker”
            },
        },
    }
    ‘blackboard’: {
        ‘behaviours’: {  # key metadata per behaviour
            ‘2’: {
                ‘/parameters/initial_value’: ‘r’,
                ‘/state/worker’: ‘w’
            },
        },
        ‘data’: {
            ‘/parameters/initial_value’: ‘foo’,
            ‘/state/worker’: ‘bar’,
        },
    ‘activity’: [
        “<text style="color: blue;">Worker initialised with 'foo'</text>’”,
        “<text style="color: red;">Worker wrote 'bar'</text>’”,
    ]
}</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog">Changelog</h1>

<h2 id="066-2025-01-13">0.6.6 (2025-01-13)</h2>

<ul>
  <li>[infra] Add dummy test to make buildfarm happy</li>
  <li>[infra] Fix repo URL in package.xml</li>
  <li>Contributors: Sebastian Castro</li>
</ul>

<h2 id="065-2025-01-11">0.6.5 (2025-01-11)</h2>

<ul>
  <li>[formatter] reformat auto-generated resources.py</li>
  <li>[linter] 2 lines between methods</li>
  <li>[readme] fix preview instructions, elucidate non-nvidia
alternatives</li>
  <li>[vscode] devcontainer DISPLAY fix</li>
  <li>Contributors: Daniel Stonier</li>
</ul>

<h2 id="064-2022-02-24">0.6.4 (2022-02-24)</h2>

<ul>
  <li>[actions] pre-merge and update-cache,
<a href="https://github.com/splintered-reality/py_trees_js/pull/146">#146</a>
</li>
  <li>[actions] push containers,
<a href="https://github.com/splintered-reality/py_trees_js/pull/144">#144</a>
</li>
  <li>[poetry] update project to use poetry,
<a href="https://github.com/splintered-reality/py_trees_js/pull/143">#143</a>
</li>
  <li>[vscode] devcontainer workflows,
<a href="https://github.com/splintered-reality/py_trees_js/pull/143">#143</a>
</li>
  <li>[tests] basic tests, formatting, linting,
<a href="https://github.com/splintered-reality/py_trees_js/pull/143">#143</a>
</li>
</ul>

<h2 id="063-2020-05-05">0.6.3 (2020-05-05)</h2>

<ul>
  <li>[js] remove buggy early view update and optimise them,
<a href="https://github.com/splintered-reality/py_trees_js/pull/142">#142</a>
</li>
</ul>

<h2 id="062-2020-03-02">0.6.2 (2020-03-02)</h2>

<ul>
  <li>[js] bugfix accidentally ignored tree_cache size,
<a href="https://github.com/splintered-reality/py_trees_js/pull/123">#123</a>
</li>
  <li>... missed a few pull requests inbetween</li>
</ul>

<h2 id="060-2019-12-27">0.6.0 (2019-12-27)</h2>

<ul>
  <li>[js] accepting trees flagged with no status/graph change,
<a href="https://github.com/splintered-reality/py_trees_js/pull/122">#122</a>
</li>
  <li>[js] blackboard views,
<a href="https://github.com/splintered-reality/py_trees_js/pull/125">#125</a>,
<a href="https://github.com/splintered-reality/py_trees_js/pull/134">#133</a>,
<a href="https://github.com/splintered-reality/py_trees_js/pull/134">#122</a>,
<a href="https://github.com/splintered-reality/py_trees_js/pull/135">#135</a>,
<a href="https://github.com/splintered-reality/py_trees_js/pull/136">#136</a>
</li>
</ul>

<h2 id="051-2019-10-26">0.5.1 (2019-10-26)</h2>

<ul>
  <li>[js] performance improvements,
<a href="https://github.com/splintered-reality/py_trees_js/pull/120">#120</a>
</li>
  <li>[js] highlighted links,
<a href="https://github.com/splintered-reality/py_trees_js/pull/115">#115</a>
</li>
  <li>[js] orthogonal link connections, for better visualisation</li>
  <li>[qt] capture screenshots,
<a href="https://github.com/splintered-reality/py_trees_js/pull/114">#114</a>
</li>
</ul>

<h2 id="050-2019-08-29">0.5.0 (2019-08-29)</h2>

<ul>
  <li>[html] disable scrollbars,
<a href="https://github.com/splintered-reality/py_trees_js/pull/110">#110</a>
</li>
  <li>[js] robustness against identical timestamps,
<a href="https://github.com/splintered-reality/py_trees_js/pull/109">#109</a>
</li>
  <li>[js] improved window resize handling,
<a href="https://github.com/splintered-reality/py_trees_js/pull/111">#111</a>
    <ul>
      <li>new public api <code class="language-plaintext highlighter-rouge">py_trees.canvas.on_window_resize</code> and
<code class="language-plaintext highlighter-rouge">py_trees.timeline.on_window_resize</code>
</li>
    </ul>
  </li>
</ul>

<h2 id="040-2019-08-13">0.4.0 (2019-08-13)</h2>

<ul>
  <li><a href="https://github.com/splintered-reality/py_trees_js/milestone/5">Milestone - Polish &amp;
Release</a></li>
</ul>

<h2 id="031-2019-08-07">0.3.1 (2019-08-07)</h2>

<ul>
  <li><a href="https://github.com/splintered-reality/py_trees_js/milestone/4">Milestone - Interactive Event
Timeline</a></li>
</ul>

<h2 id="020-2019-08-01">0.2.0 (2019-08-01)</h2>

<ul>
  <li><a href="https://github.com/splintered-reality/py_trees_js/milestone/3?closed=1">Milestone - Streaming Trees /
Qt</a></li>
</ul>

<h2 id="010-2019-07-25">0.1.0 (2019-07-25)</h2>

<ul>
  <li><a href="https://github.com/splintered-reality/py_trees_js/milestone/2?closed=1">Milestone - Render a
Tree</a></li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kilted-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/py_trees_js/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kilted-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No dependencies on ROS packages.</em>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/python3-setuptools">python3-setuptools</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/pyqt5-dev-tools">pyqt5-dev-tools</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/qttools5-dev-tools">qttools5-dev-tools</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-qt5-bindings">python3-qt5-bindings</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-pyqt5.qtwebengine">python3-pyqt5.qtwebengine</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/py_trees_ros_viewer#kilted">py_trees_ros_viewer</a></td>
                      <td class="text-center">
                        
                        <a href="/p/py_trees_ros_viewer#kilted-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kilted-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kilted-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>py_trees_js</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="kilted-question-list" class="panel-body" style="display: none;"></div>
      <div id="kilted-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/py_trees_js+kilted">here</a>.</p>
      </div>
      <div id="kilted-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/splintered-reality/py_trees_js.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/kilted/p/py_trees_js"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/splintered-reality/py_trees_js/tree/devel/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/py_trees_js">py_trees_js</a> <small>package from <a style="text-decoration:none" href="/r/py_trees_js/github-splintered-reality-py_trees_js">py_trees_js</a> repo</small>
        </h3>
          
            
            
              <span class="label label-default pkg-label">

py_trees_js
</span>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/rolling/p/py_trees_js"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/splintered-reality/py_trees_js/tree/devel/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="rolling-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#rolling-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#rolling-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#rolling-deps" data-toggle="tab"><span class="label label-primary">5</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#rolling-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#rolling-questions" data-toggle="tab"><span id="rolling-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="rolling-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>0.6.6</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_PYTHON</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Javascript library for behaviour tree visualisation, demo'd with a qt-js hybrid application</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/splintered-reality/py_trees_js.git">https://github.com/splintered-reality/py_trees_js.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">devel</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-01-14
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">pyqt5</span> <span class="label label-default">jointjs</span> <span class="label label-default">behaviour-trees</span> <span class="label label-default">qt-js-application</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/py_trees_js/#rolling-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/py_trees_js/#rolling-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/py_trees_js/#rolling-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            
    Javascript library for visualising behaviour trees.
  
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="https://github.com/splintered-reality/py_trees_js">Website</a></li>
                
                  <li><a href="https://github.com/splintered-reality/py_trees_js">Repository</a></li>
                
                  <li><a href="https://github.com/splintered-reality/py_trees_js/issues">Bugtracker</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Daniel Stonier</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Daniel Stonier</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./README.md" title="Open in git repository">README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="pytrees-js">PyTrees Js</h1>

<p>[<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./#about">About</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./#features">Features</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./#preview">Preview</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./#example---simple-web-app">Exmaple - Simple Web App</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./#example---pyqt-app">Example - PyQt App</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./#the-json-specification">The JSON Specification</a>]</p>

<h2 id="about">About</h2>

<p>Libraries for visualisation of runtime or replayed behaviour trees.</p>

<ul>
  <li>
<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/././js">./js</a> - a self-contained javascript library to build apps around</li>
  <li>
<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/././py_trees_js">py_trees_js</a> - a python package that makes the js available as a pyqt resource</li>
  <li>
<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/././py_trees_js/viewer">py_trees_js.viewer</a> - a demo pyqtwebengine app</li>
</ul>

<p>See <a href="https://github.com/splintered-reality/py_trees_ros_viewer">py_trees_ros_viewer</a> for a fully fledged pyqt integration that uses <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/././py_trees_js">py_trees_js</a>.</p>

<h2 id="features">Features</h2>

<ul>
  <li>Visualise the runtime state of a behaviour tree</li>
  <li>Collapsible subtrees</li>
  <li>Zoom and scale contents to fit</li>
  <li>Timeline rewind &amp; resume</li>
  <li>Blackboard key-value storage view</li>
  <li>Activity log view</li>
</ul>

<p>Although designed for py_trees, the js libs (in particular, the interfaces) are not dependent on py_trees and could be used for other behaviour tree applications.</p>

<h2 id="preview">Preview</h2>

<p>With VSCode DevContainers and on a PC with an NVIDIA GPU:</p>

<ul>
  <li>Install <a href="https://code.visualstudio.com/docs/setup/linux#_debian-and-ubuntu-based-distributions">VSCode</a>
</li>
  <li>Install the <a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html#docker">NVIDIA Container Toolkit</a>
</li>
  <li>Clone and launch the demo:</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git clone https://github.com/splintered-reality/py_trees_js
$ code .
$ cd py_trees_js

# Reopen the project in the devcontainer
$ (use CTRL-SHIFT-P if you miss VSCode's helper dialog)

# Setup and launch
$ poetry install
$ poetry run py-trees-demo-viewer

</code></pre></div></div>
<p align="center">
  <img src="https://raw.githubusercontent.com/splintered-reality/py_trees_js/devel/./images/splash.png" width="80%">
  <img src="https://raw.githubusercontent.com/splintered-reality/py_trees_js/devel/./images/screenshot.png" width="100%">
</p>

<p>If you do not have a PC that meets those requirements, some alternative options:</p>

<ul>
  <li>Install <a href="https://python-poetry.org/">Poetry</a> and PyQt on your system or in a venv. Clone and launch.</li>
  <li>If you’re just interested in seeing the demo viewer, <code class="language-plaintext highlighter-rouge">pip install --user py_trees_js</code> and launch the viewer</li>
  <li>Create your own devcontainer with something like the <a href="https://github.com/devcontainers/features/tree/main/src/desktop-lite">desktop-lite</a> feature. If this works, send me a PR!</li>
</ul>

<h2 id="example---simple-web-app">Example - Simple Web App</h2>

<p>Building a complete application that can render a behaviour tree stream is an effort that can be decomposed into two tasks:</p>

<ol>
  <li>Creating the web app for rendering trees and visualising a timeline</li>
  <li>Wrapping the web app in a framework and connecting it to an external stream</li>
</ol>

<p>The first stage is purely an exercise with html, css and javascript. The latter will depend on your use case - it could be a qt-js hybrid application (as exemplified here) for developers, an electron application for cross-platform and mobile deployment or a cloud based service.</p>

<p>This section will walk through how to build a web application with the provided js libraries. An example of wrapping the web app within a Qt-Js application will follow.</p>

<p>To get started, let’s begin with a basic html page with two divs, one for the tree canvas and one for the timeline:</p>

<pre><code class="language-xhtml">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;PyTrees Viewer&lt;/title&gt;
  &lt;style&gt;
    html {
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
    body {
      margin: 0;
      overflow:hidden;  /* no scrollbars */
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id="canvas"&gt;&lt;/div&gt;
  &lt;div id="timeline"&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<p>Next, bring in the javascript libraries. For exemplar purposes, it is assumed here that the libraries
have been made available alongside the html page - how is an integration detail depending on the mode
of deployment (see next section for an example).</p>

<p>Note that the <code class="language-plaintext highlighter-rouge">py_trees-&lt;version&gt;.js</code> library has only one dependency, <a href="https://resources.jointjs.com/docs/jointjs/v3.0/joint.html">jointjs</a>,
but that in turn has a few dependencies of it’s own. The bundled libraries in the <code class="language-plaintext highlighter-rouge">js/jointjs</code> folder
of this repository correspond to the requirements for a specific version of jointjs and
have been tested to work with the accompany <code class="language-plaintext highlighter-rouge">py_trees-&lt;version&gt;.js</code> library.</p>

<p>You can verify that the libraries have been properly imported by calling <code class="language-plaintext highlighter-rouge">py_trees.hello()</code> which
will print version information of the loaded javascript libraries (if found) to the javascript console.</p>

<pre><code class="language-xhtml">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;PyTrees Viewer&lt;/title&gt;
  &lt;link rel="stylesheet" href="js/py_trees-0.6.0.css"/&gt;
  &lt;link rel="stylesheet" type="text/css" href="js/jointjs/joint-3.0.4.min.css"/&gt;
  &lt;script src="js/jointjs/dagre-0.8.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/graphlib-2.1.7.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/jquery-3.4.1.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/lodash-4.17.11.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/backbone-1.4.0.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/joint-3.0.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/py_trees-0.6.0.js"&gt;&lt;/script&gt;
  &lt;!-- Web app integration css here --&gt;
  &lt;style&gt;
    html {
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
    body {
      margin: 0;
      overflow:hidden;  /* no scrollbars */
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;script type="text/javascript"&gt;
    py_trees.hello()
  &lt;/script&gt;
  &lt;div id="window"&gt;
    &lt;div id="canvas"&gt;&lt;/div&gt;
    &lt;div id="timeline"&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<p>Output from <code class="language-plaintext highlighter-rouge">py_trees.hello()</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>********************************************************************************
                               Py Trees JS

 A javascript library for visualisation of executing behaviour trees.

 Version &amp; Dependency Info:
  - py_trees:  0.6.0
    - jointjs :  3.1.0
       - backbone:  1.4.0
       - dagre   :  0.8.4
       - jquery  :  3.4.1
       - lodash  :  4.17.11
********************************************************************************

</code></pre></div></div>

<p>In the next iteration, the canvas is initialised and a callback for
accepting incoming trees from an external source is prepared. To test it,
pass it the demo tree provided by the library.</p>

<pre><code class="language-xhtml">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;PyTrees Viewer&lt;/title&gt;
  &lt;link rel="stylesheet" href="js/py_trees-0.6.0.css"/&gt;
  &lt;link rel="stylesheet" type="text/css" href="js/jointjs/joint-3.0.4.min.css"/&gt;
  &lt;script src="js/jointjs/dagre-0.8.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/graphlib-2.1.7.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/jquery-3.4.1.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/lodash-4.17.11.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/backbone-1.4.0.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/joint-3.0.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/py_trees-0.6.0.js"&gt;&lt;/script&gt;
  &lt;!-- Web app integration css here --&gt;
  &lt;style&gt;
    html {
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
    body {
      margin: 0;
      overflow:hidden;  /* no scrollbars */
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;script type="text/javascript"&gt;
    py_trees.hello()
  &lt;/script&gt;
  &lt;div id="window"&gt;
    &lt;div id="canvas"&gt;&lt;/div&gt;
    &lt;div id="timeline"&gt;&lt;/div&gt;
  &lt;/div&gt;
  &lt;script type="text/javascript"&gt;
    // rendering canvas
    canvas_graph = py_trees.canvas.create_graph()
    canvas_paper = py_trees.canvas.create_paper({graph: canvas_graph})

    render_tree = function({tree}) {
      py_trees.canvas.update_graph({graph: canvas_graph, tree: tree})
      py_trees.canvas.layout_graph({graph: canvas_graph})
      if ( canvas_graph.get('scale_content_to_fit') ) {
        py_trees.canvas.scale_content_to_fit(canvas_paper)
      }
      return "rendered"
    }
    render_tree({tree: py_trees.experimental.create_demo_tree_definition()})
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<p>At this point, your web app should be visualising a single tree and
zoom/collapse/scale to fit interactions functional. I’m happy, you should be too!</p>

<p>Adding a timeline to the application is optional, but the code does not
change significantly and is a very useful feature to have. The built-in demo
app’s <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer/html/index.html">index.html</a> does exactly this. The code is reproduced below for convenience.</p>

<pre><code class="language-xhtml">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;PyTrees Viewer&lt;/title&gt;
  &lt;link rel="stylesheet" href="js/py_trees-0.6.0.css"/&gt;
  &lt;link rel="stylesheet" type="text/css" href="js/jointjs/joint-3.0.4.min.css"/&gt;
  &lt;script src="js/jointjs/dagre-0.8.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/graphlib-2.1.7.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/jquery-3.4.1.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/lodash-4.17.11.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/backbone-1.4.0.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/joint-3.0.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/py_trees-0.6.0.js"&gt;&lt;/script&gt;
  &lt;!-- Web app integration css here --&gt;
  &lt;style&gt;
    html {
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
    body {
      margin: 0;
      overflow:hidden;  /* no scrollbars */
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;script type="text/javascript"&gt;
    py_trees.hello()
  &lt;/script&gt;
  &lt;div id="window"&gt;
    &lt;div id="canvas"&gt;&lt;/div&gt;
    &lt;div id="timeline"&gt;&lt;/div&gt;
  &lt;/div&gt;
  &lt;script type="text/javascript"&gt;
    // rendering canvas
    canvas_graph = py_trees.canvas.create_graph()
    canvas_paper = py_trees.canvas.create_paper({graph: canvas_graph})

    // event timeline
    timeline_graph = py_trees.timeline.create_graph({event_cache_limit: 100});
    timeline_paper = py_trees.timeline.create_paper({
        timeline_graph: timeline_graph,
        canvas_graph: canvas_graph,
        canvas_paper: canvas_paper,
    })

    // react to window resizing events
    $(window).resize(function() {
      py_trees.canvas.on_window_resize(canvas_paper)
      py_trees.timeline.on_window_resize(timeline_paper)
    })

    render_tree = function({tree}) {
      py_trees.timeline.add_tree_to_cache({
          timeline_graph: timeline_graph,
          canvas_graph: canvas_graph,
          canvas_paper: canvas_paper,
          tree: tree
      })
      return "rendered"
    }
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<h2 id="example---pyqt-app">Example - PyQt App</h2>

<p>The <code class="language-plaintext highlighter-rouge">py-trees-demo-viewer</code> app is a qt-js hybrid application using <code class="language-plaintext highlighter-rouge">qtwebengine</code>.
Every time a qt button is pressed, an internally generated tree snapshot is sent to <code class="language-plaintext highlighter-rouge">render_tree()</code> in the embedded web application. From here, it is not too hard to
imagine connecting the qt application to an actual external source. The qt layer
then acts as a shim or relay transferring messages to the internal web app.</p>

<p>How does it work?</p>

<ul>
  <li>The js libs are made available as a <code class="language-plaintext highlighter-rouge">.qrc</code> resource [1]</li>
  <li>A simple web app is made available as another <code class="language-plaintext highlighter-rouge">.qrc</code> resource</li>
  <li>Both resources are consumed by the QWebEngine View to serve the app</li>
</ul>

<p>[1] This can be made available separately and as a dependency to the actual
pyqt application. For instance, the <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/././py_trees_js">py_trees_js</a> package is a dependency of <a href="https://github.com/splintered-reality/py_trees_ros_viewer">py_trees_ros_viewer</a>.</p>

<p>In more detail…</p>

<h3 id="the-js-libraries">The JS Libraries</h3>

<ol>
  <li>Bundle the javascript resources into a <code class="language-plaintext highlighter-rouge">.qrc</code> file</li>
  <li>Generate the resources as a c++ library / python module</li>
  <li>Deploy the c++ library/python module in your development environment</li>
</ol>

<p>In this case, the py_trees and jointjs javascript libraries have been listed
in <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/resources.qrc">py_trees_js/resources.qrc</a>, generated using
<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/gen.bash">py_trees_js/gen.bash</a>, resulting in the importable module
<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/resources.py">py_trees_js/resources.py</a>. From this point, any pythonic
Qt application wishing to visualise behaviour trees need only import this module from the <code class="language-plaintext highlighter-rouge">py_trees_js</code> package.</p>

<h3 id="the-web-app">The Web App</h3>

<ol>
  <li>Bundle the <code class="language-plaintext highlighter-rouge">.html</code>/<code class="language-plaintext highlighter-rouge">.css</code> pages into a <code class="language-plaintext highlighter-rouge">.qrc</code> file</li>
  <li>Import into directly into designer when building your Qt application</li>
</ol>

<p>In this case, our web app (<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer/html/index.html">py_trees_js/viewer/html/index.html</a>) has been rolled into <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer/web_app.qrc">py_trees_js/viewer/web_app.qrc</a> which is directly loaded into <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer/web_view.ui">py_trees_js/viewer/web_view.ui</a> where the URL property of the QWebEngineView widget has been configured with the resources <code class="language-plaintext highlighter-rouge">index.html</code>.</p>

<p>You could alternatively, generate a module from the <code class="language-plaintext highlighter-rouge">.qrc</code> and import that into the
relevant python code as was done for the javascript resources.</p>

<h3 id="the-qt-application">The Qt Application</h3>

<p>The Qt application can be designed in whatever way you’re most comfortable with - via
Designer, pure C++ or python. In this case, Qt’s Designer is used to produce the <code class="language-plaintext highlighter-rouge">.ui</code>
files which are generated into python modules and finally customised and brought together
as a PyQt5 application. Refer to <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer">py_trees_js/viewer</a> for more details
or as a reference example from which to start your own Qt-Js hybrid application.</p>

<p>Key elements:</p>

<ol>
  <li>Build your Qt application around a QWebEngineView widget</li>
  <li>Link/import the javascript module in the web engine view class</li>
  <li>Load the html page into the QWebEngineView view</li>
</ol>

<p>Do not use the QWebView widget - this is deprecating in favour of the QWebEngineView widget. The most notable difference is that QWebView uses Qt’s old webkit, while QWebEngineView makes use of Chromium’s webkit.</p>

<p>Note that the second step automagically makes available the javascript resources to the application
when it’s loaded. It’s not terribly fussy about where it gets loaded, see <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer/web_view.py">py_trees_js/viewer/web_view.py</a> for an example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># This is the module generated by running pyrcc5 on the js libraries .qrc
# It could have been equivalently deployed in a completely different python package
import py_trees_js.resources

</code></pre></div></div>

<p>Loading the web page can be accomplished in designer. Simply point it at your qresource file
and set the dynamic URL property on the QWebEngineView widget. Alternatively you can import
the resource module and load it via QWebEngineView’s <code class="language-plaintext highlighter-rouge">load</code> api.</p>

<h4 id="qt-js-interactions">Qt-Js Interactions</h4>

<p>Qt and JS can interact directly over snippets of javascript code (via <code class="language-plaintext highlighter-rouge">runJavaScript()</code>
or over QWebChannel (a mechanism similar to sigslots) where more complexity is needed.
The example application here calls on the <code class="language-plaintext highlighter-rouge">render_tree()</code> method we created earlier in
the web application to send trees to the app. Example code from <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer/viewer.py">py_trees_js/viewer/viewer.py</a> which handles button clicks to cycle through a list of
demonstration trees:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def send_tree_response(reply):
    console.logdebug("reply: '{}' [viewer]".format(reply))


@qt_core.pyqtSlot()
def send_tree(web_view_page, demo_trees, unused_checked):
    demo_trees[send_tree.index]['timestamp'] = time.time()
    console.logdebug("send: tree '{}' [{}][viewer]".format(
        send_tree.index, demo_trees[send_tree.index]['timestamp'])
    )
    javascript_command = "render_tree({{tree: {}}})".format(demo_trees[send_tree.index])
    web_view_page.runJavaScript(javascript_command, send_tree_response)
    send_tree.index = 0 if send_tree.index == 2 else send_tree.index + 1

send_tree.index = 0

</code></pre></div></div>

<h2 id="the-json-specification">The JSON Specification</h2>

<p>TODO: A JSon schema</p>

<p>Roughly, the specification expects json objects of the form:</p>

<ul>
  <li>timestamp: int</li>
  <li>behaviours: dict[str, dict]</li>
  <li>(optional) visited_path: list[str]</li>
  <li>(optional) blackboard: {</li>
  <li>behaviours: dict[str, dict[str, str]],</li>
  <li>data: dict[str, str]</li>
  <li>}</li>
  <li>(optional) activity: list[str]</li>
</ul>

<p>where each behaviour in the dict has specification:</p>

<ul>
  <li>id: str</li>
  <li>status: Union[<code class="language-plaintext highlighter-rouge">INVALID</code>,<code class="language-plaintext highlighter-rouge">FAILURE</code>, <code class="language-plaintext highlighter-rouge">RUNNING</code>, <code class="language-plaintext highlighter-rouge">SUCCESS</code>]</li>
  <li>name: str</li>
  <li>colour: &lt;html style hex code&gt;</li>
  <li>(optional) children: List[str]</li>
  <li>(optional) data: <generic key-value="" dictionary=""></generic>
</li>
</ul>

<p>Identification strings (id’s) must be unique and are used as both keys for the
behaviours dictionary, children and visited_path variables.</p>

<p>An example (extracted from <code class="language-plaintext highlighter-rouge">py_trees.experimental.create_demo_tree_definition()</code>):</p>

<p>```
{
    timestamp: 1563938995,
    visited_path: [‘1’, ‘2’, ‘3’, ‘4’, ‘5’, ‘7’, ‘8’],
    behaviours: {
        ‘1’: {
            id: ‘1’,
            status: ‘RUNNING’,
            name: ‘Selector’,
            colour: ‘#00FFFF’,
            children: [‘2’, ‘3’, ‘4’, ‘6’],
            data: {
                Type: ‘py_trees.composites.Selector’,
                Feedback: “Decision maker”,
            },
        },
        ‘2’: {
            id: ‘2’,
            status: ‘FAILURE’,
            name: ‘Worker’,
            colour: ‘#FFA500’,
            children: [‘7’, ‘8’, ‘9’],
            data: {
                Type: ‘py_trees.composites.Sequence’,
                Feedback: “Worker”
            },
        },
    }
    ‘blackboard’: {
        ‘behaviours’: {  # key metadata per behaviour
            ‘2’: {
                ‘/parameters/initial_value’: ‘r’,
                ‘/state/worker’: ‘w’
            },
        },
        ‘data’: {
            ‘/parameters/initial_value’: ‘foo’,
            ‘/state/worker’: ‘bar’,
        },
    ‘activity’: [
        “<text style="color: blue;">Worker initialised with 'foo'</text>’”,
        “<text style="color: red;">Worker wrote 'bar'</text>’”,
    ]
}</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog">Changelog</h1>

<h2 id="066-2025-01-13">0.6.6 (2025-01-13)</h2>

<ul>
  <li>[infra] Add dummy test to make buildfarm happy</li>
  <li>[infra] Fix repo URL in package.xml</li>
  <li>Contributors: Sebastian Castro</li>
</ul>

<h2 id="065-2025-01-11">0.6.5 (2025-01-11)</h2>

<ul>
  <li>[formatter] reformat auto-generated resources.py</li>
  <li>[linter] 2 lines between methods</li>
  <li>[readme] fix preview instructions, elucidate non-nvidia
alternatives</li>
  <li>[vscode] devcontainer DISPLAY fix</li>
  <li>Contributors: Daniel Stonier</li>
</ul>

<h2 id="064-2022-02-24">0.6.4 (2022-02-24)</h2>

<ul>
  <li>[actions] pre-merge and update-cache,
<a href="https://github.com/splintered-reality/py_trees_js/pull/146">#146</a>
</li>
  <li>[actions] push containers,
<a href="https://github.com/splintered-reality/py_trees_js/pull/144">#144</a>
</li>
  <li>[poetry] update project to use poetry,
<a href="https://github.com/splintered-reality/py_trees_js/pull/143">#143</a>
</li>
  <li>[vscode] devcontainer workflows,
<a href="https://github.com/splintered-reality/py_trees_js/pull/143">#143</a>
</li>
  <li>[tests] basic tests, formatting, linting,
<a href="https://github.com/splintered-reality/py_trees_js/pull/143">#143</a>
</li>
</ul>

<h2 id="063-2020-05-05">0.6.3 (2020-05-05)</h2>

<ul>
  <li>[js] remove buggy early view update and optimise them,
<a href="https://github.com/splintered-reality/py_trees_js/pull/142">#142</a>
</li>
</ul>

<h2 id="062-2020-03-02">0.6.2 (2020-03-02)</h2>

<ul>
  <li>[js] bugfix accidentally ignored tree_cache size,
<a href="https://github.com/splintered-reality/py_trees_js/pull/123">#123</a>
</li>
  <li>... missed a few pull requests inbetween</li>
</ul>

<h2 id="060-2019-12-27">0.6.0 (2019-12-27)</h2>

<ul>
  <li>[js] accepting trees flagged with no status/graph change,
<a href="https://github.com/splintered-reality/py_trees_js/pull/122">#122</a>
</li>
  <li>[js] blackboard views,
<a href="https://github.com/splintered-reality/py_trees_js/pull/125">#125</a>,
<a href="https://github.com/splintered-reality/py_trees_js/pull/134">#133</a>,
<a href="https://github.com/splintered-reality/py_trees_js/pull/134">#122</a>,
<a href="https://github.com/splintered-reality/py_trees_js/pull/135">#135</a>,
<a href="https://github.com/splintered-reality/py_trees_js/pull/136">#136</a>
</li>
</ul>

<h2 id="051-2019-10-26">0.5.1 (2019-10-26)</h2>

<ul>
  <li>[js] performance improvements,
<a href="https://github.com/splintered-reality/py_trees_js/pull/120">#120</a>
</li>
  <li>[js] highlighted links,
<a href="https://github.com/splintered-reality/py_trees_js/pull/115">#115</a>
</li>
  <li>[js] orthogonal link connections, for better visualisation</li>
  <li>[qt] capture screenshots,
<a href="https://github.com/splintered-reality/py_trees_js/pull/114">#114</a>
</li>
</ul>

<h2 id="050-2019-08-29">0.5.0 (2019-08-29)</h2>

<ul>
  <li>[html] disable scrollbars,
<a href="https://github.com/splintered-reality/py_trees_js/pull/110">#110</a>
</li>
  <li>[js] robustness against identical timestamps,
<a href="https://github.com/splintered-reality/py_trees_js/pull/109">#109</a>
</li>
  <li>[js] improved window resize handling,
<a href="https://github.com/splintered-reality/py_trees_js/pull/111">#111</a>
    <ul>
      <li>new public api <code class="language-plaintext highlighter-rouge">py_trees.canvas.on_window_resize</code> and
<code class="language-plaintext highlighter-rouge">py_trees.timeline.on_window_resize</code>
</li>
    </ul>
  </li>
</ul>

<h2 id="040-2019-08-13">0.4.0 (2019-08-13)</h2>

<ul>
  <li><a href="https://github.com/splintered-reality/py_trees_js/milestone/5">Milestone - Polish &amp;
Release</a></li>
</ul>

<h2 id="031-2019-08-07">0.3.1 (2019-08-07)</h2>

<ul>
  <li><a href="https://github.com/splintered-reality/py_trees_js/milestone/4">Milestone - Interactive Event
Timeline</a></li>
</ul>

<h2 id="020-2019-08-01">0.2.0 (2019-08-01)</h2>

<ul>
  <li><a href="https://github.com/splintered-reality/py_trees_js/milestone/3?closed=1">Milestone - Streaming Trees /
Qt</a></li>
</ul>

<h2 id="010-2019-07-25">0.1.0 (2019-07-25)</h2>

<ul>
  <li><a href="https://github.com/splintered-reality/py_trees_js/milestone/2?closed=1">Milestone - Render a
Tree</a></li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="rolling-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/py_trees_js/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="rolling-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No dependencies on ROS packages.</em>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/python3-setuptools">python3-setuptools</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/pyqt5-dev-tools">pyqt5-dev-tools</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/qttools5-dev-tools">qttools5-dev-tools</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-qt5-bindings">python3-qt5-bindings</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-pyqt5.qtwebengine">python3-pyqt5.qtwebengine</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/py_trees_ros_viewer#rolling">py_trees_ros_viewer</a></td>
                      <td class="text-center">
                        
                        <a href="/p/py_trees_ros_viewer#rolling-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="rolling-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="rolling-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>py_trees_js</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="rolling-question-list" class="panel-body" style="display: none;"></div>
      <div id="rolling-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/py_trees_js+rolling">here</a>.</p>
      </div>
      <div id="rolling-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/splintered-reality/py_trees_js.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/rolling/p/py_trees_js"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/splintered-reality/py_trees_js/tree/devel/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>github</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/py_trees_js">py_trees_js</a> <small>package from <a style="text-decoration:none" href="/r/py_trees_js/github-splintered-reality-py_trees_js">py_trees_js</a> repo</small>
        </h3>
          
            
            
              <span class="label label-default pkg-label">

py_trees_js
</span>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/iron/p/py_trees_js"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/splintered-reality/py_trees_js/tree/devel/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="iron-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#iron-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#iron-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#iron-deps" data-toggle="tab"><span class="label label-primary">5</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#iron-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#iron-questions" data-toggle="tab"><span id="iron-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="iron-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>0.6.6</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_PYTHON</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Javascript library for behaviour tree visualisation, demo'd with a qt-js hybrid application</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/splintered-reality/py_trees_js.git">https://github.com/splintered-reality/py_trees_js.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">devel</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-01-14
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">pyqt5</span> <span class="label label-default">jointjs</span> <span class="label label-default">behaviour-trees</span> <span class="label label-default">qt-js-application</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/py_trees_js/#iron-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/py_trees_js/#iron-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/py_trees_js/#iron-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            
    Javascript library for visualising behaviour trees.
  
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="https://github.com/splintered-reality/py_trees_js">Website</a></li>
                
                  <li><a href="https://github.com/splintered-reality/py_trees_js">Repository</a></li>
                
                  <li><a href="https://github.com/splintered-reality/py_trees_js/issues">Bugtracker</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Daniel Stonier</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Daniel Stonier</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./README.md" title="Open in git repository">README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="pytrees-js">PyTrees Js</h1>

<p>[<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./#about">About</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./#features">Features</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./#preview">Preview</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./#example---simple-web-app">Exmaple - Simple Web App</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./#example---pyqt-app">Example - PyQt App</a>] [<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./#the-json-specification">The JSON Specification</a>]</p>

<h2 id="about">About</h2>

<p>Libraries for visualisation of runtime or replayed behaviour trees.</p>

<ul>
  <li>
<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/././js">./js</a> - a self-contained javascript library to build apps around</li>
  <li>
<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/././py_trees_js">py_trees_js</a> - a python package that makes the js available as a pyqt resource</li>
  <li>
<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/././py_trees_js/viewer">py_trees_js.viewer</a> - a demo pyqtwebengine app</li>
</ul>

<p>See <a href="https://github.com/splintered-reality/py_trees_ros_viewer">py_trees_ros_viewer</a> for a fully fledged pyqt integration that uses <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/././py_trees_js">py_trees_js</a>.</p>

<h2 id="features">Features</h2>

<ul>
  <li>Visualise the runtime state of a behaviour tree</li>
  <li>Collapsible subtrees</li>
  <li>Zoom and scale contents to fit</li>
  <li>Timeline rewind &amp; resume</li>
  <li>Blackboard key-value storage view</li>
  <li>Activity log view</li>
</ul>

<p>Although designed for py_trees, the js libs (in particular, the interfaces) are not dependent on py_trees and could be used for other behaviour tree applications.</p>

<h2 id="preview">Preview</h2>

<p>With VSCode DevContainers and on a PC with an NVIDIA GPU:</p>

<ul>
  <li>Install <a href="https://code.visualstudio.com/docs/setup/linux#_debian-and-ubuntu-based-distributions">VSCode</a>
</li>
  <li>Install the <a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html#docker">NVIDIA Container Toolkit</a>
</li>
  <li>Clone and launch the demo:</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git clone https://github.com/splintered-reality/py_trees_js
$ code .
$ cd py_trees_js

# Reopen the project in the devcontainer
$ (use CTRL-SHIFT-P if you miss VSCode's helper dialog)

# Setup and launch
$ poetry install
$ poetry run py-trees-demo-viewer

</code></pre></div></div>
<p align="center">
  <img src="https://raw.githubusercontent.com/splintered-reality/py_trees_js/devel/./images/splash.png" width="80%">
  <img src="https://raw.githubusercontent.com/splintered-reality/py_trees_js/devel/./images/screenshot.png" width="100%">
</p>

<p>If you do not have a PC that meets those requirements, some alternative options:</p>

<ul>
  <li>Install <a href="https://python-poetry.org/">Poetry</a> and PyQt on your system or in a venv. Clone and launch.</li>
  <li>If you’re just interested in seeing the demo viewer, <code class="language-plaintext highlighter-rouge">pip install --user py_trees_js</code> and launch the viewer</li>
  <li>Create your own devcontainer with something like the <a href="https://github.com/devcontainers/features/tree/main/src/desktop-lite">desktop-lite</a> feature. If this works, send me a PR!</li>
</ul>

<h2 id="example---simple-web-app">Example - Simple Web App</h2>

<p>Building a complete application that can render a behaviour tree stream is an effort that can be decomposed into two tasks:</p>

<ol>
  <li>Creating the web app for rendering trees and visualising a timeline</li>
  <li>Wrapping the web app in a framework and connecting it to an external stream</li>
</ol>

<p>The first stage is purely an exercise with html, css and javascript. The latter will depend on your use case - it could be a qt-js hybrid application (as exemplified here) for developers, an electron application for cross-platform and mobile deployment or a cloud based service.</p>

<p>This section will walk through how to build a web application with the provided js libraries. An example of wrapping the web app within a Qt-Js application will follow.</p>

<p>To get started, let’s begin with a basic html page with two divs, one for the tree canvas and one for the timeline:</p>

<pre><code class="language-xhtml">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;PyTrees Viewer&lt;/title&gt;
  &lt;style&gt;
    html {
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
    body {
      margin: 0;
      overflow:hidden;  /* no scrollbars */
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id="canvas"&gt;&lt;/div&gt;
  &lt;div id="timeline"&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<p>Next, bring in the javascript libraries. For exemplar purposes, it is assumed here that the libraries
have been made available alongside the html page - how is an integration detail depending on the mode
of deployment (see next section for an example).</p>

<p>Note that the <code class="language-plaintext highlighter-rouge">py_trees-&lt;version&gt;.js</code> library has only one dependency, <a href="https://resources.jointjs.com/docs/jointjs/v3.0/joint.html">jointjs</a>,
but that in turn has a few dependencies of it’s own. The bundled libraries in the <code class="language-plaintext highlighter-rouge">js/jointjs</code> folder
of this repository correspond to the requirements for a specific version of jointjs and
have been tested to work with the accompany <code class="language-plaintext highlighter-rouge">py_trees-&lt;version&gt;.js</code> library.</p>

<p>You can verify that the libraries have been properly imported by calling <code class="language-plaintext highlighter-rouge">py_trees.hello()</code> which
will print version information of the loaded javascript libraries (if found) to the javascript console.</p>

<pre><code class="language-xhtml">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;PyTrees Viewer&lt;/title&gt;
  &lt;link rel="stylesheet" href="js/py_trees-0.6.0.css"/&gt;
  &lt;link rel="stylesheet" type="text/css" href="js/jointjs/joint-3.0.4.min.css"/&gt;
  &lt;script src="js/jointjs/dagre-0.8.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/graphlib-2.1.7.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/jquery-3.4.1.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/lodash-4.17.11.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/backbone-1.4.0.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/joint-3.0.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/py_trees-0.6.0.js"&gt;&lt;/script&gt;
  &lt;!-- Web app integration css here --&gt;
  &lt;style&gt;
    html {
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
    body {
      margin: 0;
      overflow:hidden;  /* no scrollbars */
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;script type="text/javascript"&gt;
    py_trees.hello()
  &lt;/script&gt;
  &lt;div id="window"&gt;
    &lt;div id="canvas"&gt;&lt;/div&gt;
    &lt;div id="timeline"&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<p>Output from <code class="language-plaintext highlighter-rouge">py_trees.hello()</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>********************************************************************************
                               Py Trees JS

 A javascript library for visualisation of executing behaviour trees.

 Version &amp; Dependency Info:
  - py_trees:  0.6.0
    - jointjs :  3.1.0
       - backbone:  1.4.0
       - dagre   :  0.8.4
       - jquery  :  3.4.1
       - lodash  :  4.17.11
********************************************************************************

</code></pre></div></div>

<p>In the next iteration, the canvas is initialised and a callback for
accepting incoming trees from an external source is prepared. To test it,
pass it the demo tree provided by the library.</p>

<pre><code class="language-xhtml">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;PyTrees Viewer&lt;/title&gt;
  &lt;link rel="stylesheet" href="js/py_trees-0.6.0.css"/&gt;
  &lt;link rel="stylesheet" type="text/css" href="js/jointjs/joint-3.0.4.min.css"/&gt;
  &lt;script src="js/jointjs/dagre-0.8.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/graphlib-2.1.7.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/jquery-3.4.1.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/lodash-4.17.11.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/backbone-1.4.0.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/joint-3.0.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/py_trees-0.6.0.js"&gt;&lt;/script&gt;
  &lt;!-- Web app integration css here --&gt;
  &lt;style&gt;
    html {
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
    body {
      margin: 0;
      overflow:hidden;  /* no scrollbars */
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;script type="text/javascript"&gt;
    py_trees.hello()
  &lt;/script&gt;
  &lt;div id="window"&gt;
    &lt;div id="canvas"&gt;&lt;/div&gt;
    &lt;div id="timeline"&gt;&lt;/div&gt;
  &lt;/div&gt;
  &lt;script type="text/javascript"&gt;
    // rendering canvas
    canvas_graph = py_trees.canvas.create_graph()
    canvas_paper = py_trees.canvas.create_paper({graph: canvas_graph})

    render_tree = function({tree}) {
      py_trees.canvas.update_graph({graph: canvas_graph, tree: tree})
      py_trees.canvas.layout_graph({graph: canvas_graph})
      if ( canvas_graph.get('scale_content_to_fit') ) {
        py_trees.canvas.scale_content_to_fit(canvas_paper)
      }
      return "rendered"
    }
    render_tree({tree: py_trees.experimental.create_demo_tree_definition()})
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<p>At this point, your web app should be visualising a single tree and
zoom/collapse/scale to fit interactions functional. I’m happy, you should be too!</p>

<p>Adding a timeline to the application is optional, but the code does not
change significantly and is a very useful feature to have. The built-in demo
app’s <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer/html/index.html">index.html</a> does exactly this. The code is reproduced below for convenience.</p>

<pre><code class="language-xhtml">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;PyTrees Viewer&lt;/title&gt;
  &lt;link rel="stylesheet" href="js/py_trees-0.6.0.css"/&gt;
  &lt;link rel="stylesheet" type="text/css" href="js/jointjs/joint-3.0.4.min.css"/&gt;
  &lt;script src="js/jointjs/dagre-0.8.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/graphlib-2.1.7.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/jquery-3.4.1.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/lodash-4.17.11.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/backbone-1.4.0.js"&gt;&lt;/script&gt;
  &lt;script src="js/jointjs/joint-3.0.4.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/py_trees-0.6.0.js"&gt;&lt;/script&gt;
  &lt;!-- Web app integration css here --&gt;
  &lt;style&gt;
    html {
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
    body {
      margin: 0;
      overflow:hidden;  /* no scrollbars */
      height: 100%  /* canvas is intended to fill the screen, cascading heights achieves this */
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;script type="text/javascript"&gt;
    py_trees.hello()
  &lt;/script&gt;
  &lt;div id="window"&gt;
    &lt;div id="canvas"&gt;&lt;/div&gt;
    &lt;div id="timeline"&gt;&lt;/div&gt;
  &lt;/div&gt;
  &lt;script type="text/javascript"&gt;
    // rendering canvas
    canvas_graph = py_trees.canvas.create_graph()
    canvas_paper = py_trees.canvas.create_paper({graph: canvas_graph})

    // event timeline
    timeline_graph = py_trees.timeline.create_graph({event_cache_limit: 100});
    timeline_paper = py_trees.timeline.create_paper({
        timeline_graph: timeline_graph,
        canvas_graph: canvas_graph,
        canvas_paper: canvas_paper,
    })

    // react to window resizing events
    $(window).resize(function() {
      py_trees.canvas.on_window_resize(canvas_paper)
      py_trees.timeline.on_window_resize(timeline_paper)
    })

    render_tree = function({tree}) {
      py_trees.timeline.add_tree_to_cache({
          timeline_graph: timeline_graph,
          canvas_graph: canvas_graph,
          canvas_paper: canvas_paper,
          tree: tree
      })
      return "rendered"
    }
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<h2 id="example---pyqt-app">Example - PyQt App</h2>

<p>The <code class="language-plaintext highlighter-rouge">py-trees-demo-viewer</code> app is a qt-js hybrid application using <code class="language-plaintext highlighter-rouge">qtwebengine</code>.
Every time a qt button is pressed, an internally generated tree snapshot is sent to <code class="language-plaintext highlighter-rouge">render_tree()</code> in the embedded web application. From here, it is not too hard to
imagine connecting the qt application to an actual external source. The qt layer
then acts as a shim or relay transferring messages to the internal web app.</p>

<p>How does it work?</p>

<ul>
  <li>The js libs are made available as a <code class="language-plaintext highlighter-rouge">.qrc</code> resource [1]</li>
  <li>A simple web app is made available as another <code class="language-plaintext highlighter-rouge">.qrc</code> resource</li>
  <li>Both resources are consumed by the QWebEngine View to serve the app</li>
</ul>

<p>[1] This can be made available separately and as a dependency to the actual
pyqt application. For instance, the <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/././py_trees_js">py_trees_js</a> package is a dependency of <a href="https://github.com/splintered-reality/py_trees_ros_viewer">py_trees_ros_viewer</a>.</p>

<p>In more detail…</p>

<h3 id="the-js-libraries">The JS Libraries</h3>

<ol>
  <li>Bundle the javascript resources into a <code class="language-plaintext highlighter-rouge">.qrc</code> file</li>
  <li>Generate the resources as a c++ library / python module</li>
  <li>Deploy the c++ library/python module in your development environment</li>
</ol>

<p>In this case, the py_trees and jointjs javascript libraries have been listed
in <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/resources.qrc">py_trees_js/resources.qrc</a>, generated using
<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/gen.bash">py_trees_js/gen.bash</a>, resulting in the importable module
<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/resources.py">py_trees_js/resources.py</a>. From this point, any pythonic
Qt application wishing to visualise behaviour trees need only import this module from the <code class="language-plaintext highlighter-rouge">py_trees_js</code> package.</p>

<h3 id="the-web-app">The Web App</h3>

<ol>
  <li>Bundle the <code class="language-plaintext highlighter-rouge">.html</code>/<code class="language-plaintext highlighter-rouge">.css</code> pages into a <code class="language-plaintext highlighter-rouge">.qrc</code> file</li>
  <li>Import into directly into designer when building your Qt application</li>
</ol>

<p>In this case, our web app (<a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer/html/index.html">py_trees_js/viewer/html/index.html</a>) has been rolled into <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer/web_app.qrc">py_trees_js/viewer/web_app.qrc</a> which is directly loaded into <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer/web_view.ui">py_trees_js/viewer/web_view.ui</a> where the URL property of the QWebEngineView widget has been configured with the resources <code class="language-plaintext highlighter-rouge">index.html</code>.</p>

<p>You could alternatively, generate a module from the <code class="language-plaintext highlighter-rouge">.qrc</code> and import that into the
relevant python code as was done for the javascript resources.</p>

<h3 id="the-qt-application">The Qt Application</h3>

<p>The Qt application can be designed in whatever way you’re most comfortable with - via
Designer, pure C++ or python. In this case, Qt’s Designer is used to produce the <code class="language-plaintext highlighter-rouge">.ui</code>
files which are generated into python modules and finally customised and brought together
as a PyQt5 application. Refer to <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer">py_trees_js/viewer</a> for more details
or as a reference example from which to start your own Qt-Js hybrid application.</p>

<p>Key elements:</p>

<ol>
  <li>Build your Qt application around a QWebEngineView widget</li>
  <li>Link/import the javascript module in the web engine view class</li>
  <li>Load the html page into the QWebEngineView view</li>
</ol>

<p>Do not use the QWebView widget - this is deprecating in favour of the QWebEngineView widget. The most notable difference is that QWebView uses Qt’s old webkit, while QWebEngineView makes use of Chromium’s webkit.</p>

<p>Note that the second step automagically makes available the javascript resources to the application
when it’s loaded. It’s not terribly fussy about where it gets loaded, see <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer/web_view.py">py_trees_js/viewer/web_view.py</a> for an example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># This is the module generated by running pyrcc5 on the js libraries .qrc
# It could have been equivalently deployed in a completely different python package
import py_trees_js.resources

</code></pre></div></div>

<p>Loading the web page can be accomplished in designer. Simply point it at your qresource file
and set the dynamic URL property on the QWebEngineView widget. Alternatively you can import
the resource module and load it via QWebEngineView’s <code class="language-plaintext highlighter-rouge">load</code> api.</p>

<h4 id="qt-js-interactions">Qt-Js Interactions</h4>

<p>Qt and JS can interact directly over snippets of javascript code (via <code class="language-plaintext highlighter-rouge">runJavaScript()</code>
or over QWebChannel (a mechanism similar to sigslots) where more complexity is needed.
The example application here calls on the <code class="language-plaintext highlighter-rouge">render_tree()</code> method we created earlier in
the web application to send trees to the app. Example code from <a href="https://github.com/splintered-reality/py_trees_js/tree/devel/./py_trees_js/viewer/viewer.py">py_trees_js/viewer/viewer.py</a> which handles button clicks to cycle through a list of
demonstration trees:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def send_tree_response(reply):
    console.logdebug("reply: '{}' [viewer]".format(reply))


@qt_core.pyqtSlot()
def send_tree(web_view_page, demo_trees, unused_checked):
    demo_trees[send_tree.index]['timestamp'] = time.time()
    console.logdebug("send: tree '{}' [{}][viewer]".format(
        send_tree.index, demo_trees[send_tree.index]['timestamp'])
    )
    javascript_command = "render_tree({{tree: {}}})".format(demo_trees[send_tree.index])
    web_view_page.runJavaScript(javascript_command, send_tree_response)
    send_tree.index = 0 if send_tree.index == 2 else send_tree.index + 1

send_tree.index = 0

</code></pre></div></div>

<h2 id="the-json-specification">The JSON Specification</h2>

<p>TODO: A JSon schema</p>

<p>Roughly, the specification expects json objects of the form:</p>

<ul>
  <li>timestamp: int</li>
  <li>behaviours: dict[str, dict]</li>
  <li>(optional) visited_path: list[str]</li>
  <li>(optional) blackboard: {</li>
  <li>behaviours: dict[str, dict[str, str]],</li>
  <li>data: dict[str, str]</li>
  <li>}</li>
  <li>(optional) activity: list[str]</li>
</ul>

<p>where each behaviour in the dict has specification:</p>

<ul>
  <li>id: str</li>
  <li>status: Union[<code class="language-plaintext highlighter-rouge">INVALID</code>,<code class="language-plaintext highlighter-rouge">FAILURE</code>, <code class="language-plaintext highlighter-rouge">RUNNING</code>, <code class="language-plaintext highlighter-rouge">SUCCESS</code>]</li>
  <li>name: str</li>
  <li>colour: &lt;html style hex code&gt;</li>
  <li>(optional) children: List[str]</li>
  <li>(optional) data: <generic key-value="" dictionary=""></generic>
</li>
</ul>

<p>Identification strings (id’s) must be unique and are used as both keys for the
behaviours dictionary, children and visited_path variables.</p>

<p>An example (extracted from <code class="language-plaintext highlighter-rouge">py_trees.experimental.create_demo_tree_definition()</code>):</p>

<p>```
{
    timestamp: 1563938995,
    visited_path: [‘1’, ‘2’, ‘3’, ‘4’, ‘5’, ‘7’, ‘8’],
    behaviours: {
        ‘1’: {
            id: ‘1’,
            status: ‘RUNNING’,
            name: ‘Selector’,
            colour: ‘#00FFFF’,
            children: [‘2’, ‘3’, ‘4’, ‘6’],
            data: {
                Type: ‘py_trees.composites.Selector’,
                Feedback: “Decision maker”,
            },
        },
        ‘2’: {
            id: ‘2’,
            status: ‘FAILURE’,
            name: ‘Worker’,
            colour: ‘#FFA500’,
            children: [‘7’, ‘8’, ‘9’],
            data: {
                Type: ‘py_trees.composites.Sequence’,
                Feedback: “Worker”
            },
        },
    }
    ‘blackboard’: {
        ‘behaviours’: {  # key metadata per behaviour
            ‘2’: {
                ‘/parameters/initial_value’: ‘r’,
                ‘/state/worker’: ‘w’
            },
        },
        ‘data’: {
            ‘/parameters/initial_value’: ‘foo’,
            ‘/state/worker’: ‘bar’,
        },
    ‘activity’: [
        “<text style="color: blue;">Worker initialised with 'foo'</text>’”,
        “<text style="color: red;">Worker wrote 'bar'</text>’”,
    ]
}</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog">Changelog</h1>

<h2 id="066-2025-01-13">0.6.6 (2025-01-13)</h2>

<ul>
  <li>[infra] Add dummy test to make buildfarm happy</li>
  <li>[infra] Fix repo URL in package.xml</li>
  <li>Contributors: Sebastian Castro</li>
</ul>

<h2 id="065-2025-01-11">0.6.5 (2025-01-11)</h2>

<ul>
  <li>[formatter] reformat auto-generated resources.py</li>
  <li>[linter] 2 lines between methods</li>
  <li>[readme] fix preview instructions, elucidate non-nvidia
alternatives</li>
  <li>[vscode] devcontainer DISPLAY fix</li>
  <li>Contributors: Daniel Stonier</li>
</ul>

<h2 id="064-2022-02-24">0.6.4 (2022-02-24)</h2>

<ul>
  <li>[actions] pre-merge and update-cache,
<a href="https://github.com/splintered-reality/py_trees_js/pull/146">#146</a>
</li>
  <li>[actions] push containers,
<a href="https://github.com/splintered-reality/py_trees_js/pull/144">#144</a>
</li>
  <li>[poetry] update project to use poetry,
<a href="https://github.com/splintered-reality/py_trees_js/pull/143">#143</a>
</li>
  <li>[vscode] devcontainer workflows,
<a href="https://github.com/splintered-reality/py_trees_js/pull/143">#143</a>
</li>
  <li>[tests] basic tests, formatting, linting,
<a href="https://github.com/splintered-reality/py_trees_js/pull/143">#143</a>
</li>
</ul>

<h2 id="063-2020-05-05">0.6.3 (2020-05-05)</h2>

<ul>
  <li>[js] remove buggy early view update and optimise them,
<a href="https://github.com/splintered-reality/py_trees_js/pull/142">#142</a>
</li>
</ul>

<h2 id="062-2020-03-02">0.6.2 (2020-03-02)</h2>

<ul>
  <li>[js] bugfix accidentally ignored tree_cache size,
<a href="https://github.com/splintered-reality/py_trees_js/pull/123">#123</a>
</li>
  <li>... missed a few pull requests inbetween</li>
</ul>

<h2 id="060-2019-12-27">0.6.0 (2019-12-27)</h2>

<ul>
  <li>[js] accepting trees flagged with no status/graph change,
<a href="https://github.com/splintered-reality/py_trees_js/pull/122">#122</a>
</li>
  <li>[js] blackboard views,
<a href="https://github.com/splintered-reality/py_trees_js/pull/125">#125</a>,
<a href="https://github.com/splintered-reality/py_trees_js/pull/134">#133</a>,
<a href="https://github.com/splintered-reality/py_trees_js/pull/134">#122</a>,
<a href="https://github.com/splintered-reality/py_trees_js/pull/135">#135</a>,
<a href="https://github.com/splintered-reality/py_trees_js/pull/136">#136</a>
</li>
</ul>

<h2 id="051-2019-10-26">0.5.1 (2019-10-26)</h2>

<ul>
  <li>[js] performance improvements,
<a href="https://github.com/splintered-reality/py_trees_js/pull/120">#120</a>
</li>
  <li>[js] highlighted links,
<a href="https://github.com/splintered-reality/py_trees_js/pull/115">#115</a>
</li>
  <li>[js] orthogonal link connections, for better visualisation</li>
  <li>[qt] capture screenshots,
<a href="https://github.com/splintered-reality/py_trees_js/pull/114">#114</a>
</li>
</ul>

<h2 id="050-2019-08-29">0.5.0 (2019-08-29)</h2>

<ul>
  <li>[html] disable scrollbars,
<a href="https://github.com/splintered-reality/py_trees_js/pull/110">#110</a>
</li>
  <li>[js] robustness against identical timestamps,
<a href="https://github.com/splintered-reality/py_trees_js/pull/109">#109</a>
</li>
  <li>[js] improved window resize handling,
<a href="https://github.com/splintered-reality/py_trees_js/pull/111">#111</a>
    <ul>
      <li>new public api <code class="language-plaintext highlighter-rouge">py_trees.canvas.on_window_resize</code> and
<code class="language-plaintext highlighter-rouge">py_trees.timeline.on_window_resize</code>
</li>
    </ul>
  </li>
</ul>

<h2 id="040-2019-08-13">0.4.0 (2019-08-13)</h2>

<ul>
  <li><a href="https://github.com/splintered-reality/py_trees_js/milestone/5">Milestone - Polish &amp;
Release</a></li>
</ul>

<h2 id="031-2019-08-07">0.3.1 (2019-08-07)</h2>

<ul>
  <li><a href="https://github.com/splintered-reality/py_trees_js/milestone/4">Milestone - Interactive Event
Timeline</a></li>
</ul>

<h2 id="020-2019-08-01">0.2.0 (2019-08-01)</h2>

<ul>
  <li><a href="https://github.com/splintered-reality/py_trees_js/milestone/3?closed=1">Milestone - Streaming Trees /
Qt</a></li>
</ul>

<h2 id="010-2019-07-25">0.1.0 (2019-07-25)</h2>

<ul>
  <li><a href="https://github.com/splintered-reality/py_trees_js/milestone/2?closed=1">Milestone - Render a
Tree</a></li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/py_trees_js/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No dependencies on ROS packages.</em>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/python3-setuptools">python3-setuptools</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/pyqt5-dev-tools">pyqt5-dev-tools</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/qttools5-dev-tools">qttools5-dev-tools</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-qt5-bindings">python3-qt5-bindings</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-pyqt5.qtwebengine">python3-pyqt5.qtwebengine</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <em>No known dependants.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>py_trees_js</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="iron-question-list" class="panel-body" style="display: none;"></div>
      <div id="iron-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/py_trees_js+iron">here</a>.</p>
      </div>
      <div id="iron-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/splintered-reality/py_trees_js.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/iron/p/py_trees_js"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/splintered-reality/py_trees_js/tree/devel/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>



<script id="question-list-template" type="text/html">
  <p>
    Browse <a href="https://robotics.stackexchange.com/questions/tagged/py_trees_js?tab=Newest">recent questions</a>
    or see the <a href="https://robotics.stackexchange.com/questions/tagged/py_trees_js?tab=Votes">highest voted ones</a>.
  </p>
  
  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">Title</th>
        <th scope="col">Answered?</th>
        <th scope="col">Created</th>
        <th scope="col">Active</th>
      </tr>
    </thead>
    <tbody>
      {{#questions}}
      <tr>
        <th scope="row"><a href="{{link}}">{{title}}</a><br><small>Tags: {{strtags}}</small></th>
        <th>{{answered}}</th>
        <th>{{created}}</th>
        <th>{{active}}</th>
      </tr>
      {{/questions}}
    </tbody>
  </table>
  {{#has_more}}
  <hr>
  <h4>Additional questions are available at
    <a href="https://robotics.stackexchange.com/questions/tagged/{{name}}?tab=Newest">Robotics Stack Exchange</a>
  </h4>
  {{/has_more}}
  
</script>

<script type="text/javascript" src="/js/mustache.js"></script>
<script type="text/javascript">
  jQuery(function() {
    jQuery.getJSON(url="https://api.stackexchange.com/2.3/questions?order=desc&site=robotics" +
                       "&tagged=py_trees_js&pagesize=50&sort=activity")
    .done(function(feed) {
      if (feed.items.length > 0) {
        var question_count_str = (feed.has_more ? '>' : '') + String(feed.items.length)
        const questions = feed.items.map(
          function(question) {
            question.id = Math.round(Math.random() * 99999.0);
            question.created = (new Date(question.creation_date * 1000)).toDateString()
            question.active = (new Date(question.last_activity_date * 1000)).toDateString()
            question.answered = question.is_answered ? "Yes" : "No"
            question.strtags = question.tags.join(' ')
            return question;
          });
        const template = jQuery("#question-list-template").text();
        Mustache.parse(template);
        var rendered = Mustache.render(
          template, 
          { questions: questions,
            has_more: feed.has_more,
            name: "py_trees_js"
          }
        );
      }
      //   TODO(tfoote) Resolve images
      //   jQuery("#-question-list img").each(function() {
      //     if (jQuery(this).attr("src").startsWith("/upfiles")) {
      //        jQuery(this).attr("src", "https://answers.ros.org" + jQuery(this).attr("src"));
      //     }
      //   });
      
      if (feed.items.length > 0) {
        jQuery("#humble-question-list").html(rendered);
        jQuery("#humble-question-list").show();
      } else {
        jQuery("#humble-no-question-list").show();
      }
      jQuery("#humble-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#jazzy-question-list").html(rendered);
        jQuery("#jazzy-question-list").show();
      } else {
        jQuery("#jazzy-no-question-list").show();
      }
      jQuery("#jazzy-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#kilted-question-list").html(rendered);
        jQuery("#kilted-question-list").show();
      } else {
        jQuery("#kilted-no-question-list").show();
      }
      jQuery("#kilted-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#rolling-question-list").html(rendered);
        jQuery("#rolling-question-list").show();
      } else {
        jQuery("#rolling-no-question-list").show();
      }
      jQuery("#rolling-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#github-question-list").html(rendered);
        jQuery("#github-question-list").show();
      } else {
        jQuery("#github-no-question-list").show();
      }
      jQuery("#github-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#noetic-question-list").html(rendered);
        jQuery("#noetic-question-list").show();
      } else {
        jQuery("#noetic-no-question-list").show();
      }
      jQuery("#noetic-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#galactic-question-list").html(rendered);
        jQuery("#galactic-question-list").show();
      } else {
        jQuery("#galactic-no-question-list").show();
      }
      jQuery("#galactic-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#iron-question-list").html(rendered);
        jQuery("#iron-question-list").show();
      } else {
        jQuery("#iron-no-question-list").show();
      }
      jQuery("#iron-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#melodic-question-list").html(rendered);
        jQuery("#melodic-question-list").show();
      } else {
        jQuery("#melodic-no-question-list").show();
      }
      jQuery("#melodic-questions-count").text(question_count_str);
      
    })
    .fail(function(jqxhr, textStatus, error) {
      console.error("Failed to get question data: " + jqxhr.responseText);
      
      jQuery("#humble-get-question-fail").show();
      
      jQuery("#jazzy-get-question-fail").show();
      
      jQuery("#kilted-get-question-fail").show();
      
      jQuery("#rolling-get-question-fail").show();
      
      jQuery("#github-get-question-fail").show();
      
      jQuery("#noetic-get-question-fail").show();
      
      jQuery("#galactic-get-question-fail").show();
      
      jQuery("#iron-get-question-fail").show();
      
      jQuery("#melodic-get-question-fail").show();
      
    });
  });
</script>


<script type="text/javascript">
  $(document).ready(function() {
    setupDistroSwitch("humble");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
