<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Package: moveit_ros_trajectory_cache</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/p/moveit_ros_trajectory_cache/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top: 20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/?search_packages=true">Packages</a></li>
        <li class="active">moveit_ros_trajectory_cache</li>
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-primary" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-primary" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-primary" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-primary" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-primary" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class=" older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class=" older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/moveit_ros_trajectory_cache">moveit_ros_trajectory_cache</a> <small>package from <a style="text-decoration:none" href="/r/moveit/github-ros-planning-moveit2">moveit</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit">

moveit
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_common">

moveit_common
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_configs_utils">

moveit_configs_utils
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_core">

moveit_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_kinematics">

moveit_kinematics
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners_chomp">

moveit_planners_chomp
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/chomp_motion_planner">

chomp_motion_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners">

moveit_planners
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners_ompl">

moveit_planners_ompl
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/pilz_industrial_motion_planner">

pilz_industrial_motion_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/pilz_industrial_motion_planner_testutils">

pilz_industrial_motion_planner_testutils
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners_stomp">

moveit_planners_stomp
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_ikfast_manipulator_plugin">

moveit_resources_prbt_ikfast_manipulator_plugin
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_moveit_config">

moveit_resources_prbt_moveit_config
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_pg70_support">

moveit_resources_prbt_pg70_support
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_support">

moveit_resources_prbt_support
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_plugins">

moveit_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_control_interface">

moveit_ros_control_interface
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_simple_controller_manager">

moveit_simple_controller_manager
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_py">

moveit_py
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_benchmarks">

moveit_ros_benchmarks
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_hybrid_planning">

moveit_hybrid_planning
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_move_group">

moveit_ros_move_group
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros">

moveit_ros
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_servo">

moveit_servo
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_occupancy_map_monitor">

moveit_ros_occupancy_map_monitor
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_perception">

moveit_ros_perception
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_planning">

moveit_ros_planning
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_planning_interface">

moveit_ros_planning_interface
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_robot_interaction">

moveit_ros_robot_interaction
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_tests">

moveit_ros_tests
</a>
            
          
            
            
              <span class="label label-default pkg-label">

moveit_ros_trajectory_cache
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_visualization">

moveit_ros_visualization
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_warehouse">

moveit_ros_warehouse
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_runtime">

moveit_runtime
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_app_plugins">

moveit_setup_app_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_assistant">

moveit_setup_assistant
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_controllers">

moveit_setup_controllers
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_core_plugins">

moveit_setup_core_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_framework">

moveit_setup_framework
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_simulation">

moveit_setup_simulation
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_srdf_plugins">

moveit_setup_srdf_plugins
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/humble/p/moveit_ros_trajectory_cache"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="humble-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#humble-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#humble-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#humble-deps" data-toggle="tab"><span class="label label-primary">23</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#humble-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#humble-questions" data-toggle="tab"><span id="humble-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="humble-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>2.13.2</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache License 2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">🤖 MoveIt for ROS 2</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-planning/moveit2.git">https://github.com/ros-planning/moveit2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-24
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/moveit/#humble-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/moveit/#humble-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/moveit/#humble-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            A trajectory cache for MoveIt 2 motion plans and cartesian plans.
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Brandon Ong</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <em>No additional authors.</em>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache/README.md" title="Open in git repository">moveit_ros/trajectory_cache/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="fuzzy-matching-trajectory-cache">Fuzzy-Matching Trajectory Cache</h1>

<p>A trajectory cache based on <a href="https://github.com/moveit/warehouse_ros"><code class="language-plaintext highlighter-rouge">warehouse_ros</code></a> for the move_group planning interface that supports fuzzy lookup for <code class="language-plaintext highlighter-rouge">MotionPlanRequest</code> and <code class="language-plaintext highlighter-rouge">GetCartesianPath</code> requests and trajectories.</p>

<p>The cache will work on manipulators with an arbitrary number of joints, across any number of move groups.
Furthermore, the cache supports pruning and ranking of fetched trajectories, with extension points for injecting your own feature keying, cache insert, cache prune and cache sorting logic.</p>

<h2 id="citations">Citations</h2>

<p>If you use this package in your work, please cite it using the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@software{ong_2024_11215428,
  author       = {Ong, Brandon},
  title        = {A Fuzzy-Matching Trajectory Cache for MoveIt 2},
  month        = may,
  year         = 2024,
  publisher    = {GitHub},
  version      = {0.1.0},
  doi          = {10.5281/zenodo.11215428},
  url          = {https://doi.org/10.5281/zenodo.11215428}
}

</code></pre></div></div>

<h2 id="warning-the-following-are-unsupported--rfe">WARNING: The following are unsupported / RFE</h2>

<p>Since this is an initial release, the following features are unsupported because they were a little too difficult for the time I had to implement this. So I am leaving it to the community to help!</p>

<ul>
  <li>
<strong>!!! This cache does NOT support collision detection, multi-DOF joints, or constraint regions!</strong>
    <ul>
      <li>Trajectories will be put into and fetched from the cache IGNORING collision. If your planning scene is expected to change significantly between cache lookups, it is likely that the fetched plan will result in collisions.</li>
      <li>To natively handle collisions this cache will need to hash the planning scene world msg (after zeroing out std_msgs/Header timestamps and sequences) and do an appropriate lookup, or do more complicated checks to see if the scene world is “close enough” or is a strictly less obstructed version of the scene in the cache entry.</li>
    </ul>
  </li>
  <li>The fuzzy lookup can’t be configured on a per-joint basis.</li>
</ul>

<p>That said, there are ways to get around the lack of native collision support to enable use of this cache, such as:</p>
<ul>
  <li>Validating a fetched plan for collisions before execution.</li>
  <li>Make use of the hybrid planning pipeline, using local planners for collision avoidance, while keeping the cache as a stand-in for a “global planner”, where applicable.</li>
</ul>

<h2 id="example-usage">Example Usage</h2>

<p><strong>PRE-REQUISITE</strong>: The <code class="language-plaintext highlighter-rouge">warehouse_plugin</code> ROS parameter must be set to a <a href="https://github.com/moveit/warehouse_ros"><code class="language-plaintext highlighter-rouge">warehouse_ros</code></a> plugin you have installed, which determines what database backend should be used for the cache.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">auto</span> <span class="n">cache</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">TrajectoryCache</span><span class="o">&gt;</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
<span class="n">cache</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">(</span><span class="cm">/*db_host=*/</span><span class="s">":memory:"</span><span class="p">,</span> <span class="cm">/*db_port=*/</span><span class="mi">0</span><span class="p">,</span> <span class="cm">/*exact_match_precision=*/</span><span class="mf">1e-6</span><span class="p">);</span>

<span class="c1">// The default feature extractors key the cache on starting robot state and goal constraints in the plan request.</span>
<span class="c1">// Keyed fuzzily with separate fuzziness on start and goal features.</span>
<span class="k">auto</span> <span class="n">default_features</span> <span class="o">=</span> <span class="n">TrajectoryCache</span><span class="o">::</span><span class="n">getDefaultFeatures</span><span class="p">(</span><span class="n">start_tolerance</span><span class="p">,</span> <span class="n">goal_tolerance</span><span class="p">);</span>

<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">TrajectoryCache</span><span class="o">::</span><span class="n">getDefaultSortFeature</span><span class="p">();</span>  <span class="c1">// Sorts by planned execution time.</span>

<span class="n">move_group</span><span class="p">.</span><span class="n">setPoseTarget</span><span class="p">(...);</span>
<span class="n">moveit_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">MotionPlanRequest</span> <span class="n">motion_plan_req_msg</span><span class="p">;</span>
<span class="n">move_group</span><span class="p">.</span><span class="n">constructMotionPlanRequest</span><span class="p">(</span><span class="n">motion_plan_request_msg</span><span class="p">);</span>

<span class="c1">// Use the cache INSTEAD of planning!</span>
<span class="k">auto</span> <span class="n">fetched_trajectory</span> <span class="o">=</span>
    <span class="n">cache</span><span class="o">-&gt;</span><span class="n">fetchBestMatchingTrajectory</span><span class="p">(</span><span class="o">*</span><span class="n">move_group_interface</span><span class="p">,</span> <span class="n">robot_name</span><span class="p">,</span> <span class="n">motion_plan_req_msg</span><span class="p">,</span>
                                       <span class="cm">/*features=*/</span><span class="n">default_features</span><span class="p">,</span>
                                       <span class="cm">/*sort_by=*/</span><span class="n">TrajectoryCache</span><span class="o">::</span><span class="n">getDefaultSortFeature</span><span class="p">(),</span>
                                       <span class="cm">/*ascending=*/</span><span class="nb">true</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="n">fetched_trajectory</span><span class="p">)</span>  <span class="c1">// Great! We got a cache hit, we can execute it.</span>
<span class="p">{</span>
  <span class="n">move_group</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="o">*</span><span class="n">fetched_trajectory</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span>  <span class="c1">// Otherwise, plan... And put it for posterity!</span>
<span class="p">{</span>
  <span class="n">moveit</span><span class="o">::</span><span class="n">planning_interface</span><span class="o">::</span><span class="n">MoveGroupInterface</span><span class="o">::</span><span class="n">Plan</span> <span class="n">plan</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">move_group</span><span class="p">.</span><span class="n">plan</span><span class="p">(</span><span class="n">plan</span><span class="p">)</span> <span class="o">==</span> <span class="n">moveit</span><span class="o">::</span><span class="n">core</span><span class="o">::</span><span class="n">MoveItErrorCode</span><span class="o">::</span><span class="n">SUCCESS</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">cache</span><span class="o">-&gt;</span><span class="n">insertTrajectory</span><span class="p">(</span>
        <span class="o">*</span><span class="n">interface</span><span class="p">,</span> <span class="n">robot_name</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">plan_req_msg</span><span class="p">),</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">plan</span><span class="p">),</span>
        <span class="cm">/*cache_insert_policy=*/</span><span class="n">BestSeenExecutionTimePolicy</span><span class="p">(),</span>
        <span class="cm">/*prune_worse_trajectories=*/</span><span class="nb">true</span><span class="p">,</span> <span class="cm">/*additional_features=*/</span><span class="p">{});</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<h2 id="main-features">Main Features</h2>

<h3 id="overview">Overview</h3>

<p>This trajectory cache package supports:</p>
<ul>
  <li>Inserting and fetching trajectories, keyed fuzzily on any feature of the plan request and plan response.</li>
  <li>Ranking cache entries on any keying feature that is supported (e.g. sorting by execution time).</li>
  <li>Optional cache pruning to keep fetch times and database sizes low.</li>
  <li>Generic support for manipulators with any arbitrary number of joints, across any number of move_groups.</li>
  <li>Cache namespacing and partitioning</li>
  <li>Extension points for injecting your own feature keying, cache insert, cache prune, and cache sorting logic.</li>
</ul>

<p>The cache supports <code class="language-plaintext highlighter-rouge">MotionPlanRequest</code> and <code class="language-plaintext highlighter-rouge">GetCartesianPaths::Request</code> out of the box!</p>

<h3 id="fully-customizable-behavior">Fully Customizable Behavior</h3>

<p>This trajectory cache allows you to inject your own implementations to affect:</p>
<ul>
  <li>What features of the plan request and plan response to key the cache on</li>
  <li>What cache insert and cache pruning policy to adopt</li>
</ul>

<p>For example, you may decide to write your own feature extractor to key the cache, and decide when to insert or prune a cache entry on features such as:</p>
<ul>
  <li>Minimum jerk time</li>
  <li>Path length</li>
  <li>Any other feature not supported by this package!</li>
</ul>

<h3 id="pre-existing-implementations">Pre-Existing Implementations</h3>

<p>The package provides some starter implementations that covers most general cases of motion planning.</p>

<p>For more information, see the implementations of:</p>
<ul>
  <li><a href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache/./include/moveit/trajectory_cache/features/features_interface.hpp"><code class="language-plaintext highlighter-rouge">FeaturesInterface</code></a></li>
  <li><a href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache/./include/moveit/trajectory_cache/cache_insert_policies/cache_insert_policy_interface.hpp"><code class="language-plaintext highlighter-rouge">CacheInsertPolicyInterface</code></a></li>
</ul>

<h4 id="cache-keying-features">Cache Keying Features</h4>

<p>The following are features of the plan request and response that you can key the cache on.</p>

<p>These support separately configurable fuzzy lookup on start and goal conditions!
Additionally, these features “canonicalize” the inputs to reduce the cardinality of the cache, increasing the chances of cache hits. (e.g., restating poses relative to the planning frame).</p>

<p>Supported Features:</p>
<ul>
  <li>“Start”
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">WorkspaceFeatures</code>: Planning workspace</li>
      <li>
<code class="language-plaintext highlighter-rouge">StartStateJointStateFeatures</code>: Starting robot joint state</li>
    </ul>
  </li>
  <li>“Goal”
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">MaxSpeedAndAccelerationFeatures</code>: Max velocity, acceleration, and cartesian speed limits</li>
      <li>
<code class="language-plaintext highlighter-rouge">GoalConstraintsFeatures</code>: Planning request <code class="language-plaintext highlighter-rouge">goal_constraints</code>
        <ul>
          <li>This includes ALL joint, position, and orientation constraints (but not constraint regions)!</li>
        </ul>
      </li>
      <li>
<code class="language-plaintext highlighter-rouge">PathConstraintsFeatures</code>: Planning request <code class="language-plaintext highlighter-rouge">path_constraints</code>
</li>
      <li>
<code class="language-plaintext highlighter-rouge">TrajectoryConstraintsFeatures</code>: Planning request <code class="language-plaintext highlighter-rouge">trajectory_constraints</code>And also workspace parameters, and some others.</li>
    </ul>
  </li>
  <li>Planning request goal parameters</li>
</ul>

<p>Additionally, support for user-specified features are provided for query-only or cache metadata tagging constant features. (See <a href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache/./include/moveit/trajectory_cache/features/constant_features.hpp"><code class="language-plaintext highlighter-rouge">constant_features.hpp</code></a>)</p>

<p>Similar support exists for the cartesian variants of these.</p>

<h4 id="cache-insert-and-pruning-policies">Cache Insert and Pruning Policies</h4>

<p>The following are cache insertion and pruning policies to govern when cache entries are inserted, and how they are (optionally) pruned.</p>

<p>Supported Cache Insert Policies:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">BestSeenExecutionTimePolicy</code>: Only insert best seen execution time, optionally prune on best execution time.</li>
  <li>
<code class="language-plaintext highlighter-rouge">AlwaysInsertNeverPrunePolicy</code>: Always insert, never prune</li>
</ul>

<h2 id="working-principle">Working Principle</h2>

<p>If a plan request has features (e.g., start, goal, and constraint conditions) that are “close enough” to an entry in the cache, then the cached trajectory should be reusable for that request, allowing us to skip planning.</p>

<p>The cache extracts these features from the planning request and plan response, storing them in the cache database.
When a new planning request is used to attempt to fetch a matching plan, the cache attempts to fuzzily match the request to pre-existing cache entries keyed on similar requests.
Any “close enough” matches are then returned as valid cache hits for plan reuse, with the definition of “close enough” depending on the type of feature that is being extracted.</p>

<h2 id="benefits">Benefits</h2>

<p>A trajectory cache helps:</p>
<ul>
  <li>Cut down on planning time</li>
  <li>Allows for consistent predictable behavior of used together with a stochastic planner
    <ul>
      <li>It effectively allows you to “freeze” a move</li>
    </ul>
  </li>
</ul>

<p>To explain this, consider that planners in MoveIt generally fall under two main camps: stochastic/probabilistic, and optimization based.
The probabilistic planners are fast, but usually non-deterministic, whereas the optimization based ones are usually slow, but deterministic.</p>

<p>One way to get around this is to pre-plan and manually select and label robot trajectories to “freeze” in a trajectory database to then replay by name, which avoids needing to spend time to replan, and allows you to ensure that motions are constant and repeatable.
However, this approach is not very flexible and not easily reused.</p>

<p>The trajectory cache improves upon this approach by allowing a user to “freeze” and store successful plans, but <strong>also</strong> look up those plans in a more generalizable and natural way, using the planning request itself to key the cache, effectively allowing the cache to stand in for a planning call.</p>

<p>Furthermore, the specific properties of this trajectory cache provides further unique benefits:</p>
<ol>
  <li>With fuzzy matching, “frozen” plans are much easier to look up and reuse, while simultaneously increasing the chances of a cache hit.</li>
  <li>The ability to rank trajectories will, if used with a stochastic planner over sufficient runs, cause the cache to eventually converge to increasingly optimal plans.</li>
</ol>

<p>Finally, the cache makes use of pruning to optimize fetch times, and also finds ways to “canonicalize” features of the keying request to increase chances of a cache hit.</p>

<h2 id="best-practices">Best Practices</h2>

<ul>
  <li>Since this cache does not yet support collisions, ensure the planning scene and obstacles remain static, or always validate the fetched plan for collisions</li>
  <li>When using the default cache features, have looser start fuzziness, and stricter goal fuzziness</li>
  <li>Move the robot to fixed starting poses where possible before planning to increase the chances of a cache hit</li>
  <li>Use the cache where repetitive, non-dynamic motion is likely to occur (e.g. known plans, short planned moves, etc.)</li>
</ul>

<p>Additionally, you may build abstractions on top of the class, for example, to expose the following behaviors:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">TrainingOverwrite</code>: Always plan, and write to cache, pruning all worse trajectories for “matching” cache keys</li>
  <li>
<code class="language-plaintext highlighter-rouge">TrainingAppendOnly</code>: Always plan, and always add to the cache.</li>
  <li>
<code class="language-plaintext highlighter-rouge">ExecuteBestEffort</code>: Rely on cache wherever possible, but plan otherwise.</li>
  <li>
<code class="language-plaintext highlighter-rouge">ExecuteReadOnly</code>: Only execute if cache hit occurred.</li>
</ul>

<p>You can see how such behaviors effectively model the “dev” and “deploy” phases of a robot deployment, and how they could be useful.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-moveit_ros_trajectory_cache">Changelog for package moveit_ros_trajectory_cache</h1>

<h2 id="2132-2025-04-16">2.13.2 (2025-04-16)</h2>

<h2 id="2131-2025-04-15">2.13.1 (2025-04-15)</h2>

<h2 id="2130-2025-02-15">2.13.0 (2025-02-15)</h2>

<ul>
  <li>Fuzzy-matching Trajectory Cache Injectable Traits refactor 🔥🔥
(<a href="https://github.com/ros-planning/moveit2/issues/2941">#2941</a>)</li>
  <li>Contributors: methylDragon</li>
</ul>

<h2 id="2120-2024-11-29">2.12.0 (2024-11-29)</h2>

<ul>
  <li>Enhancement/use hpp for headers
(<a href="https://github.com/ros-planning/moveit2/issues/3113">#3113</a>)</li>
  <li>Contributors: Tom Noble</li>
</ul>

<h2 id="2110-2024-09-16">2.11.0 (2024-09-16)</h2>

<h2 id="010-2024-05-17">0.1.0 (2024-05-17)</h2>

<ul>
  <li>Add <code class="language-plaintext highlighter-rouge">moveit_ros_trajectory_cache</code> package for trajectory caching.</li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/moveit_ros_trajectory_cache/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#humble">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_ros#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_ros#humble">moveit_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/xacro#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/xacro#humble">xacro  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_pytest#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_pytest#humble">ament_cmake_pytest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_uncrustify#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_uncrustify#humble">ament_cmake_uncrustify  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/launch_pytest#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/launch_pytest#humble">launch_pytest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/launch_testing_ament_cmake#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/launch_testing_ament_cmake#humble">launch_testing_ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_configs_utils#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_configs_utils#humble">moveit_configs_utils  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_planners_ompl#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_planners_ompl#humble">moveit_planners_ompl  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_resources#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_resources#humble">moveit_resources  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rmf_utils#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rmf_utils#humble">rmf_utils  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/robot_state_publisher#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/robot_state_publisher#humble">robot_state_publisher  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ros2_control#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ros2_control#humble">ros2_control  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/warehouse_ros_sqlite#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/warehouse_ros_sqlite#humble">warehouse_ros_sqlite  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_common#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_common#humble">moveit_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/geometry_msgs#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/geometry_msgs#humble">geometry_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_ros_planning_interface#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_ros_planning_interface#humble">moveit_ros_planning_interface  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#humble">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp_action#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp_action#humble">rclcpp_action  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/tf2_ros#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/tf2_ros#humble">tf2_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/trajectory_msgs#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/trajectory_msgs#humble">trajectory_msgs  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/python3-yaml">python3-yaml</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-pytest">python3-pytest</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <em>No known dependants.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>moveit_ros_trajectory_cache</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="humble-question-list" class="panel-body" style="display: none;"></div>
      <div id="humble-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/moveit_ros_trajectory_cache+humble">here</a>.</p>
      </div>
      <div id="humble-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/ros-planning/moveit2.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/humble/p/moveit_ros_trajectory_cache"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/moveit_ros_trajectory_cache">moveit_ros_trajectory_cache</a> <small>package from <a style="text-decoration:none" href="/r/moveit/github-ros-planning-moveit2">moveit</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit">

moveit
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_common">

moveit_common
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_configs_utils">

moveit_configs_utils
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_core">

moveit_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_kinematics">

moveit_kinematics
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners_chomp">

moveit_planners_chomp
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/chomp_motion_planner">

chomp_motion_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners">

moveit_planners
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners_ompl">

moveit_planners_ompl
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/pilz_industrial_motion_planner">

pilz_industrial_motion_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/pilz_industrial_motion_planner_testutils">

pilz_industrial_motion_planner_testutils
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners_stomp">

moveit_planners_stomp
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_ikfast_manipulator_plugin">

moveit_resources_prbt_ikfast_manipulator_plugin
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_moveit_config">

moveit_resources_prbt_moveit_config
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_pg70_support">

moveit_resources_prbt_pg70_support
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_support">

moveit_resources_prbt_support
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_plugins">

moveit_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_control_interface">

moveit_ros_control_interface
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_simple_controller_manager">

moveit_simple_controller_manager
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_py">

moveit_py
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_benchmarks">

moveit_ros_benchmarks
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_hybrid_planning">

moveit_hybrid_planning
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_move_group">

moveit_ros_move_group
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros">

moveit_ros
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_servo">

moveit_servo
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_occupancy_map_monitor">

moveit_ros_occupancy_map_monitor
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_perception">

moveit_ros_perception
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_planning">

moveit_ros_planning
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_planning_interface">

moveit_ros_planning_interface
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_robot_interaction">

moveit_ros_robot_interaction
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_tests">

moveit_ros_tests
</a>
            
          
            
            
              <span class="label label-default pkg-label">

moveit_ros_trajectory_cache
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_visualization">

moveit_ros_visualization
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_warehouse">

moveit_ros_warehouse
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_runtime">

moveit_runtime
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_app_plugins">

moveit_setup_app_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_assistant">

moveit_setup_assistant
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_controllers">

moveit_setup_controllers
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_core_plugins">

moveit_setup_core_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_framework">

moveit_setup_framework
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_simulation">

moveit_setup_simulation
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_srdf_plugins">

moveit_setup_srdf_plugins
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/jazzy/p/moveit_ros_trajectory_cache"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="jazzy-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#jazzy-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#jazzy-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#jazzy-deps" data-toggle="tab"><span class="label label-primary">23</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#jazzy-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#jazzy-questions" data-toggle="tab"><span id="jazzy-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="jazzy-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>2.13.2</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache License 2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">🤖 MoveIt for ROS 2</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-planning/moveit2.git">https://github.com/ros-planning/moveit2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-24
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/moveit/#jazzy-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/moveit/#jazzy-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/moveit/#jazzy-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            A trajectory cache for MoveIt 2 motion plans and cartesian plans.
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Brandon Ong</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <em>No additional authors.</em>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache/README.md" title="Open in git repository">moveit_ros/trajectory_cache/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="fuzzy-matching-trajectory-cache">Fuzzy-Matching Trajectory Cache</h1>

<p>A trajectory cache based on <a href="https://github.com/moveit/warehouse_ros"><code class="language-plaintext highlighter-rouge">warehouse_ros</code></a> for the move_group planning interface that supports fuzzy lookup for <code class="language-plaintext highlighter-rouge">MotionPlanRequest</code> and <code class="language-plaintext highlighter-rouge">GetCartesianPath</code> requests and trajectories.</p>

<p>The cache will work on manipulators with an arbitrary number of joints, across any number of move groups.
Furthermore, the cache supports pruning and ranking of fetched trajectories, with extension points for injecting your own feature keying, cache insert, cache prune and cache sorting logic.</p>

<h2 id="citations">Citations</h2>

<p>If you use this package in your work, please cite it using the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@software{ong_2024_11215428,
  author       = {Ong, Brandon},
  title        = {A Fuzzy-Matching Trajectory Cache for MoveIt 2},
  month        = may,
  year         = 2024,
  publisher    = {GitHub},
  version      = {0.1.0},
  doi          = {10.5281/zenodo.11215428},
  url          = {https://doi.org/10.5281/zenodo.11215428}
}

</code></pre></div></div>

<h2 id="warning-the-following-are-unsupported--rfe">WARNING: The following are unsupported / RFE</h2>

<p>Since this is an initial release, the following features are unsupported because they were a little too difficult for the time I had to implement this. So I am leaving it to the community to help!</p>

<ul>
  <li>
<strong>!!! This cache does NOT support collision detection, multi-DOF joints, or constraint regions!</strong>
    <ul>
      <li>Trajectories will be put into and fetched from the cache IGNORING collision. If your planning scene is expected to change significantly between cache lookups, it is likely that the fetched plan will result in collisions.</li>
      <li>To natively handle collisions this cache will need to hash the planning scene world msg (after zeroing out std_msgs/Header timestamps and sequences) and do an appropriate lookup, or do more complicated checks to see if the scene world is “close enough” or is a strictly less obstructed version of the scene in the cache entry.</li>
    </ul>
  </li>
  <li>The fuzzy lookup can’t be configured on a per-joint basis.</li>
</ul>

<p>That said, there are ways to get around the lack of native collision support to enable use of this cache, such as:</p>
<ul>
  <li>Validating a fetched plan for collisions before execution.</li>
  <li>Make use of the hybrid planning pipeline, using local planners for collision avoidance, while keeping the cache as a stand-in for a “global planner”, where applicable.</li>
</ul>

<h2 id="example-usage">Example Usage</h2>

<p><strong>PRE-REQUISITE</strong>: The <code class="language-plaintext highlighter-rouge">warehouse_plugin</code> ROS parameter must be set to a <a href="https://github.com/moveit/warehouse_ros"><code class="language-plaintext highlighter-rouge">warehouse_ros</code></a> plugin you have installed, which determines what database backend should be used for the cache.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">auto</span> <span class="n">cache</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">TrajectoryCache</span><span class="o">&gt;</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
<span class="n">cache</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">(</span><span class="cm">/*db_host=*/</span><span class="s">":memory:"</span><span class="p">,</span> <span class="cm">/*db_port=*/</span><span class="mi">0</span><span class="p">,</span> <span class="cm">/*exact_match_precision=*/</span><span class="mf">1e-6</span><span class="p">);</span>

<span class="c1">// The default feature extractors key the cache on starting robot state and goal constraints in the plan request.</span>
<span class="c1">// Keyed fuzzily with separate fuzziness on start and goal features.</span>
<span class="k">auto</span> <span class="n">default_features</span> <span class="o">=</span> <span class="n">TrajectoryCache</span><span class="o">::</span><span class="n">getDefaultFeatures</span><span class="p">(</span><span class="n">start_tolerance</span><span class="p">,</span> <span class="n">goal_tolerance</span><span class="p">);</span>

<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">TrajectoryCache</span><span class="o">::</span><span class="n">getDefaultSortFeature</span><span class="p">();</span>  <span class="c1">// Sorts by planned execution time.</span>

<span class="n">move_group</span><span class="p">.</span><span class="n">setPoseTarget</span><span class="p">(...);</span>
<span class="n">moveit_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">MotionPlanRequest</span> <span class="n">motion_plan_req_msg</span><span class="p">;</span>
<span class="n">move_group</span><span class="p">.</span><span class="n">constructMotionPlanRequest</span><span class="p">(</span><span class="n">motion_plan_request_msg</span><span class="p">);</span>

<span class="c1">// Use the cache INSTEAD of planning!</span>
<span class="k">auto</span> <span class="n">fetched_trajectory</span> <span class="o">=</span>
    <span class="n">cache</span><span class="o">-&gt;</span><span class="n">fetchBestMatchingTrajectory</span><span class="p">(</span><span class="o">*</span><span class="n">move_group_interface</span><span class="p">,</span> <span class="n">robot_name</span><span class="p">,</span> <span class="n">motion_plan_req_msg</span><span class="p">,</span>
                                       <span class="cm">/*features=*/</span><span class="n">default_features</span><span class="p">,</span>
                                       <span class="cm">/*sort_by=*/</span><span class="n">TrajectoryCache</span><span class="o">::</span><span class="n">getDefaultSortFeature</span><span class="p">(),</span>
                                       <span class="cm">/*ascending=*/</span><span class="nb">true</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="n">fetched_trajectory</span><span class="p">)</span>  <span class="c1">// Great! We got a cache hit, we can execute it.</span>
<span class="p">{</span>
  <span class="n">move_group</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="o">*</span><span class="n">fetched_trajectory</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span>  <span class="c1">// Otherwise, plan... And put it for posterity!</span>
<span class="p">{</span>
  <span class="n">moveit</span><span class="o">::</span><span class="n">planning_interface</span><span class="o">::</span><span class="n">MoveGroupInterface</span><span class="o">::</span><span class="n">Plan</span> <span class="n">plan</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">move_group</span><span class="p">.</span><span class="n">plan</span><span class="p">(</span><span class="n">plan</span><span class="p">)</span> <span class="o">==</span> <span class="n">moveit</span><span class="o">::</span><span class="n">core</span><span class="o">::</span><span class="n">MoveItErrorCode</span><span class="o">::</span><span class="n">SUCCESS</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">cache</span><span class="o">-&gt;</span><span class="n">insertTrajectory</span><span class="p">(</span>
        <span class="o">*</span><span class="n">interface</span><span class="p">,</span> <span class="n">robot_name</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">plan_req_msg</span><span class="p">),</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">plan</span><span class="p">),</span>
        <span class="cm">/*cache_insert_policy=*/</span><span class="n">BestSeenExecutionTimePolicy</span><span class="p">(),</span>
        <span class="cm">/*prune_worse_trajectories=*/</span><span class="nb">true</span><span class="p">,</span> <span class="cm">/*additional_features=*/</span><span class="p">{});</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<h2 id="main-features">Main Features</h2>

<h3 id="overview">Overview</h3>

<p>This trajectory cache package supports:</p>
<ul>
  <li>Inserting and fetching trajectories, keyed fuzzily on any feature of the plan request and plan response.</li>
  <li>Ranking cache entries on any keying feature that is supported (e.g. sorting by execution time).</li>
  <li>Optional cache pruning to keep fetch times and database sizes low.</li>
  <li>Generic support for manipulators with any arbitrary number of joints, across any number of move_groups.</li>
  <li>Cache namespacing and partitioning</li>
  <li>Extension points for injecting your own feature keying, cache insert, cache prune, and cache sorting logic.</li>
</ul>

<p>The cache supports <code class="language-plaintext highlighter-rouge">MotionPlanRequest</code> and <code class="language-plaintext highlighter-rouge">GetCartesianPaths::Request</code> out of the box!</p>

<h3 id="fully-customizable-behavior">Fully Customizable Behavior</h3>

<p>This trajectory cache allows you to inject your own implementations to affect:</p>
<ul>
  <li>What features of the plan request and plan response to key the cache on</li>
  <li>What cache insert and cache pruning policy to adopt</li>
</ul>

<p>For example, you may decide to write your own feature extractor to key the cache, and decide when to insert or prune a cache entry on features such as:</p>
<ul>
  <li>Minimum jerk time</li>
  <li>Path length</li>
  <li>Any other feature not supported by this package!</li>
</ul>

<h3 id="pre-existing-implementations">Pre-Existing Implementations</h3>

<p>The package provides some starter implementations that covers most general cases of motion planning.</p>

<p>For more information, see the implementations of:</p>
<ul>
  <li><a href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache/./include/moveit/trajectory_cache/features/features_interface.hpp"><code class="language-plaintext highlighter-rouge">FeaturesInterface</code></a></li>
  <li><a href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache/./include/moveit/trajectory_cache/cache_insert_policies/cache_insert_policy_interface.hpp"><code class="language-plaintext highlighter-rouge">CacheInsertPolicyInterface</code></a></li>
</ul>

<h4 id="cache-keying-features">Cache Keying Features</h4>

<p>The following are features of the plan request and response that you can key the cache on.</p>

<p>These support separately configurable fuzzy lookup on start and goal conditions!
Additionally, these features “canonicalize” the inputs to reduce the cardinality of the cache, increasing the chances of cache hits. (e.g., restating poses relative to the planning frame).</p>

<p>Supported Features:</p>
<ul>
  <li>“Start”
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">WorkspaceFeatures</code>: Planning workspace</li>
      <li>
<code class="language-plaintext highlighter-rouge">StartStateJointStateFeatures</code>: Starting robot joint state</li>
    </ul>
  </li>
  <li>“Goal”
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">MaxSpeedAndAccelerationFeatures</code>: Max velocity, acceleration, and cartesian speed limits</li>
      <li>
<code class="language-plaintext highlighter-rouge">GoalConstraintsFeatures</code>: Planning request <code class="language-plaintext highlighter-rouge">goal_constraints</code>
        <ul>
          <li>This includes ALL joint, position, and orientation constraints (but not constraint regions)!</li>
        </ul>
      </li>
      <li>
<code class="language-plaintext highlighter-rouge">PathConstraintsFeatures</code>: Planning request <code class="language-plaintext highlighter-rouge">path_constraints</code>
</li>
      <li>
<code class="language-plaintext highlighter-rouge">TrajectoryConstraintsFeatures</code>: Planning request <code class="language-plaintext highlighter-rouge">trajectory_constraints</code>And also workspace parameters, and some others.</li>
    </ul>
  </li>
  <li>Planning request goal parameters</li>
</ul>

<p>Additionally, support for user-specified features are provided for query-only or cache metadata tagging constant features. (See <a href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache/./include/moveit/trajectory_cache/features/constant_features.hpp"><code class="language-plaintext highlighter-rouge">constant_features.hpp</code></a>)</p>

<p>Similar support exists for the cartesian variants of these.</p>

<h4 id="cache-insert-and-pruning-policies">Cache Insert and Pruning Policies</h4>

<p>The following are cache insertion and pruning policies to govern when cache entries are inserted, and how they are (optionally) pruned.</p>

<p>Supported Cache Insert Policies:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">BestSeenExecutionTimePolicy</code>: Only insert best seen execution time, optionally prune on best execution time.</li>
  <li>
<code class="language-plaintext highlighter-rouge">AlwaysInsertNeverPrunePolicy</code>: Always insert, never prune</li>
</ul>

<h2 id="working-principle">Working Principle</h2>

<p>If a plan request has features (e.g., start, goal, and constraint conditions) that are “close enough” to an entry in the cache, then the cached trajectory should be reusable for that request, allowing us to skip planning.</p>

<p>The cache extracts these features from the planning request and plan response, storing them in the cache database.
When a new planning request is used to attempt to fetch a matching plan, the cache attempts to fuzzily match the request to pre-existing cache entries keyed on similar requests.
Any “close enough” matches are then returned as valid cache hits for plan reuse, with the definition of “close enough” depending on the type of feature that is being extracted.</p>

<h2 id="benefits">Benefits</h2>

<p>A trajectory cache helps:</p>
<ul>
  <li>Cut down on planning time</li>
  <li>Allows for consistent predictable behavior of used together with a stochastic planner
    <ul>
      <li>It effectively allows you to “freeze” a move</li>
    </ul>
  </li>
</ul>

<p>To explain this, consider that planners in MoveIt generally fall under two main camps: stochastic/probabilistic, and optimization based.
The probabilistic planners are fast, but usually non-deterministic, whereas the optimization based ones are usually slow, but deterministic.</p>

<p>One way to get around this is to pre-plan and manually select and label robot trajectories to “freeze” in a trajectory database to then replay by name, which avoids needing to spend time to replan, and allows you to ensure that motions are constant and repeatable.
However, this approach is not very flexible and not easily reused.</p>

<p>The trajectory cache improves upon this approach by allowing a user to “freeze” and store successful plans, but <strong>also</strong> look up those plans in a more generalizable and natural way, using the planning request itself to key the cache, effectively allowing the cache to stand in for a planning call.</p>

<p>Furthermore, the specific properties of this trajectory cache provides further unique benefits:</p>
<ol>
  <li>With fuzzy matching, “frozen” plans are much easier to look up and reuse, while simultaneously increasing the chances of a cache hit.</li>
  <li>The ability to rank trajectories will, if used with a stochastic planner over sufficient runs, cause the cache to eventually converge to increasingly optimal plans.</li>
</ol>

<p>Finally, the cache makes use of pruning to optimize fetch times, and also finds ways to “canonicalize” features of the keying request to increase chances of a cache hit.</p>

<h2 id="best-practices">Best Practices</h2>

<ul>
  <li>Since this cache does not yet support collisions, ensure the planning scene and obstacles remain static, or always validate the fetched plan for collisions</li>
  <li>When using the default cache features, have looser start fuzziness, and stricter goal fuzziness</li>
  <li>Move the robot to fixed starting poses where possible before planning to increase the chances of a cache hit</li>
  <li>Use the cache where repetitive, non-dynamic motion is likely to occur (e.g. known plans, short planned moves, etc.)</li>
</ul>

<p>Additionally, you may build abstractions on top of the class, for example, to expose the following behaviors:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">TrainingOverwrite</code>: Always plan, and write to cache, pruning all worse trajectories for “matching” cache keys</li>
  <li>
<code class="language-plaintext highlighter-rouge">TrainingAppendOnly</code>: Always plan, and always add to the cache.</li>
  <li>
<code class="language-plaintext highlighter-rouge">ExecuteBestEffort</code>: Rely on cache wherever possible, but plan otherwise.</li>
  <li>
<code class="language-plaintext highlighter-rouge">ExecuteReadOnly</code>: Only execute if cache hit occurred.</li>
</ul>

<p>You can see how such behaviors effectively model the “dev” and “deploy” phases of a robot deployment, and how they could be useful.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-moveit_ros_trajectory_cache">Changelog for package moveit_ros_trajectory_cache</h1>

<h2 id="2132-2025-04-16">2.13.2 (2025-04-16)</h2>

<h2 id="2131-2025-04-15">2.13.1 (2025-04-15)</h2>

<h2 id="2130-2025-02-15">2.13.0 (2025-02-15)</h2>

<ul>
  <li>Fuzzy-matching Trajectory Cache Injectable Traits refactor 🔥🔥
(<a href="https://github.com/ros-planning/moveit2/issues/2941">#2941</a>)</li>
  <li>Contributors: methylDragon</li>
</ul>

<h2 id="2120-2024-11-29">2.12.0 (2024-11-29)</h2>

<ul>
  <li>Enhancement/use hpp for headers
(<a href="https://github.com/ros-planning/moveit2/issues/3113">#3113</a>)</li>
  <li>Contributors: Tom Noble</li>
</ul>

<h2 id="2110-2024-09-16">2.11.0 (2024-09-16)</h2>

<h2 id="010-2024-05-17">0.1.0 (2024-05-17)</h2>

<ul>
  <li>Add <code class="language-plaintext highlighter-rouge">moveit_ros_trajectory_cache</code> package for trajectory caching.</li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/moveit_ros_trajectory_cache/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#jazzy">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_ros#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_ros#jazzy">moveit_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/xacro#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/xacro#jazzy">xacro  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_pytest#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_pytest#jazzy">ament_cmake_pytest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_uncrustify#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_uncrustify#jazzy">ament_cmake_uncrustify  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/launch_pytest#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/launch_pytest#jazzy">launch_pytest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/launch_testing_ament_cmake#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/launch_testing_ament_cmake#jazzy">launch_testing_ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_configs_utils#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_configs_utils#jazzy">moveit_configs_utils  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_planners_ompl#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_planners_ompl#jazzy">moveit_planners_ompl  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_resources#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_resources#jazzy">moveit_resources  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rmf_utils#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rmf_utils#jazzy">rmf_utils  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/robot_state_publisher#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/robot_state_publisher#jazzy">robot_state_publisher  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ros2_control#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ros2_control#jazzy">ros2_control  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/warehouse_ros_sqlite#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/warehouse_ros_sqlite#jazzy">warehouse_ros_sqlite  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_common#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_common#jazzy">moveit_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/geometry_msgs#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/geometry_msgs#jazzy">geometry_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_ros_planning_interface#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_ros_planning_interface#jazzy">moveit_ros_planning_interface  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#jazzy">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp_action#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp_action#jazzy">rclcpp_action  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/tf2_ros#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/tf2_ros#jazzy">tf2_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/trajectory_msgs#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/trajectory_msgs#jazzy">trajectory_msgs  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/python3-yaml">python3-yaml</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-pytest">python3-pytest</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <em>No known dependants.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>moveit_ros_trajectory_cache</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="jazzy-question-list" class="panel-body" style="display: none;"></div>
      <div id="jazzy-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/moveit_ros_trajectory_cache+jazzy">here</a>.</p>
      </div>
      <div id="jazzy-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/ros-planning/moveit2.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/jazzy/p/moveit_ros_trajectory_cache"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/moveit_ros_trajectory_cache">moveit_ros_trajectory_cache</a> <small>package from <a style="text-decoration:none" href="/r/moveit/github-ros-planning-moveit2">moveit</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit">

moveit
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_common">

moveit_common
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_configs_utils">

moveit_configs_utils
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_core">

moveit_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_kinematics">

moveit_kinematics
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners_chomp">

moveit_planners_chomp
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/chomp_motion_planner">

chomp_motion_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners">

moveit_planners
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners_ompl">

moveit_planners_ompl
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/pilz_industrial_motion_planner">

pilz_industrial_motion_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/pilz_industrial_motion_planner_testutils">

pilz_industrial_motion_planner_testutils
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners_stomp">

moveit_planners_stomp
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_ikfast_manipulator_plugin">

moveit_resources_prbt_ikfast_manipulator_plugin
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_moveit_config">

moveit_resources_prbt_moveit_config
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_pg70_support">

moveit_resources_prbt_pg70_support
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_support">

moveit_resources_prbt_support
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_plugins">

moveit_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_control_interface">

moveit_ros_control_interface
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_simple_controller_manager">

moveit_simple_controller_manager
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_py">

moveit_py
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_benchmarks">

moveit_ros_benchmarks
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_hybrid_planning">

moveit_hybrid_planning
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_move_group">

moveit_ros_move_group
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros">

moveit_ros
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_servo">

moveit_servo
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_occupancy_map_monitor">

moveit_ros_occupancy_map_monitor
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_perception">

moveit_ros_perception
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_planning">

moveit_ros_planning
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_planning_interface">

moveit_ros_planning_interface
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_robot_interaction">

moveit_ros_robot_interaction
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_tests">

moveit_ros_tests
</a>
            
          
            
            
              <span class="label label-default pkg-label">

moveit_ros_trajectory_cache
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_visualization">

moveit_ros_visualization
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_warehouse">

moveit_ros_warehouse
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_runtime">

moveit_runtime
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_app_plugins">

moveit_setup_app_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_assistant">

moveit_setup_assistant
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_controllers">

moveit_setup_controllers
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_core_plugins">

moveit_setup_core_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_framework">

moveit_setup_framework
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_simulation">

moveit_setup_simulation
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_srdf_plugins">

moveit_setup_srdf_plugins
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/kilted/p/moveit_ros_trajectory_cache"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="kilted-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#kilted-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#kilted-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#kilted-deps" data-toggle="tab"><span class="label label-primary">23</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#kilted-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#kilted-questions" data-toggle="tab"><span id="kilted-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="kilted-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>2.13.2</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache License 2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">🤖 MoveIt for ROS 2</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-planning/moveit2.git">https://github.com/ros-planning/moveit2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-24
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/moveit/#kilted-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/moveit/#kilted-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/moveit/#kilted-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            A trajectory cache for MoveIt 2 motion plans and cartesian plans.
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Brandon Ong</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <em>No additional authors.</em>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache/README.md" title="Open in git repository">moveit_ros/trajectory_cache/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="fuzzy-matching-trajectory-cache">Fuzzy-Matching Trajectory Cache</h1>

<p>A trajectory cache based on <a href="https://github.com/moveit/warehouse_ros"><code class="language-plaintext highlighter-rouge">warehouse_ros</code></a> for the move_group planning interface that supports fuzzy lookup for <code class="language-plaintext highlighter-rouge">MotionPlanRequest</code> and <code class="language-plaintext highlighter-rouge">GetCartesianPath</code> requests and trajectories.</p>

<p>The cache will work on manipulators with an arbitrary number of joints, across any number of move groups.
Furthermore, the cache supports pruning and ranking of fetched trajectories, with extension points for injecting your own feature keying, cache insert, cache prune and cache sorting logic.</p>

<h2 id="citations">Citations</h2>

<p>If you use this package in your work, please cite it using the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@software{ong_2024_11215428,
  author       = {Ong, Brandon},
  title        = {A Fuzzy-Matching Trajectory Cache for MoveIt 2},
  month        = may,
  year         = 2024,
  publisher    = {GitHub},
  version      = {0.1.0},
  doi          = {10.5281/zenodo.11215428},
  url          = {https://doi.org/10.5281/zenodo.11215428}
}

</code></pre></div></div>

<h2 id="warning-the-following-are-unsupported--rfe">WARNING: The following are unsupported / RFE</h2>

<p>Since this is an initial release, the following features are unsupported because they were a little too difficult for the time I had to implement this. So I am leaving it to the community to help!</p>

<ul>
  <li>
<strong>!!! This cache does NOT support collision detection, multi-DOF joints, or constraint regions!</strong>
    <ul>
      <li>Trajectories will be put into and fetched from the cache IGNORING collision. If your planning scene is expected to change significantly between cache lookups, it is likely that the fetched plan will result in collisions.</li>
      <li>To natively handle collisions this cache will need to hash the planning scene world msg (after zeroing out std_msgs/Header timestamps and sequences) and do an appropriate lookup, or do more complicated checks to see if the scene world is “close enough” or is a strictly less obstructed version of the scene in the cache entry.</li>
    </ul>
  </li>
  <li>The fuzzy lookup can’t be configured on a per-joint basis.</li>
</ul>

<p>That said, there are ways to get around the lack of native collision support to enable use of this cache, such as:</p>
<ul>
  <li>Validating a fetched plan for collisions before execution.</li>
  <li>Make use of the hybrid planning pipeline, using local planners for collision avoidance, while keeping the cache as a stand-in for a “global planner”, where applicable.</li>
</ul>

<h2 id="example-usage">Example Usage</h2>

<p><strong>PRE-REQUISITE</strong>: The <code class="language-plaintext highlighter-rouge">warehouse_plugin</code> ROS parameter must be set to a <a href="https://github.com/moveit/warehouse_ros"><code class="language-plaintext highlighter-rouge">warehouse_ros</code></a> plugin you have installed, which determines what database backend should be used for the cache.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">auto</span> <span class="n">cache</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">TrajectoryCache</span><span class="o">&gt;</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
<span class="n">cache</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">(</span><span class="cm">/*db_host=*/</span><span class="s">":memory:"</span><span class="p">,</span> <span class="cm">/*db_port=*/</span><span class="mi">0</span><span class="p">,</span> <span class="cm">/*exact_match_precision=*/</span><span class="mf">1e-6</span><span class="p">);</span>

<span class="c1">// The default feature extractors key the cache on starting robot state and goal constraints in the plan request.</span>
<span class="c1">// Keyed fuzzily with separate fuzziness on start and goal features.</span>
<span class="k">auto</span> <span class="n">default_features</span> <span class="o">=</span> <span class="n">TrajectoryCache</span><span class="o">::</span><span class="n">getDefaultFeatures</span><span class="p">(</span><span class="n">start_tolerance</span><span class="p">,</span> <span class="n">goal_tolerance</span><span class="p">);</span>

<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">TrajectoryCache</span><span class="o">::</span><span class="n">getDefaultSortFeature</span><span class="p">();</span>  <span class="c1">// Sorts by planned execution time.</span>

<span class="n">move_group</span><span class="p">.</span><span class="n">setPoseTarget</span><span class="p">(...);</span>
<span class="n">moveit_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">MotionPlanRequest</span> <span class="n">motion_plan_req_msg</span><span class="p">;</span>
<span class="n">move_group</span><span class="p">.</span><span class="n">constructMotionPlanRequest</span><span class="p">(</span><span class="n">motion_plan_request_msg</span><span class="p">);</span>

<span class="c1">// Use the cache INSTEAD of planning!</span>
<span class="k">auto</span> <span class="n">fetched_trajectory</span> <span class="o">=</span>
    <span class="n">cache</span><span class="o">-&gt;</span><span class="n">fetchBestMatchingTrajectory</span><span class="p">(</span><span class="o">*</span><span class="n">move_group_interface</span><span class="p">,</span> <span class="n">robot_name</span><span class="p">,</span> <span class="n">motion_plan_req_msg</span><span class="p">,</span>
                                       <span class="cm">/*features=*/</span><span class="n">default_features</span><span class="p">,</span>
                                       <span class="cm">/*sort_by=*/</span><span class="n">TrajectoryCache</span><span class="o">::</span><span class="n">getDefaultSortFeature</span><span class="p">(),</span>
                                       <span class="cm">/*ascending=*/</span><span class="nb">true</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="n">fetched_trajectory</span><span class="p">)</span>  <span class="c1">// Great! We got a cache hit, we can execute it.</span>
<span class="p">{</span>
  <span class="n">move_group</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="o">*</span><span class="n">fetched_trajectory</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span>  <span class="c1">// Otherwise, plan... And put it for posterity!</span>
<span class="p">{</span>
  <span class="n">moveit</span><span class="o">::</span><span class="n">planning_interface</span><span class="o">::</span><span class="n">MoveGroupInterface</span><span class="o">::</span><span class="n">Plan</span> <span class="n">plan</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">move_group</span><span class="p">.</span><span class="n">plan</span><span class="p">(</span><span class="n">plan</span><span class="p">)</span> <span class="o">==</span> <span class="n">moveit</span><span class="o">::</span><span class="n">core</span><span class="o">::</span><span class="n">MoveItErrorCode</span><span class="o">::</span><span class="n">SUCCESS</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">cache</span><span class="o">-&gt;</span><span class="n">insertTrajectory</span><span class="p">(</span>
        <span class="o">*</span><span class="n">interface</span><span class="p">,</span> <span class="n">robot_name</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">plan_req_msg</span><span class="p">),</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">plan</span><span class="p">),</span>
        <span class="cm">/*cache_insert_policy=*/</span><span class="n">BestSeenExecutionTimePolicy</span><span class="p">(),</span>
        <span class="cm">/*prune_worse_trajectories=*/</span><span class="nb">true</span><span class="p">,</span> <span class="cm">/*additional_features=*/</span><span class="p">{});</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<h2 id="main-features">Main Features</h2>

<h3 id="overview">Overview</h3>

<p>This trajectory cache package supports:</p>
<ul>
  <li>Inserting and fetching trajectories, keyed fuzzily on any feature of the plan request and plan response.</li>
  <li>Ranking cache entries on any keying feature that is supported (e.g. sorting by execution time).</li>
  <li>Optional cache pruning to keep fetch times and database sizes low.</li>
  <li>Generic support for manipulators with any arbitrary number of joints, across any number of move_groups.</li>
  <li>Cache namespacing and partitioning</li>
  <li>Extension points for injecting your own feature keying, cache insert, cache prune, and cache sorting logic.</li>
</ul>

<p>The cache supports <code class="language-plaintext highlighter-rouge">MotionPlanRequest</code> and <code class="language-plaintext highlighter-rouge">GetCartesianPaths::Request</code> out of the box!</p>

<h3 id="fully-customizable-behavior">Fully Customizable Behavior</h3>

<p>This trajectory cache allows you to inject your own implementations to affect:</p>
<ul>
  <li>What features of the plan request and plan response to key the cache on</li>
  <li>What cache insert and cache pruning policy to adopt</li>
</ul>

<p>For example, you may decide to write your own feature extractor to key the cache, and decide when to insert or prune a cache entry on features such as:</p>
<ul>
  <li>Minimum jerk time</li>
  <li>Path length</li>
  <li>Any other feature not supported by this package!</li>
</ul>

<h3 id="pre-existing-implementations">Pre-Existing Implementations</h3>

<p>The package provides some starter implementations that covers most general cases of motion planning.</p>

<p>For more information, see the implementations of:</p>
<ul>
  <li><a href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache/./include/moveit/trajectory_cache/features/features_interface.hpp"><code class="language-plaintext highlighter-rouge">FeaturesInterface</code></a></li>
  <li><a href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache/./include/moveit/trajectory_cache/cache_insert_policies/cache_insert_policy_interface.hpp"><code class="language-plaintext highlighter-rouge">CacheInsertPolicyInterface</code></a></li>
</ul>

<h4 id="cache-keying-features">Cache Keying Features</h4>

<p>The following are features of the plan request and response that you can key the cache on.</p>

<p>These support separately configurable fuzzy lookup on start and goal conditions!
Additionally, these features “canonicalize” the inputs to reduce the cardinality of the cache, increasing the chances of cache hits. (e.g., restating poses relative to the planning frame).</p>

<p>Supported Features:</p>
<ul>
  <li>“Start”
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">WorkspaceFeatures</code>: Planning workspace</li>
      <li>
<code class="language-plaintext highlighter-rouge">StartStateJointStateFeatures</code>: Starting robot joint state</li>
    </ul>
  </li>
  <li>“Goal”
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">MaxSpeedAndAccelerationFeatures</code>: Max velocity, acceleration, and cartesian speed limits</li>
      <li>
<code class="language-plaintext highlighter-rouge">GoalConstraintsFeatures</code>: Planning request <code class="language-plaintext highlighter-rouge">goal_constraints</code>
        <ul>
          <li>This includes ALL joint, position, and orientation constraints (but not constraint regions)!</li>
        </ul>
      </li>
      <li>
<code class="language-plaintext highlighter-rouge">PathConstraintsFeatures</code>: Planning request <code class="language-plaintext highlighter-rouge">path_constraints</code>
</li>
      <li>
<code class="language-plaintext highlighter-rouge">TrajectoryConstraintsFeatures</code>: Planning request <code class="language-plaintext highlighter-rouge">trajectory_constraints</code>And also workspace parameters, and some others.</li>
    </ul>
  </li>
  <li>Planning request goal parameters</li>
</ul>

<p>Additionally, support for user-specified features are provided for query-only or cache metadata tagging constant features. (See <a href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache/./include/moveit/trajectory_cache/features/constant_features.hpp"><code class="language-plaintext highlighter-rouge">constant_features.hpp</code></a>)</p>

<p>Similar support exists for the cartesian variants of these.</p>

<h4 id="cache-insert-and-pruning-policies">Cache Insert and Pruning Policies</h4>

<p>The following are cache insertion and pruning policies to govern when cache entries are inserted, and how they are (optionally) pruned.</p>

<p>Supported Cache Insert Policies:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">BestSeenExecutionTimePolicy</code>: Only insert best seen execution time, optionally prune on best execution time.</li>
  <li>
<code class="language-plaintext highlighter-rouge">AlwaysInsertNeverPrunePolicy</code>: Always insert, never prune</li>
</ul>

<h2 id="working-principle">Working Principle</h2>

<p>If a plan request has features (e.g., start, goal, and constraint conditions) that are “close enough” to an entry in the cache, then the cached trajectory should be reusable for that request, allowing us to skip planning.</p>

<p>The cache extracts these features from the planning request and plan response, storing them in the cache database.
When a new planning request is used to attempt to fetch a matching plan, the cache attempts to fuzzily match the request to pre-existing cache entries keyed on similar requests.
Any “close enough” matches are then returned as valid cache hits for plan reuse, with the definition of “close enough” depending on the type of feature that is being extracted.</p>

<h2 id="benefits">Benefits</h2>

<p>A trajectory cache helps:</p>
<ul>
  <li>Cut down on planning time</li>
  <li>Allows for consistent predictable behavior of used together with a stochastic planner
    <ul>
      <li>It effectively allows you to “freeze” a move</li>
    </ul>
  </li>
</ul>

<p>To explain this, consider that planners in MoveIt generally fall under two main camps: stochastic/probabilistic, and optimization based.
The probabilistic planners are fast, but usually non-deterministic, whereas the optimization based ones are usually slow, but deterministic.</p>

<p>One way to get around this is to pre-plan and manually select and label robot trajectories to “freeze” in a trajectory database to then replay by name, which avoids needing to spend time to replan, and allows you to ensure that motions are constant and repeatable.
However, this approach is not very flexible and not easily reused.</p>

<p>The trajectory cache improves upon this approach by allowing a user to “freeze” and store successful plans, but <strong>also</strong> look up those plans in a more generalizable and natural way, using the planning request itself to key the cache, effectively allowing the cache to stand in for a planning call.</p>

<p>Furthermore, the specific properties of this trajectory cache provides further unique benefits:</p>
<ol>
  <li>With fuzzy matching, “frozen” plans are much easier to look up and reuse, while simultaneously increasing the chances of a cache hit.</li>
  <li>The ability to rank trajectories will, if used with a stochastic planner over sufficient runs, cause the cache to eventually converge to increasingly optimal plans.</li>
</ol>

<p>Finally, the cache makes use of pruning to optimize fetch times, and also finds ways to “canonicalize” features of the keying request to increase chances of a cache hit.</p>

<h2 id="best-practices">Best Practices</h2>

<ul>
  <li>Since this cache does not yet support collisions, ensure the planning scene and obstacles remain static, or always validate the fetched plan for collisions</li>
  <li>When using the default cache features, have looser start fuzziness, and stricter goal fuzziness</li>
  <li>Move the robot to fixed starting poses where possible before planning to increase the chances of a cache hit</li>
  <li>Use the cache where repetitive, non-dynamic motion is likely to occur (e.g. known plans, short planned moves, etc.)</li>
</ul>

<p>Additionally, you may build abstractions on top of the class, for example, to expose the following behaviors:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">TrainingOverwrite</code>: Always plan, and write to cache, pruning all worse trajectories for “matching” cache keys</li>
  <li>
<code class="language-plaintext highlighter-rouge">TrainingAppendOnly</code>: Always plan, and always add to the cache.</li>
  <li>
<code class="language-plaintext highlighter-rouge">ExecuteBestEffort</code>: Rely on cache wherever possible, but plan otherwise.</li>
  <li>
<code class="language-plaintext highlighter-rouge">ExecuteReadOnly</code>: Only execute if cache hit occurred.</li>
</ul>

<p>You can see how such behaviors effectively model the “dev” and “deploy” phases of a robot deployment, and how they could be useful.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-moveit_ros_trajectory_cache">Changelog for package moveit_ros_trajectory_cache</h1>

<h2 id="2132-2025-04-16">2.13.2 (2025-04-16)</h2>

<h2 id="2131-2025-04-15">2.13.1 (2025-04-15)</h2>

<h2 id="2130-2025-02-15">2.13.0 (2025-02-15)</h2>

<ul>
  <li>Fuzzy-matching Trajectory Cache Injectable Traits refactor 🔥🔥
(<a href="https://github.com/ros-planning/moveit2/issues/2941">#2941</a>)</li>
  <li>Contributors: methylDragon</li>
</ul>

<h2 id="2120-2024-11-29">2.12.0 (2024-11-29)</h2>

<ul>
  <li>Enhancement/use hpp for headers
(<a href="https://github.com/ros-planning/moveit2/issues/3113">#3113</a>)</li>
  <li>Contributors: Tom Noble</li>
</ul>

<h2 id="2110-2024-09-16">2.11.0 (2024-09-16)</h2>

<h2 id="010-2024-05-17">0.1.0 (2024-05-17)</h2>

<ul>
  <li>Add <code class="language-plaintext highlighter-rouge">moveit_ros_trajectory_cache</code> package for trajectory caching.</li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kilted-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/moveit_ros_trajectory_cache/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kilted-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#kilted">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_ros#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_ros#kilted">moveit_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/xacro#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/xacro#kilted">xacro  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_pytest#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_pytest#kilted">ament_cmake_pytest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_uncrustify#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_uncrustify#kilted">ament_cmake_uncrustify  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/launch_pytest#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/launch_pytest#kilted">launch_pytest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/launch_testing_ament_cmake#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/launch_testing_ament_cmake#kilted">launch_testing_ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_configs_utils#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_configs_utils#kilted">moveit_configs_utils  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_planners_ompl#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_planners_ompl#kilted">moveit_planners_ompl  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_resources#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_resources#kilted">moveit_resources  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rmf_utils#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rmf_utils#kilted">rmf_utils  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/robot_state_publisher#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/robot_state_publisher#kilted">robot_state_publisher  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ros2_control#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ros2_control#kilted">ros2_control  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/warehouse_ros_sqlite#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/warehouse_ros_sqlite#kilted">warehouse_ros_sqlite  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_common#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_common#kilted">moveit_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/geometry_msgs#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/geometry_msgs#kilted">geometry_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_ros_planning_interface#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_ros_planning_interface#kilted">moveit_ros_planning_interface  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#kilted">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp_action#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp_action#kilted">rclcpp_action  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/tf2_ros#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/tf2_ros#kilted">tf2_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/trajectory_msgs#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/trajectory_msgs#kilted">trajectory_msgs  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/python3-yaml">python3-yaml</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-pytest">python3-pytest</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <em>No known dependants.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kilted-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kilted-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>moveit_ros_trajectory_cache</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="kilted-question-list" class="panel-body" style="display: none;"></div>
      <div id="kilted-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/moveit_ros_trajectory_cache+kilted">here</a>.</p>
      </div>
      <div id="kilted-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/ros-planning/moveit2.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/kilted/p/moveit_ros_trajectory_cache"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/moveit_ros_trajectory_cache">moveit_ros_trajectory_cache</a> <small>package from <a style="text-decoration:none" href="/r/moveit/github-ros-planning-moveit2">moveit</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit">

moveit
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_common">

moveit_common
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_configs_utils">

moveit_configs_utils
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_core">

moveit_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_kinematics">

moveit_kinematics
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners_chomp">

moveit_planners_chomp
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/chomp_motion_planner">

chomp_motion_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners">

moveit_planners
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners_ompl">

moveit_planners_ompl
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/pilz_industrial_motion_planner">

pilz_industrial_motion_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/pilz_industrial_motion_planner_testutils">

pilz_industrial_motion_planner_testutils
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners_stomp">

moveit_planners_stomp
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_ikfast_manipulator_plugin">

moveit_resources_prbt_ikfast_manipulator_plugin
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_moveit_config">

moveit_resources_prbt_moveit_config
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_pg70_support">

moveit_resources_prbt_pg70_support
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_support">

moveit_resources_prbt_support
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_plugins">

moveit_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_control_interface">

moveit_ros_control_interface
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_simple_controller_manager">

moveit_simple_controller_manager
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_py">

moveit_py
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_benchmarks">

moveit_ros_benchmarks
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_hybrid_planning">

moveit_hybrid_planning
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_move_group">

moveit_ros_move_group
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros">

moveit_ros
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_servo">

moveit_servo
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_occupancy_map_monitor">

moveit_ros_occupancy_map_monitor
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_perception">

moveit_ros_perception
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_planning">

moveit_ros_planning
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_planning_interface">

moveit_ros_planning_interface
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_robot_interaction">

moveit_ros_robot_interaction
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_tests">

moveit_ros_tests
</a>
            
          
            
            
              <span class="label label-default pkg-label">

moveit_ros_trajectory_cache
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_visualization">

moveit_ros_visualization
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_warehouse">

moveit_ros_warehouse
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_runtime">

moveit_runtime
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_app_plugins">

moveit_setup_app_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_assistant">

moveit_setup_assistant
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_controllers">

moveit_setup_controllers
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_core_plugins">

moveit_setup_core_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_framework">

moveit_setup_framework
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_simulation">

moveit_setup_simulation
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_srdf_plugins">

moveit_setup_srdf_plugins
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/rolling/p/moveit_ros_trajectory_cache"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="rolling-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#rolling-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#rolling-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#rolling-deps" data-toggle="tab"><span class="label label-primary">23</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#rolling-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#rolling-questions" data-toggle="tab"><span id="rolling-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="rolling-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>2.13.2</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache License 2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">🤖 MoveIt for ROS 2</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-planning/moveit2.git">https://github.com/ros-planning/moveit2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-24
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/moveit/#rolling-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/moveit/#rolling-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/moveit/#rolling-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            A trajectory cache for MoveIt 2 motion plans and cartesian plans.
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Brandon Ong</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <em>No additional authors.</em>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache/README.md" title="Open in git repository">moveit_ros/trajectory_cache/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="fuzzy-matching-trajectory-cache">Fuzzy-Matching Trajectory Cache</h1>

<p>A trajectory cache based on <a href="https://github.com/moveit/warehouse_ros"><code class="language-plaintext highlighter-rouge">warehouse_ros</code></a> for the move_group planning interface that supports fuzzy lookup for <code class="language-plaintext highlighter-rouge">MotionPlanRequest</code> and <code class="language-plaintext highlighter-rouge">GetCartesianPath</code> requests and trajectories.</p>

<p>The cache will work on manipulators with an arbitrary number of joints, across any number of move groups.
Furthermore, the cache supports pruning and ranking of fetched trajectories, with extension points for injecting your own feature keying, cache insert, cache prune and cache sorting logic.</p>

<h2 id="citations">Citations</h2>

<p>If you use this package in your work, please cite it using the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@software{ong_2024_11215428,
  author       = {Ong, Brandon},
  title        = {A Fuzzy-Matching Trajectory Cache for MoveIt 2},
  month        = may,
  year         = 2024,
  publisher    = {GitHub},
  version      = {0.1.0},
  doi          = {10.5281/zenodo.11215428},
  url          = {https://doi.org/10.5281/zenodo.11215428}
}

</code></pre></div></div>

<h2 id="warning-the-following-are-unsupported--rfe">WARNING: The following are unsupported / RFE</h2>

<p>Since this is an initial release, the following features are unsupported because they were a little too difficult for the time I had to implement this. So I am leaving it to the community to help!</p>

<ul>
  <li>
<strong>!!! This cache does NOT support collision detection, multi-DOF joints, or constraint regions!</strong>
    <ul>
      <li>Trajectories will be put into and fetched from the cache IGNORING collision. If your planning scene is expected to change significantly between cache lookups, it is likely that the fetched plan will result in collisions.</li>
      <li>To natively handle collisions this cache will need to hash the planning scene world msg (after zeroing out std_msgs/Header timestamps and sequences) and do an appropriate lookup, or do more complicated checks to see if the scene world is “close enough” or is a strictly less obstructed version of the scene in the cache entry.</li>
    </ul>
  </li>
  <li>The fuzzy lookup can’t be configured on a per-joint basis.</li>
</ul>

<p>That said, there are ways to get around the lack of native collision support to enable use of this cache, such as:</p>
<ul>
  <li>Validating a fetched plan for collisions before execution.</li>
  <li>Make use of the hybrid planning pipeline, using local planners for collision avoidance, while keeping the cache as a stand-in for a “global planner”, where applicable.</li>
</ul>

<h2 id="example-usage">Example Usage</h2>

<p><strong>PRE-REQUISITE</strong>: The <code class="language-plaintext highlighter-rouge">warehouse_plugin</code> ROS parameter must be set to a <a href="https://github.com/moveit/warehouse_ros"><code class="language-plaintext highlighter-rouge">warehouse_ros</code></a> plugin you have installed, which determines what database backend should be used for the cache.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">auto</span> <span class="n">cache</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">TrajectoryCache</span><span class="o">&gt;</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
<span class="n">cache</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">(</span><span class="cm">/*db_host=*/</span><span class="s">":memory:"</span><span class="p">,</span> <span class="cm">/*db_port=*/</span><span class="mi">0</span><span class="p">,</span> <span class="cm">/*exact_match_precision=*/</span><span class="mf">1e-6</span><span class="p">);</span>

<span class="c1">// The default feature extractors key the cache on starting robot state and goal constraints in the plan request.</span>
<span class="c1">// Keyed fuzzily with separate fuzziness on start and goal features.</span>
<span class="k">auto</span> <span class="n">default_features</span> <span class="o">=</span> <span class="n">TrajectoryCache</span><span class="o">::</span><span class="n">getDefaultFeatures</span><span class="p">(</span><span class="n">start_tolerance</span><span class="p">,</span> <span class="n">goal_tolerance</span><span class="p">);</span>

<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">TrajectoryCache</span><span class="o">::</span><span class="n">getDefaultSortFeature</span><span class="p">();</span>  <span class="c1">// Sorts by planned execution time.</span>

<span class="n">move_group</span><span class="p">.</span><span class="n">setPoseTarget</span><span class="p">(...);</span>
<span class="n">moveit_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">MotionPlanRequest</span> <span class="n">motion_plan_req_msg</span><span class="p">;</span>
<span class="n">move_group</span><span class="p">.</span><span class="n">constructMotionPlanRequest</span><span class="p">(</span><span class="n">motion_plan_request_msg</span><span class="p">);</span>

<span class="c1">// Use the cache INSTEAD of planning!</span>
<span class="k">auto</span> <span class="n">fetched_trajectory</span> <span class="o">=</span>
    <span class="n">cache</span><span class="o">-&gt;</span><span class="n">fetchBestMatchingTrajectory</span><span class="p">(</span><span class="o">*</span><span class="n">move_group_interface</span><span class="p">,</span> <span class="n">robot_name</span><span class="p">,</span> <span class="n">motion_plan_req_msg</span><span class="p">,</span>
                                       <span class="cm">/*features=*/</span><span class="n">default_features</span><span class="p">,</span>
                                       <span class="cm">/*sort_by=*/</span><span class="n">TrajectoryCache</span><span class="o">::</span><span class="n">getDefaultSortFeature</span><span class="p">(),</span>
                                       <span class="cm">/*ascending=*/</span><span class="nb">true</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="n">fetched_trajectory</span><span class="p">)</span>  <span class="c1">// Great! We got a cache hit, we can execute it.</span>
<span class="p">{</span>
  <span class="n">move_group</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="o">*</span><span class="n">fetched_trajectory</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span>  <span class="c1">// Otherwise, plan... And put it for posterity!</span>
<span class="p">{</span>
  <span class="n">moveit</span><span class="o">::</span><span class="n">planning_interface</span><span class="o">::</span><span class="n">MoveGroupInterface</span><span class="o">::</span><span class="n">Plan</span> <span class="n">plan</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">move_group</span><span class="p">.</span><span class="n">plan</span><span class="p">(</span><span class="n">plan</span><span class="p">)</span> <span class="o">==</span> <span class="n">moveit</span><span class="o">::</span><span class="n">core</span><span class="o">::</span><span class="n">MoveItErrorCode</span><span class="o">::</span><span class="n">SUCCESS</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">cache</span><span class="o">-&gt;</span><span class="n">insertTrajectory</span><span class="p">(</span>
        <span class="o">*</span><span class="n">interface</span><span class="p">,</span> <span class="n">robot_name</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">plan_req_msg</span><span class="p">),</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">plan</span><span class="p">),</span>
        <span class="cm">/*cache_insert_policy=*/</span><span class="n">BestSeenExecutionTimePolicy</span><span class="p">(),</span>
        <span class="cm">/*prune_worse_trajectories=*/</span><span class="nb">true</span><span class="p">,</span> <span class="cm">/*additional_features=*/</span><span class="p">{});</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<h2 id="main-features">Main Features</h2>

<h3 id="overview">Overview</h3>

<p>This trajectory cache package supports:</p>
<ul>
  <li>Inserting and fetching trajectories, keyed fuzzily on any feature of the plan request and plan response.</li>
  <li>Ranking cache entries on any keying feature that is supported (e.g. sorting by execution time).</li>
  <li>Optional cache pruning to keep fetch times and database sizes low.</li>
  <li>Generic support for manipulators with any arbitrary number of joints, across any number of move_groups.</li>
  <li>Cache namespacing and partitioning</li>
  <li>Extension points for injecting your own feature keying, cache insert, cache prune, and cache sorting logic.</li>
</ul>

<p>The cache supports <code class="language-plaintext highlighter-rouge">MotionPlanRequest</code> and <code class="language-plaintext highlighter-rouge">GetCartesianPaths::Request</code> out of the box!</p>

<h3 id="fully-customizable-behavior">Fully Customizable Behavior</h3>

<p>This trajectory cache allows you to inject your own implementations to affect:</p>
<ul>
  <li>What features of the plan request and plan response to key the cache on</li>
  <li>What cache insert and cache pruning policy to adopt</li>
</ul>

<p>For example, you may decide to write your own feature extractor to key the cache, and decide when to insert or prune a cache entry on features such as:</p>
<ul>
  <li>Minimum jerk time</li>
  <li>Path length</li>
  <li>Any other feature not supported by this package!</li>
</ul>

<h3 id="pre-existing-implementations">Pre-Existing Implementations</h3>

<p>The package provides some starter implementations that covers most general cases of motion planning.</p>

<p>For more information, see the implementations of:</p>
<ul>
  <li><a href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache/./include/moveit/trajectory_cache/features/features_interface.hpp"><code class="language-plaintext highlighter-rouge">FeaturesInterface</code></a></li>
  <li><a href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache/./include/moveit/trajectory_cache/cache_insert_policies/cache_insert_policy_interface.hpp"><code class="language-plaintext highlighter-rouge">CacheInsertPolicyInterface</code></a></li>
</ul>

<h4 id="cache-keying-features">Cache Keying Features</h4>

<p>The following are features of the plan request and response that you can key the cache on.</p>

<p>These support separately configurable fuzzy lookup on start and goal conditions!
Additionally, these features “canonicalize” the inputs to reduce the cardinality of the cache, increasing the chances of cache hits. (e.g., restating poses relative to the planning frame).</p>

<p>Supported Features:</p>
<ul>
  <li>“Start”
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">WorkspaceFeatures</code>: Planning workspace</li>
      <li>
<code class="language-plaintext highlighter-rouge">StartStateJointStateFeatures</code>: Starting robot joint state</li>
    </ul>
  </li>
  <li>“Goal”
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">MaxSpeedAndAccelerationFeatures</code>: Max velocity, acceleration, and cartesian speed limits</li>
      <li>
<code class="language-plaintext highlighter-rouge">GoalConstraintsFeatures</code>: Planning request <code class="language-plaintext highlighter-rouge">goal_constraints</code>
        <ul>
          <li>This includes ALL joint, position, and orientation constraints (but not constraint regions)!</li>
        </ul>
      </li>
      <li>
<code class="language-plaintext highlighter-rouge">PathConstraintsFeatures</code>: Planning request <code class="language-plaintext highlighter-rouge">path_constraints</code>
</li>
      <li>
<code class="language-plaintext highlighter-rouge">TrajectoryConstraintsFeatures</code>: Planning request <code class="language-plaintext highlighter-rouge">trajectory_constraints</code>And also workspace parameters, and some others.</li>
    </ul>
  </li>
  <li>Planning request goal parameters</li>
</ul>

<p>Additionally, support for user-specified features are provided for query-only or cache metadata tagging constant features. (See <a href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache/./include/moveit/trajectory_cache/features/constant_features.hpp"><code class="language-plaintext highlighter-rouge">constant_features.hpp</code></a>)</p>

<p>Similar support exists for the cartesian variants of these.</p>

<h4 id="cache-insert-and-pruning-policies">Cache Insert and Pruning Policies</h4>

<p>The following are cache insertion and pruning policies to govern when cache entries are inserted, and how they are (optionally) pruned.</p>

<p>Supported Cache Insert Policies:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">BestSeenExecutionTimePolicy</code>: Only insert best seen execution time, optionally prune on best execution time.</li>
  <li>
<code class="language-plaintext highlighter-rouge">AlwaysInsertNeverPrunePolicy</code>: Always insert, never prune</li>
</ul>

<h2 id="working-principle">Working Principle</h2>

<p>If a plan request has features (e.g., start, goal, and constraint conditions) that are “close enough” to an entry in the cache, then the cached trajectory should be reusable for that request, allowing us to skip planning.</p>

<p>The cache extracts these features from the planning request and plan response, storing them in the cache database.
When a new planning request is used to attempt to fetch a matching plan, the cache attempts to fuzzily match the request to pre-existing cache entries keyed on similar requests.
Any “close enough” matches are then returned as valid cache hits for plan reuse, with the definition of “close enough” depending on the type of feature that is being extracted.</p>

<h2 id="benefits">Benefits</h2>

<p>A trajectory cache helps:</p>
<ul>
  <li>Cut down on planning time</li>
  <li>Allows for consistent predictable behavior of used together with a stochastic planner
    <ul>
      <li>It effectively allows you to “freeze” a move</li>
    </ul>
  </li>
</ul>

<p>To explain this, consider that planners in MoveIt generally fall under two main camps: stochastic/probabilistic, and optimization based.
The probabilistic planners are fast, but usually non-deterministic, whereas the optimization based ones are usually slow, but deterministic.</p>

<p>One way to get around this is to pre-plan and manually select and label robot trajectories to “freeze” in a trajectory database to then replay by name, which avoids needing to spend time to replan, and allows you to ensure that motions are constant and repeatable.
However, this approach is not very flexible and not easily reused.</p>

<p>The trajectory cache improves upon this approach by allowing a user to “freeze” and store successful plans, but <strong>also</strong> look up those plans in a more generalizable and natural way, using the planning request itself to key the cache, effectively allowing the cache to stand in for a planning call.</p>

<p>Furthermore, the specific properties of this trajectory cache provides further unique benefits:</p>
<ol>
  <li>With fuzzy matching, “frozen” plans are much easier to look up and reuse, while simultaneously increasing the chances of a cache hit.</li>
  <li>The ability to rank trajectories will, if used with a stochastic planner over sufficient runs, cause the cache to eventually converge to increasingly optimal plans.</li>
</ol>

<p>Finally, the cache makes use of pruning to optimize fetch times, and also finds ways to “canonicalize” features of the keying request to increase chances of a cache hit.</p>

<h2 id="best-practices">Best Practices</h2>

<ul>
  <li>Since this cache does not yet support collisions, ensure the planning scene and obstacles remain static, or always validate the fetched plan for collisions</li>
  <li>When using the default cache features, have looser start fuzziness, and stricter goal fuzziness</li>
  <li>Move the robot to fixed starting poses where possible before planning to increase the chances of a cache hit</li>
  <li>Use the cache where repetitive, non-dynamic motion is likely to occur (e.g. known plans, short planned moves, etc.)</li>
</ul>

<p>Additionally, you may build abstractions on top of the class, for example, to expose the following behaviors:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">TrainingOverwrite</code>: Always plan, and write to cache, pruning all worse trajectories for “matching” cache keys</li>
  <li>
<code class="language-plaintext highlighter-rouge">TrainingAppendOnly</code>: Always plan, and always add to the cache.</li>
  <li>
<code class="language-plaintext highlighter-rouge">ExecuteBestEffort</code>: Rely on cache wherever possible, but plan otherwise.</li>
  <li>
<code class="language-plaintext highlighter-rouge">ExecuteReadOnly</code>: Only execute if cache hit occurred.</li>
</ul>

<p>You can see how such behaviors effectively model the “dev” and “deploy” phases of a robot deployment, and how they could be useful.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-moveit_ros_trajectory_cache">Changelog for package moveit_ros_trajectory_cache</h1>

<h2 id="2132-2025-04-16">2.13.2 (2025-04-16)</h2>

<h2 id="2131-2025-04-15">2.13.1 (2025-04-15)</h2>

<h2 id="2130-2025-02-15">2.13.0 (2025-02-15)</h2>

<ul>
  <li>Fuzzy-matching Trajectory Cache Injectable Traits refactor 🔥🔥
(<a href="https://github.com/ros-planning/moveit2/issues/2941">#2941</a>)</li>
  <li>Contributors: methylDragon</li>
</ul>

<h2 id="2120-2024-11-29">2.12.0 (2024-11-29)</h2>

<ul>
  <li>Enhancement/use hpp for headers
(<a href="https://github.com/ros-planning/moveit2/issues/3113">#3113</a>)</li>
  <li>Contributors: Tom Noble</li>
</ul>

<h2 id="2110-2024-09-16">2.11.0 (2024-09-16)</h2>

<h2 id="010-2024-05-17">0.1.0 (2024-05-17)</h2>

<ul>
  <li>Add <code class="language-plaintext highlighter-rouge">moveit_ros_trajectory_cache</code> package for trajectory caching.</li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="rolling-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/moveit_ros_trajectory_cache/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="rolling-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#rolling">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_ros#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_ros#rolling">moveit_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/xacro#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/xacro#rolling">xacro  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_pytest#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_pytest#rolling">ament_cmake_pytest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_uncrustify#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_uncrustify#rolling">ament_cmake_uncrustify  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/launch_pytest#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/launch_pytest#rolling">launch_pytest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/launch_testing_ament_cmake#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/launch_testing_ament_cmake#rolling">launch_testing_ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_configs_utils#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_configs_utils#rolling">moveit_configs_utils  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_planners_ompl#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_planners_ompl#rolling">moveit_planners_ompl  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_resources#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_resources#rolling">moveit_resources  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rmf_utils#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rmf_utils#rolling">rmf_utils  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/robot_state_publisher#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/robot_state_publisher#rolling">robot_state_publisher  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ros2_control#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ros2_control#rolling">ros2_control  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/warehouse_ros_sqlite#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/warehouse_ros_sqlite#rolling">warehouse_ros_sqlite  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_common#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_common#rolling">moveit_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/geometry_msgs#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/geometry_msgs#rolling">geometry_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_ros_planning_interface#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_ros_planning_interface#rolling">moveit_ros_planning_interface  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#rolling">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp_action#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp_action#rolling">rclcpp_action  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/tf2_ros#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/tf2_ros#rolling">tf2_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/trajectory_msgs#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/trajectory_msgs#rolling">trajectory_msgs  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/python3-yaml">python3-yaml</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-pytest">python3-pytest</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <em>No known dependants.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="rolling-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="rolling-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>moveit_ros_trajectory_cache</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="rolling-question-list" class="panel-body" style="display: none;"></div>
      <div id="rolling-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/moveit_ros_trajectory_cache+rolling">here</a>.</p>
      </div>
      <div id="rolling-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/ros-planning/moveit2.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/rolling/p/moveit_ros_trajectory_cache"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/moveit_ros_trajectory_cache">moveit_ros_trajectory_cache</a> <small>package from <a style="text-decoration:none" href="/r/moveit2/github-moveit-moveit2">moveit2</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit">

moveit
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_common">

moveit_common
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_configs_utils">

moveit_configs_utils
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_core">

moveit_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_kinematics">

moveit_kinematics
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners_chomp">

moveit_planners_chomp
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/chomp_motion_planner">

chomp_motion_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners">

moveit_planners
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners_ompl">

moveit_planners_ompl
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/pilz_industrial_motion_planner">

pilz_industrial_motion_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/pilz_industrial_motion_planner_testutils">

pilz_industrial_motion_planner_testutils
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners_stomp">

moveit_planners_stomp
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_ikfast_manipulator_plugin">

moveit_resources_prbt_ikfast_manipulator_plugin
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_moveit_config">

moveit_resources_prbt_moveit_config
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_pg70_support">

moveit_resources_prbt_pg70_support
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_support">

moveit_resources_prbt_support
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_plugins">

moveit_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_control_interface">

moveit_ros_control_interface
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_simple_controller_manager">

moveit_simple_controller_manager
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_py">

moveit_py
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_benchmarks">

moveit_ros_benchmarks
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_hybrid_planning">

moveit_hybrid_planning
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_move_group">

moveit_ros_move_group
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros">

moveit_ros
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_servo">

moveit_servo
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_occupancy_map_monitor">

moveit_ros_occupancy_map_monitor
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_perception">

moveit_ros_perception
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_planning">

moveit_ros_planning
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_planning_interface">

moveit_ros_planning_interface
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_robot_interaction">

moveit_ros_robot_interaction
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_tests">

moveit_ros_tests
</a>
            
          
            
            
              <span class="label label-default pkg-label">

moveit_ros_trajectory_cache
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_visualization">

moveit_ros_visualization
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_warehouse">

moveit_ros_warehouse
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_runtime">

moveit_runtime
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_app_plugins">

moveit_setup_app_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_assistant">

moveit_setup_assistant
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_controllers">

moveit_setup_controllers
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_core_plugins">

moveit_setup_core_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_framework">

moveit_setup_framework
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_simulation">

moveit_setup_simulation
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_srdf_plugins">

moveit_setup_srdf_plugins
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/github/p/moveit_ros_trajectory_cache"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/moveit/moveit2/tree/main/moveit_ros/trajectory_cache"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="github-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#github-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#github-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#github-deps" data-toggle="tab"><span class="label label-primary">23</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#github-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#github-questions" data-toggle="tab"><span id="github-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="github-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>2.13.2</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache License 2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">🤖 MoveIt for ROS 2</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/moveit/moveit2.git">https://github.com/moveit/moveit2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-24
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNKNOWN
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/moveit2/#github-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/moveit2/#github-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/moveit2/#github-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            A trajectory cache for MoveIt 2 motion plans and cartesian plans.
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Brandon Ong</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <em>No additional authors.</em>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/moveit/moveit2/tree/main/moveit_ros/trajectory_cache/README.md" title="Open in git repository">moveit_ros/trajectory_cache/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="fuzzy-matching-trajectory-cache">Fuzzy-Matching Trajectory Cache</h1>

<p>A trajectory cache based on <a href="https://github.com/moveit/warehouse_ros"><code class="language-plaintext highlighter-rouge">warehouse_ros</code></a> for the move_group planning interface that supports fuzzy lookup for <code class="language-plaintext highlighter-rouge">MotionPlanRequest</code> and <code class="language-plaintext highlighter-rouge">GetCartesianPath</code> requests and trajectories.</p>

<p>The cache will work on manipulators with an arbitrary number of joints, across any number of move groups.
Furthermore, the cache supports pruning and ranking of fetched trajectories, with extension points for injecting your own feature keying, cache insert, cache prune and cache sorting logic.</p>

<h2 id="citations">Citations</h2>

<p>If you use this package in your work, please cite it using the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@software{ong_2024_11215428,
  author       = {Ong, Brandon},
  title        = {A Fuzzy-Matching Trajectory Cache for MoveIt 2},
  month        = may,
  year         = 2024,
  publisher    = {GitHub},
  version      = {0.1.0},
  doi          = {10.5281/zenodo.11215428},
  url          = {https://doi.org/10.5281/zenodo.11215428}
}

</code></pre></div></div>

<h2 id="warning-the-following-are-unsupported--rfe">WARNING: The following are unsupported / RFE</h2>

<p>Since this is an initial release, the following features are unsupported because they were a little too difficult for the time I had to implement this. So I am leaving it to the community to help!</p>

<ul>
  <li>
<strong>!!! This cache does NOT support collision detection, multi-DOF joints, or constraint regions!</strong>
    <ul>
      <li>Trajectories will be put into and fetched from the cache IGNORING collision. If your planning scene is expected to change significantly between cache lookups, it is likely that the fetched plan will result in collisions.</li>
      <li>To natively handle collisions this cache will need to hash the planning scene world msg (after zeroing out std_msgs/Header timestamps and sequences) and do an appropriate lookup, or do more complicated checks to see if the scene world is “close enough” or is a strictly less obstructed version of the scene in the cache entry.</li>
    </ul>
  </li>
  <li>The fuzzy lookup can’t be configured on a per-joint basis.</li>
</ul>

<p>That said, there are ways to get around the lack of native collision support to enable use of this cache, such as:</p>
<ul>
  <li>Validating a fetched plan for collisions before execution.</li>
  <li>Make use of the hybrid planning pipeline, using local planners for collision avoidance, while keeping the cache as a stand-in for a “global planner”, where applicable.</li>
</ul>

<h2 id="example-usage">Example Usage</h2>

<p><strong>PRE-REQUISITE</strong>: The <code class="language-plaintext highlighter-rouge">warehouse_plugin</code> ROS parameter must be set to a <a href="https://github.com/moveit/warehouse_ros"><code class="language-plaintext highlighter-rouge">warehouse_ros</code></a> plugin you have installed, which determines what database backend should be used for the cache.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">auto</span> <span class="n">cache</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">TrajectoryCache</span><span class="o">&gt;</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
<span class="n">cache</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">(</span><span class="cm">/*db_host=*/</span><span class="s">":memory:"</span><span class="p">,</span> <span class="cm">/*db_port=*/</span><span class="mi">0</span><span class="p">,</span> <span class="cm">/*exact_match_precision=*/</span><span class="mf">1e-6</span><span class="p">);</span>

<span class="c1">// The default feature extractors key the cache on starting robot state and goal constraints in the plan request.</span>
<span class="c1">// Keyed fuzzily with separate fuzziness on start and goal features.</span>
<span class="k">auto</span> <span class="n">default_features</span> <span class="o">=</span> <span class="n">TrajectoryCache</span><span class="o">::</span><span class="n">getDefaultFeatures</span><span class="p">(</span><span class="n">start_tolerance</span><span class="p">,</span> <span class="n">goal_tolerance</span><span class="p">);</span>

<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">TrajectoryCache</span><span class="o">::</span><span class="n">getDefaultSortFeature</span><span class="p">();</span>  <span class="c1">// Sorts by planned execution time.</span>

<span class="n">move_group</span><span class="p">.</span><span class="n">setPoseTarget</span><span class="p">(...);</span>
<span class="n">moveit_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">MotionPlanRequest</span> <span class="n">motion_plan_req_msg</span><span class="p">;</span>
<span class="n">move_group</span><span class="p">.</span><span class="n">constructMotionPlanRequest</span><span class="p">(</span><span class="n">motion_plan_request_msg</span><span class="p">);</span>

<span class="c1">// Use the cache INSTEAD of planning!</span>
<span class="k">auto</span> <span class="n">fetched_trajectory</span> <span class="o">=</span>
    <span class="n">cache</span><span class="o">-&gt;</span><span class="n">fetchBestMatchingTrajectory</span><span class="p">(</span><span class="o">*</span><span class="n">move_group_interface</span><span class="p">,</span> <span class="n">robot_name</span><span class="p">,</span> <span class="n">motion_plan_req_msg</span><span class="p">,</span>
                                       <span class="cm">/*features=*/</span><span class="n">default_features</span><span class="p">,</span>
                                       <span class="cm">/*sort_by=*/</span><span class="n">TrajectoryCache</span><span class="o">::</span><span class="n">getDefaultSortFeature</span><span class="p">(),</span>
                                       <span class="cm">/*ascending=*/</span><span class="nb">true</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="n">fetched_trajectory</span><span class="p">)</span>  <span class="c1">// Great! We got a cache hit, we can execute it.</span>
<span class="p">{</span>
  <span class="n">move_group</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="o">*</span><span class="n">fetched_trajectory</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span>  <span class="c1">// Otherwise, plan... And put it for posterity!</span>
<span class="p">{</span>
  <span class="n">moveit</span><span class="o">::</span><span class="n">planning_interface</span><span class="o">::</span><span class="n">MoveGroupInterface</span><span class="o">::</span><span class="n">Plan</span> <span class="n">plan</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">move_group</span><span class="p">.</span><span class="n">plan</span><span class="p">(</span><span class="n">plan</span><span class="p">)</span> <span class="o">==</span> <span class="n">moveit</span><span class="o">::</span><span class="n">core</span><span class="o">::</span><span class="n">MoveItErrorCode</span><span class="o">::</span><span class="n">SUCCESS</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">cache</span><span class="o">-&gt;</span><span class="n">insertTrajectory</span><span class="p">(</span>
        <span class="o">*</span><span class="n">interface</span><span class="p">,</span> <span class="n">robot_name</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">plan_req_msg</span><span class="p">),</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">plan</span><span class="p">),</span>
        <span class="cm">/*cache_insert_policy=*/</span><span class="n">BestSeenExecutionTimePolicy</span><span class="p">(),</span>
        <span class="cm">/*prune_worse_trajectories=*/</span><span class="nb">true</span><span class="p">,</span> <span class="cm">/*additional_features=*/</span><span class="p">{});</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<h2 id="main-features">Main Features</h2>

<h3 id="overview">Overview</h3>

<p>This trajectory cache package supports:</p>
<ul>
  <li>Inserting and fetching trajectories, keyed fuzzily on any feature of the plan request and plan response.</li>
  <li>Ranking cache entries on any keying feature that is supported (e.g. sorting by execution time).</li>
  <li>Optional cache pruning to keep fetch times and database sizes low.</li>
  <li>Generic support for manipulators with any arbitrary number of joints, across any number of move_groups.</li>
  <li>Cache namespacing and partitioning</li>
  <li>Extension points for injecting your own feature keying, cache insert, cache prune, and cache sorting logic.</li>
</ul>

<p>The cache supports <code class="language-plaintext highlighter-rouge">MotionPlanRequest</code> and <code class="language-plaintext highlighter-rouge">GetCartesianPaths::Request</code> out of the box!</p>

<h3 id="fully-customizable-behavior">Fully Customizable Behavior</h3>

<p>This trajectory cache allows you to inject your own implementations to affect:</p>
<ul>
  <li>What features of the plan request and plan response to key the cache on</li>
  <li>What cache insert and cache pruning policy to adopt</li>
</ul>

<p>For example, you may decide to write your own feature extractor to key the cache, and decide when to insert or prune a cache entry on features such as:</p>
<ul>
  <li>Minimum jerk time</li>
  <li>Path length</li>
  <li>Any other feature not supported by this package!</li>
</ul>

<h3 id="pre-existing-implementations">Pre-Existing Implementations</h3>

<p>The package provides some starter implementations that covers most general cases of motion planning.</p>

<p>For more information, see the implementations of:</p>
<ul>
  <li><a href="https://github.com/moveit/moveit2/tree/main/moveit_ros/trajectory_cache/./include/moveit/trajectory_cache/features/features_interface.hpp"><code class="language-plaintext highlighter-rouge">FeaturesInterface</code></a></li>
  <li><a href="https://github.com/moveit/moveit2/tree/main/moveit_ros/trajectory_cache/./include/moveit/trajectory_cache/cache_insert_policies/cache_insert_policy_interface.hpp"><code class="language-plaintext highlighter-rouge">CacheInsertPolicyInterface</code></a></li>
</ul>

<h4 id="cache-keying-features">Cache Keying Features</h4>

<p>The following are features of the plan request and response that you can key the cache on.</p>

<p>These support separately configurable fuzzy lookup on start and goal conditions!
Additionally, these features “canonicalize” the inputs to reduce the cardinality of the cache, increasing the chances of cache hits. (e.g., restating poses relative to the planning frame).</p>

<p>Supported Features:</p>
<ul>
  <li>“Start”
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">WorkspaceFeatures</code>: Planning workspace</li>
      <li>
<code class="language-plaintext highlighter-rouge">StartStateJointStateFeatures</code>: Starting robot joint state</li>
    </ul>
  </li>
  <li>“Goal”
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">MaxSpeedAndAccelerationFeatures</code>: Max velocity, acceleration, and cartesian speed limits</li>
      <li>
<code class="language-plaintext highlighter-rouge">GoalConstraintsFeatures</code>: Planning request <code class="language-plaintext highlighter-rouge">goal_constraints</code>
        <ul>
          <li>This includes ALL joint, position, and orientation constraints (but not constraint regions)!</li>
        </ul>
      </li>
      <li>
<code class="language-plaintext highlighter-rouge">PathConstraintsFeatures</code>: Planning request <code class="language-plaintext highlighter-rouge">path_constraints</code>
</li>
      <li>
<code class="language-plaintext highlighter-rouge">TrajectoryConstraintsFeatures</code>: Planning request <code class="language-plaintext highlighter-rouge">trajectory_constraints</code>And also workspace parameters, and some others.</li>
    </ul>
  </li>
  <li>Planning request goal parameters</li>
</ul>

<p>Additionally, support for user-specified features are provided for query-only or cache metadata tagging constant features. (See <a href="https://github.com/moveit/moveit2/tree/main/moveit_ros/trajectory_cache/./include/moveit/trajectory_cache/features/constant_features.hpp"><code class="language-plaintext highlighter-rouge">constant_features.hpp</code></a>)</p>

<p>Similar support exists for the cartesian variants of these.</p>

<h4 id="cache-insert-and-pruning-policies">Cache Insert and Pruning Policies</h4>

<p>The following are cache insertion and pruning policies to govern when cache entries are inserted, and how they are (optionally) pruned.</p>

<p>Supported Cache Insert Policies:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">BestSeenExecutionTimePolicy</code>: Only insert best seen execution time, optionally prune on best execution time.</li>
  <li>
<code class="language-plaintext highlighter-rouge">AlwaysInsertNeverPrunePolicy</code>: Always insert, never prune</li>
</ul>

<h2 id="working-principle">Working Principle</h2>

<p>If a plan request has features (e.g., start, goal, and constraint conditions) that are “close enough” to an entry in the cache, then the cached trajectory should be reusable for that request, allowing us to skip planning.</p>

<p>The cache extracts these features from the planning request and plan response, storing them in the cache database.
When a new planning request is used to attempt to fetch a matching plan, the cache attempts to fuzzily match the request to pre-existing cache entries keyed on similar requests.
Any “close enough” matches are then returned as valid cache hits for plan reuse, with the definition of “close enough” depending on the type of feature that is being extracted.</p>

<h2 id="benefits">Benefits</h2>

<p>A trajectory cache helps:</p>
<ul>
  <li>Cut down on planning time</li>
  <li>Allows for consistent predictable behavior of used together with a stochastic planner
    <ul>
      <li>It effectively allows you to “freeze” a move</li>
    </ul>
  </li>
</ul>

<p>To explain this, consider that planners in MoveIt generally fall under two main camps: stochastic/probabilistic, and optimization based.
The probabilistic planners are fast, but usually non-deterministic, whereas the optimization based ones are usually slow, but deterministic.</p>

<p>One way to get around this is to pre-plan and manually select and label robot trajectories to “freeze” in a trajectory database to then replay by name, which avoids needing to spend time to replan, and allows you to ensure that motions are constant and repeatable.
However, this approach is not very flexible and not easily reused.</p>

<p>The trajectory cache improves upon this approach by allowing a user to “freeze” and store successful plans, but <strong>also</strong> look up those plans in a more generalizable and natural way, using the planning request itself to key the cache, effectively allowing the cache to stand in for a planning call.</p>

<p>Furthermore, the specific properties of this trajectory cache provides further unique benefits:</p>
<ol>
  <li>With fuzzy matching, “frozen” plans are much easier to look up and reuse, while simultaneously increasing the chances of a cache hit.</li>
  <li>The ability to rank trajectories will, if used with a stochastic planner over sufficient runs, cause the cache to eventually converge to increasingly optimal plans.</li>
</ol>

<p>Finally, the cache makes use of pruning to optimize fetch times, and also finds ways to “canonicalize” features of the keying request to increase chances of a cache hit.</p>

<h2 id="best-practices">Best Practices</h2>

<ul>
  <li>Since this cache does not yet support collisions, ensure the planning scene and obstacles remain static, or always validate the fetched plan for collisions</li>
  <li>When using the default cache features, have looser start fuzziness, and stricter goal fuzziness</li>
  <li>Move the robot to fixed starting poses where possible before planning to increase the chances of a cache hit</li>
  <li>Use the cache where repetitive, non-dynamic motion is likely to occur (e.g. known plans, short planned moves, etc.)</li>
</ul>

<p>Additionally, you may build abstractions on top of the class, for example, to expose the following behaviors:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">TrainingOverwrite</code>: Always plan, and write to cache, pruning all worse trajectories for “matching” cache keys</li>
  <li>
<code class="language-plaintext highlighter-rouge">TrainingAppendOnly</code>: Always plan, and always add to the cache.</li>
  <li>
<code class="language-plaintext highlighter-rouge">ExecuteBestEffort</code>: Rely on cache wherever possible, but plan otherwise.</li>
  <li>
<code class="language-plaintext highlighter-rouge">ExecuteReadOnly</code>: Only execute if cache hit occurred.</li>
</ul>

<p>You can see how such behaviors effectively model the “dev” and “deploy” phases of a robot deployment, and how they could be useful.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-moveit_ros_trajectory_cache">Changelog for package moveit_ros_trajectory_cache</h1>

<h2 id="2132-2025-04-16">2.13.2 (2025-04-16)</h2>

<h2 id="2131-2025-04-15">2.13.1 (2025-04-15)</h2>

<h2 id="2130-2025-02-15">2.13.0 (2025-02-15)</h2>

<ul>
  <li>Fuzzy-matching Trajectory Cache Injectable Traits refactor 🔥🔥
(<a href="https://github.com/ros-planning/moveit2/issues/2941">#2941</a>)</li>
  <li>Contributors: methylDragon</li>
</ul>

<h2 id="2120-2024-11-29">2.12.0 (2024-11-29)</h2>

<ul>
  <li>Enhancement/use hpp for headers
(<a href="https://github.com/ros-planning/moveit2/issues/3113">#3113</a>)</li>
  <li>Contributors: Tom Noble</li>
</ul>

<h2 id="2110-2024-09-16">2.11.0 (2024-09-16)</h2>

<h2 id="010-2024-05-17">0.1.0 (2024-05-17)</h2>

<ul>
  <li>Add <code class="language-plaintext highlighter-rouge">moveit_ros_trajectory_cache</code> package for trajectory caching.</li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/moveit_ros_trajectory_cache/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#github">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_ros#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_ros#github">moveit_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/xacro#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/xacro#github">xacro  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_pytest#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_pytest#github">ament_cmake_pytest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_uncrustify#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_uncrustify#github">ament_cmake_uncrustify  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/launch_pytest#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/launch_pytest#github">launch_pytest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/launch_testing_ament_cmake#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/launch_testing_ament_cmake#github">launch_testing_ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_configs_utils#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_configs_utils#github">moveit_configs_utils  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_planners_ompl#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_planners_ompl#github">moveit_planners_ompl  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_resources#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_resources#github">moveit_resources  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rmf_utils#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rmf_utils#github">rmf_utils  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/robot_state_publisher#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/robot_state_publisher#github">robot_state_publisher  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ros2_control#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ros2_control#github">ros2_control  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/warehouse_ros_sqlite#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/warehouse_ros_sqlite#github">warehouse_ros_sqlite  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_common#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_common#github">moveit_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/geometry_msgs#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/geometry_msgs#github">geometry_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_ros_planning_interface#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_ros_planning_interface#github">moveit_ros_planning_interface  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#github">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp_action#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp_action#github">rclcpp_action  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/tf2_ros#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/tf2_ros#github">tf2_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/trajectory_msgs#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/trajectory_msgs#github">trajectory_msgs  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/python3-yaml">python3-yaml</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-pytest">python3-pytest</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/moveit2_tutorials#github">moveit2_tutorials</a></td>
                      <td class="text-center">
                        
                        <a href="/p/moveit2_tutorials#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>moveit_ros_trajectory_cache</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="github-question-list" class="panel-body" style="display: none;"></div>
      <div id="github-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/moveit_ros_trajectory_cache+github">here</a>.</p>
      </div>
      <div id="github-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/moveit/moveit2.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/github/p/moveit_ros_trajectory_cache"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/moveit/moveit2/tree/main/moveit_ros/trajectory_cache"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/moveit_ros_trajectory_cache">moveit_ros_trajectory_cache</a> <small>package from <a style="text-decoration:none" href="/r/moveit/github-ros-planning-moveit2">moveit</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit">

moveit
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_common">

moveit_common
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_configs_utils">

moveit_configs_utils
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_core">

moveit_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_kinematics">

moveit_kinematics
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners_chomp">

moveit_planners_chomp
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/chomp_motion_planner">

chomp_motion_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners">

moveit_planners
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners_ompl">

moveit_planners_ompl
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/pilz_industrial_motion_planner">

pilz_industrial_motion_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/pilz_industrial_motion_planner_testutils">

pilz_industrial_motion_planner_testutils
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners_stomp">

moveit_planners_stomp
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_ikfast_manipulator_plugin">

moveit_resources_prbt_ikfast_manipulator_plugin
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_moveit_config">

moveit_resources_prbt_moveit_config
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_pg70_support">

moveit_resources_prbt_pg70_support
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_support">

moveit_resources_prbt_support
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_plugins">

moveit_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_control_interface">

moveit_ros_control_interface
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_simple_controller_manager">

moveit_simple_controller_manager
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_py">

moveit_py
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_benchmarks">

moveit_ros_benchmarks
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_hybrid_planning">

moveit_hybrid_planning
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_move_group">

moveit_ros_move_group
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros">

moveit_ros
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_servo">

moveit_servo
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_occupancy_map_monitor">

moveit_ros_occupancy_map_monitor
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_perception">

moveit_ros_perception
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_planning">

moveit_ros_planning
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_planning_interface">

moveit_ros_planning_interface
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_robot_interaction">

moveit_ros_robot_interaction
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_tests">

moveit_ros_tests
</a>
            
          
            
            
              <span class="label label-default pkg-label">

moveit_ros_trajectory_cache
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_visualization">

moveit_ros_visualization
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_warehouse">

moveit_ros_warehouse
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_runtime">

moveit_runtime
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_app_plugins">

moveit_setup_app_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_assistant">

moveit_setup_assistant
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_controllers">

moveit_setup_controllers
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_core_plugins">

moveit_setup_core_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_framework">

moveit_setup_framework
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_simulation">

moveit_setup_simulation
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_srdf_plugins">

moveit_setup_srdf_plugins
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/galactic/p/moveit_ros_trajectory_cache"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="galactic-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#galactic-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#galactic-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#galactic-deps" data-toggle="tab"><span class="label label-primary">23</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#galactic-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#galactic-questions" data-toggle="tab"><span id="galactic-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="galactic-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>2.13.2</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache License 2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">🤖 MoveIt for ROS 2</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-planning/moveit2.git">https://github.com/ros-planning/moveit2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-24
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/moveit/#galactic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/moveit/#galactic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/moveit/#galactic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            A trajectory cache for MoveIt 2 motion plans and cartesian plans.
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Brandon Ong</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <em>No additional authors.</em>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache/README.md" title="Open in git repository">moveit_ros/trajectory_cache/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="fuzzy-matching-trajectory-cache">Fuzzy-Matching Trajectory Cache</h1>

<p>A trajectory cache based on <a href="https://github.com/moveit/warehouse_ros"><code class="language-plaintext highlighter-rouge">warehouse_ros</code></a> for the move_group planning interface that supports fuzzy lookup for <code class="language-plaintext highlighter-rouge">MotionPlanRequest</code> and <code class="language-plaintext highlighter-rouge">GetCartesianPath</code> requests and trajectories.</p>

<p>The cache will work on manipulators with an arbitrary number of joints, across any number of move groups.
Furthermore, the cache supports pruning and ranking of fetched trajectories, with extension points for injecting your own feature keying, cache insert, cache prune and cache sorting logic.</p>

<h2 id="citations">Citations</h2>

<p>If you use this package in your work, please cite it using the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@software{ong_2024_11215428,
  author       = {Ong, Brandon},
  title        = {A Fuzzy-Matching Trajectory Cache for MoveIt 2},
  month        = may,
  year         = 2024,
  publisher    = {GitHub},
  version      = {0.1.0},
  doi          = {10.5281/zenodo.11215428},
  url          = {https://doi.org/10.5281/zenodo.11215428}
}

</code></pre></div></div>

<h2 id="warning-the-following-are-unsupported--rfe">WARNING: The following are unsupported / RFE</h2>

<p>Since this is an initial release, the following features are unsupported because they were a little too difficult for the time I had to implement this. So I am leaving it to the community to help!</p>

<ul>
  <li>
<strong>!!! This cache does NOT support collision detection, multi-DOF joints, or constraint regions!</strong>
    <ul>
      <li>Trajectories will be put into and fetched from the cache IGNORING collision. If your planning scene is expected to change significantly between cache lookups, it is likely that the fetched plan will result in collisions.</li>
      <li>To natively handle collisions this cache will need to hash the planning scene world msg (after zeroing out std_msgs/Header timestamps and sequences) and do an appropriate lookup, or do more complicated checks to see if the scene world is “close enough” or is a strictly less obstructed version of the scene in the cache entry.</li>
    </ul>
  </li>
  <li>The fuzzy lookup can’t be configured on a per-joint basis.</li>
</ul>

<p>That said, there are ways to get around the lack of native collision support to enable use of this cache, such as:</p>
<ul>
  <li>Validating a fetched plan for collisions before execution.</li>
  <li>Make use of the hybrid planning pipeline, using local planners for collision avoidance, while keeping the cache as a stand-in for a “global planner”, where applicable.</li>
</ul>

<h2 id="example-usage">Example Usage</h2>

<p><strong>PRE-REQUISITE</strong>: The <code class="language-plaintext highlighter-rouge">warehouse_plugin</code> ROS parameter must be set to a <a href="https://github.com/moveit/warehouse_ros"><code class="language-plaintext highlighter-rouge">warehouse_ros</code></a> plugin you have installed, which determines what database backend should be used for the cache.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">auto</span> <span class="n">cache</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">TrajectoryCache</span><span class="o">&gt;</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
<span class="n">cache</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">(</span><span class="cm">/*db_host=*/</span><span class="s">":memory:"</span><span class="p">,</span> <span class="cm">/*db_port=*/</span><span class="mi">0</span><span class="p">,</span> <span class="cm">/*exact_match_precision=*/</span><span class="mf">1e-6</span><span class="p">);</span>

<span class="c1">// The default feature extractors key the cache on starting robot state and goal constraints in the plan request.</span>
<span class="c1">// Keyed fuzzily with separate fuzziness on start and goal features.</span>
<span class="k">auto</span> <span class="n">default_features</span> <span class="o">=</span> <span class="n">TrajectoryCache</span><span class="o">::</span><span class="n">getDefaultFeatures</span><span class="p">(</span><span class="n">start_tolerance</span><span class="p">,</span> <span class="n">goal_tolerance</span><span class="p">);</span>

<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">TrajectoryCache</span><span class="o">::</span><span class="n">getDefaultSortFeature</span><span class="p">();</span>  <span class="c1">// Sorts by planned execution time.</span>

<span class="n">move_group</span><span class="p">.</span><span class="n">setPoseTarget</span><span class="p">(...);</span>
<span class="n">moveit_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">MotionPlanRequest</span> <span class="n">motion_plan_req_msg</span><span class="p">;</span>
<span class="n">move_group</span><span class="p">.</span><span class="n">constructMotionPlanRequest</span><span class="p">(</span><span class="n">motion_plan_request_msg</span><span class="p">);</span>

<span class="c1">// Use the cache INSTEAD of planning!</span>
<span class="k">auto</span> <span class="n">fetched_trajectory</span> <span class="o">=</span>
    <span class="n">cache</span><span class="o">-&gt;</span><span class="n">fetchBestMatchingTrajectory</span><span class="p">(</span><span class="o">*</span><span class="n">move_group_interface</span><span class="p">,</span> <span class="n">robot_name</span><span class="p">,</span> <span class="n">motion_plan_req_msg</span><span class="p">,</span>
                                       <span class="cm">/*features=*/</span><span class="n">default_features</span><span class="p">,</span>
                                       <span class="cm">/*sort_by=*/</span><span class="n">TrajectoryCache</span><span class="o">::</span><span class="n">getDefaultSortFeature</span><span class="p">(),</span>
                                       <span class="cm">/*ascending=*/</span><span class="nb">true</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="n">fetched_trajectory</span><span class="p">)</span>  <span class="c1">// Great! We got a cache hit, we can execute it.</span>
<span class="p">{</span>
  <span class="n">move_group</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="o">*</span><span class="n">fetched_trajectory</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span>  <span class="c1">// Otherwise, plan... And put it for posterity!</span>
<span class="p">{</span>
  <span class="n">moveit</span><span class="o">::</span><span class="n">planning_interface</span><span class="o">::</span><span class="n">MoveGroupInterface</span><span class="o">::</span><span class="n">Plan</span> <span class="n">plan</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">move_group</span><span class="p">.</span><span class="n">plan</span><span class="p">(</span><span class="n">plan</span><span class="p">)</span> <span class="o">==</span> <span class="n">moveit</span><span class="o">::</span><span class="n">core</span><span class="o">::</span><span class="n">MoveItErrorCode</span><span class="o">::</span><span class="n">SUCCESS</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">cache</span><span class="o">-&gt;</span><span class="n">insertTrajectory</span><span class="p">(</span>
        <span class="o">*</span><span class="n">interface</span><span class="p">,</span> <span class="n">robot_name</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">plan_req_msg</span><span class="p">),</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">plan</span><span class="p">),</span>
        <span class="cm">/*cache_insert_policy=*/</span><span class="n">BestSeenExecutionTimePolicy</span><span class="p">(),</span>
        <span class="cm">/*prune_worse_trajectories=*/</span><span class="nb">true</span><span class="p">,</span> <span class="cm">/*additional_features=*/</span><span class="p">{});</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<h2 id="main-features">Main Features</h2>

<h3 id="overview">Overview</h3>

<p>This trajectory cache package supports:</p>
<ul>
  <li>Inserting and fetching trajectories, keyed fuzzily on any feature of the plan request and plan response.</li>
  <li>Ranking cache entries on any keying feature that is supported (e.g. sorting by execution time).</li>
  <li>Optional cache pruning to keep fetch times and database sizes low.</li>
  <li>Generic support for manipulators with any arbitrary number of joints, across any number of move_groups.</li>
  <li>Cache namespacing and partitioning</li>
  <li>Extension points for injecting your own feature keying, cache insert, cache prune, and cache sorting logic.</li>
</ul>

<p>The cache supports <code class="language-plaintext highlighter-rouge">MotionPlanRequest</code> and <code class="language-plaintext highlighter-rouge">GetCartesianPaths::Request</code> out of the box!</p>

<h3 id="fully-customizable-behavior">Fully Customizable Behavior</h3>

<p>This trajectory cache allows you to inject your own implementations to affect:</p>
<ul>
  <li>What features of the plan request and plan response to key the cache on</li>
  <li>What cache insert and cache pruning policy to adopt</li>
</ul>

<p>For example, you may decide to write your own feature extractor to key the cache, and decide when to insert or prune a cache entry on features such as:</p>
<ul>
  <li>Minimum jerk time</li>
  <li>Path length</li>
  <li>Any other feature not supported by this package!</li>
</ul>

<h3 id="pre-existing-implementations">Pre-Existing Implementations</h3>

<p>The package provides some starter implementations that covers most general cases of motion planning.</p>

<p>For more information, see the implementations of:</p>
<ul>
  <li><a href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache/./include/moveit/trajectory_cache/features/features_interface.hpp"><code class="language-plaintext highlighter-rouge">FeaturesInterface</code></a></li>
  <li><a href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache/./include/moveit/trajectory_cache/cache_insert_policies/cache_insert_policy_interface.hpp"><code class="language-plaintext highlighter-rouge">CacheInsertPolicyInterface</code></a></li>
</ul>

<h4 id="cache-keying-features">Cache Keying Features</h4>

<p>The following are features of the plan request and response that you can key the cache on.</p>

<p>These support separately configurable fuzzy lookup on start and goal conditions!
Additionally, these features “canonicalize” the inputs to reduce the cardinality of the cache, increasing the chances of cache hits. (e.g., restating poses relative to the planning frame).</p>

<p>Supported Features:</p>
<ul>
  <li>“Start”
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">WorkspaceFeatures</code>: Planning workspace</li>
      <li>
<code class="language-plaintext highlighter-rouge">StartStateJointStateFeatures</code>: Starting robot joint state</li>
    </ul>
  </li>
  <li>“Goal”
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">MaxSpeedAndAccelerationFeatures</code>: Max velocity, acceleration, and cartesian speed limits</li>
      <li>
<code class="language-plaintext highlighter-rouge">GoalConstraintsFeatures</code>: Planning request <code class="language-plaintext highlighter-rouge">goal_constraints</code>
        <ul>
          <li>This includes ALL joint, position, and orientation constraints (but not constraint regions)!</li>
        </ul>
      </li>
      <li>
<code class="language-plaintext highlighter-rouge">PathConstraintsFeatures</code>: Planning request <code class="language-plaintext highlighter-rouge">path_constraints</code>
</li>
      <li>
<code class="language-plaintext highlighter-rouge">TrajectoryConstraintsFeatures</code>: Planning request <code class="language-plaintext highlighter-rouge">trajectory_constraints</code>And also workspace parameters, and some others.</li>
    </ul>
  </li>
  <li>Planning request goal parameters</li>
</ul>

<p>Additionally, support for user-specified features are provided for query-only or cache metadata tagging constant features. (See <a href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache/./include/moveit/trajectory_cache/features/constant_features.hpp"><code class="language-plaintext highlighter-rouge">constant_features.hpp</code></a>)</p>

<p>Similar support exists for the cartesian variants of these.</p>

<h4 id="cache-insert-and-pruning-policies">Cache Insert and Pruning Policies</h4>

<p>The following are cache insertion and pruning policies to govern when cache entries are inserted, and how they are (optionally) pruned.</p>

<p>Supported Cache Insert Policies:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">BestSeenExecutionTimePolicy</code>: Only insert best seen execution time, optionally prune on best execution time.</li>
  <li>
<code class="language-plaintext highlighter-rouge">AlwaysInsertNeverPrunePolicy</code>: Always insert, never prune</li>
</ul>

<h2 id="working-principle">Working Principle</h2>

<p>If a plan request has features (e.g., start, goal, and constraint conditions) that are “close enough” to an entry in the cache, then the cached trajectory should be reusable for that request, allowing us to skip planning.</p>

<p>The cache extracts these features from the planning request and plan response, storing them in the cache database.
When a new planning request is used to attempt to fetch a matching plan, the cache attempts to fuzzily match the request to pre-existing cache entries keyed on similar requests.
Any “close enough” matches are then returned as valid cache hits for plan reuse, with the definition of “close enough” depending on the type of feature that is being extracted.</p>

<h2 id="benefits">Benefits</h2>

<p>A trajectory cache helps:</p>
<ul>
  <li>Cut down on planning time</li>
  <li>Allows for consistent predictable behavior of used together with a stochastic planner
    <ul>
      <li>It effectively allows you to “freeze” a move</li>
    </ul>
  </li>
</ul>

<p>To explain this, consider that planners in MoveIt generally fall under two main camps: stochastic/probabilistic, and optimization based.
The probabilistic planners are fast, but usually non-deterministic, whereas the optimization based ones are usually slow, but deterministic.</p>

<p>One way to get around this is to pre-plan and manually select and label robot trajectories to “freeze” in a trajectory database to then replay by name, which avoids needing to spend time to replan, and allows you to ensure that motions are constant and repeatable.
However, this approach is not very flexible and not easily reused.</p>

<p>The trajectory cache improves upon this approach by allowing a user to “freeze” and store successful plans, but <strong>also</strong> look up those plans in a more generalizable and natural way, using the planning request itself to key the cache, effectively allowing the cache to stand in for a planning call.</p>

<p>Furthermore, the specific properties of this trajectory cache provides further unique benefits:</p>
<ol>
  <li>With fuzzy matching, “frozen” plans are much easier to look up and reuse, while simultaneously increasing the chances of a cache hit.</li>
  <li>The ability to rank trajectories will, if used with a stochastic planner over sufficient runs, cause the cache to eventually converge to increasingly optimal plans.</li>
</ol>

<p>Finally, the cache makes use of pruning to optimize fetch times, and also finds ways to “canonicalize” features of the keying request to increase chances of a cache hit.</p>

<h2 id="best-practices">Best Practices</h2>

<ul>
  <li>Since this cache does not yet support collisions, ensure the planning scene and obstacles remain static, or always validate the fetched plan for collisions</li>
  <li>When using the default cache features, have looser start fuzziness, and stricter goal fuzziness</li>
  <li>Move the robot to fixed starting poses where possible before planning to increase the chances of a cache hit</li>
  <li>Use the cache where repetitive, non-dynamic motion is likely to occur (e.g. known plans, short planned moves, etc.)</li>
</ul>

<p>Additionally, you may build abstractions on top of the class, for example, to expose the following behaviors:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">TrainingOverwrite</code>: Always plan, and write to cache, pruning all worse trajectories for “matching” cache keys</li>
  <li>
<code class="language-plaintext highlighter-rouge">TrainingAppendOnly</code>: Always plan, and always add to the cache.</li>
  <li>
<code class="language-plaintext highlighter-rouge">ExecuteBestEffort</code>: Rely on cache wherever possible, but plan otherwise.</li>
  <li>
<code class="language-plaintext highlighter-rouge">ExecuteReadOnly</code>: Only execute if cache hit occurred.</li>
</ul>

<p>You can see how such behaviors effectively model the “dev” and “deploy” phases of a robot deployment, and how they could be useful.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-moveit_ros_trajectory_cache">Changelog for package moveit_ros_trajectory_cache</h1>

<h2 id="2132-2025-04-16">2.13.2 (2025-04-16)</h2>

<h2 id="2131-2025-04-15">2.13.1 (2025-04-15)</h2>

<h2 id="2130-2025-02-15">2.13.0 (2025-02-15)</h2>

<ul>
  <li>Fuzzy-matching Trajectory Cache Injectable Traits refactor 🔥🔥
(<a href="https://github.com/ros-planning/moveit2/issues/2941">#2941</a>)</li>
  <li>Contributors: methylDragon</li>
</ul>

<h2 id="2120-2024-11-29">2.12.0 (2024-11-29)</h2>

<ul>
  <li>Enhancement/use hpp for headers
(<a href="https://github.com/ros-planning/moveit2/issues/3113">#3113</a>)</li>
  <li>Contributors: Tom Noble</li>
</ul>

<h2 id="2110-2024-09-16">2.11.0 (2024-09-16)</h2>

<h2 id="010-2024-05-17">0.1.0 (2024-05-17)</h2>

<ul>
  <li>Add <code class="language-plaintext highlighter-rouge">moveit_ros_trajectory_cache</code> package for trajectory caching.</li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/moveit_ros_trajectory_cache/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#galactic">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_ros#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_ros#galactic">moveit_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/xacro#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/xacro#galactic">xacro  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_pytest#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_pytest#galactic">ament_cmake_pytest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_uncrustify#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_uncrustify#galactic">ament_cmake_uncrustify  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/launch_pytest#galactic-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/launch_pytest#galactic">launch_pytest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/launch_testing_ament_cmake#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/launch_testing_ament_cmake#galactic">launch_testing_ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_configs_utils#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_configs_utils#galactic">moveit_configs_utils  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_planners_ompl#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_planners_ompl#galactic">moveit_planners_ompl  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_resources#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_resources#galactic">moveit_resources  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rmf_utils#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rmf_utils#galactic">rmf_utils  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/robot_state_publisher#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/robot_state_publisher#galactic">robot_state_publisher  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ros2_control#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ros2_control#galactic">ros2_control  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/warehouse_ros_sqlite#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/warehouse_ros_sqlite#galactic">warehouse_ros_sqlite  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_common#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_common#galactic">moveit_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/geometry_msgs#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/geometry_msgs#galactic">geometry_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_ros_planning_interface#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_ros_planning_interface#galactic">moveit_ros_planning_interface  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#galactic">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp_action#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp_action#galactic">rclcpp_action  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/tf2_ros#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/tf2_ros#galactic">tf2_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/trajectory_msgs#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/trajectory_msgs#galactic">trajectory_msgs  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/python3-yaml">python3-yaml</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-pytest">python3-pytest</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <em>No known dependants.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>moveit_ros_trajectory_cache</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="galactic-question-list" class="panel-body" style="display: none;"></div>
      <div id="galactic-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/moveit_ros_trajectory_cache+galactic">here</a>.</p>
      </div>
      <div id="galactic-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/ros-planning/moveit2.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/galactic/p/moveit_ros_trajectory_cache"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/moveit_ros_trajectory_cache">moveit_ros_trajectory_cache</a> <small>package from <a style="text-decoration:none" href="/r/moveit/github-ros-planning-moveit2">moveit</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit">

moveit
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_common">

moveit_common
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_configs_utils">

moveit_configs_utils
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_core">

moveit_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_kinematics">

moveit_kinematics
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners_chomp">

moveit_planners_chomp
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/chomp_motion_planner">

chomp_motion_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners">

moveit_planners
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners_ompl">

moveit_planners_ompl
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/pilz_industrial_motion_planner">

pilz_industrial_motion_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/pilz_industrial_motion_planner_testutils">

pilz_industrial_motion_planner_testutils
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_planners_stomp">

moveit_planners_stomp
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_ikfast_manipulator_plugin">

moveit_resources_prbt_ikfast_manipulator_plugin
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_moveit_config">

moveit_resources_prbt_moveit_config
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_pg70_support">

moveit_resources_prbt_pg70_support
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_resources_prbt_support">

moveit_resources_prbt_support
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_plugins">

moveit_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_control_interface">

moveit_ros_control_interface
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_simple_controller_manager">

moveit_simple_controller_manager
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_py">

moveit_py
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_benchmarks">

moveit_ros_benchmarks
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_hybrid_planning">

moveit_hybrid_planning
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_move_group">

moveit_ros_move_group
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros">

moveit_ros
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_servo">

moveit_servo
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_occupancy_map_monitor">

moveit_ros_occupancy_map_monitor
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_perception">

moveit_ros_perception
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_planning">

moveit_ros_planning
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_planning_interface">

moveit_ros_planning_interface
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_robot_interaction">

moveit_ros_robot_interaction
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_tests">

moveit_ros_tests
</a>
            
          
            
            
              <span class="label label-default pkg-label">

moveit_ros_trajectory_cache
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_visualization">

moveit_ros_visualization
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_ros_warehouse">

moveit_ros_warehouse
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_runtime">

moveit_runtime
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_app_plugins">

moveit_setup_app_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_assistant">

moveit_setup_assistant
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_controllers">

moveit_setup_controllers
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_core_plugins">

moveit_setup_core_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_framework">

moveit_setup_framework
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_simulation">

moveit_setup_simulation
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/moveit_setup_srdf_plugins">

moveit_setup_srdf_plugins
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/iron/p/moveit_ros_trajectory_cache"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="iron-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#iron-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#iron-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#iron-deps" data-toggle="tab"><span class="label label-primary">23</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#iron-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#iron-questions" data-toggle="tab"><span id="iron-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="iron-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>2.13.2</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache License 2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">🤖 MoveIt for ROS 2</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-planning/moveit2.git">https://github.com/ros-planning/moveit2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-24
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/moveit/#iron-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/moveit/#iron-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/moveit/#iron-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            A trajectory cache for MoveIt 2 motion plans and cartesian plans.
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Brandon Ong</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <em>No additional authors.</em>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache/README.md" title="Open in git repository">moveit_ros/trajectory_cache/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="fuzzy-matching-trajectory-cache">Fuzzy-Matching Trajectory Cache</h1>

<p>A trajectory cache based on <a href="https://github.com/moveit/warehouse_ros"><code class="language-plaintext highlighter-rouge">warehouse_ros</code></a> for the move_group planning interface that supports fuzzy lookup for <code class="language-plaintext highlighter-rouge">MotionPlanRequest</code> and <code class="language-plaintext highlighter-rouge">GetCartesianPath</code> requests and trajectories.</p>

<p>The cache will work on manipulators with an arbitrary number of joints, across any number of move groups.
Furthermore, the cache supports pruning and ranking of fetched trajectories, with extension points for injecting your own feature keying, cache insert, cache prune and cache sorting logic.</p>

<h2 id="citations">Citations</h2>

<p>If you use this package in your work, please cite it using the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@software{ong_2024_11215428,
  author       = {Ong, Brandon},
  title        = {A Fuzzy-Matching Trajectory Cache for MoveIt 2},
  month        = may,
  year         = 2024,
  publisher    = {GitHub},
  version      = {0.1.0},
  doi          = {10.5281/zenodo.11215428},
  url          = {https://doi.org/10.5281/zenodo.11215428}
}

</code></pre></div></div>

<h2 id="warning-the-following-are-unsupported--rfe">WARNING: The following are unsupported / RFE</h2>

<p>Since this is an initial release, the following features are unsupported because they were a little too difficult for the time I had to implement this. So I am leaving it to the community to help!</p>

<ul>
  <li>
<strong>!!! This cache does NOT support collision detection, multi-DOF joints, or constraint regions!</strong>
    <ul>
      <li>Trajectories will be put into and fetched from the cache IGNORING collision. If your planning scene is expected to change significantly between cache lookups, it is likely that the fetched plan will result in collisions.</li>
      <li>To natively handle collisions this cache will need to hash the planning scene world msg (after zeroing out std_msgs/Header timestamps and sequences) and do an appropriate lookup, or do more complicated checks to see if the scene world is “close enough” or is a strictly less obstructed version of the scene in the cache entry.</li>
    </ul>
  </li>
  <li>The fuzzy lookup can’t be configured on a per-joint basis.</li>
</ul>

<p>That said, there are ways to get around the lack of native collision support to enable use of this cache, such as:</p>
<ul>
  <li>Validating a fetched plan for collisions before execution.</li>
  <li>Make use of the hybrid planning pipeline, using local planners for collision avoidance, while keeping the cache as a stand-in for a “global planner”, where applicable.</li>
</ul>

<h2 id="example-usage">Example Usage</h2>

<p><strong>PRE-REQUISITE</strong>: The <code class="language-plaintext highlighter-rouge">warehouse_plugin</code> ROS parameter must be set to a <a href="https://github.com/moveit/warehouse_ros"><code class="language-plaintext highlighter-rouge">warehouse_ros</code></a> plugin you have installed, which determines what database backend should be used for the cache.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">auto</span> <span class="n">cache</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">TrajectoryCache</span><span class="o">&gt;</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
<span class="n">cache</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">(</span><span class="cm">/*db_host=*/</span><span class="s">":memory:"</span><span class="p">,</span> <span class="cm">/*db_port=*/</span><span class="mi">0</span><span class="p">,</span> <span class="cm">/*exact_match_precision=*/</span><span class="mf">1e-6</span><span class="p">);</span>

<span class="c1">// The default feature extractors key the cache on starting robot state and goal constraints in the plan request.</span>
<span class="c1">// Keyed fuzzily with separate fuzziness on start and goal features.</span>
<span class="k">auto</span> <span class="n">default_features</span> <span class="o">=</span> <span class="n">TrajectoryCache</span><span class="o">::</span><span class="n">getDefaultFeatures</span><span class="p">(</span><span class="n">start_tolerance</span><span class="p">,</span> <span class="n">goal_tolerance</span><span class="p">);</span>

<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">TrajectoryCache</span><span class="o">::</span><span class="n">getDefaultSortFeature</span><span class="p">();</span>  <span class="c1">// Sorts by planned execution time.</span>

<span class="n">move_group</span><span class="p">.</span><span class="n">setPoseTarget</span><span class="p">(...);</span>
<span class="n">moveit_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">MotionPlanRequest</span> <span class="n">motion_plan_req_msg</span><span class="p">;</span>
<span class="n">move_group</span><span class="p">.</span><span class="n">constructMotionPlanRequest</span><span class="p">(</span><span class="n">motion_plan_request_msg</span><span class="p">);</span>

<span class="c1">// Use the cache INSTEAD of planning!</span>
<span class="k">auto</span> <span class="n">fetched_trajectory</span> <span class="o">=</span>
    <span class="n">cache</span><span class="o">-&gt;</span><span class="n">fetchBestMatchingTrajectory</span><span class="p">(</span><span class="o">*</span><span class="n">move_group_interface</span><span class="p">,</span> <span class="n">robot_name</span><span class="p">,</span> <span class="n">motion_plan_req_msg</span><span class="p">,</span>
                                       <span class="cm">/*features=*/</span><span class="n">default_features</span><span class="p">,</span>
                                       <span class="cm">/*sort_by=*/</span><span class="n">TrajectoryCache</span><span class="o">::</span><span class="n">getDefaultSortFeature</span><span class="p">(),</span>
                                       <span class="cm">/*ascending=*/</span><span class="nb">true</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="n">fetched_trajectory</span><span class="p">)</span>  <span class="c1">// Great! We got a cache hit, we can execute it.</span>
<span class="p">{</span>
  <span class="n">move_group</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="o">*</span><span class="n">fetched_trajectory</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span>  <span class="c1">// Otherwise, plan... And put it for posterity!</span>
<span class="p">{</span>
  <span class="n">moveit</span><span class="o">::</span><span class="n">planning_interface</span><span class="o">::</span><span class="n">MoveGroupInterface</span><span class="o">::</span><span class="n">Plan</span> <span class="n">plan</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">move_group</span><span class="p">.</span><span class="n">plan</span><span class="p">(</span><span class="n">plan</span><span class="p">)</span> <span class="o">==</span> <span class="n">moveit</span><span class="o">::</span><span class="n">core</span><span class="o">::</span><span class="n">MoveItErrorCode</span><span class="o">::</span><span class="n">SUCCESS</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">cache</span><span class="o">-&gt;</span><span class="n">insertTrajectory</span><span class="p">(</span>
        <span class="o">*</span><span class="n">interface</span><span class="p">,</span> <span class="n">robot_name</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">plan_req_msg</span><span class="p">),</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">plan</span><span class="p">),</span>
        <span class="cm">/*cache_insert_policy=*/</span><span class="n">BestSeenExecutionTimePolicy</span><span class="p">(),</span>
        <span class="cm">/*prune_worse_trajectories=*/</span><span class="nb">true</span><span class="p">,</span> <span class="cm">/*additional_features=*/</span><span class="p">{});</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<h2 id="main-features">Main Features</h2>

<h3 id="overview">Overview</h3>

<p>This trajectory cache package supports:</p>
<ul>
  <li>Inserting and fetching trajectories, keyed fuzzily on any feature of the plan request and plan response.</li>
  <li>Ranking cache entries on any keying feature that is supported (e.g. sorting by execution time).</li>
  <li>Optional cache pruning to keep fetch times and database sizes low.</li>
  <li>Generic support for manipulators with any arbitrary number of joints, across any number of move_groups.</li>
  <li>Cache namespacing and partitioning</li>
  <li>Extension points for injecting your own feature keying, cache insert, cache prune, and cache sorting logic.</li>
</ul>

<p>The cache supports <code class="language-plaintext highlighter-rouge">MotionPlanRequest</code> and <code class="language-plaintext highlighter-rouge">GetCartesianPaths::Request</code> out of the box!</p>

<h3 id="fully-customizable-behavior">Fully Customizable Behavior</h3>

<p>This trajectory cache allows you to inject your own implementations to affect:</p>
<ul>
  <li>What features of the plan request and plan response to key the cache on</li>
  <li>What cache insert and cache pruning policy to adopt</li>
</ul>

<p>For example, you may decide to write your own feature extractor to key the cache, and decide when to insert or prune a cache entry on features such as:</p>
<ul>
  <li>Minimum jerk time</li>
  <li>Path length</li>
  <li>Any other feature not supported by this package!</li>
</ul>

<h3 id="pre-existing-implementations">Pre-Existing Implementations</h3>

<p>The package provides some starter implementations that covers most general cases of motion planning.</p>

<p>For more information, see the implementations of:</p>
<ul>
  <li><a href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache/./include/moveit/trajectory_cache/features/features_interface.hpp"><code class="language-plaintext highlighter-rouge">FeaturesInterface</code></a></li>
  <li><a href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache/./include/moveit/trajectory_cache/cache_insert_policies/cache_insert_policy_interface.hpp"><code class="language-plaintext highlighter-rouge">CacheInsertPolicyInterface</code></a></li>
</ul>

<h4 id="cache-keying-features">Cache Keying Features</h4>

<p>The following are features of the plan request and response that you can key the cache on.</p>

<p>These support separately configurable fuzzy lookup on start and goal conditions!
Additionally, these features “canonicalize” the inputs to reduce the cardinality of the cache, increasing the chances of cache hits. (e.g., restating poses relative to the planning frame).</p>

<p>Supported Features:</p>
<ul>
  <li>“Start”
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">WorkspaceFeatures</code>: Planning workspace</li>
      <li>
<code class="language-plaintext highlighter-rouge">StartStateJointStateFeatures</code>: Starting robot joint state</li>
    </ul>
  </li>
  <li>“Goal”
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">MaxSpeedAndAccelerationFeatures</code>: Max velocity, acceleration, and cartesian speed limits</li>
      <li>
<code class="language-plaintext highlighter-rouge">GoalConstraintsFeatures</code>: Planning request <code class="language-plaintext highlighter-rouge">goal_constraints</code>
        <ul>
          <li>This includes ALL joint, position, and orientation constraints (but not constraint regions)!</li>
        </ul>
      </li>
      <li>
<code class="language-plaintext highlighter-rouge">PathConstraintsFeatures</code>: Planning request <code class="language-plaintext highlighter-rouge">path_constraints</code>
</li>
      <li>
<code class="language-plaintext highlighter-rouge">TrajectoryConstraintsFeatures</code>: Planning request <code class="language-plaintext highlighter-rouge">trajectory_constraints</code>And also workspace parameters, and some others.</li>
    </ul>
  </li>
  <li>Planning request goal parameters</li>
</ul>

<p>Additionally, support for user-specified features are provided for query-only or cache metadata tagging constant features. (See <a href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache/./include/moveit/trajectory_cache/features/constant_features.hpp"><code class="language-plaintext highlighter-rouge">constant_features.hpp</code></a>)</p>

<p>Similar support exists for the cartesian variants of these.</p>

<h4 id="cache-insert-and-pruning-policies">Cache Insert and Pruning Policies</h4>

<p>The following are cache insertion and pruning policies to govern when cache entries are inserted, and how they are (optionally) pruned.</p>

<p>Supported Cache Insert Policies:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">BestSeenExecutionTimePolicy</code>: Only insert best seen execution time, optionally prune on best execution time.</li>
  <li>
<code class="language-plaintext highlighter-rouge">AlwaysInsertNeverPrunePolicy</code>: Always insert, never prune</li>
</ul>

<h2 id="working-principle">Working Principle</h2>

<p>If a plan request has features (e.g., start, goal, and constraint conditions) that are “close enough” to an entry in the cache, then the cached trajectory should be reusable for that request, allowing us to skip planning.</p>

<p>The cache extracts these features from the planning request and plan response, storing them in the cache database.
When a new planning request is used to attempt to fetch a matching plan, the cache attempts to fuzzily match the request to pre-existing cache entries keyed on similar requests.
Any “close enough” matches are then returned as valid cache hits for plan reuse, with the definition of “close enough” depending on the type of feature that is being extracted.</p>

<h2 id="benefits">Benefits</h2>

<p>A trajectory cache helps:</p>
<ul>
  <li>Cut down on planning time</li>
  <li>Allows for consistent predictable behavior of used together with a stochastic planner
    <ul>
      <li>It effectively allows you to “freeze” a move</li>
    </ul>
  </li>
</ul>

<p>To explain this, consider that planners in MoveIt generally fall under two main camps: stochastic/probabilistic, and optimization based.
The probabilistic planners are fast, but usually non-deterministic, whereas the optimization based ones are usually slow, but deterministic.</p>

<p>One way to get around this is to pre-plan and manually select and label robot trajectories to “freeze” in a trajectory database to then replay by name, which avoids needing to spend time to replan, and allows you to ensure that motions are constant and repeatable.
However, this approach is not very flexible and not easily reused.</p>

<p>The trajectory cache improves upon this approach by allowing a user to “freeze” and store successful plans, but <strong>also</strong> look up those plans in a more generalizable and natural way, using the planning request itself to key the cache, effectively allowing the cache to stand in for a planning call.</p>

<p>Furthermore, the specific properties of this trajectory cache provides further unique benefits:</p>
<ol>
  <li>With fuzzy matching, “frozen” plans are much easier to look up and reuse, while simultaneously increasing the chances of a cache hit.</li>
  <li>The ability to rank trajectories will, if used with a stochastic planner over sufficient runs, cause the cache to eventually converge to increasingly optimal plans.</li>
</ol>

<p>Finally, the cache makes use of pruning to optimize fetch times, and also finds ways to “canonicalize” features of the keying request to increase chances of a cache hit.</p>

<h2 id="best-practices">Best Practices</h2>

<ul>
  <li>Since this cache does not yet support collisions, ensure the planning scene and obstacles remain static, or always validate the fetched plan for collisions</li>
  <li>When using the default cache features, have looser start fuzziness, and stricter goal fuzziness</li>
  <li>Move the robot to fixed starting poses where possible before planning to increase the chances of a cache hit</li>
  <li>Use the cache where repetitive, non-dynamic motion is likely to occur (e.g. known plans, short planned moves, etc.)</li>
</ul>

<p>Additionally, you may build abstractions on top of the class, for example, to expose the following behaviors:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">TrainingOverwrite</code>: Always plan, and write to cache, pruning all worse trajectories for “matching” cache keys</li>
  <li>
<code class="language-plaintext highlighter-rouge">TrainingAppendOnly</code>: Always plan, and always add to the cache.</li>
  <li>
<code class="language-plaintext highlighter-rouge">ExecuteBestEffort</code>: Rely on cache wherever possible, but plan otherwise.</li>
  <li>
<code class="language-plaintext highlighter-rouge">ExecuteReadOnly</code>: Only execute if cache hit occurred.</li>
</ul>

<p>You can see how such behaviors effectively model the “dev” and “deploy” phases of a robot deployment, and how they could be useful.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-moveit_ros_trajectory_cache">Changelog for package moveit_ros_trajectory_cache</h1>

<h2 id="2132-2025-04-16">2.13.2 (2025-04-16)</h2>

<h2 id="2131-2025-04-15">2.13.1 (2025-04-15)</h2>

<h2 id="2130-2025-02-15">2.13.0 (2025-02-15)</h2>

<ul>
  <li>Fuzzy-matching Trajectory Cache Injectable Traits refactor 🔥🔥
(<a href="https://github.com/ros-planning/moveit2/issues/2941">#2941</a>)</li>
  <li>Contributors: methylDragon</li>
</ul>

<h2 id="2120-2024-11-29">2.12.0 (2024-11-29)</h2>

<ul>
  <li>Enhancement/use hpp for headers
(<a href="https://github.com/ros-planning/moveit2/issues/3113">#3113</a>)</li>
  <li>Contributors: Tom Noble</li>
</ul>

<h2 id="2110-2024-09-16">2.11.0 (2024-09-16)</h2>

<h2 id="010-2024-05-17">0.1.0 (2024-05-17)</h2>

<ul>
  <li>Add <code class="language-plaintext highlighter-rouge">moveit_ros_trajectory_cache</code> package for trajectory caching.</li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/moveit_ros_trajectory_cache/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#iron">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_ros#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_ros#iron">moveit_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/xacro#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/xacro#iron">xacro  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_pytest#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_pytest#iron">ament_cmake_pytest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_uncrustify#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_uncrustify#iron">ament_cmake_uncrustify  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/launch_pytest#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/launch_pytest#iron">launch_pytest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/launch_testing_ament_cmake#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/launch_testing_ament_cmake#iron">launch_testing_ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_configs_utils#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_configs_utils#iron">moveit_configs_utils  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_planners_ompl#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_planners_ompl#iron">moveit_planners_ompl  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_resources#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_resources#iron">moveit_resources  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rmf_utils#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rmf_utils#iron">rmf_utils  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/robot_state_publisher#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/robot_state_publisher#iron">robot_state_publisher  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ros2_control#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ros2_control#iron">ros2_control  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/warehouse_ros_sqlite#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/warehouse_ros_sqlite#iron">warehouse_ros_sqlite  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_common#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_common#iron">moveit_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/geometry_msgs#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/geometry_msgs#iron">geometry_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/moveit_ros_planning_interface#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/moveit_ros_planning_interface#iron">moveit_ros_planning_interface  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#iron">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp_action#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp_action#iron">rclcpp_action  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/tf2_ros#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/tf2_ros#iron">tf2_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/trajectory_msgs#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/trajectory_msgs#iron">trajectory_msgs  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/python3-yaml">python3-yaml</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-pytest">python3-pytest</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <em>No known dependants.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>moveit_ros_trajectory_cache</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="iron-question-list" class="panel-body" style="display: none;"></div>
      <div id="iron-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/moveit_ros_trajectory_cache+iron">here</a>.</p>
      </div>
      <div id="iron-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/ros-planning/moveit2.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/iron/p/moveit_ros_trajectory_cache"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/ros-planning/moveit2/tree/main/moveit_ros/trajectory_cache"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>



<script id="question-list-template" type="text/html">
  <p>
    Browse <a href="https://robotics.stackexchange.com/questions/tagged/moveit_ros_trajectory_cache?tab=Newest">recent questions</a>
    or see the <a href="https://robotics.stackexchange.com/questions/tagged/moveit_ros_trajectory_cache?tab=Votes">highest voted ones</a>.
  </p>
  
  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">Title</th>
        <th scope="col">Answered?</th>
        <th scope="col">Created</th>
        <th scope="col">Active</th>
      </tr>
    </thead>
    <tbody>
      {{#questions}}
      <tr>
        <th scope="row"><a href="{{link}}">{{title}}</a><br><small>Tags: {{strtags}}</small></th>
        <th>{{answered}}</th>
        <th>{{created}}</th>
        <th>{{active}}</th>
      </tr>
      {{/questions}}
    </tbody>
  </table>
  {{#has_more}}
  <hr>
  <h4>Additional questions are available at
    <a href="https://robotics.stackexchange.com/questions/tagged/{{name}}?tab=Newest">Robotics Stack Exchange</a>
  </h4>
  {{/has_more}}
  
</script>

<script type="text/javascript" src="/js/mustache.js"></script>
<script type="text/javascript">
  jQuery(function() {
    jQuery.getJSON(url="https://api.stackexchange.com/2.3/questions?order=desc&site=robotics" +
                       "&tagged=moveit_ros_trajectory_cache&pagesize=50&sort=activity")
    .done(function(feed) {
      if (feed.items.length > 0) {
        var question_count_str = (feed.has_more ? '>' : '') + String(feed.items.length)
        const questions = feed.items.map(
          function(question) {
            question.id = Math.round(Math.random() * 99999.0);
            question.created = (new Date(question.creation_date * 1000)).toDateString()
            question.active = (new Date(question.last_activity_date * 1000)).toDateString()
            question.answered = question.is_answered ? "Yes" : "No"
            question.strtags = question.tags.join(' ')
            return question;
          });
        const template = jQuery("#question-list-template").text();
        Mustache.parse(template);
        var rendered = Mustache.render(
          template, 
          { questions: questions,
            has_more: feed.has_more,
            name: "moveit_ros_trajectory_cache"
          }
        );
      }
      //   TODO(tfoote) Resolve images
      //   jQuery("#-question-list img").each(function() {
      //     if (jQuery(this).attr("src").startsWith("/upfiles")) {
      //        jQuery(this).attr("src", "https://answers.ros.org" + jQuery(this).attr("src"));
      //     }
      //   });
      
      if (feed.items.length > 0) {
        jQuery("#humble-question-list").html(rendered);
        jQuery("#humble-question-list").show();
      } else {
        jQuery("#humble-no-question-list").show();
      }
      jQuery("#humble-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#jazzy-question-list").html(rendered);
        jQuery("#jazzy-question-list").show();
      } else {
        jQuery("#jazzy-no-question-list").show();
      }
      jQuery("#jazzy-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#kilted-question-list").html(rendered);
        jQuery("#kilted-question-list").show();
      } else {
        jQuery("#kilted-no-question-list").show();
      }
      jQuery("#kilted-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#rolling-question-list").html(rendered);
        jQuery("#rolling-question-list").show();
      } else {
        jQuery("#rolling-no-question-list").show();
      }
      jQuery("#rolling-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#github-question-list").html(rendered);
        jQuery("#github-question-list").show();
      } else {
        jQuery("#github-no-question-list").show();
      }
      jQuery("#github-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#noetic-question-list").html(rendered);
        jQuery("#noetic-question-list").show();
      } else {
        jQuery("#noetic-no-question-list").show();
      }
      jQuery("#noetic-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#galactic-question-list").html(rendered);
        jQuery("#galactic-question-list").show();
      } else {
        jQuery("#galactic-no-question-list").show();
      }
      jQuery("#galactic-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#iron-question-list").html(rendered);
        jQuery("#iron-question-list").show();
      } else {
        jQuery("#iron-no-question-list").show();
      }
      jQuery("#iron-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#melodic-question-list").html(rendered);
        jQuery("#melodic-question-list").show();
      } else {
        jQuery("#melodic-no-question-list").show();
      }
      jQuery("#melodic-questions-count").text(question_count_str);
      
    })
    .fail(function(jqxhr, textStatus, error) {
      console.error("Failed to get question data: " + jqxhr.responseText);
      
      jQuery("#humble-get-question-fail").show();
      
      jQuery("#jazzy-get-question-fail").show();
      
      jQuery("#kilted-get-question-fail").show();
      
      jQuery("#rolling-get-question-fail").show();
      
      jQuery("#github-get-question-fail").show();
      
      jQuery("#noetic-get-question-fail").show();
      
      jQuery("#galactic-get-question-fail").show();
      
      jQuery("#iron-get-question-fail").show();
      
      jQuery("#melodic-get-question-fail").show();
      
    });
  });
</script>


<script type="text/javascript">
  $(document).ready(function() {
    setupDistroSwitch("humble");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
