<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Package: otter_ros</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/p/otter_ros/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top: 20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/?search_packages=true">Packages</a></li>
        <li class="active">otter_ros</li>
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-default" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-default" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-default" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-default" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-primary" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class="disabled older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>humble</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>jazzy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>kilted</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>rolling</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/otter_ros">otter_ros</a> <small>package from <a style="text-decoration:none" href="/r/otter_ros/github-offroad-robotics-otter_ros">otter_ros</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/otter_control">

otter_control
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/otter_msgs">

otter_msgs
</a>
            
          
            
            
              <span class="label label-default pkg-label">

otter_ros
</span>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/github/p/otter_ros"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/offroad-robotics/otter_ros/tree/main/otter_ros"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="github-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#github-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#github-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#github-deps" data-toggle="tab"><span class="label label-primary">6</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#github-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#github-questions" data-toggle="tab"><span id="github-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="github-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>1.0.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>MIT license</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_PYTHON</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">A ROS 2 package for advanced robotics with the Otter USV from Maritime Robotics</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/offroad-robotics/otter_ros.git">https://github.com/offroad-robotics/otter_ros.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-05-08
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNKNOWN
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">robotics</span> <span class="label label-default">usv</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/otter_ros/#github-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/otter_ros/#github-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/otter_ros/#github-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            This package is used to interface with the Maritime Robotics Otter platform using
    ROS2.
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Riley Cooper (Offroad Robotics  <AT>  Ingenuity Labs)</li>
                
                  <li>Sabrina Button (Offroad Robotics  <AT>  Ingenuity Labs)</li>
                
                  <li>Thomas Sears (Offroad Robotics  <AT>  Ingenuity Labs)</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <em>No additional authors.</em>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/offroad-robotics/otter_ros/tree/main/otter_ros/README.md" title="Open in git repository">otter_ros/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="otter-ros">Otter ROS</h1>

<h2 id="overview">Overview</h2>

<p><img src="https://i.imgur.com/4PBpnlb.png" alt="Otter ROS Logo" width="200"></p>

<p>Otter ROS is a ROS2 driver for the Maritime Robotics Otter USV, intended to be run on a secondary computer system to communicate with the proprietary hardware on the vessel. It is intended for research purposes and in development by the Offroad Robotics research group at Ingenuity Labs at Queen’s University.</p>

<p>Please see accompanying message package <a href="https://code.engineering.queensu.ca/offroad/otter-msgs">Otter Msgs</a> for more information on custom messages used in Otter ROS.</p>

<p>A few controllers have also been included that are based on the work of Thor I. Fossen in the book <em>Handbook of Marine Craft Hydrodynamics and Motion Control</em> and his accompanying <a href="https://github.com/cybergalactic/MSS">MatLab simulator</a> <em>Marine Systems Simulator</em> (<strong>MSS</strong>) and <a href="https://github.com/cybergalactic/PythonVehicleSimulator">Python simulator</a> <em>PythonVehicleSimulator</em>.</p>

<p><strong>Ensure communications with the Otter USV before launching Otter ROS.</strong> Edit config/otter_params.yaml to match networking setup.</p>

<p><strong>Keywords:</strong> otter usv, usv driver, maritime robotics, ros2, python, nmea, navigation, control</p>

<h3 id="license">License</h3>

<p>The source code is presently unlicensed.</p>

<p><strong>Authors: Riley Cooper, Sabrina Button, Thomas Sears, Joshua Marshall<br>
Acknowledgements: Thor I. Fossen<br>
Affiliation: <a href="https://offroad.engineering.queensu.ca/">Offroad Robotics, Queen’s University</a><br>
Maintainer: Sabrina Button, sabrina.button@queensu.ca</strong></p>

<p>The Otter ROS package has been tested under <a href="http://www.ros.org">ROS2</a> Foxy on Ubuntu 20.04, interfaced with a Maritime Robotics Otter USV equipped with a VLP-16 LiDAR. This is research code, expect that it changes often and any fitness for a particular purpose is disclaimed.</p>

<h2 id="installation">Installation</h2>

<h3 id="building-from-source">Building from Source</h3>

<h4 id="dependencies">Dependencies</h4>

<ul>
  <li>
<a href="http://wiki.ros.org">Robot Operating System 2 (ROS2)</a> (middleware for robotics),</li>
  <li>
    <p><a href="https://github.com/ros-drivers/velodyne">Velodyne</a> (LiDAR driver) - <em>OPTIONAL</em>, remove from launch files if not using</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  sudo rosdep install --from-paths src
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="building">Building</h4>

<p>To build from source, clone the latest version from this repository into your catkin workspace and compile the package using</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd ros2_ws/src
git clone https://code.engineering.queensu.ca/offroad/otter-ros.git
cd ../
rosdep install --from-paths . --ignore-src
colcon build
</code></pre></div></div>

<h2 id="usage">Usage</h2>

<p>Run the main nodes (+ velodyne driver) with</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch otter_ros otter_launch_base.py
</code></pre></div></div>

<h2 id="nmea-input">NMEA Input</h2>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">MARGPS</code></strong>: otter lat, lon, alt, sog, cog, hog</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">MARIMU</code></strong>: otter roll, pitch, yaw, p,q,r</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">MAROTR</code></strong>: otter port and starboard motor rpm, temp and power, as well as total power and number of batteries</li>
</ul>

<h2 id="config-files">Config files</h2>

<h3 id="otter_paramsyaml">otter_params.yaml</h3>

<p>This file contains the parameters for the Otter ROS driver. The default values are set for the Otter USV. The parameters are:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">socket</code></strong>: entry socket for otter, defaults to 2009</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">ip_address</code></strong>: ip for otter, defaults to</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">frame_id</code></strong>: frame id for the odometry messages</li>
</ul>

<h3 id="ekf_with_gpsyaml">ekf_with_gps.yaml</h3>

<p>This file contains the parameters for the robot_localization navsat transform. The default values are set for the Otter USV. The most important parameter is:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">magnetic_declination</code></strong>: magnetic declination of the USV’s operating environment, defaults to 0.141953445247 (Kingston, Ontario, July 2023)</li>
</ul>

<h2 id="launch-files">Launch files</h2>

<p>This folder contains launch files for the <strong>otter_ros</strong> package.</p>

<ul>
  <li>
    <p><strong>otter_launch_nmpc:</strong> launches pub,sub for otter and an NMPC controller node developed by Riley Cooper.</p>

    <ul>
      <li>
<strong><code class="language-plaintext highlighter-rouge">autobag</code></strong>: records all topics to a bag file by default. Set to false to disable.</li>
      <li>
<strong><code class="language-plaintext highlighter-rouge">bag_name</code></strong>: name of bag file to record to. Defaults to “/mnt/data/otter_ros_default_bag”.</li>
      <li>
<strong><code class="language-plaintext highlighter-rouge">wpt_file</code></strong>: path to waypoint file. Defaults to None.</li>
    </ul>
  </li>
  <li>
<strong>otter_sys_id_test_launch:</strong> a launch file created for testing in dec 2021 and launches the test plan file created for this testing on top of pub, sub for the otter.</li>
  <li>
<strong>otter_heading_control_launch:</strong> launches pub,sub for otter and a controller node.</li>
  <li>
<strong>otter_navsat_transform_launch:</strong> launches a navsat transform for the otter which converts otter_imu and otter_gps to an otter_odom Odometry message. Should be launched concurrently with otter_launch.</li>
</ul>

<h2 id="nodes">Nodes</h2>

<h3 id="otter_publisher">otter_publisher</h3>

<p>This node handles all the data being transmitted from the Otter OBS system. The data comes over TCP port 2009 (by default).</p>

<h4 id="published-topics">Published Topics</h4>

<ul>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">/otter_status</code></strong> (<a href="https://code.engineering.queensu.ca/offroad/otter-msgs/-/blob/master/msg/OtterStatus.msg">otter_msgs/OtterStatus</a>): MAROTR data</p>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">/otter_cogsog</code></strong> (<a href="https://code.engineering.queensu.ca/offroad/otter-msgs/-/blob/master/msg/COGSOG.msg">otter_msgs/COGSOG</a>): Course over ground, speed over ground, and resultant twist x, y vector</p>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">/otter_gps</code></strong> (<a href="https://docs.ros.org/en/api/sensor_msgs/html/msg/NavSatFix.html">sensor_msgs/NavSatFix</a>): GPS lat, long, alt</p>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">/otter_imu</code></strong> (<a href="https://docs.ros.org/en/api/sensor_msgs/html/msg/Imu.html">sensor_msgs/Imu</a>): orientation and angular velocities</p>
  </li>
</ul>

<h3 id="otter_subscriber">otter_subscriber</h3>

<p>This is a file that handles sending data to the otter. As of now, it will only send force in x and torque in z commands to the otter via the manual command. Additional commands may be added later. It also publishes time stamped versions of the data for logging so that the time stamp is as accurate as possible to when the command is being sent out for logging purposes.</p>

<h4 id="subscribed-topics">Subscribed Topics</h4>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">/control_commands</code></strong> (<a href="https://docs.ros.org/en/api/geometry_msgs/html/msg/WrenchStamped.html">geometry_msgs/WrenchStamped</a>): force and torque of Otter motors. Only populated parameters should be “force.x” and “torque.z”.</li>
</ul>

<h3 id="nmpc_controller">nmpc_controller</h3>

<p>This is a node that implements a nonlinear model predictive controller (NMPC) for the Otter USV. It is based on the work of Thor I. Fossen in the book <em>Handbook of Marine Craft Hydrodynamics and Motion Control</em> and his accompanying MatLab simulator.</p>

<h4 id="subscribed-topics-1">Subscribed Topics</h4>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">/otter_odom</code></strong> (<a href="https://docs.ros.org/en/api/nav_msgs/html/msg/Odometry.html">nav_msgs/Odometry</a>): Odometry message containing the Otter’s COG (float64) and SOG (float64) for convenience, though this information is also available in /otter_odom using trigonometry on twist x and y.</li>
</ul>

<h4 id="published-topics-1">Published Topics</h4>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">/control_commands</code></strong> (<a href="https://docs.ros.org/en/api/geometry_msgs/html/msg/WrenchStamped.html">geometry_msgs/WrenchStamped</a>): force and torque of Otter motors. Only populated parameters should be “force.x” and “torque.z”.</li>
</ul>

<h3 id="otter_logger">otter_logger</h3>

<p>This file contains a node which subscribes to all the data being recorded by the otter and all data being sent to the otter. It then formats it nicely into a csv file for offline analysis. By default, it is set up to save the csv files in a folder called “csv_logs” in the workspace folder. This can be changed and modified by editing the _path variable in the main function of this file.</p>

<h4 id="subscribed-topics-2">Subscribed Topics</h4>

<ul>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">/otter_odom</code></strong> (<a href="https://docs.ros.org/en/api/nav_msgs/html/msg/Odometry.html">nav_msgs/Odometry</a>): Odometry message containing the Otter’s COG (float64) and SOG (float64) for convenience, though this information is also available in /otter_odom using trigonometry on twist x and y.</p>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">/otter_status</code></strong> (<a href="https://code.engineering.queensu.ca/offroad/otter-msgs/-/blob/master/msg/OtterStatus.msg">otter_msgs/OtterStatus</a>): MAROTR data</p>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">/otter_cogsog</code></strong> (<a href="https://code.engineering.queensu.ca/offroad/otter-msgs/-/blob/master/msg/COGSOG.msg">otter_msgs/COGSOG</a>): Course over ground, speed over ground, and resultant twist x, y vector</p>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">/otter_gps</code></strong> (<a href="https://docs.ros.org/en/api/sensor_msgs/html/msg/NavSatFix.html">sensor_msgs/NavSatFix</a>): GPS lat, long, alt</p>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">/otter_imu</code></strong> (<a href="https://docs.ros.org/en/api/sensor_msgs/html/msg/Imu.html">sensor_msgs/Imu</a>): orientation and angular velocities</p>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">/control_commands</code></strong> (<a href="https://docs.ros.org/en/api/geometry_msgs/html/msg/WrenchStamped.html">geometry_msgs/WrenchStamped</a>): force and torque of Otter motors. Only populated parameters should be “force.x” and “torque.z”.</p>
  </li>
</ul>

<h2 id="embedded-package-pynmeagps">Embedded Package: pynmeagps</h2>

<p>This is a python package that interprets NMEA messages. NMEA is a commonly used standardized message format that the Otter uses for its message structure over the system’s local network.
The package has been modified to include the proprietary messages from Maritime Robotics. The
messages included are outlined in the <strong>Otter External control interface</strong> document provided by Maritime Robotics.<br>
<em>Disclaimer:</em> There may be some messages that are not included as Maritime Robotics continues to add more commands to their system. All of the commands available at the time this project was created are included.<br>
The modified files from the package are listed below and a modified version of the package is included in the <em>pynmeagps</em> folder.
To use this package you can add a default version of it to your python distribution using pip or a similar process, then find the install folder and add/replace the files with the modified files in this project or add my changes to the appropriate files.</p>

<ul>
  <li>
<strong>nmeatypes_core.py</strong>: added PMAR as a talker</li>
  <li>
<strong>nmeatypes_get.py</strong>: added all of the messages coming from the Otter (e.g. GPS, IMU, etc)</li>
  <li>
<strong>nmeatypes_set.py</strong>: added all of the messages going to the Otther (e.g. ABT, MAN, etc)</li>
</ul>

<h2 id="odometry-with-robot_localization-navsat-transform-experimental">odometry with robot_localization navsat transform (experimental)</h2>

<p>This package uses <a href="https://github.com/offroad-robotics/otter_ros/tree/main/otter_ros/docs.ros.org/en/melodic/api/robot_localization/html">robot_localization</a> to create an Odometry message using the Otter’s GPS and IMU. You can launch the navsat transform with the other nodes via <code class="language-plaintext highlighter-rouge">ros2 launch otter_ros otter_navsat_transform_launch.py</code>. The package is configured to work in Kingston Ontario; which has a magnetic declination of 8.13 degrees (0.141953445247 radians) as of July 2023. Before use, change parameter “magnetic_declination” in config/ekf_with_gps.yaml to the <a href="https://www.ngdc.noaa.gov/geomag/calculators/magcalc.shtml?#declination">magnetic declination</a> of your USV’s operating environment. This aspect of the package has not been formally tested and is still under development</p>

<h4 id="subscribed-topics-3">Subscribed Topics</h4>

<ul>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">/otter_gps</code></strong> (<a href="https://docs.ros.org/en/api/sensor_msgs/html/msg/NavSatFix.html">sensor_msgs/NavSatFix</a>): GPS lat, long, alt</p>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">/otter_imu</code></strong> (<a href="https://docs.ros.org/en/api/sensor_msgs/html/msg/Imu.html">sensor_msgs/Imu</a>): orientation and angular velocities</p>
  </li>
</ul>

<h4 id="published-topics-2">Published Topics</h4>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">/otter_odom</code></strong>: Odometry message containing the Otter’s position in a local frame as derived by GPS and IMU data</li>
</ul>

<h2 id="bugs--feature-requests">Bugs &amp; Feature Requests</h2>

<p>Please report bugs and request features using the <a href="https://code.engineering.queensu.ca/offroad/otter-ros/-/issues">Issue Tracker</a>.</p>

<h3 id="roadmap">Roadmap</h3>

<ul class="task-list">
  <li class="task-list-item">
<input type="checkbox" class="task-list-item-checkbox" disabled>Add support for more custom Otter messages</li>
  <li class="task-list-item">
<input type="checkbox" class="task-list-item-checkbox" disabled>Add support for more controllers</li>
  <li class="task-list-item">
<input type="checkbox" class="task-list-item-checkbox" disabled>Add support for more input to the Otter</li>
  <li class="task-list-item">
<input type="checkbox" class="task-list-item-checkbox" disabled>Add support for camera output from the Otter</li>
  <li class="task-list-item">
<input type="checkbox" class="task-list-item-checkbox" disabled>Add flexiblity in config files to incorporate (or toggle use of) more sensors</li>
</ul>

</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <em>No CHANGELOG found.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/otter_ros/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/otter_msgs#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/otter_msgs#github">otter_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ros2launch#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ros2launch#github">ros2launch  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_copyright#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_copyright#github">ament_copyright  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_flake8#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_flake8#github">ament_flake8  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_pep257#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_pep257#github">ament_pep257  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/python3-pytest">python3-pytest</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/otter_control#github">otter_control</a></td>
                      <td class="text-center">
                        
                        <a href="/p/otter_control#github-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>otter_ros</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="github-question-list" class="panel-body" style="display: none;"></div>
      <div id="github-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/otter_ros+github">here</a>.</p>
      </div>
      <div id="github-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/offroad-robotics/otter_ros.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/github/p/otter_ros"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/offroad-robotics/otter_ros/tree/main/otter_ros"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>iron</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>



<script id="question-list-template" type="text/html">
  <p>
    Browse <a href="https://robotics.stackexchange.com/questions/tagged/otter_ros?tab=Newest">recent questions</a>
    or see the <a href="https://robotics.stackexchange.com/questions/tagged/otter_ros?tab=Votes">highest voted ones</a>.
  </p>
  
  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">Title</th>
        <th scope="col">Answered?</th>
        <th scope="col">Created</th>
        <th scope="col">Active</th>
      </tr>
    </thead>
    <tbody>
      {{#questions}}
      <tr>
        <th scope="row"><a href="{{link}}">{{title}}</a><br><small>Tags: {{strtags}}</small></th>
        <th>{{answered}}</th>
        <th>{{created}}</th>
        <th>{{active}}</th>
      </tr>
      {{/questions}}
    </tbody>
  </table>
  {{#has_more}}
  <hr>
  <h4>Additional questions are available at
    <a href="https://robotics.stackexchange.com/questions/tagged/{{name}}?tab=Newest">Robotics Stack Exchange</a>
  </h4>
  {{/has_more}}
  
</script>

<script type="text/javascript" src="/js/mustache.js"></script>
<script type="text/javascript">
  jQuery(function() {
    jQuery.getJSON(url="https://api.stackexchange.com/2.3/questions?order=desc&site=robotics" +
                       "&tagged=otter_ros&pagesize=50&sort=activity")
    .done(function(feed) {
      if (feed.items.length > 0) {
        var question_count_str = (feed.has_more ? '>' : '') + String(feed.items.length)
        const questions = feed.items.map(
          function(question) {
            question.id = Math.round(Math.random() * 99999.0);
            question.created = (new Date(question.creation_date * 1000)).toDateString()
            question.active = (new Date(question.last_activity_date * 1000)).toDateString()
            question.answered = question.is_answered ? "Yes" : "No"
            question.strtags = question.tags.join(' ')
            return question;
          });
        const template = jQuery("#question-list-template").text();
        Mustache.parse(template);
        var rendered = Mustache.render(
          template, 
          { questions: questions,
            has_more: feed.has_more,
            name: "otter_ros"
          }
        );
      }
      //   TODO(tfoote) Resolve images
      //   jQuery("#-question-list img").each(function() {
      //     if (jQuery(this).attr("src").startsWith("/upfiles")) {
      //        jQuery(this).attr("src", "https://answers.ros.org" + jQuery(this).attr("src"));
      //     }
      //   });
      
      if (feed.items.length > 0) {
        jQuery("#humble-question-list").html(rendered);
        jQuery("#humble-question-list").show();
      } else {
        jQuery("#humble-no-question-list").show();
      }
      jQuery("#humble-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#jazzy-question-list").html(rendered);
        jQuery("#jazzy-question-list").show();
      } else {
        jQuery("#jazzy-no-question-list").show();
      }
      jQuery("#jazzy-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#kilted-question-list").html(rendered);
        jQuery("#kilted-question-list").show();
      } else {
        jQuery("#kilted-no-question-list").show();
      }
      jQuery("#kilted-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#rolling-question-list").html(rendered);
        jQuery("#rolling-question-list").show();
      } else {
        jQuery("#rolling-no-question-list").show();
      }
      jQuery("#rolling-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#github-question-list").html(rendered);
        jQuery("#github-question-list").show();
      } else {
        jQuery("#github-no-question-list").show();
      }
      jQuery("#github-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#noetic-question-list").html(rendered);
        jQuery("#noetic-question-list").show();
      } else {
        jQuery("#noetic-no-question-list").show();
      }
      jQuery("#noetic-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#galactic-question-list").html(rendered);
        jQuery("#galactic-question-list").show();
      } else {
        jQuery("#galactic-no-question-list").show();
      }
      jQuery("#galactic-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#iron-question-list").html(rendered);
        jQuery("#iron-question-list").show();
      } else {
        jQuery("#iron-no-question-list").show();
      }
      jQuery("#iron-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#melodic-question-list").html(rendered);
        jQuery("#melodic-question-list").show();
      } else {
        jQuery("#melodic-no-question-list").show();
      }
      jQuery("#melodic-questions-count").text(question_count_str);
      
    })
    .fail(function(jqxhr, textStatus, error) {
      console.error("Failed to get question data: " + jqxhr.responseText);
      
      jQuery("#humble-get-question-fail").show();
      
      jQuery("#jazzy-get-question-fail").show();
      
      jQuery("#kilted-get-question-fail").show();
      
      jQuery("#rolling-get-question-fail").show();
      
      jQuery("#github-get-question-fail").show();
      
      jQuery("#noetic-get-question-fail").show();
      
      jQuery("#galactic-get-question-fail").show();
      
      jQuery("#iron-get-question-fail").show();
      
      jQuery("#melodic-get-question-fail").show();
      
    });
  });
</script>


<script type="text/javascript">
  $(document).ready(function() {
    setupDistroSwitch("humble");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
