<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Package: nav2_smac_planner</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/p/nav2_smac_planner/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top: 20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/?search_packages=true">Packages</a></li>
        <li class="active">nav2_smac_planner</li>
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-primary" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-primary" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-default" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-default" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-primary" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class=" older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class=" older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/nav2_smac_planner">nav2_smac_planner</a> <small>package from <a style="text-decoration:none" href="/r/navigation2/github-ros-planning-navigation2">navigation2</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_amcl">

nav2_amcl
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_behavior_tree">

nav2_behavior_tree
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_behaviors">

nav2_behaviors
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_bringup">

nav2_bringup
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_bt_navigator">

nav2_bt_navigator
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_collision_monitor">

nav2_collision_monitor
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_common">

nav2_common
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_constrained_smoother">

nav2_constrained_smoother
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_controller">

nav2_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_core">

nav2_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_costmap_2d">

nav2_costmap_2d
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/costmap_queue">

costmap_queue
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_core">

dwb_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_critics">

dwb_critics
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_msgs">

dwb_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_plugins">

dwb_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_dwb_controller">

nav2_dwb_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav_2d_msgs">

nav_2d_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav_2d_utils">

nav_2d_utils
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_graceful_controller">

nav2_graceful_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_lifecycle_manager">

nav2_lifecycle_manager
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_map_server">

nav2_map_server
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_mppi_controller">

nav2_mppi_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_msgs">

nav2_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_navfn_planner">

nav2_navfn_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_planner">

nav2_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_regulated_pure_pursuit_controller">

nav2_regulated_pure_pursuit_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_rotation_shim_controller">

nav2_rotation_shim_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_rviz_plugins">

nav2_rviz_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_simple_commander">

nav2_simple_commander
</a>
            
          
            
            
              <span class="label label-default pkg-label">

nav2_smac_planner
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_smoother">

nav2_smoother
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_system_tests">

nav2_system_tests
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_theta_star_planner">

nav2_theta_star_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_util">

nav2_util
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_velocity_smoother">

nav2_velocity_smoother
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_voxel_grid">

nav2_voxel_grid
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_waypoint_follower">

nav2_waypoint_follower
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/navigation2">

navigation2
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/humble/p/nav2_smac_planner"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/ros-planning/navigation2/tree/humble/nav2_smac_planner"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="humble-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#humble-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#humble-assets" data-toggle="tab"><span class="label label-primary">3</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#humble-deps" data-toggle="tab"><span class="label label-primary">24</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#humble-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#humble-questions" data-toggle="tab"><span id="humble-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="humble-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>1.1.18</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache-2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS 2 Navigation Framework and System</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-planning/navigation2.git">https://github.com/ros-planning/navigation2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">humble</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-05-03
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">robotics</span> <span class="label label-default">navigation</span> <span class="label label-default">ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/navigation2/#humble-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/navigation2/#humble-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/navigation2/#humble-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Smac global planning plugin: A*, Hybrid-A*, State Lattice
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Steve Macenski</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <em>No additional authors.</em>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/ros-planning/navigation2/tree/humble/nav2_smac_planner/README.md" title="Open in git repository">nav2_smac_planner/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="smac-planner">Smac Planner</h1>

<p>The SmacPlanner is a plugin for the Nav2 Planner server. It includes currently 3 distinct plugins:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code>: a highly optimized fully reconfigurable Hybrid-A* implementation supporting Dubin and Reeds-Shepp models (legged, ackermann and car models).</li>
  <li>
<code class="language-plaintext highlighter-rouge">SmacPlannerLattice</code>: a highly optimized fully reconfigurable State Lattice implementation supporting configurable minimum control sets, with provided control sets for Ackermann, Legged, Differential and Omnidirectional models.</li>
  <li>
<code class="language-plaintext highlighter-rouge">SmacPlanner2D</code>: a highly optimized fully reconfigurable grid-based A* implementation supporting 8-connected neighborhood models.</li>
</ul>

<p>It also introduces the following basic building blocks:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">CostmapDownsampler</code>: A library to take in a costmap object and downsample it to another resolution.</li>
  <li>
<code class="language-plaintext highlighter-rouge">AStar</code>: A generic and highly optimized A* template library used by the planning plugins to search. Additional template for  planning also could be made available using it.</li>
  <li>
<code class="language-plaintext highlighter-rouge">CollisionChecker</code>: Collision check based on a robot’s radius or footprint.</li>
  <li>
<code class="language-plaintext highlighter-rouge">Smoother</code>: A simple path smoother to smooth out 2D, Hybrid-A*, and State Lattice paths.</li>
</ul>

<p>We have users reporting using this on:</p>
<ul>
  <li>Delivery robots</li>
  <li>Industrial robots</li>
  <li>Vertical farming</li>
  <li>Solar farms</li>
</ul>

<p>See its <a href="https://navigation.ros.org/configuration/packages/configuring-smac-planner.html">Configuration Guide Page</a> for additional parameter descriptions.</p>

<h2 id="introduction">Introduction</h2>

<p>The <code class="language-plaintext highlighter-rouge">nav2_smac_planner</code> package contains an optimized templated A* search algorithm used to create multiple A*-based planners for multiple types of robot platforms. It was built by <a href="https://www.linkedin.com/in/steve-macenski-41a985101/">Steve Macenski</a> while at <a href="https://www.sra.samsung.com/">Samsung Research</a>. We support <strong>circular</strong> differential-drive and omni-directional drive robots using the <code class="language-plaintext highlighter-rouge">SmacPlanner2D</code> planner which implements a cost-aware A* planner. We support <strong>legged, cars, car-like, and ackermann vehicles</strong> using the <code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code> plugin which implements a Hybrid-A* planner.  We support <strong>non-circular, arbitrary shaped, any model vehicles</strong> using the <code class="language-plaintext highlighter-rouge">SmacPlannerLattice</code> plugin which implements a State Lattice planner. It contains control sets and generators for ackermann, legged, differential drive and omnidirectional vehicles, but you may provide your own for another robot type or to have different planning behaviors. The last two plugins are also useful for curvature constrained or kinematically feasible planning, like when planning robot at high speeds to make sure they don’t flip over or otherwise skid out of control. It is also applicable to non-round robots (such as large rectangular or arbitrary shaped robots of differential/omnidirectional drivetrains) that need pose-based collision checking.</p>

<p>The <code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code> implements the Hybrid-A* planner as proposed in <a href="https://ai.stanford.edu/~ddolgov/papers/dolgov_gpp_stair08.pdf">Practical Search Techniques in Path Planning for Autonomous Driving</a>, with modifications to the heuristic, traversal functions to increase path quality without needing expensive optimization-based smoothing.</p>

<p>The <code class="language-plaintext highlighter-rouge">SmacPlannerLattice</code> implements the State Lattice planner. While we do not implement it precisely the same way as <a href="https://www.ri.cmu.edu/pub_files/pub4/pivtoraiko_mihail_2007_1/pivtoraiko_mihail_2007_1.pdf">Optimal, Smooth, Nonholonomic MobileRobot Motion Planning in State Lattices</a> (with control sets found using <a href="https://www.ri.cmu.edu/pub_files/pub4/pivtoraiko_mihail_2005_1/pivtoraiko_mihail_2005_1.pdf">Generating Near Minimal Spanning Control Sets for Constrained Motion Planning in Discrete State Spaces</a>), it is sufficiently similar it may be used as a good reference. Additional optimizations for on-approach analytic expansions and improved heuristic functions were used, largely matching those of Hybrid-A* to allow them to share these optimized implementations to drive search towards the goal, faster.</p>

<p>In summary…</p>

<p>The <code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code> is designed to work with:</p>
<ul>
  <li>Ackermann, car, and car-like robots</li>
  <li>High speed or curvature constrained robots (as to not flip over, skid, or dump load at high speeds)</li>
  <li>Arbitrary shaped, non-circular differential or omnidirectional robots requiring kinematically feasible planning with SE2 collision checking</li>
  <li>Legged robots</li>
</ul>

<p>The <code class="language-plaintext highlighter-rouge">SmacPlannerLattice</code> is designed to work with:</p>
<ul>
  <li>Arbitrary shaped, non-circular robots requiring kinematically feasible planning with SE2 collision checking using the full capabilities of the drivetrain</li>
  <li>Flexibility to use other robot model types or with provided non-circular differential, ackermann, and omni support</li>
</ul>

<p>The <code class="language-plaintext highlighter-rouge">SmacPlanner2D</code> is designed to work with:</p>
<ul>
  <li>Circular, differential or omnidirectional robots</li>
  <li>Relatively small robots with respect to environment size (e.g. RC car in a hallway or large robot in a convention center) that can be approximated by circular footprint.</li>
</ul>

<h2 id="features">Features</h2>

<p>We further improve on Hybrid-A* in the following ways:</p>
<ul>
  <li>Remove need for upsampling by searching with 10x smaller motion primitives (same as their upsampling ratio).</li>
  <li>Multi-resolution search allowing planning to occur at a coarser resolution for wider spaces (O(N^2) faster).</li>
  <li>Cost-aware penalty functions in search resulting in far smoother plans (further reducing requirement to smooth).</li>
  <li>Gradient-descent, basic but fast smoother</li>
  <li>Faster planning than original paper by highly optimizing the template A* algorithm.</li>
  <li>Faster planning via custom precomputed heuristic, motion primitive, and other functions.</li>
  <li>Automatically adjusted search motion model sizes by motion model, costmap resolution, and bin sizing.</li>
  <li>Closest path on approach within tolerance if exact path cannot be found or in invalid space.</li>
  <li>Multi-model hybrid searching including Dubin and Reeds-Shepp models. More models may be trivially added.</li>
  <li>High unit and integration test coverage, doxygen documentation.</li>
  <li>Uses modern C++14 language features and individual components are easily reusable.</li>
  <li>Speed optimizations: no data structure graph lookups in main loop, near-zero copy main loop, dynamically generated graph and dynamic programming-based obstacle heuristic, optional recomputation of heuristics for subsequent planning requests of the same goal, etc.</li>
  <li>Templated Nodes and A* implementation to support additional robot extensions.</li>
  <li>Selective re-evaluation of the obstacle heuristic per goal/map or each iteration, which can speed up subsequent replanning 20x or more.</li>
</ul>

<p>Most of these features (multi-resolution, models, smoother, etc) are also available in the <code class="language-plaintext highlighter-rouge">SmacPlanner2D</code> and <code class="language-plaintext highlighter-rouge">SmacPlannerLattice</code> plugins.</p>

<p>The 2D A* implementation also does not have any of the weird artifacts introduced by the gradient wavefront-based 2D A* implementation in the NavFn Planner. While this 2D A* planner is slightly slower, I believe it’s well worth the increased quality in paths.</p>

<p>Note: In prior releases, a CG smoother largely implementing the original Hybrid-A* paper’s. However, this smoother failed to consistently provide useful results, took too much compute time, and was deprecated. While smoothing a path 95% of the time seems like a “good” solution, we need something far more reliable for practical use. Since we are working with mobile robots and not autonomous cars at 60 mph, we can take some different liberties in smoothing knowing that our local trajectory planners are pretty smart. If you are looking for it, it now lives in the new Smoothing Server as the Cost-aware smoother. This smoother has been replaced by a simpler optimization inspired solution which is faster, far more consistent, and simpler to understand. While this smoother is <strong>not</strong> cost-aware, we have added cost-aware penalty functions in the planners themselves to push the plans away from high-cost spaces and we do check for validity of smoothed sections to ensure feasibility. It will through terminate when paths become in collision with the environment. If you would like to use this smoother, however, it is available in the smoother server, though it will take some additional compute time.</p>

<h2 id="metrics">Metrics</h2>

<p>The original Hybrid-A* implementation boasted planning times of 50-300ms for planning across 102,400 cell maps with 72 angular bins. We see much faster results in our evaluations:</p>

<ul>
  <li>
<strong>2-20ms</strong> for planning across 147,456 (1.4x larger) cell maps with 72 angular bins.</li>
  <li>
<strong>30-200ms</strong> for planning across 344,128 (3.3x larger) cell map with 72 angular bins.</li>
</ul>

<p>An example of the 3 planners can be seen below, planning a roughly 75 m path.</p>
<ul>
  <li>2D A* computed the path in 243ms (Panel 1)</li>
  <li>Hybrid-A* computed the path in 144ms (Panel 2)</li>
  <li>State Lattice computed the path in 113ms (Panel 3)</li>
  <li>For reference: NavFn compute the path in 146ms, including some nasty path discontinuity artifacts</li>
</ul>

<p><img src="https://raw.githubusercontent.com/ros-planning/navigation2/humble/nav2_smac_planner/test/3planners.png" alt="alt text"></p>

<h2 id="design">Design</h2>

<p>The basic design centralizes a templated A* implementation that handles the search of a graph of nodes. The implementation is templated by the nodes, <code class="language-plaintext highlighter-rouge">NodeT</code>, which contain the methods needed to compute the hueristics, travel costs, and search neighborhoods. The outcome of this design is then a standard A* implementation that can be used to traverse any type of graph as long as a node template can be created for it.</p>

<p>We provide 3 nodes by default currently. The 2D node template (<code class="language-plaintext highlighter-rouge">Node2D</code>) which does 2D grid-search with either 4 or 8-connected neighborhoods. We also provide a Hybrid A* node template (<code class="language-plaintext highlighter-rouge">NodeHybrid</code>) which does SE2 (X, Y, theta) search and collision checking on Dubin or Reeds-Shepp motion models. We also provide the Lattice (<code class="language-plaintext highlighter-rouge">NodeLattice</code>) node for state lattice planning making use of the wider range of velocity options available to differential and omnidirectional robots. Additional templates could be easily made and included for 3D grid search and non-grid base searching like routing.</p>

<p>In the ROS2 facing plugin, we take in the global goals and pre-process the data to feed into the templated A* used. This includes processing any requests to downsample the costmap to another resolution to speed up search and smoothing the resulting A* path (not available for State Lattice due to the lattices generated are dependent on costmap resolution). For the <code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code> and <code class="language-plaintext highlighter-rouge">SmacPlannerLattice</code> plugins, the path is promised to be kinematically feasible due to the kinematically valid models used in branching search. The 2D A* is also promised to be feasible for differential and omni-directional robots.</p>

<p>We isolated the A*, costmap downsampler, smoother, and Node template objects from ROS2 to allow them to be easily testable independently of ROS or the planner. The only place ROS is used is in the planner plugins themselves.</p>

<h2 id="parameters">Parameters</h2>

<p>See inline description of parameters in the <code class="language-plaintext highlighter-rouge">SmacPlanner</code>. This includes comments as specific parameters apply to <code class="language-plaintext highlighter-rouge">SmacPlanner2D</code> and <code class="language-plaintext highlighter-rouge">SmacPlanner</code> in place.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>planner_server:
  ros__parameters:
    planner_plugins: ["GridBased"]
    use_sim_time: True

    GridBased:
      plugin: "nav2_smac_planner/SmacPlannerHybrid"
      tolerance: 0.5                      # tolerance for planning if unable to reach exact pose, in meters
      downsample_costmap: false           # whether or not to downsample the map
      downsampling_factor: 1              # multiplier for the resolution of the costmap layer (e.g. 2 on a 5cm costmap would be 10cm)
      allow_unknown: false                # allow traveling in unknown space
      max_iterations: 1000000             # maximum total iterations to search for before failing (in case unreachable), set to -1 to disable
      max_on_approach_iterations: 1000    # maximum number of iterations to attempt to reach goal once in tolerance
      max_planning_time: 3.5              # max time in s for planner to plan, smooth, and upsample. Will scale maximum smoothing and upsampling times based on remaining time after planning.
      motion_model_for_search: "DUBIN"    # For Hybrid Dubin, Redds-Shepp
      cost_travel_multiplier: 2.0         # For 2D: Cost multiplier to apply to search to steer away from high cost areas. Larger values will place in the center of aisles more exactly (if non-`FREE` cost potential field exists) but take slightly longer to compute. To optimize for speed, a value of 1.0 is reasonable. A reasonable tradeoff value is 2.0. A value of 0.0 effective disables steering away from obstacles and acts like a naive binary search A*.
      angle_quantization_bins: 64         # For Hybrid nodes: Number of angle bins for search, must be 1 for 2D node (no angle search)
      analytic_expansion_ratio: 3.5       # For Hybrid/Lattice nodes: The ratio to attempt analytic expansions during search for final approach.
      analytic_expansion_max_length: 3.0    # For Hybrid/Lattice nodes: The maximum length of the analytic expansion to be considered valid to prevent unsafe shortcutting (in meters). This should be scaled with minimum turning radius and be no less than 4-5x the minimum radius
      minimum_turning_radius: 0.40        # For Hybrid/Lattice nodes: minimum turning radius in m of path / vehicle
      reverse_penalty: 2.1                # For Reeds-Shepp model: penalty to apply if motion is reversing, must be =&gt; 1
      change_penalty: 0.0                 # For Hybrid nodes: penalty to apply if motion is changing directions, must be &gt;= 0
      non_straight_penalty: 1.20          # For Hybrid nodes: penalty to apply if motion is non-straight, must be =&gt; 1
      cost_penalty: 2.0                   # For Hybrid nodes: penalty to apply to higher cost areas when adding into the obstacle map dynamic programming distance expansion heuristic. This drives the robot more towards the center of passages. A value between 1.3 - 3.5 is reasonable.
      retrospective_penalty: 0.025        # For Hybrid/Lattice nodes: penalty to prefer later maneuvers before earlier along the path. Saves search time since earlier nodes are not expanded until it is necessary. Must be &gt;= 0.0 and &lt;= 1.0
      rotation_penalty: 5.0               # For Lattice node: Penalty to apply only to pure rotate in place commands when using minimum control sets containing rotate in place primitives. This should always be set sufficiently high to weight against this action unless strictly necessary for obstacle avoidance or there may be frequent discontinuities in the plan where it requests the robot to rotate in place to short-cut an otherwise smooth path for marginal path distance savings.
      lookup_table_size: 20.0               # For Hybrid nodes: Size of the dubin/reeds-sheep distance window to cache, in meters.
      cache_obstacle_heuristic: True      # For Hybrid nodes: Cache the obstacle map dynamic programming distance expansion heuristic between subsiquent replannings of the same goal location. Dramatically speeds up replanning performance (40x) if costmap is largely static.  
      allow_reverse_expansion: False      # For Lattice nodes: Whether to expand state lattice graph in forward primitives or reverse as well, will double the branching factor at each step.   
      smooth_path: True                   # For Lattice/Hybrid nodes: Whether or not to smooth the path, always true for 2D nodes.
      smoother:
        max_iterations: 1000
        w_smooth: 0.3
        w_data: 0.2
        tolerance: 1.0e-10
        do_refinement: true               # Whether to recursively run the smoother 3 times on the results from prior runs to refine the results further

</code></pre></div></div>

<h2 id="topics">Topics</h2>

<table>
  <thead>
    <tr>
      <th>Topic</th>
      <th>Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>unsmoothed_path</td>
      <td>nav_msgs/Path</td>
    </tr>
  </tbody>
</table>

<h2 id="install">Install</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install ros-&lt;ros2-distro&gt;-nav2-smac-planner

</code></pre></div></div>

<h2 id="etc-important-side-notes">Etc (Important Side Notes)</h2>

<h3 id="potential-fields">Potential Fields</h3>

<p>Many users and default navigation configuration files I find are really missing the point of the inflation layer. While it’s true that you can simply inflate a small radius around the walls, the <em>true</em> value of the inflation layer is creating a consistent potential field around the entire map.</p>

<p>Some of the most popular tuning guides for Navigation / Nav2 even <a href="https://arxiv.org/pdf/1706.09068.pdf">call this out specifically</a> that there’s substantial benefit to creating a gentle potential field across the width of the map - after inscribed costs are applied - yet very few users do this.</p>

<p>This habit actually results in paths produced by NavFn, Global Planner, and now SmacPlanner to be somewhat suboptimal. They really want to look for a smooth potential field rather than wide open 0-cost spaces in order to stay in the middle of spaces and deal with close-by moving obstacles better.</p>

<p>So it is my recommendation in using this package, as well as all other cost-aware search planners available in ROS, to increase your inflation layer cost scale in order to adequately produce a smooth potential across the entire map. For very large open spaces, its fine to have 0-cost areas in the middle, but for halls, aisles, and similar; <strong>please create a smooth potential to provide the best performance</strong>.</p>

<h3 id="hybrid-a-and-state-lattice-turning-radius">Hybrid-A* and State Lattice Turning Radius’</h3>

<p>A very reasonable and logical assumption would be to set the <code class="language-plaintext highlighter-rouge">minimum_turning_radius</code> to the kinematic limits of your vehicle. For an ackermann car, that’s a physical quantity; while for differential or omni robots, its a bit of a dance around what kind of turns you’d like your robot to be able to make. Obviously setting this to something insanely small (like 20 cm) means you have alot of options, but also probably means the raw output plans won’t be very straight and smooth when you have 2+ meter wide aisles to work in.</p>

<p>I assert that you should also consider the environment you operate within when setting this. While you should <strong>absolutely not</strong> set this to be any smaller than the actual limits of your vehicle, there are some useful side effects of increasing this value in practical use. If you work in an area wider than the turning circle of your robot, you have some options that will ultimately improve the performance of the planner (in terms of CPU and compute time) as well as generate paths that are more “smooth” directly out of the planner – not requiring any explicit path smoothing.</p>

<p>By default, <code class="language-plaintext highlighter-rouge">0.4m</code> is the setting which I think is “reasonable” for the smaller scale industrial grade robots (think Simbe, the small Fetch, or Locus robots) resulting in faster plans and less “wobbly” motions that do not require post-smoothing – further improving CPU performance. I selected <code class="language-plaintext highlighter-rouge">0.4m</code> as a trade off between practical robots mentioned above and hobbyist users with a tiny-little-turtlebot-3 which might still need to navigate around some smaller cavities.</p>

<h3 id="costmap-resolutions">Costmap Resolutions</h3>

<p>We provide for the Hybrid-A*, State Lattice, and 2D A* implementations a costmap downsampler option. This can be <strong>incredible</strong> beneficial when planning very long paths in larger spaces. The motion models for SE2 planning and neighborhood search in 2D planning is proportional to the costmap resolution. By downsampling it, you can N^2 reduce the number of expansions required to achieve a particular goal. However, the lower the resolution, the larger small obstacles appear and you won’t be able to get super close to obstacles. This is a trade-off to make and test. Some numbers I’ve seen are 2-4x drops in planning CPU time for a 2-3x downsample rate. For long and complex paths, I was able to get it « 100ms at only a 2x downsample rate from a plan that otherwise took upward of 400ms.</p>

<p>I recommend users using a 5cm resolution costmap and playing with the different values of downsampling rate until they achieve what they think is optimal performance (lowest number of expansions vs. necessity to achieve fine goal poses). Then, I would recommend to change the global costmap resolution to this new value. That way you don’t own the compute of downsampling and maintaining a higher-resolution costmap that isn’t used.</p>

<p>Remember, the global costmap is <strong>only</strong> there to provide an environment for the planner to work in. It is not there for human-viewing even if a more fine resolution costmap is more human “pleasing”. If you use multiple planners in the planner server, then you will want to use the highest resolution for the most needed planner and then use the downsampler to downsample to the Hybrid-A* resolution.</p>

<h3 id="penalty-function-tuning">Penalty Function Tuning</h3>

<p>The penalty function defaults are tuned for all of the planners based on a 5cm costmap. While some change in this should not largely impact default behavior, it may be good to tune for your specific application and needs. The default values were tuned to have decent out of the box behavior for a large number of platforms and resolutions. In most situations, you should not need to play with them.</p>

<p><strong>However</strong>, due to the nature of the State Lattice planner being able to use any number of custom generated minimum control sets, this planner may require more tuning to get good behavior. The defaults for State Lattice were generated using the 5cm Ackermann files you can find in this package as initial examples. After a change in formulation for the Hybrid-A* planner, the default of change penalty off seems to produce good results, but please tune to your application need and run-time speed requirements.</p>

<p>When tuning, the “reasonable” range for each penalty is listed below. While you may obviously tune outside of these ranges, I’ve found that they offer a good trade-off and outside of these ranges behaviors get suboptimal quickly.</p>
<ul>
  <li>Cost: 1.7 - 6.0</li>
  <li>Non-Straight: 1.0 - 1.3</li>
  <li>Change: 0.0 - 0.3</li>
  <li>Reverse: 1.3 - 5.0</li>
</ul>

<p>Note that change penalty must be greater than 0.0. The non-straight, reverse, and cost penalties must be greater than 1.0, strictly.</p>

<h3 id="no-path-found-for-clearly-valid-goals-or-long-compute-times">No path found for clearly valid goals or long compute times</h3>

<p>Before addressing the section below, make sure you have an appropriately set max iterations parameter. If you have a 1 km2 sized warehouse, clearly 5000 expansions will be insufficient. Try increasing this value if you’re unable to achieve goals or disable it with the <code class="language-plaintext highlighter-rouge">-1</code> value to see if you are now able to plan within a reasonable time period. If you still have issues, there is a secondary effect which could be happening that is good to be aware of.</p>

<p>In maps with small gaps or holes, you may see an issue planning to certain regions. If there are gaps small enough to be untraversible yet large enough that inflation doesn’t close it up with inflated costs, then it is recommended to lightly touch up the map or increase your inflation to remove those spaces from non-lethal space.</p>

<p>Seeing the figures below, you’ll see an attempt to plan into a “U” shaped region across the map. The first figure shows the small gap in the map (from an imperfect SLAM session) which is nearly traversible, but not quite. From the starting location, that gap yeilds the shortest path to the goal, so the heuristics will attempt to route the paths in that direction. However, it is not possible to actually pass with a kinematically valid path with the footprint set. As a result, the planner expands all of its maximum 1,000,000 iterations attempting to fit through it (visualized in red). If an infinite number of iterations were allowed, eventually a valid path would be found, but might take significant time.</p>

<p>By simply increasing the footprint (a bit hackier, the best solution is to edit the map to make this area impassible), then that gap is now properly blocked as un-navigable. In the second figure, you can see that the heuristics influence the expansion down a navigable route and is able to find a path in less than 10,000 iterations (or about 110ms). It is easy now!</p>

<p>As such, it is recommended if you have sparse SLAM maps, gaps or holes in your map, that you lightly post-process them to fill those gaps or increasing your footprint’s padding or radius to make these areas invalid. Without it, it might waste expansions on this small corridor that: A) you dont want your robot actually using B) probably isnt actually valid and a SLAM artifact and C) if there’s a more open space, you’d rather it use that.</p>

<p><img src="https://raw.githubusercontent.com/ros-planning/navigation2/humble/nav2_smac_planner/media/A.png" alt="">
<img src="https://raw.githubusercontent.com/ros-planning/navigation2/humble/nav2_smac_planner/media/B.png" alt=""></p>

<p>One interesting thing to note from the second figure is that you see a number of expansions in open space. This is due to travel / heuristic values being so similar, tuning values of the penalty weights can have a decent impact there. The defaults are set as a good middle ground between large open spaces and confined aisles (environment specific tuning could be done to reduce the number of expansions for a specific map, speeding up the planner). The planner actually runs substantially faster the more confined the areas of search / environments are – but still plenty fast for even wide open areas!</p>

<p>Sometimes visualizing the expansions is very useful to debug potential concerns (why does this goal take longer to compute, why can’t I find a path, etc), should you on rare occasion run into an issue. The following snippet is what I used to visualize the expansion in the images above which may help you in future endevours.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// In createPath()</span>
<span class="k">static</span> <span class="k">auto</span> <span class="n">node</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"test"</span><span class="p">);</span>
<span class="k">static</span> <span class="k">auto</span> <span class="n">pub</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">create_publisher</span><span class="o">&lt;</span><span class="n">geometry_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">PoseArray</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"expansions"</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">geometry_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">PoseArray</span> <span class="n">msg</span><span class="p">;</span>
<span class="n">geometry_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">Pose</span> <span class="n">msg_pose</span><span class="p">;</span>
<span class="n">msg</span><span class="p">.</span><span class="n">header</span><span class="p">.</span><span class="n">stamp</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">now</span><span class="p">();</span>
<span class="n">msg</span><span class="p">.</span><span class="n">header</span><span class="p">.</span><span class="n">frame_id</span> <span class="o">=</span> <span class="s">"map"</span><span class="p">;</span>

<span class="p">...</span>

<span class="c1">// Each time we expand a new node </span>
<span class="n">msg_pose</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">_costmap</span><span class="o">-&gt;</span><span class="n">getOriginX</span><span class="p">()</span> <span class="o">+</span> <span class="p">(</span><span class="n">current_node</span><span class="o">-&gt;</span><span class="n">pose</span><span class="p">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">_costmap</span><span class="o">-&gt;</span><span class="n">getResolution</span><span class="p">());</span>
<span class="n">msg_pose</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">_costmap</span><span class="o">-&gt;</span><span class="n">getOriginY</span><span class="p">()</span> <span class="o">+</span> <span class="p">(</span><span class="n">current_node</span><span class="o">-&gt;</span><span class="n">pose</span><span class="p">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">_costmap</span><span class="o">-&gt;</span><span class="n">getResolution</span><span class="p">());</span>
<span class="n">msg</span><span class="p">.</span><span class="n">poses</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">msg_pose</span><span class="p">);</span>

<span class="p">...</span> 

<span class="c1">// On backtrace or failure</span>
<span class="n">pub</span><span class="o">-&gt;</span><span class="n">publish</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span>

</code></pre></div></div>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <em>No CHANGELOG found.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/nav2_smac_planner/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#humble">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#humble">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#humble">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_gtest#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_gtest#humble">ament_cmake_gtest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_pytest#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_pytest#humble">ament_cmake_pytest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#humble">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp_action#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp_action#humble">rclcpp_action  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp_lifecycle#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp_lifecycle#humble">rclcpp_lifecycle  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/visualization_msgs#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/visualization_msgs#humble">visualization_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_util#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_util#humble">nav2_util  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_msgs#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_msgs#humble">nav2_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav_msgs#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav_msgs#humble">nav_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/geometry_msgs#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/geometry_msgs#humble">geometry_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/builtin_interfaces#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/builtin_interfaces#humble">builtin_interfaces  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_common#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_common#humble">nav2_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/tf2_ros#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/tf2_ros#humble">tf2_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_costmap_2d#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_costmap_2d#humble">nav2_costmap_2d  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_core#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_core#humble">nav2_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/pluginlib#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/pluginlib#humble">pluginlib  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/eigen3_cmake_module#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/eigen3_cmake_module#humble">eigen3_cmake_module  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ompl#humble-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ompl#humble">ompl  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/angles#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/angles#humble">angles  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/eigen">eigen</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/nlohmann-json-dev">nlohmann-json-dev</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/navigation2#humble">navigation2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/navigation2#humble-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/omni_base_2dnav#humble">omni_base_2dnav</a></td>
                      <td class="text-center">
                        
                        <a href="/p/omni_base_2dnav#humble-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/pmb2_2dnav#humble">pmb2_2dnav</a></td>
                      <td class="text-center">
                        
                        <a href="/p/pmb2_2dnav#humble-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <ul>
            
              <li><a href="https://github.com/ros-planning/navigation2/tree/humble/nav2_smac_planner//smac_plugin_hybrid.xml" target="_blank">nav2_core</a></li>
            
              <li><a href="https://github.com/ros-planning/navigation2/tree/humble/nav2_smac_planner//smac_plugin_2d.xml" target="_blank">nav2_core</a></li>
            
              <li><a href="https://github.com/ros-planning/navigation2/tree/humble/nav2_smac_planner//smac_plugin_lattice.xml" target="_blank">nav2_core</a></li>
            
          </ul>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>nav2_smac_planner</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="humble-question-list" class="panel-body" style="display: none;"></div>
      <div id="humble-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/nav2_smac_planner+humble">here</a>.</p>
      </div>
      <div id="humble-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/ros-planning/navigation2.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/humble/p/nav2_smac_planner"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/ros-planning/navigation2/tree/humble/nav2_smac_planner"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/nav2_smac_planner">nav2_smac_planner</a> <small>package from <a style="text-decoration:none" href="/r/navigation2/github-ros-planning-navigation2">navigation2</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_amcl">

nav2_amcl
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_behavior_tree">

nav2_behavior_tree
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_behaviors">

nav2_behaviors
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_bringup">

nav2_bringup
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_bt_navigator">

nav2_bt_navigator
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_collision_monitor">

nav2_collision_monitor
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_common">

nav2_common
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_constrained_smoother">

nav2_constrained_smoother
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_controller">

nav2_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_core">

nav2_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_costmap_2d">

nav2_costmap_2d
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/opennav_docking">

opennav_docking
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/opennav_docking_bt">

opennav_docking_bt
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/opennav_docking_core">

opennav_docking_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/costmap_queue">

costmap_queue
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_core">

dwb_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_critics">

dwb_critics
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_msgs">

dwb_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_plugins">

dwb_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_dwb_controller">

nav2_dwb_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav_2d_msgs">

nav_2d_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav_2d_utils">

nav_2d_utils
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_graceful_controller">

nav2_graceful_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_lifecycle_manager">

nav2_lifecycle_manager
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_loopback_sim">

nav2_loopback_sim
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_map_server">

nav2_map_server
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_mppi_controller">

nav2_mppi_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_msgs">

nav2_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_navfn_planner">

nav2_navfn_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_planner">

nav2_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_regulated_pure_pursuit_controller">

nav2_regulated_pure_pursuit_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_rotation_shim_controller">

nav2_rotation_shim_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_rviz_plugins">

nav2_rviz_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_simple_commander">

nav2_simple_commander
</a>
            
          
            
            
              <span class="label label-default pkg-label">

nav2_smac_planner
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_smoother">

nav2_smoother
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_system_tests">

nav2_system_tests
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_theta_star_planner">

nav2_theta_star_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_util">

nav2_util
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_velocity_smoother">

nav2_velocity_smoother
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_voxel_grid">

nav2_voxel_grid
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_waypoint_follower">

nav2_waypoint_follower
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/navigation2">

navigation2
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/jazzy/p/nav2_smac_planner"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/ros-planning/navigation2/tree/jazzy/nav2_smac_planner"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="jazzy-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#jazzy-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#jazzy-assets" data-toggle="tab"><span class="label label-primary">3</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#jazzy-deps" data-toggle="tab"><span class="label label-primary">24</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#jazzy-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#jazzy-questions" data-toggle="tab"><span id="jazzy-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="jazzy-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>1.3.6</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache-2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS 2 Navigation Framework and System</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-planning/navigation2.git">https://github.com/ros-planning/navigation2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">jazzy</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-05-03
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">robotics</span> <span class="label label-default">navigation</span> <span class="label label-default">ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/navigation2/#jazzy-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/navigation2/#jazzy-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/navigation2/#jazzy-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Smac global planning plugin: A*, Hybrid-A*, State Lattice
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Steve Macenski</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <em>No additional authors.</em>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/ros-planning/navigation2/tree/jazzy/nav2_smac_planner/README.md" title="Open in git repository">nav2_smac_planner/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="smac-planner">Smac Planner</h1>

<p>The SmacPlanner is a plugin for the Nav2 Planner server. It includes currently 3 distinct plugins:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code>: a highly optimized fully reconfigurable Hybrid-A* implementation supporting Dubin and Reeds-Shepp models (legged, ackermann and car models).</li>
  <li>
<code class="language-plaintext highlighter-rouge">SmacPlannerLattice</code>: a highly optimized fully reconfigurable State Lattice implementation supporting configurable minimum control sets, with provided control sets for Ackermann, Legged, Differential and Omnidirectional models.</li>
  <li>
<code class="language-plaintext highlighter-rouge">SmacPlanner2D</code>: a highly optimized fully reconfigurable grid-based A* implementation supporting 8-connected neighborhood models.</li>
</ul>

<p>It also introduces the following basic building blocks:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">CostmapDownsampler</code>: A library to take in a costmap object and downsample it to another resolution.</li>
  <li>
<code class="language-plaintext highlighter-rouge">AStar</code>: A generic and highly optimized A* template library used by the planning plugins to search. Additional template for  planning also could be made available using it.</li>
  <li>
<code class="language-plaintext highlighter-rouge">CollisionChecker</code>: Collision check based on a robot’s radius or footprint.</li>
  <li>
<code class="language-plaintext highlighter-rouge">Smoother</code>: A simple path smoother to smooth out 2D, Hybrid-A*, and State Lattice paths.</li>
</ul>

<p>We have users reporting using this on:</p>
<ul>
  <li>Delivery robots</li>
  <li>Industrial robots</li>
  <li>Vertical farming</li>
  <li>Solar farms</li>
</ul>

<p>See its <a href="https://docs.nav2.org/configuration/packages/configuring-smac-planner.html">Configuration Guide Page</a> for additional parameter descriptions.</p>

<h2 id="introduction">Introduction</h2>

<p>The <code class="language-plaintext highlighter-rouge">nav2_smac_planner</code> package contains an optimized templated A* search algorithm used to create multiple A*-based planners for multiple types of robot platforms. It was built by <a href="https://www.linkedin.com/in/steve-macenski-41a985101/">Steve Macenski</a> while at <a href="https://www.sra.samsung.com/">Samsung Research</a>. We support <strong>circular</strong> differential-drive and omni-directional drive robots using the <code class="language-plaintext highlighter-rouge">SmacPlanner2D</code> planner which implements a cost-aware A* planner. We support <strong>legged, cars, car-like, and ackermann vehicles</strong> using the <code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code> plugin which implements a Hybrid-A* planner.  We support <strong>non-circular, arbitrary shaped, any model vehicles</strong> using the <code class="language-plaintext highlighter-rouge">SmacPlannerLattice</code> plugin which implements a State Lattice planner. It contains control sets and generators for ackermann, legged, differential drive and omnidirectional vehicles, but you may provide your own for another robot type or to have different planning behaviors. The last two plugins are also useful for curvature constrained or kinematically feasible planning, like when planning robot at high speeds to make sure they don’t flip over or otherwise skid out of control. It is also applicable to non-round robots (such as large rectangular or arbitrary shaped robots of differential/omnidirectional drivetrains) that need pose-based collision checking.</p>

<p>The <code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code> implements the Hybrid-A* planner as proposed in <a href="https://ai.stanford.edu/~ddolgov/papers/dolgov_gpp_stair08.pdf">Practical Search Techniques in Path Planning for Autonomous Driving</a>, with modifications to the heuristic, traversal functions to increase path quality without needing expensive optimization-based smoothing.</p>

<p>The <code class="language-plaintext highlighter-rouge">SmacPlannerLattice</code> implements the State Lattice planner. While we do not implement it precisely the same way as <a href="https://www.ri.cmu.edu/pub_files/pub4/pivtoraiko_mihail_2007_1/pivtoraiko_mihail_2007_1.pdf">Optimal, Smooth, Nonholonomic MobileRobot Motion Planning in State Lattices</a> (with control sets found using <a href="https://www.ri.cmu.edu/pub_files/pub4/pivtoraiko_mihail_2005_1/pivtoraiko_mihail_2005_1.pdf">Generating Near Minimal Spanning Control Sets for Constrained Motion Planning in Discrete State Spaces</a>), it is sufficiently similar it may be used as a good reference. Additional optimizations for on-approach analytic expansions and improved heuristic functions were used, largely matching those of Hybrid-A* to allow them to share these optimized implementations to drive search towards the goal, faster.</p>

<p>In summary…</p>

<p>The <code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code> is designed to work with:</p>
<ul>
  <li>Ackermann, car, and car-like robots</li>
  <li>High speed or curvature constrained robots (as to not flip over, skid, or dump load at high speeds)</li>
  <li>Arbitrary shaped, non-circular differential or omnidirectional robots requiring kinematically feasible planning with SE2 collision checking</li>
  <li>Legged robots</li>
</ul>

<p>The <code class="language-plaintext highlighter-rouge">SmacPlannerLattice</code> is designed to work with:</p>
<ul>
  <li>Arbitrary shaped, non-circular robots requiring kinematically feasible planning with SE2 collision checking using the full capabilities of the drivetrain</li>
  <li>Flexibility to use other robot model types or with provided non-circular differential, ackermann, and omni support</li>
</ul>

<p>The <code class="language-plaintext highlighter-rouge">SmacPlanner2D</code> is designed to work with:</p>
<ul>
  <li>Circular, differential or omnidirectional robots</li>
  <li>Relatively small robots with respect to environment size (e.g. RC car in a hallway or large robot in a convention center) that can be approximated by circular footprint.</li>
</ul>

<h2 id="features">Features</h2>

<p>We further improve on Hybrid-A* in the following ways:</p>
<ul>
  <li>Remove need for upsampling by searching with 10x smaller motion primitives (same as their upsampling ratio).</li>
  <li>Multi-resolution search allowing planning to occur at a coarser resolution for wider spaces (O(N^2) faster).</li>
  <li>Cost-aware penalty functions in search resulting in far smoother plans (further reducing requirement to smooth).</li>
  <li>Gradient-descent, basic but fast smoother</li>
  <li>Faster planning than original paper by highly optimizing the template A* algorithm.</li>
  <li>Faster planning via custom precomputed heuristic, motion primitive, and other functions.</li>
  <li>Automatically adjusted search motion model sizes by motion model, costmap resolution, and bin sizing.</li>
  <li>Closest path on approach within tolerance if exact path cannot be found or in invalid space.</li>
  <li>Multi-model hybrid searching including Dubin and Reeds-Shepp models. More models may be trivially added.</li>
  <li>High unit and integration test coverage, doxygen documentation.</li>
  <li>Uses modern C++14 language features and individual components are easily reusable.</li>
  <li>Speed optimizations: no data structure graph lookups in main loop, near-zero copy main loop, dynamically generated graph and dynamic programming-based obstacle heuristic, optional recomputation of heuristics for subsequent planning requests of the same goal, etc.</li>
  <li>Templated Nodes and A* implementation to support additional robot extensions.</li>
  <li>Selective re-evaluation of the obstacle heuristic per goal/map or each iteration, which can speed up subsequent replanning 20x or more.</li>
</ul>

<p>Most of these features (multi-resolution, models, smoother, etc) are also available in the <code class="language-plaintext highlighter-rouge">SmacPlanner2D</code> and <code class="language-plaintext highlighter-rouge">SmacPlannerLattice</code> plugins.</p>

<p>The 2D A* implementation also does not have any of the weird artifacts introduced by the gradient wavefront-based 2D A* implementation in the NavFn Planner. While this 2D A* planner is slightly slower, I believe it’s well worth the increased quality in paths.</p>

<p>Note: In prior releases, a CG smoother largely implementing the original Hybrid-A* paper’s. However, this smoother failed to consistently provide useful results, took too much compute time, and was deprecated. While smoothing a path 95% of the time seems like a “good” solution, we need something far more reliable for practical use. Since we are working with mobile robots and not autonomous cars at 60 mph, we can take some different liberties in smoothing knowing that our local trajectory planners are pretty smart. If you are looking for it, it now lives in the new Smoothing Server as the Cost-aware smoother. This smoother has been replaced by a simpler optimization inspired solution which is faster, far more consistent, and simpler to understand. While this smoother is <strong>not</strong> cost-aware, we have added cost-aware penalty functions in the planners themselves to push the plans away from high-cost spaces and we do check for validity of smoothed sections to ensure feasibility. It will through terminate when paths become in collision with the environment. If you would like to use this smoother, however, it is available in the smoother server, though it will take some additional compute time.</p>

<h2 id="metrics">Metrics</h2>

<p>The original Hybrid-A* implementation boasted planning times of 50-300ms for planning across 102,400 cell maps with 72 angular bins. We see much faster results in our evaluations:</p>

<ul>
  <li>
<strong>2-20ms</strong> for planning across 147,456 (1.4x larger) cell maps with 72 angular bins.</li>
  <li>
<strong>30-200ms</strong> for planning across 344,128 (3.3x larger) cell map with 72 angular bins.</li>
</ul>

<p>An example of the 3 planners can be seen below, planning a roughly 75 m path.</p>
<ul>
  <li>2D A* computed the path in 243ms (Panel 1)</li>
  <li>Hybrid-A* computed the path in 144ms (Panel 2)</li>
  <li>State Lattice computed the path in 113ms (Panel 3)</li>
  <li>For reference: NavFn compute the path in 146ms, including some nasty path discontinuity artifacts</li>
</ul>

<p><img src="https://raw.githubusercontent.com/ros-planning/navigation2/jazzy/nav2_smac_planner/test/3planners.png" alt="alt text"></p>

<h2 id="design">Design</h2>

<p>The basic design centralizes a templated A* implementation that handles the search of a graph of nodes. The implementation is templated by the nodes, <code class="language-plaintext highlighter-rouge">NodeT</code>, which contain the methods needed to compute the hueristics, travel costs, and search neighborhoods. The outcome of this design is then a standard A* implementation that can be used to traverse any type of graph as long as a node template can be created for it.</p>

<p>We provide 3 nodes by default currently. The 2D node template (<code class="language-plaintext highlighter-rouge">Node2D</code>) which does 2D grid-search with either 4 or 8-connected neighborhoods. We also provide a Hybrid A* node template (<code class="language-plaintext highlighter-rouge">NodeHybrid</code>) which does SE2 (X, Y, theta) search and collision checking on Dubin or Reeds-Shepp motion models. We also provide the Lattice (<code class="language-plaintext highlighter-rouge">NodeLattice</code>) node for state lattice planning making use of the wider range of velocity options available to differential and omnidirectional robots. Additional templates could be easily made and included for 3D grid search and non-grid base searching like routing.</p>

<p>In the ROS2 facing plugin, we take in the global goals and pre-process the data to feed into the templated A* used. This includes processing any requests to downsample the costmap to another resolution to speed up search and smoothing the resulting A* path (not available for State Lattice due to the lattices generated are dependent on costmap resolution). For the <code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code> and <code class="language-plaintext highlighter-rouge">SmacPlannerLattice</code> plugins, the path is promised to be kinematically feasible due to the kinematically valid models used in branching search. The 2D A* is also promised to be feasible for differential and omni-directional robots.</p>

<p>We isolated the A*, costmap downsampler, smoother, and Node template objects from ROS2 to allow them to be easily testable independently of ROS or the planner. The only place ROS is used is in the planner plugins themselves.</p>

<h2 id="parameters">Parameters</h2>

<p>See inline description of parameters in the <code class="language-plaintext highlighter-rouge">SmacPlanner</code>. This includes comments as specific parameters apply to <code class="language-plaintext highlighter-rouge">SmacPlanner2D</code> and <code class="language-plaintext highlighter-rouge">SmacPlanner</code> in place.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>planner_server:
  ros__parameters:
    planner_plugins: ["GridBased"]

    GridBased:
      plugin: "nav2_smac_planner::SmacPlannerHybrid"
      tolerance: 0.5                      # tolerance for planning if unable to reach exact pose, in meters
      downsample_costmap: false           # whether or not to downsample the map
      downsampling_factor: 1              # multiplier for the resolution of the costmap layer (e.g. 2 on a 5cm costmap would be 10cm)
      allow_unknown: false                # allow traveling in unknown space
      max_iterations: 1000000             # maximum total iterations to search for before failing (in case unreachable), set to -1 to disable
      max_on_approach_iterations: 1000    # maximum number of iterations to attempt to reach goal once in tolerance
      terminal_checking_interval: 5000     # number of iterations between checking if the goal has been cancelled or planner timed out
      max_planning_time: 3.5              # max time in s for planner to plan, smooth, and upsample. Will scale maximum smoothing and upsampling times based on remaining time after planning.
      motion_model_for_search: "DUBIN"    # For Hybrid Dubin, Reeds-Shepp
      cost_travel_multiplier: 2.0         # For 2D: Cost multiplier to apply to search to steer away from high cost areas. Larger values will place in the center of aisles more exactly (if non-`FREE` cost potential field exists) but take slightly longer to compute. To optimize for speed, a value of 1.0 is reasonable. A reasonable tradeoff value is 2.0. A value of 0.0 effective disables steering away from obstacles and acts like a naive binary search A*.
      angle_quantization_bins: 64         # For Hybrid nodes: Number of angle bins for search, must be 1 for 2D node (no angle search)
      analytic_expansion_ratio: 3.5       # For Hybrid/Lattice nodes: The ratio to attempt analytic expansions during search for final approach.
      analytic_expansion_max_length: 3.0    # For Hybrid/Lattice nodes: The maximum length of the analytic expansion to be considered valid to prevent unsafe shortcutting (in meters). This should be scaled with minimum turning radius and be no less than 4-5x the minimum radius
      analytic_expansion_max_cost: 200   # For Hybrid/Lattice nodes: The maximum single cost for any part of an analytic expansion to contain and be valid (except when necessary on approach to goal)
      analytic_expansion_max_cost_override: false # For Hybrid/Lattice nodes: Whether or not to override the maximum cost setting if within critical distance to goal (ie probably required). If expansion is within 2*pi*min_r of the goal, then it will override the max cost if ``false``.
      minimum_turning_radius: 0.40        # For Hybrid/Lattice nodes: minimum turning radius in m of path / vehicle
      reverse_penalty: 2.1                # For Reeds-Shepp model: penalty to apply if motion is reversing, must be =&gt; 1
      change_penalty: 0.0                 # For Hybrid nodes: penalty to apply if motion is changing directions, must be &gt;= 0
      non_straight_penalty: 1.20          # For Hybrid nodes: penalty to apply if motion is non-straight, must be =&gt; 1
      cost_penalty: 2.0                   # For Hybrid nodes: penalty to apply to higher cost areas when adding into the obstacle map dynamic programming distance expansion heuristic. This drives the robot more towards the center of passages. A value between 1.3 - 3.5 is reasonable.
      retrospective_penalty: 0.025        # For Hybrid/Lattice nodes: penalty to prefer later maneuvers before earlier along the path. Saves search time since earlier nodes are not expanded until it is necessary. Must be &gt;= 0.0 and &lt;= 1.0
      rotation_penalty: 5.0               # For Lattice node: Penalty to apply only to pure rotate in place commands when using minimum control sets containing rotate in place primitives. This should always be set sufficiently high to weight against this action unless strictly necessary for obstacle avoidance or there may be frequent discontinuities in the plan where it requests the robot to rotate in place to short-cut an otherwise smooth path for marginal path distance savings.
      lookup_table_size: 20.0               # For Hybrid nodes: Size of the dubin/reeds-sheep distance window to cache, in meters.
      cache_obstacle_heuristic: True      # For Hybrid nodes: Cache the obstacle map dynamic programming distance expansion heuristic between subsequent replannings of the same goal location. Dramatically speeds up replanning performance (40x) if costmap is largely static.
      allow_reverse_expansion: False      # For Lattice nodes: Whether to expand state lattice graph in forward primitives or reverse as well, will double the branching factor at each step.
      smooth_path: True                   # For Lattice/Hybrid nodes: Whether or not to smooth the path, always true for 2D nodes.
      debug_visualizations: True                # For Hybrid/Lattice nodes: Whether to publish expansions on the /expansions topic as an array of poses (the orientation has no meaning) and the path's footprints on the /planned_footprints topic. WARNING: heavy to compute and to display, for debug only as it degrades the performance.
      smoother:
        max_iterations: 1000
        w_smooth: 0.3
        w_data: 0.2
        tolerance: 1.0e-10
        do_refinement: true               # Whether to recursively run the smoother 3 times on the results from prior runs to refine the results further

</code></pre></div></div>

<h2 id="topics">Topics</h2>

<table>
  <thead>
    <tr>
      <th>Topic</th>
      <th>Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>unsmoothed_path</td>
      <td>nav_msgs/Path</td>
    </tr>
  </tbody>
</table>

<h2 id="install">Install</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install ros-&lt;ros2-distro&gt;-nav2-smac-planner

</code></pre></div></div>

<h2 id="etc-important-side-notes">Etc (Important Side Notes)</h2>

<h3 id="potential-fields">Potential Fields</h3>

<p>Many users and default navigation configuration files I find are really missing the point of the inflation layer. While it’s true that you can simply inflate a small radius around the walls, the <em>true</em> value of the inflation layer is creating a consistent potential field around the entire map.</p>

<p>Some of the most popular tuning guides for Navigation / Nav2 even <a href="https://arxiv.org/pdf/1706.09068.pdf">call this out specifically</a> that there’s substantial benefit to creating a gentle potential field across the width of the map - after inscribed costs are applied - yet very few users do this.</p>

<p>This habit actually results in paths produced by NavFn, Global Planner, and now SmacPlanner to be somewhat suboptimal. They really want to look for a smooth potential field rather than wide open 0-cost spaces in order to stay in the middle of spaces and deal with close-by moving obstacles better.</p>

<p>So it is my recommendation in using this package, as well as all other cost-aware search planners available in ROS, to increase your inflation layer cost scale in order to adequately produce a smooth potential across the entire map. For very large open spaces, its fine to have 0-cost areas in the middle, but for halls, aisles, and similar; <strong>please create a smooth potential to provide the best performance</strong>.</p>

<h3 id="hybrid-a-and-state-lattice-turning-radius">Hybrid-A* and State Lattice Turning Radius’</h3>

<p>A very reasonable and logical assumption would be to set the <code class="language-plaintext highlighter-rouge">minimum_turning_radius</code> to the kinematic limits of your vehicle. For an ackermann car, that’s a physical quantity; while for differential or omni robots, its a bit of a dance around what kind of turns you’d like your robot to be able to make. Obviously setting this to something insanely small (like 20 cm) means you have alot of options, but also probably means the raw output plans won’t be very straight and smooth when you have 2+ meter wide aisles to work in.</p>

<p>I assert that you should also consider the environment you operate within when setting this. While you should <strong>absolutely not</strong> set this to be any smaller than the actual limits of your vehicle, there are some useful side effects of increasing this value in practical use. If you work in an area wider than the turning circle of your robot, you have some options that will ultimately improve the performance of the planner (in terms of CPU and compute time) as well as generate paths that are more “smooth” directly out of the planner – not requiring any explicit path smoothing.</p>

<p>By default, <code class="language-plaintext highlighter-rouge">0.4m</code> is the setting which I think is “reasonable” for the smaller scale industrial grade robots (think Simbe, the small Fetch, or Locus robots) resulting in faster plans and less “wobbly” motions that do not require post-smoothing – further improving CPU performance. I selected <code class="language-plaintext highlighter-rouge">0.4m</code> as a trade off between practical robots mentioned above and hobbyist users with a tiny-little-turtlebot-3 which might still need to navigate around some smaller cavities.</p>

<h3 id="costmap-resolutions">Costmap Resolutions</h3>

<p>We provide for the Hybrid-A*, State Lattice, and 2D A* implementations a costmap downsampler option. This can be <strong>incredibly</strong> beneficial when planning very long paths in larger spaces. The motion models for SE2 planning and neighborhood search in 2D planning is proportional to the costmap resolution. By downsampling it, you can N^2 reduce the number of expansions required to achieve a particular goal. However, the lower the resolution, the larger small obstacles appear and you won’t be able to get super close to obstacles. This is a trade-off to make and test. Some numbers I’ve seen are 2-4x drops in planning CPU time for a 2-3x downsample rate. For long and complex paths, I was able to get it « 100ms at only a 2x downsample rate from a plan that otherwise took upward of 400ms.</p>

<p>I recommend users using a 5cm resolution costmap and playing with the different values of downsampling rate until they achieve what they think is optimal performance (lowest number of expansions vs. necessity to achieve fine goal poses). Then, I would recommend to change the global costmap resolution to this new value. That way you don’t own the compute of downsampling and maintaining a higher-resolution costmap that isn’t used.</p>

<p>Remember, the global costmap is <strong>only</strong> there to provide an environment for the planner to work in. It is not there for human-viewing even if a more fine resolution costmap is more human “pleasing”. If you use multiple planners in the planner server, then you will want to use the highest resolution for the most needed planner and then use the downsampler to downsample to the Hybrid-A* resolution.</p>

<h3 id="penalty-function-tuning">Penalty Function Tuning</h3>

<p>The penalty function defaults are tuned for all of the planners based on a 5cm costmap. While some change in this should not largely impact default behavior, it may be good to tune for your specific application and needs. The default values were tuned to have decent out of the box behavior for a large number of platforms and resolutions. In most situations, you should not need to play with them.</p>

<p><strong>However</strong>, due to the nature of the State Lattice planner being able to use any number of custom generated minimum control sets, this planner may require more tuning to get good behavior. The defaults for State Lattice were generated using the 5cm Ackermann files you can find in this package as initial examples. After a change in formulation for the Hybrid-A* planner, the default of change penalty off seems to produce good results, but please tune to your application need and run-time speed requirements.</p>

<p>When tuning, the “reasonable” range for each penalty is listed below. While you may obviously tune outside of these ranges, I’ve found that they offer a good trade-off and outside of these ranges behaviors get suboptimal quickly.</p>
<ul>
  <li>Cost: 1.7 - 6.0</li>
  <li>Non-Straight: 1.0 - 1.3</li>
  <li>Change: 0.0 - 0.3</li>
  <li>Reverse: 1.3 - 5.0</li>
</ul>

<p>Note that change penalty must be greater than 0.0. The non-straight, reverse, and cost penalties must be greater than 1.0, strictly.</p>

<h3 id="no-path-found-for-clearly-valid-goals-or-long-compute-times">No path found for clearly valid goals or long compute times</h3>

<p>Before addressing the section below, make sure you have an appropriately set max iterations parameter. If you have a 1 km2 sized warehouse, clearly 5000 expansions will be insufficient. Try increasing this value if you’re unable to achieve goals or disable it with the <code class="language-plaintext highlighter-rouge">-1</code> value to see if you are now able to plan within a reasonable time period. If you still have issues, there is a secondary effect which could be happening that is good to be aware of.</p>

<p>In maps with small gaps or holes, you may see an issue planning to certain regions. If there are gaps small enough to be untraversible yet large enough that inflation doesn’t close it up with inflated costs, then it is recommended to lightly touch up the map or increase your inflation to remove those spaces from non-lethal space.</p>

<p>Seeing the figures below, you’ll see an attempt to plan into a “U” shaped region across the map. The first figure shows the small gap in the map (from an imperfect SLAM session) which is nearly traversible, but not quite. From the starting location, that gap yeilds the shortest path to the goal, so the heuristics will attempt to route the paths in that direction. However, it is not possible to actually pass with a kinematically valid path with the footprint set. As a result, the planner expands all of its maximum 1,000,000 iterations attempting to fit through it (visualized in red). If an infinite number of iterations were allowed, eventually a valid path would be found, but might take significant time.</p>

<p>By simply increasing the footprint (a bit hackier, the best solution is to edit the map to make this area impassible), then that gap is now properly blocked as un-navigable. In the second figure, you can see that the heuristics influence the expansion down a navigable route and is able to find a path in less than 10,000 iterations (or about 110ms). It is easy now!</p>

<p>As such, it is recommended if you have sparse SLAM maps, gaps or holes in your map, that you lightly post-process them to fill those gaps or increasing your footprint’s padding or radius to make these areas invalid. Without it, it might waste expansions on this small corridor that: A) you dont want your robot actually using B) probably isnt actually valid and a SLAM artifact and C) if there’s a more open space, you’d rather it use that.</p>

<p><img src="https://raw.githubusercontent.com/ros-planning/navigation2/jazzy/nav2_smac_planner/media/A.png" alt="">
<img src="https://raw.githubusercontent.com/ros-planning/navigation2/jazzy/nav2_smac_planner/media/B.png" alt=""></p>

<p>One interesting thing to note from the second figure is that you see a number of expansions in open space. This is due to travel / heuristic values being so similar, tuning values of the penalty weights can have a decent impact there. The defaults are set as a good middle ground between large open spaces and confined aisles (environment specific tuning could be done to reduce the number of expansions for a specific map, speeding up the planner). The planner actually runs substantially faster the more confined the areas of search / environments are – but still plenty fast for even wide open areas!</p>

<p>Sometimes visualizing the expansions is very useful to debug potential concerns (why does this goal take longer to compute, why can’t I find a path, etc), should you on rare occasion run into an issue. You can enable the publication of the expansions on the <code class="language-plaintext highlighter-rouge">/expansions</code> topic for SmacHybrid with the parameter <code class="language-plaintext highlighter-rouge">debug_visualizations: True</code>, beware that it should be used only for debug as it increases a lot the CPU usage.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <em>No CHANGELOG found.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/nav2_smac_planner/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#jazzy">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#jazzy">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#jazzy">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_gtest#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_gtest#jazzy">ament_cmake_gtest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_pytest#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_pytest#jazzy">ament_cmake_pytest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#jazzy">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp_action#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp_action#jazzy">rclcpp_action  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp_lifecycle#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp_lifecycle#jazzy">rclcpp_lifecycle  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/visualization_msgs#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/visualization_msgs#jazzy">visualization_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_util#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_util#jazzy">nav2_util  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_msgs#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_msgs#jazzy">nav2_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav_msgs#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav_msgs#jazzy">nav_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/geometry_msgs#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/geometry_msgs#jazzy">geometry_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/builtin_interfaces#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/builtin_interfaces#jazzy">builtin_interfaces  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_common#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_common#jazzy">nav2_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/tf2_ros#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/tf2_ros#jazzy">tf2_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_costmap_2d#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_costmap_2d#jazzy">nav2_costmap_2d  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_core#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_core#jazzy">nav2_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/pluginlib#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/pluginlib#jazzy">pluginlib  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/eigen3_cmake_module#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/eigen3_cmake_module#jazzy">eigen3_cmake_module  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ompl#jazzy-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ompl#jazzy">ompl  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/angles#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/angles#jazzy">angles  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/eigen">eigen</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/nlohmann-json-dev">nlohmann-json-dev</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/navigation2#jazzy">navigation2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/navigation2#jazzy-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <ul>
            
              <li><a href="https://github.com/ros-planning/navigation2/tree/jazzy/nav2_smac_planner//smac_plugin_hybrid.xml" target="_blank">nav2_core</a></li>
            
              <li><a href="https://github.com/ros-planning/navigation2/tree/jazzy/nav2_smac_planner//smac_plugin_2d.xml" target="_blank">nav2_core</a></li>
            
              <li><a href="https://github.com/ros-planning/navigation2/tree/jazzy/nav2_smac_planner//smac_plugin_lattice.xml" target="_blank">nav2_core</a></li>
            
          </ul>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>nav2_smac_planner</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="jazzy-question-list" class="panel-body" style="display: none;"></div>
      <div id="jazzy-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/nav2_smac_planner+jazzy">here</a>.</p>
      </div>
      <div id="jazzy-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/ros-planning/navigation2.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/jazzy/p/nav2_smac_planner"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/ros-planning/navigation2/tree/jazzy/nav2_smac_planner"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>kilted</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>rolling</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/nav2_smac_planner">nav2_smac_planner</a> <small>package from <a style="text-decoration:none" href="/r/tup2023-sentry-nav/github-tup-robomaster-tup2023-sentry-nav">tup2023-sentry-nav</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/fast_lio">

fast_lio
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lio_sam">

lio_sam
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dll">

dll
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map">

grid_map
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_cmake_helpers">

grid_map_cmake_helpers
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_core">

grid_map_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_costmap_2d">

grid_map_costmap_2d
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_cv">

grid_map_cv
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_demos">

grid_map_demos
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_filters">

grid_map_filters
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_loader">

grid_map_loader
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_msgs">

grid_map_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_octomap">

grid_map_octomap
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_pcl">

grid_map_pcl
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_ros">

grid_map_ros
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_rviz_plugin">

grid_map_rviz_plugin
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_sdf">

grid_map_sdf
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_visualization">

grid_map_visualization
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/imu_complementary_filter">

imu_complementary_filter
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/imu_filter_madgwick">

imu_filter_madgwick
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/imu_tools">

imu_tools
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/costmap_converter">

costmap_converter
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/costmap_converter_msgs">

costmap_converter_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_amcl">

nav2_amcl
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_behavior_tree">

nav2_behavior_tree
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_bringup">

nav2_bringup
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_gazebo_spawner">

nav2_gazebo_spawner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_bt_navigator">

nav2_bt_navigator
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_common">

nav2_common
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_controller">

nav2_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_core">

nav2_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_costmap_2d">

nav2_costmap_2d
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/costmap_queue">

costmap_queue
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_core">

dwb_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_critics">

dwb_critics
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_msgs">

dwb_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_plugins">

dwb_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_dwb_controller">

nav2_dwb_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav_2d_msgs">

nav_2d_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav_2d_utils">

nav_2d_utils
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_lifecycle_manager">

nav2_lifecycle_manager
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_map_server">

nav2_map_server
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_msgs">

nav2_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_navfn_planner">

nav2_navfn_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_planner">

nav2_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_recoveries">

nav2_recoveries
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_regulated_pure_pursuit_controller">

nav2_regulated_pure_pursuit_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_rotation_shim_controller">

nav2_rotation_shim_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_rviz_plugins">

nav2_rviz_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_simple_commander">

nav2_simple_commander
</a>
            
          
            
            
              <span class="label label-default pkg-label">

nav2_smac_planner
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_system_tests">

nav2_system_tests
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_theta_star_planner">

nav2_theta_star_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_util">

nav2_util
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_voxel_grid">

nav2_voxel_grid
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_waypoint_follower">

nav2_waypoint_follower
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/navigation2">

navigation2
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_costmap_filters_demo">

nav2_costmap_filters_demo
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_gradient_costmap_plugin">

nav2_gradient_costmap_plugin
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_msg_costmap_plugin">

nav2_msg_costmap_plugin
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_sms_behavior">

nav2_sms_behavior
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_straightline_planner">

nav2_straightline_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/sam_bot_description">

sam_bot_description
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/spatio_temporal_voxel_layer">

spatio_temporal_voxel_layer
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/teb_local_planner">

teb_local_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/teb_msgs">

teb_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/octomap_mapping">

octomap_mapping
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/octomap_server">

octomap_server
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/github/p/nav2_smac_planner"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/tup-robomaster/tup2023-sentry-nav/tree/lio_WIP/navigation2/nav2_smac_planner"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="github-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#github-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#github-assets" data-toggle="tab"><span class="label label-primary">1</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#github-deps" data-toggle="tab"><span class="label label-primary">22</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#github-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#github-questions" data-toggle="tab"><span id="github-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="github-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>1.0.12</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache-2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/tup-robomaster/tup2023-sentry-nav.git">https://github.com/tup-robomaster/tup2023-sentry-nav.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">lio_WIP</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2023-09-22
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNKNOWN
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/tup2023-sentry-nav/#github-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/tup2023-sentry-nav/#github-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/tup2023-sentry-nav/#github-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Smac global planning plugin: A*, Hybrid-A*, State Lattice
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Steve Macenski</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <em>No additional authors.</em>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/tup-robomaster/tup2023-sentry-nav/tree/lio_WIP/navigation2/nav2_smac_planner/README.md" title="Open in git repository">navigation2/nav2_smac_planner/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="smac-planner">Smac Planner</h1>

<p>The SmacPlanner is a plugin for the Nav2 Planner server. It includes currently 2 distinct plugins:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code>: a highly optimized fully reconfigurable Hybrid-A* implementation supporting Dubin and Reeds-Shepp models (ackermann and car models).</li>
  <li>
<code class="language-plaintext highlighter-rouge">SmacPlanner2D</code>: a highly optimized fully reconfigurable grid-based A* implementation supporting Moore and Von Neumann models.</li>
</ul>

<p>It also introduces the following basic building blocks:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">CostmapDownsampler</code>: A library to take in a costmap object and downsample it to another resolution.</li>
  <li>
<code class="language-plaintext highlighter-rouge">AStar</code>: A generic and highly optimized A* template library used by the planning plugins to search. Template implementations are provided for grid-A<em>, SE2 Hybrid-A</em> planning. Additional template for 3D planning also could be made available.</li>
  <li>
<code class="language-plaintext highlighter-rouge">CollisionChecker</code>: Collision check based on a robot’s radius or footprint.</li>
  <li>
<code class="language-plaintext highlighter-rouge">Smoother</code>: A path smoother to smooth out 2D, Hybrid-A* paths.</li>
</ul>

<p>We have users reporting using this on:</p>
<ul>
  <li>Delivery robots</li>
  <li>Industrial robots</li>
</ul>

<h2 id="introduction">Introduction</h2>

<p>The <code class="language-plaintext highlighter-rouge">nav2_smac_planner</code> package contains an optimized templated A* search algorithm used to create multiple A*-based planners for multiple types of robot platforms. It was built by <a href="https://www.linkedin.com/in/steve-macenski-41a985101/">Steve Macenski</a> while at <a href="https://www.sra.samsung.com/">Samsung Research</a>. We support <strong>circular</strong> differential-drive and omni-directional drive robots using the <code class="language-plaintext highlighter-rouge">SmacPlanner2D</code> planner which implements a cost-aware A* planner. We support <strong>cars, car-like, and ackermann vehicles</strong> using the <code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code> plugin which implements a Hybrid-A* planner. These plugins are also useful for curvature constrained planning, like when planning robot at high speeds to make sure they don’t flip over or otherwise skid out of control. It is also applicable to non-round robots (such as large rectangular or arbitrary shaped robots of differential/omnidirectional drivetrains) that need pose-based collision checking.</p>

<p>The <code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code> implements the Hybrid-A* planner as proposed in <a href="https://ai.stanford.edu/~ddolgov/papers/dolgov_gpp_stair08.pdf">Practical Search Techniques in Path Planning for Autonomous Driving</a>, including hybrid searching, gradient descent smoothing, analytic expansions and hueristic functions.</p>

<p>In summary…</p>

<p>The <code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code> is designed to work with:</p>
<ul>
  <li>Ackermann, car, and car-like robots</li>
  <li>High speed or curvature constrained robots (as to not flip over, skid, or dump load at high speeds)</li>
  <li>Arbitrary shaped, non-circular differential or omnidirectional robots requiring SE2 collision checking with constrained curvatures</li>
</ul>

<p>The <code class="language-plaintext highlighter-rouge">SmacPlanner2D</code> is designed to work with:</p>
<ul>
  <li>Circular, differential or omnidirectional robots</li>
  <li>Relatively small robots with respect to environment size (e.g. RC car in a hallway or large robot in a convention center) that can be approximated by circular footprint.</li>
</ul>

<h2 id="features">Features</h2>

<p>We further improve in the following ways:</p>
<ul>
  <li>Remove need for upsampling by searching with 10x smaller motion primitives (same as their upsampling ratio).</li>
  <li>Multi-resolution search allowing planning to occur at a coarser resolution for wider spaces (O(N^2) faster).</li>
  <li>Cost-aware penalty functions in search resulting in far smoother plans (further reducing requirement to smooth).</li>
  <li>Gradient descent smoother</li>
  <li>Faster planning than original paper by highly optimizing the template A* algorithm.</li>
  <li>Faster planning via precomputed heuristic, motion primitive, and other values.</li>
  <li>Automatically adjusted search motion model sizes by motion model, costmap resolution, and bin sizing.</li>
  <li>Closest path on approach within tolerance if exact path cannot be found or in invalid space.</li>
  <li>Multi-model hybrid searching including Dubin and Reeds-Shepp models. More models may be trivially added.</li>
  <li>High unit and integration test coverage, doxygen documentation.</li>
  <li>Uses modern C++14 language features and individual components are easily reusable.</li>
  <li>Speed optimizations: no data structure graph lookups in main loop, near-zero copy main loop, dynamically generated graph and dynamic programming-based obstacle heuristic, optional recomputation of heuristics for subsiquent planning requests of the same goal, etc.</li>
  <li>Templated Nodes and A* implementation to support additional robot extensions.</li>
  <li>Selective re-evaluation of the obstacle heuristic per goal/map or each iteration, which can speed up subsiquent replanning 20x or more.</li>
</ul>

<p>All of these features (multi-resolution, models, smoother, etc) are also available in the <code class="language-plaintext highlighter-rouge">SmacPlanner2D</code> plugin.</p>

<p>The 2D A* implementation also does not have any of the weird artifacts introduced by the gradient wavefront-based 2D A* implementation in the NavFn Planner. While this 2D A* planner is slightly slower, I believe it’s well worth the increased quality in paths. Though the <code class="language-plaintext highlighter-rouge">SmacPlanner2D</code> is grid-based, any reasonable local trajectory planner - including those supported by Nav2 - will not have any issue with grid-based plans.</p>

<p>Note: In prior releases, a CG smoother largely implementing the original Hybrid-A* paper’s. However, this smoother failed to consistently provide useful results, took too much compute time, and was deprecated. While smoothing a path 95% of the time seems like a “good” solution, we need something far more reliable for practical use. Since we are working with mobile robots and not autonomous cars at 60 mph, we can take some different liberties in smoothing knowing that our local trajectory planners are pretty smart. If you are looking for it, it now lives in the <code class="language-plaintext highlighter-rouge">test/</code> directory in a depreciated folder. This smoother has been replaced by a B-Spline inspired solution which is faster, far more consistent, and simpler to understand. While this smoother is <strong>not</strong> cost-aware, we have added cost-aware penalty functions in the planners themselves to push the plans away from high-cost spaces and we do check for validity of smoothed sections to ensure feasibility.</p>

<h2 id="metrics">Metrics</h2>

<p>The original Hybrid-A* implementation boasted planning times of 50-300ms for planning across 102,400 cell maps with 72 angular bins. We see much faster results in our evaluations:</p>

<ul>
  <li>
<strong>2-20ms</strong> for planning across 147,456 (1.4x larger) cell maps with 72 angular bins.</li>
  <li>
<strong>30-120ms</strong> for planning across 344,128 (3.3x larger) cell map with 72 angular bins.</li>
</ul>

<p>For example, the following path (roughly 85 meters) path took 33ms to compute.</p>

<p><img src="https://raw.githubusercontent.com/tup-robomaster/tup2023-sentry-nav/lio_WIP/navigation2/nav2_smac_planner/test/path.png" alt="alt text"></p>

<h2 id="design">Design</h2>

<p>The basic design centralizes a templated A* implementation that handles the search of a graph of nodes. The implementation is templated by the nodes, <code class="language-plaintext highlighter-rouge">NodeT</code>, which contain the methods needed to compute the hueristics, travel costs, and search neighborhoods. The outcome of this design is then a standard A* implementation that can be used to traverse any type of graph as long as a node template can be created for it.</p>

<p>We provide by default a 2D node template (<code class="language-plaintext highlighter-rouge">Node2D</code>) which does 2D grid-search with either 4 or 8-connected neighborhoods, but the smoother smooths it out on turns. We also provide a Hybrid A* node template (<code class="language-plaintext highlighter-rouge">NodeHybrid</code>) which does SE2 (X, Y, theta) search and collision checking on Dubin or Reeds-Shepp motion models. Additional templates could be easily made and included for 3D grid search and non-grid base searching like routing.</p>

<p>In the ROS2 facing plugin, we take in the global goals and pre-process the data to feed into the templated A* used. This includes processing any requests to downsample the costmap to another resolution to speed up search and smoothing the resulting A* path. For the <code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code> plugin, the path is promised to be kinematically feasible due to the kinematically valid models used in branching search. The 2D A* is also promised to be feasible for differential and omni-directional robots.</p>

<p>We isolated the A*, costmap downsampler, smoother, and Node template objects from ROS2 to allow them to be easily testable independently of ROS or the planner. The only place ROS is used is in the planner plugins themselves.</p>

<h2 id="parameters">Parameters</h2>

<p>See inline description of parameters in the <code class="language-plaintext highlighter-rouge">SmacPlanner</code>. This includes comments as specific parameters apply to <code class="language-plaintext highlighter-rouge">SmacPlanner2D</code> and <code class="language-plaintext highlighter-rouge">SmacPlanner</code> in place.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>planner_server:
  ros__parameters:
    planner_plugins: ["GridBased"]
    use_sim_time: True

    GridBased:
      plugin: "nav2_smac_planner/SmacPlanner"
      tolerance: 0.5                      # tolerance for planning if unable to reach exact pose, in meters, for 2D node
      downsample_costmap: false           # whether or not to downsample the map
      downsampling_factor: 1              # multiplier for the resolution of the costmap layer (e.g. 2 on a 5cm costmap would be 10cm)
      allow_unknown: false                # allow traveling in unknown space
      max_iterations: 1000000             # maximum total iterations to search for before failing (in case unreachable), set to -1 to disable
      max_on_approach_iterations: 1000    # maximum number of iterations to attempt to reach goal once in tolerance, 2D only
      max_planning_time: 3.5              # max time in s for planner to plan, smooth, and upsample. Will scale maximum smoothing and upsampling times based on remaining time after planning.
      motion_model_for_search: "DUBIN"    # 2D Moore, Von Neumann; Hybrid Dubin, Redds-Shepp; State Lattice set internally
      cost_travel_multiplier: 2.0         # For 2D: Cost multiplier to apply to search to steer away from high cost areas. Larger values will place in the center of aisles more exactly (if non-`FREE` cost potential field exists) but take slightly longer to compute. To optimize for speed, a value of 1.0 is reasonable. A reasonable tradeoff value is 2.0. A value of 0.0 effective disables steering away from obstacles and acts like a naive binary search A*.
      angle_quantization_bins: 64         # For Hybrid nodes: Number of angle bins for search, must be 1 for 2D node (no angle search)
      minimum_turning_radius: 0.40        # For Hybrid nodes: minimum turning radius in m of path / vehicle
      angle_quantization_bins: 64         # For Hybrid/Lattice nodes: Number of angle bins for search, must be 1 for 2D node (no angle search)
      analytic_expansion_ratio: 3.5       # For Hybrid/Lattice nodes: The ratio to attempt analytic expansions during search for final approach.
      minimum_turning_radius: 0.40        # For Hybrid/Lattice nodes: minimum turning radius in m of path / vehicle
      reverse_penalty: 2.1                # For Reeds-Shepp model: penalty to apply if motion is reversing, must be =&gt; 1
      change_penalty: 0.15                # For Hybrid nodes: penalty to apply if motion is changing directions, must be &gt;= 0
      non_straight_penalty: 1.50          # For Hybrid nodes: penalty to apply if motion is non-straight, must be =&gt; 1
      cost_penalty: 1.7                   # For Hybrid nodes: penalty to apply to higher cost areas when adding into the obstacle map dynamic programming distance expansion heuristic. This drives the robot more towards the center of passages. A value between 1.3 - 3.5 is reasonable.
      lookup_table_size: 20               # For Hybrid nodes: Size of the dubin/reeds-sheep distance window to cache, in meters.
      cache_obstacle_heuristic: True      # For Hybrid nodes: Cache the obstacle map dynamic programming distance expansion heuristic between subsiquent replannings of the same goal location. Dramatically speeds up replanning performance (40x) if costmap is largely static.     
      smoother:
        max_iterations: 1000
        w_smooth: 0.3
        w_data: 0.2
        tolerance: 1e-10

</code></pre></div></div>

<h2 id="topics">Topics</h2>

<table>
  <thead>
    <tr>
      <th>Topic</th>
      <th>Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>unsmoothed_path</td>
      <td>nav_msgs/Path</td>
    </tr>
  </tbody>
</table>

<h2 id="install">Install</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install ros-&lt;ros2-distro&gt;-smac-planner

</code></pre></div></div>

<h2 id="etc-important-side-notes">Etc (Important Side Notes)</h2>

<h3 id="potential-fields">Potential Fields</h3>

<p>Many users and default navigation configuration files I find are really missing the point of the inflation layer. While it’s true that you can simply inflate a small radius around the walls, the <em>true</em> value of the inflation layer is creating a consistent potential field around the entire map.</p>

<p>Some of the most popular tuning guides for Navigation / Nav2 even <a href="https://arxiv.org/pdf/1706.09068.pdf">call this out specifically</a> that there’s substantial benefit to creating a gentle potential field across the width of the map - after inscribed costs are applied - yet very few users do this.</p>

<p>This habit actually results in paths produced by NavFn, Global Planner, and now SmacPlanner to be somewhat suboptimal. They really want to look for a smooth potential field rather than wide open 0-cost spaces in order to stay in the middle of spaces and deal with close-by moving obstacles better.</p>

<p>So it is my recommendation in using this package, as well as all other cost-aware search planners available in ROS, to increase your inflation layer cost scale in order to adequately produce a smooth potential across the entire map. For very large open spaces, its fine to have 0-cost areas in the middle, but for halls, aisles, and similar; <strong>please create a smooth potential to provide the best performance</strong>.</p>

<h3 id="hybrid-a-turning-radius">Hybrid-A* Turning Radius’</h3>

<p>A very reasonable and logical assumption would be to set the <code class="language-plaintext highlighter-rouge">minimum_turning_radius</code> to the kinematic limits of your vehicle. For an ackermann car, that’s a physical quantity; while for differential or omni robots, its a bit of a dance around what kind of turns you’d like your robot to be able to make. Obviously setting this to something insanely small (like 20 cm) means you have alot of options, but also probably means the raw output plans won’t be very straight and smooth when you have 2+ meter wide aisles to work in.</p>

<p>I assert that you should also consider the environment you operate within when setting this. While you should <strong>absolutely not</strong> set this to be any smaller than the actual limits of your vehicle, there are some useful side effects of increasing this value in practical use. If you work in an area wider than the turning circle of your robot, you have some options that will ultimately improve the performance of the planner (in terms of CPU and compute time) as well as generate paths that are more “smooth” directly out of the planner – not requiring any explicit path smoothing.</p>

<p>By default, <code class="language-plaintext highlighter-rouge">0.4m</code> is the setting which I think is “reasonable” for the smaller scale industrial grade robots (think Simbe, the small Fetch, or Locus robots) resulting in faster plans and less “wobbly” motions that do not require post-smoothing – further improving CPU performance. I selected <code class="language-plaintext highlighter-rouge">0.4m</code> as a trade off between practical robots mentioned above and hobbyist users with a tiny-little-turtlebot-3 which might still need to navigate around some smaller cavities.</p>

<h3 id="costmap-resolutions">Costmap Resolutions</h3>

<p>We provide for the Hybrid-A* and 2D A* implementations a costmap downsampler option. This can be <strong>incredible</strong> beneficial when planning very long paths in larger spaces. The motion models for SE2 planning and neighborhood search in 2D planning is proportional to the costmap resolution. By downsampling it, you can N^2 reduce the number of expansions required to achieve a particular goal. However, the lower the resolution, the larger small obstacles appear and you won’t be able to get super close to obstacles. This is a trade-off to make and test. Some numbers I’ve seen are 2-4x drops in planning CPU time for a 2-3x downsample rate. For long and complex paths, I was able to get it « 100ms at only a 2x downsample rate from a plan that otherwise took upward of 400ms.</p>

<p>I recommend users using a 5cm resolution costmap and playing with the different values of downsampling rate until they achieve what they think is optimal performance (lowest number of expansions vs. necessity to achieve fine goal poses). Then, I would recommend to change the global costmap resolution to this new value. That way you don’t own the compute of downsampling and maintaining a higher-resolution costmap that isn’t used.</p>

<p>Remember, the global costmap is <strong>only</strong> there to provide an environment for the planner to work in. It is not there for human-viewing even if a more fine resolution costmap is more human “pleasing”. If you use multiple planners in the planner server, then you will want to use the highest resolution for the most needed planner and then use the downsampler to downsample to the Hybrid-A* resolution.</p>

<h3 id="no-path-found-for-clearly-valid-goals-or-long-compute-times">No path found for clearly valid goals or long compute times</h3>

<p>Before addressing the section below, make sure you have an appropriately set max iterations parameter. If you have a 1 km2 sized warehouse, clearly 5000 expansions will be insufficient. Try increasing this value if you’re unable to achieve goals or disable it with the <code class="language-plaintext highlighter-rouge">-1</code> value to see if you are now able to plan within a reasonable time period. If you still have issues, there is a secondary effect which could be happening that is good to be aware of.</p>

<p>In maps with small gaps or holes, you may see an issue planning to certain regions. If there are gaps small enough to be untraversible yet large enough that inflation doesn’t close it up with inflated costs, then it is recommended to lightly touch up the map or increase your inflation to remove those spaces from non-lethal space.</p>

<p>Seeing the figures below, you’ll see an attempt to plan into a “U” shaped region across the map. The first figure shows the small gap in the map (from an imperfect SLAM session) which is nearly traversible, but not quite. From the starting location, that gap yeilds the shortest path to the goal, so the heuristics will attempt to route the paths in that direction. However, it is not possible to actually pass with a kinematically valid path with the footprint set. As a result, the planner expands all of its maximum 1,000,000 iterations attempting to fit through it (visualized in red). If an infinite number of iterations were allowed, eventually a valid path would be found, but might take significant time.</p>

<p>By simply increasing the footprint (a bit hackier, the best solution is to edit the map to make this area impassible), then that gap is now properly blocked as un-navigable. In the second figure, you can see that the heuristics influence the expansion down a navigable route and is able to find a path in less than 10,000 iterations (or about 110ms). It is easy now!</p>

<p>As such, it is recommended if you have sparse SLAM maps, gaps or holes in your map, that you lightly post-process them to fill those gaps or increasing your footprint’s padding or radius to make these areas invalid. Without it, it might waste expansions on this small corridor that: A) you dont want your robot actually using B) probably isnt actually valid and a SLAM artifact and C) if there’s a more open space, you’d rather it use that.</p>

<p><img src="https://raw.githubusercontent.com/tup-robomaster/tup2023-sentry-nav/lio_WIP/navigation2/nav2_smac_planner/media/A.png" alt="">
<img src="https://raw.githubusercontent.com/tup-robomaster/tup2023-sentry-nav/lio_WIP/navigation2/nav2_smac_planner/media/B.png" alt=""></p>

<p>One interesting thing to note from the second figure is that you see a number of expansions in open space. This is due to travel / heuristic values being so similar, tuning values of the penalty weights can have a decent impact there. The defaults are set as a good middle ground between large open spaces and confined aisles (environment specific tuning could be done to reduce the number of expansions for a specific map, speeding up the planner). The planner actually runs substantially faster the more confined the areas of search / environments are – but still plenty fast for even wide open areas!</p>

<p>Sometimes visualizing the expansions is very useful to debug potential concerns (why does this goal take longer to compute, why can’t I find a path, etc), should you on rare occasion run into an issue. The following snippet is what I used to visualize the expansion in the images above which may help you in future endevours.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// In createPath()</span>
<span class="k">static</span> <span class="k">auto</span> <span class="n">node</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"test"</span><span class="p">);</span>
<span class="k">static</span> <span class="k">auto</span> <span class="n">pub</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">create_publisher</span><span class="o">&lt;</span><span class="n">geometry_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">PoseArray</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"expansions"</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">geometry_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">PoseArray</span> <span class="n">msg</span><span class="p">;</span>
<span class="n">geometry_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">Pose</span> <span class="n">msg_pose</span><span class="p">;</span>
<span class="n">msg</span><span class="p">.</span><span class="n">header</span><span class="p">.</span><span class="n">stamp</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">now</span><span class="p">();</span>
<span class="n">msg</span><span class="p">.</span><span class="n">header</span><span class="p">.</span><span class="n">frame_id</span> <span class="o">=</span> <span class="s">"map"</span><span class="p">;</span>

<span class="p">...</span>

<span class="c1">// Each time we expand a new node </span>
<span class="n">msg_pose</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">_costmap</span><span class="o">-&gt;</span><span class="n">getOriginX</span><span class="p">()</span> <span class="o">+</span> <span class="p">(</span><span class="n">current_node</span><span class="o">-&gt;</span><span class="n">pose</span><span class="p">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">_costmap</span><span class="o">-&gt;</span><span class="n">getResolution</span><span class="p">());</span>
<span class="n">msg_pose</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">_costmap</span><span class="o">-&gt;</span><span class="n">getOriginY</span><span class="p">()</span> <span class="o">+</span> <span class="p">(</span><span class="n">current_node</span><span class="o">-&gt;</span><span class="n">pose</span><span class="p">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">_costmap</span><span class="o">-&gt;</span><span class="n">getResolution</span><span class="p">());</span>
<span class="n">msg</span><span class="p">.</span><span class="n">poses</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">msg_pose</span><span class="p">);</span>

<span class="p">...</span> 

<span class="c1">// On backtrace or failure</span>
<span class="n">pub</span><span class="o">-&gt;</span><span class="n">publish</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span>

</code></pre></div></div>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <em>No CHANGELOG found.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/nav2_smac_planner/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#github">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#github">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#github">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_gtest#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_gtest#github">ament_cmake_gtest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_pytest#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_pytest#github">ament_cmake_pytest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#github">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp_action#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp_action#github">rclcpp_action  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp_lifecycle#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp_lifecycle#github">rclcpp_lifecycle  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/visualization_msgs#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/visualization_msgs#github">visualization_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_util#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_util#github">nav2_util  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_msgs#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_msgs#github">nav2_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav_msgs#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav_msgs#github">nav_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/geometry_msgs#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/geometry_msgs#github">geometry_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/builtin_interfaces#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/builtin_interfaces#github">builtin_interfaces  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_common#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_common#github">nav2_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/tf2_ros#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/tf2_ros#github">tf2_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_costmap_2d#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_costmap_2d#github">nav2_costmap_2d  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_core#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_core#github">nav2_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/pluginlib#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/pluginlib#github">pluginlib  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/eigen3_cmake_module#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/eigen3_cmake_module#github">eigen3_cmake_module  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ompl#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ompl#github">ompl  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/eigen">eigen</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/navigation2#github">navigation2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/navigation2#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/navigation2#github">navigation2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/navigation2#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/navigation2#github">navigation2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/navigation2#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/navigation2#github">navigation2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/navigation2#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/navigation2#github">navigation2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/navigation2#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/navigation2#github">navigation2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/navigation2#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/navigation2#github">navigation2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/navigation2#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/pb2025_nav_bringup#github">pb2025_nav_bringup</a></td>
                      <td class="text-center">
                        
                        <a href="/p/pb2025_nav_bringup#github-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/rover_navigation#github">rover_navigation</a></td>
                      <td class="text-center">
                        
                        <a href="/p/rover_navigation#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <ul>
            
              <li><a href="https://github.com/tup-robomaster/tup2023-sentry-nav/tree/lio_WIP/navigation2/nav2_smac_planner//global_planner_plugin.xml" target="_blank">nav2_core</a></li>
            
          </ul>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>nav2_smac_planner</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="github-question-list" class="panel-body" style="display: none;"></div>
      <div id="github-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/nav2_smac_planner+github">here</a>.</p>
      </div>
      <div id="github-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/tup-robomaster/tup2023-sentry-nav.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/github/p/nav2_smac_planner"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/tup-robomaster/tup2023-sentry-nav/tree/lio_WIP/navigation2/nav2_smac_planner"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/nav2_smac_planner">nav2_smac_planner</a> <small>package from <a style="text-decoration:none" href="/r/navigation2/github-ros-planning-navigation2">navigation2</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_amcl">

nav2_amcl
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_behavior_tree">

nav2_behavior_tree
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_bringup">

nav2_bringup
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_gazebo_spawner">

nav2_gazebo_spawner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_bt_navigator">

nav2_bt_navigator
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_common">

nav2_common
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_controller">

nav2_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_core">

nav2_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_costmap_2d">

nav2_costmap_2d
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/costmap_queue">

costmap_queue
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_core">

dwb_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_critics">

dwb_critics
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_msgs">

dwb_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_plugins">

dwb_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_dwb_controller">

nav2_dwb_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav_2d_msgs">

nav_2d_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav_2d_utils">

nav_2d_utils
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_lifecycle_manager">

nav2_lifecycle_manager
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_map_server">

nav2_map_server
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_msgs">

nav2_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_navfn_planner">

nav2_navfn_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_planner">

nav2_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_recoveries">

nav2_recoveries
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_regulated_pure_pursuit_controller">

nav2_regulated_pure_pursuit_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_rotation_shim_controller">

nav2_rotation_shim_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_rviz_plugins">

nav2_rviz_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_simple_commander">

nav2_simple_commander
</a>
            
          
            
            
              <span class="label label-default pkg-label">

nav2_smac_planner
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_system_tests">

nav2_system_tests
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_theta_star_planner">

nav2_theta_star_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_util">

nav2_util
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_voxel_grid">

nav2_voxel_grid
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_waypoint_follower">

nav2_waypoint_follower
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/navigation2">

navigation2
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/galactic/p/nav2_smac_planner"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/ros-planning/navigation2/tree/galactic/nav2_smac_planner"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="galactic-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#galactic-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#galactic-assets" data-toggle="tab"><span class="label label-primary">1</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#galactic-deps" data-toggle="tab"><span class="label label-primary">22</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#galactic-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#galactic-questions" data-toggle="tab"><span id="galactic-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="galactic-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>1.0.12</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache-2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS 2 Navigation Framework and System</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-planning/navigation2.git">https://github.com/ros-planning/navigation2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">galactic</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2022-09-15
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">robotics</span> <span class="label label-default">navigation</span> <span class="label label-default">ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/navigation2/#galactic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/navigation2/#galactic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/navigation2/#galactic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Smac global planning plugin: A*, Hybrid-A*, State Lattice
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Steve Macenski</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <em>No additional authors.</em>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/ros-planning/navigation2/tree/galactic/nav2_smac_planner/README.md" title="Open in git repository">nav2_smac_planner/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="smac-planner">Smac Planner</h1>

<p>The SmacPlanner is a plugin for the Nav2 Planner server. It includes currently 2 distinct plugins:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code>: a highly optimized fully reconfigurable Hybrid-A* implementation supporting Dubin and Reeds-Shepp models (ackermann and car models).</li>
  <li>
<code class="language-plaintext highlighter-rouge">SmacPlanner2D</code>: a highly optimized fully reconfigurable grid-based A* implementation supporting Moore and Von Neumann models.</li>
</ul>

<p>It also introduces the following basic building blocks:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">CostmapDownsampler</code>: A library to take in a costmap object and downsample it to another resolution.</li>
  <li>
<code class="language-plaintext highlighter-rouge">AStar</code>: A generic and highly optimized A* template library used by the planning plugins to search. Template implementations are provided for grid-A<em>, SE2 Hybrid-A</em> planning. Additional template for 3D planning also could be made available.</li>
  <li>
<code class="language-plaintext highlighter-rouge">CollisionChecker</code>: Collision check based on a robot’s radius or footprint.</li>
  <li>
<code class="language-plaintext highlighter-rouge">Smoother</code>: A path smoother to smooth out 2D, Hybrid-A* paths.</li>
</ul>

<p>We have users reporting using this on:</p>
<ul>
  <li>Delivery robots</li>
  <li>Industrial robots</li>
</ul>

<h2 id="introduction">Introduction</h2>

<p>The <code class="language-plaintext highlighter-rouge">nav2_smac_planner</code> package contains an optimized templated A* search algorithm used to create multiple A*-based planners for multiple types of robot platforms. It was built by <a href="https://www.linkedin.com/in/steve-macenski-41a985101/">Steve Macenski</a> while at <a href="https://www.sra.samsung.com/">Samsung Research</a>. We support <strong>circular</strong> differential-drive and omni-directional drive robots using the <code class="language-plaintext highlighter-rouge">SmacPlanner2D</code> planner which implements a cost-aware A* planner. We support <strong>cars, car-like, and ackermann vehicles</strong> using the <code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code> plugin which implements a Hybrid-A* planner. These plugins are also useful for curvature constrained planning, like when planning robot at high speeds to make sure they don’t flip over or otherwise skid out of control. It is also applicable to non-round robots (such as large rectangular or arbitrary shaped robots of differential/omnidirectional drivetrains) that need pose-based collision checking.</p>

<p>The <code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code> implements the Hybrid-A* planner as proposed in <a href="https://ai.stanford.edu/~ddolgov/papers/dolgov_gpp_stair08.pdf">Practical Search Techniques in Path Planning for Autonomous Driving</a>, including hybrid searching, gradient descent smoothing, analytic expansions and hueristic functions.</p>

<p>In summary…</p>

<p>The <code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code> is designed to work with:</p>
<ul>
  <li>Ackermann, car, and car-like robots</li>
  <li>High speed or curvature constrained robots (as to not flip over, skid, or dump load at high speeds)</li>
  <li>Arbitrary shaped, non-circular differential or omnidirectional robots requiring SE2 collision checking with constrained curvatures</li>
</ul>

<p>The <code class="language-plaintext highlighter-rouge">SmacPlanner2D</code> is designed to work with:</p>
<ul>
  <li>Circular, differential or omnidirectional robots</li>
  <li>Relatively small robots with respect to environment size (e.g. RC car in a hallway or large robot in a convention center) that can be approximated by circular footprint.</li>
</ul>

<h2 id="features">Features</h2>

<p>We further improve in the following ways:</p>
<ul>
  <li>Remove need for upsampling by searching with 10x smaller motion primitives (same as their upsampling ratio).</li>
  <li>Multi-resolution search allowing planning to occur at a coarser resolution for wider spaces (O(N^2) faster).</li>
  <li>Cost-aware penalty functions in search resulting in far smoother plans (further reducing requirement to smooth).</li>
  <li>Gradient descent smoother</li>
  <li>Faster planning than original paper by highly optimizing the template A* algorithm.</li>
  <li>Faster planning via precomputed heuristic, motion primitive, and other values.</li>
  <li>Automatically adjusted search motion model sizes by motion model, costmap resolution, and bin sizing.</li>
  <li>Closest path on approach within tolerance if exact path cannot be found or in invalid space.</li>
  <li>Multi-model hybrid searching including Dubin and Reeds-Shepp models. More models may be trivially added.</li>
  <li>High unit and integration test coverage, doxygen documentation.</li>
  <li>Uses modern C++14 language features and individual components are easily reusable.</li>
  <li>Speed optimizations: no data structure graph lookups in main loop, near-zero copy main loop, dynamically generated graph and dynamic programming-based obstacle heuristic, optional recomputation of heuristics for subsiquent planning requests of the same goal, etc.</li>
  <li>Templated Nodes and A* implementation to support additional robot extensions.</li>
  <li>Selective re-evaluation of the obstacle heuristic per goal/map or each iteration, which can speed up subsiquent replanning 20x or more.</li>
</ul>

<p>All of these features (multi-resolution, models, smoother, etc) are also available in the <code class="language-plaintext highlighter-rouge">SmacPlanner2D</code> plugin.</p>

<p>The 2D A* implementation also does not have any of the weird artifacts introduced by the gradient wavefront-based 2D A* implementation in the NavFn Planner. While this 2D A* planner is slightly slower, I believe it’s well worth the increased quality in paths. Though the <code class="language-plaintext highlighter-rouge">SmacPlanner2D</code> is grid-based, any reasonable local trajectory planner - including those supported by Nav2 - will not have any issue with grid-based plans.</p>

<p>Note: In prior releases, a CG smoother largely implementing the original Hybrid-A* paper’s. However, this smoother failed to consistently provide useful results, took too much compute time, and was deprecated. While smoothing a path 95% of the time seems like a “good” solution, we need something far more reliable for practical use. Since we are working with mobile robots and not autonomous cars at 60 mph, we can take some different liberties in smoothing knowing that our local trajectory planners are pretty smart. If you are looking for it, it now lives in the <code class="language-plaintext highlighter-rouge">test/</code> directory in a depreciated folder. This smoother has been replaced by a B-Spline inspired solution which is faster, far more consistent, and simpler to understand. While this smoother is <strong>not</strong> cost-aware, we have added cost-aware penalty functions in the planners themselves to push the plans away from high-cost spaces and we do check for validity of smoothed sections to ensure feasibility.</p>

<h2 id="metrics">Metrics</h2>

<p>The original Hybrid-A* implementation boasted planning times of 50-300ms for planning across 102,400 cell maps with 72 angular bins. We see much faster results in our evaluations:</p>

<ul>
  <li>
<strong>2-20ms</strong> for planning across 147,456 (1.4x larger) cell maps with 72 angular bins.</li>
  <li>
<strong>30-120ms</strong> for planning across 344,128 (3.3x larger) cell map with 72 angular bins.</li>
</ul>

<p>For example, the following path (roughly 85 meters) path took 33ms to compute.</p>

<p><img src="https://raw.githubusercontent.com/ros-planning/navigation2/galactic/nav2_smac_planner/test/path.png" alt="alt text"></p>

<h2 id="design">Design</h2>

<p>The basic design centralizes a templated A* implementation that handles the search of a graph of nodes. The implementation is templated by the nodes, <code class="language-plaintext highlighter-rouge">NodeT</code>, which contain the methods needed to compute the hueristics, travel costs, and search neighborhoods. The outcome of this design is then a standard A* implementation that can be used to traverse any type of graph as long as a node template can be created for it.</p>

<p>We provide by default a 2D node template (<code class="language-plaintext highlighter-rouge">Node2D</code>) which does 2D grid-search with either 4 or 8-connected neighborhoods, but the smoother smooths it out on turns. We also provide a Hybrid A* node template (<code class="language-plaintext highlighter-rouge">NodeHybrid</code>) which does SE2 (X, Y, theta) search and collision checking on Dubin or Reeds-Shepp motion models. Additional templates could be easily made and included for 3D grid search and non-grid base searching like routing.</p>

<p>In the ROS2 facing plugin, we take in the global goals and pre-process the data to feed into the templated A* used. This includes processing any requests to downsample the costmap to another resolution to speed up search and smoothing the resulting A* path. For the <code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code> plugin, the path is promised to be kinematically feasible due to the kinematically valid models used in branching search. The 2D A* is also promised to be feasible for differential and omni-directional robots.</p>

<p>We isolated the A*, costmap downsampler, smoother, and Node template objects from ROS2 to allow them to be easily testable independently of ROS or the planner. The only place ROS is used is in the planner plugins themselves.</p>

<h2 id="parameters">Parameters</h2>

<p>See inline description of parameters in the <code class="language-plaintext highlighter-rouge">SmacPlanner</code>. This includes comments as specific parameters apply to <code class="language-plaintext highlighter-rouge">SmacPlanner2D</code> and <code class="language-plaintext highlighter-rouge">SmacPlanner</code> in place.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>planner_server:
  ros__parameters:
    planner_plugins: ["GridBased"]
    use_sim_time: True

    GridBased:
      plugin: "nav2_smac_planner/SmacPlanner"
      tolerance: 0.5                      # tolerance for planning if unable to reach exact pose, in meters, for 2D node
      downsample_costmap: false           # whether or not to downsample the map
      downsampling_factor: 1              # multiplier for the resolution of the costmap layer (e.g. 2 on a 5cm costmap would be 10cm)
      allow_unknown: false                # allow traveling in unknown space
      max_iterations: 1000000             # maximum total iterations to search for before failing (in case unreachable), set to -1 to disable
      max_on_approach_iterations: 1000    # maximum number of iterations to attempt to reach goal once in tolerance, 2D only
      max_planning_time: 3.5              # max time in s for planner to plan, smooth, and upsample. Will scale maximum smoothing and upsampling times based on remaining time after planning.
      motion_model_for_search: "DUBIN"    # 2D Moore, Von Neumann; Hybrid Dubin, Redds-Shepp; State Lattice set internally
      cost_travel_multiplier: 2.0         # For 2D: Cost multiplier to apply to search to steer away from high cost areas. Larger values will place in the center of aisles more exactly (if non-`FREE` cost potential field exists) but take slightly longer to compute. To optimize for speed, a value of 1.0 is reasonable. A reasonable tradeoff value is 2.0. A value of 0.0 effective disables steering away from obstacles and acts like a naive binary search A*.
      angle_quantization_bins: 64         # For Hybrid nodes: Number of angle bins for search, must be 1 for 2D node (no angle search)
      minimum_turning_radius: 0.40        # For Hybrid nodes: minimum turning radius in m of path / vehicle
      angle_quantization_bins: 64         # For Hybrid/Lattice nodes: Number of angle bins for search, must be 1 for 2D node (no angle search)
      analytic_expansion_ratio: 3.5       # For Hybrid/Lattice nodes: The ratio to attempt analytic expansions during search for final approach.
      minimum_turning_radius: 0.40        # For Hybrid/Lattice nodes: minimum turning radius in m of path / vehicle
      reverse_penalty: 2.1                # For Reeds-Shepp model: penalty to apply if motion is reversing, must be =&gt; 1
      change_penalty: 0.15                # For Hybrid nodes: penalty to apply if motion is changing directions, must be &gt;= 0
      non_straight_penalty: 1.50          # For Hybrid nodes: penalty to apply if motion is non-straight, must be =&gt; 1
      cost_penalty: 1.7                   # For Hybrid nodes: penalty to apply to higher cost areas when adding into the obstacle map dynamic programming distance expansion heuristic. This drives the robot more towards the center of passages. A value between 1.3 - 3.5 is reasonable.
      lookup_table_size: 20               # For Hybrid nodes: Size of the dubin/reeds-sheep distance window to cache, in meters.
      cache_obstacle_heuristic: True      # For Hybrid nodes: Cache the obstacle map dynamic programming distance expansion heuristic between subsiquent replannings of the same goal location. Dramatically speeds up replanning performance (40x) if costmap is largely static.     
      smoother:
        max_iterations: 1000
        w_smooth: 0.3
        w_data: 0.2
        tolerance: 1e-10

</code></pre></div></div>

<h2 id="topics">Topics</h2>

<table>
  <thead>
    <tr>
      <th>Topic</th>
      <th>Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>unsmoothed_path</td>
      <td>nav_msgs/Path</td>
    </tr>
  </tbody>
</table>

<h2 id="install">Install</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install ros-&lt;ros2-distro&gt;-smac-planner

</code></pre></div></div>

<h2 id="etc-important-side-notes">Etc (Important Side Notes)</h2>

<h3 id="potential-fields">Potential Fields</h3>

<p>Many users and default navigation configuration files I find are really missing the point of the inflation layer. While it’s true that you can simply inflate a small radius around the walls, the <em>true</em> value of the inflation layer is creating a consistent potential field around the entire map.</p>

<p>Some of the most popular tuning guides for Navigation / Nav2 even <a href="https://arxiv.org/pdf/1706.09068.pdf">call this out specifically</a> that there’s substantial benefit to creating a gentle potential field across the width of the map - after inscribed costs are applied - yet very few users do this.</p>

<p>This habit actually results in paths produced by NavFn, Global Planner, and now SmacPlanner to be somewhat suboptimal. They really want to look for a smooth potential field rather than wide open 0-cost spaces in order to stay in the middle of spaces and deal with close-by moving obstacles better.</p>

<p>So it is my recommendation in using this package, as well as all other cost-aware search planners available in ROS, to increase your inflation layer cost scale in order to adequately produce a smooth potential across the entire map. For very large open spaces, its fine to have 0-cost areas in the middle, but for halls, aisles, and similar; <strong>please create a smooth potential to provide the best performance</strong>.</p>

<h3 id="hybrid-a-turning-radius">Hybrid-A* Turning Radius’</h3>

<p>A very reasonable and logical assumption would be to set the <code class="language-plaintext highlighter-rouge">minimum_turning_radius</code> to the kinematic limits of your vehicle. For an ackermann car, that’s a physical quantity; while for differential or omni robots, its a bit of a dance around what kind of turns you’d like your robot to be able to make. Obviously setting this to something insanely small (like 20 cm) means you have alot of options, but also probably means the raw output plans won’t be very straight and smooth when you have 2+ meter wide aisles to work in.</p>

<p>I assert that you should also consider the environment you operate within when setting this. While you should <strong>absolutely not</strong> set this to be any smaller than the actual limits of your vehicle, there are some useful side effects of increasing this value in practical use. If you work in an area wider than the turning circle of your robot, you have some options that will ultimately improve the performance of the planner (in terms of CPU and compute time) as well as generate paths that are more “smooth” directly out of the planner – not requiring any explicit path smoothing.</p>

<p>By default, <code class="language-plaintext highlighter-rouge">0.4m</code> is the setting which I think is “reasonable” for the smaller scale industrial grade robots (think Simbe, the small Fetch, or Locus robots) resulting in faster plans and less “wobbly” motions that do not require post-smoothing – further improving CPU performance. I selected <code class="language-plaintext highlighter-rouge">0.4m</code> as a trade off between practical robots mentioned above and hobbyist users with a tiny-little-turtlebot-3 which might still need to navigate around some smaller cavities.</p>

<h3 id="costmap-resolutions">Costmap Resolutions</h3>

<p>We provide for the Hybrid-A* and 2D A* implementations a costmap downsampler option. This can be <strong>incredible</strong> beneficial when planning very long paths in larger spaces. The motion models for SE2 planning and neighborhood search in 2D planning is proportional to the costmap resolution. By downsampling it, you can N^2 reduce the number of expansions required to achieve a particular goal. However, the lower the resolution, the larger small obstacles appear and you won’t be able to get super close to obstacles. This is a trade-off to make and test. Some numbers I’ve seen are 2-4x drops in planning CPU time for a 2-3x downsample rate. For long and complex paths, I was able to get it « 100ms at only a 2x downsample rate from a plan that otherwise took upward of 400ms.</p>

<p>I recommend users using a 5cm resolution costmap and playing with the different values of downsampling rate until they achieve what they think is optimal performance (lowest number of expansions vs. necessity to achieve fine goal poses). Then, I would recommend to change the global costmap resolution to this new value. That way you don’t own the compute of downsampling and maintaining a higher-resolution costmap that isn’t used.</p>

<p>Remember, the global costmap is <strong>only</strong> there to provide an environment for the planner to work in. It is not there for human-viewing even if a more fine resolution costmap is more human “pleasing”. If you use multiple planners in the planner server, then you will want to use the highest resolution for the most needed planner and then use the downsampler to downsample to the Hybrid-A* resolution.</p>

<h3 id="no-path-found-for-clearly-valid-goals-or-long-compute-times">No path found for clearly valid goals or long compute times</h3>

<p>Before addressing the section below, make sure you have an appropriately set max iterations parameter. If you have a 1 km2 sized warehouse, clearly 5000 expansions will be insufficient. Try increasing this value if you’re unable to achieve goals or disable it with the <code class="language-plaintext highlighter-rouge">-1</code> value to see if you are now able to plan within a reasonable time period. If you still have issues, there is a secondary effect which could be happening that is good to be aware of.</p>

<p>In maps with small gaps or holes, you may see an issue planning to certain regions. If there are gaps small enough to be untraversible yet large enough that inflation doesn’t close it up with inflated costs, then it is recommended to lightly touch up the map or increase your inflation to remove those spaces from non-lethal space.</p>

<p>Seeing the figures below, you’ll see an attempt to plan into a “U” shaped region across the map. The first figure shows the small gap in the map (from an imperfect SLAM session) which is nearly traversible, but not quite. From the starting location, that gap yeilds the shortest path to the goal, so the heuristics will attempt to route the paths in that direction. However, it is not possible to actually pass with a kinematically valid path with the footprint set. As a result, the planner expands all of its maximum 1,000,000 iterations attempting to fit through it (visualized in red). If an infinite number of iterations were allowed, eventually a valid path would be found, but might take significant time.</p>

<p>By simply increasing the footprint (a bit hackier, the best solution is to edit the map to make this area impassible), then that gap is now properly blocked as un-navigable. In the second figure, you can see that the heuristics influence the expansion down a navigable route and is able to find a path in less than 10,000 iterations (or about 110ms). It is easy now!</p>

<p>As such, it is recommended if you have sparse SLAM maps, gaps or holes in your map, that you lightly post-process them to fill those gaps or increasing your footprint’s padding or radius to make these areas invalid. Without it, it might waste expansions on this small corridor that: A) you dont want your robot actually using B) probably isnt actually valid and a SLAM artifact and C) if there’s a more open space, you’d rather it use that.</p>

<p><img src="https://raw.githubusercontent.com/ros-planning/navigation2/galactic/nav2_smac_planner/media/A.png" alt="">
<img src="https://raw.githubusercontent.com/ros-planning/navigation2/galactic/nav2_smac_planner/media/B.png" alt=""></p>

<p>One interesting thing to note from the second figure is that you see a number of expansions in open space. This is due to travel / heuristic values being so similar, tuning values of the penalty weights can have a decent impact there. The defaults are set as a good middle ground between large open spaces and confined aisles (environment specific tuning could be done to reduce the number of expansions for a specific map, speeding up the planner). The planner actually runs substantially faster the more confined the areas of search / environments are – but still plenty fast for even wide open areas!</p>

<p>Sometimes visualizing the expansions is very useful to debug potential concerns (why does this goal take longer to compute, why can’t I find a path, etc), should you on rare occasion run into an issue. The following snippet is what I used to visualize the expansion in the images above which may help you in future endevours.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// In createPath()</span>
<span class="k">static</span> <span class="k">auto</span> <span class="n">node</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"test"</span><span class="p">);</span>
<span class="k">static</span> <span class="k">auto</span> <span class="n">pub</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">create_publisher</span><span class="o">&lt;</span><span class="n">geometry_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">PoseArray</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"expansions"</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">geometry_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">PoseArray</span> <span class="n">msg</span><span class="p">;</span>
<span class="n">geometry_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">Pose</span> <span class="n">msg_pose</span><span class="p">;</span>
<span class="n">msg</span><span class="p">.</span><span class="n">header</span><span class="p">.</span><span class="n">stamp</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">now</span><span class="p">();</span>
<span class="n">msg</span><span class="p">.</span><span class="n">header</span><span class="p">.</span><span class="n">frame_id</span> <span class="o">=</span> <span class="s">"map"</span><span class="p">;</span>

<span class="p">...</span>

<span class="c1">// Each time we expand a new node </span>
<span class="n">msg_pose</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">_costmap</span><span class="o">-&gt;</span><span class="n">getOriginX</span><span class="p">()</span> <span class="o">+</span> <span class="p">(</span><span class="n">current_node</span><span class="o">-&gt;</span><span class="n">pose</span><span class="p">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">_costmap</span><span class="o">-&gt;</span><span class="n">getResolution</span><span class="p">());</span>
<span class="n">msg_pose</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">_costmap</span><span class="o">-&gt;</span><span class="n">getOriginY</span><span class="p">()</span> <span class="o">+</span> <span class="p">(</span><span class="n">current_node</span><span class="o">-&gt;</span><span class="n">pose</span><span class="p">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">_costmap</span><span class="o">-&gt;</span><span class="n">getResolution</span><span class="p">());</span>
<span class="n">msg</span><span class="p">.</span><span class="n">poses</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">msg_pose</span><span class="p">);</span>

<span class="p">...</span> 

<span class="c1">// On backtrace or failure</span>
<span class="n">pub</span><span class="o">-&gt;</span><span class="n">publish</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span>

</code></pre></div></div>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <em>No CHANGELOG found.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/nav2_smac_planner/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#galactic">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#galactic">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#galactic">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_gtest#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_gtest#galactic">ament_cmake_gtest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_pytest#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_pytest#galactic">ament_cmake_pytest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#galactic">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp_action#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp_action#galactic">rclcpp_action  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp_lifecycle#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp_lifecycle#galactic">rclcpp_lifecycle  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/visualization_msgs#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/visualization_msgs#galactic">visualization_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_util#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_util#galactic">nav2_util  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_msgs#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_msgs#galactic">nav2_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav_msgs#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav_msgs#galactic">nav_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/geometry_msgs#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/geometry_msgs#galactic">geometry_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/builtin_interfaces#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/builtin_interfaces#galactic">builtin_interfaces  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_common#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_common#galactic">nav2_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/tf2_ros#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/tf2_ros#galactic">tf2_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_costmap_2d#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_costmap_2d#galactic">nav2_costmap_2d  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_core#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_core#galactic">nav2_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/pluginlib#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/pluginlib#galactic">pluginlib  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/eigen3_cmake_module#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/eigen3_cmake_module#galactic">eigen3_cmake_module  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ompl#galactic-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ompl#galactic">ompl  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/eigen">eigen</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/navigation2#galactic">navigation2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/navigation2#galactic-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <ul>
            
              <li><a href="https://github.com/ros-planning/navigation2/tree/galactic/nav2_smac_planner//global_planner_plugin.xml" target="_blank">nav2_core</a></li>
            
          </ul>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>nav2_smac_planner</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="galactic-question-list" class="panel-body" style="display: none;"></div>
      <div id="galactic-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/nav2_smac_planner+galactic">here</a>.</p>
      </div>
      <div id="galactic-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/ros-planning/navigation2.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/galactic/p/nav2_smac_planner"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/ros-planning/navigation2/tree/galactic/nav2_smac_planner"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/nav2_smac_planner">nav2_smac_planner</a> <small>package from <a style="text-decoration:none" href="/r/navigation2/github-ros-planning-navigation2">navigation2</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_amcl">

nav2_amcl
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_behavior_tree">

nav2_behavior_tree
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_behaviors">

nav2_behaviors
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_bringup">

nav2_bringup
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_bt_navigator">

nav2_bt_navigator
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_collision_monitor">

nav2_collision_monitor
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_common">

nav2_common
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_constrained_smoother">

nav2_constrained_smoother
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_controller">

nav2_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_core">

nav2_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_costmap_2d">

nav2_costmap_2d
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/costmap_queue">

costmap_queue
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_core">

dwb_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_critics">

dwb_critics
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_msgs">

dwb_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_plugins">

dwb_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_dwb_controller">

nav2_dwb_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav_2d_msgs">

nav_2d_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav_2d_utils">

nav_2d_utils
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_lifecycle_manager">

nav2_lifecycle_manager
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_map_server">

nav2_map_server
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_mppi_controller">

nav2_mppi_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_msgs">

nav2_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_navfn_planner">

nav2_navfn_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_planner">

nav2_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_regulated_pure_pursuit_controller">

nav2_regulated_pure_pursuit_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_rotation_shim_controller">

nav2_rotation_shim_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_rviz_plugins">

nav2_rviz_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_simple_commander">

nav2_simple_commander
</a>
            
          
            
            
              <span class="label label-default pkg-label">

nav2_smac_planner
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_smoother">

nav2_smoother
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_system_tests">

nav2_system_tests
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_theta_star_planner">

nav2_theta_star_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_util">

nav2_util
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_velocity_smoother">

nav2_velocity_smoother
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_voxel_grid">

nav2_voxel_grid
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_waypoint_follower">

nav2_waypoint_follower
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/navigation2">

navigation2
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/iron/p/nav2_smac_planner"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/ros-planning/navigation2/tree/iron/nav2_smac_planner"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="iron-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#iron-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#iron-assets" data-toggle="tab"><span class="label label-primary">3</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#iron-deps" data-toggle="tab"><span class="label label-primary">24</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#iron-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#iron-questions" data-toggle="tab"><span id="iron-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="iron-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>1.2.10</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache-2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS 2 Navigation Framework and System</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-planning/navigation2.git">https://github.com/ros-planning/navigation2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">iron</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-10-02
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">robotics</span> <span class="label label-default">navigation</span> <span class="label label-default">ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/navigation2/#iron-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/navigation2/#iron-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/navigation2/#iron-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Smac global planning plugin: A*, Hybrid-A*, State Lattice
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Steve Macenski</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <em>No additional authors.</em>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/ros-planning/navigation2/tree/iron/nav2_smac_planner/README.md" title="Open in git repository">nav2_smac_planner/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="smac-planner">Smac Planner</h1>

<p>The SmacPlanner is a plugin for the Nav2 Planner server. It includes currently 3 distinct plugins:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code>: a highly optimized fully reconfigurable Hybrid-A* implementation supporting Dubin and Reeds-Shepp models (legged, ackermann and car models).</li>
  <li>
<code class="language-plaintext highlighter-rouge">SmacPlannerLattice</code>: a highly optimized fully reconfigurable State Lattice implementation supporting configurable minimum control sets, with provided control sets for Ackermann, Legged, Differential and Omnidirectional models.</li>
  <li>
<code class="language-plaintext highlighter-rouge">SmacPlanner2D</code>: a highly optimized fully reconfigurable grid-based A* implementation supporting 8-connected neighborhood models.</li>
</ul>

<p>It also introduces the following basic building blocks:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">CostmapDownsampler</code>: A library to take in a costmap object and downsample it to another resolution.</li>
  <li>
<code class="language-plaintext highlighter-rouge">AStar</code>: A generic and highly optimized A* template library used by the planning plugins to search. Additional template for  planning also could be made available using it.</li>
  <li>
<code class="language-plaintext highlighter-rouge">CollisionChecker</code>: Collision check based on a robot’s radius or footprint.</li>
  <li>
<code class="language-plaintext highlighter-rouge">Smoother</code>: A simple path smoother to smooth out 2D, Hybrid-A*, and State Lattice paths.</li>
</ul>

<p>We have users reporting using this on:</p>
<ul>
  <li>Delivery robots</li>
  <li>Industrial robots</li>
  <li>Vertical farming</li>
  <li>Solar farms</li>
</ul>

<p>See its <a href="https://navigation.ros.org/configuration/packages/configuring-smac-planner.html">Configuration Guide Page</a> for additional parameter descriptions.</p>

<h2 id="introduction">Introduction</h2>

<p>The <code class="language-plaintext highlighter-rouge">nav2_smac_planner</code> package contains an optimized templated A* search algorithm used to create multiple A*-based planners for multiple types of robot platforms. It was built by <a href="https://www.linkedin.com/in/steve-macenski-41a985101/">Steve Macenski</a> while at <a href="https://www.sra.samsung.com/">Samsung Research</a>. We support <strong>circular</strong> differential-drive and omni-directional drive robots using the <code class="language-plaintext highlighter-rouge">SmacPlanner2D</code> planner which implements a cost-aware A* planner. We support <strong>legged, cars, car-like, and ackermann vehicles</strong> using the <code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code> plugin which implements a Hybrid-A* planner.  We support <strong>non-circular, arbitrary shaped, any model vehicles</strong> using the <code class="language-plaintext highlighter-rouge">SmacPlannerLattice</code> plugin which implements a State Lattice planner. It contains control sets and generators for ackermann, legged, differential drive and omnidirectional vehicles, but you may provide your own for another robot type or to have different planning behaviors. The last two plugins are also useful for curvature constrained or kinematically feasible planning, like when planning robot at high speeds to make sure they don’t flip over or otherwise skid out of control. It is also applicable to non-round robots (such as large rectangular or arbitrary shaped robots of differential/omnidirectional drivetrains) that need pose-based collision checking.</p>

<p>The <code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code> implements the Hybrid-A* planner as proposed in <a href="https://ai.stanford.edu/~ddolgov/papers/dolgov_gpp_stair08.pdf">Practical Search Techniques in Path Planning for Autonomous Driving</a>, with modifications to the heuristic, traversal functions to increase path quality without needing expensive optimization-based smoothing.</p>

<p>The <code class="language-plaintext highlighter-rouge">SmacPlannerLattice</code> implements the State Lattice planner. While we do not implement it precisely the same way as <a href="https://www.ri.cmu.edu/pub_files/pub4/pivtoraiko_mihail_2007_1/pivtoraiko_mihail_2007_1.pdf">Optimal, Smooth, Nonholonomic MobileRobot Motion Planning in State Lattices</a> (with control sets found using <a href="https://www.ri.cmu.edu/pub_files/pub4/pivtoraiko_mihail_2005_1/pivtoraiko_mihail_2005_1.pdf">Generating Near Minimal Spanning Control Sets for Constrained Motion Planning in Discrete State Spaces</a>), it is sufficiently similar it may be used as a good reference. Additional optimizations for on-approach analytic expansions and improved heuristic functions were used, largely matching those of Hybrid-A* to allow them to share these optimized implementations to drive search towards the goal, faster.</p>

<p>In summary…</p>

<p>The <code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code> is designed to work with:</p>
<ul>
  <li>Ackermann, car, and car-like robots</li>
  <li>High speed or curvature constrained robots (as to not flip over, skid, or dump load at high speeds)</li>
  <li>Arbitrary shaped, non-circular differential or omnidirectional robots requiring kinematically feasible planning with SE2 collision checking</li>
  <li>Legged robots</li>
</ul>

<p>The <code class="language-plaintext highlighter-rouge">SmacPlannerLattice</code> is designed to work with:</p>
<ul>
  <li>Arbitrary shaped, non-circular robots requiring kinematically feasible planning with SE2 collision checking using the full capabilities of the drivetrain</li>
  <li>Flexibility to use other robot model types or with provided non-circular differential, ackermann, and omni support</li>
</ul>

<p>The <code class="language-plaintext highlighter-rouge">SmacPlanner2D</code> is designed to work with:</p>
<ul>
  <li>Circular, differential or omnidirectional robots</li>
  <li>Relatively small robots with respect to environment size (e.g. RC car in a hallway or large robot in a convention center) that can be approximated by circular footprint.</li>
</ul>

<h2 id="features">Features</h2>

<p>We further improve on Hybrid-A* in the following ways:</p>
<ul>
  <li>Remove need for upsampling by searching with 10x smaller motion primitives (same as their upsampling ratio).</li>
  <li>Multi-resolution search allowing planning to occur at a coarser resolution for wider spaces (O(N^2) faster).</li>
  <li>Cost-aware penalty functions in search resulting in far smoother plans (further reducing requirement to smooth).</li>
  <li>Gradient-descent, basic but fast smoother</li>
  <li>Faster planning than original paper by highly optimizing the template A* algorithm.</li>
  <li>Faster planning via custom precomputed heuristic, motion primitive, and other functions.</li>
  <li>Automatically adjusted search motion model sizes by motion model, costmap resolution, and bin sizing.</li>
  <li>Closest path on approach within tolerance if exact path cannot be found or in invalid space.</li>
  <li>Multi-model hybrid searching including Dubin and Reeds-Shepp models. More models may be trivially added.</li>
  <li>High unit and integration test coverage, doxygen documentation.</li>
  <li>Uses modern C++14 language features and individual components are easily reusable.</li>
  <li>Speed optimizations: no data structure graph lookups in main loop, near-zero copy main loop, dynamically generated graph and dynamic programming-based obstacle heuristic, optional recomputation of heuristics for subsequent planning requests of the same goal, etc.</li>
  <li>Templated Nodes and A* implementation to support additional robot extensions.</li>
  <li>Selective re-evaluation of the obstacle heuristic per goal/map or each iteration, which can speed up subsequent replanning 20x or more.</li>
</ul>

<p>Most of these features (multi-resolution, models, smoother, etc) are also available in the <code class="language-plaintext highlighter-rouge">SmacPlanner2D</code> and <code class="language-plaintext highlighter-rouge">SmacPlannerLattice</code> plugins.</p>

<p>The 2D A* implementation also does not have any of the weird artifacts introduced by the gradient wavefront-based 2D A* implementation in the NavFn Planner. While this 2D A* planner is slightly slower, I believe it’s well worth the increased quality in paths.</p>

<p>Note: In prior releases, a CG smoother largely implementing the original Hybrid-A* paper’s. However, this smoother failed to consistently provide useful results, took too much compute time, and was deprecated. While smoothing a path 95% of the time seems like a “good” solution, we need something far more reliable for practical use. Since we are working with mobile robots and not autonomous cars at 60 mph, we can take some different liberties in smoothing knowing that our local trajectory planners are pretty smart. If you are looking for it, it now lives in the new Smoothing Server as the Cost-aware smoother. This smoother has been replaced by a simpler optimization inspired solution which is faster, far more consistent, and simpler to understand. While this smoother is <strong>not</strong> cost-aware, we have added cost-aware penalty functions in the planners themselves to push the plans away from high-cost spaces and we do check for validity of smoothed sections to ensure feasibility. It will through terminate when paths become in collision with the environment. If you would like to use this smoother, however, it is available in the smoother server, though it will take some additional compute time.</p>

<h2 id="metrics">Metrics</h2>

<p>The original Hybrid-A* implementation boasted planning times of 50-300ms for planning across 102,400 cell maps with 72 angular bins. We see much faster results in our evaluations:</p>

<ul>
  <li>
<strong>2-20ms</strong> for planning across 147,456 (1.4x larger) cell maps with 72 angular bins.</li>
  <li>
<strong>30-200ms</strong> for planning across 344,128 (3.3x larger) cell map with 72 angular bins.</li>
</ul>

<p>An example of the 3 planners can be seen below, planning a roughly 75 m path.</p>
<ul>
  <li>2D A* computed the path in 243ms (Panel 1)</li>
  <li>Hybrid-A* computed the path in 144ms (Panel 2)</li>
  <li>State Lattice computed the path in 113ms (Panel 3)</li>
  <li>For reference: NavFn compute the path in 146ms, including some nasty path discontinuity artifacts</li>
</ul>

<p><img src="https://raw.githubusercontent.com/ros-planning/navigation2/iron/nav2_smac_planner/test/3planners.png" alt="alt text"></p>

<h2 id="design">Design</h2>

<p>The basic design centralizes a templated A* implementation that handles the search of a graph of nodes. The implementation is templated by the nodes, <code class="language-plaintext highlighter-rouge">NodeT</code>, which contain the methods needed to compute the hueristics, travel costs, and search neighborhoods. The outcome of this design is then a standard A* implementation that can be used to traverse any type of graph as long as a node template can be created for it.</p>

<p>We provide 3 nodes by default currently. The 2D node template (<code class="language-plaintext highlighter-rouge">Node2D</code>) which does 2D grid-search with either 4 or 8-connected neighborhoods. We also provide a Hybrid A* node template (<code class="language-plaintext highlighter-rouge">NodeHybrid</code>) which does SE2 (X, Y, theta) search and collision checking on Dubin or Reeds-Shepp motion models. We also provide the Lattice (<code class="language-plaintext highlighter-rouge">NodeLattice</code>) node for state lattice planning making use of the wider range of velocity options available to differential and omnidirectional robots. Additional templates could be easily made and included for 3D grid search and non-grid base searching like routing.</p>

<p>In the ROS2 facing plugin, we take in the global goals and pre-process the data to feed into the templated A* used. This includes processing any requests to downsample the costmap to another resolution to speed up search and smoothing the resulting A* path (not available for State Lattice due to the lattices generated are dependent on costmap resolution). For the <code class="language-plaintext highlighter-rouge">SmacPlannerHybrid</code> and <code class="language-plaintext highlighter-rouge">SmacPlannerLattice</code> plugins, the path is promised to be kinematically feasible due to the kinematically valid models used in branching search. The 2D A* is also promised to be feasible for differential and omni-directional robots.</p>

<p>We isolated the A*, costmap downsampler, smoother, and Node template objects from ROS2 to allow them to be easily testable independently of ROS or the planner. The only place ROS is used is in the planner plugins themselves.</p>

<h2 id="parameters">Parameters</h2>

<p>See inline description of parameters in the <code class="language-plaintext highlighter-rouge">SmacPlanner</code>. This includes comments as specific parameters apply to <code class="language-plaintext highlighter-rouge">SmacPlanner2D</code> and <code class="language-plaintext highlighter-rouge">SmacPlanner</code> in place.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>planner_server:
  ros__parameters:
    planner_plugins: ["GridBased"]

    GridBased:
      plugin: "nav2_smac_planner/SmacPlannerHybrid"
      tolerance: 0.5                      # tolerance for planning if unable to reach exact pose, in meters
      downsample_costmap: false           # whether or not to downsample the map
      downsampling_factor: 1              # multiplier for the resolution of the costmap layer (e.g. 2 on a 5cm costmap would be 10cm)
      allow_unknown: false                # allow traveling in unknown space
      max_iterations: 1000000             # maximum total iterations to search for before failing (in case unreachable), set to -1 to disable
      max_on_approach_iterations: 1000    # maximum number of iterations to attempt to reach goal once in tolerance
      max_planning_time: 3.5              # max time in s for planner to plan, smooth, and upsample. Will scale maximum smoothing and upsampling times based on remaining time after planning.
      motion_model_for_search: "DUBIN"    # For Hybrid Dubin, Redds-Shepp
      cost_travel_multiplier: 2.0         # For 2D: Cost multiplier to apply to search to steer away from high cost areas. Larger values will place in the center of aisles more exactly (if non-`FREE` cost potential field exists) but take slightly longer to compute. To optimize for speed, a value of 1.0 is reasonable. A reasonable tradeoff value is 2.0. A value of 0.0 effective disables steering away from obstacles and acts like a naive binary search A*.
      angle_quantization_bins: 64         # For Hybrid nodes: Number of angle bins for search, must be 1 for 2D node (no angle search)
      analytic_expansion_ratio: 3.5       # For Hybrid/Lattice nodes: The ratio to attempt analytic expansions during search for final approach.
      analytic_expansion_max_length: 3.0    # For Hybrid/Lattice nodes: The maximum length of the analytic expansion to be considered valid to prevent unsafe shortcutting (in meters). This should be scaled with minimum turning radius and be no less than 4-5x the minimum radius
      minimum_turning_radius: 0.40        # For Hybrid/Lattice nodes: minimum turning radius in m of path / vehicle
      reverse_penalty: 2.1                # For Reeds-Shepp model: penalty to apply if motion is reversing, must be =&gt; 1
      change_penalty: 0.0                 # For Hybrid nodes: penalty to apply if motion is changing directions, must be &gt;= 0
      non_straight_penalty: 1.20          # For Hybrid nodes: penalty to apply if motion is non-straight, must be =&gt; 1
      cost_penalty: 2.0                   # For Hybrid nodes: penalty to apply to higher cost areas when adding into the obstacle map dynamic programming distance expansion heuristic. This drives the robot more towards the center of passages. A value between 1.3 - 3.5 is reasonable.
      retrospective_penalty: 0.025        # For Hybrid/Lattice nodes: penalty to prefer later maneuvers before earlier along the path. Saves search time since earlier nodes are not expanded until it is necessary. Must be &gt;= 0.0 and &lt;= 1.0
      rotation_penalty: 5.0               # For Lattice node: Penalty to apply only to pure rotate in place commands when using minimum control sets containing rotate in place primitives. This should always be set sufficiently high to weight against this action unless strictly necessary for obstacle avoidance or there may be frequent discontinuities in the plan where it requests the robot to rotate in place to short-cut an otherwise smooth path for marginal path distance savings.
      lookup_table_size: 20.0               # For Hybrid nodes: Size of the dubin/reeds-sheep distance window to cache, in meters.
      cache_obstacle_heuristic: True      # For Hybrid nodes: Cache the obstacle map dynamic programming distance expansion heuristic between subsiquent replannings of the same goal location. Dramatically speeds up replanning performance (40x) if costmap is largely static.  
      allow_reverse_expansion: False      # For Lattice nodes: Whether to expand state lattice graph in forward primitives or reverse as well, will double the branching factor at each step.   
      smooth_path: True                   # For Lattice/Hybrid nodes: Whether or not to smooth the path, always true for 2D nodes.
      debug_visualizations: True                # For Hybrid nodes: Whether to publish expansions on the /expansions topic as an array of poses (the orientation has no meaning) and the path's footprints on the /planned_footprints topic. WARNING: heavy to compute and to display, for debug only as it degrades the performance. 
      smoother:
        max_iterations: 1000
        w_smooth: 0.3
        w_data: 0.2
        tolerance: 1.0e-10
        do_refinement: true               # Whether to recursively run the smoother 3 times on the results from prior runs to refine the results further

</code></pre></div></div>

<h2 id="topics">Topics</h2>

<table>
  <thead>
    <tr>
      <th>Topic</th>
      <th>Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>unsmoothed_path</td>
      <td>nav_msgs/Path</td>
    </tr>
  </tbody>
</table>

<h2 id="install">Install</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install ros-&lt;ros2-distro&gt;-nav2-smac-planner

</code></pre></div></div>

<h2 id="etc-important-side-notes">Etc (Important Side Notes)</h2>

<h3 id="potential-fields">Potential Fields</h3>

<p>Many users and default navigation configuration files I find are really missing the point of the inflation layer. While it’s true that you can simply inflate a small radius around the walls, the <em>true</em> value of the inflation layer is creating a consistent potential field around the entire map.</p>

<p>Some of the most popular tuning guides for Navigation / Nav2 even <a href="https://arxiv.org/pdf/1706.09068.pdf">call this out specifically</a> that there’s substantial benefit to creating a gentle potential field across the width of the map - after inscribed costs are applied - yet very few users do this.</p>

<p>This habit actually results in paths produced by NavFn, Global Planner, and now SmacPlanner to be somewhat suboptimal. They really want to look for a smooth potential field rather than wide open 0-cost spaces in order to stay in the middle of spaces and deal with close-by moving obstacles better.</p>

<p>So it is my recommendation in using this package, as well as all other cost-aware search planners available in ROS, to increase your inflation layer cost scale in order to adequately produce a smooth potential across the entire map. For very large open spaces, its fine to have 0-cost areas in the middle, but for halls, aisles, and similar; <strong>please create a smooth potential to provide the best performance</strong>.</p>

<h3 id="hybrid-a-and-state-lattice-turning-radius">Hybrid-A* and State Lattice Turning Radius’</h3>

<p>A very reasonable and logical assumption would be to set the <code class="language-plaintext highlighter-rouge">minimum_turning_radius</code> to the kinematic limits of your vehicle. For an ackermann car, that’s a physical quantity; while for differential or omni robots, its a bit of a dance around what kind of turns you’d like your robot to be able to make. Obviously setting this to something insanely small (like 20 cm) means you have alot of options, but also probably means the raw output plans won’t be very straight and smooth when you have 2+ meter wide aisles to work in.</p>

<p>I assert that you should also consider the environment you operate within when setting this. While you should <strong>absolutely not</strong> set this to be any smaller than the actual limits of your vehicle, there are some useful side effects of increasing this value in practical use. If you work in an area wider than the turning circle of your robot, you have some options that will ultimately improve the performance of the planner (in terms of CPU and compute time) as well as generate paths that are more “smooth” directly out of the planner – not requiring any explicit path smoothing.</p>

<p>By default, <code class="language-plaintext highlighter-rouge">0.4m</code> is the setting which I think is “reasonable” for the smaller scale industrial grade robots (think Simbe, the small Fetch, or Locus robots) resulting in faster plans and less “wobbly” motions that do not require post-smoothing – further improving CPU performance. I selected <code class="language-plaintext highlighter-rouge">0.4m</code> as a trade off between practical robots mentioned above and hobbyist users with a tiny-little-turtlebot-3 which might still need to navigate around some smaller cavities.</p>

<h3 id="costmap-resolutions">Costmap Resolutions</h3>

<p>We provide for the Hybrid-A*, State Lattice, and 2D A* implementations a costmap downsampler option. This can be <strong>incredible</strong> beneficial when planning very long paths in larger spaces. The motion models for SE2 planning and neighborhood search in 2D planning is proportional to the costmap resolution. By downsampling it, you can N^2 reduce the number of expansions required to achieve a particular goal. However, the lower the resolution, the larger small obstacles appear and you won’t be able to get super close to obstacles. This is a trade-off to make and test. Some numbers I’ve seen are 2-4x drops in planning CPU time for a 2-3x downsample rate. For long and complex paths, I was able to get it « 100ms at only a 2x downsample rate from a plan that otherwise took upward of 400ms.</p>

<p>I recommend users using a 5cm resolution costmap and playing with the different values of downsampling rate until they achieve what they think is optimal performance (lowest number of expansions vs. necessity to achieve fine goal poses). Then, I would recommend to change the global costmap resolution to this new value. That way you don’t own the compute of downsampling and maintaining a higher-resolution costmap that isn’t used.</p>

<p>Remember, the global costmap is <strong>only</strong> there to provide an environment for the planner to work in. It is not there for human-viewing even if a more fine resolution costmap is more human “pleasing”. If you use multiple planners in the planner server, then you will want to use the highest resolution for the most needed planner and then use the downsampler to downsample to the Hybrid-A* resolution.</p>

<h3 id="penalty-function-tuning">Penalty Function Tuning</h3>

<p>The penalty function defaults are tuned for all of the planners based on a 5cm costmap. While some change in this should not largely impact default behavior, it may be good to tune for your specific application and needs. The default values were tuned to have decent out of the box behavior for a large number of platforms and resolutions. In most situations, you should not need to play with them.</p>

<p><strong>However</strong>, due to the nature of the State Lattice planner being able to use any number of custom generated minimum control sets, this planner may require more tuning to get good behavior. The defaults for State Lattice were generated using the 5cm Ackermann files you can find in this package as initial examples. After a change in formulation for the Hybrid-A* planner, the default of change penalty off seems to produce good results, but please tune to your application need and run-time speed requirements.</p>

<p>When tuning, the “reasonable” range for each penalty is listed below. While you may obviously tune outside of these ranges, I’ve found that they offer a good trade-off and outside of these ranges behaviors get suboptimal quickly.</p>
<ul>
  <li>Cost: 1.7 - 6.0</li>
  <li>Non-Straight: 1.0 - 1.3</li>
  <li>Change: 0.0 - 0.3</li>
  <li>Reverse: 1.3 - 5.0</li>
</ul>

<p>Note that change penalty must be greater than 0.0. The non-straight, reverse, and cost penalties must be greater than 1.0, strictly.</p>

<h3 id="no-path-found-for-clearly-valid-goals-or-long-compute-times">No path found for clearly valid goals or long compute times</h3>

<p>Before addressing the section below, make sure you have an appropriately set max iterations parameter. If you have a 1 km2 sized warehouse, clearly 5000 expansions will be insufficient. Try increasing this value if you’re unable to achieve goals or disable it with the <code class="language-plaintext highlighter-rouge">-1</code> value to see if you are now able to plan within a reasonable time period. If you still have issues, there is a secondary effect which could be happening that is good to be aware of.</p>

<p>In maps with small gaps or holes, you may see an issue planning to certain regions. If there are gaps small enough to be untraversible yet large enough that inflation doesn’t close it up with inflated costs, then it is recommended to lightly touch up the map or increase your inflation to remove those spaces from non-lethal space.</p>

<p>Seeing the figures below, you’ll see an attempt to plan into a “U” shaped region across the map. The first figure shows the small gap in the map (from an imperfect SLAM session) which is nearly traversible, but not quite. From the starting location, that gap yeilds the shortest path to the goal, so the heuristics will attempt to route the paths in that direction. However, it is not possible to actually pass with a kinematically valid path with the footprint set. As a result, the planner expands all of its maximum 1,000,000 iterations attempting to fit through it (visualized in red). If an infinite number of iterations were allowed, eventually a valid path would be found, but might take significant time.</p>

<p>By simply increasing the footprint (a bit hackier, the best solution is to edit the map to make this area impassible), then that gap is now properly blocked as un-navigable. In the second figure, you can see that the heuristics influence the expansion down a navigable route and is able to find a path in less than 10,000 iterations (or about 110ms). It is easy now!</p>

<p>As such, it is recommended if you have sparse SLAM maps, gaps or holes in your map, that you lightly post-process them to fill those gaps or increasing your footprint’s padding or radius to make these areas invalid. Without it, it might waste expansions on this small corridor that: A) you dont want your robot actually using B) probably isnt actually valid and a SLAM artifact and C) if there’s a more open space, you’d rather it use that.</p>

<p><img src="https://raw.githubusercontent.com/ros-planning/navigation2/iron/nav2_smac_planner/media/A.png" alt="">
<img src="https://raw.githubusercontent.com/ros-planning/navigation2/iron/nav2_smac_planner/media/B.png" alt=""></p>

<p>One interesting thing to note from the second figure is that you see a number of expansions in open space. This is due to travel / heuristic values being so similar, tuning values of the penalty weights can have a decent impact there. The defaults are set as a good middle ground between large open spaces and confined aisles (environment specific tuning could be done to reduce the number of expansions for a specific map, speeding up the planner). The planner actually runs substantially faster the more confined the areas of search / environments are – but still plenty fast for even wide open areas!</p>

<p>Sometimes visualizing the expansions is very useful to debug potential concerns (why does this goal take longer to compute, why can’t I find a path, etc), should you on rare occasion run into an issue. You can enable the publication of the expansions on the <code class="language-plaintext highlighter-rouge">/expansions</code> topic for SmacHybrid with the parameter <code class="language-plaintext highlighter-rouge">viz_expansions: True</code>, beware that it should be used only for debug as it increases a lot the CPU usage.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <em>No CHANGELOG found.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/nav2_smac_planner/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#iron">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#iron">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#iron">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_gtest#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_gtest#iron">ament_cmake_gtest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_pytest#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_pytest#iron">ament_cmake_pytest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#iron">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp_action#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp_action#iron">rclcpp_action  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp_lifecycle#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp_lifecycle#iron">rclcpp_lifecycle  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/visualization_msgs#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/visualization_msgs#iron">visualization_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_util#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_util#iron">nav2_util  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_msgs#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_msgs#iron">nav2_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav_msgs#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav_msgs#iron">nav_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/geometry_msgs#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/geometry_msgs#iron">geometry_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/builtin_interfaces#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/builtin_interfaces#iron">builtin_interfaces  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_common#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_common#iron">nav2_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/tf2_ros#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/tf2_ros#iron">tf2_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_costmap_2d#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_costmap_2d#iron">nav2_costmap_2d  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_core#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_core#iron">nav2_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/pluginlib#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/pluginlib#iron">pluginlib  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/eigen3_cmake_module#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/eigen3_cmake_module#iron">eigen3_cmake_module  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ompl#iron-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ompl#iron">ompl  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/angles#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/angles#iron">angles  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/eigen">eigen</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/nlohmann-json-dev">nlohmann-json-dev</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/navigation2#iron">navigation2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/navigation2#iron-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <ul>
            
              <li><a href="https://github.com/ros-planning/navigation2/tree/iron/nav2_smac_planner//smac_plugin_hybrid.xml" target="_blank">nav2_core</a></li>
            
              <li><a href="https://github.com/ros-planning/navigation2/tree/iron/nav2_smac_planner//smac_plugin_2d.xml" target="_blank">nav2_core</a></li>
            
              <li><a href="https://github.com/ros-planning/navigation2/tree/iron/nav2_smac_planner//smac_plugin_lattice.xml" target="_blank">nav2_core</a></li>
            
          </ul>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>nav2_smac_planner</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="iron-question-list" class="panel-body" style="display: none;"></div>
      <div id="iron-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/nav2_smac_planner+iron">here</a>.</p>
      </div>
      <div id="iron-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/ros-planning/navigation2.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/iron/p/nav2_smac_planner"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/ros-planning/navigation2/tree/iron/nav2_smac_planner"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>



<script id="question-list-template" type="text/html">
  <p>
    Browse <a href="https://robotics.stackexchange.com/questions/tagged/nav2_smac_planner?tab=Newest">recent questions</a>
    or see the <a href="https://robotics.stackexchange.com/questions/tagged/nav2_smac_planner?tab=Votes">highest voted ones</a>.
  </p>
  
  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">Title</th>
        <th scope="col">Answered?</th>
        <th scope="col">Created</th>
        <th scope="col">Active</th>
      </tr>
    </thead>
    <tbody>
      {{#questions}}
      <tr>
        <th scope="row"><a href="{{link}}">{{title}}</a><br><small>Tags: {{strtags}}</small></th>
        <th>{{answered}}</th>
        <th>{{created}}</th>
        <th>{{active}}</th>
      </tr>
      {{/questions}}
    </tbody>
  </table>
  {{#has_more}}
  <hr>
  <h4>Additional questions are available at
    <a href="https://robotics.stackexchange.com/questions/tagged/{{name}}?tab=Newest">Robotics Stack Exchange</a>
  </h4>
  {{/has_more}}
  
</script>

<script type="text/javascript" src="/js/mustache.js"></script>
<script type="text/javascript">
  jQuery(function() {
    jQuery.getJSON(url="https://api.stackexchange.com/2.3/questions?order=desc&site=robotics" +
                       "&tagged=nav2_smac_planner&pagesize=50&sort=activity")
    .done(function(feed) {
      if (feed.items.length > 0) {
        var question_count_str = (feed.has_more ? '>' : '') + String(feed.items.length)
        const questions = feed.items.map(
          function(question) {
            question.id = Math.round(Math.random() * 99999.0);
            question.created = (new Date(question.creation_date * 1000)).toDateString()
            question.active = (new Date(question.last_activity_date * 1000)).toDateString()
            question.answered = question.is_answered ? "Yes" : "No"
            question.strtags = question.tags.join(' ')
            return question;
          });
        const template = jQuery("#question-list-template").text();
        Mustache.parse(template);
        var rendered = Mustache.render(
          template, 
          { questions: questions,
            has_more: feed.has_more,
            name: "nav2_smac_planner"
          }
        );
      }
      //   TODO(tfoote) Resolve images
      //   jQuery("#-question-list img").each(function() {
      //     if (jQuery(this).attr("src").startsWith("/upfiles")) {
      //        jQuery(this).attr("src", "https://answers.ros.org" + jQuery(this).attr("src"));
      //     }
      //   });
      
      if (feed.items.length > 0) {
        jQuery("#humble-question-list").html(rendered);
        jQuery("#humble-question-list").show();
      } else {
        jQuery("#humble-no-question-list").show();
      }
      jQuery("#humble-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#jazzy-question-list").html(rendered);
        jQuery("#jazzy-question-list").show();
      } else {
        jQuery("#jazzy-no-question-list").show();
      }
      jQuery("#jazzy-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#kilted-question-list").html(rendered);
        jQuery("#kilted-question-list").show();
      } else {
        jQuery("#kilted-no-question-list").show();
      }
      jQuery("#kilted-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#rolling-question-list").html(rendered);
        jQuery("#rolling-question-list").show();
      } else {
        jQuery("#rolling-no-question-list").show();
      }
      jQuery("#rolling-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#github-question-list").html(rendered);
        jQuery("#github-question-list").show();
      } else {
        jQuery("#github-no-question-list").show();
      }
      jQuery("#github-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#noetic-question-list").html(rendered);
        jQuery("#noetic-question-list").show();
      } else {
        jQuery("#noetic-no-question-list").show();
      }
      jQuery("#noetic-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#galactic-question-list").html(rendered);
        jQuery("#galactic-question-list").show();
      } else {
        jQuery("#galactic-no-question-list").show();
      }
      jQuery("#galactic-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#iron-question-list").html(rendered);
        jQuery("#iron-question-list").show();
      } else {
        jQuery("#iron-no-question-list").show();
      }
      jQuery("#iron-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#melodic-question-list").html(rendered);
        jQuery("#melodic-question-list").show();
      } else {
        jQuery("#melodic-no-question-list").show();
      }
      jQuery("#melodic-questions-count").text(question_count_str);
      
    })
    .fail(function(jqxhr, textStatus, error) {
      console.error("Failed to get question data: " + jqxhr.responseText);
      
      jQuery("#humble-get-question-fail").show();
      
      jQuery("#jazzy-get-question-fail").show();
      
      jQuery("#kilted-get-question-fail").show();
      
      jQuery("#rolling-get-question-fail").show();
      
      jQuery("#github-get-question-fail").show();
      
      jQuery("#noetic-get-question-fail").show();
      
      jQuery("#galactic-get-question-fail").show();
      
      jQuery("#iron-get-question-fail").show();
      
      jQuery("#melodic-get-question-fail").show();
      
    });
  });
</script>


<script type="text/javascript">
  $(document).ready(function() {
    setupDistroSwitch("humble");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
