<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Package: ess_imu_driver</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/p/ess_imu_driver/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top: 20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/?search_packages=true">Packages</a></li>
        <li class="active">ess_imu_driver</li>
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-default" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-default" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-default" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-default" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-default" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-primary" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class="disabled older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>humble</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>jazzy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>kilted</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>rolling</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>github</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/ess_imu_driver">ess_imu_driver</a> <small>package from <a style="text-decoration:none" href="/r/ess_imu_driver/github-cubicleguy-ess_imu_driver">ess_imu_driver</a> repo</small>
        </h3>
          
            
            
              <span class="label label-default pkg-label">

ess_imu_driver
</span>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/noetic/api/ess_imu_driver/html/"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  <a class="list-group-item text-center "
     target="_blank"
     href="http://wiki.ros.org/ess_imu_driver?distro=noetic"
     title="View this package on wiki.ros.org">
       <span style="margin-right: 5px;" class="glyphicon glyphicon-info-sign"></span>
       <br>
       Wiki
  </a>
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="noetic-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#noetic-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#noetic-assets" data-toggle="tab"><span class="label label-primary">3</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#noetic-deps" data-toggle="tab"><span class="label label-primary">6</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#noetic-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#noetic-questions" data-toggle="tab"><span id="noetic-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="noetic-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>2.0.2</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD-3</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-info">
                  
                    CATKIN</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Latest ROS Linux driver package for EPSON IMU using UART or SPI interface (includes C driver)</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/cubicleguy/ess_imu_driver.git">https://github.com/cubicleguy/ess_imu_driver.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">noetic</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-12-09
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    
                      <a href="https://build.ros.org/view/Ndev/job/Ndev__ess_imu_driver__ubuntu_focal_amd64" class="label ci-result-success" title="Latest build information: Tue, 05 Dec 2023 15:19:50 GMT
  Total tests: 0
  Succeeded: 0
  Skipped: 0
  Failed: 0
No build history available for this repository.">
                        <span class="glyphicon glyphicon-check"></span>
                        Continuous Integration
                        
                          : 0 / 0
                        
                      </a>
                    
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ess_imu_driver/#noetic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ess_imu_driver/#noetic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ess_imu_driver/#noetic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            ROS package for Epson IMU based on C++ wrapper of Linux C driver
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="https://wiki.ros.org/ess_imu_driver">Website</a></li>
                
                  <li><a href="https://github.com/cubicleguy/ess_imu_driver.git">Repository</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Raymond Chow</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <em>No additional authors.</em>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./README.md" title="Open in git repository">README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="readme-for-epson-imu-driver-for-ros1-node">README for Epson IMU Driver for ROS1 Node</h1>

<!---toc start-->

<ul>
  <li>
<a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./#readme-for-epson-imu-driver-for-ros1-node">README for Epson IMU Driver for ROS1 node</a>
    <ul>
      <li><a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./#what-is-this-repository-for">What is this repository for?</a></li>
      <li>
<a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./#what-kind-of-hardware-or-software-will-i-likely-need">What kind of hardware or software will I likely need?</a>
        <ul>
          <li><a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./#for-the-uart-interface">For the UART Interface:</a></li>
          <li><a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./#for-the-spi-interface">For the SPI Interface:</a></li>
        </ul>
      </li>
      <li><a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./#how-do-i-use-the-driver">How do I use the driver?</a></li>
      <li><a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./#how-do-i-use-the-driver-if-usleep-is-not-supported-for-time-delays">How do I use the driver if usleep() is not supported for time delays?</a></li>
      <li><a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./#how-do-i-use-the-driver-with-gpios-to-control-imu-reset-drdy-ext-pins">How do I use the driver with GPIOs to control IMU RESET#, DRDY, EXT pins?</a></li>
      <li>
<a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./#how-do-i-build-install-run-this-package">How do I build, install, run this package?</a>
        <ul>
          <li><a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./#example-console-output-of-catkin_make-build">Example console output of <em>catkin_make</em> build:</a></li>
          <li><a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./#example-console-output-of-launching-ros-node">Example console output of launching ROS node:</a></li>
        </ul>
      </li>
      <li>
<a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./#what-does-this-ros-imu-node-publish-as-messages">What does this ROS IMU Node publish as messages?</a>
        <ul>
          <li><a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./#ros-topic-message-imudata">ROS Topic Message /imu/data</a></li>
          <li><a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./#ros-topic-message-imudata_raw">ROS Topic Message /imu/data_raw</a></li>
        </ul>
      </li>
      <li>
<a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./#why-am-i-seeing-inaccurate-ros-timestamps-high-latencies-or-slower-than-expected-imu-data-rates">Why am I seeing inaccurate ROS timestamps, high latencies, or slower than expected IMU data rates?</a>
        <ul>
          <li><a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./#ros-timestamps">ROS timestamps</a></li>
          <li>
<a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./#when-using-usb-uart-bridges">When using USB-UART bridges</a>
            <ul>
              <li><a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./#modifying-latency_timer-by-udev-mechanism">Modifying <em>latency_timer</em> by udev mechanism</a></li>
              <li><a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./#modifying-latency_timer-by-sysfs-mechanism">Modifying <em>latency_timer</em> by sysfs mechanism</a></li>
              <li><a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./#modifying-low_latency-flag-using-setserial-utility">Modifying <em>low_latency</em> flag using <em>setserial</em> utility</a></li>
            </ul>
          </li>
          <li><a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./#when-using-the-spi-interface">When using the SPI interface</a></li>
        </ul>
      </li>
      <li><a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./#package-contents">Package Contents</a></li>
      <li><a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./#references">References</a></li>
    </ul>
  </li>
</ul>

<!---toc end-->

<h2 id="what-is-this-repository-for">What is this repository for?</h2>

<ul>
  <li>This code is a ROS1 package for demonstrating a ROS node that configures and publishes IMU messages from a supported Epson IMU.</li>
  <li>This code provides software communication between Epson IMU and ROS using the either the UART or SPI interface.</li>
  <li>For the UART connection, this code uses the standard Unix Terminal I/O library (termios) for communicating either direct or by USB-serial converter such as FTDI USB-UART bridge ICs.</li>
  <li>For the SPI connection, this code uses the <a href="https://github.com/WiringPi/WiringPi/">Unofficial wiringPi</a> library for accessing GPIO and SPI functions on the Raspberry Pi platform running Ubuntu Linux distro.</li>
  <li>This ROS1 node demonstration software is a ROS C++ wrapper around the Linux C driver software:
    <ul>
      <li>
<em>src/epson_imu_uart_ros_node.cpp</em> is for the UART interface</li>
      <li>
<em>src/epson_imu_spi_ros_node.cpp</em> is for the SPI interface</li>
    </ul>
  </li>
  <li>The other source files in <code class="language-plaintext highlighter-rouge">src/</code> are based on the Linux C driver originally released and can be found here:
<a href="https://github.com/cubicleguy/imu_linux_example">Linux C driver and logger example for EPSON IMU</a>
</li>
  <li>Information about ROS, and tutorials can be found: <a href="https://docs.ros.org/">ROS.org</a>
</li>
</ul>

<h2 id="what-kind-of-hardware-or-software-will-i-likely-need">What kind of hardware or software will I likely need?</h2>

<ul>
  <li>Epson IMU <a href="https://global.epson.com/products_and_drivers/sensing_system/imu/">Epson IMU models</a>
    <ul>
      <li>At the time software release:
        <ul>
          <li>G320PDG0, G320PDGN, G354PDH0, G364PDCA, G364PDC0</li>
          <li>G365PDC1, G365PDF1, G370PDF1, G370PDS0</li>
          <li>G330PDG0, G366PDG0, G370PDG0, G370PDT0</li>
          <li>G570PR20</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>ROS Noetic (via download) <a href="https://wiki.ros.org/noetic/Installation/Ubuntu">ROS.org</a>
</li>
  <li>This software was developed and tested on the following:</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  ROS1:        Noetic
  Description: Ubuntu 20.04 LTS
  Hardware Platform: Core i7 PC, Raspberry Pi 3B+, RaspberryPi 4

</code></pre></div></div>

<h3 id="for-the-uart-interface">For the UART Interface:</h3>

<ul>
  <li>Epson USB evaluation board or equivalent FTDI USB-Serial interface connecting the Epson IMU to ROS host (tty/serial) <a href="https://global.epson.com/products_and_drivers/sensing_system/technical_info/evaluation_tools/">See M-G32EV041</a>
</li>
  <li>Alternatively, a direct connection from the Epson IMU to the ROS platform supporting a 3.3V CMOS compatible UART interface <a href="https://global.epson.com/products_and_drivers/sensing_system/technical_info/evaluation_tools/">See M-G32EV031</a>.</li>
</ul>

<h3 id="for-the-spi-interface">For the SPI Interface:</h3>

<ul>
  <li>
<strong>NOTE:</strong> This software is intended for an embedded Linux host system with 3.3V I/O compatible SPI interface (SCLK, MISO, MOSI) and 3 GPIOs (CS#, RST#, DRDY).</li>
  <li>For Raspberry Pi, if not enabled already the SPI interface can be enabled using <code class="language-plaintext highlighter-rouge">raspi-config</code> or equivalent.</li>
  <li>This code uses a separate GPIO to manually control CS# chipselect instead of the chipselect assigned to by the RapsberryPi SPI interface.
    <ul>
      <li>The chipselect assigned by the HW SPI interface should also work, but has not been thoroughly tested.</li>
    </ul>
  </li>
  <li>Epson Breakout evaluation board or some equivalent is required to connect to the 3.3V CMOS compatible pins of the ROS host (SPI &amp; GPIOs) <a href="https://global.epson.com/products_and_drivers/sensing_system/technical_info/evaluation_tools/">See M-G32EV031</a>
</li>
</ul>

<h2 id="how-do-i-use-the-driver">How do I use the driver?</h2>

<ul>
  <li>
    <p>This code assumes that the user is familiar with building ROS packages using the <code class="language-plaintext highlighter-rouge">catkin_make</code> build process.</p>
  </li>
  <li>
    <p>This README is <em>NOT</em> detailed step by step instructions on how to build and install ROS software.</p>
  </li>
  <li>
    <p>Please refer to the ROS.org website for more detailed instructions on the ROS package build process. <a href="https://wiki.ros.org/ROS/Tutorials">ROS.org</a></p>
  </li>
  <li>
    <p><strong>NOTE:</strong> At a bare minimum, the user must re-build the package with catkin_make after modifying the <code class="language-plaintext highlighter-rouge">CMakeLists.txt</code> to configure any of the following:</p>

    <ul>
      <li>serial interface type, <code class="language-plaintext highlighter-rouge">INTERFACE=</code> (UART or SPI)</li>
      <li>host platform type, <code class="language-plaintext highlighter-rouge">PLATFORM=</code> (RPI or NONE=PC)</li>
    </ul>
  </li>
  <li>
    <p>Changes to IMU settings should be made by editing the <code class="language-plaintext highlighter-rouge">.launch</code> files located in the <code class="language-plaintext highlighter-rouge">launch/</code> folder instead of modifying the <code class="language-plaintext highlighter-rouge">src/</code> source files</p>
  </li>
</ul>

<h2 id="how-do-i-use-the-driver-if-usleep-is-not-supported-for-time-delays">How do I use the driver if usleep() is not supported for time delays?</h2>

<ul>
  <li>
<strong>NOTE:</strong> In the <code class="language-plaintext highlighter-rouge">hcl_linux.c</code> or <code class="language-plaintext highlighter-rouge">hcl_rpi.c</code>, there are <code class="language-plaintext highlighter-rouge">seDelayMS()</code> and <code class="language-plaintext highlighter-rouge">seDelayMicroSecs()</code> wrapper functions for time delays in millisecond and microseconds, respectively.</li>
  <li>On embedded Linux platforms, the user may need to modify and redirect to platform specific delay routines if <code class="language-plaintext highlighter-rouge">usleep()</code> is not supported.</li>
  <li>For example on RaspberryPi, the time delay functions for millisecond and microseconds are redirected to WiringPi library <code class="language-plaintext highlighter-rouge">delay()</code> and <code class="language-plaintext highlighter-rouge">delayMicroseconds()</code>, respectively.</li>
  <li>If a hardware delay is not available from a library, then a software delay loop is possible but not preferred.</li>
</ul>

<h2 id="how-do-i-use-the-driver-with-gpios-to-control-imu-reset-drdy-ext-pins">How do I use the driver with GPIOs to control IMU RESET#, DRDY, EXT pins?</h2>

<ul>
  <li>When connecting the IMU using the UART interface, the use of GPIO pins for connecting to the IMU <code class="language-plaintext highlighter-rouge">RESET#</code> or <code class="language-plaintext highlighter-rouge">DRDY</code> is optional, but can be useful on an embedded Linux platforms (such as RapsberryPi).</li>
  <li>When connecting the IMU using the SPI interface, the use of GPIO pins for connecting to the IMU <code class="language-plaintext highlighter-rouge">DRDY</code> is mandatory (<code class="language-plaintext highlighter-rouge">RESET#</code> is recommended, <code class="language-plaintext highlighter-rouge">EXT</code> is optional).</li>
  <li>When using the <code class="language-plaintext highlighter-rouge">time_correction</code> function for accurate time stamping with an external 3.3V GNSS 1PPS signal, the IMU <code class="language-plaintext highlighter-rouge">EXT</code> pin must be connected to the 1PPS.</li>
  <li>The user can choose to control the IMU <code class="language-plaintext highlighter-rouge">CS#</code> pin directly with a designated host GPIO output or connect to the designated chipselect of the SPI interface (i.e. <code class="language-plaintext highlighter-rouge">SPI_CE0</code> pin on the RapsberryPi)</li>
  <li>Where possible, connecting the <code class="language-plaintext highlighter-rouge">RESET#</code> and forcing a Hardware Reset during every IMU initialization is recommended for better robustness.</li>
  <li>This code is structured to simplify editing to redirect GPIO control to low-level hardware library GPIO function calls.</li>
  <li>There are no standard methods to implement GPIO connections on embedded Linux platform, but the following source files typically need changing:</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>src/hcl_linux.c
src/hcl_gpio.c
src/hcl_gpio.h

</code></pre></div></div>

<ul>
  <li>
    <p>Typically, an external library needs to be invoked to initialize &amp; enable GPIO HW functions on the user’s embedded platform.</p>
  </li>
  <li>
    <p>This typically requires the following changes to <code class="language-plaintext highlighter-rouge">hcl_linux.c</code> (Refer to <code class="language-plaintext highlighter-rouge">hcl_rpi.c</code> as a template):</p>

    <ul>
      <li>add <code class="language-plaintext highlighter-rouge">#include</code> to external library near the top of <code class="language-plaintext highlighter-rouge">hcl_linux.c</code>
</li>
      <li>add the initialization call to the HW library inside the <code class="language-plaintext highlighter-rouge">seInit()</code> function in <code class="language-plaintext highlighter-rouge">hcl_linux.c</code>
</li>
    </ul>
  </li>
</ul>

<p>For example on a Raspberry Pi, the following changes can be made to <code class="language-plaintext highlighter-rouge">hcl_linux.c</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...

  #include &lt;stdint.h&gt;
  #include &lt;stdio.h&gt;
  #include &lt;wiringPi.h&gt;  // &lt;== Added external library

  int seInit(void)
  {
    // Initialize wiringPi libraries                                                   // &lt;== Added
    printf("\r\nInitializing libraries...");                                           // &lt;== Added
    if(wiringPiSetupGpio() != 0) {                                                     // &lt;== Added external library initialization
      printf("\r\nError: could not initialize wiringPI libraries. Exiting...\r\n");    // &lt;== Added
      return NG;                                                                       // &lt;== Added
    }                                                                                  // &lt;== Added
    printf("...done.");

    return OK;
  }

...

</code></pre></div></div>

<ul>
  <li>Typically, the GPIO pins need to be assigned according to embedded HW platform-specific <strong>pin numbering</strong> and requires changes to <code class="language-plaintext highlighter-rouge">hcl_gpio.h</code>.</li>
</ul>

<p><strong>NOTE:</strong> When using the SPI interface, if direct <code class="language-plaintext highlighter-rouge">CS#</code> control is not by GPIO, then connect IMU <code class="language-plaintext highlighter-rouge">CS#</code> pin to the RPI <code class="language-plaintext highlighter-rouge">SPI0_CE0 (P1_24)</code>.</p>

<p>For example on a Raspberry Pi, the changes to <code class="language-plaintext highlighter-rouge">hcl_gpio.h</code> assume the following pin mapping:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Epson IMU                   Raspberry Pi
---------------------------------------------------
EPSON_RESET                 RPI_GPIO_P1_15 (GPIO22) Output
EPSON_DRDY                  RPI_GPIO_P1_18 (GPIO24) Input

</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...

// Prototypes for generic GPIO functions
int gpioInit(void);
int gpioRelease(void);

void gpioSet(uint8_t pin);
void gpioClr(uint8_t pin);
uint8_t gpioGetPinLevel(uint8_t pin);

#define RPI_GPIO_P1_15              22                    // &lt;== Added
#define RPI_GPIO_P1_18              24                    // &lt;== Added

#define EPSON_RESET                 RPI_GPIO_P1_15        // &lt;== Added
#define EPSON_DRDY                  RPI_GPIO_P1_18        // &lt;== Added
...

</code></pre></div></div>

<ul>
  <li>
    <p>The external HW library will typically have GPIO pin control functions such as <code class="language-plaintext highlighter-rouge">set_output()</code>, <code class="language-plaintext highlighter-rouge">set_input()</code>, <code class="language-plaintext highlighter-rouge">set()</code>, <code class="language-plaintext highlighter-rouge">reset()</code>, <code class="language-plaintext highlighter-rouge">read_pin_level()</code>, etc…</p>
  </li>
  <li>
    <p>The user should redirect the function calls in <code class="language-plaintext highlighter-rouge">hcl_gpio.c</code> for <code class="language-plaintext highlighter-rouge">gpioInit()</code>, <code class="language-plaintext highlighter-rouge">gpioRelease()</code>, <code class="language-plaintext highlighter-rouge">gpioSet()</code>, <code class="language-plaintext highlighter-rouge">gpioClr()</code>, <code class="language-plaintext highlighter-rouge">gpioGetPinLevel()</code> to such equivalent external HW library pin control functions.</p>
  </li>
  <li>
    <p>For example on a Raspberry Pi, the following are changes to <code class="language-plaintext highlighter-rouge">hcl_gpio.c</code> which can be used as a template:</p>
  </li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include "hcl.h"
#include "hcl_gpio.h"
#include &lt;wiringPi.h&gt;                         // &lt;== Added external library

...

int gpioInit(void)
{
	pinMode(EPSON_RESET, OUTPUT);               // &lt;== Added external call RESET Output Pin
	pinMode(EPSON_DRDY, INPUT);                 // &lt;== Added external call DRDY Input Pin
	pullUpDnControl(EPSON_DRDY, PUD_OFF) ;      // &lt;== Added external call Disable any internal pullup or pulldown resistance

	return OK;
}

...

int gpioRelease(void)
{
	return OK;
}

...

void gpioSet(uint8_t pin)
{
	digitalWrite(pin, HIGH);                    // &lt;== Added external call set pin HIGH
}

...

void gpioClr(uint8_t pin)
{
	digitalWrite(pin, LOW);                     // &lt;== Added external call set pin LOW
}

...

uint8_t gpioGetPinLevel(uint8_t pin)
{
	return (digitalRead(pin));                  // &lt;== Added external call to return pin state of input pin
}

...

</code></pre></div></div>

<h2 id="how-do-i-build-install-run-this-package">How do I build, install, run this package?</h2>

<p>The Epson IMU ROS driver is designed for building with the standard ROS catkin build environment.
Refer to the ROS1 Tutorials for more info: <a href="https://wiki.ros.org/ROS/Tutorials">ROS1 Tutorial</a></p>

<p>For more information on ROS &amp; catkin setup refer to: <a href="https://wiki.ros.org/ROS/Tutorials/InstallingandConfiguringROSEnvironment">Installing and Configuring ROS Environment</a>.</p>

<ol>
  <li>Place this package (including folders) into a new folder within your catkin workspace <code class="language-plaintext highlighter-rouge">src/</code> folder.
For example, we recommend using the folder name <code class="language-plaintext highlighter-rouge">ess_imu_driver</code>
</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;catkin_workspace&gt;/src/ess_imu_driver/

</code></pre></div></div>

<ol>
  <li>
    <p>Modify the <code class="language-plaintext highlighter-rouge">CMakeLists.txt</code> to select the serial interface type <code class="language-plaintext highlighter-rouge">INTERFACE=</code> and platform type <code class="language-plaintext highlighter-rouge">PLATFORM=</code> that matches your ROS system and connection to the Epson IMU.
Refer to the comments in the <code class="language-plaintext highlighter-rouge">CMakeLists.txt</code> for additional info.
<strong>NOTE:</strong> You <em>MUST</em> re-build using <code class="language-plaintext highlighter-rouge">catkin_make</code> after any changes in the <code class="language-plaintext highlighter-rouge">CMakeLists.txt</code>.</p>
  </li>
  <li>
    <p>From the catkin workspace folder run <code class="language-plaintext highlighter-rouge">catkin_make</code> to build all ROS packages located in the <code class="language-plaintext highlighter-rouge">&lt;catkin_workspace&gt;/src/</code> folder.</p>

    <p><strong>NOTE:</strong> Re-run <code class="language-plaintext highlighter-rouge">catkin_make</code> to rebuild the software after making any changes to any of the <code class="language-plaintext highlighter-rouge">.c</code> or <code class="language-plaintext highlighter-rouge">.cpp</code> or <code class="language-plaintext highlighter-rouge">.h</code> source files.</p>
  </li>
</ol>

<p><strong>NOTE:</strong> It is recommended to change IMU settings by editing the parameters in the <code class="language-plaintext highlighter-rouge">.launch</code> launch file, instead of modifying the <code class="language-plaintext highlighter-rouge">.c</code>, <code class="language-plaintext highlighter-rouge">.cpp</code>, <code class="language-plaintext highlighter-rouge">.h</code> source files directly.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;catkin_workspace&gt;/catkin_make

</code></pre></div></div>

<ol>
  <li>Reload the current ROS environment variables that may have changed after the catkin_make build process by entering the following from the <code class="language-plaintext highlighter-rouge">\&lt;catkin_workspace&gt;</code>:</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>source ./devel/setup.bash

</code></pre></div></div>

<ol>
  <li>Modify the <code class="language-plaintext highlighter-rouge">.launch</code> file in the launch/ folder to set your desired IMU configure parameter options at runtime:</li>
</ol>

<table>
  <thead>
    <tr>
      <th>Launch Parameter</th>
      <th>Comment</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>serial_port</td>
      <td>
<strong>NOTE:</strong> Only applicable when using UART interface to specify the port name, otherwise ignored ie. “/dev/ttyUSB0” or “/dev/ttyXXX”</td>
    </tr>
    <tr>
      <td>frame_id</td>
      <td>specifies the value in the IMU message frame_id field</td>
    </tr>
    <tr>
      <td>ext_sel</td>
      <td>specifies the function of the GPIO2 pin (GPIO2, External Trigger, External Counter Reset). <strong>NOTE:</strong> Must be set to External Counter Reset when time_correction is enabled.</td>
    </tr>
    <tr>
      <td>ext_pol</td>
      <td>specifies the polarity of the GPIO2 pin when <em>ext_sel</em> is External Trigger or External Counter Reset <strong>NOTE:</strong> Only applicable to G320/G354/G364/V340 otherwise ignored.</td>
    </tr>
    <tr>
      <td>dout_rate</td>
      <td>specifies the IMU output data rate</td>
    </tr>
    <tr>
      <td>filter_sel</td>
      <td>specifies the IMU filter setting</td>
    </tr>
    <tr>
      <td>flag_out</td>
      <td>specifies to enable or disable ND_FLAG status in IMU output data (not used by ROS)</td>
    </tr>
    <tr>
      <td>temp_out</td>
      <td>specifies to enable or disable TempC sensor in IMU output data (<strong>must be enabled</strong>)</td>
    </tr>
    <tr>
      <td>gyro_out</td>
      <td>specifies to enable or disable Gyro sensor in IMU output data (<strong>must be enabled</strong>)</td>
    </tr>
    <tr>
      <td>accel_out</td>
      <td>specifies to enable or disable Accl sensor in IMU output data (<strong>must be enabled</strong>)</td>
    </tr>
    <tr>
      <td>qtn_out</td>
      <td>specifies to enable or disable Quaternion in IMU output data (<strong>only for models that support quaternion output, otherwise ignored</strong>)</td>
    </tr>
    <tr>
      <td>count_out</td>
      <td>specifies to enable or disable counter in IMU output data (<strong>must be enabled when time_correction is enabled</strong>)</td>
    </tr>
    <tr>
      <td>checksum_out</td>
      <td>specifies to enable or disable checksum in IMU output data (not used by ROS, but checksum errors are detected when enabled)</td>
    </tr>
    <tr>
      <td>atti_profile</td>
      <td>specifies the attitude motion profile (<strong>only for models that support quaternion output, otherwise ignored</strong>)</td>
    </tr>
    <tr>
      <td>time_correction</td>
      <td>enables time correction function using External Counter Reset function &amp; external 1PPS connected to IMU GPIO2/EXT pin. <strong>NOTE:</strong> Must set count_out=1 &amp; ext_sel=1</td>
    </tr>
  </tbody>
</table>

<p><strong>NOTE:</strong> The ROS launch file passes IMU configuration settings to the IMU at runtime. Therefore, rebuilding with <code class="language-plaintext highlighter-rouge">catkin_make</code> is not required.</p>

<ol>
  <li>Start the Epson IMU ROS driver use the appropriate <code class="language-plaintext highlighter-rouge">.launch</code> file located in <code class="language-plaintext highlighter-rouge">launch/</code>. All parameters are described in the in-line comments of the <code class="language-plaintext highlighter-rouge">.launch</code> file.</li>
</ol>

<p>For example, to launch the ROS node:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;catkin_workspace&gt;/roslaunch ess_imu_driver normal.launch

</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Launch File</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>normal.launch</td>
      <td>Publishes to <code class="language-plaintext highlighter-rouge">imu/data</code> for IMU models that support <code class="language-plaintext highlighter-rouge">gyro</code>, <code class="language-plaintext highlighter-rouge">accel</code>, and <code class="language-plaintext highlighter-rouge">quaternion (orientation)</code> or <code class="language-plaintext highlighter-rouge">imu/data_raw</code> for IMU models that do not support <code class="language-plaintext highlighter-rouge">quaternion (orientation)</code>
</td>
    </tr>
    <tr>
      <td>raw.launch</td>
      <td>Publishes to <code class="language-plaintext highlighter-rouge">imu/data_raw</code> and does not enable or update <code class="language-plaintext highlighter-rouge">quaternion (orientation)</code>
</td>
    </tr>
    <tr>
      <td>tc.launch</td>
      <td>Same as normal.launch except time correction function is enabled (GNSS 1PPS signal must be connected to IMU EXT pin)</td>
    </tr>
  </tbody>
</table>

<h3 id="example-console-output-of-catkin_make-build">Example console output of <em>catkin_make</em> build</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>user@user:~/catkin_ws$ catkin_make
Base path: /home/user/catkin_ws
Source space: /home/user/catkin_ws/src
Build space: /home/user/catkin_ws/build
Devel space: /home/user/catkin_ws/devel
Install space: /home/user/catkin_ws/install
####
#### Running command: "make cmake_check_build_system" in "/home/user/catkin_ws/build"
####
-- Using CATKIN_DEVEL_PREFIX: /home/user/catkin_ws/devel
-- Using CMAKE_PREFIX_PATH: /home/user/catkin_ws/devel;/opt/ros/noetic
-- This workspace overlays: /home/user/catkin_ws/devel;/opt/ros/noetic
-- Found PythonInterp: /bin/python3 (found suitable version "3.8.10", minimum required is "3")
-- Using PYTHON_EXECUTABLE: /bin/python3
-- Using Debian Python package layout
-- Using empy: /usr/lib/python3/dist-packages/em.py
-- Using CATKIN_ENABLE_TESTING: ON
-- Call enable_testing()
-- Using CATKIN_TEST_RESULTS_DIR: /home/user/catkin_ws/build/test_results
-- Forcing gtest/gmock from source, though one was otherwise available.
-- Found gtest sources under '/usr/src/googletest': gtests will be built
-- Found gmock sources under '/usr/src/googletest': gmock will be built
-- Found PythonInterp: /bin/python3 (found version "3.8.10")
-- Using Python nosetests: /bin/nosetests3
-- catkin 0.8.10
-- BUILD_SHARED_LIBS is on
-- BUILD_SHARED_LIBS is on
-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-- ~~  traversing 1 packages in topological order:
-- ~~  - ess_imu_driver
-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-- +++ processing catkin package: 'ess_imu_driver'
-- ==&gt; add_subdirectory(ess_imu_driver)
-- Using these message generators: gencpp;geneus;genlisp;gennodejs;genpy
-- Building for IMU Model:
---- Building for platform: NONE
---- Building for interface: UART
-- Configuring done
-- Generating done
-- Build files have been written to: /home/user/catkin_ws/build
####
#### Running command: "make -j4 -l4" in "/home/user/catkin_ws/build"
####
Scanning dependencies of target ess_imu_driver_lib
[ 50%] Building C object ess_imu_driver/CMakeFiles/ess_imu_driver_lib.dir/src/hcl_uart.c.o
[ 50%] Building C object ess_imu_driver/CMakeFiles/ess_imu_driver_lib.dir/src/sensor_epsonCommon.c.o
[ 50%] Building C object ess_imu_driver/CMakeFiles/ess_imu_driver_lib.dir/src/hcl_linux.c.o
[ 50%] Building C object ess_imu_driver/CMakeFiles/ess_imu_driver_lib.dir/src/hcl_gpio.c.o
[ 62%] Building C object ess_imu_driver/CMakeFiles/ess_imu_driver_lib.dir/src/sensor_epsonUart.c.o
[ 75%] Linking C shared library /home/user/catkin_ws/devel/lib/libess_imu_driver_lib.so
[ 75%] Built target ess_imu_driver_lib
Scanning dependencies of target ess_imu_driver_node
[ 87%] Building CXX object ess_imu_driver/CMakeFiles/ess_imu_driver_node.dir/src/epson_imu_uart_ros_node.cpp.o
[100%] Linking CXX executable /home/user/catkin_ws/devel/lib/ess_imu_driver/ess_imu_driver_node
[100%] Built target ess_imu_driver_node

</code></pre></div></div>

<h3 id="example-console-output-of-launching-ros-node">Example console output of launching ROS node</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>user@user:~/catkin_ws$ roslaunch ess_imu_driver normal.launch
... logging to /home/user/.ros/log/ffc82936-505a-11ef-8a91-919aef8bfaba/roslaunch-user-2855826.log
Checking log directory for disk usage. This may take a while.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is &lt;1GB.

started roslaunch server http://user:46575/

SUMMARY
========

PARAMETERS
 * /ess_imu_driver_node/accel_out: 1
 * /ess_imu_driver_node/atti_profile: 0
 * /ess_imu_driver_node/checksum_out: 1
 * /ess_imu_driver_node/count_out: 1
 * /ess_imu_driver_node/dout_rate: 9
 * /ess_imu_driver_node/ext_pol: 0
 * /ess_imu_driver_node/ext_sel: 1
 * /ess_imu_driver_node/filter_sel: 9
 * /ess_imu_driver_node/flag_out: 1
 * /ess_imu_driver_node/frame_id: imu_link
 * /ess_imu_driver_node/gyro_out: 1
 * /ess_imu_driver_node/qtn_out: 1
 * /ess_imu_driver_node/serial_port: /dev/ttyUSB0
 * /ess_imu_driver_node/temp_out: 1
 * /ess_imu_driver_node/time_correction: 0
 * /rosdistro: noetic
 * /rosversion: 1.16.0

NODES
  /
    ess_imu_driver_node (ess_imu_driver/ess_imu_driver_node)

auto-starting new master
process[master]: started with pid [2856243]
ROS_MASTER_URI=http://localhost:11311

setting /run_id to 4a2eb51a-505d-11ef-8a91-919aef8bfaba
process[rosout-1]: started with pid [2856253]
started core service [/rosout]
process[ess_imu_driver_node-2]: started with pid [2856260]
[ INFO] [1722554708.456803065]: Initializing HCL layer...
...done.
[ INFO] [1722554708.457636356]: Initializing GPIO interface...
...done.
[ INFO] [1722554708.457663540]: Initializing UART interface...
Attempting to open port.../dev/ttyUSB0...done.
...sensorDummyWrite......done.
[ INFO] [1722554708.772857535]: Checking sensor NOT_READY status...
...done.
[ INFO] [1722554709.004028937]: Detecting sensor model...

Reading device model and serial number...
PRODUCT ID:     G370PDS0
SERIAL ID:      W0000010...done.
[ INFO] [1722554709.131947637]: Initializing Sensor...
...done.
[ INFO] [1722554709.151342038]: Epson IMU initialized.

...Sensor start.

</code></pre></div></div>

<h2 id="what-does-this-ros-imu-node-publish-as-messages">What does this ROS IMU Node publish as messages?</h2>

<p>The Epson IMU ROS node will publish messages as convention per <a href="http://www.ros.org/reps/rep-0145.html">REP 145</a>.</p>

<ul>
  <li>For IMU models that do not support quaternion output, the <code class="language-plaintext highlighter-rouge">normal.launch</code> file will remap IMU messages to <code class="language-plaintext highlighter-rouge">/imu/data_raw</code> and only update the fields for <code class="language-plaintext highlighter-rouge">angular_velocity</code> (gyro), and <code class="language-plaintext highlighter-rouge">linear_acceleration</code> (accel).</li>
  <li>For IMU models that supports and enables quaternion, the <code class="language-plaintext highlighter-rouge">normal.launch</code> file will remap IMU messages to <code class="language-plaintext highlighter-rouge">/imu/data</code> and update <code class="language-plaintext highlighter-rouge">angular_velocity</code> (gyro), <code class="language-plaintext highlighter-rouge">linear_acceleration</code> (accel), and <code class="language-plaintext highlighter-rouge">orientation</code> field using the internal extended Kalman Filter.</li>
  <li>Temperature sensor data from the IMU will publish on topic <code class="language-plaintext highlighter-rouge">/epson_imu/tempc</code>
</li>
</ul>

<h3 id="ros-topic-message-imudata">ROS Topic Message /imu/data</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
header:
  seq: 34983
  stamp:
    secs: 1601590579
    nsecs: 771273325
  frame_id: "imu_link"
orientation:
  x: 2.4786295434e+33
  y: 1.1713334935e+38
  z: 1.17130631507e+38
  w: 1.17130956026e+38
orientation_covariance: [-1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
angular_velocity:
  x: 0.00435450254008
  y: 0.000734272529371
  z: -9.40820464166e-05
angular_velocity_covariance: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
linear_acceleration:
  x: -0.730921983719
  y: -1.54766368866
  z: 9.72711181641
linear_acceleration_covariance: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
---


</code></pre></div></div>

<h3 id="ros-topic-message-imudata_raw">ROS Topic Message /imu/data_raw</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
header:
  seq: 10608
  stamp:
    secs: 1601575987
    nsecs: 673387357
  frame_id: "imu_link"
orientation:
  x: -0.0801454782486
  y: 0.0367396138608
  z: 0.00587898213416
  w: 0.996088504791
orientation_covariance: [-1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
angular_velocity:
  x: -0.00118702522013
  y: 0.000320095219649
  z: -0.00014466587163
angular_velocity_covariance: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
linear_acceleration:
  x: -0.727666378021
  y: -1.5646469593
  z: 9.69056034088
linear_acceleration_covariance: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
---

</code></pre></div></div>

<h2 id="why-am-i-seeing-inaccurate-ros-timestamps-high-latencies-or-slower-than-expected-imu-data-rates">Why am I seeing inaccurate ROS timestamps, high latencies, or slower than expected IMU data rates?</h2>

<h3 id="ros-timestamps">ROS timestamps</h3>

<ul>
  <li>By default, the ROS node publishes using the ROS/Unix current timestamp at the time of processing.</li>
  <li>Latencies from system overhead, system loading, and buffering will cause timestamp inaccuracies between the sensor data and this ROS/Unix timestamp.</li>
  <li>To improve timestamp accuracy, the user should consider using the time correction function with a GNSS receiver with 1PPS output to increase clock accuracy on the ROS host system:
    <ul>
      <li>Consider setting up <a href="https://chrony-project.org/examples.html">chrony</a> and <a href="https://gpsd.io/">gpsd</a> with the GNSS receiver’s 1PPS signal connected to constrain the host system clock drift</li>
      <li>Consider connecting the GNSS receiver’s 1PPS signal to the Epson IMU GPIO2/EXT with <code class="language-plaintext highlighter-rouge">time_correction</code> enabled in the <code class="language-plaintext highlighter-rouge">.py</code> launch file to improve time-stamp accuracy of the IMU sensor messages</li>
    </ul>
  </li>
</ul>

<h3 id="when-using-usb-uart-bridges">When using USB-UART bridges</h3>

<ul>
  <li>If your connection between the Epson IMU UART interface and the Linux host is by FTDI ICs, the <code class="language-plaintext highlighter-rouge">latency_timer</code> setting in the FTDI driver may be large i.e. typically 16 (msec).</li>
  <li>This may affect the UART latency and maximum IMU data rates on your host system.</li>
  <li>There are 3 methods listed below to reduce the impact of this latency.</li>
</ul>

<h4 id="modifying-latency_timer-by-udev-mechanism">Modifying <em>latency_timer</em> by udev mechanism</h4>

<ul>
  <li>
<a href="https://wiki.debian.org/udev">udev</a> is a device manager for Linux that can dynamically create and remove devices in <em>userspace</em> and run commands when new devices appear or other events</li>
  <li>Create a udev rule to automatically set the <code class="language-plaintext highlighter-rouge">latency_timer</code> to 1 when an FTDI USB-UART device is plugged in to a USB port.</li>
  <li>For example, the following text file named <code class="language-plaintext highlighter-rouge">99-ftdi_sio.rules</code> can be put in the <code class="language-plaintext highlighter-rouge">/etc/udev/rules.d</code> directory</li>
</ul>

<p><strong>NOTE:</strong> This requires root (sudo) access to create or copy file in <code class="language-plaintext highlighter-rouge">/etc/udev/rules.d</code>
<strong>NOTE:</strong> This is the recommended method because it is automatic when device is plugged in, but it affects ALL FTDI USB-UART devices on the system</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SUBSYSTEM=="usb-serial", DRIVER=="ftdi_sio", ATTR{latency_timer}="1"

</code></pre></div></div>

<h4 id="modifying-latency_timer-by-sysfs-mechanism">Modifying <em>latency_timer</em> by sysfs mechanism</h4>

<ul>
  <li>The example below reads the <code class="language-plaintext highlighter-rouge">latency_timer</code> setting for <code class="language-plaintext highlighter-rouge">/dev/ttyUSB0</code> which returns 16msec.</li>
  <li>Then, it sets the <code class="language-plaintext highlighter-rouge">latency_timer</code> to 1msec, and confirms it by read back.</li>
</ul>

<p><strong>NOTE: This may require root (sudo su) access on your system to execute.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cat /sys/bus/usb-serial/devices/ttyUSB0/latency_timer
16
echo 1 &gt; /sys/bus/usb-serial/devices/ttyUSB0/latency_timer
cat /sys/bus/usb-serial/devices/ttyUSB0/latency_timer
1

</code></pre></div></div>

<h4 id="modifying-low_latency-flag-using-setserial-utility">Modifying <em>low_latency</em> flag using <em>setserial</em> utility</h4>

<ul>
  <li>The example below sets the <code class="language-plaintext highlighter-rouge">low_latency</code> flag for <code class="language-plaintext highlighter-rouge">/dev/ttyUSB0</code>.</li>
  <li>This will have the same effect as setting the <code class="language-plaintext highlighter-rouge">latency_timer</code> to 1msec.</li>
  <li>This can be confirmed by running the <code class="language-plaintext highlighter-rouge">setserial</code> command again.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>user@user:~$ setserial /dev/ttyUSB0
/dev/ttyUSB0, UART: unknown, Port: 0x0000, IRQ: 0

user@user:~$ setserial /dev/ttyUSB0 low_latency

user@user:~$ setserial /dev/ttyUSB0
/dev/ttyUSB0, UART: unknown, Port: 0x0000, IRQ: 0, Flags: low_latency

</code></pre></div></div>

<h3 id="when-using-the-spi-interface">When using the SPI interface</h3>

<ul>
  <li>latency issues with SPI interface will largely depend on your host system’s processing load and capabilities.</li>
  <li>If your ROS platform is running too many ROS node packages or too slow, it may not react fast enough to detect the rising edge of the IMU DRDY signal and
process the IMU sampling data.</li>
  <li>Try modifying the <code class="language-plaintext highlighter-rouge">dout_rate</code> and <code class="language-plaintext highlighter-rouge">filter_sel</code> setting in the <code class="language-plaintext highlighter-rouge">.launch</code> file to the slowest setting that can meet your system requirements.</li>
  <li>Try monitoring the DRDY signal on the IMU with a oscilloscope to verify the stability of the IMU DRDY signal and seeing that it matches the expected <code class="language-plaintext highlighter-rouge">dout_rate</code> frequency.</li>
  <li>Try to set the SPI clock rate to maximum of 1MHz (1000000) in the <code class="language-plaintext highlighter-rouge">_node.cpp</code> for the <code class="language-plaintext highlighter-rouge">spiInit()</code> function call:</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...

  ROS_INFO("Initializing SPI interface...");
  // The max SPI clock rate is 1MHz for current model Epson IMUs
  if (!spiInit(SPI_MODE3, 1000000)) {
    ROS_ERROR("Error: could not initialize SPI interface. Exiting...");
    gpioRelease();
    seRelease();
    return false;
  }

...

</code></pre></div></div>

<h2 id="package-contents">Package Contents</h2>

<p>The Epson IMU ROS1 driver-related sub-folders &amp; root files are:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   launch/        &lt;== various example launch files
   src/           &lt;== source code for ROS node C++ wrapper, IMU Linux C driver, and additional README_src.md specifically for building and using the IMU Linux C driver as stand-alone (without ROS support)
   CMakeLists.txt &lt;== cmake build script used by catkin_make
   LICENSE.txt    &lt;== description of the applicable licenses
   package.xml    &lt;== catkin package description
   README.md      &lt;== general README

</code></pre></div></div>

<h2 id="references">References</h2>

<ol>
  <li>https://index.ros.org</li>
</ol>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-ess_imu_driver">Changelog for package ess_imu_driver</h1>

<h2 id="202-2024-11-29">2.0.2 (2024-11-29)</h2>

<ul>
  <li>bugfix with TimeCorrection class for PPS input</li>
</ul>

<h2 id="201-2024-10-02">2.0.1 (2024-10-02)</h2>

<ul>
  <li>updated launch files, add new .h files for uart &amp; spi</li>
  <li>port changes from imu_linux_example (auto-detect/initialize IMU
model)</li>
</ul>

<h2 id="101-2023-11-30">1.0.1 (2023-11-30)</h2>

<ul>
  <li>version bump from bloom, no code change</li>
</ul>

<h2 id="100-2023-11-29">1.0.0 (2023-11-29)</h2>

<ul>
  <li>support UART or SPI in same package</li>
  <li>add publisher for temperature sensor data</li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="noetic-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/ess_imu_driver/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="noetic-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/roscpp#noetic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/roscpp#noetic">roscpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/sensor_msgs#noetic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/sensor_msgs#noetic">sensor_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/std_msgs#noetic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/std_msgs#noetic">std_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/geometry_msgs#noetic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/geometry_msgs#noetic">geometry_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/tf2#noetic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/tf2#noetic">tf2  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/catkin#noetic-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/catkin#noetic">catkin  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No direct system dependencies.</em>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <em>No known dependants.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="noetic-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <ul>
            
              <li><a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./launch/tc.launch" target="_blank">launch/tc.launch</a>
                <ul class="list-unstyled">
                  
                    <li><em></em></li>
                  
                  <li>
                    <ul>
                      
                    </ul>
                  </li>
                </ul>
              </li>
            
              <li><a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./launch/raw.launch" target="_blank">launch/raw.launch</a>
                <ul class="list-unstyled">
                  
                    <li><em></em></li>
                  
                  <li>
                    <ul>
                      
                    </ul>
                  </li>
                </ul>
              </li>
            
              <li><a href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/./launch/normal.launch" target="_blank">launch/normal.launch</a>
                <ul class="list-unstyled">
                  
                    <li><em></em></li>
                  
                  <li>
                    <ul>
                      
                    </ul>
                  </li>
                </ul>
              </li>
            
          </ul>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="noetic-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>ess_imu_driver</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="noetic-question-list" class="panel-body" style="display: none;"></div>
      <div id="noetic-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/ess_imu_driver+noetic">here</a>.</p>
      </div>
      <div id="noetic-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/cubicleguy/ess_imu_driver.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/noetic/api/ess_imu_driver/html/"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/cubicleguy/ess_imu_driver/tree/noetic/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  <a class="list-group-item "
     target="_blank"
     href="http://wiki.ros.org/ess_imu_driver?distro=noetic"
     title="View this package on wiki.ros.org">
       <span style="margin-right: 5px;" class="glyphicon glyphicon-info-sign"></span>
       
       Wiki
  </a>
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>iron</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>



<script id="question-list-template" type="text/html">
  <p>
    Browse <a href="https://robotics.stackexchange.com/questions/tagged/ess_imu_driver?tab=Newest">recent questions</a>
    or see the <a href="https://robotics.stackexchange.com/questions/tagged/ess_imu_driver?tab=Votes">highest voted ones</a>.
  </p>
  
  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">Title</th>
        <th scope="col">Answered?</th>
        <th scope="col">Created</th>
        <th scope="col">Active</th>
      </tr>
    </thead>
    <tbody>
      {{#questions}}
      <tr>
        <th scope="row"><a href="{{link}}">{{title}}</a><br><small>Tags: {{strtags}}</small></th>
        <th>{{answered}}</th>
        <th>{{created}}</th>
        <th>{{active}}</th>
      </tr>
      {{/questions}}
    </tbody>
  </table>
  {{#has_more}}
  <hr>
  <h4>Additional questions are available at
    <a href="https://robotics.stackexchange.com/questions/tagged/{{name}}?tab=Newest">Robotics Stack Exchange</a>
  </h4>
  {{/has_more}}
  
</script>

<script type="text/javascript" src="/js/mustache.js"></script>
<script type="text/javascript">
  jQuery(function() {
    jQuery.getJSON(url="https://api.stackexchange.com/2.3/questions?order=desc&site=robotics" +
                       "&tagged=ess_imu_driver&pagesize=50&sort=activity")
    .done(function(feed) {
      if (feed.items.length > 0) {
        var question_count_str = (feed.has_more ? '>' : '') + String(feed.items.length)
        const questions = feed.items.map(
          function(question) {
            question.id = Math.round(Math.random() * 99999.0);
            question.created = (new Date(question.creation_date * 1000)).toDateString()
            question.active = (new Date(question.last_activity_date * 1000)).toDateString()
            question.answered = question.is_answered ? "Yes" : "No"
            question.strtags = question.tags.join(' ')
            return question;
          });
        const template = jQuery("#question-list-template").text();
        Mustache.parse(template);
        var rendered = Mustache.render(
          template, 
          { questions: questions,
            has_more: feed.has_more,
            name: "ess_imu_driver"
          }
        );
      }
      //   TODO(tfoote) Resolve images
      //   jQuery("#-question-list img").each(function() {
      //     if (jQuery(this).attr("src").startsWith("/upfiles")) {
      //        jQuery(this).attr("src", "https://answers.ros.org" + jQuery(this).attr("src"));
      //     }
      //   });
      
      if (feed.items.length > 0) {
        jQuery("#humble-question-list").html(rendered);
        jQuery("#humble-question-list").show();
      } else {
        jQuery("#humble-no-question-list").show();
      }
      jQuery("#humble-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#jazzy-question-list").html(rendered);
        jQuery("#jazzy-question-list").show();
      } else {
        jQuery("#jazzy-no-question-list").show();
      }
      jQuery("#jazzy-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#kilted-question-list").html(rendered);
        jQuery("#kilted-question-list").show();
      } else {
        jQuery("#kilted-no-question-list").show();
      }
      jQuery("#kilted-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#rolling-question-list").html(rendered);
        jQuery("#rolling-question-list").show();
      } else {
        jQuery("#rolling-no-question-list").show();
      }
      jQuery("#rolling-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#github-question-list").html(rendered);
        jQuery("#github-question-list").show();
      } else {
        jQuery("#github-no-question-list").show();
      }
      jQuery("#github-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#noetic-question-list").html(rendered);
        jQuery("#noetic-question-list").show();
      } else {
        jQuery("#noetic-no-question-list").show();
      }
      jQuery("#noetic-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#galactic-question-list").html(rendered);
        jQuery("#galactic-question-list").show();
      } else {
        jQuery("#galactic-no-question-list").show();
      }
      jQuery("#galactic-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#iron-question-list").html(rendered);
        jQuery("#iron-question-list").show();
      } else {
        jQuery("#iron-no-question-list").show();
      }
      jQuery("#iron-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#melodic-question-list").html(rendered);
        jQuery("#melodic-question-list").show();
      } else {
        jQuery("#melodic-no-question-list").show();
      }
      jQuery("#melodic-questions-count").text(question_count_str);
      
    })
    .fail(function(jqxhr, textStatus, error) {
      console.error("Failed to get question data: " + jqxhr.responseText);
      
      jQuery("#humble-get-question-fail").show();
      
      jQuery("#jazzy-get-question-fail").show();
      
      jQuery("#kilted-get-question-fail").show();
      
      jQuery("#rolling-get-question-fail").show();
      
      jQuery("#github-get-question-fail").show();
      
      jQuery("#noetic-get-question-fail").show();
      
      jQuery("#galactic-get-question-fail").show();
      
      jQuery("#iron-get-question-fail").show();
      
      jQuery("#melodic-get-question-fail").show();
      
    });
  });
</script>


<script type="text/javascript">
  $(document).ready(function() {
    setupDistroSwitch("humble");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
