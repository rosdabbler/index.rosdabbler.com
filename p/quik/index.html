<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Package: quik</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/p/quik/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top: 20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/?search_packages=true">Packages</a></li>
        <li class="active">quik</li>
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-default" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-default" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-default" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-default" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-primary" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class="disabled older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>humble</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>jazzy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>kilted</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>rolling</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/quik">quik</a> <small>package from <a style="text-decoration:none" href="/r/quik/github-steffanlloyd-quik">quik</a> repo</small>
        </h3>
          
            
            
              <span class="label label-default pkg-label">

quik
</span>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/github/p/quik"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/steffanlloyd/quik/tree/main/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="github-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#github-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#github-assets" data-toggle="tab"><span class="label label-primary">3</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#github-deps" data-toggle="tab"><span class="label label-primary">9</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#github-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#github-questions" data-toggle="tab"><span id="github-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="github-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>1.0.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>AGPL-3.0-only</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">An ultra-fast and highly robust kinematics library for C++ or ROS2 using DH parameters.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/steffanlloyd/quik.git">https://github.com/steffanlloyd/quik.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-12-07
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNKNOWN
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">robotics</span> <span class="label label-default">inverse-kinematics</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/quik/#github-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/quik/#github-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/quik/#github-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            An ultra-fast and reliable inverse kinematics ROS2 service for serial robots.
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Steffan Lloyd</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <em>No additional authors.</em>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/steffanlloyd/quik/tree/main/./ReadMe.md" title="Open in git repository">ReadMe.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="quik-an-ultra-fast-and-highly-robust-kinematics-library-for-c-or-ros2-using-dh-parameters">QuIK: An ultra-fast and highly robust kinematics library for C++ or ROS2 using DH parameters</h1>

<p>QuIK is a hyper-efficient C++ kinematics library for serial manipulators. It is based on the novel QuIK algorithm, <a href="http://dx.doi.org/10.1109/TRO.2022.3162954">published in IEEE-TRO</a>, that uses 3rd-order velocity kinematics to solve generalized inverse kinematics significantly faster, and significantly more reliably that existing inverse kinematics packages. QuIK uses the Denevit-Hartenberg convention for kinematics, which is readily available for most manipulators and results in a more computationally efficient formulation of kinematics.</p>

<p>Some key benchmarks over other available solvers, on a sample 6-DOF manipulator with large initial joint error:</p>

<table>
  <thead>
    <tr>
      <th>Solver</th>
      <th>Mean Solution Time</th>
      <th>Error Rate</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>QuIK</td>
      <td>21 μs</td>
      <td>0.13%</td>
    </tr>
    <tr>
      <td>KDL (used in ROS, and primary base solver in TracIK)</td>
      <td>148 μs (x7)</td>
      <td>5.3% (x40)</td>
    </tr>
    <tr>
      <td>Matlab Robotics Toolbox</td>
      <td>670 μs (x32)</td>
      <td>1.1% (x9)</td>
    </tr>
  </tbody>
</table>

<p>When the initial guess is good (close to the true answer), the error rate goes to nearly zero and the solution time decreases significantly.</p>

<p>These benchmarks were published in the IEEE-TRO paper, and further details about them can be found there. A preprint of this paper is included in this repository:  <a href="https://github.com/steffanlloyd/quik/tree/main/./docs/SLloydEtAl2022_QuIK_preprint.pdf">docs/SLloydEtAl2022_QuIK_preprint.pdf</a>.</p>

<blockquote>
  <p>S. Lloyd, R. Irani, and M. Ahmadi, “Fast and Robust Inverse Kinematics for Serial Robots using Halley’s Method,” IEEE Transactions on Robotics, vol. 38, no. 5, pp. 2768–2780, Oct. 2022. doi: <a href="http://dx.doi.org/10.1109/TRO.2022.3162954">10.1109/TRO.2022.3162954</a>. A preprint of this paper can be found in the current repository, <a href="https://github.com/steffanlloyd/quik/tree/main/./docs/SLloydEtAl2022_QuIK_preprint.pdf">docs/SLloydEtAl2022_QuIK_preprint.pdf</a>.</p>
</blockquote>

<p>This repository includes the code to use the QuIK algorithm in ROS2, or just in C++ in general. Examples are given in python as well.</p>

<h2 id="what-this-repository-does-and-does-not-do">What this repository does and does not do</h2>

<p>This repository allows for highly efficient robot kinematics, and in particular inverse kinematics. It is designed for serial manipulators, i.e. manipulators with a single kinematic chain that does not branch.</p>

<p>It will perform:</p>

<ul>
  <li>Highly efficient and robust inverse kinematics against 6-DOF constraints in world frame. E.g. a target tool point and rotation is specified, and joint angles are returned.</li>
  <li>Forward kinematics</li>
  <li>Velocity kinematics/Jacobian computation</li>
</ul>

<p>It does not do:</p>
<ul>
  <li>[<em>Planned</em>] Null space optimization for robots with more than 6 joints. The code works perfectly for higher-order chains, but will only return “a” solution, not necessarily a solution which is optimal.</li>
  <li>[<em>Planned</em>] Reduced-order or transformed constraints, where you perhaps care about the tool point, but not rotation, or other combinations thereof.</li>
  <li>[<em>Planned</em>] Feasibility checks. This code base does not check the computed solutions against joint limits, or check whether the target pose can be reached within the robot’s speed and acceleration limits.</li>
</ul>

<h2 id="why-use-generalized-inverse-kinematics">Why use generalized inverse kinematics</h2>

<p>If you can and have derived the analytic (closed-form) solution to the inverse kinematics for your robot, by all means use it! It will be faster (likely) and more reliable than a generalized solver, which can fail. Generalized inverse kinematics can be used instead, when:</p>
<ul>
  <li>You aren’t able to derive a closed-form solution, or don’t want to.</li>
  <li>Your robot is kinematically calibrated, so the DH table is perturbed and a closed-form solution doesn’t exist.</li>
  <li>Your robot is too complex to derive a closed form solution, or lacks a spherical wrist allowing for decoupling of the rotational and translational kinematics.</li>
  <li>You want to perform more complex null-space optimization (planned for future implementation in this repository).</li>
</ul>

<p>It is worth noting though, that with this implementation of inverse kinematics, if your initial guess is good (e.g. if you use the previous state of the robot), then the algorithm will converge in 5-6 microseconds and with effectively zero error rate. A typical analytical solution will be closer to 1 microsecond. This difference may not be significant enough to make it worthwhile taking the time to derive the full analytical solution.</p>

<h2 id="how-it-works">How it works</h2>

<p>The QuIK repository is based on the QuIK algorith, the full details of which can be found in the paper <a href="https://github.com/steffanlloyd/quik/tree/main/./docs/SLloydEtAl2022_QuIK_preprint.pdf">docs/SLloydEtAl2022_QuIK_preprint.pdf</a>. QuIK stands for the <em>Quick Inverse Kinematics</em> algorithm, which is a new algorithm for generalized inverse kinematics of serial kinematic chains that has been shown to be 1-2 orders of magnitude faster, and more robust (fails less) than other off-the-shelf algorithms.</p>

<p>The key innovation in this work is the use of higher level derivatives in the iterative solver. Most current inverse kinematics solvers use the geometry Jacobian of the kinematic chain in a <em>damped Newton search</em>, where at each step the kinematics function of the robot is linearized about a point, and this linear estimate is used to project towards the correct solution. The novelty with the QuIK method is that it uses the first <em>and</em> second-order derivatives to approximate the robot’s kinematics function as a quadratic curve, which is instead used to project towards the solution. This quadratic curve captures the function much more effectively than the linear estimate, leading to much faster convergence, and fewer cases of the algorithm diverging to an incorrect solution. This is visualized in the image below.</p>

<p><img src="https://raw.githubusercontent.com/steffanlloyd/quik/main/./docs/nr_v_quik.png" alt="Graph showing the difference between the Newton-Raphson and QuIK algorithms"></p>

<p>This improved convergence can be shown graphically. In the above-linked paper, 1 million random poses were generated for the 6-DOF KUKA KR6 robot and solved with a Newton-Raphson solver and the QuIK solver. Each algorithm was given an initial guess that was, on average, 45 degrees away from the true answer (on each joint).
The plot below shows the histogram distribution of the normed kinematic error after each algorithm iteration. Here, we see that the QuIK method converges to machine-level precision nearly twice as fast as the Newton algorithm, and leaves a much lower amount of its sampled unconverged at the top.</p>

<p><img src="https://raw.githubusercontent.com/steffanlloyd/quik/main/./docs/convergence.png" alt="Graph showing the convergence between the Newton-Raphson and QuIK algorithms"></p>

<p>Further details and benchmarks can be found in the paper: <a href="https://github.com/steffanlloyd/quik/tree/main/./docs/SLloydEtAl2022_QuIK_preprint.pdf">docs/SLloydEtAl2022_QuIK_preprint.pdf</a>.</p>

<h2 id="how-to-build">How to build</h2>

<p>This repository can be closed directly into the <code class="language-plaintext highlighter-rouge">src</code> folder of your ros workspace. For optimal performance, build using the release flag. For this type of iterative code, the compiler optimizations make it run about 10x faster. It will work just fine without it, however.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>colcon build <span class="nt">--cmake-args</span> <span class="nt">-DCMAKE_BUILD_TYPE</span><span class="o">=</span>Release

</code></pre></div></div>

<h2 id="code-description-and-usage">Code Description and Usage</h2>

<p>The main C++ code is stored in <code class="language-plaintext highlighter-rouge">include/quik</code> and <code class="language-plaintext highlighter-rouge">src</code>. The code can be used directly in your C++ projects, or in C++ ros nodes, or by building and running the provided kinematics service node (see below).</p>

<p><strong>Core QuIK functionality</strong>:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">include/quik/Robot.hpp</code>: Defines the <code class="language-plaintext highlighter-rouge">quik::Robot</code> class and forward kinematic/jacobian functions.</li>
  <li>
<code class="language-plaintext highlighter-rouge">include/quik/IKSolver.hpp</code>: Defines the <code class="language-plaintext highlighter-rouge">quik::IKSolver</code> class and associated inverse kinematics functions.</li>
  <li>
<code class="language-plaintext highlighter-rouge">include/quik/geometry.hpp</code> and <code class="language-plaintext highlighter-rouge">src/geometry.cpp</code>: Defines the <code class="language-plaintext highlighter-rouge">quik::geometry</code> namespace, which includes a number of functions for transforming from twists to homogeneous transforms to quaternion/point representations, etc.</li>
  <li>
<code class="language-plaintext highlighter-rouge">include/quik/utilities.hpp</code>: Defines the <code class="language-plaintext highlighter-rouge">quik::utilities</code> namespace, which includes some non-kinematic helper functions.</li>
</ul>

<p><strong>ROS2 code</strong></p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">include/quik/ros_helpers.hpp</code> and <code class="language-plaintext highlighter-rouge">src/ros_helpers.cpp</code>: Defines helper functions for using QuIK in ROS, such as service handlers for forward/inverse/velocity kinematics, as well as helper functions for forming and parsing service requests.</li>
  <li>
<code class="language-plaintext highlighter-rouge">src/ros_kinematics_service_node.cpp</code>: A ROS2 node that defines services for forward, inverse, and velocity kinematics.</li>
</ul>

<p><strong>Example code</strong></p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">src/sample_cpp_usage.cpp</code>: A simple demo showing how the codebase can be used (ROS-indenpendent).</li>
  <li>
<code class="language-plaintext highlighter-rouge">src/sample_ros_client_node.cpp</code>: A sample client node for the service server node provided.</li>
  <li>
<code class="language-plaintext highlighter-rouge">src/sample_ros_cpp_node.cpp</code>: A simple demo of using the QuIK codebase in a ROS node (directly, without using the service node).</li>
</ul>

<p><strong>Python code</strong></p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">python/sample_quik_client_node.py</code>: A sample python node that calls the kinematics service node provided.</li>
  <li>
<code class="language-plaintext highlighter-rouge">python/quik_service_helpers.py</code>: A python module that defines helper functions for forming and parsing service requests from the service node.</li>
</ul>

<h3 id="basic-usage">Basic Usage</h3>

<p>This library does not use URDF like many ROS packages; instead, it builds the robot structure using Denevit-Hartenburg (DH) convention. The DH table is a method to describe the geometry of a robot or a kinematic chain. It uses four parameters - <code class="language-plaintext highlighter-rouge">a</code>, <code class="language-plaintext highlighter-rouge">alpha</code>, <code class="language-plaintext highlighter-rouge">d</code>, and <code class="language-plaintext highlighter-rouge">theta</code> - to define the spatial relationship between adjacent links in the chain. More information on the DH convention <a href="https://users.cs.duke.edu/~brd/Teaching/Bio/asmb/current/Papers/chap3-forward-kinematics.pdf">here</a> or <a href="https://spart.readthedocs.io/en/latest/DH.html">here</a>.</p>

<h4 id="the-quikrobot-class">The <code class="language-plaintext highlighter-rouge">quik::Robot</code> class</h4>

<p>In this implementation, we use the Spong notation and numbering convention for the DH table. This means that:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">a</code> and <code class="language-plaintext highlighter-rouge">alpha</code> are the link length and twist angle, respectively, which describe the transformation from one link to the next.</li>
  <li>
<code class="language-plaintext highlighter-rouge">d</code> and <code class="language-plaintext highlighter-rouge">theta</code> are the link offset and joint angle, respectively, which describe the transformation due to the joint variable.</li>
</ul>

<p>The DH parameters are arranged in a matrix where each row corresponds to one joint of the robot, and the columns correspond to the <code class="language-plaintext highlighter-rouge">a</code>, <code class="language-plaintext highlighter-rouge">alpha</code>, <code class="language-plaintext highlighter-rouge">d</code>, and <code class="language-plaintext highlighter-rouge">theta</code> parameters, in that order.</p>

<p>The robot properties are defined as follows:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">DH</code>: A DOFx4 matrix of the Denavit-Hartenberg (DH) parameters in the following order:</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    a_1  alpha_1    d_1   theta_1
    :       :        :       :
    an   alpha_n    d_n   theta_n
    
</code></pre></div></div>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">linkTypes</code>: A vector of link types. Each element should be <code class="language-plaintext highlighter-rouge">true</code> if the corresponding joint is a prismatic joint, <code class="language-plaintext highlighter-rouge">false</code> otherwise.</li>
  <li>
<code class="language-plaintext highlighter-rouge">Qsign</code>: A vector of link directions. Each element should be <code class="language-plaintext highlighter-rouge">-1</code> or <code class="language-plaintext highlighter-rouge">1</code>, allowing you to change the sign of the corresponding joint variable.</li>
  <li>
<code class="language-plaintext highlighter-rouge">Tbase</code>: The base transform of the robot. This is a 4x4 matrix representing the transformation between the world frame and the first DH frame.</li>
  <li>
<code class="language-plaintext highlighter-rouge">Ttool</code>: The tool transform of the robot. This is a 4x4 matrix representing the transformation between the DOF’th frame and the tool frame.</li>
</ul>

<p>For example, the following code would define the KUKA KR6 manipulator:</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">"Eigen/Dense"</span><span class="cp">
#include</span> <span class="cpf">"quik/Robot.hpp"</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">Eigen</span><span class="p">;</span>
<span class="c1">// Given as DOFx4 table, in the following order: a_i, alpha_i, d_i, theta_i.</span>
<span class="n">Matrix</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="o">&gt;</span> <span class="n">DH</span><span class="p">;</span>
<span class="n">DH</span> <span class="o">&lt;&lt;</span> <span class="mf">0.025</span><span class="p">,</span>    <span class="o">-</span><span class="n">M_PI</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>   <span class="mf">0.183</span><span class="p">,</span>       <span class="mi">0</span><span class="p">,</span>
      <span class="o">-</span><span class="mf">0.315</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span>         <span class="mi">0</span><span class="p">,</span>           <span class="mi">0</span><span class="p">,</span>
      <span class="o">-</span><span class="mf">0.035</span><span class="p">,</span>   <span class="n">M_PI</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>    <span class="mi">0</span><span class="p">,</span>           <span class="mi">0</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span>        <span class="o">-</span><span class="n">M_PI</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>   <span class="mf">0.365</span><span class="p">,</span>       <span class="mi">0</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span>        <span class="n">M_PI</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>    <span class="mi">0</span><span class="p">,</span>           <span class="mi">0</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>         <span class="mf">0.08</span><span class="p">,</span>        <span class="mi">0</span><span class="p">;</span>

<span class="c1">// Second argument is a list of joint types</span>
<span class="n">Vector</span><span class="o">&lt;</span><span class="n">quik</span><span class="o">::</span><span class="n">JOINTTYPE_t</span><span class="p">,</span><span class="mi">6</span><span class="o">&gt;</span> <span class="n">linkTypes</span><span class="p">;</span>
<span class="n">linkTypes</span> <span class="o">&lt;&lt;</span> <span class="n">quik</span><span class="o">::</span><span class="n">JOINT_REVOLUTE</span><span class="p">,</span> <span class="n">quik</span><span class="o">::</span><span class="n">JOINT_REVOLUTE</span><span class="p">,</span> <span class="n">quik</span><span class="o">::</span><span class="n">JOINT_REVOLUTE</span><span class="p">,</span> <span class="n">quik</span><span class="o">::</span><span class="n">JOINT_REVOLUTE</span><span class="p">,</span> <span class="n">quik</span><span class="o">::</span><span class="n">JOINT_REVOLUTE</span><span class="p">,</span> <span class="n">quik</span><span class="o">::</span><span class="n">JOINT_REVOLUTE</span><span class="p">;</span>

<span class="c1">// Third argument is a list of joint directions</span>
<span class="c1">// Allows you to change the sign (direction) of the joints.</span>
<span class="n">Vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">,</span><span class="mi">6</span><span class="o">&gt;</span> <span class="n">Qsign</span><span class="p">;</span>
<span class="n">Qsign</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">;</span>

<span class="c1">// Fourth and fifth arguments are the base and tool transforms, respectively</span>
<span class="n">Matrix4d</span> <span class="n">Tbase</span> <span class="o">=</span> <span class="n">Matrix4d</span><span class="o">::</span><span class="n">Identity</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span>
<span class="n">Matrix4d</span> <span class="n">Ttool</span> <span class="o">=</span> <span class="n">Matrix4d</span><span class="o">::</span><span class="n">Identity</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span>

<span class="k">auto</span> <span class="n">R</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">quik</span><span class="o">::</span><span class="n">Robot</span><span class="o">&lt;</span><span class="mi">6</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">DH</span><span class="p">,</span> <span class="n">linkTypes</span><span class="p">,</span> <span class="n">Sign</span><span class="p">,</span> <span class="n">Tbase</span><span class="p">,</span> <span class="n">Ttool</span><span class="p">);</span>

</code></pre></div></div>

<h4 id="the-quikiksolver-class">The <code class="language-plaintext highlighter-rouge">quik::IKSolver</code> class</h4>

<p>To perform inverse kinematics, you need to build an <code class="language-plaintext highlighter-rouge">IKSolver</code> object that takes a few extra parameters, although for basic usage the default parameters are generally good:</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">"Eigen/Dense"</span><span class="cp">
#include</span> <span class="cpf">"quik/Robot.hpp"</span><span class="cp">
#include</span> <span class="cpf">"quik/IKSolver.hpp"</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">Eigen</span><span class="p">;</span>
<span class="c1">// Define the IK options</span>
<span class="k">const</span> <span class="n">quik</span><span class="o">::</span><span class="n">IKSolver</span><span class="o">&lt;</span><span class="mi">6</span><span class="o">&gt;</span> <span class="n">IKS</span><span class="p">(</span>
    <span class="n">R</span><span class="p">,</span> <span class="c1">// The robot object (pointer)</span>
    <span class="mi">200</span><span class="p">,</span> <span class="c1">// max number of iterations</span>
    <span class="n">quik</span><span class="o">::</span><span class="n">ALGORITHM_QUIK</span><span class="p">,</span> <span class="c1">// algorithm (ALGORITHM_QUIK, ALGORITHM_NR or ALGORITHM_BFGS)</span>
    <span class="mf">1e-12</span><span class="p">,</span> <span class="c1">// Exit tolerance</span>
    <span class="mf">1e-14</span><span class="p">,</span> <span class="c1">// Minimum step tolerance</span>
    <span class="mf">0.05</span><span class="p">,</span> <span class="c1">// iteration-to-iteration improvement tolerance (0.05 = 5% relative improvement)</span>
    <span class="mi">10</span><span class="p">,</span> <span class="c1">// max consequitive gradient fails</span>
    <span class="mi">80</span><span class="p">,</span> <span class="c1">// Max gradient fails</span>
    <span class="mf">1e-10</span><span class="p">,</span> <span class="c1">// lambda2 (lambda^2, the damping parameter for DQuIK and DNR)</span>
    <span class="mf">0.34</span><span class="p">,</span> <span class="c1">// Max linear error step</span>
    <span class="mi">1</span> <span class="c1">// Max angular error step</span>
<span class="p">);</span>

</code></pre></div></div>
<p>For the most part, these defaults above are fairly good start, so you can initialize this object just with:</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">const</span> <span class="n">quik</span><span class="o">::</span><span class="n">IKSolver</span><span class="o">&lt;</span><span class="mi">6</span><span class="o">&gt;</span> <span class="n">IKS</span><span class="p">(</span><span class="n">R</span><span class="p">);</span>

</code></pre></div></div>

<p>The full list of <code class="language-plaintext highlighter-rouge">IKSolver</code> parameters are:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">max_iterations</code> [<code class="language-plaintext highlighter-rouge">int</code>]: Maximum number of iterations of the
algorithm. Default: 200</li>
  <li>
<code class="language-plaintext highlighter-rouge">algorithm</code> [<code class="language-plaintext highlighter-rouge">ALGORITHM_t</code>]: The algorithm to use. 
Default: <code class="language-plaintext highlighter-rouge">ALGORITHM_QUIK</code>.
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">ALGORITHM_QUIK</code> - QuIK</li>
      <li>
<code class="language-plaintext highlighter-rouge">ALGORITHM_NR</code> - Newton-Raphson or Levenberg-Marquardt</li>
      <li>
<code class="language-plaintext highlighter-rouge">ALGORITHM_BFGS</code> - BFGS</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">exit_tolerance</code> [<code class="language-plaintext highlighter-rouge">double</code>]: The exit tolerance on the norm of the error. Default: <code class="language-plaintext highlighter-rouge">1e-12</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">minimum_step_size</code> [<code class="language-plaintext highlighter-rouge">double</code>]: The minimum joint angle step size (normed) before the solver exits. Default: <code class="language-plaintext highlighter-rouge">1e-14</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">relative_improvement_tolerance</code> [double]: The minimum relative iteration-to-iteration improvement. If this threshold isn’t met, a counter is incremented. If the threshold isn’t met
<code class="language-plaintext highlighter-rouge">max_consecutive_grad_fails</code> times in a row, then the algorithm exits. For example, 0.05 represents a minimum of 5% relative improvement. Default: <code class="language-plaintext highlighter-rouge">0.05</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">max_consecutive_grad_fails</code> [int]: The maximum number of relative improvement fails before the algorithm exits. Default: <code class="language-plaintext highlighter-rouge">20</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">lambda_squared</code> [double]: The square of the damping factor, <code class="language-plaintext highlighter-rouge">lambda</code>.  Only applies to the NR and QuIK methods. If given, these methods become the DNR (also known as Levenberg-Marquardt) or the DQuIK algorithm. Ignored for BFGS algorithm. Recommended to set to a small, positive but nonzero value. Default: <code class="language-plaintext highlighter-rouge">1e-10</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">max_linear_step_size</code> [double]: An upper limit of the error step
in a single step. Ignored for BFGS algorithm. Default: Uses the <code class="language-plaintext highlighter-rouge">Robot.characteristicLength()</code> function to automatically estimate an appropriate value from the values in the <code class="language-plaintext highlighter-rouge">DH</code> table as <code class="language-plaintext highlighter-rouge">0.33*Robot.characteristicLength()</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">max_angular_step_size</code> [double]: An upper limit of the error step in a single step. Ignored for BFGS algorithm. Default: <code class="language-plaintext highlighter-rouge">1</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">armijo_sigma</code> [double]: The sigma value used in Armijo’s rule, for line search in the BFGS method. Default: <code class="language-plaintext highlighter-rouge">1e-5</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">armijo_beta</code> [double]: The beta value used in Armijo’s rule, for line search in the BFGS method. Default: <code class="language-plaintext highlighter-rouge">0.5</code>
</li>
</ul>

<h3 id="templating-for-fixed-size">Templating for fixed size</h3>
<p>Both <code class="language-plaintext highlighter-rouge">quik::Robot</code> and <code class="language-plaintext highlighter-rouge">quik::IKSolver</code> are templated with the integer value <code class="language-plaintext highlighter-rouge">DOF</code>, the number of degrees of freedom of the robot. The code is designed such that <code class="language-plaintext highlighter-rouge">DOF</code> can be set to any positive integer value, or to <code class="language-plaintext highlighter-rouge">Eigen::Dynamic</code> (or <code class="language-plaintext highlighter-rouge">-1</code>) for a variable-length object. If you know the <code class="language-plaintext highlighter-rouge">DOF</code> beforehand, setting it properly rather than using <code class="language-plaintext highlighter-rouge">-1</code> will avoid dynamic memory allocation in all computations, making the code run in a more reliable and constant amount of time for real-time purposes.</p>

<h2 id="usage-in-ros">Usage in ROS</h2>

<p>QuIK has been integrated into ROS and can be used either via a kinematics service node, or by simply using the C++ code directly. Helper functions have been written to load robot definitions from YAML config files, form service requests, and more.</p>

<h3 id="direct-c-usage">Direct C++ Usage</h3>
<p>This library can be included and used directly, as with any C++ code. However, certain helper functions are included to help with parsing from YAML files:</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">"rclcpp/rclcpp.hpp"</span><span class="cp">
#include</span> <span class="cpf">"quik/IKSolver.hpp"</span><span class="cp">
#include</span> <span class="cpf">"quik/Robot.hpp"</span><span class="cp">
#include</span> <span class="cpf">"quik/ros_helpers.hpp"</span><span class="cp">
</span><span class="k">constexpr</span> <span class="kt">int</span> <span class="n">DOF</span><span class="o">=</span><span class="mi">6</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">SampleCPPUsageNode</span> <span class="o">:</span> <span class="k">public</span> <span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span>
<span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">SampleCPPUsageNode</span><span class="p">()</span> <span class="o">:</span> <span class="n">Node</span><span class="p">(</span><span class="s">"sample_cpp_usage_node"</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">R</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">quik</span><span class="o">::</span><span class="n">Robot</span><span class="o">&lt;</span><span class="n">DOF</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">quik</span><span class="o">::</span><span class="n">ros_helpers</span><span class="o">::</span><span class="n">robotFromNodeParameters</span><span class="o">&lt;</span><span class="n">DOF</span><span class="o">&gt;</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">));</span>
        
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">IKS</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">quik</span><span class="o">::</span><span class="n">IKSolver</span><span class="o">&lt;</span><span class="n">DOF</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">quik</span><span class="o">::</span><span class="n">ros_helpers</span><span class="o">::</span><span class="n">IKSolverFromNodeParameters</span><span class="o">&lt;</span><span class="n">DOF</span><span class="o">&gt;</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">R</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">quik</span><span class="o">::</span><span class="n">IKSolver</span><span class="o">&lt;</span><span class="n">DOF</span><span class="o">&gt;&gt;</span> <span class="n">IKS</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">quik</span><span class="o">::</span><span class="n">Robot</span><span class="o">&lt;</span><span class="n">DOF</span><span class="o">&gt;&gt;</span> <span class="n">R</span><span class="p">;</span>
<span class="p">};</span>

</code></pre></div></div>

<p>The basic config parameters are loaded from the node’s yaml file. You may use one of the provided yaml files in <code class="language-plaintext highlighter-rouge">config/</code>, or just make your own. At a minimum, the config file requires the DH table definition and a list of the joints:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">/**</span><span class="pi">:</span>
    <span class="na">ros__parameters</span><span class="pi">:</span>
        <span class="c1"># Robot parameters</span>
        <span class="c1"># DH table (order a_i, alpha_i, d_i, theta_i)</span>
        <span class="na">dh</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0.025</span><span class="pi">,</span>   <span class="nv">-1.5707963268</span><span class="pi">,</span>  <span class="nv">0.183</span><span class="pi">,</span>  <span class="nv">0.0</span><span class="pi">,</span>
            <span class="nv">-0.315</span><span class="pi">,</span>   <span class="nv">0.0</span><span class="pi">,</span>            <span class="nv">0.0</span><span class="pi">,</span>    <span class="nv">0.0</span><span class="pi">,</span> 
            <span class="nv">-0.035</span><span class="pi">,</span>   <span class="nv">1.5707963268</span><span class="pi">,</span>   <span class="nv">0.0</span><span class="pi">,</span>    <span class="nv">0.0</span><span class="pi">,</span>
            <span class="nv">0.0</span><span class="pi">,</span>      <span class="nv">-1.5707963268</span><span class="pi">,</span>  <span class="nv">0.365</span><span class="pi">,</span>  <span class="nv">0.0</span><span class="pi">,</span>
            <span class="nv">0.0</span><span class="pi">,</span>      <span class="nv">1.5707963268</span><span class="pi">,</span>   <span class="nv">0.0</span><span class="pi">,</span>    <span class="nv">0.0</span><span class="pi">,</span>
            <span class="nv">0.0</span><span class="pi">,</span>      <span class="nv">0.0</span><span class="pi">,</span>            <span class="nv">0.08</span><span class="pi">,</span>   <span class="nv">0.0</span><span class="pi">]</span>

        <span class="c1"># Link types (JOINT_REVOLUTE or JOINT_PRISMATIC)</span>
        <span class="na">link_types</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">JOINT_REVOLUTE</span><span class="pi">,</span> <span class="nv">JOINT_REVOLUTE</span><span class="pi">,</span> <span class="nv">JOINT_REVOLUTE</span><span class="pi">,</span> <span class="nv">JOINT_REVOLUTE</span><span class="pi">,</span> <span class="nv">JOINT_REVOLUTE</span><span class="pi">,</span> <span class="nv">JOINT_REVOLUTE</span><span class="pi">]</span>

</code></pre></div></div>

<p>A simple C++ node implementing this is provided as an example in <code class="language-plaintext highlighter-rouge">src/sample_ros_client_node.cpp</code>, which can be run as:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run quik sample_ros_cpp_node <span class="nt">--ros-args</span> <span class="nt">--params-file</span> ./src/quik/config/kuka_kr6.yaml <span class="c"># Replace with your own config file</span>

</code></pre></div></div>

<h3 id="kinematics-service-node">Kinematics Service Node</h3>

<p>The file <code class="language-plaintext highlighter-rouge">src/ros_kinematics_service_node.cpp</code> defines a service node that will load a <code class="language-plaintext highlighter-rouge">Robot</code> and <code class="language-plaintext highlighter-rouge">IKSolver</code> from the config file, as in the prior section. The kinematics service can be run as:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run quik ros_kinematics_service_node <span class="nt">--ros-args</span> <span class="nt">--params-file</span> ./src/quik/config/kuka_kr6.yaml <span class="c"># replace with your own config file.</span>

</code></pre></div></div>
<p>This node defines three services.</p>

<h4 id="inverse-kinematics-service-ik_service">Inverse kinematics service <code class="language-plaintext highlighter-rouge">/ik_service</code>:</h4>
<p>The IK service uses the interface <code class="language-plaintext highlighter-rouge">srv/IKService.srv</code>.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Request</span>
<span class="s">geometry_msgs/Pose target_pose</span>
<span class="s">float64[] q_0</span> <span class="c1"># Initial guesses of the joint angles</span>
<span class="nn">---</span>
<span class="c1"># Response</span>
<span class="s">float64[] q_star</span> <span class="c1"># The solved joint angles</span>
<span class="s">float64[6] e_star</span> <span class="c1"># The pose errors at the final solution</span>
<span class="s">int32 iter</span> <span class="c1"># The number of iterations the algorithm took</span>
<span class="s">int32 break_reason</span> <span class="c1"># The reason the algorithm stopped</span>
<span class="s">bool success</span> <span class="c1"># Whether or not the IK was successful</span>

</code></pre></div></div>
<p>In C++, a request can be formed using the helper function included in <code class="language-plaintext highlighter-rouge">ros_helpers.hpp</code>:</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">auto</span> <span class="n">ik_request</span> <span class="o">=</span> <span class="n">quik</span><span class="o">::</span><span class="n">ros_helpers</span><span class="o">::</span><span class="n">ik_make_request</span><span class="p">(</span><span class="n">quat</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">q_perturbed</span><span class="p">);</span>
<span class="k">auto</span> <span class="n">ik_result</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ik_client_</span><span class="o">-&gt;</span><span class="n">async_send_request</span><span class="p">(</span><span class="n">ik_request</span><span class="p">).</span><span class="n">get</span><span class="p">();</span>

<span class="n">VectorXd</span> <span class="nf">q_star</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">R</span><span class="o">-&gt;</span><span class="n">dof</span><span class="p">);</span> <span class="n">Vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">,</span><span class="mi">6</span><span class="o">&gt;</span> <span class="n">e_star</span><span class="p">;</span> <span class="kt">int</span> <span class="n">iter</span><span class="p">;</span> <span class="n">quik</span><span class="o">::</span><span class="n">BREAKREASON_t</span> <span class="n">breakReason</span><span class="p">;</span>
<span class="k">auto</span> <span class="n">success</span> <span class="o">=</span> <span class="n">quik</span><span class="o">::</span><span class="n">ros_helpers</span><span class="o">::</span><span class="n">ik_parse_response</span><span class="p">(</span><span class="n">ik_result</span><span class="p">,</span> <span class="n">q_star</span><span class="p">,</span> <span class="n">e_star</span><span class="p">,</span> <span class="n">iter</span><span class="p">,</span> <span class="n">breakReason</span><span class="p">);</span>

</code></pre></div></div>
<p>Similar functions are provided for python and can be seen in use in <code class="language-plaintext highlighter-rouge">python/sample_quik_client_node.py</code>.</p>

<h4 id="forward-kinematics-service-fk_service">Forward kinematics service <code class="language-plaintext highlighter-rouge">/fk_service</code>:</h4>
<p>The IK service uses the interface <code class="language-plaintext highlighter-rouge">srv/FKService.srv</code>.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Request</span>
<span class="s">float64[] q</span> <span class="c1"># joint_angles</span>
<span class="s">int32 frame -1</span> <span class="c1"># the requested frame, if ommitted defaults to the tool frame</span>
<span class="nn">---</span>
<span class="c1"># Response</span>
<span class="s">geometry_msgs/Pose pose</span>

</code></pre></div></div>
<p>In C++, a request can be formed using the helper function in <code class="language-plaintext highlighter-rouge">ros_helpers.hpp</code>:</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">auto</span> <span class="n">fk_request</span> <span class="o">=</span> <span class="n">quik</span><span class="o">::</span><span class="n">ros_helpers</span><span class="o">::</span><span class="n">fk_make_request</span><span class="p">(</span><span class="n">q</span><span class="p">);</span>
<span class="k">auto</span> <span class="n">fk_result</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">fk_client_</span><span class="o">-&gt;</span><span class="n">async_send_request</span><span class="p">(</span><span class="n">fk_request</span><span class="p">).</span><span class="n">get</span><span class="p">();</span>

<span class="n">Vector4d</span> <span class="n">quat</span><span class="p">;</span> <span class="n">Vector3d</span> <span class="n">d</span><span class="p">;</span>
<span class="n">quik</span><span class="o">::</span><span class="n">ros_helpers</span><span class="o">::</span><span class="n">fk_parse_response</span><span class="p">(</span><span class="n">fk_result</span><span class="p">,</span> <span class="n">quat</span><span class="p">,</span> <span class="n">d</span><span class="p">);</span>

</code></pre></div></div>
<p>Similar functions are provided for python and can be seen in use in <code class="language-plaintext highlighter-rouge">python/sample_quik_client_node.py</code>.</p>

<h4 id="jacobian-service-jacobian_service">Jacobian service <code class="language-plaintext highlighter-rouge">/jacobian_service</code>:</h4>
<p>The IK service uses the interface <code class="language-plaintext highlighter-rouge">srv/JacobianService.srv</code>.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Request</span>
<span class="s">float64[] q</span> <span class="c1"># joint_angles</span>
<span class="nn">---</span>
<span class="c1"># Response</span>
<span class="s">float64[] jacobian</span> <span class="c1"># Jacobian matrix</span>

</code></pre></div></div>
<p>In C++, a request can be formed using the helper function in <code class="language-plaintext highlighter-rouge">ros_helpers.hpp</code>:</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">auto</span> <span class="n">jacobian_request</span> <span class="o">=</span> <span class="n">quik</span><span class="o">::</span><span class="n">ros_helpers</span><span class="o">::</span><span class="n">jacobian_make_request</span><span class="p">(</span><span class="n">q</span><span class="p">);</span>
<span class="k">auto</span> <span class="n">jacobian_result</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">jacobian_client_</span><span class="o">-&gt;</span><span class="n">async_send_request</span><span class="p">(</span><span class="n">jacobian_request</span><span class="p">).</span><span class="n">get</span><span class="p">();</span>

<span class="n">Eigen</span><span class="o">::</span><span class="n">MatrixXd</span> <span class="nf">jacobian</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">R</span><span class="o">-&gt;</span><span class="n">dof</span><span class="p">);</span>
<span class="n">quik</span><span class="o">::</span><span class="n">ros_helpers</span><span class="o">::</span><span class="n">jacobian_parse_response</span><span class="p">(</span><span class="n">jacobian_result</span><span class="p">,</span> <span class="n">jacobian</span><span class="p">);</span>

</code></pre></div></div>
<p>Similar functions are provided for python and can be seen in use in <code class="language-plaintext highlighter-rouge">python/sample_quik_client_node.py</code>.</p>

<h4 id="sample-c-client-node">Sample C++ client node</h4>
<p>These services are called in a sample client node <code class="language-plaintext highlighter-rouge">src/sample_ros_client_node.cpp</code>, which can be run as:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run quik sample_ros_client_node <span class="nt">--ros-args</span> <span class="nt">--params-file</span> ./src/quik/config/kuka_kr6.yaml <span class="c"># replace with your own config file</span>

</code></pre></div></div>

<h4 id="sample-python-client-node">Sample python client node.</h4>
<p>A sample python service client is also provided. The code cannot be directly run due to ROS2 not handling packages with both python and C++ nodes well (at least in combination with custom interface definitions). However, the sample code can be found in the <code class="language-plaintext highlighter-rouge">python/</code> directory, along with helper functions for forming and parsing service requests.</p>

<h3 id="yaml-config-files">YAML Config Files</h3>

<p>Sample config files are provided in the <code class="language-plaintext highlighter-rouge">config/</code> directory for the KUKA KR6 robot, the KUKA iiwa7 robot, and the Kinova Jaco robot. All the inputs to the <code class="language-plaintext highlighter-rouge">Robot</code> and <code class="language-plaintext highlighter-rouge">IKSolver</code> objects can be specified in these config files. If omitted, a reasonable default value will be used instead.</p>

<h2 id="requirements">Requirements</h2>
<p>All functions rely on the <a href="https://eigen.tuxfamily.org">Eigen 3.4</a> linear algebra library, so you will also need to link to an appropriate library. If you don’t have Eigen on your machine, it can be installed with (on ubuntu):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>libeigen3-dev

</code></pre></div></div>

<h2 id="citations">Citations</h2>

<p>If you use our work, please reference our publication below. Recommended citation:</p>

<p>[1] <a href="https://github.com/steffanlloyd/quik/tree/main/./docs/SLloydEtAl2022_QuIK_preprint.pdf">S. Lloyd, R. A. Irani, and M. Ahmadi, “Fast and Robust Inverse Kinematics of Serial Robots Using Halley’s Method,” IEEE Transactions on Robotics, vol. 38, no. 5, pp. 2768–2780, Oct. 2022.</a> doi: <a href="http://dx.doi.org/10.1109/TRO.2022.3162954">10.1109/TRO.2022.3162954</a>.</p>

<h2 id="commercial-licensing">Commercial Licensing</h2>

<p>This repository is published under the AGPL license, which enforces that all derivative works must also be made open source.</p>

<p>For commercial applications where open-source of derivative works is not possible, individual commercial licensing is available for a modest fee. Contact <code class="language-plaintext highlighter-rouge">steffan</code> dot <code class="language-plaintext highlighter-rouge">lloyd</code> at <code class="language-plaintext highlighter-rouge">icloud</code> dot <code class="language-plaintext highlighter-rouge">com</code> for details.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <em>No CHANGELOG found.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/quik/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#github">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rosidl_default_generators#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rosidl_default_generators#github">rosidl_default_generators  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rosidl_default_runtime#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rosidl_default_runtime#github">rosidl_default_runtime  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#github">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#github">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#github">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/std_msgs#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/std_msgs#github">std_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/geometry_msgs#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/geometry_msgs#github">geometry_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center"></td>
                        <td>Eigen3</td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No direct system dependencies.</em>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <em>No known dependants.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <ul>
            
              <li><a href="https://github.com/steffanlloyd/quik/tree/main/./srv/JacobianService.srv" target="_blank">srv/JacobianService.srv</a></li>
            
              <li><a href="https://github.com/steffanlloyd/quik/tree/main/./srv/FKService.srv" target="_blank">srv/FKService.srv</a></li>
            
              <li><a href="https://github.com/steffanlloyd/quik/tree/main/./srv/IKService.srv" target="_blank">srv/IKService.srv</a></li>
            
          </ul>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>quik</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="github-question-list" class="panel-body" style="display: none;"></div>
      <div id="github-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/quik+github">here</a>.</p>
      </div>
      <div id="github-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/steffanlloyd/quik.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/github/p/quik"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/steffanlloyd/quik/tree/main/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>iron</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>



<script id="question-list-template" type="text/html">
  <p>
    Browse <a href="https://robotics.stackexchange.com/questions/tagged/quik?tab=Newest">recent questions</a>
    or see the <a href="https://robotics.stackexchange.com/questions/tagged/quik?tab=Votes">highest voted ones</a>.
  </p>
  
  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">Title</th>
        <th scope="col">Answered?</th>
        <th scope="col">Created</th>
        <th scope="col">Active</th>
      </tr>
    </thead>
    <tbody>
      {{#questions}}
      <tr>
        <th scope="row"><a href="{{link}}">{{title}}</a><br><small>Tags: {{strtags}}</small></th>
        <th>{{answered}}</th>
        <th>{{created}}</th>
        <th>{{active}}</th>
      </tr>
      {{/questions}}
    </tbody>
  </table>
  {{#has_more}}
  <hr>
  <h4>Additional questions are available at
    <a href="https://robotics.stackexchange.com/questions/tagged/{{name}}?tab=Newest">Robotics Stack Exchange</a>
  </h4>
  {{/has_more}}
  
</script>

<script type="text/javascript" src="/js/mustache.js"></script>
<script type="text/javascript">
  jQuery(function() {
    jQuery.getJSON(url="https://api.stackexchange.com/2.3/questions?order=desc&site=robotics" +
                       "&tagged=quik&pagesize=50&sort=activity")
    .done(function(feed) {
      if (feed.items.length > 0) {
        var question_count_str = (feed.has_more ? '>' : '') + String(feed.items.length)
        const questions = feed.items.map(
          function(question) {
            question.id = Math.round(Math.random() * 99999.0);
            question.created = (new Date(question.creation_date * 1000)).toDateString()
            question.active = (new Date(question.last_activity_date * 1000)).toDateString()
            question.answered = question.is_answered ? "Yes" : "No"
            question.strtags = question.tags.join(' ')
            return question;
          });
        const template = jQuery("#question-list-template").text();
        Mustache.parse(template);
        var rendered = Mustache.render(
          template, 
          { questions: questions,
            has_more: feed.has_more,
            name: "quik"
          }
        );
      }
      //   TODO(tfoote) Resolve images
      //   jQuery("#-question-list img").each(function() {
      //     if (jQuery(this).attr("src").startsWith("/upfiles")) {
      //        jQuery(this).attr("src", "https://answers.ros.org" + jQuery(this).attr("src"));
      //     }
      //   });
      
      if (feed.items.length > 0) {
        jQuery("#humble-question-list").html(rendered);
        jQuery("#humble-question-list").show();
      } else {
        jQuery("#humble-no-question-list").show();
      }
      jQuery("#humble-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#jazzy-question-list").html(rendered);
        jQuery("#jazzy-question-list").show();
      } else {
        jQuery("#jazzy-no-question-list").show();
      }
      jQuery("#jazzy-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#kilted-question-list").html(rendered);
        jQuery("#kilted-question-list").show();
      } else {
        jQuery("#kilted-no-question-list").show();
      }
      jQuery("#kilted-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#rolling-question-list").html(rendered);
        jQuery("#rolling-question-list").show();
      } else {
        jQuery("#rolling-no-question-list").show();
      }
      jQuery("#rolling-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#github-question-list").html(rendered);
        jQuery("#github-question-list").show();
      } else {
        jQuery("#github-no-question-list").show();
      }
      jQuery("#github-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#noetic-question-list").html(rendered);
        jQuery("#noetic-question-list").show();
      } else {
        jQuery("#noetic-no-question-list").show();
      }
      jQuery("#noetic-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#galactic-question-list").html(rendered);
        jQuery("#galactic-question-list").show();
      } else {
        jQuery("#galactic-no-question-list").show();
      }
      jQuery("#galactic-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#iron-question-list").html(rendered);
        jQuery("#iron-question-list").show();
      } else {
        jQuery("#iron-no-question-list").show();
      }
      jQuery("#iron-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#melodic-question-list").html(rendered);
        jQuery("#melodic-question-list").show();
      } else {
        jQuery("#melodic-no-question-list").show();
      }
      jQuery("#melodic-questions-count").text(question_count_str);
      
    })
    .fail(function(jqxhr, textStatus, error) {
      console.error("Failed to get question data: " + jqxhr.responseText);
      
      jQuery("#humble-get-question-fail").show();
      
      jQuery("#jazzy-get-question-fail").show();
      
      jQuery("#kilted-get-question-fail").show();
      
      jQuery("#rolling-get-question-fail").show();
      
      jQuery("#github-get-question-fail").show();
      
      jQuery("#noetic-get-question-fail").show();
      
      jQuery("#galactic-get-question-fail").show();
      
      jQuery("#iron-get-question-fail").show();
      
      jQuery("#melodic-get-question-fail").show();
      
    });
  });
</script>


<script type="text/javascript">
  $(document).ready(function() {
    setupDistroSwitch("humble");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
