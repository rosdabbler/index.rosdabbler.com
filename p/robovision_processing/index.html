<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Package: robovision_processing</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/p/robovision_processing/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top: 20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/?search_packages=true">Packages</a></li>
        <li class="active">robovision_processing</li>
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-default" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-default" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-default" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-default" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-primary" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class="disabled older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class="disabled older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>humble</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>jazzy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>kilted</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>rolling</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/robovision_processing">robovision_processing</a> <small>package from <a style="text-decoration:none" href="/r/robovision_ros2/github-artenshi-robovision_ros2">robovision_ros2</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/robovision_images">

robovision_images
</a>
            
          
            
            
              <span class="label label-default pkg-label">

robovision_processing
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/robovision_rgbd">

robovision_rgbd
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/robovision_services">

robovision_services
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/robovision_interfaces">

robovision_interfaces
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/github/p/robovision_processing"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/artenshi/robovision_ros2/tree/main/robovision_2"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="github-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#github-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#github-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#github-deps" data-toggle="tab"><span class="label label-primary">9</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#github-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#github-questions" data-toggle="tab"><span id="github-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="github-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>0.0.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>TODO: License declaration</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">RoboVision ROS2</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/artenshi/robovision_ros2.git">https://github.com/artenshi/robovision_ros2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-01-27
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNKNOWN
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/robovision_ros2/#github-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/robovision_ros2/#github-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/robovision_ros2/#github-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            TODO: Package description
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>roboworks</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <em>No additional authors.</em>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/artenshi/robovision_ros2/tree/main/robovision_2/README.md" title="Open in git repository">robovision_2/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="rgb-image-processing-with-opencv-and-ros">RGB Image Processing with OpenCV and ROS</h1>

<p>The goal of this repository is to introduce students to RGB image processing using OpenCV and ROS.</p>

<h1 id="1-getting-to-know-your-image">1. Getting to know your image</h1>

<p>Before starting to manipulate images, we should understand what they are and how we can access their data. In this work, we understand the images as a 2D array, or matrix, where each element (also known as <strong>pixel</strong>) in the array has a color value. We use three color channels per element in the array: Red, Green, and Blue. The origin of this image matrix is at the top-left corner and column values increase positively from left to right while row values increase positively from top to bottom, as can be seen in the image below:</p>

<p align="center">
  <img src="https://raw.githubusercontent.com/artenshi/robovision_ros2/main/robovision_2/images/digital_image.jpg" width="800">
</p>

<p>Each color channel has an integer value between 0 and 255. For example, a value of RGB = [255, 0, 0] represents the red color because the value red = 255 is the maximum possible while the green = 0 and blue = 0 values represent the absence of those color. Similarly, RGB = [0, 255, 0] represents the green color and RGB = [0, 0, 255] represents the blue color. The combination of these three channels with different intensities gives us our perception of true color (for example, if you combine different values of red and green you will obtain a range of tonalities of yellow, e.g. RGB = [128, 128, 0]).</p>

<h1 id="2-basic-operations">2. Basic operations</h1>

<p>From our previous tutorial, we learnt how to subscribe to a ROS Image topic in C++:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">image_subscriber_</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">create_subscription</span><span class="o">&lt;</span><span class="n">sensor_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">Image</span><span class="o">&gt;</span><span class="p">(</span>
    <span class="s">"camera/image"</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">bind</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ImageProcessingNode</span><span class="o">::</span><span class="n">callback_image</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">placeholders</span><span class="o">::</span><span class="n">_1</span><span class="p">));</span>

</code></pre></div></div>

<p>and to transform our ROS Image message to an OpenCV matrix array:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">image_</span> <span class="o">=</span> <span class="n">cv_bridge</span><span class="o">::</span><span class="n">toCvCopy</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s">"bgr8"</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">image</span><span class="p">;</span>

</code></pre></div></div>

<p>In Python, to create an Image subscribe:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">self</span><span class="p">.</span><span class="n">subscriber_</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">create_subscription</span><span class="p">(</span>
    <span class="n">Image</span><span class="p">,</span> <span class="sh">"</span><span class="s">camera/image</span><span class="sh">"</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">callback_camera_image</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

</code></pre></div></div>

<p>and to convert it to a matrix array:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">bridge_rgb</span><span class="o">=</span><span class="nc">CvBridge</span><span class="p">()</span>
<span class="n">self</span><span class="p">.</span><span class="n">img</span> <span class="o">=</span> <span class="n">bridge_rgb</span><span class="p">.</span><span class="nf">imgmsg_to_cv2</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span><span class="n">msg</span><span class="p">.</span><span class="n">encoding</span><span class="p">).</span><span class="nf">copy</span><span class="p">()</span>

</code></pre></div></div>

<h2 id="21-image-dimensions">2.1 Image dimensions</h2>

<h3 id="c">C++</h3>

<p>Have a look at the <code class="language-plaintext highlighter-rouge">my_processing.cpp</code> file. Let’s inspect our image. First, let’s see the dimensions of our image (we add a <code class="language-plaintext highlighter-rouge">counter_</code> index so we print get these values only in the first iteration):</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="n">counter_</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"size: rows: "</span> <span class="o">&lt;&lt;</span> <span class="n">image_</span><span class="p">.</span><span class="n">rows</span> <span class="o">&lt;&lt;</span> 
                 <span class="s">", cols: "</span> <span class="o">&lt;&lt;</span> <span class="n">image_</span><span class="p">.</span><span class="n">cols</span> <span class="o">&lt;&lt;</span> 
                 <span class="s">", depth: "</span> <span class="o">&lt;&lt;</span> <span class="n">image_</span><span class="p">.</span><span class="n">channels</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

</code></pre></div></div>

<p>Let’s test our code. First, we need to compile our code:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/robovision_ros2_ws
colcon build

</code></pre></div></div>

<p>Now, as in our previous examples, run:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> ~/robovision_ros2_ws/install/setup.bash
ros2 run robovision_images my_publisher ~/robovision_ros2_ws/src/robovision_ros2/data/images/baboon.png

</code></pre></div></div>

<p>Finally, in a new terminal, run this command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> ~/robovision_ros2_ws/install/setup.bash
ros2 run robovision_processing my_processing

</code></pre></div></div>

<p>where we should be able to see information regarding our image’s size.</p>

<h3 id="python">Python</h3>

<p>Have a look at the <code class="language-plaintext highlighter-rouge">my_processing.py</code> file. Similarly, we first determine the dimensions of our image. In Python, we use the <code class="language-plaintext highlighter-rouge">shape</code> operator in our matrices, it returns three values (the number of rows, columns and channels) for color images and two values (rows and columns) for grayscale images. So you can use the length of this vector to determine if your image is a multi- or single-channel array.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">if </span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">counter</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
    <span class="p">(</span><span class="n">rows</span><span class="p">,</span><span class="n">cols</span><span class="p">,</span><span class="n">channels</span><span class="p">)</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">img</span><span class="p">.</span><span class="n">shape</span> <span class="c1">#Check the size of your image
</span>    <span class="nf">print </span><span class="p">(</span><span class="sh">'</span><span class="s">size: rows: {}, cols: {}, channels: {}</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">channels</span><span class="p">))</span>

</code></pre></div></div>

<p>Now, let’s try our code. In a pure Python project, we can build our code using the <code class="language-plaintext highlighter-rouge">--symlink-install</code> flag once and test modifications of our file without the need to build it again; however, in this project, we mix C++ and Python code, so we need to build it every time we make any modification. So, run the following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/robovision_ros2_ws
colcon build

</code></pre></div></div>

<p>Teen, we run:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> ~/robovision_ros2_ws/install/setup.bash
ros2 run robovision_images my_publisher ~/robovision_ros2_ws/src/robovision_ros2/data/images/baboon.png

</code></pre></div></div>

<p>Finally, in a new terminal:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> ~/robovision_ros2_ws/install/setup.bash
ros2 run robovision_processing my_processing.py

</code></pre></div></div>

<p>where we should be able to see information regarding to our image.</p>

<h3 id="homework-21">Homework 2.1</h3>

<ul>
  <li>What is the size (columns, rows, and channels) of our image?</li>
</ul>

<h2 id="22-image-manipulation">2.2 Image manipulation</h2>

<p>To understand how to manipulate our images, let’s first make some easy edits. In this case, we will add an increasing id number to our image. Remember that the top-left corner is our image origin (0,0), and that the columns increase from left to right and the rows from top to bottom.</p>

<h3 id="c-1">C++</h3>

<p>To add a text into our image <code class="language-plaintext highlighter-rouge">img</code>, we use the OpenCV function <code class="language-plaintext highlighter-rouge">cv::putText</code>. We have an integer <code class="language-plaintext highlighter-rouge">counter</code> variable that we increase each time we receive and process a new image, and we transform it into a text sequence using the <code class="language-plaintext highlighter-rouge">std::to_string(counter)</code> function.</p>

<p>To understand how an image is coded in OpenCV, play around with the <code class="language-plaintext highlighter-rouge">cv::Point</code> and <code class="language-plaintext highlighter-rouge">CV_RGB</code> values. The cv::Point(col_id, row_id) marks the origin of our text (i.e. the bottom-left corner of our text box); use different values of col_id and row_id and see what happens.</p>

<p>On the other hand, the CV_RGB(red, green, blue) parameter determines our text’s color. Remember that a single color channel ranges from 0 to 255, so try different red, green, and blue combinations and see all the colors you can create!</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cv</span><span class="o">::</span><span class="n">putText</span><span class="p">(</span><span class="n">image_</span><span class="p">,</span>
	<span class="n">std</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="n">counter_</span><span class="p">),</span>
	<span class="n">cv</span><span class="o">::</span><span class="n">Point</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">25</span><span class="p">),</span> <span class="c1">//change these values cv::Point(col_id, row_id)</span>
	<span class="n">cv</span><span class="o">::</span><span class="n">FONT_HERSHEY_DUPLEX</span><span class="p">,</span>
	<span class="mf">1.0</span><span class="p">,</span>
	<span class="n">CV_RGB</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="c1">//change these values CV_RGB(red, green, blue)</span>
	<span class="mi">2</span><span class="p">);</span>

</code></pre></div></div>

<p>Compile and test your code as in the previous section.</p>

<h3 id="python-1">Python</h3>

<p>Likewise, we use the <code class="language-plaintext highlighter-rouge">cv2.putText</code> function to add a text string into our <code class="language-plaintext highlighter-rouge">img</code> array. The two dimensional vector (col_id, row_id) marks the origin (bottom-left) of our text box. The three dimensional vector indicates our text’s color. However, in Python <strong>the order of our color channels is (blue, green, red)</strong>. Be aware of this difference when you work with C++ and Python at the same time. Now, give different values to the color vector and see how to behave.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cv2</span><span class="p">.</span><span class="nf">putText</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">img</span><span class="p">,</span> 
	<span class="nf">str</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">counter</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">25</span><span class="p">,</span><span class="mi">25</span><span class="p">),</span> 
	<span class="n">cv2</span><span class="p">.</span><span class="n">FONT_HERSHEY_SIMPLEX</span><span class="p">,</span> 
	<span class="mi">1</span><span class="p">,</span> 
	<span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> 
	<span class="mi">2</span><span class="p">,</span> 
	<span class="n">cv2</span><span class="p">.</span><span class="n">LINE_AA</span><span class="p">)</span>

</code></pre></div></div>

<p>Again, try your code as in the previous section.</p>

<p>You should see something like</p>

<p align="center">
  <img src="https://raw.githubusercontent.com/artenshi/robovision_ros2/main/robovision_2/images/baboon_number.jpg" width="500">
</p>

<h3 id="homework-22">Homework 2.2</h3>

<ul>
  <li>Provide the output image for five different text positions and color combinations.</li>
</ul>

<h2 id="23-image-transformations">2.3 Image transformations</h2>

<h2 id="231-bgr-to-grayscale">2.3.1 BGR to Grayscale</h2>

<p>Now that we have an idea of the composition of an image and an understanding of our code, let’s add some image transformations. We will show you how to apply one of the built-in functions in OpenCV, so you can explore all the available functions depending on your task at hand.</p>

<p>Let’s change our image from color to grayscale. We can understand a grayscale as a color image where the <code class="language-plaintext highlighter-rouge">Gray</code> value is a combination of the different color channels as follows:</p>

<p><img src="https://latex.codecogs.com/svg.latex?Gray=((0.3*R)&amp;plus;(0.59*G)&amp;plus;(0.11*B))" alt="equation"></p>

<p>and it has the same value in its three channels, i.e. RGB = [Gray, Gray, Gray]. Therefore, to reduce the memory used, many systems only use a one-channel matrix with a single Gray value per pixel: RGB = [Gray].</p>

<h3 id="c-2">C++</h3>

<p>Please complete the provided code with the following instructions as appropriate. We first create a new matrix <code class="language-plaintext highlighter-rouge">image_gray</code> and apply the OpenCV <code class="language-plaintext highlighter-rouge">cvtColor</code> function to our original <code class="language-plaintext highlighter-rouge">image_</code> image:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="n">image_gray</span><span class="p">;</span>
<span class="n">cv</span><span class="o">::</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">image_</span><span class="p">,</span> <span class="n">image_gray</span><span class="p">,</span> <span class="n">CV_BGR2GRAY</span><span class="p">);</span>

</code></pre></div></div>

<p>Let’s inspect our image:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="n">counter_</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"image_gray size: rows: "</span> <span class="o">&lt;&lt;</span> <span class="n">image_gray</span><span class="p">.</span><span class="n">rows</span> <span class="o">&lt;&lt;</span> 
                 <span class="s">", cols: "</span> <span class="o">&lt;&lt;</span> <span class="n">image_gray</span><span class="p">.</span><span class="n">cols</span> <span class="o">&lt;&lt;</span> 
                 <span class="s">", depth: "</span> <span class="o">&lt;&lt;</span> <span class="n">image_gray</span><span class="p">.</span><span class="n">channels</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

</code></pre></div></div>

<p>and display it in a new window:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cv</span><span class="o">::</span><span class="n">imshow</span><span class="p">(</span><span class="s">"gray"</span><span class="p">,</span> <span class="n">image_gray</span><span class="p">);</span>

</code></pre></div></div>
<p>Compile and test your code as in the previous sections.</p>

<h3 id="python-2">Python</h3>

<p>Similarly, we apply our <code class="language-plaintext highlighter-rouge">cvtColor</code> function to our original <code class="language-plaintext highlighter-rouge">img</code> and store it in a new <code class="language-plaintext highlighter-rouge">img_gray</code> array.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">img_gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="nf">cvtColor</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="p">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>

</code></pre></div></div>

<p>Then, we inspect our image. Remember that our <code class="language-plaintext highlighter-rouge">shape</code> operator returns three values for color images and two values for grayscale images and that you can use the length of this vector to determine if your image is a multi- or single-channel array.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">if </span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">counter</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
    <span class="p">(</span><span class="n">rows</span><span class="p">,</span><span class="n">cols</span><span class="p">)</span> <span class="o">=</span> <span class="n">img_gray</span><span class="p">.</span><span class="n">shape</span>
    <span class="nf">print </span><span class="p">(</span><span class="sh">'</span><span class="s">img_gray size: rows: {}, cols: {}</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">))</span>
    <span class="nf">print </span><span class="p">(</span><span class="sh">'</span><span class="s">length (img_gray): {}</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">img_gray</span><span class="p">.</span><span class="n">shape</span><span class="p">)))</span>

</code></pre></div></div>

<p>and show it:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cv2</span><span class="p">.</span><span class="nf">imshow</span><span class="p">(</span><span class="sh">"</span><span class="s">gray</span><span class="sh">"</span><span class="p">,</span> <span class="n">img_gray</span><span class="p">)</span>

</code></pre></div></div>

<p>Now, save your files and test them as before. What can you see? Did you notice how a grayscale image uses only a single channel to represent all the information instead of three channels with the same value?</p>

<p>Again, try your code as in the previous section.</p>

<p>The expected output is</p>

<p align="center">
  <img src="https://raw.githubusercontent.com/artenshi/robovision_ros2/main/robovision_2/images/baboon_gray.jpg" width="500">
</p>

<h3 id="homework-231">Homework 2.3.1</h3>

<ul>
  <li>
    <p>What is the size (columns, rows, and channels) of our grayscale image? Show the resulting image.</p>
  </li>
  <li>
    <p>What is the scope of your grayscale image variables? Do you need to make them global? Why?</p>
  </li>
</ul>

<h2 id="232-color-thresholding">2.3.2 Color Thresholding</h2>

<p>Now we will create a very basic color segmentator. For simplicity, we will use the BGR color space, but it is more common to use the HSV color space; we let the interested reader to find what are the extra steps to use an HSV image for color segmentation.</p>

<p>An easy way to create a color-based segmentator is to find all the pixels that are around our target color. For example, if we want to segment a high-intensity red color with a red channel value around <code class="language-plaintext highlighter-rouge">my_red=[225]</code>, we need to find all the pixels in the range (my_red-delta , my_red+delta) where <code class="language-plaintext highlighter-rouge">delta</code> is a value that we define; it is important to note that, in this example, the other channels range from 0 to 255.</p>

<p>Therefore, we have two steps to create a segmented image. First, we find the pixels inside our desired range and mark them as ONE and all the pixels outside the range as ZERO, we call this array with ZEROs and ONEs a <strong>mask</strong>. Then, we create an output image where all the elements in the MASK have a color value from the input image and all other pixels are zero (or black).</p>

<h3 id="c-3">C++</h3>

<p>First, we create our mask image (don’t forget to declare it!) and fill it with zeros and ones, depending on whether the pixel is inside or outside our color range (<strong>remember the order in our array: [Blue,Green,Red]</strong>), respectively:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="n">mask</span><span class="p">;</span>
<span class="n">cv</span><span class="o">::</span><span class="n">inRange</span><span class="p">(</span><span class="n">image_</span><span class="p">,</span> <span class="n">cv</span><span class="o">::</span><span class="n">Scalar</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">220</span><span class="p">),</span> <span class="n">cv</span><span class="o">::</span><span class="n">Scalar</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">240</span><span class="p">),</span> <span class="n">mask</span><span class="p">);</span>

</code></pre></div></div>
<p>In the example, our target color is <code class="language-plaintext highlighter-rouge">red=255</code>, and <code class="language-plaintext highlighter-rouge">delta=20</code>, the blue and green channels vary from 0 to 255. Then, we copy only those pixels that met our range condition. We use the <code class="language-plaintext highlighter-rouge">image_.copyTo(output,mask)</code> to copy to our <em>output</em> image only those pixels with a ONE in our <em>mask</em>; we declare our output as <code class="language-plaintext highlighter-rouge">image_filtered_</code> and then:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="n">image_filtered</span><span class="p">;</span>
<span class="n">image_</span><span class="p">.</span><span class="n">copyTo</span><span class="p">(</span><span class="n">image_filtered</span><span class="p">,</span> <span class="n">mask</span><span class="p">);</span>

</code></pre></div></div>

<p>Finally, don’t forget to show your images</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cv</span><span class="o">::</span><span class="n">imshow</span><span class="p">(</span><span class="s">"mask"</span><span class="p">,</span> <span class="n">mask</span><span class="p">);</span>
<span class="n">cv</span><span class="o">::</span><span class="n">imshow</span><span class="p">(</span><span class="s">"image_filtered"</span><span class="p">,</span> <span class="n">image_filtered</span><span class="p">);</span>

</code></pre></div></div>

<p>Compile and test your code as in the previous sections.</p>

<p>A segmented image in the red channel should look like</p>

<p align="center">
  <img src="https://raw.githubusercontent.com/artenshi/robovision_ros2/main/robovision_2/images/baboon_mask_red.jpg" width="800">
</p>

<h3 id="python-3">Python</h3>

<p>Here, we define the valid color range we want to use (<strong>remember the order in our array: [Blue,Green,Red]</strong>). Now, we will select a blue color, so <code class="language-plaintext highlighter-rouge">blue=220</code> and <code class="language-plaintext highlighter-rouge">delta=10</code>, the red and green channels vary from 0 to 255, as follow:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lower_val</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="mi">200</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="n">upper_val</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="mi">240</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">])</span>

</code></pre></div></div>

<p>Then, we create our mask with ONE value whenever a pixel is in that color range, we use the <code class="language-plaintext highlighter-rouge">cv2.inRange</code> function:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mask</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="nf">inRange</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">img</span><span class="p">,</span> <span class="n">lower_val</span><span class="p">,</span> <span class="n">upper_val</span><span class="p">)</span>

</code></pre></div></div>

<p>Finally, we copy those pixels from our original to our segmented image as follows:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">image_filtered</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="nf">bitwise_and</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">img</span><span class="p">,</span><span class="n">self</span><span class="p">.</span><span class="n">img</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span> <span class="n">mask</span><span class="p">)</span>

</code></pre></div></div>

<p>Now, we show our results:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cv2</span><span class="p">.</span><span class="nf">imshow</span><span class="p">(</span><span class="sh">"</span><span class="s">mask</span><span class="sh">"</span><span class="p">,</span> <span class="n">mask</span><span class="p">)</span>
<span class="n">cv2</span><span class="p">.</span><span class="nf">imshow</span><span class="p">(</span><span class="sh">"</span><span class="s">image_filtered</span><span class="sh">"</span><span class="p">,</span> <span class="n">image_filtered</span><span class="p">)</span>

</code></pre></div></div>

<p>Again, try your code as in the previous section.</p>

<p>A segmented image in the blue channel should look like</p>

<p align="center">
  <img src="https://raw.githubusercontent.com/artenshi/robovision_ros2/main/robovision_2/images/baboon_mask_blue.jpg" width="800">
</p>

<h3 id="homework-232">Homework 2.3.2</h3>

<ul>
  <li>Create five segmented images using different color ranges. From the previous unit, do you remember how to start an image publisher using your camera? Try using it and place objects with different colors in front of your camera and see what happens!</li>
</ul>

<h1 id="3-per-element-operations">3. Per-element operations</h1>

<p>Although OpenCV comes with a variety of functions, we will always need to access the elements of our matrix for a number of reasons (from simple inspection to the implementation of our own algorithms). Here, we will provide a simple way to access all the elements in your array.</p>

<h2 id="31-single-element-access">3.1 Single element access</h2>

<p>Let’s first inspect one pixel value of our array at a given (row_id, col_id) position. <strong>Remember that our array starts in <code class="language-plaintext highlighter-rouge">(0,0)</code> and therefore the last element in our image <code class="language-plaintext highlighter-rouge">image_</code> (at the bottom-right corner) is <code class="language-plaintext highlighter-rouge">(image_.rows - 1, image_.cols - 1)</code></strong>.</p>

<h3 id="c-4">C++</h3>

<p>We use the <code class="language-plaintext highlighter-rouge">image_.at&lt;cv::Vec3b&gt;(row_id,col_id)</code> attribute in our <code class="language-plaintext highlighter-rouge">image_</code> matrix to get a color element in the [Blue,Green,Red] order, and <code class="language-plaintext highlighter-rouge">image_.at&lt;uchar&gt;(row_id,col_id)</code> to get a grayscale value – if you don’t know what is a <code class="language-plaintext highlighter-rouge">uchar</code> data type, please review that concept; in short, it is an integer that goes from 0 to 255. <strong>Notice the id input order in our function, the first index ALWAY corresponds to the rows and the second index to the columns</strong>; be careful with the elements’ order when you use OpenCV functions, as an example, remember that in our <code class="language-plaintext highlighter-rouge">cv::putText</code> function the <code class="language-plaintext highlighter-rouge">cv::Point</code> element has a (col_id, row_id) order while the <code class="language-plaintext highlighter-rouge">at&lt;&gt;</code> attribute of our image has a (row_id,col_id) order.</p>

<p>In this case, we will inspect the middle point in our array as follows:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="n">counter</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">row_id</span><span class="p">,</span> <span class="n">col_id</span><span class="p">;</span>
	<span class="n">row_id</span> <span class="o">=</span> <span class="n">image_</span><span class="p">.</span><span class="n">rows</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
	<span class="n">col_id</span> <span class="o">=</span> <span class="n">image_</span><span class="p">.</span><span class="n">cols</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>

        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"pixel value in img at row="</span> <span class="o">&lt;&lt;</span> <span class="n">row_id</span> <span class="o">&lt;&lt;</span>
                     <span class="s">", col="</span> <span class="o">&lt;&lt;</span> <span class="n">col_id</span> <span class="o">&lt;&lt;</span>
                     <span class="s">" is: "</span> <span class="o">&lt;&lt;</span> <span class="n">image_</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">cv</span><span class="o">::</span><span class="n">Vec3b</span><span class="o">&gt;</span><span class="p">(</span><span class="n">row_id</span><span class="p">,</span><span class="n">col_id</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"pixel value in img_gray at row="</span> <span class="o">&lt;&lt;</span> <span class="n">row_id</span> <span class="o">&lt;&lt;</span>
                     <span class="s">", col="</span> <span class="o">&lt;&lt;</span> <span class="n">col_id</span> <span class="o">&lt;&lt;</span>
                     <span class="s">" is: "</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">image_gray</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">row_id</span><span class="p">,</span><span class="n">col_id</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div></div>

<p>Compile and test your code as in the previous sections.</p>

<p><strong>Important: You should notice that, for color images, the output of the <code class="language-plaintext highlighter-rouge">img.at&lt;cv::Vec3b&gt;(row_id,col_id)</code> operator is a 3D vector with the [Blue,Green,Red] information, in that order.</strong></p>

<h3 id="python-4">Python</h3>

<p>Here, we access the elements in our <code class="language-plaintext highlighter-rouge">img</code> array as in any other Python array: <code class="language-plaintext highlighter-rouge">img[row_id,col_id]</code> to get a color pixel in [Blue,Green,Red] order or a grayvalue scalar. <strong>We ALWAYS indicate the rows first and then the columns</strong>; again, be careful with the input order when you use different OpenCV functions in Python. Then, we get the values of our middle pixel element as:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">if </span><span class="p">(</span><span class="n">counter</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
    <span class="p">(</span><span class="n">rows</span><span class="p">,</span><span class="n">cols</span><span class="p">,</span><span class="n">channels</span><span class="p">)</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">img</span><span class="p">.</span><span class="n">shape</span>
    <span class="n">row_id</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="n">rows</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">col_id</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="n">cols</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>

    <span class="nf">print </span><span class="p">(</span><span class="sh">'</span><span class="s">pixel value in img at row: {} and col: {} is {}</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">row_id</span><span class="p">,</span> <span class="n">col_id</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">img</span><span class="p">[</span><span class="n">row_id</span><span class="p">,</span><span class="n">col_id</span><span class="p">]))</span>
    <span class="nf">print </span><span class="p">(</span><span class="sh">'</span><span class="s">pixel value in img_gray at row: {} and col: {} is {}</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">row_id</span><span class="p">,</span> <span class="n">col_id</span><span class="p">,</span> <span class="n">img_gray</span><span class="p">[</span><span class="n">row_id</span><span class="p">,</span><span class="n">col_id</span><span class="p">]))</span>

</code></pre></div></div>

<p>Again, try your code as in the previous section.</p>

<p><strong>IMPORTANT: You should notice that, for color images, the output of the <code class="language-plaintext highlighter-rouge">img[row_id,col_id]</code> operator is a 3D vector with the [Blue,Green,Red] information, in that order.</strong></p>

<h3 id="homework-31">Homework 3.1</h3>

<ul>
  <li>Provide the values of ten different pixels in your image.</li>
</ul>

<p>Do you remember the equation to obtain the Gray value from a combination of the different color channels? Does it apply to your image?</p>

<h2 id="32-multi-element-access">3.2 Multi-element access</h2>

<p>Now that we know how to access an element in our image and the kind of information in it (color or grayscale), let’s access all our pixels consistently. Remember that the Gray value is a combination of the three different color channels in an image. A common function that approximates the gray value is as follows:</p>

<p><img src="https://latex.codecogs.com/svg.latex?Gray=((0.3*R)&amp;plus;(0.59*G)&amp;plus;(0.11*B))" alt="equation"></p>

<p>so let’s apply that equation to all and every pixel in our image. To do so, we need to run a <em>nested for loop</em> where one index goes from the first to the last column and the other index goes from the first row to the last. Remember that, in general, <strong>the array indices start in zero and, therefore, they should end at (width-1) and (height-1)</strong>.</p>

<h3 id="c-5">C++</h3>

<p>First, we need to create a single channel matrix to store our new image, so it should have the same dimensions as our input and each value should be <code class="language-plaintext highlighter-rouge">uchar</code>:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="n">image_gray_2</span> <span class="o">=</span> <span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="o">::</span><span class="n">zeros</span><span class="p">(</span><span class="n">image_</span><span class="p">.</span><span class="n">rows</span><span class="p">,</span><span class="n">image_</span><span class="p">.</span><span class="n">cols</span><span class="p">,</span> <span class="n">CV_8UC1</span><span class="p">);</span>

</code></pre></div></div>

<p>Then, we create our indices to access all the elements in our image. Please, remember which index corresponds to the rows and what to the columns! In our case, the <code class="language-plaintext highlighter-rouge">i</code> variable corresponds to the rows and the <code class="language-plaintext highlighter-rouge">j</code> index to the columns:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">image_</span><span class="p">.</span><span class="n">rows</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">image_</span><span class="p">.</span><span class="n">cols</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>

</code></pre></div></div>
<p>Now, we access the pixel value of all (i,j) pixels and create a Gray value from the combination of the color channels.  We use the <code class="language-plaintext highlighter-rouge">image_.at&lt;cv::Vec3b&gt;(row_id,col_id)</code> operator; remember that this operator’s output is a [Blue,Green,Red] vector so, we have:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">gray_val</span> <span class="o">=</span> <span class="mf">0.11</span><span class="o">*</span><span class="n">image_</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">cv</span><span class="o">::</span><span class="n">Vec3b</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.59</span><span class="o">*</span><span class="n">image_</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">cv</span><span class="o">::</span><span class="n">Vec3b</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.3</span><span class="o">*</span><span class="n">image_</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">cv</span><span class="o">::</span><span class="n">Vec3b</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)[</span><span class="mi">2</span><span class="p">];</span>

</code></pre></div></div>

<p>We store the <code class="language-plaintext highlighter-rouge">int</code> grayscale value in our <code class="language-plaintext highlighter-rouge">uchar</code> new <code class="language-plaintext highlighter-rouge">uchar</code> matrix at the (i,j) position:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">image_gray_2</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span><span class="p">)</span><span class="n">gray_val</span><span class="p">;</span>

</code></pre></div></div>

<p>Your code should look something like:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="n">image_gray_2</span> <span class="o">=</span> <span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="o">::</span><span class="n">zeros</span><span class="p">(</span><span class="n">image_</span><span class="p">.</span><span class="n">rows</span><span class="p">,</span><span class="n">image_</span><span class="p">.</span><span class="n">cols</span><span class="p">,</span> <span class="n">CV_8UC1</span><span class="p">);</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">image_</span><span class="p">.</span><span class="n">rows</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">image_</span><span class="p">.</span><span class="n">cols</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">gray_val</span> <span class="o">=</span> <span class="mf">0.11</span><span class="o">*</span><span class="n">image_</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">cv</span><span class="o">::</span><span class="n">Vec3b</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.59</span><span class="o">*</span><span class="n">image_</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">cv</span><span class="o">::</span><span class="n">Vec3b</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.3</span><span class="o">*</span><span class="n">image_</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">cv</span><span class="o">::</span><span class="n">Vec3b</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)[</span><span class="mi">2</span><span class="p">];</span>
        <span class="n">image_gray_2</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span><span class="p">)</span><span class="n">gray_val</span><span class="p">;</span>
    <span class="p">}</span>

</code></pre></div></div>

<p>Finally, don’t forget to display your image (each new window should have its unique name):</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cv</span><span class="o">::</span><span class="n">imshow</span><span class="p">(</span><span class="s">"gray_2"</span><span class="p">,</span> <span class="n">image_gray_2</span><span class="p">);</span>

</code></pre></div></div>

<p>Compile and test your code as in the previous sections.</p>

<h3 id="python-5">Python</h3>

<p>Similarly, we start by defining our new <code class="language-plaintext highlighter-rouge">uint8</code> matrix (the <code class="language-plaintext highlighter-rouge">uint8</code> data type in Python is similar to the <code class="language-plaintext highlighter-rouge">uchar</code> data type in C++):</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="n">rows</span><span class="p">,</span><span class="n">cols</span><span class="p">,</span><span class="n">channels</span><span class="p">)</span> <span class="o">=</span> <span class="n">img</span><span class="p">.</span><span class="n">shape</span>
<span class="n">img_gray_2</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">zeros</span><span class="p">(</span> <span class="p">(</span><span class="n">rows</span><span class="p">,</span><span class="n">cols</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">np</span><span class="p">.</span><span class="n">uint8</span> <span class="p">)</span>

</code></pre></div></div>

<p>Then, we create our indices (please refer to the manual to know how the <code class="language-plaintext highlighter-rouge">range(int)</code> function works; basically, it creates a sequence of numbers from 0 to int-1), remember which index corresponds to the rows and the columns:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">rows</span><span class="p">):</span>
	<span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">cols</span><span class="p">):</span>

</code></pre></div></div>

<p>Then, access to the information for pixel (i,j), combine it to create a grayscale value, and store it in our new grayscale image:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">rows</span><span class="p">):</span>
	<span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">cols</span><span class="p">):</span>

</code></pre></div></div>

<p>Your code should look like:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="n">rows</span><span class="p">,</span><span class="n">cols</span><span class="p">,</span><span class="n">channels</span><span class="p">)</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">img</span><span class="p">.</span><span class="n">shape</span>
<span class="n">img_gray_2</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">zeros</span><span class="p">(</span> <span class="p">(</span><span class="n">rows</span><span class="p">,</span><span class="n">cols</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">np</span><span class="p">.</span><span class="n">uint8</span> <span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">rows</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">cols</span><span class="p">):</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">img</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span>
        <span class="n">img_gray_2</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span> <span class="nf">int</span><span class="p">(</span><span class="mf">0.11</span><span class="o">*</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="mf">0.59</span><span class="o">*</span><span class="nf">int</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="nf">int</span><span class="p">(</span><span class="mf">0.3</span><span class="o">*</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="p">)</span>

</code></pre></div></div>

<p>Finally, don’t forget to show your new image:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cv2</span><span class="p">.</span><span class="nf">imshow</span><span class="p">(</span><span class="sh">"</span><span class="s">gray_2</span><span class="sh">"</span><span class="p">,</span> <span class="n">img_gray_2</span><span class="p">)</span>

</code></pre></div></div>

<p>Again, try your code as in the previous section.</p>

<p><strong>IMPORTANT: Can you notice the difference in velocity!? Although C++ seems more cumbersome than Python, the execution speed is much faster. A common practice is to use C++ for the core operations in our applications and Python for the high-level processes.</strong></p>

<h3 id="homework-32">Homework 3.2</h3>

<ul>
  <li>Create a loop to access all the elements in your grayscale image and rotate it 180 degrees. The result should be as in the image below.</li>
</ul>

<p align="center">
  <img src="https://raw.githubusercontent.com/artenshi/robovision_ros2/main/robovision_2/images/baboon_rotated.jpg" width="300">
</p>

<p><strong>Hint</strong> You should create a new matrix before starting your loop. Also, observe the indices in your original and your new image. what is their relationship?</p>

<h2 id="authors">Authors</h2>

<ul>
  <li>
<strong>Luis Contreras</strong> - <a href="https://artenshi.github.io/">ARTenshi</a>
</li>
  <li>
<strong>Hiroyuki Okada</strong> - <a href="http://aibot.jp/">AIBot</a>
</li>
</ul>

</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <em>No CHANGELOG found.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/robovision_processing/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#github">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_python#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_python#github">ament_cmake_python  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#github">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#github">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#github">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclpy#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclpy#github">rclpy  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/cv_bridge#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/cv_bridge#github">cv_bridge  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/sensor_msgs#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/sensor_msgs#github">sensor_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/std_msgs#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/std_msgs#github">std_msgs  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No direct system dependencies.</em>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <em>No known dependants.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>robovision_processing</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="github-question-list" class="panel-body" style="display: none;"></div>
      <div id="github-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/robovision_processing+github">here</a>.</p>
      </div>
      <div id="github-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/artenshi/robovision_ros2.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/github/p/robovision_processing"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/artenshi/robovision_ros2/tree/main/robovision_2"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>galactic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>iron</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>



<script id="question-list-template" type="text/html">
  <p>
    Browse <a href="https://robotics.stackexchange.com/questions/tagged/robovision_processing?tab=Newest">recent questions</a>
    or see the <a href="https://robotics.stackexchange.com/questions/tagged/robovision_processing?tab=Votes">highest voted ones</a>.
  </p>
  
  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">Title</th>
        <th scope="col">Answered?</th>
        <th scope="col">Created</th>
        <th scope="col">Active</th>
      </tr>
    </thead>
    <tbody>
      {{#questions}}
      <tr>
        <th scope="row"><a href="{{link}}">{{title}}</a><br><small>Tags: {{strtags}}</small></th>
        <th>{{answered}}</th>
        <th>{{created}}</th>
        <th>{{active}}</th>
      </tr>
      {{/questions}}
    </tbody>
  </table>
  {{#has_more}}
  <hr>
  <h4>Additional questions are available at
    <a href="https://robotics.stackexchange.com/questions/tagged/{{name}}?tab=Newest">Robotics Stack Exchange</a>
  </h4>
  {{/has_more}}
  
</script>

<script type="text/javascript" src="/js/mustache.js"></script>
<script type="text/javascript">
  jQuery(function() {
    jQuery.getJSON(url="https://api.stackexchange.com/2.3/questions?order=desc&site=robotics" +
                       "&tagged=robovision_processing&pagesize=50&sort=activity")
    .done(function(feed) {
      if (feed.items.length > 0) {
        var question_count_str = (feed.has_more ? '>' : '') + String(feed.items.length)
        const questions = feed.items.map(
          function(question) {
            question.id = Math.round(Math.random() * 99999.0);
            question.created = (new Date(question.creation_date * 1000)).toDateString()
            question.active = (new Date(question.last_activity_date * 1000)).toDateString()
            question.answered = question.is_answered ? "Yes" : "No"
            question.strtags = question.tags.join(' ')
            return question;
          });
        const template = jQuery("#question-list-template").text();
        Mustache.parse(template);
        var rendered = Mustache.render(
          template, 
          { questions: questions,
            has_more: feed.has_more,
            name: "robovision_processing"
          }
        );
      }
      //   TODO(tfoote) Resolve images
      //   jQuery("#-question-list img").each(function() {
      //     if (jQuery(this).attr("src").startsWith("/upfiles")) {
      //        jQuery(this).attr("src", "https://answers.ros.org" + jQuery(this).attr("src"));
      //     }
      //   });
      
      if (feed.items.length > 0) {
        jQuery("#humble-question-list").html(rendered);
        jQuery("#humble-question-list").show();
      } else {
        jQuery("#humble-no-question-list").show();
      }
      jQuery("#humble-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#jazzy-question-list").html(rendered);
        jQuery("#jazzy-question-list").show();
      } else {
        jQuery("#jazzy-no-question-list").show();
      }
      jQuery("#jazzy-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#kilted-question-list").html(rendered);
        jQuery("#kilted-question-list").show();
      } else {
        jQuery("#kilted-no-question-list").show();
      }
      jQuery("#kilted-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#rolling-question-list").html(rendered);
        jQuery("#rolling-question-list").show();
      } else {
        jQuery("#rolling-no-question-list").show();
      }
      jQuery("#rolling-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#github-question-list").html(rendered);
        jQuery("#github-question-list").show();
      } else {
        jQuery("#github-no-question-list").show();
      }
      jQuery("#github-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#noetic-question-list").html(rendered);
        jQuery("#noetic-question-list").show();
      } else {
        jQuery("#noetic-no-question-list").show();
      }
      jQuery("#noetic-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#galactic-question-list").html(rendered);
        jQuery("#galactic-question-list").show();
      } else {
        jQuery("#galactic-no-question-list").show();
      }
      jQuery("#galactic-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#iron-question-list").html(rendered);
        jQuery("#iron-question-list").show();
      } else {
        jQuery("#iron-no-question-list").show();
      }
      jQuery("#iron-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#melodic-question-list").html(rendered);
        jQuery("#melodic-question-list").show();
      } else {
        jQuery("#melodic-no-question-list").show();
      }
      jQuery("#melodic-questions-count").text(question_count_str);
      
    })
    .fail(function(jqxhr, textStatus, error) {
      console.error("Failed to get question data: " + jqxhr.responseText);
      
      jQuery("#humble-get-question-fail").show();
      
      jQuery("#jazzy-get-question-fail").show();
      
      jQuery("#kilted-get-question-fail").show();
      
      jQuery("#rolling-get-question-fail").show();
      
      jQuery("#github-get-question-fail").show();
      
      jQuery("#noetic-get-question-fail").show();
      
      jQuery("#galactic-get-question-fail").show();
      
      jQuery("#iron-get-question-fail").show();
      
      jQuery("#melodic-get-question-fail").show();
      
    });
  });
</script>


<script type="text/javascript">
  $(document).ready(function() {
    setupDistroSwitch("humble");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
