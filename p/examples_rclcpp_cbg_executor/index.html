<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Package: examples_rclcpp_cbg_executor</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/p/examples_rclcpp_cbg_executor/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top: 20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/?search_packages=true">Packages</a></li>
        <li class="active">examples_rclcpp_cbg_executor</li>
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-primary" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-primary" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-primary" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-primary" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-default" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class=" older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class=" older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/examples_rclcpp_cbg_executor">examples_rclcpp_cbg_executor</a> <small>package from <a style="text-decoration:none" href="/r/examples/github-ros2-examples">examples</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/launch_testing_examples">

launch_testing_examples
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_action_client">

examples_rclcpp_minimal_action_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_action_server">

examples_rclcpp_minimal_action_server
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_composition">

examples_rclcpp_minimal_composition
</a>
            
          
            
            
              <span class="label label-default pkg-label">

examples_rclcpp_cbg_executor
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_multithreaded_executor">

examples_rclcpp_multithreaded_executor
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_async_client">

examples_rclcpp_async_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_client">

examples_rclcpp_minimal_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_service">

examples_rclcpp_minimal_service
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_timer">

examples_rclcpp_minimal_timer
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_publisher">

examples_rclcpp_minimal_publisher
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_subscriber">

examples_rclcpp_minimal_subscriber
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_wait_set">

examples_rclcpp_wait_set
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_action_client">

examples_rclpy_minimal_action_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_action_server">

examples_rclpy_minimal_action_server
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_executors">

examples_rclpy_executors
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_guard_conditions">

examples_rclpy_guard_conditions
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_client">

examples_rclpy_minimal_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_service">

examples_rclpy_minimal_service
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_publisher">

examples_rclpy_minimal_publisher
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_subscriber">

examples_rclpy_minimal_subscriber
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_pointcloud_publisher">

examples_rclpy_pointcloud_publisher
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/humble/p/examples_rclcpp_cbg_executor"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/ros2/examples/tree/humble/rclcpp/executors/cbg_executor"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="humble-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#humble-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#humble-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#humble-deps" data-toggle="tab"><span class="label label-primary">5</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#humble-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#humble-questions" data-toggle="tab"><span id="humble-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="humble-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>0.15.3</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache License 2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Example packages for ROS 2</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros2/examples.git">https://github.com/ros2/examples.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">humble</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-03-28
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/examples/#humble-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/examples/#humble-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/examples/#humble-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Example for multiple Executor instances in one process, using the callback-group-level interface of the Executor class.
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Ralph Lange</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <em>No additional authors.</em>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/ros2/examples/tree/humble/rclcpp/executors/cbg_executor/README.md" title="Open in git repository">rclcpp/executors/cbg_executor/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="examples_rclcpp_cbg_executor">examples_rclcpp_cbg_executor</h1>

<p>The <em>examples_rclcpp_cbg_executor</em> package provides a demo and test bench for the <em>Callback-group-level Executor</em> concept. This concept was developed in 2018 and has been integrated in ROS 2 mainline in 2020, i.e., is available from ROS 2 Galactic on. It does not add a new Executor but leverages callback groups for refining the Executor API to callback-group-level granularity.</p>

<p>This allows a single node to have callbacks with different real-time requirements assigned to different Executor instances – within one process. Thus, an Executor instance can be dedicated to one or few specific callback groups and the Executor’s thread (or threads) can be prioritized according to the real-time requirements of these groups. For example, all critical callbacks may be handled by an Executor instance based on an thread running at the highest scheduler priority.</p>

<h2 id="introduction-to-demo">Introduction to demo</h2>

<p>The demo comprises a <em>Ping Node</em> and a <em>Pong Node</em> which exchange messages on two communication paths simultaneously. There is a high priority path formed by the topics <em>high_ping</em> and <em>high_pong</em> and a low priority path formed by <em>low_ping</em> and <em>low_pong</em>, respectively.</p>

<p><img src="https://raw.githubusercontent.com/ros2/examples/humble/rclcpp/executors/cbg_executor/doc/ping_pong_diagram.png" alt=""></p>

<p>The Ping Node sends ping messages on both paths simultaneously at a configurable rate. The Pong Node takes these ping messages and replies each of them. Before sending a reply, it burns a configurable number of CPU cycles (thereby varying the processor load) to simulate some message processing.</p>

<p>All callbacks of the Ping Node (i.e., for the timer for sending ping messages and for the two subscription on high_pong and low_pong) are handled in one callback group and thus Executor instance. However, the two callbacks of the Pong Node that process the incoming ping messages and answer with a pong message are assigned to two different callback groups. In the main function, these two groups are distributed to two Executor instances and threads. Both threads are pinned to the same CPU (No. 0) and thus share its processing power, but with different scheduler priorities following the names <em>high</em> and <em>low</em>.</p>

<h2 id="running-the-demo">Running the demo</h2>

<p>The Ping Node and Pong Node may be either started in one process or in two processes. Please note that on Linux the demo requires sudo privileges to be able to change the thread priorities using <code class="language-plaintext highlighter-rouge">pthread_setschedparam(..)</code>.</p>

<p>Running the two nodes in one process:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>bash
<span class="nb">source</span> /opt/ros/[ROS_DISTRO]/setup.bash
ros2 run examples_rclcpp_cbg_executor ping_pong

</code></pre></div></div>

<p>Example of a typical output - note the zero pongs received on the low prio path:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[INFO] [..] [pong_node]: Running experiment from now on for 10 seconds ...
[INFO] [..] [ping_node]: Both paths: Sent out 953 of configured 1000 pings, i.e. 95%.
[INFO] [..] [ping_node]: High prio path: Received 951 pongs, i.e. for 99% of the pings.
[INFO] [..] [ping_node]: High prio path: Average RTT is 14.0ms.
[INFO] [..] [ping_node]: High prio path: Jitter of RTT is 7.460ms.
[INFO] [..] [ping_node]: Low prio path: Received 0 pongs, i.e. for 0% of the pings.
[INFO] [..] [pong_node]: High priority executor thread ran for 9542ms.
[INFO] [..] [pong_node]: Low priority executor thread ran for 0ms.

</code></pre></div></div>

<p>Note: On Linux, the two Executor threads, which are both scheduled under <code class="language-plaintext highlighter-rouge">SCHED_FIFO</code>, can consume only 95% of the CPU time due to <a href="https://wiki.linuxfoundation.org/realtime/documentation/technical_basics/sched_rt_throttling">RT throttling</a>.</p>

<p>Running the two nodes in separate processes:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>bash
<span class="nb">source</span> /opt/ros/[ROS_DISTRO]/setup.bash
ros2 run examples_rclcpp_cbg_executor ping

</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>bash
<span class="nb">source</span> /opt/ros/[ROS_DISTRO]/setup.bash
ros2 run examples_rclcpp_cbg_executor pong

</code></pre></div></div>

<p>The two processes should be started simultaneously as the experiment runtime is just 10 seconds.</p>

<h2 id="parameters">Parameters</h2>

<p>There are three parameters to configure the experiment:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">ping_period</code> - period (double value in seconds) for sending out pings on the topics high_ping and low_ping simultaneously in the Ping Node.</li>
  <li>
<code class="language-plaintext highlighter-rouge">high_busyloop</code> - duration (double value in seconds) for burning CPU cycles on receiving a message from high_ping in the Pong Node.</li>
  <li>
<code class="language-plaintext highlighter-rouge">low_busyloop</code> - duration (double value in seconds) for burning CPU cycles on receiving a message from low_ping in the Pong Node.</li>
</ul>

<p>The default values are 0.01 seconds for all three parameters.</p>

<p>Example for changing the values on the command line:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run examples_rclcpp_cbg_executor ping_pong <span class="nt">--ros-args</span> <span class="nt">-p</span> ping_period:<span class="o">=</span>0.033 <span class="nt">-p</span> high_busyloop:<span class="o">=</span>0.025

</code></pre></div></div>

<p>With these values, about (0.033s - 0.025s) / 0.010s = 80% of the ping messages on the low prio path should be processed and answered by a pong message:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
[INFO] [..] [ping_node]: Both paths: Sent out 294 of configured 303 pings, i.e. 97%.
[INFO] [..] [ping_node]: High prio path: Received 293 pongs, i.e. for 99% of the pings.
[INFO] [..] [ping_node]: High prio path: Average RTT is 26.2ms.
[INFO] [..] [ping_node]: High prio path: Jitter of RTT is 7.654ms.
[INFO] [..] [ping_node]: Low prio path: Received 216 pongs, i.e. for 73% of the pings.
[INFO] [..] [ping_node]: Low prio path: Average RTT is 202.5ms.
[INFO] [..] [ping_node]: Low prio path: Jitter of RTT is 36.301ms.
...

</code></pre></div></div>

<h2 id="implementation-details">Implementation details</h2>

<p>The Ping Node and the Pong Node are implemented in two classes <code class="language-plaintext highlighter-rouge">PingNode</code> (see <a href="https://github.com/ros2/examples/tree/humble/rclcpp/executors/cbg_executor/include/examples_rclcpp_cbg_executor/ping_node.hpp">ping_node.hpp</a>) and <code class="language-plaintext highlighter-rouge">PongNode</code> (see <a href="https://github.com/ros2/examples/tree/humble/rclcpp/executors/cbg_executor/include/examples_rclcpp_cbg_executor/pong_node.hpp">pong_node.hpp</a>), respectively. In addition to the mentioned timer and subscriptions, the PingNode class provides a function <code class="language-plaintext highlighter-rouge">print_statistics()</code> to print statistics on the number of sent and received messages on each path and the average round trip times. To burn the specified number of CPU cycles, the PongNode class contains a function <code class="language-plaintext highlighter-rouge">burn_cpu_cycles(duration)</code> to simulate a given processing time before replying with a pong.</p>

<p>The Ping and Pong nodes, the two executors, etc. are composed and configured in the <code class="language-plaintext highlighter-rouge">main(..)</code> function of <a href="https://github.com/ros2/examples/tree/humble/rclcpp/executors/cbg_executor/src/main.cpp">main.cpp</a>. This function also starts and ends the experiment for a duration of 10 seconds and prints out the throughput and round trip time (RTT) statistics.</p>

<p>The demo also runs on Windows, where the two threads are prioritized as <em>above normal</em> and <em>below normal</em>, respectively, which does not require elevated privileges. When running the demo on Linux without sudo privileges, a warning is shown but the execution is not stopped.</p>

<h2 id="known-issues">Known issues</h2>

<p>On macOS the core pinning failed silently in our experiments. Please see the function <code class="language-plaintext highlighter-rouge">configure_native_thread(..)</code> in <a href="https://github.com/ros2/examples/tree/humble/rclcpp/executors/cbg_executor/src/examples_rclcpp_cbg_executor/utilities.hpp">utilities.hpp</a> for details.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-examples_rclcpp_cbg_executor">Changelog for package examples_rclcpp_cbg_executor</h1>

<h2 id="0153-2024-11-25">0.15.3 (2024-11-25)</h2>

<h2 id="0152-2024-07-26">0.15.2 (2024-07-26)</h2>

<h2 id="0151-2022-11-07">0.15.1 (2022-11-07)</h2>

<h2 id="0150-2022-03-01">0.15.0 (2022-03-01)</h2>

<ul>
  <li>Improve scheduling configuration of examples_rclcpp_cbg_executor
package (<a href="https://github.com/ros2/examples/issues/331">#331</a>)</li>
  <li>Added jitter measurement to examples_rclcpp_cbg_executor.
(<a href="https://github.com/ros2/examples/issues/328">#328</a>)</li>
  <li>Contributors: Ralph Lange</li>
</ul>

<h2 id="0140-2022-01-14">0.14.0 (2022-01-14)</h2>

<h2 id="0130-2021-10-18">0.13.0 (2021-10-18)</h2>

<ul>
  <li>Fix deprecated subscriber callbacks
(<a href="https://github.com/ros2/examples/issues/323">#323</a>)</li>
  <li>Contributors: Abrar Rahman Protyasha</li>
</ul>

<h2 id="0120-2021-08-05">0.12.0 (2021-08-05)</h2>

<ul>
  <li>Remove use of get_callback_groups().
(<a href="https://github.com/ros2/examples/issues/320">#320</a>)</li>
  <li>Contributors: Chris Lalancette</li>
</ul>

<h2 id="0112-2021-04-26">0.11.2 (2021-04-26)</h2>

<h2 id="0111-2021-04-12">0.11.1 (2021-04-12)</h2>

<ul>
  <li>Fix clang warnings about type mismatches.
(<a href="https://github.com/ros2/examples/issues/309">#309</a>)</li>
  <li>Contributors: Chris Lalancette</li>
</ul>

<h2 id="0110-2021-04-06">0.11.0 (2021-04-06)</h2>

<ul>
  <li>Support for cbg_executor package on QNX
(<a href="https://github.com/ros2/examples/issues/305">#305</a>)</li>
  <li>Contributors: joshua-qnx</li>
</ul>

<h2 id="0103-2021-03-18">0.10.3 (2021-03-18)</h2>

<ul>
  <li>Demo for callback-group-level executor concept.
(<a href="https://github.com/ros2/examples/issues/302">#302</a>)</li>
  <li>Contributors: Ralph Lange</li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/examples_rclcpp_cbg_executor/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#humble">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#humble">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#humble">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#humble">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/std_msgs#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/std_msgs#humble">std_msgs  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No direct system dependencies.</em>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <em>No known dependants.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>examples_rclcpp_cbg_executor</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="humble-question-list" class="panel-body" style="display: none;"></div>
      <div id="humble-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/examples_rclcpp_cbg_executor+humble">here</a>.</p>
      </div>
      <div id="humble-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/ros2/examples.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/humble/p/examples_rclcpp_cbg_executor"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/ros2/examples/tree/humble/rclcpp/executors/cbg_executor"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/examples_rclcpp_cbg_executor">examples_rclcpp_cbg_executor</a> <small>package from <a style="text-decoration:none" href="/r/examples/github-ros2-examples">examples</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/launch_testing_examples">

launch_testing_examples
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_action_client">

examples_rclcpp_minimal_action_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_action_server">

examples_rclcpp_minimal_action_server
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_composition">

examples_rclcpp_minimal_composition
</a>
            
          
            
            
              <span class="label label-default pkg-label">

examples_rclcpp_cbg_executor
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_multithreaded_executor">

examples_rclcpp_multithreaded_executor
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_async_client">

examples_rclcpp_async_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_client">

examples_rclcpp_minimal_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_service">

examples_rclcpp_minimal_service
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_timer">

examples_rclcpp_minimal_timer
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_publisher">

examples_rclcpp_minimal_publisher
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_subscriber">

examples_rclcpp_minimal_subscriber
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_wait_set">

examples_rclcpp_wait_set
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_action_client">

examples_rclpy_minimal_action_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_action_server">

examples_rclpy_minimal_action_server
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_executors">

examples_rclpy_executors
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_guard_conditions">

examples_rclpy_guard_conditions
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_client">

examples_rclpy_minimal_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_service">

examples_rclpy_minimal_service
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_publisher">

examples_rclpy_minimal_publisher
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_subscriber">

examples_rclpy_minimal_subscriber
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_pointcloud_publisher">

examples_rclpy_pointcloud_publisher
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/jazzy/p/examples_rclcpp_cbg_executor"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/ros2/examples/tree/jazzy/rclcpp/executors/cbg_executor"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="jazzy-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#jazzy-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#jazzy-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#jazzy-deps" data-toggle="tab"><span class="label label-primary">5</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#jazzy-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#jazzy-questions" data-toggle="tab"><span id="jazzy-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="jazzy-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>0.19.5</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache License 2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Example packages for ROS 2</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros2/examples.git">https://github.com/ros2/examples.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">jazzy</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-02
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/examples/#jazzy-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/examples/#jazzy-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/examples/#jazzy-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Example for multiple Executor instances in one process, using the callback-group-level interface of the Executor class.
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Aditya Pande</li>
                
                  <li>Alejandro Hernandez Cordero</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Ralph Lange</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/ros2/examples/tree/jazzy/rclcpp/executors/cbg_executor/README.md" title="Open in git repository">rclcpp/executors/cbg_executor/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="examples_rclcpp_cbg_executor">examples_rclcpp_cbg_executor</h1>

<p>The <em>examples_rclcpp_cbg_executor</em> package provides a demo and test bench for the <em>Callback-group-level Executor</em> concept. This concept was developed in 2018 and has been integrated in ROS 2 mainline in 2020, i.e., is available from ROS 2 Galactic on. It does not add a new Executor but leverages callback groups for refining the Executor API to callback-group-level granularity.</p>

<p>This allows a single node to have callbacks with different real-time requirements assigned to different Executor instances – within one process. Thus, an Executor instance can be dedicated to one or few specific callback groups and the Executor’s thread (or threads) can be prioritized according to the real-time requirements of these groups. For example, all critical callbacks may be handled by an Executor instance based on an thread running at the highest scheduler priority.</p>

<h2 id="introduction-to-demo">Introduction to demo</h2>

<p>The demo comprises a <em>Ping Node</em> and a <em>Pong Node</em> which exchange messages on two communication paths simultaneously. There is a high priority path formed by the topics <em>high_ping</em> and <em>high_pong</em> and a low priority path formed by <em>low_ping</em> and <em>low_pong</em>, respectively.</p>

<p><img src="https://raw.githubusercontent.com/ros2/examples/jazzy/rclcpp/executors/cbg_executor/doc/ping_pong_diagram.png" alt=""></p>

<p>The Ping Node sends ping messages on both paths simultaneously at a configurable rate. The Pong Node takes these ping messages and replies each of them. Before sending a reply, it burns a configurable number of CPU cycles (thereby varying the processor load) to simulate some message processing.</p>

<p>All callbacks of the Ping Node (i.e., for the timer for sending ping messages and for the two subscription on high_pong and low_pong) are handled in one callback group and thus Executor instance. However, the two callbacks of the Pong Node that process the incoming ping messages and answer with a pong message are assigned to two different callback groups. In the main function, these two groups are distributed to two Executor instances and threads. Both threads are pinned to the same CPU (No. 0) and thus share its processing power, but with different scheduler priorities following the names <em>high</em> and <em>low</em>.</p>

<h2 id="running-the-demo">Running the demo</h2>

<p>The Ping Node and Pong Node may be either started in one process or in two processes. Please note that on Linux the demo requires sudo privileges to be able to change the thread priorities using <code class="language-plaintext highlighter-rouge">pthread_setschedparam(..)</code>.</p>

<p>Running the two nodes in one process:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>bash
<span class="nb">source</span> /opt/ros/[ROS_DISTRO]/setup.bash
ros2 run examples_rclcpp_cbg_executor ping_pong

</code></pre></div></div>

<p>Example of a typical output - note the zero pongs received on the low prio path:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[INFO] [..] [pong_node]: Running experiment from now on for 10 seconds ...
[INFO] [..] [ping_node]: Both paths: Sent out 953 of configured 1000 pings, i.e. 95%.
[INFO] [..] [ping_node]: High prio path: Received 951 pongs, i.e. for 99% of the pings.
[INFO] [..] [ping_node]: High prio path: Average RTT is 14.0ms.
[INFO] [..] [ping_node]: High prio path: Jitter of RTT is 7.460ms.
[INFO] [..] [ping_node]: Low prio path: Received 0 pongs, i.e. for 0% of the pings.
[INFO] [..] [pong_node]: High priority executor thread ran for 9542ms.
[INFO] [..] [pong_node]: Low priority executor thread ran for 0ms.

</code></pre></div></div>

<p>Note: On Linux, the two Executor threads, which are both scheduled under <code class="language-plaintext highlighter-rouge">SCHED_FIFO</code>, can consume only 95% of the CPU time due to <a href="https://wiki.linuxfoundation.org/realtime/documentation/technical_basics/sched_rt_throttling">RT throttling</a>.</p>

<p>Running the two nodes in separate processes:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>bash
<span class="nb">source</span> /opt/ros/[ROS_DISTRO]/setup.bash
ros2 run examples_rclcpp_cbg_executor ping

</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>bash
<span class="nb">source</span> /opt/ros/[ROS_DISTRO]/setup.bash
ros2 run examples_rclcpp_cbg_executor pong

</code></pre></div></div>

<p>The two processes should be started simultaneously as the experiment runtime is just 10 seconds.</p>

<h2 id="parameters">Parameters</h2>

<p>There are three parameters to configure the experiment:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">ping_period</code> - period (double value in seconds) for sending out pings on the topics high_ping and low_ping simultaneously in the Ping Node.</li>
  <li>
<code class="language-plaintext highlighter-rouge">high_busyloop</code> - duration (double value in seconds) for burning CPU cycles on receiving a message from high_ping in the Pong Node.</li>
  <li>
<code class="language-plaintext highlighter-rouge">low_busyloop</code> - duration (double value in seconds) for burning CPU cycles on receiving a message from low_ping in the Pong Node.</li>
</ul>

<p>The default values are 0.01 seconds for all three parameters.</p>

<p>Example for changing the values on the command line:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run examples_rclcpp_cbg_executor ping_pong <span class="nt">--ros-args</span> <span class="nt">-p</span> ping_period:<span class="o">=</span>0.033 <span class="nt">-p</span> high_busyloop:<span class="o">=</span>0.025

</code></pre></div></div>

<p>With these values, about (0.033s - 0.025s) / 0.010s = 80% of the ping messages on the low prio path should be processed and answered by a pong message:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
[INFO] [..] [ping_node]: Both paths: Sent out 294 of configured 303 pings, i.e. 97%.
[INFO] [..] [ping_node]: High prio path: Received 293 pongs, i.e. for 99% of the pings.
[INFO] [..] [ping_node]: High prio path: Average RTT is 26.2ms.
[INFO] [..] [ping_node]: High prio path: Jitter of RTT is 7.654ms.
[INFO] [..] [ping_node]: Low prio path: Received 216 pongs, i.e. for 73% of the pings.
[INFO] [..] [ping_node]: Low prio path: Average RTT is 202.5ms.
[INFO] [..] [ping_node]: Low prio path: Jitter of RTT is 36.301ms.
...

</code></pre></div></div>

<h2 id="implementation-details">Implementation details</h2>

<p>The Ping Node and the Pong Node are implemented in two classes <code class="language-plaintext highlighter-rouge">PingNode</code> (see <a href="https://github.com/ros2/examples/tree/jazzy/rclcpp/executors/cbg_executor/include/examples_rclcpp_cbg_executor/ping_node.hpp">ping_node.hpp</a>) and <code class="language-plaintext highlighter-rouge">PongNode</code> (see <a href="https://github.com/ros2/examples/tree/jazzy/rclcpp/executors/cbg_executor/include/examples_rclcpp_cbg_executor/pong_node.hpp">pong_node.hpp</a>), respectively. In addition to the mentioned timer and subscriptions, the PingNode class provides a function <code class="language-plaintext highlighter-rouge">print_statistics()</code> to print statistics on the number of sent and received messages on each path and the average round trip times. To burn the specified number of CPU cycles, the PongNode class contains a function <code class="language-plaintext highlighter-rouge">burn_cpu_cycles(duration)</code> to simulate a given processing time before replying with a pong.</p>

<p>The Ping and Pong nodes, the two executors, etc. are composed and configured in the <code class="language-plaintext highlighter-rouge">main(..)</code> function of <a href="https://github.com/ros2/examples/tree/jazzy/rclcpp/executors/cbg_executor/src/main.cpp">main.cpp</a>. This function also starts and ends the experiment for a duration of 10 seconds and prints out the throughput and round trip time (RTT) statistics.</p>

<p>The demo also runs on Windows, where the two threads are prioritized as <em>above normal</em> and <em>below normal</em>, respectively, which does not require elevated privileges. When running the demo on Linux without sudo privileges, a warning is shown but the execution is not stopped.</p>

<h2 id="known-issues">Known issues</h2>

<p>On macOS the core pinning failed silently in our experiments. Please see the function <code class="language-plaintext highlighter-rouge">configure_native_thread(..)</code> in <a href="https://github.com/ros2/examples/tree/jazzy/rclcpp/executors/cbg_executor/src/examples_rclcpp_cbg_executor/utilities.hpp">utilities.hpp</a> for details.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-examples_rclcpp_cbg_executor">Changelog for package examples_rclcpp_cbg_executor</h1>

<h2 id="0195-2025-04-02">0.19.5 (2025-04-02)</h2>

<h2 id="0194-2024-06-27">0.19.4 (2024-06-27)</h2>

<h2 id="0193-2024-04-16">0.19.3 (2024-04-16)</h2>

<h2 id="0192-2024-03-28">0.19.2 (2024-03-28)</h2>

<h2 id="0191-2023-07-11">0.19.1 (2023-07-11)</h2>

<h2 id="0190-2023-04-27">0.19.0 (2023-04-27)</h2>

<h2 id="0180-2023-04-11">0.18.0 (2023-04-11)</h2>

<h2 id="0171-2023-03-01">0.17.1 (2023-03-01)</h2>

<h2 id="0170-2023-02-14">0.17.0 (2023-02-14)</h2>

<ul>
  <li>Update the examples to C++17.
(<a href="https://github.com/ros2/examples/issues/353">#353</a>)</li>
  <li>[rolling] Update maintainers - 2022-11-07
(<a href="https://github.com/ros2/examples/issues/352">#352</a>)</li>
  <li>Contributors: Audrow Nash, Chris Lalancette</li>
</ul>

<h2 id="0162-2022-11-02">0.16.2 (2022-11-02)</h2>

<h2 id="0161-2022-09-13">0.16.1 (2022-09-13)</h2>

<h2 id="0160-2022-04-29">0.16.0 (2022-04-29)</h2>

<h2 id="0150-2022-03-01">0.15.0 (2022-03-01)</h2>

<ul>
  <li>Improve scheduling configuration of examples_rclcpp_cbg_executor
package (<a href="https://github.com/ros2/examples/issues/331">#331</a>)</li>
  <li>Added jitter measurement to examples_rclcpp_cbg_executor.
(<a href="https://github.com/ros2/examples/issues/328">#328</a>)</li>
  <li>Contributors: Ralph Lange</li>
</ul>

<h2 id="0140-2022-01-14">0.14.0 (2022-01-14)</h2>

<h2 id="0130-2021-10-18">0.13.0 (2021-10-18)</h2>

<ul>
  <li>Fix deprecated subscriber callbacks
(<a href="https://github.com/ros2/examples/issues/323">#323</a>)</li>
  <li>Contributors: Abrar Rahman Protyasha</li>
</ul>

<h2 id="0120-2021-08-05">0.12.0 (2021-08-05)</h2>

<ul>
  <li>Remove use of get_callback_groups().
(<a href="https://github.com/ros2/examples/issues/320">#320</a>)</li>
  <li>Contributors: Chris Lalancette</li>
</ul>

<h2 id="0112-2021-04-26">0.11.2 (2021-04-26)</h2>

<h2 id="0111-2021-04-12">0.11.1 (2021-04-12)</h2>

<ul>
  <li>Fix clang warnings about type mismatches.
(<a href="https://github.com/ros2/examples/issues/309">#309</a>)</li>
  <li>Contributors: Chris Lalancette</li>
</ul>

<h2 id="0110-2021-04-06">0.11.0 (2021-04-06)</h2>

<ul>
  <li>Support for cbg_executor package on QNX
(<a href="https://github.com/ros2/examples/issues/305">#305</a>)</li>
  <li>Contributors: joshua-qnx</li>
</ul>

<h2 id="0103-2021-03-18">0.10.3 (2021-03-18)</h2>

<ul>
  <li>Demo for callback-group-level executor concept.
(<a href="https://github.com/ros2/examples/issues/302">#302</a>)</li>
  <li>Contributors: Ralph Lange</li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/examples_rclcpp_cbg_executor/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#jazzy">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#jazzy">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#jazzy">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#jazzy">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/std_msgs#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/std_msgs#jazzy">std_msgs  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No direct system dependencies.</em>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <em>No known dependants.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>examples_rclcpp_cbg_executor</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="jazzy-question-list" class="panel-body" style="display: none;"></div>
      <div id="jazzy-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/examples_rclcpp_cbg_executor+jazzy">here</a>.</p>
      </div>
      <div id="jazzy-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/ros2/examples.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/jazzy/p/examples_rclcpp_cbg_executor"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/ros2/examples/tree/jazzy/rclcpp/executors/cbg_executor"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/examples_rclcpp_cbg_executor">examples_rclcpp_cbg_executor</a> <small>package from <a style="text-decoration:none" href="/r/examples/github-ros2-examples">examples</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/launch_testing_examples">

launch_testing_examples
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_action_client">

examples_rclcpp_minimal_action_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_action_server">

examples_rclcpp_minimal_action_server
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_composition">

examples_rclcpp_minimal_composition
</a>
            
          
            
            
              <span class="label label-default pkg-label">

examples_rclcpp_cbg_executor
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_multithreaded_executor">

examples_rclcpp_multithreaded_executor
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_async_client">

examples_rclcpp_async_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_client">

examples_rclcpp_minimal_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_service">

examples_rclcpp_minimal_service
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_timer">

examples_rclcpp_minimal_timer
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_publisher">

examples_rclcpp_minimal_publisher
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_subscriber">

examples_rclcpp_minimal_subscriber
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_wait_set">

examples_rclcpp_wait_set
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_action_client">

examples_rclpy_minimal_action_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_action_server">

examples_rclpy_minimal_action_server
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_executors">

examples_rclpy_executors
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_guard_conditions">

examples_rclpy_guard_conditions
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_client">

examples_rclpy_minimal_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_service">

examples_rclpy_minimal_service
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_publisher">

examples_rclpy_minimal_publisher
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_subscriber">

examples_rclpy_minimal_subscriber
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_pointcloud_publisher">

examples_rclpy_pointcloud_publisher
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/kilted/p/examples_rclcpp_cbg_executor"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/ros2/examples/tree/kilted/rclcpp/executors/cbg_executor"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="kilted-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#kilted-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#kilted-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#kilted-deps" data-toggle="tab"><span class="label label-primary">5</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#kilted-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#kilted-questions" data-toggle="tab"><span id="kilted-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="kilted-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>0.20.5</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache License 2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Example packages for ROS 2</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros2/examples.git">https://github.com/ros2/examples.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">kilted</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-28
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/examples/#kilted-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/examples/#kilted-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/examples/#kilted-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Example for multiple Executor instances in one process, using the callback-group-level interface of the Executor class.
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Aditya Pande</li>
                
                  <li>Alejandro Hernandez Cordero</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Ralph Lange</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/ros2/examples/tree/kilted/rclcpp/executors/cbg_executor/README.md" title="Open in git repository">rclcpp/executors/cbg_executor/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="examples_rclcpp_cbg_executor">examples_rclcpp_cbg_executor</h1>

<p>The <em>examples_rclcpp_cbg_executor</em> package provides a demo and test bench for the <em>Callback-group-level Executor</em> concept. This concept was developed in 2018 and has been integrated in ROS 2 mainline in 2020, i.e., is available from ROS 2 Galactic on. It does not add a new Executor but leverages callback groups for refining the Executor API to callback-group-level granularity.</p>

<p>This allows a single node to have callbacks with different real-time requirements assigned to different Executor instances – within one process. Thus, an Executor instance can be dedicated to one or few specific callback groups and the Executor’s thread (or threads) can be prioritized according to the real-time requirements of these groups. For example, all critical callbacks may be handled by an Executor instance based on an thread running at the highest scheduler priority.</p>

<h2 id="introduction-to-demo">Introduction to demo</h2>

<p>The demo comprises a <em>Ping Node</em> and a <em>Pong Node</em> which exchange messages on two communication paths simultaneously. There is a high priority path formed by the topics <em>high_ping</em> and <em>high_pong</em> and a low priority path formed by <em>low_ping</em> and <em>low_pong</em>, respectively.</p>

<p><img src="https://raw.githubusercontent.com/ros2/examples/kilted/rclcpp/executors/cbg_executor/doc/ping_pong_diagram.png" alt=""></p>

<p>The Ping Node sends ping messages on both paths simultaneously at a configurable rate. The Pong Node takes these ping messages and replies each of them. Before sending a reply, it burns a configurable number of CPU cycles (thereby varying the processor load) to simulate some message processing.</p>

<p>All callbacks of the Ping Node (i.e., for the timer for sending ping messages and for the two subscription on high_pong and low_pong) are handled in one callback group and thus Executor instance. However, the two callbacks of the Pong Node that process the incoming ping messages and answer with a pong message are assigned to two different callback groups. In the main function, these two groups are distributed to two Executor instances and threads. Both threads are pinned to the same CPU (No. 0) and thus share its processing power, but with different scheduler priorities following the names <em>high</em> and <em>low</em>.</p>

<h2 id="running-the-demo">Running the demo</h2>

<p>The Ping Node and Pong Node may be either started in one process or in two processes. Please note that on Linux the demo requires sudo privileges to be able to change the thread priorities using <code class="language-plaintext highlighter-rouge">pthread_setschedparam(..)</code>.</p>

<p>Running the two nodes in one process:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>bash
<span class="nb">source</span> /opt/ros/[ROS_DISTRO]/setup.bash
ros2 run examples_rclcpp_cbg_executor ping_pong

</code></pre></div></div>

<p>Example of a typical output - note the zero pongs received on the low prio path:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[INFO] [..] [pong_node]: Running experiment from now on for 10 seconds ...
[INFO] [..] [ping_node]: Both paths: Sent out 953 of configured 1000 pings, i.e. 95%.
[INFO] [..] [ping_node]: High prio path: Received 951 pongs, i.e. for 99% of the pings.
[INFO] [..] [ping_node]: High prio path: Average RTT is 14.0ms.
[INFO] [..] [ping_node]: High prio path: Jitter of RTT is 7.460ms.
[INFO] [..] [ping_node]: Low prio path: Received 0 pongs, i.e. for 0% of the pings.
[INFO] [..] [pong_node]: High priority executor thread ran for 9542ms.
[INFO] [..] [pong_node]: Low priority executor thread ran for 0ms.

</code></pre></div></div>

<p>Note: On Linux, the two Executor threads, which are both scheduled under <code class="language-plaintext highlighter-rouge">SCHED_FIFO</code>, can consume only 95% of the CPU time due to <a href="https://wiki.linuxfoundation.org/realtime/documentation/technical_basics/sched_rt_throttling">RT throttling</a>.</p>

<p>Running the two nodes in separate processes:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>bash
<span class="nb">source</span> /opt/ros/[ROS_DISTRO]/setup.bash
ros2 run examples_rclcpp_cbg_executor ping

</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>bash
<span class="nb">source</span> /opt/ros/[ROS_DISTRO]/setup.bash
ros2 run examples_rclcpp_cbg_executor pong

</code></pre></div></div>

<p>The two processes should be started simultaneously as the experiment runtime is just 10 seconds.</p>

<h2 id="parameters">Parameters</h2>

<p>There are three parameters to configure the experiment:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">ping_period</code> - period (double value in seconds) for sending out pings on the topics high_ping and low_ping simultaneously in the Ping Node.</li>
  <li>
<code class="language-plaintext highlighter-rouge">high_busyloop</code> - duration (double value in seconds) for burning CPU cycles on receiving a message from high_ping in the Pong Node.</li>
  <li>
<code class="language-plaintext highlighter-rouge">low_busyloop</code> - duration (double value in seconds) for burning CPU cycles on receiving a message from low_ping in the Pong Node.</li>
</ul>

<p>The default values are 0.01 seconds for all three parameters.</p>

<p>Example for changing the values on the command line:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run examples_rclcpp_cbg_executor ping_pong <span class="nt">--ros-args</span> <span class="nt">-p</span> ping_period:<span class="o">=</span>0.033 <span class="nt">-p</span> high_busyloop:<span class="o">=</span>0.025

</code></pre></div></div>

<p>With these values, about (0.033s - 0.025s) / 0.010s = 80% of the ping messages on the low prio path should be processed and answered by a pong message:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
[INFO] [..] [ping_node]: Both paths: Sent out 294 of configured 303 pings, i.e. 97%.
[INFO] [..] [ping_node]: High prio path: Received 293 pongs, i.e. for 99% of the pings.
[INFO] [..] [ping_node]: High prio path: Average RTT is 26.2ms.
[INFO] [..] [ping_node]: High prio path: Jitter of RTT is 7.654ms.
[INFO] [..] [ping_node]: Low prio path: Received 216 pongs, i.e. for 73% of the pings.
[INFO] [..] [ping_node]: Low prio path: Average RTT is 202.5ms.
[INFO] [..] [ping_node]: Low prio path: Jitter of RTT is 36.301ms.
...

</code></pre></div></div>

<h2 id="implementation-details">Implementation details</h2>

<p>The Ping Node and the Pong Node are implemented in two classes <code class="language-plaintext highlighter-rouge">PingNode</code> (see <a href="https://github.com/ros2/examples/tree/kilted/rclcpp/executors/cbg_executor/include/examples_rclcpp_cbg_executor/ping_node.hpp">ping_node.hpp</a>) and <code class="language-plaintext highlighter-rouge">PongNode</code> (see <a href="https://github.com/ros2/examples/tree/kilted/rclcpp/executors/cbg_executor/include/examples_rclcpp_cbg_executor/pong_node.hpp">pong_node.hpp</a>), respectively. In addition to the mentioned timer and subscriptions, the PingNode class provides a function <code class="language-plaintext highlighter-rouge">print_statistics()</code> to print statistics on the number of sent and received messages on each path and the average round trip times. To burn the specified number of CPU cycles, the PongNode class contains a function <code class="language-plaintext highlighter-rouge">burn_cpu_cycles(duration)</code> to simulate a given processing time before replying with a pong.</p>

<p>The Ping and Pong nodes, the two executors, etc. are composed and configured in the <code class="language-plaintext highlighter-rouge">main(..)</code> function of <a href="https://github.com/ros2/examples/tree/kilted/rclcpp/executors/cbg_executor/src/main.cpp">main.cpp</a>. This function also starts and ends the experiment for a duration of 10 seconds and prints out the throughput and round trip time (RTT) statistics.</p>

<p>The demo also runs on Windows, where the two threads are prioritized as <em>above normal</em> and <em>below normal</em>, respectively, which does not require elevated privileges. When running the demo on Linux without sudo privileges, a warning is shown but the execution is not stopped.</p>

<h2 id="known-issues">Known issues</h2>

<p>On macOS the core pinning failed silently in our experiments. Please see the function <code class="language-plaintext highlighter-rouge">configure_native_thread(..)</code> in <a href="https://github.com/ros2/examples/tree/kilted/rclcpp/executors/cbg_executor/src/examples_rclcpp_cbg_executor/utilities.hpp">utilities.hpp</a> for details.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-examples_rclcpp_cbg_executor">Changelog for package examples_rclcpp_cbg_executor</h1>

<h2 id="0205-2025-04-28">0.20.5 (2025-04-28)</h2>

<ul>
  <li>Use target_link_libraries instead of ament_target_dependencies
(<a href="https://github.com/ros2/examples/issues/404">#404</a>)</li>
  <li>Contributors: Shane Loretz</li>
</ul>

<h2 id="0204-2024-12-20">0.20.4 (2024-12-20)</h2>

<h2 id="0203-2024-11-20">0.20.3 (2024-11-20)</h2>

<h2 id="0202-2024-07-29">0.20.2 (2024-07-29)</h2>

<h2 id="0201-2024-06-17">0.20.1 (2024-06-17)</h2>

<h2 id="0200-2024-04-26">0.20.0 (2024-04-26)</h2>

<h2 id="0193-2024-04-16">0.19.3 (2024-04-16)</h2>

<h2 id="0192-2024-03-28">0.19.2 (2024-03-28)</h2>

<h2 id="0191-2023-07-11">0.19.1 (2023-07-11)</h2>

<h2 id="0190-2023-04-27">0.19.0 (2023-04-27)</h2>

<h2 id="0180-2023-04-11">0.18.0 (2023-04-11)</h2>

<h2 id="0171-2023-03-01">0.17.1 (2023-03-01)</h2>

<h2 id="0170-2023-02-14">0.17.0 (2023-02-14)</h2>

<ul>
  <li>Update the examples to C++17.
(<a href="https://github.com/ros2/examples/issues/353">#353</a>)</li>
  <li>[rolling] Update maintainers - 2022-11-07
(<a href="https://github.com/ros2/examples/issues/352">#352</a>)</li>
  <li>Contributors: Audrow Nash, Chris Lalancette</li>
</ul>

<h2 id="0162-2022-11-02">0.16.2 (2022-11-02)</h2>

<h2 id="0161-2022-09-13">0.16.1 (2022-09-13)</h2>

<h2 id="0160-2022-04-29">0.16.0 (2022-04-29)</h2>

<h2 id="0150-2022-03-01">0.15.0 (2022-03-01)</h2>

<ul>
  <li>Improve scheduling configuration of examples_rclcpp_cbg_executor
package (<a href="https://github.com/ros2/examples/issues/331">#331</a>)</li>
  <li>Added jitter measurement to examples_rclcpp_cbg_executor.
(<a href="https://github.com/ros2/examples/issues/328">#328</a>)</li>
  <li>Contributors: Ralph Lange</li>
</ul>

<h2 id="0140-2022-01-14">0.14.0 (2022-01-14)</h2>

<h2 id="0130-2021-10-18">0.13.0 (2021-10-18)</h2>

<ul>
  <li>Fix deprecated subscriber callbacks
(<a href="https://github.com/ros2/examples/issues/323">#323</a>)</li>
  <li>Contributors: Abrar Rahman Protyasha</li>
</ul>

<h2 id="0120-2021-08-05">0.12.0 (2021-08-05)</h2>

<ul>
  <li>Remove use of get_callback_groups().
(<a href="https://github.com/ros2/examples/issues/320">#320</a>)</li>
  <li>Contributors: Chris Lalancette</li>
</ul>

<h2 id="0112-2021-04-26">0.11.2 (2021-04-26)</h2>

<h2 id="0111-2021-04-12">0.11.1 (2021-04-12)</h2>

<ul>
  <li>Fix clang warnings about type mismatches.
(<a href="https://github.com/ros2/examples/issues/309">#309</a>)</li>
  <li>Contributors: Chris Lalancette</li>
</ul>

<h2 id="0110-2021-04-06">0.11.0 (2021-04-06)</h2>

<ul>
  <li>Support for cbg_executor package on QNX
(<a href="https://github.com/ros2/examples/issues/305">#305</a>)</li>
  <li>Contributors: joshua-qnx</li>
</ul>

<h2 id="0103-2021-03-18">0.10.3 (2021-03-18)</h2>

<ul>
  <li>Demo for callback-group-level executor concept.
(<a href="https://github.com/ros2/examples/issues/302">#302</a>)</li>
  <li>Contributors: Ralph Lange</li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kilted-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/examples_rclcpp_cbg_executor/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kilted-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#kilted">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#kilted">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#kilted">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#kilted">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/std_msgs#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/std_msgs#kilted">std_msgs  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No direct system dependencies.</em>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <em>No known dependants.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kilted-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kilted-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>examples_rclcpp_cbg_executor</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="kilted-question-list" class="panel-body" style="display: none;"></div>
      <div id="kilted-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/examples_rclcpp_cbg_executor+kilted">here</a>.</p>
      </div>
      <div id="kilted-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/ros2/examples.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/kilted/p/examples_rclcpp_cbg_executor"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/ros2/examples/tree/kilted/rclcpp/executors/cbg_executor"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/examples_rclcpp_cbg_executor">examples_rclcpp_cbg_executor</a> <small>package from <a style="text-decoration:none" href="/r/examples/github-ros2-examples">examples</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/launch_testing_examples">

launch_testing_examples
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_action_client">

examples_rclcpp_minimal_action_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_action_server">

examples_rclcpp_minimal_action_server
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_composition">

examples_rclcpp_minimal_composition
</a>
            
          
            
            
              <span class="label label-default pkg-label">

examples_rclcpp_cbg_executor
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_multithreaded_executor">

examples_rclcpp_multithreaded_executor
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_async_client">

examples_rclcpp_async_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_client">

examples_rclcpp_minimal_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_service">

examples_rclcpp_minimal_service
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_timer">

examples_rclcpp_minimal_timer
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_publisher">

examples_rclcpp_minimal_publisher
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_subscriber">

examples_rclcpp_minimal_subscriber
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_wait_set">

examples_rclcpp_wait_set
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_action_client">

examples_rclpy_minimal_action_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_action_server">

examples_rclpy_minimal_action_server
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_executors">

examples_rclpy_executors
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_guard_conditions">

examples_rclpy_guard_conditions
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_client">

examples_rclpy_minimal_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_service">

examples_rclpy_minimal_service
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_publisher">

examples_rclpy_minimal_publisher
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_subscriber">

examples_rclpy_minimal_subscriber
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_pointcloud_publisher">

examples_rclpy_pointcloud_publisher
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/rolling/p/examples_rclcpp_cbg_executor"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/ros2/examples/tree/rolling/rclcpp/executors/cbg_executor"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="rolling-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#rolling-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#rolling-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#rolling-deps" data-toggle="tab"><span class="label label-primary">5</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#rolling-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#rolling-questions" data-toggle="tab"><span id="rolling-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="rolling-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>0.21.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache License 2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Example packages for ROS 2</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros2/examples.git">https://github.com/ros2/examples.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">rolling</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-28
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/examples/#rolling-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/examples/#rolling-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/examples/#rolling-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Example for multiple Executor instances in one process, using the callback-group-level interface of the Executor class.
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Aditya Pande</li>
                
                  <li>Alejandro Hernandez Cordero</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Ralph Lange</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/ros2/examples/tree/rolling/rclcpp/executors/cbg_executor/README.md" title="Open in git repository">rclcpp/executors/cbg_executor/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="examples_rclcpp_cbg_executor">examples_rclcpp_cbg_executor</h1>

<p>The <em>examples_rclcpp_cbg_executor</em> package provides a demo and test bench for the <em>Callback-group-level Executor</em> concept. This concept was developed in 2018 and has been integrated in ROS 2 mainline in 2020, i.e., is available from ROS 2 Galactic on. It does not add a new Executor but leverages callback groups for refining the Executor API to callback-group-level granularity.</p>

<p>This allows a single node to have callbacks with different real-time requirements assigned to different Executor instances – within one process. Thus, an Executor instance can be dedicated to one or few specific callback groups and the Executor’s thread (or threads) can be prioritized according to the real-time requirements of these groups. For example, all critical callbacks may be handled by an Executor instance based on an thread running at the highest scheduler priority.</p>

<h2 id="introduction-to-demo">Introduction to demo</h2>

<p>The demo comprises a <em>Ping Node</em> and a <em>Pong Node</em> which exchange messages on two communication paths simultaneously. There is a high priority path formed by the topics <em>high_ping</em> and <em>high_pong</em> and a low priority path formed by <em>low_ping</em> and <em>low_pong</em>, respectively.</p>

<p><img src="https://raw.githubusercontent.com/ros2/examples/rolling/rclcpp/executors/cbg_executor/doc/ping_pong_diagram.png" alt=""></p>

<p>The Ping Node sends ping messages on both paths simultaneously at a configurable rate. The Pong Node takes these ping messages and replies each of them. Before sending a reply, it burns a configurable number of CPU cycles (thereby varying the processor load) to simulate some message processing.</p>

<p>All callbacks of the Ping Node (i.e., for the timer for sending ping messages and for the two subscription on high_pong and low_pong) are handled in one callback group and thus Executor instance. However, the two callbacks of the Pong Node that process the incoming ping messages and answer with a pong message are assigned to two different callback groups. In the main function, these two groups are distributed to two Executor instances and threads. Both threads are pinned to the same CPU (No. 0) and thus share its processing power, but with different scheduler priorities following the names <em>high</em> and <em>low</em>.</p>

<h2 id="running-the-demo">Running the demo</h2>

<p>The Ping Node and Pong Node may be either started in one process or in two processes. Please note that on Linux the demo requires sudo privileges to be able to change the thread priorities using <code class="language-plaintext highlighter-rouge">pthread_setschedparam(..)</code>.</p>

<p>Running the two nodes in one process:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>bash
<span class="nb">source</span> /opt/ros/[ROS_DISTRO]/setup.bash
ros2 run examples_rclcpp_cbg_executor ping_pong

</code></pre></div></div>

<p>Example of a typical output - note the zero pongs received on the low prio path:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[INFO] [..] [pong_node]: Running experiment from now on for 10 seconds ...
[INFO] [..] [ping_node]: Both paths: Sent out 953 of configured 1000 pings, i.e. 95%.
[INFO] [..] [ping_node]: High prio path: Received 951 pongs, i.e. for 99% of the pings.
[INFO] [..] [ping_node]: High prio path: Average RTT is 14.0ms.
[INFO] [..] [ping_node]: High prio path: Jitter of RTT is 7.460ms.
[INFO] [..] [ping_node]: Low prio path: Received 0 pongs, i.e. for 0% of the pings.
[INFO] [..] [pong_node]: High priority executor thread ran for 9542ms.
[INFO] [..] [pong_node]: Low priority executor thread ran for 0ms.

</code></pre></div></div>

<p>Note: On Linux, the two Executor threads, which are both scheduled under <code class="language-plaintext highlighter-rouge">SCHED_FIFO</code>, can consume only 95% of the CPU time due to <a href="https://wiki.linuxfoundation.org/realtime/documentation/technical_basics/sched_rt_throttling">RT throttling</a>.</p>

<p>Running the two nodes in separate processes:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>bash
<span class="nb">source</span> /opt/ros/[ROS_DISTRO]/setup.bash
ros2 run examples_rclcpp_cbg_executor ping

</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>bash
<span class="nb">source</span> /opt/ros/[ROS_DISTRO]/setup.bash
ros2 run examples_rclcpp_cbg_executor pong

</code></pre></div></div>

<p>The two processes should be started simultaneously as the experiment runtime is just 10 seconds.</p>

<h2 id="parameters">Parameters</h2>

<p>There are three parameters to configure the experiment:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">ping_period</code> - period (double value in seconds) for sending out pings on the topics high_ping and low_ping simultaneously in the Ping Node.</li>
  <li>
<code class="language-plaintext highlighter-rouge">high_busyloop</code> - duration (double value in seconds) for burning CPU cycles on receiving a message from high_ping in the Pong Node.</li>
  <li>
<code class="language-plaintext highlighter-rouge">low_busyloop</code> - duration (double value in seconds) for burning CPU cycles on receiving a message from low_ping in the Pong Node.</li>
</ul>

<p>The default values are 0.01 seconds for all three parameters.</p>

<p>Example for changing the values on the command line:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run examples_rclcpp_cbg_executor ping_pong <span class="nt">--ros-args</span> <span class="nt">-p</span> ping_period:<span class="o">=</span>0.033 <span class="nt">-p</span> high_busyloop:<span class="o">=</span>0.025

</code></pre></div></div>

<p>With these values, about (0.033s - 0.025s) / 0.010s = 80% of the ping messages on the low prio path should be processed and answered by a pong message:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
[INFO] [..] [ping_node]: Both paths: Sent out 294 of configured 303 pings, i.e. 97%.
[INFO] [..] [ping_node]: High prio path: Received 293 pongs, i.e. for 99% of the pings.
[INFO] [..] [ping_node]: High prio path: Average RTT is 26.2ms.
[INFO] [..] [ping_node]: High prio path: Jitter of RTT is 7.654ms.
[INFO] [..] [ping_node]: Low prio path: Received 216 pongs, i.e. for 73% of the pings.
[INFO] [..] [ping_node]: Low prio path: Average RTT is 202.5ms.
[INFO] [..] [ping_node]: Low prio path: Jitter of RTT is 36.301ms.
...

</code></pre></div></div>

<h2 id="implementation-details">Implementation details</h2>

<p>The Ping Node and the Pong Node are implemented in two classes <code class="language-plaintext highlighter-rouge">PingNode</code> (see <a href="https://github.com/ros2/examples/tree/rolling/rclcpp/executors/cbg_executor/include/examples_rclcpp_cbg_executor/ping_node.hpp">ping_node.hpp</a>) and <code class="language-plaintext highlighter-rouge">PongNode</code> (see <a href="https://github.com/ros2/examples/tree/rolling/rclcpp/executors/cbg_executor/include/examples_rclcpp_cbg_executor/pong_node.hpp">pong_node.hpp</a>), respectively. In addition to the mentioned timer and subscriptions, the PingNode class provides a function <code class="language-plaintext highlighter-rouge">print_statistics()</code> to print statistics on the number of sent and received messages on each path and the average round trip times. To burn the specified number of CPU cycles, the PongNode class contains a function <code class="language-plaintext highlighter-rouge">burn_cpu_cycles(duration)</code> to simulate a given processing time before replying with a pong.</p>

<p>The Ping and Pong nodes, the two executors, etc. are composed and configured in the <code class="language-plaintext highlighter-rouge">main(..)</code> function of <a href="https://github.com/ros2/examples/tree/rolling/rclcpp/executors/cbg_executor/src/main.cpp">main.cpp</a>. This function also starts and ends the experiment for a duration of 10 seconds and prints out the throughput and round trip time (RTT) statistics.</p>

<p>The demo also runs on Windows, where the two threads are prioritized as <em>above normal</em> and <em>below normal</em>, respectively, which does not require elevated privileges. When running the demo on Linux without sudo privileges, a warning is shown but the execution is not stopped.</p>

<h2 id="known-issues">Known issues</h2>

<p>On macOS the core pinning failed silently in our experiments. Please see the function <code class="language-plaintext highlighter-rouge">configure_native_thread(..)</code> in <a href="https://github.com/ros2/examples/tree/rolling/rclcpp/executors/cbg_executor/src/examples_rclcpp_cbg_executor/utilities.hpp">utilities.hpp</a> for details.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-examples_rclcpp_cbg_executor">Changelog for package examples_rclcpp_cbg_executor</h1>

<h2 id="0210-2025-04-28">0.21.0 (2025-04-28)</h2>

<h2 id="0205-2025-04-28">0.20.5 (2025-04-28)</h2>

<ul>
  <li>Use target_link_libraries instead of ament_target_dependencies
(<a href="https://github.com/ros2/examples/issues/404">#404</a>)</li>
  <li>Contributors: Shane Loretz</li>
</ul>

<h2 id="0204-2024-12-20">0.20.4 (2024-12-20)</h2>

<h2 id="0203-2024-11-20">0.20.3 (2024-11-20)</h2>

<h2 id="0202-2024-07-29">0.20.2 (2024-07-29)</h2>

<h2 id="0201-2024-06-17">0.20.1 (2024-06-17)</h2>

<h2 id="0200-2024-04-26">0.20.0 (2024-04-26)</h2>

<h2 id="0193-2024-04-16">0.19.3 (2024-04-16)</h2>

<h2 id="0192-2024-03-28">0.19.2 (2024-03-28)</h2>

<h2 id="0191-2023-07-11">0.19.1 (2023-07-11)</h2>

<h2 id="0190-2023-04-27">0.19.0 (2023-04-27)</h2>

<h2 id="0180-2023-04-11">0.18.0 (2023-04-11)</h2>

<h2 id="0171-2023-03-01">0.17.1 (2023-03-01)</h2>

<h2 id="0170-2023-02-14">0.17.0 (2023-02-14)</h2>

<ul>
  <li>Update the examples to C++17.
(<a href="https://github.com/ros2/examples/issues/353">#353</a>)</li>
  <li>[rolling] Update maintainers - 2022-11-07
(<a href="https://github.com/ros2/examples/issues/352">#352</a>)</li>
  <li>Contributors: Audrow Nash, Chris Lalancette</li>
</ul>

<h2 id="0162-2022-11-02">0.16.2 (2022-11-02)</h2>

<h2 id="0161-2022-09-13">0.16.1 (2022-09-13)</h2>

<h2 id="0160-2022-04-29">0.16.0 (2022-04-29)</h2>

<h2 id="0150-2022-03-01">0.15.0 (2022-03-01)</h2>

<ul>
  <li>Improve scheduling configuration of examples_rclcpp_cbg_executor
package (<a href="https://github.com/ros2/examples/issues/331">#331</a>)</li>
  <li>Added jitter measurement to examples_rclcpp_cbg_executor.
(<a href="https://github.com/ros2/examples/issues/328">#328</a>)</li>
  <li>Contributors: Ralph Lange</li>
</ul>

<h2 id="0140-2022-01-14">0.14.0 (2022-01-14)</h2>

<h2 id="0130-2021-10-18">0.13.0 (2021-10-18)</h2>

<ul>
  <li>Fix deprecated subscriber callbacks
(<a href="https://github.com/ros2/examples/issues/323">#323</a>)</li>
  <li>Contributors: Abrar Rahman Protyasha</li>
</ul>

<h2 id="0120-2021-08-05">0.12.0 (2021-08-05)</h2>

<ul>
  <li>Remove use of get_callback_groups().
(<a href="https://github.com/ros2/examples/issues/320">#320</a>)</li>
  <li>Contributors: Chris Lalancette</li>
</ul>

<h2 id="0112-2021-04-26">0.11.2 (2021-04-26)</h2>

<h2 id="0111-2021-04-12">0.11.1 (2021-04-12)</h2>

<ul>
  <li>Fix clang warnings about type mismatches.
(<a href="https://github.com/ros2/examples/issues/309">#309</a>)</li>
  <li>Contributors: Chris Lalancette</li>
</ul>

<h2 id="0110-2021-04-06">0.11.0 (2021-04-06)</h2>

<ul>
  <li>Support for cbg_executor package on QNX
(<a href="https://github.com/ros2/examples/issues/305">#305</a>)</li>
  <li>Contributors: joshua-qnx</li>
</ul>

<h2 id="0103-2021-03-18">0.10.3 (2021-03-18)</h2>

<ul>
  <li>Demo for callback-group-level executor concept.
(<a href="https://github.com/ros2/examples/issues/302">#302</a>)</li>
  <li>Contributors: Ralph Lange</li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="rolling-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/examples_rclcpp_cbg_executor/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="rolling-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#rolling">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#rolling">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#rolling">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#rolling">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/std_msgs#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/std_msgs#rolling">std_msgs  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No direct system dependencies.</em>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <em>No known dependants.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="rolling-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="rolling-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>examples_rclcpp_cbg_executor</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="rolling-question-list" class="panel-body" style="display: none;"></div>
      <div id="rolling-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/examples_rclcpp_cbg_executor+rolling">here</a>.</p>
      </div>
      <div id="rolling-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/ros2/examples.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/rolling/p/examples_rclcpp_cbg_executor"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/ros2/examples/tree/rolling/rclcpp/executors/cbg_executor"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>github</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/examples_rclcpp_cbg_executor">examples_rclcpp_cbg_executor</a> <small>package from <a style="text-decoration:none" href="/r/examples/github-ros2-examples">examples</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_action_client">

examples_rclcpp_minimal_action_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_action_server">

examples_rclcpp_minimal_action_server
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_composition">

examples_rclcpp_minimal_composition
</a>
            
          
            
            
              <span class="label label-default pkg-label">

examples_rclcpp_cbg_executor
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_multithreaded_executor">

examples_rclcpp_multithreaded_executor
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_client">

examples_rclcpp_minimal_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_service">

examples_rclcpp_minimal_service
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_timer">

examples_rclcpp_minimal_timer
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_publisher">

examples_rclcpp_minimal_publisher
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_subscriber">

examples_rclcpp_minimal_subscriber
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_action_client">

examples_rclpy_minimal_action_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_action_server">

examples_rclpy_minimal_action_server
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_executors">

examples_rclpy_executors
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_guard_conditions">

examples_rclpy_guard_conditions
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_client">

examples_rclpy_minimal_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_service">

examples_rclpy_minimal_service
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_publisher">

examples_rclpy_minimal_publisher
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_subscriber">

examples_rclpy_minimal_subscriber
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_pointcloud_publisher">

examples_rclpy_pointcloud_publisher
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/galactic/p/examples_rclcpp_cbg_executor"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/ros2/examples/tree/galactic/rclcpp/executors/cbg_executor"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="galactic-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#galactic-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#galactic-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#galactic-deps" data-toggle="tab"><span class="label label-primary">5</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#galactic-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#galactic-questions" data-toggle="tab"><span id="galactic-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="galactic-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>0.11.2</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache License 2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Example packages for ROS 2</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros2/examples.git">https://github.com/ros2/examples.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">galactic</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2021-04-26
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/examples/#galactic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/examples/#galactic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/examples/#galactic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Example for multiple Executor instances in one process, using the callback-group-level interface of the Executor class.
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Ralph Lange</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <em>No additional authors.</em>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/ros2/examples/tree/galactic/rclcpp/executors/cbg_executor/README.md" title="Open in git repository">rclcpp/executors/cbg_executor/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="examples_rclcpp_cbg_executor">examples_rclcpp_cbg_executor</h1>

<p>The <em>examples_rclcpp_cbg_executor</em> package provides a demo and test bench for the <em>Callback-group-level Executor</em> concept. This concept was developed in 2018 and has been integrated in ROS 2 mainline in 2020, i.e., is available from ROS 2 Galactic on. It does not add a new Executor but leverages callback groups for refining the Executor API to callback-group-level granularity.</p>

<p>This allows a single node to have callbacks with different real-time requirements assigned to different Executor instances – within one process. Thus, an Executor instance can be dedicated to one or few specific callback groups and the Executor’s thread (or threads) can be prioritized according to the real-time requirements of these groups. For example, all critical callbacks may be handled by an Executor instance based on an thread running at the highest scheduler priority.</p>

<h2 id="introduction-to-demo">Introduction to demo</h2>

<p>The demo comprises a <em>Ping Node</em> and a <em>Pong Node</em> which exchange messages on two communication paths simultaneously. There is a high priority path formed by the topics <em>high_ping</em> and <em>high_pong</em> and a low priority path formed by <em>low_ping</em> and <em>low_pong</em>, respectively.</p>

<p><img src="https://raw.githubusercontent.com/ros2/examples/galactic/rclcpp/executors/cbg_executor/doc/ping_pong_diagram.png" alt=""></p>

<p>The Ping Node sends ping messages on both paths simultaneously at a configurable rate. The Pong Node takes these ping messages and replies each of them. Before sending a reply, it burns a configurable number of CPU cycles (thereby varying the processor load) to simulate some message processing.</p>

<p>All callbacks of the Ping Node (i.e., for the timer for sending ping messages and for the two subscription on high_pong and low_pong) are handled in one callback group and thus Executor instance. However, the two callbacks of the Pong Node that process the incoming ping messages and answer with a pong message are assigned to two different callback groups. In the main function, these two groups are distributed to two Executor instances and threads. Both threads are pinned to the same CPU (No. 0) and thus share its processing power, but with different scheduler priorities following the names <em>high</em> and <em>low</em>.</p>

<h2 id="running-the-demo">Running the demo</h2>

<p>The Ping Node and Pong Node may be either started in one process or in two processes. Please note that on Linux the demo requires sudo privileges to be able to change the thread priorities using <code class="language-plaintext highlighter-rouge">pthread_setschedparam(..)</code>.</p>

<p>Running the two nodes in one process:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>bash
<span class="nb">source</span> /opt/ros/[ROS_DISTRO]/setup.bash
ros2 run examples_rclcpp_cbg_executor ping_pong

</code></pre></div></div>

<p>Example of a typical output - note the zero pongs received on the low prio path:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[INFO] [..] [pong_node]: Running experiment from now on for 10s ...
[INFO] [..] [ping_node]: Both paths: Sent out 982 of configured 1000 pings, i.e. 98%.
[INFO] [..] [ping_node]: High prio path: Received 980 pongs, i.e. for 99% of the pings.
[INFO] [..] [ping_node]: High prio path: Average RTT is 17.2ms.
[INFO] [..] [ping_node]: Low prio path: Received 0 pongs, i.e. for 0% of the pings.
[INFO] [..] [pong_node]: High priority executor thread ran for 9995ms.
[INFO] [..] [pong_node]: Low priority executor thread ran for 0ms.

</code></pre></div></div>

<p>Running the two nodes in separate processes:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>bash
<span class="nb">source</span> /opt/ros/[ROS_DISTRO]/setup.bash
ros2 run examples_rclcpp_cbg_executor ping

</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>bash
<span class="nb">source</span> /opt/ros/[ROS_DISTRO]/setup.bash
ros2 run examples_rclcpp_cbg_executor pong

</code></pre></div></div>

<p>The two processes should be started simultaneously as the experiment runtime is just 10 seconds.</p>

<h2 id="parameters">Parameters</h2>

<p>There are three parameters to configure the experiment:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">ping_period</code> - period (double value in seconds) for sending out pings on the topics high_ping and low_ping simultaneously in the Ping Node.</li>
  <li>
<code class="language-plaintext highlighter-rouge">high_busyloop</code> - duration (double value in seconds) for burning CPU cycles on receiving a message from high_ping in the Pong Node.</li>
  <li>
<code class="language-plaintext highlighter-rouge">low_busyloop</code> - duration (double value in seconds) for burning CPU cycles on receiving a message from low_ping in the Pong Node.</li>
</ul>

<p>The default values are 0.01 seconds for all three parameters.</p>

<p>Example for changing the values on the command line:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run examples_rclcpp_cbg_executor ping_pong <span class="nt">--ros-args</span> <span class="nt">-p</span> ping_period:<span class="o">=</span>0.033 <span class="nt">-p</span> high_busyloop:<span class="o">=</span>0.025

</code></pre></div></div>

<p>With these values, about (0.033s - 0.025s) / 0.010s = 80% of the ping messages on the low prio path should be processed and answered by a pong message:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
[INFO] [..] [ping_node]: Both paths: Sent out 303 of configured 303 pings, i.e. 100%.
[INFO] [..] [ping_node]: High prio path: Received 302 pongs, i.e. for 99% of the pings.
[INFO] [..] [ping_node]: High prio path: Average RTT is 25.2ms.
[INFO] [..] [ping_node]: Low prio path: Received 231 pongs, i.e. for 76% of the pings.
[INFO] [..] [ping_node]: Low prio path: Average RTT is 196.1ms.
...

</code></pre></div></div>

<h2 id="implementation-details">Implementation details</h2>

<p>The Ping Node and the Pong Node are implemented in two classes <code class="language-plaintext highlighter-rouge">PingNode</code> (see <a href="https://github.com/ros2/examples/tree/galactic/rclcpp/executors/cbg_executor/include/examples_rclcpp_cbg_executor/ping_node.hpp">ping_node.hpp</a>) and <code class="language-plaintext highlighter-rouge">PongNode</code> (see <a href="https://github.com/ros2/examples/tree/galactic/rclcpp/executors/cbg_executor/include/examples_rclcpp_cbg_executor/pong_node.hpp">pong_node.hpp</a>), respectively. In addition to the mentioned timer and subscriptions, the PingNode class provides a function <code class="language-plaintext highlighter-rouge">print_statistics()</code> to print statistics on the number of sent and received messages on each path and the average round trip times. To burn the specified number of CPU cycles, the PongNode class contains a function <code class="language-plaintext highlighter-rouge">burn_cpu_cycles(duration)</code> to simulate a given processing time before replying with a pong.</p>

<p>The Ping and Pong nodes, the two executors, etc. are composed and configured in the <code class="language-plaintext highlighter-rouge">main(..)</code> function of <a href="https://github.com/ros2/examples/tree/galactic/rclcpp/executors/cbg_executor/src/main.cpp">main.cpp</a>. This function also starts and ends the experiment for a duration of 10 seconds and prints out the throughput and round trip time (RTT) statistics.</p>

<p>The demo also runs on Windows, where the two threads are prioritized as <em>above normal</em> and <em>below normal</em>, respectively, which does not require elevated privileges. When running the demo on Linux without sudo privileges, a warning is shown but the execution is not stopped.</p>

<h2 id="known-issues">Known issues</h2>

<p>On macOS the core pinning failed silently in our experiments. Please see the function <code class="language-plaintext highlighter-rouge">configure_native_thread(..)</code> in <a href="https://github.com/ros2/examples/tree/galactic/rclcpp/executors/cbg_executor/src/examples_rclcpp_cbg_executor/utilities.hpp">utilities.hpp</a> for details.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-examples_rclcpp_cbg_executor">Changelog for package examples_rclcpp_cbg_executor</h1>

<h2 id="0112-2021-04-26">0.11.2 (2021-04-26)</h2>

<h2 id="0111-2021-04-12">0.11.1 (2021-04-12)</h2>

<ul>
  <li>Fix clang warnings about type mismatches.
(<a href="https://github.com/ros2/examples/issues/309">#309</a>)</li>
  <li>Contributors: Chris Lalancette</li>
</ul>

<h2 id="0110-2021-04-06">0.11.0 (2021-04-06)</h2>

<ul>
  <li>Support for cbg_executor package on QNX
(<a href="https://github.com/ros2/examples/issues/305">#305</a>)</li>
  <li>Contributors: joshua-qnx</li>
</ul>

<h2 id="0103-2021-03-18">0.10.3 (2021-03-18)</h2>

<ul>
  <li>Demo for callback-group-level executor concept.
(<a href="https://github.com/ros2/examples/issues/302">#302</a>)</li>
  <li>Contributors: Ralph Lange</li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/examples_rclcpp_cbg_executor/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#galactic">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#galactic">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#galactic">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#galactic">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/std_msgs#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/std_msgs#galactic">std_msgs  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No direct system dependencies.</em>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <em>No known dependants.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>examples_rclcpp_cbg_executor</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="galactic-question-list" class="panel-body" style="display: none;"></div>
      <div id="galactic-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/examples_rclcpp_cbg_executor+galactic">here</a>.</p>
      </div>
      <div id="galactic-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/ros2/examples.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/galactic/p/examples_rclcpp_cbg_executor"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/ros2/examples/tree/galactic/rclcpp/executors/cbg_executor"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/examples_rclcpp_cbg_executor">examples_rclcpp_cbg_executor</a> <small>package from <a style="text-decoration:none" href="/r/examples/github-ros2-examples">examples</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/launch_testing_examples">

launch_testing_examples
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_action_client">

examples_rclcpp_minimal_action_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_action_server">

examples_rclcpp_minimal_action_server
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_composition">

examples_rclcpp_minimal_composition
</a>
            
          
            
            
              <span class="label label-default pkg-label">

examples_rclcpp_cbg_executor
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_multithreaded_executor">

examples_rclcpp_multithreaded_executor
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_async_client">

examples_rclcpp_async_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_client">

examples_rclcpp_minimal_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_service">

examples_rclcpp_minimal_service
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_timer">

examples_rclcpp_minimal_timer
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_publisher">

examples_rclcpp_minimal_publisher
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_minimal_subscriber">

examples_rclcpp_minimal_subscriber
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclcpp_wait_set">

examples_rclcpp_wait_set
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_action_client">

examples_rclpy_minimal_action_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_action_server">

examples_rclpy_minimal_action_server
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_executors">

examples_rclpy_executors
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_guard_conditions">

examples_rclpy_guard_conditions
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_client">

examples_rclpy_minimal_client
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_service">

examples_rclpy_minimal_service
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_publisher">

examples_rclpy_minimal_publisher
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_minimal_subscriber">

examples_rclpy_minimal_subscriber
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/examples_rclpy_pointcloud_publisher">

examples_rclpy_pointcloud_publisher
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/iron/p/examples_rclcpp_cbg_executor"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/ros2/examples/tree/iron/rclcpp/executors/cbg_executor"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="iron-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#iron-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#iron-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#iron-deps" data-toggle="tab"><span class="label label-primary">5</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#iron-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#iron-questions" data-toggle="tab"><span id="iron-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="iron-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>0.18.2</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache License 2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Example packages for ROS 2</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros2/examples.git">https://github.com/ros2/examples.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">iron</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-11-08
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/examples/#iron-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/examples/#iron-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/examples/#iron-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Example for multiple Executor instances in one process, using the callback-group-level interface of the Executor class.
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Aditya Pande</li>
                
                  <li>Alejandro Hernandez Cordero</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Ralph Lange</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/ros2/examples/tree/iron/rclcpp/executors/cbg_executor/README.md" title="Open in git repository">rclcpp/executors/cbg_executor/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="examples_rclcpp_cbg_executor">examples_rclcpp_cbg_executor</h1>

<p>The <em>examples_rclcpp_cbg_executor</em> package provides a demo and test bench for the <em>Callback-group-level Executor</em> concept. This concept was developed in 2018 and has been integrated in ROS 2 mainline in 2020, i.e., is available from ROS 2 Galactic on. It does not add a new Executor but leverages callback groups for refining the Executor API to callback-group-level granularity.</p>

<p>This allows a single node to have callbacks with different real-time requirements assigned to different Executor instances – within one process. Thus, an Executor instance can be dedicated to one or few specific callback groups and the Executor’s thread (or threads) can be prioritized according to the real-time requirements of these groups. For example, all critical callbacks may be handled by an Executor instance based on an thread running at the highest scheduler priority.</p>

<h2 id="introduction-to-demo">Introduction to demo</h2>

<p>The demo comprises a <em>Ping Node</em> and a <em>Pong Node</em> which exchange messages on two communication paths simultaneously. There is a high priority path formed by the topics <em>high_ping</em> and <em>high_pong</em> and a low priority path formed by <em>low_ping</em> and <em>low_pong</em>, respectively.</p>

<p><img src="https://raw.githubusercontent.com/ros2/examples/iron/rclcpp/executors/cbg_executor/doc/ping_pong_diagram.png" alt=""></p>

<p>The Ping Node sends ping messages on both paths simultaneously at a configurable rate. The Pong Node takes these ping messages and replies each of them. Before sending a reply, it burns a configurable number of CPU cycles (thereby varying the processor load) to simulate some message processing.</p>

<p>All callbacks of the Ping Node (i.e., for the timer for sending ping messages and for the two subscription on high_pong and low_pong) are handled in one callback group and thus Executor instance. However, the two callbacks of the Pong Node that process the incoming ping messages and answer with a pong message are assigned to two different callback groups. In the main function, these two groups are distributed to two Executor instances and threads. Both threads are pinned to the same CPU (No. 0) and thus share its processing power, but with different scheduler priorities following the names <em>high</em> and <em>low</em>.</p>

<h2 id="running-the-demo">Running the demo</h2>

<p>The Ping Node and Pong Node may be either started in one process or in two processes. Please note that on Linux the demo requires sudo privileges to be able to change the thread priorities using <code class="language-plaintext highlighter-rouge">pthread_setschedparam(..)</code>.</p>

<p>Running the two nodes in one process:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>bash
<span class="nb">source</span> /opt/ros/[ROS_DISTRO]/setup.bash
ros2 run examples_rclcpp_cbg_executor ping_pong

</code></pre></div></div>

<p>Example of a typical output - note the zero pongs received on the low prio path:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[INFO] [..] [pong_node]: Running experiment from now on for 10 seconds ...
[INFO] [..] [ping_node]: Both paths: Sent out 953 of configured 1000 pings, i.e. 95%.
[INFO] [..] [ping_node]: High prio path: Received 951 pongs, i.e. for 99% of the pings.
[INFO] [..] [ping_node]: High prio path: Average RTT is 14.0ms.
[INFO] [..] [ping_node]: High prio path: Jitter of RTT is 7.460ms.
[INFO] [..] [ping_node]: Low prio path: Received 0 pongs, i.e. for 0% of the pings.
[INFO] [..] [pong_node]: High priority executor thread ran for 9542ms.
[INFO] [..] [pong_node]: Low priority executor thread ran for 0ms.

</code></pre></div></div>

<p>Note: On Linux, the two Executor threads, which are both scheduled under <code class="language-plaintext highlighter-rouge">SCHED_FIFO</code>, can consume only 95% of the CPU time due to <a href="https://wiki.linuxfoundation.org/realtime/documentation/technical_basics/sched_rt_throttling">RT throttling</a>.</p>

<p>Running the two nodes in separate processes:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>bash
<span class="nb">source</span> /opt/ros/[ROS_DISTRO]/setup.bash
ros2 run examples_rclcpp_cbg_executor ping

</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>bash
<span class="nb">source</span> /opt/ros/[ROS_DISTRO]/setup.bash
ros2 run examples_rclcpp_cbg_executor pong

</code></pre></div></div>

<p>The two processes should be started simultaneously as the experiment runtime is just 10 seconds.</p>

<h2 id="parameters">Parameters</h2>

<p>There are three parameters to configure the experiment:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">ping_period</code> - period (double value in seconds) for sending out pings on the topics high_ping and low_ping simultaneously in the Ping Node.</li>
  <li>
<code class="language-plaintext highlighter-rouge">high_busyloop</code> - duration (double value in seconds) for burning CPU cycles on receiving a message from high_ping in the Pong Node.</li>
  <li>
<code class="language-plaintext highlighter-rouge">low_busyloop</code> - duration (double value in seconds) for burning CPU cycles on receiving a message from low_ping in the Pong Node.</li>
</ul>

<p>The default values are 0.01 seconds for all three parameters.</p>

<p>Example for changing the values on the command line:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run examples_rclcpp_cbg_executor ping_pong <span class="nt">--ros-args</span> <span class="nt">-p</span> ping_period:<span class="o">=</span>0.033 <span class="nt">-p</span> high_busyloop:<span class="o">=</span>0.025

</code></pre></div></div>

<p>With these values, about (0.033s - 0.025s) / 0.010s = 80% of the ping messages on the low prio path should be processed and answered by a pong message:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
[INFO] [..] [ping_node]: Both paths: Sent out 294 of configured 303 pings, i.e. 97%.
[INFO] [..] [ping_node]: High prio path: Received 293 pongs, i.e. for 99% of the pings.
[INFO] [..] [ping_node]: High prio path: Average RTT is 26.2ms.
[INFO] [..] [ping_node]: High prio path: Jitter of RTT is 7.654ms.
[INFO] [..] [ping_node]: Low prio path: Received 216 pongs, i.e. for 73% of the pings.
[INFO] [..] [ping_node]: Low prio path: Average RTT is 202.5ms.
[INFO] [..] [ping_node]: Low prio path: Jitter of RTT is 36.301ms.
...

</code></pre></div></div>

<h2 id="implementation-details">Implementation details</h2>

<p>The Ping Node and the Pong Node are implemented in two classes <code class="language-plaintext highlighter-rouge">PingNode</code> (see <a href="https://github.com/ros2/examples/tree/iron/rclcpp/executors/cbg_executor/include/examples_rclcpp_cbg_executor/ping_node.hpp">ping_node.hpp</a>) and <code class="language-plaintext highlighter-rouge">PongNode</code> (see <a href="https://github.com/ros2/examples/tree/iron/rclcpp/executors/cbg_executor/include/examples_rclcpp_cbg_executor/pong_node.hpp">pong_node.hpp</a>), respectively. In addition to the mentioned timer and subscriptions, the PingNode class provides a function <code class="language-plaintext highlighter-rouge">print_statistics()</code> to print statistics on the number of sent and received messages on each path and the average round trip times. To burn the specified number of CPU cycles, the PongNode class contains a function <code class="language-plaintext highlighter-rouge">burn_cpu_cycles(duration)</code> to simulate a given processing time before replying with a pong.</p>

<p>The Ping and Pong nodes, the two executors, etc. are composed and configured in the <code class="language-plaintext highlighter-rouge">main(..)</code> function of <a href="https://github.com/ros2/examples/tree/iron/rclcpp/executors/cbg_executor/src/main.cpp">main.cpp</a>. This function also starts and ends the experiment for a duration of 10 seconds and prints out the throughput and round trip time (RTT) statistics.</p>

<p>The demo also runs on Windows, where the two threads are prioritized as <em>above normal</em> and <em>below normal</em>, respectively, which does not require elevated privileges. When running the demo on Linux without sudo privileges, a warning is shown but the execution is not stopped.</p>

<h2 id="known-issues">Known issues</h2>

<p>On macOS the core pinning failed silently in our experiments. Please see the function <code class="language-plaintext highlighter-rouge">configure_native_thread(..)</code> in <a href="https://github.com/ros2/examples/tree/iron/rclcpp/executors/cbg_executor/src/examples_rclcpp_cbg_executor/utilities.hpp">utilities.hpp</a> for details.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-examples_rclcpp_cbg_executor">Changelog for package examples_rclcpp_cbg_executor</h1>

<h2 id="0182-2024-11-08">0.18.2 (2024-11-08)</h2>

<h2 id="0181-2024-07-10">0.18.1 (2024-07-10)</h2>

<h2 id="0180-2023-04-11">0.18.0 (2023-04-11)</h2>

<h2 id="0171-2023-03-01">0.17.1 (2023-03-01)</h2>

<h2 id="0170-2023-02-14">0.17.0 (2023-02-14)</h2>

<ul>
  <li>Update the examples to C++17.
(<a href="https://github.com/ros2/examples/issues/353">#353</a>)</li>
  <li>[rolling] Update maintainers - 2022-11-07
(<a href="https://github.com/ros2/examples/issues/352">#352</a>)</li>
  <li>Contributors: Audrow Nash, Chris Lalancette</li>
</ul>

<h2 id="0162-2022-11-02">0.16.2 (2022-11-02)</h2>

<h2 id="0161-2022-09-13">0.16.1 (2022-09-13)</h2>

<h2 id="0160-2022-04-29">0.16.0 (2022-04-29)</h2>

<h2 id="0150-2022-03-01">0.15.0 (2022-03-01)</h2>

<ul>
  <li>Improve scheduling configuration of examples_rclcpp_cbg_executor
package (<a href="https://github.com/ros2/examples/issues/331">#331</a>)</li>
  <li>Added jitter measurement to examples_rclcpp_cbg_executor.
(<a href="https://github.com/ros2/examples/issues/328">#328</a>)</li>
  <li>Contributors: Ralph Lange</li>
</ul>

<h2 id="0140-2022-01-14">0.14.0 (2022-01-14)</h2>

<h2 id="0130-2021-10-18">0.13.0 (2021-10-18)</h2>

<ul>
  <li>Fix deprecated subscriber callbacks
(<a href="https://github.com/ros2/examples/issues/323">#323</a>)</li>
  <li>Contributors: Abrar Rahman Protyasha</li>
</ul>

<h2 id="0120-2021-08-05">0.12.0 (2021-08-05)</h2>

<ul>
  <li>Remove use of get_callback_groups().
(<a href="https://github.com/ros2/examples/issues/320">#320</a>)</li>
  <li>Contributors: Chris Lalancette</li>
</ul>

<h2 id="0112-2021-04-26">0.11.2 (2021-04-26)</h2>

<h2 id="0111-2021-04-12">0.11.1 (2021-04-12)</h2>

<ul>
  <li>Fix clang warnings about type mismatches.
(<a href="https://github.com/ros2/examples/issues/309">#309</a>)</li>
  <li>Contributors: Chris Lalancette</li>
</ul>

<h2 id="0110-2021-04-06">0.11.0 (2021-04-06)</h2>

<ul>
  <li>Support for cbg_executor package on QNX
(<a href="https://github.com/ros2/examples/issues/305">#305</a>)</li>
  <li>Contributors: joshua-qnx</li>
</ul>

<h2 id="0103-2021-03-18">0.10.3 (2021-03-18)</h2>

<ul>
  <li>Demo for callback-group-level executor concept.
(<a href="https://github.com/ros2/examples/issues/302">#302</a>)</li>
  <li>Contributors: Ralph Lange</li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/examples_rclcpp_cbg_executor/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#iron">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#iron">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#iron">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#iron">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/std_msgs#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/std_msgs#iron">std_msgs  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No direct system dependencies.</em>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <em>No known dependants.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>examples_rclcpp_cbg_executor</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="iron-question-list" class="panel-body" style="display: none;"></div>
      <div id="iron-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/examples_rclcpp_cbg_executor+iron">here</a>.</p>
      </div>
      <div id="iron-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/ros2/examples.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/iron/p/examples_rclcpp_cbg_executor"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/ros2/examples/tree/iron/rclcpp/executors/cbg_executor"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>



<script id="question-list-template" type="text/html">
  <p>
    Browse <a href="https://robotics.stackexchange.com/questions/tagged/examples_rclcpp_cbg_executor?tab=Newest">recent questions</a>
    or see the <a href="https://robotics.stackexchange.com/questions/tagged/examples_rclcpp_cbg_executor?tab=Votes">highest voted ones</a>.
  </p>
  
  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">Title</th>
        <th scope="col">Answered?</th>
        <th scope="col">Created</th>
        <th scope="col">Active</th>
      </tr>
    </thead>
    <tbody>
      {{#questions}}
      <tr>
        <th scope="row"><a href="{{link}}">{{title}}</a><br><small>Tags: {{strtags}}</small></th>
        <th>{{answered}}</th>
        <th>{{created}}</th>
        <th>{{active}}</th>
      </tr>
      {{/questions}}
    </tbody>
  </table>
  {{#has_more}}
  <hr>
  <h4>Additional questions are available at
    <a href="https://robotics.stackexchange.com/questions/tagged/{{name}}?tab=Newest">Robotics Stack Exchange</a>
  </h4>
  {{/has_more}}
  
</script>

<script type="text/javascript" src="/js/mustache.js"></script>
<script type="text/javascript">
  jQuery(function() {
    jQuery.getJSON(url="https://api.stackexchange.com/2.3/questions?order=desc&site=robotics" +
                       "&tagged=examples_rclcpp_cbg_executor&pagesize=50&sort=activity")
    .done(function(feed) {
      if (feed.items.length > 0) {
        var question_count_str = (feed.has_more ? '>' : '') + String(feed.items.length)
        const questions = feed.items.map(
          function(question) {
            question.id = Math.round(Math.random() * 99999.0);
            question.created = (new Date(question.creation_date * 1000)).toDateString()
            question.active = (new Date(question.last_activity_date * 1000)).toDateString()
            question.answered = question.is_answered ? "Yes" : "No"
            question.strtags = question.tags.join(' ')
            return question;
          });
        const template = jQuery("#question-list-template").text();
        Mustache.parse(template);
        var rendered = Mustache.render(
          template, 
          { questions: questions,
            has_more: feed.has_more,
            name: "examples_rclcpp_cbg_executor"
          }
        );
      }
      //   TODO(tfoote) Resolve images
      //   jQuery("#-question-list img").each(function() {
      //     if (jQuery(this).attr("src").startsWith("/upfiles")) {
      //        jQuery(this).attr("src", "https://answers.ros.org" + jQuery(this).attr("src"));
      //     }
      //   });
      
      if (feed.items.length > 0) {
        jQuery("#humble-question-list").html(rendered);
        jQuery("#humble-question-list").show();
      } else {
        jQuery("#humble-no-question-list").show();
      }
      jQuery("#humble-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#jazzy-question-list").html(rendered);
        jQuery("#jazzy-question-list").show();
      } else {
        jQuery("#jazzy-no-question-list").show();
      }
      jQuery("#jazzy-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#kilted-question-list").html(rendered);
        jQuery("#kilted-question-list").show();
      } else {
        jQuery("#kilted-no-question-list").show();
      }
      jQuery("#kilted-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#rolling-question-list").html(rendered);
        jQuery("#rolling-question-list").show();
      } else {
        jQuery("#rolling-no-question-list").show();
      }
      jQuery("#rolling-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#github-question-list").html(rendered);
        jQuery("#github-question-list").show();
      } else {
        jQuery("#github-no-question-list").show();
      }
      jQuery("#github-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#noetic-question-list").html(rendered);
        jQuery("#noetic-question-list").show();
      } else {
        jQuery("#noetic-no-question-list").show();
      }
      jQuery("#noetic-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#galactic-question-list").html(rendered);
        jQuery("#galactic-question-list").show();
      } else {
        jQuery("#galactic-no-question-list").show();
      }
      jQuery("#galactic-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#iron-question-list").html(rendered);
        jQuery("#iron-question-list").show();
      } else {
        jQuery("#iron-no-question-list").show();
      }
      jQuery("#iron-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#melodic-question-list").html(rendered);
        jQuery("#melodic-question-list").show();
      } else {
        jQuery("#melodic-no-question-list").show();
      }
      jQuery("#melodic-questions-count").text(question_count_str);
      
    })
    .fail(function(jqxhr, textStatus, error) {
      console.error("Failed to get question data: " + jqxhr.responseText);
      
      jQuery("#humble-get-question-fail").show();
      
      jQuery("#jazzy-get-question-fail").show();
      
      jQuery("#kilted-get-question-fail").show();
      
      jQuery("#rolling-get-question-fail").show();
      
      jQuery("#github-get-question-fail").show();
      
      jQuery("#noetic-get-question-fail").show();
      
      jQuery("#galactic-get-question-fail").show();
      
      jQuery("#iron-get-question-fail").show();
      
      jQuery("#melodic-get-question-fail").show();
      
    });
  });
</script>


<script type="text/javascript">
  $(document).ready(function() {
    setupDistroSwitch("humble");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
