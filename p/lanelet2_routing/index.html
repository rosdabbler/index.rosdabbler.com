<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Package: lanelet2_routing</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/p/lanelet2_routing/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top: 20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/?search_packages=true">Packages</a></li>
        <li class="active">lanelet2_routing</li>
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-primary" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-primary" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-primary" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-primary" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-primary" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-primary" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class=" older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class=" older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class=" older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/lanelet2_routing">lanelet2_routing</a> <small>package from <a style="text-decoration:none" href="/r/lanelet2/github-fzi-forschungszentrum-informatik-lanelet2">lanelet2</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2">

lanelet2
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_core">

lanelet2_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_examples">

lanelet2_examples
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_io">

lanelet2_io
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_maps">

lanelet2_maps
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_matching">

lanelet2_matching
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_projection">

lanelet2_projection
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_python">

lanelet2_python
</a>
            
          
            
            
              <span class="label label-default pkg-label">

lanelet2_routing
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_traffic_rules">

lanelet2_traffic_rules
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_validation">

lanelet2_validation
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/humble/p/lanelet2_routing"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="humble-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#humble-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#humble-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#humble-deps" data-toggle="tab"><span class="label label-primary">7</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#humble-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#humble-questions" data-toggle="tab"><span id="humble-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="humble-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>1.2.2</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-info">
                  
                    CATKIN</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Map handling framework for automated driving</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/fzi-forschungszentrum-informatik/lanelet2.git">https://github.com/fzi-forschungszentrum-informatik/lanelet2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-03-03
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/lanelet2/#humble-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/lanelet2/#humble-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/lanelet2/#humble-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Routing module for lanelet2
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2.git">Repository</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Fabian Immel</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Matthias Mayr</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing/README.md" title="Open in git repository">lanelet2_routing/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="lanelet2-routing">Lanelet2 routing</h1>

<p>The routing module for lanelet2.</p>

<p>For a short version of this you can also look at <a href="https://htmlpreview.github.io/?https://github.com/fzi-forschungszentrum-informatik/Lanelet2/blob/master/lanelet2_routing/doc/lanelet2_routing.html">the presentation</a>. If some images do not render correctly, please clone the repository and open the html file in your browser.</p>

<p>This readme covers some basics. The API offers more than that.</p>

<h1 id="1-components-and-vocabulary">1. Components and Vocabulary</h1>
<h2 id="how-to-create-a-routing-graph">How to create a Routing Graph</h2>
<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/components.png" alt=""></p>

<p>The needed components to create a routing graph are:</p>

<p><strong>Routing Cost Modules:</strong></p>
<ul>
  <li>They generically determine the routing cost for travelling along a lanelet/area</li>
  <li>Can be e.g. length, travel time</li>
  <li>You can dynamically select between them when querying the routing graph</li>
  <li><strong>You can easily plug in your own routing cost calculation</strong></li>
  <li><em>Influences the prefered path</em></li>
</ul>

<p><strong>Traffic Rules for a Specific Participant</strong> (see <a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/tree/master/lanelet2_traffic_rules/README.md">lanelet2_traffic_rules</a>)</p>
<ul>
  <li>Determines which lanelets/areas are passable</li>
  <li><em>Influences the possible paths</em></li>
</ul>

<p><strong>Lanelet Map:</strong> (see <a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing/../lanelet2_core/README.md">lanelet2_core</a>)</p>
<ul>
  <li>Map with Lanelets, Areas, Regulatory Elements, …</li>
</ul>

<h2 id="relations">Relations</h2>
<p>Lanelets that are part of a routing graph can have relations to each other:
<img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/max-hose.png" alt=""></p>

<p>The possible relations are:
    * <code class="language-plaintext highlighter-rouge">left</code>, <code class="language-plaintext highlighter-rouge">right</code> (reachable via lane change)
    * <code class="language-plaintext highlighter-rouge">adjacent left</code>, <code class="language-plaintext highlighter-rouge">adjacent right</code> (lanelets that are neighbours but not reachable via lane change)
    * <code class="language-plaintext highlighter-rouge">succeeding</code> (relation between two subsequent lanelets)
    * <code class="language-plaintext highlighter-rouge">conflicting</code> (intersecting lanelets/areas)
    * <code class="language-plaintext highlighter-rouge">area</code> (reachable area to lanelet/area relation)</p>

<h2 id="route-vs-path-vs-sequence">Route vs Path vs Sequence</h2>
<p>When querying data in the routing graph, you will come across the terms <em>route</em>, <em>path</em> and <em>sequence</em>. In contrast to a simple set of lanelets (data-wise a vector of lanelets), they have a special meaning and are data-wise different classes.</p>

<p>A <em>route</em> means all the lanelets that can be used to a destination without driving a different road. They can be connected by a generic sequence of lane changes and successors.</p>

<p>A <em>path</em> (LaneletPath or LaneletOrAreaPath) is an ordered list of Lanelets/Areas that lead to the destination. They can be connected by lane changes.</p>

<p>A <em>sequence</em> (LaneletSequence) is a sequence of subsequent Lanelets that is not separated by a lane change (think of it as a <em>lane</em>). It does not necessary lead to a destination, instead it ends when a lane change is required. In the example image, the lanelets A, D, B form a valid <em>sequence</em> (and also a valid <em>path</em>), while the lanelets A, D, E are a valid <em>path</em>, but not a valid <em>sequence</em>.</p>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/shortest_path_and_route.png" alt=""></p>

<h1 id="2-code-usage">2. Code Usage</h1>

<h2 id="create-a-routing-graph">Create a Routing Graph</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="k">namespace</span> <span class="n">lanelet</span><span class="p">;</span>

<span class="c1">// Load a map</span>
<span class="n">LaneletMapPtr</span> <span class="n">map</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s">"map.osm"</span><span class="p">,</span> <span class="n">Origin</span><span class="p">({</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">}));</span> <span class="c1">// origin has to be close to the map data in lat/lon coordinates</span>

<span class="c1">// Initialize traffic rules</span>
<span class="n">TrafficRulesPtr</span> <span class="n">trafficRules</span><span class="p">{</span><span class="n">TrafficRulesFactory</span><span class="o">::</span><span class="n">instance</span><span class="p">().</span><span class="n">create</span><span class="p">(</span><span class="n">Locations</span><span class="o">::</span><span class="n">Germany</span><span class="p">,</span> <span class="n">Participants</span><span class="o">::</span><span class="n">Vehicle</span><span class="p">)};</span>

<span class="c1">// Optional: Initalize routing costs</span>
<span class="kt">double</span> <span class="n">laneChangeCost</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">RoutingCostPtrs</span> <span class="n">costPtrs</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">RoutingCostDistance</span><span class="o">&gt;</span><span class="p">(</span><span class="n">laneChangeCost</span><span class="p">)};</span>

<span class="c1">// Optional: Initialize config for routing graph:</span>
<span class="n">RoutingGraph</span><span class="o">::</span><span class="n">Configuration</span> <span class="n">routingGraphConf</span><span class="p">;</span>
<span class="n">routingGraphConf</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="n">RoutingGraph</span><span class="o">::</span><span class="n">ParticipantHeight</span><span class="p">,</span> <span class="n">Attribute</span><span class="p">(</span><span class="s">"2."</span><span class="p">)));</span>

<span class="c1">// Create routing graph</span>
<span class="n">RoutingGraphPtr</span> <span class="n">graph</span> <span class="o">=</span> <span class="n">RoutingGraph</span><span class="o">::</span><span class="n">build</span><span class="p">(</span><span class="n">map</span><span class="p">,</span> <span class="n">trafficRules</span> <span class="cm">/*, costPtrs, routingGraphConf*/</span><span class="p">);</span>

</code></pre></div></div>
<ul>
  <li>The traffic rules object represents the view from which the map will be interpreted. Doing routing with vehicle traffic
rules will yield different results than routing with e.g. bicycle traffic rules.</li>
  <li>Routing for bicycles might include lanelets that are not available to (motorized)vehicles and vice versa.</li>
</ul>

<p>The python interface works similarly:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">lanelet2</span>
<span class="nb">map</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="sh">"</span><span class="s">map.osm</span><span class="sh">"</span><span class="p">,</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nc">Origin</span><span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">trafficRules</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="n">Locations</span><span class="p">.</span><span class="n">Germany</span><span class="p">,</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="n">Participants</span><span class="p">.</span><span class="n">Vehicle</span><span class="p">)</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">routing</span><span class="p">.</span><span class="nc">RoutingGraph</span><span class="p">(</span><span class="nb">map</span><span class="p">,</span> <span class="n">trafficRules</span><span class="p">)</span>

</code></pre></div></div>
<h2 id="get-a-shortest-path">Get a shortest path</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Optional</span><span class="o">&lt;</span><span class="n">routing</span><span class="o">::</span><span class="n">LaneletPath</span><span class="o">&gt;</span> <span class="n">shortestPath</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">shortestPath</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">);</span>

</code></pre></div></div>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">Optional</code> will be uninitialized (false) if there’s no path</li>
  <li>there’s also <code class="language-plaintext highlighter-rouge">shortestPathWithVia</code>
</li>
</ul>

<p>in python:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">shortestPath</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nf">shortestPath</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">)</span>

</code></pre></div></div>
<p>In python, shortestPath simply returns <code class="language-plaintext highlighter-rouge">None</code> if there is no path.</p>

<h2 id="get-and-write-a-route">Get and write a route</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Route</span><span class="o">&gt;</span> <span class="n">route</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">getRoute</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">route</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">LaneletSubmapConstPtr</span> <span class="n">routeMap</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">laneletSubmap</span><span class="p">();</span>
        <span class="n">write</span><span class="p">(</span><span class="s">"route.osm"</span><span class="p">,</span> <span class="o">*</span><span class="n">routeMap</span><span class="o">-&gt;</span><span class="n">laneletMap</span><span class="p">(),</span> <span class="n">Origin</span><span class="p">({</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">}));</span>
    <span class="p">}</span>

</code></pre></div></div>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">Optional</code> will be uninitialized (false) if there’s no route</li>
</ul>

<p>Note that there is a semantic difference between a <code class="language-plaintext highlighter-rouge">LaneletSubmap</code> and a <code class="language-plaintext highlighter-rouge">LaneletMap</code>. While a LaneletSubmap only contains
the things you explicitly added, the <code class="language-plaintext highlighter-rouge">LaneletMap</code> also contains all the things referred by them (the Points, Linestrings, things referred by RegulatoryElements).
The <code class="language-plaintext highlighter-rouge">LaneletSubmap</code> in this case only contains the Lanelets of the route. But since this is not sufficient for writing, you need to transform it into a regular <code class="language-plaintext highlighter-rouge">LaneletMap</code> first.</p>

<p>The written map will therefore not only contain the Lanelets but also their RegulatoryElements.
If these RegulatoryElements contain other Lanelets, these Lanelets will be part of the written map as well, even if they are not on the route.</p>

<p>in python:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">route</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nf">getRoute</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">)</span>
<span class="k">if</span> <span class="n">route</span><span class="p">:</span>
    <span class="n">laneletSubmap</span> <span class="o">=</span> <span class="n">route</span><span class="p">.</span><span class="nf">laneletSubmap</span><span class="p">()</span>
    <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">route.osm</span><span class="sh">"</span><span class="p">,</span> <span class="n">laneletSubmap</span><span class="p">.</span><span class="nf">laneletMap</span><span class="p">(),</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nc">Origin</span><span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">)))</span>

</code></pre></div></div>

<h2 id="get-a-reachable-set-of-lanelets">Get a reachable set of lanelets</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">maxRoutingCost</span><span class="p">{</span><span class="mi">100</span><span class="p">};</span>
<span class="n">ConstLanelets</span> <span class="n">reachableSet</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">reachableSet</span><span class="p">(</span><span class="n">lanelet</span><span class="p">,</span> <span class="n">maxRoutingCost</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">);</span>

</code></pre></div></div>

<h2 id="left-right-following-lanelets">Left, Right, Following Lanelets</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get routable left lanelet if it exists</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLanelet</span><span class="o">&gt;</span> <span class="n">left</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>
<span class="c1">// Get non-routable left lanelet if it exists</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLanelet</span><span class="o">&gt;</span> <span class="n">adjacentLeft</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">adjacentLeft</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>
<span class="c1">// Get following lanelets</span>
<span class="n">ConstLanelets</span> <span class="n">following</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">following</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>

</code></pre></div></div>
<ul>
  <li>Also available: <code class="language-plaintext highlighter-rouge">right</code>, <code class="language-plaintext highlighter-rouge">adjacentRight</code>, <code class="language-plaintext highlighter-rouge">lefts</code>, <code class="language-plaintext highlighter-rouge">rights</code>, <code class="language-plaintext highlighter-rouge">conflicting</code>
</li>
</ul>

<p>Alternatively:
 or queries that return relations:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get relations to all left lanelets</span>
<span class="n">LaneletRelations</span> <span class="n">leftRelations</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">leftRelations</span><span class="p">(</span>
                                                <span class="n">fromLanelet</span><span class="p">);</span>

</code></pre></div></div>
<p>There’s <code class="language-plaintext highlighter-rouge">leftRelations</code> that returns a vector of pairs of LaneletRelations whereas RelationType can be ‘left’ or ‘adjacentLeft’ in this case</p>

<h2 id="more">More</h2>

<p>This is just a quick walkthrough. Advanced examples can be found in <a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing/../lanelet2_examples/README.md">lanelet2_examples</a>.</p>

<h1 id="3-export-and-debugging-routing-graphs">3. Export and Debugging Routing Graphs</h1>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/lanelet_map_routing_graph.png" alt=""></p>

<h2 id="laneletmap-with-routing-information">LaneletMap with Routing Information</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">LaneletMapConstPtr</span> <span class="n">debugLaneletMap</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">getDebugLaneletMap</span><span class="p">(</span><span class="n">RoutingCostId</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<span class="n">write</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">"routing_graph.osm"</span><span class="p">),</span> <span class="o">*</span><span class="n">debugLaneletMap</span><span class="p">);</span>

</code></pre></div></div>
<p>This one is best viewed in <a href="https://josm.openstreetmap.de/">JOSM</a> and using a custom map style css which is to be found in <code class="language-plaintext highlighter-rouge">res/routing.mapcss</code>. <a href="https://josm.openstreetmap.de/attachment/wiki/Styles/addstyle.gif">This gif</a> shows, how to add a style to JOSM, except that one needs to press the <code class="language-plaintext highlighter-rouge">+</code> button in the configuration menu and specify the file.</p>

<p>Most of the information is to be found in the attributes. The line strings that connect lanelets do have a direction. The name of the forth-direction is generally to be found left/above the line and the reverse relation right/under the string.</p>

<h2 id="dot-graphviz-and-graphml-xml-based-file-export">DOT (GraphViz) and GraphML (xml-based) file export</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">graph</span><span class="o">-&gt;</span><span class="n">exportGraphViz</span><span class="p">(</span><span class="s">"~/graph.gv"</span><span class="p">);</span>
<span class="n">graph</span><span class="o">-&gt;</span><span class="n">exportGraphML</span><span class="p">(</span><span class="s">"~/graph.graphml"</span><span class="p">);</span>

</code></pre></div></div>
<p>These can then be viewed with a graph viewer like <a href="https://gephi.org/">Gephi</a>. The downside compared to the laneletMap export is, that the lanelets aren’t localized.</p>

<h1 id="4-routes">4. Routes</h1>

<p>Example route through <code class="language-plaintext highlighter-rouge">Oststadtkreisel</code>:</p>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/lanelet_map_route_oststadtkreisel_small.jpg" alt=""></p>

<p>Output of <code class="language-plaintext highlighter-rouge">getDebugLaneletMap()</code> function:</p>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/lanelet_map_route.png" alt=""></p>

<h2 id="example-relational-queries-on-routes">Example Relational Queries on Routes:</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get left lanelet of example lanelet 'll'</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLaneletRelation</span><span class="o">&gt;</span> <span class="n">left</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">leftRelation</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>
<span class="c1">// Get conflicting lanelets of 'll'</span>
<span class="n">ConstLanelets</span> <span class="n">conflicting</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">conflictingInRoute</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>


</code></pre></div></div>
<p>Note that a route just returns relations to lanelets that can be used to reach the goal.</p>
<h2 id="other-example-queries">Other example queries:</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get underlying shortest path</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">routing</span><span class="o">::</span><span class="n">LaneletPath</span><span class="o">&gt;</span> <span class="n">shortestPath</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">shortestPath</span><span class="p">();</span>
<span class="c1">// Get the full lane of a given lanelet 'll'</span>
<span class="n">LaneletSequence</span> <span class="n">fullLane</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">fullLane</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>
<span class="c1">// Get remaining lane of a given lanelet 'll'</span>
<span class="n">LaneletSequence</span> <span class="n">remainingLane</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">remainingLane</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>

</code></pre></div></div>

<h1 id="5-interconnect-routing-graphs-of-different-participants">5. Interconnect Routing Graphs of Different Participants</h1>
<p>A <code class="language-plaintext highlighter-rouge">RoutingGraphContainer</code> can be used to <em>connect</em> graphs of different participants to get information about conflicting lanelets.</p>
<h2 id="create-a-routinggraphcontainer">Create a RoutingGraphContainer</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">RoutingGraphPtr</span><span class="o">&gt;</span> <span class="n">graphs</span><span class="p">;</span>
<span class="n">graphs</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">vehicleGraphLaneletMap</span><span class="p">);</span>
<span class="n">graphs</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">pedestrianGraphLaneletMap</span><span class="p">);</span>
<span class="n">RoutingGraphContainer</span> <span class="nf">container</span><span class="p">(</span><span class="n">graphs</span><span class="p">);</span>

</code></pre></div></div>
<h2 id="example-queries">Example Queries</h2>
<p>The last parameter <em>participantHeight</em> is optional and decides whether conflicting lanelets are determined in 2D or 3D.</p>

<h3 id="query-for-a-single-lanelet">Query for a single lanelet</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">heightClearance</span><span class="p">{</span><span class="mf">4.</span><span class="p">};</span> <span class="c1">// Height of the traffic participant</span>
<span class="c1">// Query a single graph for conflicting lanelets</span>
<span class="kt">size_t</span> <span class="n">routingGraphId</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>   <span class="c1">// E.g. 0 for the first graph</span>
<span class="n">ConstLanelets</span> <span class="n">conflictingVehicle</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingInGraph</span><span class="p">(</span><span class="n">bridgeLanelet</span><span class="p">,</span> <span class="n">routingGraphId</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>
<span class="c1">// Query all graphs for conflicting lanelets</span>
<span class="n">RoutingGraphContainer</span><span class="o">::</span><span class="n">ConflictingInGraphs</span> <span class="n">conflicting</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingInGraphs</span><span class="p">(</span><span class="n">bridgeLanelet</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>

</code></pre></div></div>

<h3 id="query-for-a-whole-route">Query for a Whole Route</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Conflicting lanelets of a route in a single graph</span>
<span class="n">ConstLanelets</span> <span class="n">conflictingVehicle</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingOfRouteInGraph</span><span class="p">(</span><span class="n">routePtr</span><span class="p">,</span> <span class="n">routingGraphId</span><span class="p">)};</span>
<span class="c1">// Conflicting lanelets of a route in all graphs</span>
<span class="n">RoutingGraphContainer</span><span class="o">::</span><span class="n">ConflictingInGraphs</span> <span class="n">result</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingOfRouteInGraphs</span><span class="p">(</span><span class="n">routePtr</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>

</code></pre></div></div>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-lanelet2_routing">Changelog for package lanelet2_routing</h1>

<h2 id="122-2024-10-25">1.2.2 (2024-10-25)</h2>

<ul>
  <li>Prevent unintended modification of graph in lanelet::routing::Route
(<a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/issues/352">#352</a>)</li>
  <li>Build documentation with mkdocs
(<a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/issues/321">#321</a>)</li>
  <li>Contributors: DavUhll, poggenhans</li>
</ul>

<h2 id="121-2023-05-10">1.2.1 (2023-05-10)</h2>

<ul>
  <li>Update thirdparty deps, rework projected point, enable python
3.10/3.11 (<a href="https://github.com/immel-f/Lanelet2/issues/300">#300</a>)</li>
  <li>Contributors: poggenhans</li>
</ul>

<h2 id="120-2023-01-30">1.2.0 (2023-01-30)</h2>

<ul>
  <li>Add CI using GitHub Actions
(<a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/issues/256">#256</a>)</li>
  <li>Use TYPED_TEST_SUITE over deprecated TYPED_TEST_CASE in unit
tests</li>
  <li>Add missing include for boost 1.69</li>
  <li>Contributors: Fabian Poggenhans, Fabian Immel</li>
</ul>

<h2 id="111-2020-09-14">1.1.1 (2020-09-14)</h2>

<h2 id="110-2020-09-06">1.1.0 (2020-09-06)</h2>

<ul>
  <li>Implement more flexible configuration for obtaining possible paths.
Still lacking proper tests</li>
  <li>Add parameter to left/right/adjacentLeft/adjacentRight so that they
can be queried based on routing cost id</li>
  <li>Fix routing for lane changes, add tests for it</li>
  <li>Fix wrong route in circles</li>
  <li>Fix unittests that rely on a non-writable root directory</li>
  <li>Add experimental support for building with colcon on ros2 and
ament_cmake</li>
  <li>Fix the documentation about how to create a routing graph</li>
  <li>Removing extra semicolons causing warnings with wpedantic.</li>
  <li>Making all includes in lanelet2_routing consistent.</li>
  <li>Updating package.xml files to format 3.</li>
  <li>Fix use of equals in older boost versions</li>
  <li>Arbitrary lanelet and area adjacencies in LaneletPaths</li>
  <li>Add functionality to create the bounding polygon from a Path</li>
  <li>Contributors: Fabian Poggenhans, Johannes Janosovits, Joshua Whitley</li>
</ul>

<h2 id="101-2020-03-24">1.0.1 (2020-03-24)</h2>

<ul>
  <li>Mention laneletSubmap in README</li>
  <li>Make sure lanelet2 buildtool_export_depends on mrt_cmake_modules</li>
  <li>Add changelogs</li>
  <li>Fix clang-tidy warnings</li>
  <li>Contributors: Fabian Poggenhans</li>
</ul>

<h2 id="100-2020-03-03">1.0.0 (2020-03-03)</h2>

<ul>
  <li>Bump version to 1.0</li>
  <li>Routing: Add shortest path search based on areas</li>
  <li>Fix default values for lane changes in RoutingGraph</li>
  <li>RoutingGraph and Route now use the new LaneletSubmap to store the
lanelets they are using their member functions laneletMap() and
passableMap() are now deprecated and should be replaced by
laneletSubmap() and passableSubmap() respectively. These functions
have less overhead and are less likely to be misinterpreted as
'maps containing only the lanelets you need'</li>
  <li>Edges with nonfinite costs are no longer added to the graph to avoid
overflows. If a cost function returns infinite costs, no edge will
be added and the connection will not be available to the routing
graph</li>
  <li>Introduce proper namespacing for internal objects</li>
  <li>Update documentation</li>
  <li>Routing graph and route object now support queries with a custom
search function Routing graph and route object now both have a
function forEachSuccessor (and more) for doing more advanced
queries. Added doc tests and python bindings</li>
  <li>Update the shortest path algorithm to use the new dijktra search</li>
  <li>Extended and simplified the reachablePath/Set functions by using
boost graphs implementation of dijkstras shortest paths</li>
  <li>Refactored the internal representation of the route. Cleaned up
headers that are only supposed to be used internally</li>
  <li>Complete rewrite of the route builder using boost graph</li>
  <li>Removed the "diverging" and "merging" classification from the
routing graph and update the doc They are now all represented with
the "succeeding" relation. Information about merging or diverging
can now be obtained simply by querying the number of
following/preceding lanelets. As a consequence, the route object no
longer caches queried "lanes". The responsible functions are now
const.</li>
  <li>Fix compiler errors with gcc 5</li>
  <li>Fix image paths in routing doc</li>
  <li>Initial commit</li>
  <li>Contributors: Fabian Poggenhans, Johannes Janosovits, Maximilian
Naumann</li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/lanelet2_routing/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/catkin#humble-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/catkin#humble">catkin  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_core#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_core#humble">ament_cmake_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/mrt_cmake_modules#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/mrt_cmake_modules#humble">mrt_cmake_modules  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/lanelet2_core#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/lanelet2_core#humble">lanelet2_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/lanelet2_traffic_rules#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/lanelet2_traffic_rules#humble">lanelet2_traffic_rules  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/gtest">gtest</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/boost">boost</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2#humble">lanelet2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2#humble-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_examples#humble">lanelet2_examples</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_examples#humble-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_python#humble">lanelet2_python</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_python#humble-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_validation#humble">lanelet2_validation</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_validation#humble-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/autoware_lanelet2_extension#humble">autoware_lanelet2_extension</a></td>
                      <td class="text-center">
                        
                        <a href="/p/autoware_lanelet2_extension#humble-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/autoware_lanelet2_extension_python#humble">autoware_lanelet2_extension_python</a></td>
                      <td class="text-center">
                        
                        <a href="/p/autoware_lanelet2_extension_python#humble-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>lanelet2_routing</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="humble-question-list" class="panel-body" style="display: none;"></div>
      <div id="humble-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/lanelet2_routing+humble">here</a>.</p>
      </div>
      <div id="humble-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/fzi-forschungszentrum-informatik/lanelet2.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/humble/p/lanelet2_routing"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/lanelet2_routing">lanelet2_routing</a> <small>package from <a style="text-decoration:none" href="/r/lanelet2/github-fzi-forschungszentrum-informatik-lanelet2">lanelet2</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2">

lanelet2
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_core">

lanelet2_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_examples">

lanelet2_examples
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_io">

lanelet2_io
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_maps">

lanelet2_maps
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_matching">

lanelet2_matching
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_projection">

lanelet2_projection
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_python">

lanelet2_python
</a>
            
          
            
            
              <span class="label label-default pkg-label">

lanelet2_routing
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_traffic_rules">

lanelet2_traffic_rules
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_validation">

lanelet2_validation
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/jazzy/p/lanelet2_routing"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="jazzy-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#jazzy-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#jazzy-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#jazzy-deps" data-toggle="tab"><span class="label label-primary">7</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#jazzy-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#jazzy-questions" data-toggle="tab"><span id="jazzy-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="jazzy-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>1.2.2</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-info">
                  
                    CATKIN</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Map handling framework for automated driving</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/fzi-forschungszentrum-informatik/lanelet2.git">https://github.com/fzi-forschungszentrum-informatik/lanelet2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-03-03
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/lanelet2/#jazzy-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/lanelet2/#jazzy-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/lanelet2/#jazzy-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Routing module for lanelet2
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2.git">Repository</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Fabian Immel</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Matthias Mayr</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing/README.md" title="Open in git repository">lanelet2_routing/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="lanelet2-routing">Lanelet2 routing</h1>

<p>The routing module for lanelet2.</p>

<p>For a short version of this you can also look at <a href="https://htmlpreview.github.io/?https://github.com/fzi-forschungszentrum-informatik/Lanelet2/blob/master/lanelet2_routing/doc/lanelet2_routing.html">the presentation</a>. If some images do not render correctly, please clone the repository and open the html file in your browser.</p>

<p>This readme covers some basics. The API offers more than that.</p>

<h1 id="1-components-and-vocabulary">1. Components and Vocabulary</h1>
<h2 id="how-to-create-a-routing-graph">How to create a Routing Graph</h2>
<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/components.png" alt=""></p>

<p>The needed components to create a routing graph are:</p>

<p><strong>Routing Cost Modules:</strong></p>
<ul>
  <li>They generically determine the routing cost for travelling along a lanelet/area</li>
  <li>Can be e.g. length, travel time</li>
  <li>You can dynamically select between them when querying the routing graph</li>
  <li><strong>You can easily plug in your own routing cost calculation</strong></li>
  <li><em>Influences the prefered path</em></li>
</ul>

<p><strong>Traffic Rules for a Specific Participant</strong> (see <a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/tree/master/lanelet2_traffic_rules/README.md">lanelet2_traffic_rules</a>)</p>
<ul>
  <li>Determines which lanelets/areas are passable</li>
  <li><em>Influences the possible paths</em></li>
</ul>

<p><strong>Lanelet Map:</strong> (see <a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing/../lanelet2_core/README.md">lanelet2_core</a>)</p>
<ul>
  <li>Map with Lanelets, Areas, Regulatory Elements, …</li>
</ul>

<h2 id="relations">Relations</h2>
<p>Lanelets that are part of a routing graph can have relations to each other:
<img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/max-hose.png" alt=""></p>

<p>The possible relations are:
    * <code class="language-plaintext highlighter-rouge">left</code>, <code class="language-plaintext highlighter-rouge">right</code> (reachable via lane change)
    * <code class="language-plaintext highlighter-rouge">adjacent left</code>, <code class="language-plaintext highlighter-rouge">adjacent right</code> (lanelets that are neighbours but not reachable via lane change)
    * <code class="language-plaintext highlighter-rouge">succeeding</code> (relation between two subsequent lanelets)
    * <code class="language-plaintext highlighter-rouge">conflicting</code> (intersecting lanelets/areas)
    * <code class="language-plaintext highlighter-rouge">area</code> (reachable area to lanelet/area relation)</p>

<h2 id="route-vs-path-vs-sequence">Route vs Path vs Sequence</h2>
<p>When querying data in the routing graph, you will come across the terms <em>route</em>, <em>path</em> and <em>sequence</em>. In contrast to a simple set of lanelets (data-wise a vector of lanelets), they have a special meaning and are data-wise different classes.</p>

<p>A <em>route</em> means all the lanelets that can be used to a destination without driving a different road. They can be connected by a generic sequence of lane changes and successors.</p>

<p>A <em>path</em> (LaneletPath or LaneletOrAreaPath) is an ordered list of Lanelets/Areas that lead to the destination. They can be connected by lane changes.</p>

<p>A <em>sequence</em> (LaneletSequence) is a sequence of subsequent Lanelets that is not separated by a lane change (think of it as a <em>lane</em>). It does not necessary lead to a destination, instead it ends when a lane change is required. In the example image, the lanelets A, D, B form a valid <em>sequence</em> (and also a valid <em>path</em>), while the lanelets A, D, E are a valid <em>path</em>, but not a valid <em>sequence</em>.</p>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/shortest_path_and_route.png" alt=""></p>

<h1 id="2-code-usage">2. Code Usage</h1>

<h2 id="create-a-routing-graph">Create a Routing Graph</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="k">namespace</span> <span class="n">lanelet</span><span class="p">;</span>

<span class="c1">// Load a map</span>
<span class="n">LaneletMapPtr</span> <span class="n">map</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s">"map.osm"</span><span class="p">,</span> <span class="n">Origin</span><span class="p">({</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">}));</span> <span class="c1">// origin has to be close to the map data in lat/lon coordinates</span>

<span class="c1">// Initialize traffic rules</span>
<span class="n">TrafficRulesPtr</span> <span class="n">trafficRules</span><span class="p">{</span><span class="n">TrafficRulesFactory</span><span class="o">::</span><span class="n">instance</span><span class="p">().</span><span class="n">create</span><span class="p">(</span><span class="n">Locations</span><span class="o">::</span><span class="n">Germany</span><span class="p">,</span> <span class="n">Participants</span><span class="o">::</span><span class="n">Vehicle</span><span class="p">)};</span>

<span class="c1">// Optional: Initalize routing costs</span>
<span class="kt">double</span> <span class="n">laneChangeCost</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">RoutingCostPtrs</span> <span class="n">costPtrs</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">RoutingCostDistance</span><span class="o">&gt;</span><span class="p">(</span><span class="n">laneChangeCost</span><span class="p">)};</span>

<span class="c1">// Optional: Initialize config for routing graph:</span>
<span class="n">RoutingGraph</span><span class="o">::</span><span class="n">Configuration</span> <span class="n">routingGraphConf</span><span class="p">;</span>
<span class="n">routingGraphConf</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="n">RoutingGraph</span><span class="o">::</span><span class="n">ParticipantHeight</span><span class="p">,</span> <span class="n">Attribute</span><span class="p">(</span><span class="s">"2."</span><span class="p">)));</span>

<span class="c1">// Create routing graph</span>
<span class="n">RoutingGraphPtr</span> <span class="n">graph</span> <span class="o">=</span> <span class="n">RoutingGraph</span><span class="o">::</span><span class="n">build</span><span class="p">(</span><span class="n">map</span><span class="p">,</span> <span class="n">trafficRules</span> <span class="cm">/*, costPtrs, routingGraphConf*/</span><span class="p">);</span>

</code></pre></div></div>
<ul>
  <li>The traffic rules object represents the view from which the map will be interpreted. Doing routing with vehicle traffic
rules will yield different results than routing with e.g. bicycle traffic rules.</li>
  <li>Routing for bicycles might include lanelets that are not available to (motorized)vehicles and vice versa.</li>
</ul>

<p>The python interface works similarly:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">lanelet2</span>
<span class="nb">map</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="sh">"</span><span class="s">map.osm</span><span class="sh">"</span><span class="p">,</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nc">Origin</span><span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">trafficRules</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="n">Locations</span><span class="p">.</span><span class="n">Germany</span><span class="p">,</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="n">Participants</span><span class="p">.</span><span class="n">Vehicle</span><span class="p">)</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">routing</span><span class="p">.</span><span class="nc">RoutingGraph</span><span class="p">(</span><span class="nb">map</span><span class="p">,</span> <span class="n">trafficRules</span><span class="p">)</span>

</code></pre></div></div>
<h2 id="get-a-shortest-path">Get a shortest path</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Optional</span><span class="o">&lt;</span><span class="n">routing</span><span class="o">::</span><span class="n">LaneletPath</span><span class="o">&gt;</span> <span class="n">shortestPath</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">shortestPath</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">);</span>

</code></pre></div></div>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">Optional</code> will be uninitialized (false) if there’s no path</li>
  <li>there’s also <code class="language-plaintext highlighter-rouge">shortestPathWithVia</code>
</li>
</ul>

<p>in python:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">shortestPath</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nf">shortestPath</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">)</span>

</code></pre></div></div>
<p>In python, shortestPath simply returns <code class="language-plaintext highlighter-rouge">None</code> if there is no path.</p>

<h2 id="get-and-write-a-route">Get and write a route</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Route</span><span class="o">&gt;</span> <span class="n">route</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">getRoute</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">route</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">LaneletSubmapConstPtr</span> <span class="n">routeMap</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">laneletSubmap</span><span class="p">();</span>
        <span class="n">write</span><span class="p">(</span><span class="s">"route.osm"</span><span class="p">,</span> <span class="o">*</span><span class="n">routeMap</span><span class="o">-&gt;</span><span class="n">laneletMap</span><span class="p">(),</span> <span class="n">Origin</span><span class="p">({</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">}));</span>
    <span class="p">}</span>

</code></pre></div></div>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">Optional</code> will be uninitialized (false) if there’s no route</li>
</ul>

<p>Note that there is a semantic difference between a <code class="language-plaintext highlighter-rouge">LaneletSubmap</code> and a <code class="language-plaintext highlighter-rouge">LaneletMap</code>. While a LaneletSubmap only contains
the things you explicitly added, the <code class="language-plaintext highlighter-rouge">LaneletMap</code> also contains all the things referred by them (the Points, Linestrings, things referred by RegulatoryElements).
The <code class="language-plaintext highlighter-rouge">LaneletSubmap</code> in this case only contains the Lanelets of the route. But since this is not sufficient for writing, you need to transform it into a regular <code class="language-plaintext highlighter-rouge">LaneletMap</code> first.</p>

<p>The written map will therefore not only contain the Lanelets but also their RegulatoryElements.
If these RegulatoryElements contain other Lanelets, these Lanelets will be part of the written map as well, even if they are not on the route.</p>

<p>in python:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">route</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nf">getRoute</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">)</span>
<span class="k">if</span> <span class="n">route</span><span class="p">:</span>
    <span class="n">laneletSubmap</span> <span class="o">=</span> <span class="n">route</span><span class="p">.</span><span class="nf">laneletSubmap</span><span class="p">()</span>
    <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">route.osm</span><span class="sh">"</span><span class="p">,</span> <span class="n">laneletSubmap</span><span class="p">.</span><span class="nf">laneletMap</span><span class="p">(),</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nc">Origin</span><span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">)))</span>

</code></pre></div></div>

<h2 id="get-a-reachable-set-of-lanelets">Get a reachable set of lanelets</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">maxRoutingCost</span><span class="p">{</span><span class="mi">100</span><span class="p">};</span>
<span class="n">ConstLanelets</span> <span class="n">reachableSet</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">reachableSet</span><span class="p">(</span><span class="n">lanelet</span><span class="p">,</span> <span class="n">maxRoutingCost</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">);</span>

</code></pre></div></div>

<h2 id="left-right-following-lanelets">Left, Right, Following Lanelets</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get routable left lanelet if it exists</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLanelet</span><span class="o">&gt;</span> <span class="n">left</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>
<span class="c1">// Get non-routable left lanelet if it exists</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLanelet</span><span class="o">&gt;</span> <span class="n">adjacentLeft</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">adjacentLeft</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>
<span class="c1">// Get following lanelets</span>
<span class="n">ConstLanelets</span> <span class="n">following</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">following</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>

</code></pre></div></div>
<ul>
  <li>Also available: <code class="language-plaintext highlighter-rouge">right</code>, <code class="language-plaintext highlighter-rouge">adjacentRight</code>, <code class="language-plaintext highlighter-rouge">lefts</code>, <code class="language-plaintext highlighter-rouge">rights</code>, <code class="language-plaintext highlighter-rouge">conflicting</code>
</li>
</ul>

<p>Alternatively:
 or queries that return relations:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get relations to all left lanelets</span>
<span class="n">LaneletRelations</span> <span class="n">leftRelations</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">leftRelations</span><span class="p">(</span>
                                                <span class="n">fromLanelet</span><span class="p">);</span>

</code></pre></div></div>
<p>There’s <code class="language-plaintext highlighter-rouge">leftRelations</code> that returns a vector of pairs of LaneletRelations whereas RelationType can be ‘left’ or ‘adjacentLeft’ in this case</p>

<h2 id="more">More</h2>

<p>This is just a quick walkthrough. Advanced examples can be found in <a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing/../lanelet2_examples/README.md">lanelet2_examples</a>.</p>

<h1 id="3-export-and-debugging-routing-graphs">3. Export and Debugging Routing Graphs</h1>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/lanelet_map_routing_graph.png" alt=""></p>

<h2 id="laneletmap-with-routing-information">LaneletMap with Routing Information</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">LaneletMapConstPtr</span> <span class="n">debugLaneletMap</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">getDebugLaneletMap</span><span class="p">(</span><span class="n">RoutingCostId</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<span class="n">write</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">"routing_graph.osm"</span><span class="p">),</span> <span class="o">*</span><span class="n">debugLaneletMap</span><span class="p">);</span>

</code></pre></div></div>
<p>This one is best viewed in <a href="https://josm.openstreetmap.de/">JOSM</a> and using a custom map style css which is to be found in <code class="language-plaintext highlighter-rouge">res/routing.mapcss</code>. <a href="https://josm.openstreetmap.de/attachment/wiki/Styles/addstyle.gif">This gif</a> shows, how to add a style to JOSM, except that one needs to press the <code class="language-plaintext highlighter-rouge">+</code> button in the configuration menu and specify the file.</p>

<p>Most of the information is to be found in the attributes. The line strings that connect lanelets do have a direction. The name of the forth-direction is generally to be found left/above the line and the reverse relation right/under the string.</p>

<h2 id="dot-graphviz-and-graphml-xml-based-file-export">DOT (GraphViz) and GraphML (xml-based) file export</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">graph</span><span class="o">-&gt;</span><span class="n">exportGraphViz</span><span class="p">(</span><span class="s">"~/graph.gv"</span><span class="p">);</span>
<span class="n">graph</span><span class="o">-&gt;</span><span class="n">exportGraphML</span><span class="p">(</span><span class="s">"~/graph.graphml"</span><span class="p">);</span>

</code></pre></div></div>
<p>These can then be viewed with a graph viewer like <a href="https://gephi.org/">Gephi</a>. The downside compared to the laneletMap export is, that the lanelets aren’t localized.</p>

<h1 id="4-routes">4. Routes</h1>

<p>Example route through <code class="language-plaintext highlighter-rouge">Oststadtkreisel</code>:</p>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/lanelet_map_route_oststadtkreisel_small.jpg" alt=""></p>

<p>Output of <code class="language-plaintext highlighter-rouge">getDebugLaneletMap()</code> function:</p>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/lanelet_map_route.png" alt=""></p>

<h2 id="example-relational-queries-on-routes">Example Relational Queries on Routes:</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get left lanelet of example lanelet 'll'</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLaneletRelation</span><span class="o">&gt;</span> <span class="n">left</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">leftRelation</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>
<span class="c1">// Get conflicting lanelets of 'll'</span>
<span class="n">ConstLanelets</span> <span class="n">conflicting</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">conflictingInRoute</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>


</code></pre></div></div>
<p>Note that a route just returns relations to lanelets that can be used to reach the goal.</p>
<h2 id="other-example-queries">Other example queries:</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get underlying shortest path</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">routing</span><span class="o">::</span><span class="n">LaneletPath</span><span class="o">&gt;</span> <span class="n">shortestPath</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">shortestPath</span><span class="p">();</span>
<span class="c1">// Get the full lane of a given lanelet 'll'</span>
<span class="n">LaneletSequence</span> <span class="n">fullLane</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">fullLane</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>
<span class="c1">// Get remaining lane of a given lanelet 'll'</span>
<span class="n">LaneletSequence</span> <span class="n">remainingLane</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">remainingLane</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>

</code></pre></div></div>

<h1 id="5-interconnect-routing-graphs-of-different-participants">5. Interconnect Routing Graphs of Different Participants</h1>
<p>A <code class="language-plaintext highlighter-rouge">RoutingGraphContainer</code> can be used to <em>connect</em> graphs of different participants to get information about conflicting lanelets.</p>
<h2 id="create-a-routinggraphcontainer">Create a RoutingGraphContainer</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">RoutingGraphPtr</span><span class="o">&gt;</span> <span class="n">graphs</span><span class="p">;</span>
<span class="n">graphs</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">vehicleGraphLaneletMap</span><span class="p">);</span>
<span class="n">graphs</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">pedestrianGraphLaneletMap</span><span class="p">);</span>
<span class="n">RoutingGraphContainer</span> <span class="nf">container</span><span class="p">(</span><span class="n">graphs</span><span class="p">);</span>

</code></pre></div></div>
<h2 id="example-queries">Example Queries</h2>
<p>The last parameter <em>participantHeight</em> is optional and decides whether conflicting lanelets are determined in 2D or 3D.</p>

<h3 id="query-for-a-single-lanelet">Query for a single lanelet</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">heightClearance</span><span class="p">{</span><span class="mf">4.</span><span class="p">};</span> <span class="c1">// Height of the traffic participant</span>
<span class="c1">// Query a single graph for conflicting lanelets</span>
<span class="kt">size_t</span> <span class="n">routingGraphId</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>   <span class="c1">// E.g. 0 for the first graph</span>
<span class="n">ConstLanelets</span> <span class="n">conflictingVehicle</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingInGraph</span><span class="p">(</span><span class="n">bridgeLanelet</span><span class="p">,</span> <span class="n">routingGraphId</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>
<span class="c1">// Query all graphs for conflicting lanelets</span>
<span class="n">RoutingGraphContainer</span><span class="o">::</span><span class="n">ConflictingInGraphs</span> <span class="n">conflicting</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingInGraphs</span><span class="p">(</span><span class="n">bridgeLanelet</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>

</code></pre></div></div>

<h3 id="query-for-a-whole-route">Query for a Whole Route</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Conflicting lanelets of a route in a single graph</span>
<span class="n">ConstLanelets</span> <span class="n">conflictingVehicle</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingOfRouteInGraph</span><span class="p">(</span><span class="n">routePtr</span><span class="p">,</span> <span class="n">routingGraphId</span><span class="p">)};</span>
<span class="c1">// Conflicting lanelets of a route in all graphs</span>
<span class="n">RoutingGraphContainer</span><span class="o">::</span><span class="n">ConflictingInGraphs</span> <span class="n">result</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingOfRouteInGraphs</span><span class="p">(</span><span class="n">routePtr</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>

</code></pre></div></div>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-lanelet2_routing">Changelog for package lanelet2_routing</h1>

<h2 id="122-2024-10-25">1.2.2 (2024-10-25)</h2>

<ul>
  <li>Prevent unintended modification of graph in lanelet::routing::Route
(<a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/issues/352">#352</a>)</li>
  <li>Build documentation with mkdocs
(<a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/issues/321">#321</a>)</li>
  <li>Contributors: DavUhll, poggenhans</li>
</ul>

<h2 id="121-2023-05-10">1.2.1 (2023-05-10)</h2>

<ul>
  <li>Update thirdparty deps, rework projected point, enable python
3.10/3.11 (<a href="https://github.com/immel-f/Lanelet2/issues/300">#300</a>)</li>
  <li>Contributors: poggenhans</li>
</ul>

<h2 id="120-2023-01-30">1.2.0 (2023-01-30)</h2>

<ul>
  <li>Add CI using GitHub Actions
(<a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/issues/256">#256</a>)</li>
  <li>Use TYPED_TEST_SUITE over deprecated TYPED_TEST_CASE in unit
tests</li>
  <li>Add missing include for boost 1.69</li>
  <li>Contributors: Fabian Poggenhans, Fabian Immel</li>
</ul>

<h2 id="111-2020-09-14">1.1.1 (2020-09-14)</h2>

<h2 id="110-2020-09-06">1.1.0 (2020-09-06)</h2>

<ul>
  <li>Implement more flexible configuration for obtaining possible paths.
Still lacking proper tests</li>
  <li>Add parameter to left/right/adjacentLeft/adjacentRight so that they
can be queried based on routing cost id</li>
  <li>Fix routing for lane changes, add tests for it</li>
  <li>Fix wrong route in circles</li>
  <li>Fix unittests that rely on a non-writable root directory</li>
  <li>Add experimental support for building with colcon on ros2 and
ament_cmake</li>
  <li>Fix the documentation about how to create a routing graph</li>
  <li>Removing extra semicolons causing warnings with wpedantic.</li>
  <li>Making all includes in lanelet2_routing consistent.</li>
  <li>Updating package.xml files to format 3.</li>
  <li>Fix use of equals in older boost versions</li>
  <li>Arbitrary lanelet and area adjacencies in LaneletPaths</li>
  <li>Add functionality to create the bounding polygon from a Path</li>
  <li>Contributors: Fabian Poggenhans, Johannes Janosovits, Joshua Whitley</li>
</ul>

<h2 id="101-2020-03-24">1.0.1 (2020-03-24)</h2>

<ul>
  <li>Mention laneletSubmap in README</li>
  <li>Make sure lanelet2 buildtool_export_depends on mrt_cmake_modules</li>
  <li>Add changelogs</li>
  <li>Fix clang-tidy warnings</li>
  <li>Contributors: Fabian Poggenhans</li>
</ul>

<h2 id="100-2020-03-03">1.0.0 (2020-03-03)</h2>

<ul>
  <li>Bump version to 1.0</li>
  <li>Routing: Add shortest path search based on areas</li>
  <li>Fix default values for lane changes in RoutingGraph</li>
  <li>RoutingGraph and Route now use the new LaneletSubmap to store the
lanelets they are using their member functions laneletMap() and
passableMap() are now deprecated and should be replaced by
laneletSubmap() and passableSubmap() respectively. These functions
have less overhead and are less likely to be misinterpreted as
'maps containing only the lanelets you need'</li>
  <li>Edges with nonfinite costs are no longer added to the graph to avoid
overflows. If a cost function returns infinite costs, no edge will
be added and the connection will not be available to the routing
graph</li>
  <li>Introduce proper namespacing for internal objects</li>
  <li>Update documentation</li>
  <li>Routing graph and route object now support queries with a custom
search function Routing graph and route object now both have a
function forEachSuccessor (and more) for doing more advanced
queries. Added doc tests and python bindings</li>
  <li>Update the shortest path algorithm to use the new dijktra search</li>
  <li>Extended and simplified the reachablePath/Set functions by using
boost graphs implementation of dijkstras shortest paths</li>
  <li>Refactored the internal representation of the route. Cleaned up
headers that are only supposed to be used internally</li>
  <li>Complete rewrite of the route builder using boost graph</li>
  <li>Removed the "diverging" and "merging" classification from the
routing graph and update the doc They are now all represented with
the "succeeding" relation. Information about merging or diverging
can now be obtained simply by querying the number of
following/preceding lanelets. As a consequence, the route object no
longer caches queried "lanes". The responsible functions are now
const.</li>
  <li>Fix compiler errors with gcc 5</li>
  <li>Fix image paths in routing doc</li>
  <li>Initial commit</li>
  <li>Contributors: Fabian Poggenhans, Johannes Janosovits, Maximilian
Naumann</li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/lanelet2_routing/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/catkin#jazzy-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/catkin#jazzy">catkin  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_core#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_core#jazzy">ament_cmake_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/mrt_cmake_modules#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/mrt_cmake_modules#jazzy">mrt_cmake_modules  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/lanelet2_core#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/lanelet2_core#jazzy">lanelet2_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/lanelet2_traffic_rules#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/lanelet2_traffic_rules#jazzy">lanelet2_traffic_rules  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/gtest">gtest</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/boost">boost</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2#jazzy">lanelet2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2#jazzy-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_examples#jazzy">lanelet2_examples</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_examples#jazzy-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_python#jazzy">lanelet2_python</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_python#jazzy-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_validation#jazzy">lanelet2_validation</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_validation#jazzy-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/autoware_lanelet2_extension#jazzy">autoware_lanelet2_extension</a></td>
                      <td class="text-center">
                        
                        <a href="/p/autoware_lanelet2_extension#jazzy-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/autoware_lanelet2_extension_python#jazzy">autoware_lanelet2_extension_python</a></td>
                      <td class="text-center">
                        
                        <a href="/p/autoware_lanelet2_extension_python#jazzy-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>lanelet2_routing</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="jazzy-question-list" class="panel-body" style="display: none;"></div>
      <div id="jazzy-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/lanelet2_routing+jazzy">here</a>.</p>
      </div>
      <div id="jazzy-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/fzi-forschungszentrum-informatik/lanelet2.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/jazzy/p/lanelet2_routing"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/lanelet2_routing">lanelet2_routing</a> <small>package from <a style="text-decoration:none" href="/r/lanelet2/github-fzi-forschungszentrum-informatik-lanelet2">lanelet2</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2">

lanelet2
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_core">

lanelet2_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_examples">

lanelet2_examples
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_io">

lanelet2_io
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_maps">

lanelet2_maps
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_matching">

lanelet2_matching
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_projection">

lanelet2_projection
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_python">

lanelet2_python
</a>
            
          
            
            
              <span class="label label-default pkg-label">

lanelet2_routing
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_traffic_rules">

lanelet2_traffic_rules
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_validation">

lanelet2_validation
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/kilted/p/lanelet2_routing"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="kilted-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#kilted-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#kilted-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#kilted-deps" data-toggle="tab"><span class="label label-primary">7</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#kilted-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#kilted-questions" data-toggle="tab"><span id="kilted-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="kilted-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>1.2.2</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-info">
                  
                    CATKIN</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Map handling framework for automated driving</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/fzi-forschungszentrum-informatik/lanelet2.git">https://github.com/fzi-forschungszentrum-informatik/lanelet2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-03-03
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/lanelet2/#kilted-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/lanelet2/#kilted-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/lanelet2/#kilted-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Routing module for lanelet2
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2.git">Repository</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Fabian Immel</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Matthias Mayr</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing/README.md" title="Open in git repository">lanelet2_routing/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="lanelet2-routing">Lanelet2 routing</h1>

<p>The routing module for lanelet2.</p>

<p>For a short version of this you can also look at <a href="https://htmlpreview.github.io/?https://github.com/fzi-forschungszentrum-informatik/Lanelet2/blob/master/lanelet2_routing/doc/lanelet2_routing.html">the presentation</a>. If some images do not render correctly, please clone the repository and open the html file in your browser.</p>

<p>This readme covers some basics. The API offers more than that.</p>

<h1 id="1-components-and-vocabulary">1. Components and Vocabulary</h1>
<h2 id="how-to-create-a-routing-graph">How to create a Routing Graph</h2>
<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/components.png" alt=""></p>

<p>The needed components to create a routing graph are:</p>

<p><strong>Routing Cost Modules:</strong></p>
<ul>
  <li>They generically determine the routing cost for travelling along a lanelet/area</li>
  <li>Can be e.g. length, travel time</li>
  <li>You can dynamically select between them when querying the routing graph</li>
  <li><strong>You can easily plug in your own routing cost calculation</strong></li>
  <li><em>Influences the prefered path</em></li>
</ul>

<p><strong>Traffic Rules for a Specific Participant</strong> (see <a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/tree/master/lanelet2_traffic_rules/README.md">lanelet2_traffic_rules</a>)</p>
<ul>
  <li>Determines which lanelets/areas are passable</li>
  <li><em>Influences the possible paths</em></li>
</ul>

<p><strong>Lanelet Map:</strong> (see <a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing/../lanelet2_core/README.md">lanelet2_core</a>)</p>
<ul>
  <li>Map with Lanelets, Areas, Regulatory Elements, …</li>
</ul>

<h2 id="relations">Relations</h2>
<p>Lanelets that are part of a routing graph can have relations to each other:
<img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/max-hose.png" alt=""></p>

<p>The possible relations are:
    * <code class="language-plaintext highlighter-rouge">left</code>, <code class="language-plaintext highlighter-rouge">right</code> (reachable via lane change)
    * <code class="language-plaintext highlighter-rouge">adjacent left</code>, <code class="language-plaintext highlighter-rouge">adjacent right</code> (lanelets that are neighbours but not reachable via lane change)
    * <code class="language-plaintext highlighter-rouge">succeeding</code> (relation between two subsequent lanelets)
    * <code class="language-plaintext highlighter-rouge">conflicting</code> (intersecting lanelets/areas)
    * <code class="language-plaintext highlighter-rouge">area</code> (reachable area to lanelet/area relation)</p>

<h2 id="route-vs-path-vs-sequence">Route vs Path vs Sequence</h2>
<p>When querying data in the routing graph, you will come across the terms <em>route</em>, <em>path</em> and <em>sequence</em>. In contrast to a simple set of lanelets (data-wise a vector of lanelets), they have a special meaning and are data-wise different classes.</p>

<p>A <em>route</em> means all the lanelets that can be used to a destination without driving a different road. They can be connected by a generic sequence of lane changes and successors.</p>

<p>A <em>path</em> (LaneletPath or LaneletOrAreaPath) is an ordered list of Lanelets/Areas that lead to the destination. They can be connected by lane changes.</p>

<p>A <em>sequence</em> (LaneletSequence) is a sequence of subsequent Lanelets that is not separated by a lane change (think of it as a <em>lane</em>). It does not necessary lead to a destination, instead it ends when a lane change is required. In the example image, the lanelets A, D, B form a valid <em>sequence</em> (and also a valid <em>path</em>), while the lanelets A, D, E are a valid <em>path</em>, but not a valid <em>sequence</em>.</p>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/shortest_path_and_route.png" alt=""></p>

<h1 id="2-code-usage">2. Code Usage</h1>

<h2 id="create-a-routing-graph">Create a Routing Graph</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="k">namespace</span> <span class="n">lanelet</span><span class="p">;</span>

<span class="c1">// Load a map</span>
<span class="n">LaneletMapPtr</span> <span class="n">map</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s">"map.osm"</span><span class="p">,</span> <span class="n">Origin</span><span class="p">({</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">}));</span> <span class="c1">// origin has to be close to the map data in lat/lon coordinates</span>

<span class="c1">// Initialize traffic rules</span>
<span class="n">TrafficRulesPtr</span> <span class="n">trafficRules</span><span class="p">{</span><span class="n">TrafficRulesFactory</span><span class="o">::</span><span class="n">instance</span><span class="p">().</span><span class="n">create</span><span class="p">(</span><span class="n">Locations</span><span class="o">::</span><span class="n">Germany</span><span class="p">,</span> <span class="n">Participants</span><span class="o">::</span><span class="n">Vehicle</span><span class="p">)};</span>

<span class="c1">// Optional: Initalize routing costs</span>
<span class="kt">double</span> <span class="n">laneChangeCost</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">RoutingCostPtrs</span> <span class="n">costPtrs</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">RoutingCostDistance</span><span class="o">&gt;</span><span class="p">(</span><span class="n">laneChangeCost</span><span class="p">)};</span>

<span class="c1">// Optional: Initialize config for routing graph:</span>
<span class="n">RoutingGraph</span><span class="o">::</span><span class="n">Configuration</span> <span class="n">routingGraphConf</span><span class="p">;</span>
<span class="n">routingGraphConf</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="n">RoutingGraph</span><span class="o">::</span><span class="n">ParticipantHeight</span><span class="p">,</span> <span class="n">Attribute</span><span class="p">(</span><span class="s">"2."</span><span class="p">)));</span>

<span class="c1">// Create routing graph</span>
<span class="n">RoutingGraphPtr</span> <span class="n">graph</span> <span class="o">=</span> <span class="n">RoutingGraph</span><span class="o">::</span><span class="n">build</span><span class="p">(</span><span class="n">map</span><span class="p">,</span> <span class="n">trafficRules</span> <span class="cm">/*, costPtrs, routingGraphConf*/</span><span class="p">);</span>

</code></pre></div></div>
<ul>
  <li>The traffic rules object represents the view from which the map will be interpreted. Doing routing with vehicle traffic
rules will yield different results than routing with e.g. bicycle traffic rules.</li>
  <li>Routing for bicycles might include lanelets that are not available to (motorized)vehicles and vice versa.</li>
</ul>

<p>The python interface works similarly:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">lanelet2</span>
<span class="nb">map</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="sh">"</span><span class="s">map.osm</span><span class="sh">"</span><span class="p">,</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nc">Origin</span><span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">trafficRules</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="n">Locations</span><span class="p">.</span><span class="n">Germany</span><span class="p">,</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="n">Participants</span><span class="p">.</span><span class="n">Vehicle</span><span class="p">)</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">routing</span><span class="p">.</span><span class="nc">RoutingGraph</span><span class="p">(</span><span class="nb">map</span><span class="p">,</span> <span class="n">trafficRules</span><span class="p">)</span>

</code></pre></div></div>
<h2 id="get-a-shortest-path">Get a shortest path</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Optional</span><span class="o">&lt;</span><span class="n">routing</span><span class="o">::</span><span class="n">LaneletPath</span><span class="o">&gt;</span> <span class="n">shortestPath</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">shortestPath</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">);</span>

</code></pre></div></div>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">Optional</code> will be uninitialized (false) if there’s no path</li>
  <li>there’s also <code class="language-plaintext highlighter-rouge">shortestPathWithVia</code>
</li>
</ul>

<p>in python:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">shortestPath</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nf">shortestPath</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">)</span>

</code></pre></div></div>
<p>In python, shortestPath simply returns <code class="language-plaintext highlighter-rouge">None</code> if there is no path.</p>

<h2 id="get-and-write-a-route">Get and write a route</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Route</span><span class="o">&gt;</span> <span class="n">route</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">getRoute</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">route</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">LaneletSubmapConstPtr</span> <span class="n">routeMap</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">laneletSubmap</span><span class="p">();</span>
        <span class="n">write</span><span class="p">(</span><span class="s">"route.osm"</span><span class="p">,</span> <span class="o">*</span><span class="n">routeMap</span><span class="o">-&gt;</span><span class="n">laneletMap</span><span class="p">(),</span> <span class="n">Origin</span><span class="p">({</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">}));</span>
    <span class="p">}</span>

</code></pre></div></div>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">Optional</code> will be uninitialized (false) if there’s no route</li>
</ul>

<p>Note that there is a semantic difference between a <code class="language-plaintext highlighter-rouge">LaneletSubmap</code> and a <code class="language-plaintext highlighter-rouge">LaneletMap</code>. While a LaneletSubmap only contains
the things you explicitly added, the <code class="language-plaintext highlighter-rouge">LaneletMap</code> also contains all the things referred by them (the Points, Linestrings, things referred by RegulatoryElements).
The <code class="language-plaintext highlighter-rouge">LaneletSubmap</code> in this case only contains the Lanelets of the route. But since this is not sufficient for writing, you need to transform it into a regular <code class="language-plaintext highlighter-rouge">LaneletMap</code> first.</p>

<p>The written map will therefore not only contain the Lanelets but also their RegulatoryElements.
If these RegulatoryElements contain other Lanelets, these Lanelets will be part of the written map as well, even if they are not on the route.</p>

<p>in python:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">route</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nf">getRoute</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">)</span>
<span class="k">if</span> <span class="n">route</span><span class="p">:</span>
    <span class="n">laneletSubmap</span> <span class="o">=</span> <span class="n">route</span><span class="p">.</span><span class="nf">laneletSubmap</span><span class="p">()</span>
    <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">route.osm</span><span class="sh">"</span><span class="p">,</span> <span class="n">laneletSubmap</span><span class="p">.</span><span class="nf">laneletMap</span><span class="p">(),</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nc">Origin</span><span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">)))</span>

</code></pre></div></div>

<h2 id="get-a-reachable-set-of-lanelets">Get a reachable set of lanelets</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">maxRoutingCost</span><span class="p">{</span><span class="mi">100</span><span class="p">};</span>
<span class="n">ConstLanelets</span> <span class="n">reachableSet</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">reachableSet</span><span class="p">(</span><span class="n">lanelet</span><span class="p">,</span> <span class="n">maxRoutingCost</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">);</span>

</code></pre></div></div>

<h2 id="left-right-following-lanelets">Left, Right, Following Lanelets</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get routable left lanelet if it exists</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLanelet</span><span class="o">&gt;</span> <span class="n">left</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>
<span class="c1">// Get non-routable left lanelet if it exists</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLanelet</span><span class="o">&gt;</span> <span class="n">adjacentLeft</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">adjacentLeft</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>
<span class="c1">// Get following lanelets</span>
<span class="n">ConstLanelets</span> <span class="n">following</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">following</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>

</code></pre></div></div>
<ul>
  <li>Also available: <code class="language-plaintext highlighter-rouge">right</code>, <code class="language-plaintext highlighter-rouge">adjacentRight</code>, <code class="language-plaintext highlighter-rouge">lefts</code>, <code class="language-plaintext highlighter-rouge">rights</code>, <code class="language-plaintext highlighter-rouge">conflicting</code>
</li>
</ul>

<p>Alternatively:
 or queries that return relations:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get relations to all left lanelets</span>
<span class="n">LaneletRelations</span> <span class="n">leftRelations</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">leftRelations</span><span class="p">(</span>
                                                <span class="n">fromLanelet</span><span class="p">);</span>

</code></pre></div></div>
<p>There’s <code class="language-plaintext highlighter-rouge">leftRelations</code> that returns a vector of pairs of LaneletRelations whereas RelationType can be ‘left’ or ‘adjacentLeft’ in this case</p>

<h2 id="more">More</h2>

<p>This is just a quick walkthrough. Advanced examples can be found in <a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing/../lanelet2_examples/README.md">lanelet2_examples</a>.</p>

<h1 id="3-export-and-debugging-routing-graphs">3. Export and Debugging Routing Graphs</h1>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/lanelet_map_routing_graph.png" alt=""></p>

<h2 id="laneletmap-with-routing-information">LaneletMap with Routing Information</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">LaneletMapConstPtr</span> <span class="n">debugLaneletMap</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">getDebugLaneletMap</span><span class="p">(</span><span class="n">RoutingCostId</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<span class="n">write</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">"routing_graph.osm"</span><span class="p">),</span> <span class="o">*</span><span class="n">debugLaneletMap</span><span class="p">);</span>

</code></pre></div></div>
<p>This one is best viewed in <a href="https://josm.openstreetmap.de/">JOSM</a> and using a custom map style css which is to be found in <code class="language-plaintext highlighter-rouge">res/routing.mapcss</code>. <a href="https://josm.openstreetmap.de/attachment/wiki/Styles/addstyle.gif">This gif</a> shows, how to add a style to JOSM, except that one needs to press the <code class="language-plaintext highlighter-rouge">+</code> button in the configuration menu and specify the file.</p>

<p>Most of the information is to be found in the attributes. The line strings that connect lanelets do have a direction. The name of the forth-direction is generally to be found left/above the line and the reverse relation right/under the string.</p>

<h2 id="dot-graphviz-and-graphml-xml-based-file-export">DOT (GraphViz) and GraphML (xml-based) file export</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">graph</span><span class="o">-&gt;</span><span class="n">exportGraphViz</span><span class="p">(</span><span class="s">"~/graph.gv"</span><span class="p">);</span>
<span class="n">graph</span><span class="o">-&gt;</span><span class="n">exportGraphML</span><span class="p">(</span><span class="s">"~/graph.graphml"</span><span class="p">);</span>

</code></pre></div></div>
<p>These can then be viewed with a graph viewer like <a href="https://gephi.org/">Gephi</a>. The downside compared to the laneletMap export is, that the lanelets aren’t localized.</p>

<h1 id="4-routes">4. Routes</h1>

<p>Example route through <code class="language-plaintext highlighter-rouge">Oststadtkreisel</code>:</p>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/lanelet_map_route_oststadtkreisel_small.jpg" alt=""></p>

<p>Output of <code class="language-plaintext highlighter-rouge">getDebugLaneletMap()</code> function:</p>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/lanelet_map_route.png" alt=""></p>

<h2 id="example-relational-queries-on-routes">Example Relational Queries on Routes:</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get left lanelet of example lanelet 'll'</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLaneletRelation</span><span class="o">&gt;</span> <span class="n">left</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">leftRelation</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>
<span class="c1">// Get conflicting lanelets of 'll'</span>
<span class="n">ConstLanelets</span> <span class="n">conflicting</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">conflictingInRoute</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>


</code></pre></div></div>
<p>Note that a route just returns relations to lanelets that can be used to reach the goal.</p>
<h2 id="other-example-queries">Other example queries:</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get underlying shortest path</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">routing</span><span class="o">::</span><span class="n">LaneletPath</span><span class="o">&gt;</span> <span class="n">shortestPath</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">shortestPath</span><span class="p">();</span>
<span class="c1">// Get the full lane of a given lanelet 'll'</span>
<span class="n">LaneletSequence</span> <span class="n">fullLane</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">fullLane</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>
<span class="c1">// Get remaining lane of a given lanelet 'll'</span>
<span class="n">LaneletSequence</span> <span class="n">remainingLane</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">remainingLane</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>

</code></pre></div></div>

<h1 id="5-interconnect-routing-graphs-of-different-participants">5. Interconnect Routing Graphs of Different Participants</h1>
<p>A <code class="language-plaintext highlighter-rouge">RoutingGraphContainer</code> can be used to <em>connect</em> graphs of different participants to get information about conflicting lanelets.</p>
<h2 id="create-a-routinggraphcontainer">Create a RoutingGraphContainer</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">RoutingGraphPtr</span><span class="o">&gt;</span> <span class="n">graphs</span><span class="p">;</span>
<span class="n">graphs</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">vehicleGraphLaneletMap</span><span class="p">);</span>
<span class="n">graphs</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">pedestrianGraphLaneletMap</span><span class="p">);</span>
<span class="n">RoutingGraphContainer</span> <span class="nf">container</span><span class="p">(</span><span class="n">graphs</span><span class="p">);</span>

</code></pre></div></div>
<h2 id="example-queries">Example Queries</h2>
<p>The last parameter <em>participantHeight</em> is optional and decides whether conflicting lanelets are determined in 2D or 3D.</p>

<h3 id="query-for-a-single-lanelet">Query for a single lanelet</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">heightClearance</span><span class="p">{</span><span class="mf">4.</span><span class="p">};</span> <span class="c1">// Height of the traffic participant</span>
<span class="c1">// Query a single graph for conflicting lanelets</span>
<span class="kt">size_t</span> <span class="n">routingGraphId</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>   <span class="c1">// E.g. 0 for the first graph</span>
<span class="n">ConstLanelets</span> <span class="n">conflictingVehicle</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingInGraph</span><span class="p">(</span><span class="n">bridgeLanelet</span><span class="p">,</span> <span class="n">routingGraphId</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>
<span class="c1">// Query all graphs for conflicting lanelets</span>
<span class="n">RoutingGraphContainer</span><span class="o">::</span><span class="n">ConflictingInGraphs</span> <span class="n">conflicting</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingInGraphs</span><span class="p">(</span><span class="n">bridgeLanelet</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>

</code></pre></div></div>

<h3 id="query-for-a-whole-route">Query for a Whole Route</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Conflicting lanelets of a route in a single graph</span>
<span class="n">ConstLanelets</span> <span class="n">conflictingVehicle</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingOfRouteInGraph</span><span class="p">(</span><span class="n">routePtr</span><span class="p">,</span> <span class="n">routingGraphId</span><span class="p">)};</span>
<span class="c1">// Conflicting lanelets of a route in all graphs</span>
<span class="n">RoutingGraphContainer</span><span class="o">::</span><span class="n">ConflictingInGraphs</span> <span class="n">result</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingOfRouteInGraphs</span><span class="p">(</span><span class="n">routePtr</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>

</code></pre></div></div>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-lanelet2_routing">Changelog for package lanelet2_routing</h1>

<h2 id="122-2024-10-25">1.2.2 (2024-10-25)</h2>

<ul>
  <li>Prevent unintended modification of graph in lanelet::routing::Route
(<a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/issues/352">#352</a>)</li>
  <li>Build documentation with mkdocs
(<a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/issues/321">#321</a>)</li>
  <li>Contributors: DavUhll, poggenhans</li>
</ul>

<h2 id="121-2023-05-10">1.2.1 (2023-05-10)</h2>

<ul>
  <li>Update thirdparty deps, rework projected point, enable python
3.10/3.11 (<a href="https://github.com/immel-f/Lanelet2/issues/300">#300</a>)</li>
  <li>Contributors: poggenhans</li>
</ul>

<h2 id="120-2023-01-30">1.2.0 (2023-01-30)</h2>

<ul>
  <li>Add CI using GitHub Actions
(<a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/issues/256">#256</a>)</li>
  <li>Use TYPED_TEST_SUITE over deprecated TYPED_TEST_CASE in unit
tests</li>
  <li>Add missing include for boost 1.69</li>
  <li>Contributors: Fabian Poggenhans, Fabian Immel</li>
</ul>

<h2 id="111-2020-09-14">1.1.1 (2020-09-14)</h2>

<h2 id="110-2020-09-06">1.1.0 (2020-09-06)</h2>

<ul>
  <li>Implement more flexible configuration for obtaining possible paths.
Still lacking proper tests</li>
  <li>Add parameter to left/right/adjacentLeft/adjacentRight so that they
can be queried based on routing cost id</li>
  <li>Fix routing for lane changes, add tests for it</li>
  <li>Fix wrong route in circles</li>
  <li>Fix unittests that rely on a non-writable root directory</li>
  <li>Add experimental support for building with colcon on ros2 and
ament_cmake</li>
  <li>Fix the documentation about how to create a routing graph</li>
  <li>Removing extra semicolons causing warnings with wpedantic.</li>
  <li>Making all includes in lanelet2_routing consistent.</li>
  <li>Updating package.xml files to format 3.</li>
  <li>Fix use of equals in older boost versions</li>
  <li>Arbitrary lanelet and area adjacencies in LaneletPaths</li>
  <li>Add functionality to create the bounding polygon from a Path</li>
  <li>Contributors: Fabian Poggenhans, Johannes Janosovits, Joshua Whitley</li>
</ul>

<h2 id="101-2020-03-24">1.0.1 (2020-03-24)</h2>

<ul>
  <li>Mention laneletSubmap in README</li>
  <li>Make sure lanelet2 buildtool_export_depends on mrt_cmake_modules</li>
  <li>Add changelogs</li>
  <li>Fix clang-tidy warnings</li>
  <li>Contributors: Fabian Poggenhans</li>
</ul>

<h2 id="100-2020-03-03">1.0.0 (2020-03-03)</h2>

<ul>
  <li>Bump version to 1.0</li>
  <li>Routing: Add shortest path search based on areas</li>
  <li>Fix default values for lane changes in RoutingGraph</li>
  <li>RoutingGraph and Route now use the new LaneletSubmap to store the
lanelets they are using their member functions laneletMap() and
passableMap() are now deprecated and should be replaced by
laneletSubmap() and passableSubmap() respectively. These functions
have less overhead and are less likely to be misinterpreted as
'maps containing only the lanelets you need'</li>
  <li>Edges with nonfinite costs are no longer added to the graph to avoid
overflows. If a cost function returns infinite costs, no edge will
be added and the connection will not be available to the routing
graph</li>
  <li>Introduce proper namespacing for internal objects</li>
  <li>Update documentation</li>
  <li>Routing graph and route object now support queries with a custom
search function Routing graph and route object now both have a
function forEachSuccessor (and more) for doing more advanced
queries. Added doc tests and python bindings</li>
  <li>Update the shortest path algorithm to use the new dijktra search</li>
  <li>Extended and simplified the reachablePath/Set functions by using
boost graphs implementation of dijkstras shortest paths</li>
  <li>Refactored the internal representation of the route. Cleaned up
headers that are only supposed to be used internally</li>
  <li>Complete rewrite of the route builder using boost graph</li>
  <li>Removed the "diverging" and "merging" classification from the
routing graph and update the doc They are now all represented with
the "succeeding" relation. Information about merging or diverging
can now be obtained simply by querying the number of
following/preceding lanelets. As a consequence, the route object no
longer caches queried "lanes". The responsible functions are now
const.</li>
  <li>Fix compiler errors with gcc 5</li>
  <li>Fix image paths in routing doc</li>
  <li>Initial commit</li>
  <li>Contributors: Fabian Poggenhans, Johannes Janosovits, Maximilian
Naumann</li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kilted-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/lanelet2_routing/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kilted-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/catkin#kilted-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/catkin#kilted">catkin  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_core#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_core#kilted">ament_cmake_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/mrt_cmake_modules#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/mrt_cmake_modules#kilted">mrt_cmake_modules  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/lanelet2_core#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/lanelet2_core#kilted">lanelet2_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/lanelet2_traffic_rules#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/lanelet2_traffic_rules#kilted">lanelet2_traffic_rules  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/gtest">gtest</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/boost">boost</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2#kilted">lanelet2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2#kilted-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_examples#kilted">lanelet2_examples</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_examples#kilted-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_python#kilted">lanelet2_python</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_python#kilted-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_validation#kilted">lanelet2_validation</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_validation#kilted-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/autoware_lanelet2_extension#kilted">autoware_lanelet2_extension</a></td>
                      <td class="text-center">
                        
                        <a href="/p/autoware_lanelet2_extension#kilted-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/autoware_lanelet2_extension_python#kilted">autoware_lanelet2_extension_python</a></td>
                      <td class="text-center">
                        
                        <a href="/p/autoware_lanelet2_extension_python#kilted-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kilted-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kilted-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>lanelet2_routing</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="kilted-question-list" class="panel-body" style="display: none;"></div>
      <div id="kilted-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/lanelet2_routing+kilted">here</a>.</p>
      </div>
      <div id="kilted-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/fzi-forschungszentrum-informatik/lanelet2.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/kilted/p/lanelet2_routing"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/lanelet2_routing">lanelet2_routing</a> <small>package from <a style="text-decoration:none" href="/r/lanelet2/github-fzi-forschungszentrum-informatik-lanelet2">lanelet2</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2">

lanelet2
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_core">

lanelet2_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_examples">

lanelet2_examples
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_io">

lanelet2_io
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_maps">

lanelet2_maps
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_matching">

lanelet2_matching
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_projection">

lanelet2_projection
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_python">

lanelet2_python
</a>
            
          
            
            
              <span class="label label-default pkg-label">

lanelet2_routing
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_traffic_rules">

lanelet2_traffic_rules
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_validation">

lanelet2_validation
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/rolling/p/lanelet2_routing"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="rolling-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#rolling-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#rolling-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#rolling-deps" data-toggle="tab"><span class="label label-primary">7</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#rolling-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#rolling-questions" data-toggle="tab"><span id="rolling-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="rolling-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>1.2.2</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-info">
                  
                    CATKIN</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Map handling framework for automated driving</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/fzi-forschungszentrum-informatik/lanelet2.git">https://github.com/fzi-forschungszentrum-informatik/lanelet2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-03-03
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/lanelet2/#rolling-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/lanelet2/#rolling-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/lanelet2/#rolling-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Routing module for lanelet2
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2.git">Repository</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Fabian Immel</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Matthias Mayr</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing/README.md" title="Open in git repository">lanelet2_routing/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="lanelet2-routing">Lanelet2 routing</h1>

<p>The routing module for lanelet2.</p>

<p>For a short version of this you can also look at <a href="https://htmlpreview.github.io/?https://github.com/fzi-forschungszentrum-informatik/Lanelet2/blob/master/lanelet2_routing/doc/lanelet2_routing.html">the presentation</a>. If some images do not render correctly, please clone the repository and open the html file in your browser.</p>

<p>This readme covers some basics. The API offers more than that.</p>

<h1 id="1-components-and-vocabulary">1. Components and Vocabulary</h1>
<h2 id="how-to-create-a-routing-graph">How to create a Routing Graph</h2>
<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/components.png" alt=""></p>

<p>The needed components to create a routing graph are:</p>

<p><strong>Routing Cost Modules:</strong></p>
<ul>
  <li>They generically determine the routing cost for travelling along a lanelet/area</li>
  <li>Can be e.g. length, travel time</li>
  <li>You can dynamically select between them when querying the routing graph</li>
  <li><strong>You can easily plug in your own routing cost calculation</strong></li>
  <li><em>Influences the prefered path</em></li>
</ul>

<p><strong>Traffic Rules for a Specific Participant</strong> (see <a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/tree/master/lanelet2_traffic_rules/README.md">lanelet2_traffic_rules</a>)</p>
<ul>
  <li>Determines which lanelets/areas are passable</li>
  <li><em>Influences the possible paths</em></li>
</ul>

<p><strong>Lanelet Map:</strong> (see <a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing/../lanelet2_core/README.md">lanelet2_core</a>)</p>
<ul>
  <li>Map with Lanelets, Areas, Regulatory Elements, …</li>
</ul>

<h2 id="relations">Relations</h2>
<p>Lanelets that are part of a routing graph can have relations to each other:
<img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/max-hose.png" alt=""></p>

<p>The possible relations are:
    * <code class="language-plaintext highlighter-rouge">left</code>, <code class="language-plaintext highlighter-rouge">right</code> (reachable via lane change)
    * <code class="language-plaintext highlighter-rouge">adjacent left</code>, <code class="language-plaintext highlighter-rouge">adjacent right</code> (lanelets that are neighbours but not reachable via lane change)
    * <code class="language-plaintext highlighter-rouge">succeeding</code> (relation between two subsequent lanelets)
    * <code class="language-plaintext highlighter-rouge">conflicting</code> (intersecting lanelets/areas)
    * <code class="language-plaintext highlighter-rouge">area</code> (reachable area to lanelet/area relation)</p>

<h2 id="route-vs-path-vs-sequence">Route vs Path vs Sequence</h2>
<p>When querying data in the routing graph, you will come across the terms <em>route</em>, <em>path</em> and <em>sequence</em>. In contrast to a simple set of lanelets (data-wise a vector of lanelets), they have a special meaning and are data-wise different classes.</p>

<p>A <em>route</em> means all the lanelets that can be used to a destination without driving a different road. They can be connected by a generic sequence of lane changes and successors.</p>

<p>A <em>path</em> (LaneletPath or LaneletOrAreaPath) is an ordered list of Lanelets/Areas that lead to the destination. They can be connected by lane changes.</p>

<p>A <em>sequence</em> (LaneletSequence) is a sequence of subsequent Lanelets that is not separated by a lane change (think of it as a <em>lane</em>). It does not necessary lead to a destination, instead it ends when a lane change is required. In the example image, the lanelets A, D, B form a valid <em>sequence</em> (and also a valid <em>path</em>), while the lanelets A, D, E are a valid <em>path</em>, but not a valid <em>sequence</em>.</p>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/shortest_path_and_route.png" alt=""></p>

<h1 id="2-code-usage">2. Code Usage</h1>

<h2 id="create-a-routing-graph">Create a Routing Graph</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="k">namespace</span> <span class="n">lanelet</span><span class="p">;</span>

<span class="c1">// Load a map</span>
<span class="n">LaneletMapPtr</span> <span class="n">map</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s">"map.osm"</span><span class="p">,</span> <span class="n">Origin</span><span class="p">({</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">}));</span> <span class="c1">// origin has to be close to the map data in lat/lon coordinates</span>

<span class="c1">// Initialize traffic rules</span>
<span class="n">TrafficRulesPtr</span> <span class="n">trafficRules</span><span class="p">{</span><span class="n">TrafficRulesFactory</span><span class="o">::</span><span class="n">instance</span><span class="p">().</span><span class="n">create</span><span class="p">(</span><span class="n">Locations</span><span class="o">::</span><span class="n">Germany</span><span class="p">,</span> <span class="n">Participants</span><span class="o">::</span><span class="n">Vehicle</span><span class="p">)};</span>

<span class="c1">// Optional: Initalize routing costs</span>
<span class="kt">double</span> <span class="n">laneChangeCost</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">RoutingCostPtrs</span> <span class="n">costPtrs</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">RoutingCostDistance</span><span class="o">&gt;</span><span class="p">(</span><span class="n">laneChangeCost</span><span class="p">)};</span>

<span class="c1">// Optional: Initialize config for routing graph:</span>
<span class="n">RoutingGraph</span><span class="o">::</span><span class="n">Configuration</span> <span class="n">routingGraphConf</span><span class="p">;</span>
<span class="n">routingGraphConf</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="n">RoutingGraph</span><span class="o">::</span><span class="n">ParticipantHeight</span><span class="p">,</span> <span class="n">Attribute</span><span class="p">(</span><span class="s">"2."</span><span class="p">)));</span>

<span class="c1">// Create routing graph</span>
<span class="n">RoutingGraphPtr</span> <span class="n">graph</span> <span class="o">=</span> <span class="n">RoutingGraph</span><span class="o">::</span><span class="n">build</span><span class="p">(</span><span class="n">map</span><span class="p">,</span> <span class="n">trafficRules</span> <span class="cm">/*, costPtrs, routingGraphConf*/</span><span class="p">);</span>

</code></pre></div></div>
<ul>
  <li>The traffic rules object represents the view from which the map will be interpreted. Doing routing with vehicle traffic
rules will yield different results than routing with e.g. bicycle traffic rules.</li>
  <li>Routing for bicycles might include lanelets that are not available to (motorized)vehicles and vice versa.</li>
</ul>

<p>The python interface works similarly:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">lanelet2</span>
<span class="nb">map</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="sh">"</span><span class="s">map.osm</span><span class="sh">"</span><span class="p">,</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nc">Origin</span><span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">trafficRules</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="n">Locations</span><span class="p">.</span><span class="n">Germany</span><span class="p">,</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="n">Participants</span><span class="p">.</span><span class="n">Vehicle</span><span class="p">)</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">routing</span><span class="p">.</span><span class="nc">RoutingGraph</span><span class="p">(</span><span class="nb">map</span><span class="p">,</span> <span class="n">trafficRules</span><span class="p">)</span>

</code></pre></div></div>
<h2 id="get-a-shortest-path">Get a shortest path</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Optional</span><span class="o">&lt;</span><span class="n">routing</span><span class="o">::</span><span class="n">LaneletPath</span><span class="o">&gt;</span> <span class="n">shortestPath</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">shortestPath</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">);</span>

</code></pre></div></div>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">Optional</code> will be uninitialized (false) if there’s no path</li>
  <li>there’s also <code class="language-plaintext highlighter-rouge">shortestPathWithVia</code>
</li>
</ul>

<p>in python:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">shortestPath</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nf">shortestPath</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">)</span>

</code></pre></div></div>
<p>In python, shortestPath simply returns <code class="language-plaintext highlighter-rouge">None</code> if there is no path.</p>

<h2 id="get-and-write-a-route">Get and write a route</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Route</span><span class="o">&gt;</span> <span class="n">route</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">getRoute</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">route</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">LaneletSubmapConstPtr</span> <span class="n">routeMap</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">laneletSubmap</span><span class="p">();</span>
        <span class="n">write</span><span class="p">(</span><span class="s">"route.osm"</span><span class="p">,</span> <span class="o">*</span><span class="n">routeMap</span><span class="o">-&gt;</span><span class="n">laneletMap</span><span class="p">(),</span> <span class="n">Origin</span><span class="p">({</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">}));</span>
    <span class="p">}</span>

</code></pre></div></div>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">Optional</code> will be uninitialized (false) if there’s no route</li>
</ul>

<p>Note that there is a semantic difference between a <code class="language-plaintext highlighter-rouge">LaneletSubmap</code> and a <code class="language-plaintext highlighter-rouge">LaneletMap</code>. While a LaneletSubmap only contains
the things you explicitly added, the <code class="language-plaintext highlighter-rouge">LaneletMap</code> also contains all the things referred by them (the Points, Linestrings, things referred by RegulatoryElements).
The <code class="language-plaintext highlighter-rouge">LaneletSubmap</code> in this case only contains the Lanelets of the route. But since this is not sufficient for writing, you need to transform it into a regular <code class="language-plaintext highlighter-rouge">LaneletMap</code> first.</p>

<p>The written map will therefore not only contain the Lanelets but also their RegulatoryElements.
If these RegulatoryElements contain other Lanelets, these Lanelets will be part of the written map as well, even if they are not on the route.</p>

<p>in python:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">route</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nf">getRoute</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">)</span>
<span class="k">if</span> <span class="n">route</span><span class="p">:</span>
    <span class="n">laneletSubmap</span> <span class="o">=</span> <span class="n">route</span><span class="p">.</span><span class="nf">laneletSubmap</span><span class="p">()</span>
    <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">route.osm</span><span class="sh">"</span><span class="p">,</span> <span class="n">laneletSubmap</span><span class="p">.</span><span class="nf">laneletMap</span><span class="p">(),</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nc">Origin</span><span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">)))</span>

</code></pre></div></div>

<h2 id="get-a-reachable-set-of-lanelets">Get a reachable set of lanelets</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">maxRoutingCost</span><span class="p">{</span><span class="mi">100</span><span class="p">};</span>
<span class="n">ConstLanelets</span> <span class="n">reachableSet</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">reachableSet</span><span class="p">(</span><span class="n">lanelet</span><span class="p">,</span> <span class="n">maxRoutingCost</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">);</span>

</code></pre></div></div>

<h2 id="left-right-following-lanelets">Left, Right, Following Lanelets</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get routable left lanelet if it exists</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLanelet</span><span class="o">&gt;</span> <span class="n">left</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>
<span class="c1">// Get non-routable left lanelet if it exists</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLanelet</span><span class="o">&gt;</span> <span class="n">adjacentLeft</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">adjacentLeft</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>
<span class="c1">// Get following lanelets</span>
<span class="n">ConstLanelets</span> <span class="n">following</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">following</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>

</code></pre></div></div>
<ul>
  <li>Also available: <code class="language-plaintext highlighter-rouge">right</code>, <code class="language-plaintext highlighter-rouge">adjacentRight</code>, <code class="language-plaintext highlighter-rouge">lefts</code>, <code class="language-plaintext highlighter-rouge">rights</code>, <code class="language-plaintext highlighter-rouge">conflicting</code>
</li>
</ul>

<p>Alternatively:
 or queries that return relations:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get relations to all left lanelets</span>
<span class="n">LaneletRelations</span> <span class="n">leftRelations</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">leftRelations</span><span class="p">(</span>
                                                <span class="n">fromLanelet</span><span class="p">);</span>

</code></pre></div></div>
<p>There’s <code class="language-plaintext highlighter-rouge">leftRelations</code> that returns a vector of pairs of LaneletRelations whereas RelationType can be ‘left’ or ‘adjacentLeft’ in this case</p>

<h2 id="more">More</h2>

<p>This is just a quick walkthrough. Advanced examples can be found in <a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing/../lanelet2_examples/README.md">lanelet2_examples</a>.</p>

<h1 id="3-export-and-debugging-routing-graphs">3. Export and Debugging Routing Graphs</h1>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/lanelet_map_routing_graph.png" alt=""></p>

<h2 id="laneletmap-with-routing-information">LaneletMap with Routing Information</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">LaneletMapConstPtr</span> <span class="n">debugLaneletMap</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">getDebugLaneletMap</span><span class="p">(</span><span class="n">RoutingCostId</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<span class="n">write</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">"routing_graph.osm"</span><span class="p">),</span> <span class="o">*</span><span class="n">debugLaneletMap</span><span class="p">);</span>

</code></pre></div></div>
<p>This one is best viewed in <a href="https://josm.openstreetmap.de/">JOSM</a> and using a custom map style css which is to be found in <code class="language-plaintext highlighter-rouge">res/routing.mapcss</code>. <a href="https://josm.openstreetmap.de/attachment/wiki/Styles/addstyle.gif">This gif</a> shows, how to add a style to JOSM, except that one needs to press the <code class="language-plaintext highlighter-rouge">+</code> button in the configuration menu and specify the file.</p>

<p>Most of the information is to be found in the attributes. The line strings that connect lanelets do have a direction. The name of the forth-direction is generally to be found left/above the line and the reverse relation right/under the string.</p>

<h2 id="dot-graphviz-and-graphml-xml-based-file-export">DOT (GraphViz) and GraphML (xml-based) file export</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">graph</span><span class="o">-&gt;</span><span class="n">exportGraphViz</span><span class="p">(</span><span class="s">"~/graph.gv"</span><span class="p">);</span>
<span class="n">graph</span><span class="o">-&gt;</span><span class="n">exportGraphML</span><span class="p">(</span><span class="s">"~/graph.graphml"</span><span class="p">);</span>

</code></pre></div></div>
<p>These can then be viewed with a graph viewer like <a href="https://gephi.org/">Gephi</a>. The downside compared to the laneletMap export is, that the lanelets aren’t localized.</p>

<h1 id="4-routes">4. Routes</h1>

<p>Example route through <code class="language-plaintext highlighter-rouge">Oststadtkreisel</code>:</p>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/lanelet_map_route_oststadtkreisel_small.jpg" alt=""></p>

<p>Output of <code class="language-plaintext highlighter-rouge">getDebugLaneletMap()</code> function:</p>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/lanelet_map_route.png" alt=""></p>

<h2 id="example-relational-queries-on-routes">Example Relational Queries on Routes:</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get left lanelet of example lanelet 'll'</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLaneletRelation</span><span class="o">&gt;</span> <span class="n">left</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">leftRelation</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>
<span class="c1">// Get conflicting lanelets of 'll'</span>
<span class="n">ConstLanelets</span> <span class="n">conflicting</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">conflictingInRoute</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>


</code></pre></div></div>
<p>Note that a route just returns relations to lanelets that can be used to reach the goal.</p>
<h2 id="other-example-queries">Other example queries:</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get underlying shortest path</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">routing</span><span class="o">::</span><span class="n">LaneletPath</span><span class="o">&gt;</span> <span class="n">shortestPath</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">shortestPath</span><span class="p">();</span>
<span class="c1">// Get the full lane of a given lanelet 'll'</span>
<span class="n">LaneletSequence</span> <span class="n">fullLane</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">fullLane</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>
<span class="c1">// Get remaining lane of a given lanelet 'll'</span>
<span class="n">LaneletSequence</span> <span class="n">remainingLane</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">remainingLane</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>

</code></pre></div></div>

<h1 id="5-interconnect-routing-graphs-of-different-participants">5. Interconnect Routing Graphs of Different Participants</h1>
<p>A <code class="language-plaintext highlighter-rouge">RoutingGraphContainer</code> can be used to <em>connect</em> graphs of different participants to get information about conflicting lanelets.</p>
<h2 id="create-a-routinggraphcontainer">Create a RoutingGraphContainer</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">RoutingGraphPtr</span><span class="o">&gt;</span> <span class="n">graphs</span><span class="p">;</span>
<span class="n">graphs</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">vehicleGraphLaneletMap</span><span class="p">);</span>
<span class="n">graphs</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">pedestrianGraphLaneletMap</span><span class="p">);</span>
<span class="n">RoutingGraphContainer</span> <span class="nf">container</span><span class="p">(</span><span class="n">graphs</span><span class="p">);</span>

</code></pre></div></div>
<h2 id="example-queries">Example Queries</h2>
<p>The last parameter <em>participantHeight</em> is optional and decides whether conflicting lanelets are determined in 2D or 3D.</p>

<h3 id="query-for-a-single-lanelet">Query for a single lanelet</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">heightClearance</span><span class="p">{</span><span class="mf">4.</span><span class="p">};</span> <span class="c1">// Height of the traffic participant</span>
<span class="c1">// Query a single graph for conflicting lanelets</span>
<span class="kt">size_t</span> <span class="n">routingGraphId</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>   <span class="c1">// E.g. 0 for the first graph</span>
<span class="n">ConstLanelets</span> <span class="n">conflictingVehicle</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingInGraph</span><span class="p">(</span><span class="n">bridgeLanelet</span><span class="p">,</span> <span class="n">routingGraphId</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>
<span class="c1">// Query all graphs for conflicting lanelets</span>
<span class="n">RoutingGraphContainer</span><span class="o">::</span><span class="n">ConflictingInGraphs</span> <span class="n">conflicting</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingInGraphs</span><span class="p">(</span><span class="n">bridgeLanelet</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>

</code></pre></div></div>

<h3 id="query-for-a-whole-route">Query for a Whole Route</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Conflicting lanelets of a route in a single graph</span>
<span class="n">ConstLanelets</span> <span class="n">conflictingVehicle</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingOfRouteInGraph</span><span class="p">(</span><span class="n">routePtr</span><span class="p">,</span> <span class="n">routingGraphId</span><span class="p">)};</span>
<span class="c1">// Conflicting lanelets of a route in all graphs</span>
<span class="n">RoutingGraphContainer</span><span class="o">::</span><span class="n">ConflictingInGraphs</span> <span class="n">result</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingOfRouteInGraphs</span><span class="p">(</span><span class="n">routePtr</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>

</code></pre></div></div>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-lanelet2_routing">Changelog for package lanelet2_routing</h1>

<h2 id="122-2024-10-25">1.2.2 (2024-10-25)</h2>

<ul>
  <li>Prevent unintended modification of graph in lanelet::routing::Route
(<a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/issues/352">#352</a>)</li>
  <li>Build documentation with mkdocs
(<a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/issues/321">#321</a>)</li>
  <li>Contributors: DavUhll, poggenhans</li>
</ul>

<h2 id="121-2023-05-10">1.2.1 (2023-05-10)</h2>

<ul>
  <li>Update thirdparty deps, rework projected point, enable python
3.10/3.11 (<a href="https://github.com/immel-f/Lanelet2/issues/300">#300</a>)</li>
  <li>Contributors: poggenhans</li>
</ul>

<h2 id="120-2023-01-30">1.2.0 (2023-01-30)</h2>

<ul>
  <li>Add CI using GitHub Actions
(<a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/issues/256">#256</a>)</li>
  <li>Use TYPED_TEST_SUITE over deprecated TYPED_TEST_CASE in unit
tests</li>
  <li>Add missing include for boost 1.69</li>
  <li>Contributors: Fabian Poggenhans, Fabian Immel</li>
</ul>

<h2 id="111-2020-09-14">1.1.1 (2020-09-14)</h2>

<h2 id="110-2020-09-06">1.1.0 (2020-09-06)</h2>

<ul>
  <li>Implement more flexible configuration for obtaining possible paths.
Still lacking proper tests</li>
  <li>Add parameter to left/right/adjacentLeft/adjacentRight so that they
can be queried based on routing cost id</li>
  <li>Fix routing for lane changes, add tests for it</li>
  <li>Fix wrong route in circles</li>
  <li>Fix unittests that rely on a non-writable root directory</li>
  <li>Add experimental support for building with colcon on ros2 and
ament_cmake</li>
  <li>Fix the documentation about how to create a routing graph</li>
  <li>Removing extra semicolons causing warnings with wpedantic.</li>
  <li>Making all includes in lanelet2_routing consistent.</li>
  <li>Updating package.xml files to format 3.</li>
  <li>Fix use of equals in older boost versions</li>
  <li>Arbitrary lanelet and area adjacencies in LaneletPaths</li>
  <li>Add functionality to create the bounding polygon from a Path</li>
  <li>Contributors: Fabian Poggenhans, Johannes Janosovits, Joshua Whitley</li>
</ul>

<h2 id="101-2020-03-24">1.0.1 (2020-03-24)</h2>

<ul>
  <li>Mention laneletSubmap in README</li>
  <li>Make sure lanelet2 buildtool_export_depends on mrt_cmake_modules</li>
  <li>Add changelogs</li>
  <li>Fix clang-tidy warnings</li>
  <li>Contributors: Fabian Poggenhans</li>
</ul>

<h2 id="100-2020-03-03">1.0.0 (2020-03-03)</h2>

<ul>
  <li>Bump version to 1.0</li>
  <li>Routing: Add shortest path search based on areas</li>
  <li>Fix default values for lane changes in RoutingGraph</li>
  <li>RoutingGraph and Route now use the new LaneletSubmap to store the
lanelets they are using their member functions laneletMap() and
passableMap() are now deprecated and should be replaced by
laneletSubmap() and passableSubmap() respectively. These functions
have less overhead and are less likely to be misinterpreted as
'maps containing only the lanelets you need'</li>
  <li>Edges with nonfinite costs are no longer added to the graph to avoid
overflows. If a cost function returns infinite costs, no edge will
be added and the connection will not be available to the routing
graph</li>
  <li>Introduce proper namespacing for internal objects</li>
  <li>Update documentation</li>
  <li>Routing graph and route object now support queries with a custom
search function Routing graph and route object now both have a
function forEachSuccessor (and more) for doing more advanced
queries. Added doc tests and python bindings</li>
  <li>Update the shortest path algorithm to use the new dijktra search</li>
  <li>Extended and simplified the reachablePath/Set functions by using
boost graphs implementation of dijkstras shortest paths</li>
  <li>Refactored the internal representation of the route. Cleaned up
headers that are only supposed to be used internally</li>
  <li>Complete rewrite of the route builder using boost graph</li>
  <li>Removed the "diverging" and "merging" classification from the
routing graph and update the doc They are now all represented with
the "succeeding" relation. Information about merging or diverging
can now be obtained simply by querying the number of
following/preceding lanelets. As a consequence, the route object no
longer caches queried "lanes". The responsible functions are now
const.</li>
  <li>Fix compiler errors with gcc 5</li>
  <li>Fix image paths in routing doc</li>
  <li>Initial commit</li>
  <li>Contributors: Fabian Poggenhans, Johannes Janosovits, Maximilian
Naumann</li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="rolling-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/lanelet2_routing/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="rolling-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/catkin#rolling-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/catkin#rolling">catkin  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_core#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_core#rolling">ament_cmake_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/mrt_cmake_modules#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/mrt_cmake_modules#rolling">mrt_cmake_modules  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/lanelet2_core#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/lanelet2_core#rolling">lanelet2_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/lanelet2_traffic_rules#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/lanelet2_traffic_rules#rolling">lanelet2_traffic_rules  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/gtest">gtest</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/boost">boost</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2#rolling">lanelet2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2#rolling-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_examples#rolling">lanelet2_examples</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_examples#rolling-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_python#rolling">lanelet2_python</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_python#rolling-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_validation#rolling">lanelet2_validation</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_validation#rolling-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/autoware_lanelet2_extension#rolling">autoware_lanelet2_extension</a></td>
                      <td class="text-center">
                        
                        <a href="/p/autoware_lanelet2_extension#rolling-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/autoware_lanelet2_extension_python#rolling">autoware_lanelet2_extension_python</a></td>
                      <td class="text-center">
                        
                        <a href="/p/autoware_lanelet2_extension_python#rolling-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="rolling-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="rolling-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>lanelet2_routing</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="rolling-question-list" class="panel-body" style="display: none;"></div>
      <div id="rolling-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/lanelet2_routing+rolling">here</a>.</p>
      </div>
      <div id="rolling-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/fzi-forschungszentrum-informatik/lanelet2.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/rolling/p/lanelet2_routing"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/lanelet2_routing">lanelet2_routing</a> <small>package from <a style="text-decoration:none" href="/r/trajgen/github-gaoyinfeng-trajgen">trajgen</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2">

lanelet2
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_core">

lanelet2_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_examples">

lanelet2_examples
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_io">

lanelet2_io
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_maps">

lanelet2_maps
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_matching">

lanelet2_matching
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_projection">

lanelet2_projection
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_python">

lanelet2_python
</a>
            
          
            
            
              <span class="label label-default pkg-label">

lanelet2_routing
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_traffic_rules">

lanelet2_traffic_rules
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_validation">

lanelet2_validation
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/github/p/lanelet2_routing"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/gaoyinfeng/trajgen/tree/main/Lanelet2/lanelet2_routing"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="github-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#github-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#github-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#github-deps" data-toggle="tab"><span class="label label-primary">7</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#github-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#github-questions" data-toggle="tab"><span id="github-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="github-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>1.1.1</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-info">
                  
                    CATKIN</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">(T-ITS) TrajGen: Generating Realistic and Diverse Trajectories With Reactive and Feasible Agent Behaviors for Autonomous Driving</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/gaoyinfeng/trajgen.git">https://github.com/gaoyinfeng/trajgen.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">main</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-01-06
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNKNOWN
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/trajgen/#github-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/trajgen/#github-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/trajgen/#github-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Routing module for lanelet2
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2.git">Repository</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Fabian Poggenhans</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Matthias Mayr</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/gaoyinfeng/trajgen/tree/main/Lanelet2/lanelet2_routing/README.md" title="Open in git repository">Lanelet2/lanelet2_routing/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="lanelet2-routing">Lanelet2 routing</h1>

<p>The routing module for lanelet2.</p>

<p>For a short version of this you can also look at <a href="https://htmlpreview.github.io/?https://github.com/fzi-forschungszentrum-informatik/Lanelet2/blob/master/lanelet2_routing/doc/lanelet2_routing.html">the presentation</a>. If some images do not render correctly, please clone the repository and open the html file in your browser.</p>

<p>This readme covers some basics. The API offers more than that.</p>

<h1 id="1-components-and-vocabulary">1. Components and Vocabulary</h1>
<h2 id="how-to-create-a-routing-graph">How to create a Routing Graph</h2>
<p><img src="https://raw.githubusercontent.com/gaoyinfeng/trajgen/main/Lanelet2/lanelet2_routing/doc/images/components.png" alt=""></p>

<p>The needed components to create a routing graph are:</p>

<p><strong>Routing Cost Modules:</strong></p>
<ul>
  <li>They generically determine the routing cost for travelling along a lanelet/area</li>
  <li>Can be e.g. length, travel time</li>
  <li>You can dynamically select between them when querying the routing graph</li>
  <li><strong>You can easily plug in your own routing cost calculation</strong></li>
  <li><em>Influences the prefered path</em></li>
</ul>

<p><strong>Traffic Rules for a Specific Participant</strong> (see <a href="https://github.com/gaoyinfeng/trajgen/tree/main/Lanelet2/lanelet2_routing/../lanelet2_traffic_rules/README.md">lanelet2_traffic_rules</a>)</p>
<ul>
  <li>Determines which lanelets/areas are passable</li>
  <li><em>Influences the possible paths</em></li>
</ul>

<p><strong>Lanelet Map:</strong> (see <a href="https://github.com/gaoyinfeng/trajgen/tree/main/Lanelet2/lanelet2_routing/../lanelet2_core/README.md">lanelet2_core</a>)</p>
<ul>
  <li>Map with Lanelets, Areas, Regulatory Elements, …</li>
</ul>

<h2 id="relations">Relations</h2>
<p>Lanelets that are part of a routing graph can have relations to each other:
<img src="https://raw.githubusercontent.com/gaoyinfeng/trajgen/main/Lanelet2/lanelet2_routing/doc/images/max-hose.png" alt=""></p>

<p>The possible relations are:
    * <code class="language-plaintext highlighter-rouge">left</code>, <code class="language-plaintext highlighter-rouge">right</code> (reachable via lane change)
    * <code class="language-plaintext highlighter-rouge">adjacent left</code>, <code class="language-plaintext highlighter-rouge">adjacent right</code> (lanelets that are neighbours but not reachable via lane change)
    * <code class="language-plaintext highlighter-rouge">succeeding</code> (relation between two subsequent lanelets)
    * <code class="language-plaintext highlighter-rouge">conflicting</code> (intersecting lanelets/areas)
    * <code class="language-plaintext highlighter-rouge">area</code> (reachable area to lanelet/area relation)</p>

<h2 id="route-vs-path-vs-sequence">Route vs Path vs Sequence</h2>
<p>When querying data in the routing graph, you will come across the terms <em>route</em>, <em>path</em> and <em>sequence</em>. In contrast to a simple set of lanelets (data-wise a vector of lanelets), they have a special meaning and are data-wise different classes.</p>

<p>A <em>route</em> means all the lanelets that can be used to a destination without driving a different road. They can be connected by a generic sequence of lane changes and successors.</p>

<p>A <em>path</em> (LaneletPath or LaneletOrAreaPath) is an ordered list of Lanelets/Areas that lead to the destination. They can be connected by lane changes.</p>

<p>A <em>sequence</em> (LaneletSequence) is a sequence of subsequent Lanelets that is not separated by a lane change (think of it as a <em>lane</em>). It does not necessary lead to a destination, instead it ends when a lane change is required. In the example image, the lanelets A, D, B form a valid <em>sequence</em> (and also a valid <em>path</em>), while the lanelets A, D, E are a valid <em>path</em>, but not a valid <em>sequence</em>.</p>

<p><img src="https://raw.githubusercontent.com/gaoyinfeng/trajgen/main/Lanelet2/lanelet2_routing/doc/images/shortest_path_and_route.png" alt=""></p>

<h1 id="2-code-usage">2. Code Usage</h1>

<h2 id="create-a-routing-graph">Create a Routing Graph</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="k">namespace</span> <span class="n">lanelet</span><span class="p">;</span>

<span class="c1">// Load a map</span>
<span class="n">LaneletMapPtr</span> <span class="n">map</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s">"map.osm"</span><span class="p">,</span> <span class="n">Origin</span><span class="p">({</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">}));</span> <span class="c1">// origin has to be close to the map data in lat/lon coordinates</span>

<span class="c1">// Initialize traffic rules</span>
<span class="n">TrafficRulesPtr</span> <span class="n">trafficRules</span><span class="p">{</span><span class="n">TrafficRulesFactory</span><span class="o">::</span><span class="n">instance</span><span class="p">().</span><span class="n">create</span><span class="p">(</span><span class="n">Locations</span><span class="o">::</span><span class="n">Germany</span><span class="p">,</span> <span class="n">Participants</span><span class="o">::</span><span class="n">Vehicle</span><span class="p">)};</span>

<span class="c1">// Optional: Initalize routing costs</span>
<span class="kt">double</span> <span class="n">laneChangeCost</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">RoutingCostPtrs</span> <span class="n">costPtrs</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">RoutingCostDistance</span><span class="o">&gt;</span><span class="p">(</span><span class="n">laneChangeCost</span><span class="p">)};</span>

<span class="c1">// Optional: Initialize config for routing graph:</span>
<span class="n">RoutingGraph</span><span class="o">::</span><span class="n">Configuration</span> <span class="n">routingGraphConf</span><span class="p">;</span>
<span class="n">routingGraphConf</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="n">RoutingGraph</span><span class="o">::</span><span class="n">ParticipantHeight</span><span class="p">,</span> <span class="n">Attribute</span><span class="p">(</span><span class="s">"2."</span><span class="p">)));</span>

<span class="c1">// Create routing graph</span>
<span class="n">RoutingGraphPtr</span> <span class="n">graph</span> <span class="o">=</span> <span class="n">RoutingGraph</span><span class="o">::</span><span class="n">build</span><span class="p">(</span><span class="n">map</span><span class="p">,</span> <span class="n">trafficRules</span> <span class="cm">/*, costPtrs, routingGraphConf*/</span><span class="p">);</span>

</code></pre></div></div>
<ul>
  <li>The traffic rules object represents the view from which the map will be interpreted. Doing routing with vehicle traffic
rules will yield different results than routing with e.g. bicycle traffic rules.</li>
  <li>Routing for bicycles might include lanelets that are not available to (motorized)vehicles and vice versa.</li>
</ul>

<p>The python interface works similarly:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">lanelet2</span>
<span class="nb">map</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="sh">"</span><span class="s">map.osm</span><span class="sh">"</span><span class="p">,</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nc">Origin</span><span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">trafficRules</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="n">Locations</span><span class="p">.</span><span class="n">Germany</span><span class="p">,</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="n">Participants</span><span class="p">.</span><span class="n">Vehicle</span><span class="p">)</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">routing</span><span class="p">.</span><span class="nc">RoutingGraph</span><span class="p">(</span><span class="nb">map</span><span class="p">,</span> <span class="n">trafficRules</span><span class="p">)</span>

</code></pre></div></div>
<h2 id="get-a-shortest-path">Get a shortest path</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Optional</span><span class="o">&lt;</span><span class="n">routing</span><span class="o">::</span><span class="n">LaneletPath</span><span class="o">&gt;</span> <span class="n">shortestPath</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">shortestPath</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">);</span>

</code></pre></div></div>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">Optional</code> will be uninitialized (false) if there’s no path</li>
  <li>there’s also <code class="language-plaintext highlighter-rouge">shortestPathWithVia</code>
</li>
</ul>

<p>in python:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">shortestPath</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nf">shortestPath</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">)</span>

</code></pre></div></div>
<p>In python, shortestPath simply returns <code class="language-plaintext highlighter-rouge">None</code> if there is no path.</p>

<h2 id="get-and-write-a-route">Get and write a route</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Route</span><span class="o">&gt;</span> <span class="n">route</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">getRoute</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">route</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">LaneletSubmapConstPtr</span> <span class="n">routeMap</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">laneletSubmap</span><span class="p">();</span>
        <span class="n">write</span><span class="p">(</span><span class="s">"route.osm"</span><span class="p">,</span> <span class="o">*</span><span class="n">routeMap</span><span class="o">-&gt;</span><span class="n">laneletMap</span><span class="p">(),</span> <span class="n">Origin</span><span class="p">({</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">}));</span>
    <span class="p">}</span>

</code></pre></div></div>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">Optional</code> will be uninitialized (false) if there’s no route</li>
</ul>

<p>Note that there is a semantic difference between a <code class="language-plaintext highlighter-rouge">LaneletSubmap</code> and a <code class="language-plaintext highlighter-rouge">LaneletMap</code>. While a LaneletSubmap only contains
the things you explicitly added, the <code class="language-plaintext highlighter-rouge">LaneletMap</code> also contains all the things referred by them (the Points, Linestrings, things referred by RegulatoryElements).
The <code class="language-plaintext highlighter-rouge">LaneletSubmap</code> in this case only contains the Lanelets of the route. But since this is not sufficient for writing, you need to transform it into a regular <code class="language-plaintext highlighter-rouge">LaneletMap</code> first.</p>

<p>The written map will therefore not only contain the Lanelets but also their RegulatoryElements.
If these RegulatoryElements contain other Lanelets, these Lanelets will be part of the written map as well, even if they are not on the route.</p>

<p>in python:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">route</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nf">getRoute</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">)</span>
<span class="k">if</span> <span class="n">route</span><span class="p">:</span>
    <span class="n">laneletSubmap</span> <span class="o">=</span> <span class="n">route</span><span class="p">.</span><span class="nf">laneletSubmap</span><span class="p">()</span>
    <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">route.osm</span><span class="sh">"</span><span class="p">,</span> <span class="n">laneletSubmap</span><span class="p">.</span><span class="nf">laneletMap</span><span class="p">(),</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nc">Origin</span><span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">)))</span>

</code></pre></div></div>

<h2 id="get-a-reachable-set-of-lanelets">Get a reachable set of lanelets</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">maxRoutingCost</span><span class="p">{</span><span class="mi">100</span><span class="p">};</span>
<span class="n">ConstLanelets</span> <span class="n">reachableSet</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">reachableSet</span><span class="p">(</span><span class="n">lanelet</span><span class="p">,</span> <span class="n">maxRoutingCost</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">);</span>

</code></pre></div></div>

<h2 id="left-right-following-lanelets">Left, Right, Following Lanelets</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get routable left lanelet if it exists</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLanelet</span><span class="o">&gt;</span> <span class="n">left</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>
<span class="c1">// Get non-routable left lanelet if it exists</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLanelet</span><span class="o">&gt;</span> <span class="n">adjacentLeft</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">adjacentLeft</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>
<span class="c1">// Get following lanelets</span>
<span class="n">ConstLanelets</span> <span class="n">following</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">following</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>

</code></pre></div></div>
<ul>
  <li>Also available: <code class="language-plaintext highlighter-rouge">right</code>, <code class="language-plaintext highlighter-rouge">adjacentRight</code>, <code class="language-plaintext highlighter-rouge">lefts</code>, <code class="language-plaintext highlighter-rouge">rights</code>, <code class="language-plaintext highlighter-rouge">conflicting</code>
</li>
</ul>

<p>Alternatively:
 or queries that return relations:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get relations to all left lanelets</span>
<span class="n">LaneletRelations</span> <span class="n">leftRelations</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">leftRelations</span><span class="p">(</span>
                                                <span class="n">fromLanelet</span><span class="p">);</span>

</code></pre></div></div>
<p>There’s <code class="language-plaintext highlighter-rouge">leftRelations</code> that returns a vector of pairs of LaneletRelations whereas RelationType can be ‘left’ or ‘adjacentLeft’ in this case</p>

<h2 id="more">More</h2>

<p>This is just a quick walkthrough. Advanced examples can be found in <a href="https://github.com/gaoyinfeng/trajgen/tree/main/Lanelet2/lanelet2_routing/../lanelet2_examples/README.md">lanelet2_examples</a>.</p>

<h1 id="3-export-and-debugging-routing-graphs">3. Export and Debugging Routing Graphs</h1>

<p><img src="https://raw.githubusercontent.com/gaoyinfeng/trajgen/main/Lanelet2/lanelet2_routing/doc/images/lanelet_map_routing_graph.png" alt=""></p>

<h2 id="laneletmap-with-routing-information">LaneletMap with Routing Information</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">LaneletMapConstPtr</span> <span class="n">debugLaneletMap</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">getDebugLaneletMap</span><span class="p">(</span><span class="n">RoutingCostId</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<span class="n">write</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">"routing_graph.osm"</span><span class="p">),</span> <span class="o">*</span><span class="n">debugLaneletMap</span><span class="p">);</span>

</code></pre></div></div>
<p>This one is best viewed in <a href="https://josm.openstreetmap.de/">JOSM</a> and using a custom map style css which is to be found in <code class="language-plaintext highlighter-rouge">res/routing.mapcss</code>. <a href="https://josm.openstreetmap.de/attachment/wiki/Styles/addstyle.gif">This gif</a> shows, how to add a style to JOSM, except that one needs to press the <code class="language-plaintext highlighter-rouge">+</code> button in the configuration menu and specify the file.</p>

<p>Most of the information is to be found in the attributes. The line strings that connect lanelets do have a direction. The name of the forth-direction is generally to be found left/above the line and the reverse relation right/under the string.</p>

<h2 id="dot-graphviz-and-graphml-xml-based-file-export">DOT (GraphViz) and GraphML (xml-based) file export</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">graph</span><span class="o">-&gt;</span><span class="n">exportGraphViz</span><span class="p">(</span><span class="s">"~/graph.gv"</span><span class="p">);</span>
<span class="n">graph</span><span class="o">-&gt;</span><span class="n">exportGraphML</span><span class="p">(</span><span class="s">"~/graph.graphml"</span><span class="p">);</span>

</code></pre></div></div>
<p>These can then be viewed with a graph viewer like <a href="https://gephi.org/">Gephi</a>. The downside compared to the laneletMap export is, that the lanelets aren’t localized.</p>

<h1 id="4-routes">4. Routes</h1>

<p>Example route through <code class="language-plaintext highlighter-rouge">Oststadtkreisel</code>:</p>

<p><img src="https://raw.githubusercontent.com/gaoyinfeng/trajgen/main/Lanelet2/lanelet2_routing/doc/images/lanelet_map_route_oststadtkreisel_small.jpg" alt=""></p>

<p>Output of <code class="language-plaintext highlighter-rouge">getDebugLaneletMap()</code> function:</p>

<p><img src="https://raw.githubusercontent.com/gaoyinfeng/trajgen/main/Lanelet2/lanelet2_routing/doc/images/lanelet_map_route.png" alt=""></p>

<h2 id="example-relational-queries-on-routes">Example Relational Queries on Routes:</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get left lanelet of example lanelet 'll'</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLaneletRelation</span><span class="o">&gt;</span> <span class="n">left</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">leftRelation</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>
<span class="c1">// Get conflicting lanelets of 'll'</span>
<span class="n">ConstLanelets</span> <span class="n">conflicting</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">conflictingInRoute</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>


</code></pre></div></div>
<p>Note that a route just returns relations to lanelets that can be used to reach the goal.</p>
<h2 id="other-example-queries">Other example queries:</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get underlying shortest path</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">routing</span><span class="o">::</span><span class="n">LaneletPath</span><span class="o">&gt;</span> <span class="n">shortestPath</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">shortestPath</span><span class="p">();</span>
<span class="c1">// Get the full lane of a given lanelet 'll'</span>
<span class="n">LaneletSequence</span> <span class="n">fullLane</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">fullLane</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>
<span class="c1">// Get remaining lane of a given lanelet 'll'</span>
<span class="n">LaneletSequence</span> <span class="n">remainingLane</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">remainingLane</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>

</code></pre></div></div>

<h1 id="5-interconnect-routing-graphs-of-different-participants">5. Interconnect Routing Graphs of Different Participants</h1>
<p>A <code class="language-plaintext highlighter-rouge">RoutingGraphContainer</code> can be used to <em>connect</em> graphs of different participants to get information about conflicting lanelets.</p>
<h2 id="create-a-routinggraphcontainer">Create a RoutingGraphContainer</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">RoutingGraphPtr</span><span class="o">&gt;</span> <span class="n">graphs</span><span class="p">;</span>
<span class="n">graphs</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">vehicleGraphLaneletMap</span><span class="p">);</span>
<span class="n">graphs</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">pedestrianGraphLaneletMap</span><span class="p">);</span>
<span class="n">RoutingGraphContainer</span> <span class="nf">container</span><span class="p">(</span><span class="n">graphs</span><span class="p">);</span>

</code></pre></div></div>
<h2 id="example-queries">Example Queries</h2>
<p>The last parameter <em>participantHeight</em> is optional and decides whether conflicting lanelets are determined in 2D or 3D.</p>

<h3 id="query-for-a-single-lanelet">Query for a single lanelet</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">heightClearance</span><span class="p">{</span><span class="mf">4.</span><span class="p">};</span> <span class="c1">// Height of the traffic participant</span>
<span class="c1">// Query a single graph for conflicting lanelets</span>
<span class="kt">size_t</span> <span class="n">routingGraphId</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>   <span class="c1">// E.g. 0 for the first graph</span>
<span class="n">ConstLanelets</span> <span class="n">conflictingVehicle</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingInGraph</span><span class="p">(</span><span class="n">bridgeLanelet</span><span class="p">,</span> <span class="n">routingGraphId</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>
<span class="c1">// Query all graphs for conflicting lanelets</span>
<span class="n">RoutingGraphContainer</span><span class="o">::</span><span class="n">ConflictingInGraphs</span> <span class="n">conflicting</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingInGraphs</span><span class="p">(</span><span class="n">bridgeLanelet</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>

</code></pre></div></div>

<h3 id="query-for-a-whole-route">Query for a Whole Route</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Conflicting lanelets of a route in a single graph</span>
<span class="n">ConstLanelets</span> <span class="n">conflictingVehicle</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingOfRouteInGraph</span><span class="p">(</span><span class="n">routePtr</span><span class="p">,</span> <span class="n">routingGraphId</span><span class="p">)};</span>
<span class="c1">// Conflicting lanelets of a route in all graphs</span>
<span class="n">RoutingGraphContainer</span><span class="o">::</span><span class="n">ConflictingInGraphs</span> <span class="n">result</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingOfRouteInGraphs</span><span class="p">(</span><span class="n">routePtr</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>

</code></pre></div></div>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-lanelet2_routing">Changelog for package lanelet2_routing</h1>

<h2 id="111-2020-09-14">1.1.1 (2020-09-14)</h2>

<h2 id="110-2020-09-06">1.1.0 (2020-09-06)</h2>

<ul>
  <li>Implement more flexible configuration for obtaining possible paths.
Still lacking proper tests</li>
  <li>Add parameter to left/right/adjacentLeft/adjacentRight so that they
can be queried based on routing cost id</li>
  <li>Fix routing for lane changes, add tests for it</li>
  <li>Fix wrong route in circles</li>
  <li>Fix unittests that rely on a non-writable root directory</li>
  <li>Add experimental support for building with colcon on ros2 and
ament_cmake</li>
  <li>Fix the documentation about how to create a routing graph</li>
  <li>Removing extra semicolons causing warnings with wpedantic.</li>
  <li>Making all includes in lanelet2_routing consistent.</li>
  <li>Updating package.xml files to format 3.</li>
  <li>Fix use of equals in older boost versions</li>
  <li>Arbitrary lanelet and area adjacencies in LaneletPaths</li>
  <li>Add functionality to create the bounding polygon from a Path</li>
  <li>Contributors: Fabian Poggenhans, Johannes Janosovits, Joshua Whitley</li>
</ul>

<h2 id="101-2020-03-24">1.0.1 (2020-03-24)</h2>

<ul>
  <li>Mention laneletSubmap in README</li>
  <li>Make sure lanelet2 buildtool_export_depends on mrt_cmake_modules</li>
  <li>Add changelogs</li>
  <li>Fix clang-tidy warnings</li>
  <li>Contributors: Fabian Poggenhans</li>
</ul>

<h2 id="100-2020-03-03">1.0.0 (2020-03-03)</h2>

<ul>
  <li>Bump version to 1.0</li>
  <li>Routing: Add shortest path search based on areas</li>
  <li>Fix default values for lane changes in RoutingGraph</li>
  <li>RoutingGraph and Route now use the new LaneletSubmap to store the
lanelets they are using their member functions laneletMap() and
passableMap() are now deprecated and should be replaced by
laneletSubmap() and passableSubmap() respectively. These functions
have less overhead and are less likely to be misinterpreted as
'maps containing only the lanelets you need'</li>
  <li>Edges with nonfinite costs are no longer added to the graph to avoid
overflows. If a cost function returns infinite costs, no edge will
be added and the connection will not be available to the routing
graph</li>
  <li>Introduce proper namespacing for internal objects</li>
  <li>Update documentation</li>
  <li>Routing graph and route object now support queries with a custom
search function Routing graph and route object now both have a
function forEachSuccessor (and more) for doing more advanced
queries. Added doc tests and python bindings</li>
  <li>Update the shortest path algorithm to use the new dijktra search</li>
  <li>Extended and simplified the reachablePath/Set functions by using
boost graphs implementation of dijkstras shortest paths</li>
  <li>Refactored the internal representation of the route. Cleaned up
headers that are only supposed to be used internally</li>
  <li>Complete rewrite of the route builder using boost graph</li>
  <li>Removed the "diverging" and "merging" classification from the
routing graph and update the doc They are now all represented with
the "succeeding" relation. Information about merging or diverging
can now be obtained simply by querying the number of
following/preceding lanelets. As a consequence, the route object no
longer caches queried "lanes". The responsible functions are now
const.</li>
  <li>Fix compiler errors with gcc 5</li>
  <li>Fix image paths in routing doc</li>
  <li>Initial commit</li>
  <li>Contributors: Fabian Poggenhans, Johannes Janosovits, Maximilian
Naumann</li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/lanelet2_routing/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/catkin#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/catkin#github">catkin  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_core#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_core#github">ament_cmake_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/mrt_cmake_modules#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/mrt_cmake_modules#github">mrt_cmake_modules  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/lanelet2_core#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/lanelet2_core#github">lanelet2_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/lanelet2_traffic_rules#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/lanelet2_traffic_rules#github">lanelet2_traffic_rules  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/gtest">gtest</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/boost">boost</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2#github">lanelet2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/lanelet2#github">lanelet2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/lanelet2#github">lanelet2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/lanelet2#github">lanelet2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_examples#github">lanelet2_examples</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_examples#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/lanelet2_examples#github">lanelet2_examples</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_examples#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/lanelet2_examples#github">lanelet2_examples</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_examples#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/lanelet2_examples#github">lanelet2_examples</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_examples#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_python#github">lanelet2_python</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_python#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/lanelet2_python#github">lanelet2_python</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_python#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/lanelet2_python#github">lanelet2_python</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_python#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/lanelet2_python#github">lanelet2_python</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_python#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_validation#github">lanelet2_validation</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_validation#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/lanelet2_validation#github">lanelet2_validation</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_validation#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/lanelet2_validation#github">lanelet2_validation</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_validation#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/lanelet2_validation#github">lanelet2_validation</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_validation#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_extension#github">lanelet2_extension</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_extension#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/lanelet2_extension#github">lanelet2_extension</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_extension#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/lanelet2_extension#github">lanelet2_extension</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_extension#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/lanelet2_extension#github">lanelet2_extension</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_extension#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet_aisan_converter#github">lanelet_aisan_converter</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet_aisan_converter#github-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/autoware_lanelet2_map_validator#github">autoware_lanelet2_map_validator</a></td>
                      <td class="text-center">
                        
                        <a href="/p/autoware_lanelet2_map_validator#github-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_global_planner#github">lanelet2_global_planner</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_global_planner#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/carma_wm_ctrl#github">carma_wm_ctrl</a></td>
                      <td class="text-center">
                        
                        <a href="/p/carma_wm_ctrl#github-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/traffic_incident_parser#github">traffic_incident_parser</a></td>
                      <td class="text-center">
                        
                        <a href="/p/traffic_incident_parser#github-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/traffic_simulator#github">traffic_simulator</a></td>
                      <td class="text-center">
                        
                        <a href="/p/traffic_simulator#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/hd_map#github">hd_map</a></td>
                      <td class="text-center">
                        
                        <a href="/p/hd_map#github-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>lanelet2_routing</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="github-question-list" class="panel-body" style="display: none;"></div>
      <div id="github-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/lanelet2_routing+github">here</a>.</p>
      </div>
      <div id="github-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/gaoyinfeng/trajgen.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/github/p/lanelet2_routing"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/gaoyinfeng/trajgen/tree/main/Lanelet2/lanelet2_routing"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/lanelet2_routing">lanelet2_routing</a> <small>package from <a style="text-decoration:none" href="/r/lanelet2/github-fzi-forschungszentrum-informatik-lanelet2">lanelet2</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2">

lanelet2
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_core">

lanelet2_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_examples">

lanelet2_examples
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_io">

lanelet2_io
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_maps">

lanelet2_maps
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_matching">

lanelet2_matching
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_projection">

lanelet2_projection
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_python">

lanelet2_python
</a>
            
          
            
            
              <span class="label label-default pkg-label">

lanelet2_routing
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_traffic_rules">

lanelet2_traffic_rules
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_validation">

lanelet2_validation
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/noetic/api/lanelet2_routing/html/"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  <a class="list-group-item text-center "
     target="_blank"
     href="http://wiki.ros.org/lanelet2_routing?distro=noetic"
     title="View this package on wiki.ros.org">
       <span style="margin-right: 5px;" class="glyphicon glyphicon-info-sign"></span>
       <br>
       Wiki
  </a>
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="noetic-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#noetic-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#noetic-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#noetic-deps" data-toggle="tab"><span class="label label-primary">7</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#noetic-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#noetic-questions" data-toggle="tab"><span id="noetic-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="noetic-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>1.2.2</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-info">
                  
                    CATKIN</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Map handling framework for automated driving</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/fzi-forschungszentrum-informatik/lanelet2.git">https://github.com/fzi-forschungszentrum-informatik/lanelet2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-03-03
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    
                      <div class="dropdown">
                        <button type="button" data-toggle="dropdown" class="btn label label-primary dropdown-toggle ci-result-success" title="Latest build information: Wed, 07 Feb 2024 19:12:33 GMT
  Total tests: 810
  Succeeded: 810
  Skipped: 0
  Failed: 0
Click to show more build history.">
                          <span class="glyphicon glyphicon-check"></span>
                          Continuous Integration
                          
                            : 810 / 810
                          
                          <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" role="menu">
                          <li class="dropdown-header">Latest build history: Wed, 07 Feb 2024 19:12:33 GMT (last 5 of 33 builds)</li>
                          
                            <li class="ci-build-info ci-result-unstable">
                              <a href="http://build.ros.org/job/Ndev__lanelet2__ubuntu_focal_amd64/51/" target="_blank">
                                <span class="glyphicon glyphicon-minus"></span>
                                <span><strong>#51</strong></span>
                                <span>07-Feb-2024 18:47</span>
                                <span>810 / 810</span>
                              </a>
                            </li>
                          
                            <li class="ci-build-info ci-result-unstable">
                              <a href="http://build.ros.org/job/Ndev__lanelet2__ubuntu_focal_amd64/50/" target="_blank">
                                <span class="glyphicon glyphicon-minus"></span>
                                <span><strong>#50</strong></span>
                                <span>29-Jan-2024 16:47</span>
                                <span>810 / 810</span>
                              </a>
                            </li>
                          
                            <li class="ci-build-info ci-result-unstable">
                              <a href="http://build.ros.org/job/Ndev__lanelet2__ubuntu_focal_amd64/49/" target="_blank">
                                <span class="glyphicon glyphicon-minus"></span>
                                <span><strong>#49</strong></span>
                                <span>06-Dec-2023 17:47</span>
                                <span>810 / 810</span>
                              </a>
                            </li>
                          
                            <li class="ci-build-info ci-result-unstable">
                              <a href="http://build.ros.org/job/Ndev__lanelet2__ubuntu_focal_amd64/48/" target="_blank">
                                <span class="glyphicon glyphicon-minus"></span>
                                <span><strong>#48</strong></span>
                                <span>20-Jul-2023 17:47</span>
                                <span>810 / 810</span>
                              </a>
                            </li>
                          
                            <li class="ci-build-info ci-result-unstable">
                              <a href="http://build.ros.org/job/Ndev__lanelet2__ubuntu_focal_amd64/47/" target="_blank">
                                <span class="glyphicon glyphicon-minus"></span>
                                <span><strong>#47</strong></span>
                                <span>17-Jul-2023 14:47</span>
                                <span>810 / 810</span>
                              </a>
                            </li>
                          
                        </ul>
                      </div>
                    
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/lanelet2/#noetic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/lanelet2/#noetic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/lanelet2/#noetic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Routing module for lanelet2
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2.git">Repository</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Fabian Immel</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Matthias Mayr</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing/README.md" title="Open in git repository">lanelet2_routing/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="lanelet2-routing">Lanelet2 routing</h1>

<p>The routing module for lanelet2.</p>

<p>For a short version of this you can also look at <a href="https://htmlpreview.github.io/?https://github.com/fzi-forschungszentrum-informatik/Lanelet2/blob/master/lanelet2_routing/doc/lanelet2_routing.html">the presentation</a>. If some images do not render correctly, please clone the repository and open the html file in your browser.</p>

<p>This readme covers some basics. The API offers more than that.</p>

<h1 id="1-components-and-vocabulary">1. Components and Vocabulary</h1>
<h2 id="how-to-create-a-routing-graph">How to create a Routing Graph</h2>
<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/components.png" alt=""></p>

<p>The needed components to create a routing graph are:</p>

<p><strong>Routing Cost Modules:</strong></p>
<ul>
  <li>They generically determine the routing cost for travelling along a lanelet/area</li>
  <li>Can be e.g. length, travel time</li>
  <li>You can dynamically select between them when querying the routing graph</li>
  <li><strong>You can easily plug in your own routing cost calculation</strong></li>
  <li><em>Influences the prefered path</em></li>
</ul>

<p><strong>Traffic Rules for a Specific Participant</strong> (see <a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/tree/master/lanelet2_traffic_rules/README.md">lanelet2_traffic_rules</a>)</p>
<ul>
  <li>Determines which lanelets/areas are passable</li>
  <li><em>Influences the possible paths</em></li>
</ul>

<p><strong>Lanelet Map:</strong> (see <a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing/../lanelet2_core/README.md">lanelet2_core</a>)</p>
<ul>
  <li>Map with Lanelets, Areas, Regulatory Elements, …</li>
</ul>

<h2 id="relations">Relations</h2>
<p>Lanelets that are part of a routing graph can have relations to each other:
<img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/max-hose.png" alt=""></p>

<p>The possible relations are:
    * <code class="language-plaintext highlighter-rouge">left</code>, <code class="language-plaintext highlighter-rouge">right</code> (reachable via lane change)
    * <code class="language-plaintext highlighter-rouge">adjacent left</code>, <code class="language-plaintext highlighter-rouge">adjacent right</code> (lanelets that are neighbours but not reachable via lane change)
    * <code class="language-plaintext highlighter-rouge">succeeding</code> (relation between two subsequent lanelets)
    * <code class="language-plaintext highlighter-rouge">conflicting</code> (intersecting lanelets/areas)
    * <code class="language-plaintext highlighter-rouge">area</code> (reachable area to lanelet/area relation)</p>

<h2 id="route-vs-path-vs-sequence">Route vs Path vs Sequence</h2>
<p>When querying data in the routing graph, you will come across the terms <em>route</em>, <em>path</em> and <em>sequence</em>. In contrast to a simple set of lanelets (data-wise a vector of lanelets), they have a special meaning and are data-wise different classes.</p>

<p>A <em>route</em> means all the lanelets that can be used to a destination without driving a different road. They can be connected by a generic sequence of lane changes and successors.</p>

<p>A <em>path</em> (LaneletPath or LaneletOrAreaPath) is an ordered list of Lanelets/Areas that lead to the destination. They can be connected by lane changes.</p>

<p>A <em>sequence</em> (LaneletSequence) is a sequence of subsequent Lanelets that is not separated by a lane change (think of it as a <em>lane</em>). It does not necessary lead to a destination, instead it ends when a lane change is required. In the example image, the lanelets A, D, B form a valid <em>sequence</em> (and also a valid <em>path</em>), while the lanelets A, D, E are a valid <em>path</em>, but not a valid <em>sequence</em>.</p>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/shortest_path_and_route.png" alt=""></p>

<h1 id="2-code-usage">2. Code Usage</h1>

<h2 id="create-a-routing-graph">Create a Routing Graph</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="k">namespace</span> <span class="n">lanelet</span><span class="p">;</span>

<span class="c1">// Load a map</span>
<span class="n">LaneletMapPtr</span> <span class="n">map</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s">"map.osm"</span><span class="p">,</span> <span class="n">Origin</span><span class="p">({</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">}));</span> <span class="c1">// origin has to be close to the map data in lat/lon coordinates</span>

<span class="c1">// Initialize traffic rules</span>
<span class="n">TrafficRulesPtr</span> <span class="n">trafficRules</span><span class="p">{</span><span class="n">TrafficRulesFactory</span><span class="o">::</span><span class="n">instance</span><span class="p">().</span><span class="n">create</span><span class="p">(</span><span class="n">Locations</span><span class="o">::</span><span class="n">Germany</span><span class="p">,</span> <span class="n">Participants</span><span class="o">::</span><span class="n">Vehicle</span><span class="p">)};</span>

<span class="c1">// Optional: Initalize routing costs</span>
<span class="kt">double</span> <span class="n">laneChangeCost</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">RoutingCostPtrs</span> <span class="n">costPtrs</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">RoutingCostDistance</span><span class="o">&gt;</span><span class="p">(</span><span class="n">laneChangeCost</span><span class="p">)};</span>

<span class="c1">// Optional: Initialize config for routing graph:</span>
<span class="n">RoutingGraph</span><span class="o">::</span><span class="n">Configuration</span> <span class="n">routingGraphConf</span><span class="p">;</span>
<span class="n">routingGraphConf</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="n">RoutingGraph</span><span class="o">::</span><span class="n">ParticipantHeight</span><span class="p">,</span> <span class="n">Attribute</span><span class="p">(</span><span class="s">"2."</span><span class="p">)));</span>

<span class="c1">// Create routing graph</span>
<span class="n">RoutingGraphPtr</span> <span class="n">graph</span> <span class="o">=</span> <span class="n">RoutingGraph</span><span class="o">::</span><span class="n">build</span><span class="p">(</span><span class="n">map</span><span class="p">,</span> <span class="n">trafficRules</span> <span class="cm">/*, costPtrs, routingGraphConf*/</span><span class="p">);</span>

</code></pre></div></div>
<ul>
  <li>The traffic rules object represents the view from which the map will be interpreted. Doing routing with vehicle traffic
rules will yield different results than routing with e.g. bicycle traffic rules.</li>
  <li>Routing for bicycles might include lanelets that are not available to (motorized)vehicles and vice versa.</li>
</ul>

<p>The python interface works similarly:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">lanelet2</span>
<span class="nb">map</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="sh">"</span><span class="s">map.osm</span><span class="sh">"</span><span class="p">,</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nc">Origin</span><span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">trafficRules</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="n">Locations</span><span class="p">.</span><span class="n">Germany</span><span class="p">,</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="n">Participants</span><span class="p">.</span><span class="n">Vehicle</span><span class="p">)</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">routing</span><span class="p">.</span><span class="nc">RoutingGraph</span><span class="p">(</span><span class="nb">map</span><span class="p">,</span> <span class="n">trafficRules</span><span class="p">)</span>

</code></pre></div></div>
<h2 id="get-a-shortest-path">Get a shortest path</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Optional</span><span class="o">&lt;</span><span class="n">routing</span><span class="o">::</span><span class="n">LaneletPath</span><span class="o">&gt;</span> <span class="n">shortestPath</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">shortestPath</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">);</span>

</code></pre></div></div>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">Optional</code> will be uninitialized (false) if there’s no path</li>
  <li>there’s also <code class="language-plaintext highlighter-rouge">shortestPathWithVia</code>
</li>
</ul>

<p>in python:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">shortestPath</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nf">shortestPath</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">)</span>

</code></pre></div></div>
<p>In python, shortestPath simply returns <code class="language-plaintext highlighter-rouge">None</code> if there is no path.</p>

<h2 id="get-and-write-a-route">Get and write a route</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Route</span><span class="o">&gt;</span> <span class="n">route</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">getRoute</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">route</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">LaneletSubmapConstPtr</span> <span class="n">routeMap</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">laneletSubmap</span><span class="p">();</span>
        <span class="n">write</span><span class="p">(</span><span class="s">"route.osm"</span><span class="p">,</span> <span class="o">*</span><span class="n">routeMap</span><span class="o">-&gt;</span><span class="n">laneletMap</span><span class="p">(),</span> <span class="n">Origin</span><span class="p">({</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">}));</span>
    <span class="p">}</span>

</code></pre></div></div>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">Optional</code> will be uninitialized (false) if there’s no route</li>
</ul>

<p>Note that there is a semantic difference between a <code class="language-plaintext highlighter-rouge">LaneletSubmap</code> and a <code class="language-plaintext highlighter-rouge">LaneletMap</code>. While a LaneletSubmap only contains
the things you explicitly added, the <code class="language-plaintext highlighter-rouge">LaneletMap</code> also contains all the things referred by them (the Points, Linestrings, things referred by RegulatoryElements).
The <code class="language-plaintext highlighter-rouge">LaneletSubmap</code> in this case only contains the Lanelets of the route. But since this is not sufficient for writing, you need to transform it into a regular <code class="language-plaintext highlighter-rouge">LaneletMap</code> first.</p>

<p>The written map will therefore not only contain the Lanelets but also their RegulatoryElements.
If these RegulatoryElements contain other Lanelets, these Lanelets will be part of the written map as well, even if they are not on the route.</p>

<p>in python:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">route</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nf">getRoute</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">)</span>
<span class="k">if</span> <span class="n">route</span><span class="p">:</span>
    <span class="n">laneletSubmap</span> <span class="o">=</span> <span class="n">route</span><span class="p">.</span><span class="nf">laneletSubmap</span><span class="p">()</span>
    <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">route.osm</span><span class="sh">"</span><span class="p">,</span> <span class="n">laneletSubmap</span><span class="p">.</span><span class="nf">laneletMap</span><span class="p">(),</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nc">Origin</span><span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">)))</span>

</code></pre></div></div>

<h2 id="get-a-reachable-set-of-lanelets">Get a reachable set of lanelets</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">maxRoutingCost</span><span class="p">{</span><span class="mi">100</span><span class="p">};</span>
<span class="n">ConstLanelets</span> <span class="n">reachableSet</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">reachableSet</span><span class="p">(</span><span class="n">lanelet</span><span class="p">,</span> <span class="n">maxRoutingCost</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">);</span>

</code></pre></div></div>

<h2 id="left-right-following-lanelets">Left, Right, Following Lanelets</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get routable left lanelet if it exists</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLanelet</span><span class="o">&gt;</span> <span class="n">left</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>
<span class="c1">// Get non-routable left lanelet if it exists</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLanelet</span><span class="o">&gt;</span> <span class="n">adjacentLeft</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">adjacentLeft</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>
<span class="c1">// Get following lanelets</span>
<span class="n">ConstLanelets</span> <span class="n">following</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">following</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>

</code></pre></div></div>
<ul>
  <li>Also available: <code class="language-plaintext highlighter-rouge">right</code>, <code class="language-plaintext highlighter-rouge">adjacentRight</code>, <code class="language-plaintext highlighter-rouge">lefts</code>, <code class="language-plaintext highlighter-rouge">rights</code>, <code class="language-plaintext highlighter-rouge">conflicting</code>
</li>
</ul>

<p>Alternatively:
 or queries that return relations:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get relations to all left lanelets</span>
<span class="n">LaneletRelations</span> <span class="n">leftRelations</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">leftRelations</span><span class="p">(</span>
                                                <span class="n">fromLanelet</span><span class="p">);</span>

</code></pre></div></div>
<p>There’s <code class="language-plaintext highlighter-rouge">leftRelations</code> that returns a vector of pairs of LaneletRelations whereas RelationType can be ‘left’ or ‘adjacentLeft’ in this case</p>

<h2 id="more">More</h2>

<p>This is just a quick walkthrough. Advanced examples can be found in <a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing/../lanelet2_examples/README.md">lanelet2_examples</a>.</p>

<h1 id="3-export-and-debugging-routing-graphs">3. Export and Debugging Routing Graphs</h1>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/lanelet_map_routing_graph.png" alt=""></p>

<h2 id="laneletmap-with-routing-information">LaneletMap with Routing Information</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">LaneletMapConstPtr</span> <span class="n">debugLaneletMap</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">getDebugLaneletMap</span><span class="p">(</span><span class="n">RoutingCostId</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<span class="n">write</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">"routing_graph.osm"</span><span class="p">),</span> <span class="o">*</span><span class="n">debugLaneletMap</span><span class="p">);</span>

</code></pre></div></div>
<p>This one is best viewed in <a href="https://josm.openstreetmap.de/">JOSM</a> and using a custom map style css which is to be found in <code class="language-plaintext highlighter-rouge">res/routing.mapcss</code>. <a href="https://josm.openstreetmap.de/attachment/wiki/Styles/addstyle.gif">This gif</a> shows, how to add a style to JOSM, except that one needs to press the <code class="language-plaintext highlighter-rouge">+</code> button in the configuration menu and specify the file.</p>

<p>Most of the information is to be found in the attributes. The line strings that connect lanelets do have a direction. The name of the forth-direction is generally to be found left/above the line and the reverse relation right/under the string.</p>

<h2 id="dot-graphviz-and-graphml-xml-based-file-export">DOT (GraphViz) and GraphML (xml-based) file export</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">graph</span><span class="o">-&gt;</span><span class="n">exportGraphViz</span><span class="p">(</span><span class="s">"~/graph.gv"</span><span class="p">);</span>
<span class="n">graph</span><span class="o">-&gt;</span><span class="n">exportGraphML</span><span class="p">(</span><span class="s">"~/graph.graphml"</span><span class="p">);</span>

</code></pre></div></div>
<p>These can then be viewed with a graph viewer like <a href="https://gephi.org/">Gephi</a>. The downside compared to the laneletMap export is, that the lanelets aren’t localized.</p>

<h1 id="4-routes">4. Routes</h1>

<p>Example route through <code class="language-plaintext highlighter-rouge">Oststadtkreisel</code>:</p>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/lanelet_map_route_oststadtkreisel_small.jpg" alt=""></p>

<p>Output of <code class="language-plaintext highlighter-rouge">getDebugLaneletMap()</code> function:</p>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/lanelet_map_route.png" alt=""></p>

<h2 id="example-relational-queries-on-routes">Example Relational Queries on Routes:</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get left lanelet of example lanelet 'll'</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLaneletRelation</span><span class="o">&gt;</span> <span class="n">left</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">leftRelation</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>
<span class="c1">// Get conflicting lanelets of 'll'</span>
<span class="n">ConstLanelets</span> <span class="n">conflicting</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">conflictingInRoute</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>


</code></pre></div></div>
<p>Note that a route just returns relations to lanelets that can be used to reach the goal.</p>
<h2 id="other-example-queries">Other example queries:</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get underlying shortest path</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">routing</span><span class="o">::</span><span class="n">LaneletPath</span><span class="o">&gt;</span> <span class="n">shortestPath</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">shortestPath</span><span class="p">();</span>
<span class="c1">// Get the full lane of a given lanelet 'll'</span>
<span class="n">LaneletSequence</span> <span class="n">fullLane</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">fullLane</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>
<span class="c1">// Get remaining lane of a given lanelet 'll'</span>
<span class="n">LaneletSequence</span> <span class="n">remainingLane</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">remainingLane</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>

</code></pre></div></div>

<h1 id="5-interconnect-routing-graphs-of-different-participants">5. Interconnect Routing Graphs of Different Participants</h1>
<p>A <code class="language-plaintext highlighter-rouge">RoutingGraphContainer</code> can be used to <em>connect</em> graphs of different participants to get information about conflicting lanelets.</p>
<h2 id="create-a-routinggraphcontainer">Create a RoutingGraphContainer</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">RoutingGraphPtr</span><span class="o">&gt;</span> <span class="n">graphs</span><span class="p">;</span>
<span class="n">graphs</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">vehicleGraphLaneletMap</span><span class="p">);</span>
<span class="n">graphs</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">pedestrianGraphLaneletMap</span><span class="p">);</span>
<span class="n">RoutingGraphContainer</span> <span class="nf">container</span><span class="p">(</span><span class="n">graphs</span><span class="p">);</span>

</code></pre></div></div>
<h2 id="example-queries">Example Queries</h2>
<p>The last parameter <em>participantHeight</em> is optional and decides whether conflicting lanelets are determined in 2D or 3D.</p>

<h3 id="query-for-a-single-lanelet">Query for a single lanelet</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">heightClearance</span><span class="p">{</span><span class="mf">4.</span><span class="p">};</span> <span class="c1">// Height of the traffic participant</span>
<span class="c1">// Query a single graph for conflicting lanelets</span>
<span class="kt">size_t</span> <span class="n">routingGraphId</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>   <span class="c1">// E.g. 0 for the first graph</span>
<span class="n">ConstLanelets</span> <span class="n">conflictingVehicle</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingInGraph</span><span class="p">(</span><span class="n">bridgeLanelet</span><span class="p">,</span> <span class="n">routingGraphId</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>
<span class="c1">// Query all graphs for conflicting lanelets</span>
<span class="n">RoutingGraphContainer</span><span class="o">::</span><span class="n">ConflictingInGraphs</span> <span class="n">conflicting</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingInGraphs</span><span class="p">(</span><span class="n">bridgeLanelet</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>

</code></pre></div></div>

<h3 id="query-for-a-whole-route">Query for a Whole Route</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Conflicting lanelets of a route in a single graph</span>
<span class="n">ConstLanelets</span> <span class="n">conflictingVehicle</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingOfRouteInGraph</span><span class="p">(</span><span class="n">routePtr</span><span class="p">,</span> <span class="n">routingGraphId</span><span class="p">)};</span>
<span class="c1">// Conflicting lanelets of a route in all graphs</span>
<span class="n">RoutingGraphContainer</span><span class="o">::</span><span class="n">ConflictingInGraphs</span> <span class="n">result</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingOfRouteInGraphs</span><span class="p">(</span><span class="n">routePtr</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>

</code></pre></div></div>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-lanelet2_routing">Changelog for package lanelet2_routing</h1>

<h2 id="122-2024-10-25">1.2.2 (2024-10-25)</h2>

<ul>
  <li>Prevent unintended modification of graph in lanelet::routing::Route
(<a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/issues/352">#352</a>)</li>
  <li>Build documentation with mkdocs
(<a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/issues/321">#321</a>)</li>
  <li>Contributors: DavUhll, poggenhans</li>
</ul>

<h2 id="121-2023-05-10">1.2.1 (2023-05-10)</h2>

<ul>
  <li>Update thirdparty deps, rework projected point, enable python
3.10/3.11 (<a href="https://github.com/immel-f/Lanelet2/issues/300">#300</a>)</li>
  <li>Contributors: poggenhans</li>
</ul>

<h2 id="120-2023-01-30">1.2.0 (2023-01-30)</h2>

<ul>
  <li>Add CI using GitHub Actions
(<a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/issues/256">#256</a>)</li>
  <li>Use TYPED_TEST_SUITE over deprecated TYPED_TEST_CASE in unit
tests</li>
  <li>Add missing include for boost 1.69</li>
  <li>Contributors: Fabian Poggenhans, Fabian Immel</li>
</ul>

<h2 id="111-2020-09-14">1.1.1 (2020-09-14)</h2>

<h2 id="110-2020-09-06">1.1.0 (2020-09-06)</h2>

<ul>
  <li>Implement more flexible configuration for obtaining possible paths.
Still lacking proper tests</li>
  <li>Add parameter to left/right/adjacentLeft/adjacentRight so that they
can be queried based on routing cost id</li>
  <li>Fix routing for lane changes, add tests for it</li>
  <li>Fix wrong route in circles</li>
  <li>Fix unittests that rely on a non-writable root directory</li>
  <li>Add experimental support for building with colcon on ros2 and
ament_cmake</li>
  <li>Fix the documentation about how to create a routing graph</li>
  <li>Removing extra semicolons causing warnings with wpedantic.</li>
  <li>Making all includes in lanelet2_routing consistent.</li>
  <li>Updating package.xml files to format 3.</li>
  <li>Fix use of equals in older boost versions</li>
  <li>Arbitrary lanelet and area adjacencies in LaneletPaths</li>
  <li>Add functionality to create the bounding polygon from a Path</li>
  <li>Contributors: Fabian Poggenhans, Johannes Janosovits, Joshua Whitley</li>
</ul>

<h2 id="101-2020-03-24">1.0.1 (2020-03-24)</h2>

<ul>
  <li>Mention laneletSubmap in README</li>
  <li>Make sure lanelet2 buildtool_export_depends on mrt_cmake_modules</li>
  <li>Add changelogs</li>
  <li>Fix clang-tidy warnings</li>
  <li>Contributors: Fabian Poggenhans</li>
</ul>

<h2 id="100-2020-03-03">1.0.0 (2020-03-03)</h2>

<ul>
  <li>Bump version to 1.0</li>
  <li>Routing: Add shortest path search based on areas</li>
  <li>Fix default values for lane changes in RoutingGraph</li>
  <li>RoutingGraph and Route now use the new LaneletSubmap to store the
lanelets they are using their member functions laneletMap() and
passableMap() are now deprecated and should be replaced by
laneletSubmap() and passableSubmap() respectively. These functions
have less overhead and are less likely to be misinterpreted as
'maps containing only the lanelets you need'</li>
  <li>Edges with nonfinite costs are no longer added to the graph to avoid
overflows. If a cost function returns infinite costs, no edge will
be added and the connection will not be available to the routing
graph</li>
  <li>Introduce proper namespacing for internal objects</li>
  <li>Update documentation</li>
  <li>Routing graph and route object now support queries with a custom
search function Routing graph and route object now both have a
function forEachSuccessor (and more) for doing more advanced
queries. Added doc tests and python bindings</li>
  <li>Update the shortest path algorithm to use the new dijktra search</li>
  <li>Extended and simplified the reachablePath/Set functions by using
boost graphs implementation of dijkstras shortest paths</li>
  <li>Refactored the internal representation of the route. Cleaned up
headers that are only supposed to be used internally</li>
  <li>Complete rewrite of the route builder using boost graph</li>
  <li>Removed the "diverging" and "merging" classification from the
routing graph and update the doc They are now all represented with
the "succeeding" relation. Information about merging or diverging
can now be obtained simply by querying the number of
following/preceding lanelets. As a consequence, the route object no
longer caches queried "lanes". The responsible functions are now
const.</li>
  <li>Fix compiler errors with gcc 5</li>
  <li>Fix image paths in routing doc</li>
  <li>Initial commit</li>
  <li>Contributors: Fabian Poggenhans, Johannes Janosovits, Maximilian
Naumann</li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="noetic-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/lanelet2_routing/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="noetic-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/catkin#noetic-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/catkin#noetic">catkin  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_core#noetic-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_core#noetic">ament_cmake_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/mrt_cmake_modules#noetic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/mrt_cmake_modules#noetic">mrt_cmake_modules  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/lanelet2_core#noetic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/lanelet2_core#noetic">lanelet2_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/lanelet2_traffic_rules#noetic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/lanelet2_traffic_rules#noetic">lanelet2_traffic_rules  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/gtest">gtest</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/boost">boost</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2#noetic">lanelet2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2#noetic-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_examples#noetic">lanelet2_examples</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_examples#noetic-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_python#noetic">lanelet2_python</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_python#noetic-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_validation#noetic">lanelet2_validation</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_validation#noetic-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="noetic-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="noetic-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>lanelet2_routing</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="noetic-question-list" class="panel-body" style="display: none;"></div>
      <div id="noetic-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/lanelet2_routing+noetic">here</a>.</p>
      </div>
      <div id="noetic-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/fzi-forschungszentrum-informatik/lanelet2.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/noetic/api/lanelet2_routing/html/"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  <a class="list-group-item "
     target="_blank"
     href="http://wiki.ros.org/lanelet2_routing?distro=noetic"
     title="View this package on wiki.ros.org">
       <span style="margin-right: 5px;" class="glyphicon glyphicon-info-sign"></span>
       
       Wiki
  </a>
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/lanelet2_routing">lanelet2_routing</a> <small>package from <a style="text-decoration:none" href="/r/lanelet2/github-fzi-forschungszentrum-informatik-lanelet2">lanelet2</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2">

lanelet2
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_core">

lanelet2_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_examples">

lanelet2_examples
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_io">

lanelet2_io
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_maps">

lanelet2_maps
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_matching">

lanelet2_matching
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_projection">

lanelet2_projection
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_python">

lanelet2_python
</a>
            
          
            
            
              <span class="label label-default pkg-label">

lanelet2_routing
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_traffic_rules">

lanelet2_traffic_rules
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_validation">

lanelet2_validation
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/galactic/p/lanelet2_routing"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="galactic-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#galactic-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#galactic-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#galactic-deps" data-toggle="tab"><span class="label label-primary">7</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#galactic-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#galactic-questions" data-toggle="tab"><span id="galactic-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="galactic-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>1.2.2</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-info">
                  
                    CATKIN</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Map handling framework for automated driving</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/fzi-forschungszentrum-informatik/lanelet2.git">https://github.com/fzi-forschungszentrum-informatik/lanelet2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-03-03
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/lanelet2/#galactic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/lanelet2/#galactic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/lanelet2/#galactic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Routing module for lanelet2
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2.git">Repository</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Fabian Immel</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Matthias Mayr</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing/README.md" title="Open in git repository">lanelet2_routing/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="lanelet2-routing">Lanelet2 routing</h1>

<p>The routing module for lanelet2.</p>

<p>For a short version of this you can also look at <a href="https://htmlpreview.github.io/?https://github.com/fzi-forschungszentrum-informatik/Lanelet2/blob/master/lanelet2_routing/doc/lanelet2_routing.html">the presentation</a>. If some images do not render correctly, please clone the repository and open the html file in your browser.</p>

<p>This readme covers some basics. The API offers more than that.</p>

<h1 id="1-components-and-vocabulary">1. Components and Vocabulary</h1>
<h2 id="how-to-create-a-routing-graph">How to create a Routing Graph</h2>
<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/components.png" alt=""></p>

<p>The needed components to create a routing graph are:</p>

<p><strong>Routing Cost Modules:</strong></p>
<ul>
  <li>They generically determine the routing cost for travelling along a lanelet/area</li>
  <li>Can be e.g. length, travel time</li>
  <li>You can dynamically select between them when querying the routing graph</li>
  <li><strong>You can easily plug in your own routing cost calculation</strong></li>
  <li><em>Influences the prefered path</em></li>
</ul>

<p><strong>Traffic Rules for a Specific Participant</strong> (see <a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/tree/master/lanelet2_traffic_rules/README.md">lanelet2_traffic_rules</a>)</p>
<ul>
  <li>Determines which lanelets/areas are passable</li>
  <li><em>Influences the possible paths</em></li>
</ul>

<p><strong>Lanelet Map:</strong> (see <a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing/../lanelet2_core/README.md">lanelet2_core</a>)</p>
<ul>
  <li>Map with Lanelets, Areas, Regulatory Elements, …</li>
</ul>

<h2 id="relations">Relations</h2>
<p>Lanelets that are part of a routing graph can have relations to each other:
<img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/max-hose.png" alt=""></p>

<p>The possible relations are:
    * <code class="language-plaintext highlighter-rouge">left</code>, <code class="language-plaintext highlighter-rouge">right</code> (reachable via lane change)
    * <code class="language-plaintext highlighter-rouge">adjacent left</code>, <code class="language-plaintext highlighter-rouge">adjacent right</code> (lanelets that are neighbours but not reachable via lane change)
    * <code class="language-plaintext highlighter-rouge">succeeding</code> (relation between two subsequent lanelets)
    * <code class="language-plaintext highlighter-rouge">conflicting</code> (intersecting lanelets/areas)
    * <code class="language-plaintext highlighter-rouge">area</code> (reachable area to lanelet/area relation)</p>

<h2 id="route-vs-path-vs-sequence">Route vs Path vs Sequence</h2>
<p>When querying data in the routing graph, you will come across the terms <em>route</em>, <em>path</em> and <em>sequence</em>. In contrast to a simple set of lanelets (data-wise a vector of lanelets), they have a special meaning and are data-wise different classes.</p>

<p>A <em>route</em> means all the lanelets that can be used to a destination without driving a different road. They can be connected by a generic sequence of lane changes and successors.</p>

<p>A <em>path</em> (LaneletPath or LaneletOrAreaPath) is an ordered list of Lanelets/Areas that lead to the destination. They can be connected by lane changes.</p>

<p>A <em>sequence</em> (LaneletSequence) is a sequence of subsequent Lanelets that is not separated by a lane change (think of it as a <em>lane</em>). It does not necessary lead to a destination, instead it ends when a lane change is required. In the example image, the lanelets A, D, B form a valid <em>sequence</em> (and also a valid <em>path</em>), while the lanelets A, D, E are a valid <em>path</em>, but not a valid <em>sequence</em>.</p>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/shortest_path_and_route.png" alt=""></p>

<h1 id="2-code-usage">2. Code Usage</h1>

<h2 id="create-a-routing-graph">Create a Routing Graph</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="k">namespace</span> <span class="n">lanelet</span><span class="p">;</span>

<span class="c1">// Load a map</span>
<span class="n">LaneletMapPtr</span> <span class="n">map</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s">"map.osm"</span><span class="p">,</span> <span class="n">Origin</span><span class="p">({</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">}));</span> <span class="c1">// origin has to be close to the map data in lat/lon coordinates</span>

<span class="c1">// Initialize traffic rules</span>
<span class="n">TrafficRulesPtr</span> <span class="n">trafficRules</span><span class="p">{</span><span class="n">TrafficRulesFactory</span><span class="o">::</span><span class="n">instance</span><span class="p">().</span><span class="n">create</span><span class="p">(</span><span class="n">Locations</span><span class="o">::</span><span class="n">Germany</span><span class="p">,</span> <span class="n">Participants</span><span class="o">::</span><span class="n">Vehicle</span><span class="p">)};</span>

<span class="c1">// Optional: Initalize routing costs</span>
<span class="kt">double</span> <span class="n">laneChangeCost</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">RoutingCostPtrs</span> <span class="n">costPtrs</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">RoutingCostDistance</span><span class="o">&gt;</span><span class="p">(</span><span class="n">laneChangeCost</span><span class="p">)};</span>

<span class="c1">// Optional: Initialize config for routing graph:</span>
<span class="n">RoutingGraph</span><span class="o">::</span><span class="n">Configuration</span> <span class="n">routingGraphConf</span><span class="p">;</span>
<span class="n">routingGraphConf</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="n">RoutingGraph</span><span class="o">::</span><span class="n">ParticipantHeight</span><span class="p">,</span> <span class="n">Attribute</span><span class="p">(</span><span class="s">"2."</span><span class="p">)));</span>

<span class="c1">// Create routing graph</span>
<span class="n">RoutingGraphPtr</span> <span class="n">graph</span> <span class="o">=</span> <span class="n">RoutingGraph</span><span class="o">::</span><span class="n">build</span><span class="p">(</span><span class="n">map</span><span class="p">,</span> <span class="n">trafficRules</span> <span class="cm">/*, costPtrs, routingGraphConf*/</span><span class="p">);</span>

</code></pre></div></div>
<ul>
  <li>The traffic rules object represents the view from which the map will be interpreted. Doing routing with vehicle traffic
rules will yield different results than routing with e.g. bicycle traffic rules.</li>
  <li>Routing for bicycles might include lanelets that are not available to (motorized)vehicles and vice versa.</li>
</ul>

<p>The python interface works similarly:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">lanelet2</span>
<span class="nb">map</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="sh">"</span><span class="s">map.osm</span><span class="sh">"</span><span class="p">,</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nc">Origin</span><span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">trafficRules</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="n">Locations</span><span class="p">.</span><span class="n">Germany</span><span class="p">,</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="n">Participants</span><span class="p">.</span><span class="n">Vehicle</span><span class="p">)</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">routing</span><span class="p">.</span><span class="nc">RoutingGraph</span><span class="p">(</span><span class="nb">map</span><span class="p">,</span> <span class="n">trafficRules</span><span class="p">)</span>

</code></pre></div></div>
<h2 id="get-a-shortest-path">Get a shortest path</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Optional</span><span class="o">&lt;</span><span class="n">routing</span><span class="o">::</span><span class="n">LaneletPath</span><span class="o">&gt;</span> <span class="n">shortestPath</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">shortestPath</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">);</span>

</code></pre></div></div>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">Optional</code> will be uninitialized (false) if there’s no path</li>
  <li>there’s also <code class="language-plaintext highlighter-rouge">shortestPathWithVia</code>
</li>
</ul>

<p>in python:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">shortestPath</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nf">shortestPath</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">)</span>

</code></pre></div></div>
<p>In python, shortestPath simply returns <code class="language-plaintext highlighter-rouge">None</code> if there is no path.</p>

<h2 id="get-and-write-a-route">Get and write a route</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Route</span><span class="o">&gt;</span> <span class="n">route</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">getRoute</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">route</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">LaneletSubmapConstPtr</span> <span class="n">routeMap</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">laneletSubmap</span><span class="p">();</span>
        <span class="n">write</span><span class="p">(</span><span class="s">"route.osm"</span><span class="p">,</span> <span class="o">*</span><span class="n">routeMap</span><span class="o">-&gt;</span><span class="n">laneletMap</span><span class="p">(),</span> <span class="n">Origin</span><span class="p">({</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">}));</span>
    <span class="p">}</span>

</code></pre></div></div>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">Optional</code> will be uninitialized (false) if there’s no route</li>
</ul>

<p>Note that there is a semantic difference between a <code class="language-plaintext highlighter-rouge">LaneletSubmap</code> and a <code class="language-plaintext highlighter-rouge">LaneletMap</code>. While a LaneletSubmap only contains
the things you explicitly added, the <code class="language-plaintext highlighter-rouge">LaneletMap</code> also contains all the things referred by them (the Points, Linestrings, things referred by RegulatoryElements).
The <code class="language-plaintext highlighter-rouge">LaneletSubmap</code> in this case only contains the Lanelets of the route. But since this is not sufficient for writing, you need to transform it into a regular <code class="language-plaintext highlighter-rouge">LaneletMap</code> first.</p>

<p>The written map will therefore not only contain the Lanelets but also their RegulatoryElements.
If these RegulatoryElements contain other Lanelets, these Lanelets will be part of the written map as well, even if they are not on the route.</p>

<p>in python:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">route</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nf">getRoute</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">)</span>
<span class="k">if</span> <span class="n">route</span><span class="p">:</span>
    <span class="n">laneletSubmap</span> <span class="o">=</span> <span class="n">route</span><span class="p">.</span><span class="nf">laneletSubmap</span><span class="p">()</span>
    <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">route.osm</span><span class="sh">"</span><span class="p">,</span> <span class="n">laneletSubmap</span><span class="p">.</span><span class="nf">laneletMap</span><span class="p">(),</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nc">Origin</span><span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">)))</span>

</code></pre></div></div>

<h2 id="get-a-reachable-set-of-lanelets">Get a reachable set of lanelets</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">maxRoutingCost</span><span class="p">{</span><span class="mi">100</span><span class="p">};</span>
<span class="n">ConstLanelets</span> <span class="n">reachableSet</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">reachableSet</span><span class="p">(</span><span class="n">lanelet</span><span class="p">,</span> <span class="n">maxRoutingCost</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">);</span>

</code></pre></div></div>

<h2 id="left-right-following-lanelets">Left, Right, Following Lanelets</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get routable left lanelet if it exists</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLanelet</span><span class="o">&gt;</span> <span class="n">left</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>
<span class="c1">// Get non-routable left lanelet if it exists</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLanelet</span><span class="o">&gt;</span> <span class="n">adjacentLeft</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">adjacentLeft</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>
<span class="c1">// Get following lanelets</span>
<span class="n">ConstLanelets</span> <span class="n">following</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">following</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>

</code></pre></div></div>
<ul>
  <li>Also available: <code class="language-plaintext highlighter-rouge">right</code>, <code class="language-plaintext highlighter-rouge">adjacentRight</code>, <code class="language-plaintext highlighter-rouge">lefts</code>, <code class="language-plaintext highlighter-rouge">rights</code>, <code class="language-plaintext highlighter-rouge">conflicting</code>
</li>
</ul>

<p>Alternatively:
 or queries that return relations:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get relations to all left lanelets</span>
<span class="n">LaneletRelations</span> <span class="n">leftRelations</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">leftRelations</span><span class="p">(</span>
                                                <span class="n">fromLanelet</span><span class="p">);</span>

</code></pre></div></div>
<p>There’s <code class="language-plaintext highlighter-rouge">leftRelations</code> that returns a vector of pairs of LaneletRelations whereas RelationType can be ‘left’ or ‘adjacentLeft’ in this case</p>

<h2 id="more">More</h2>

<p>This is just a quick walkthrough. Advanced examples can be found in <a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing/../lanelet2_examples/README.md">lanelet2_examples</a>.</p>

<h1 id="3-export-and-debugging-routing-graphs">3. Export and Debugging Routing Graphs</h1>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/lanelet_map_routing_graph.png" alt=""></p>

<h2 id="laneletmap-with-routing-information">LaneletMap with Routing Information</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">LaneletMapConstPtr</span> <span class="n">debugLaneletMap</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">getDebugLaneletMap</span><span class="p">(</span><span class="n">RoutingCostId</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<span class="n">write</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">"routing_graph.osm"</span><span class="p">),</span> <span class="o">*</span><span class="n">debugLaneletMap</span><span class="p">);</span>

</code></pre></div></div>
<p>This one is best viewed in <a href="https://josm.openstreetmap.de/">JOSM</a> and using a custom map style css which is to be found in <code class="language-plaintext highlighter-rouge">res/routing.mapcss</code>. <a href="https://josm.openstreetmap.de/attachment/wiki/Styles/addstyle.gif">This gif</a> shows, how to add a style to JOSM, except that one needs to press the <code class="language-plaintext highlighter-rouge">+</code> button in the configuration menu and specify the file.</p>

<p>Most of the information is to be found in the attributes. The line strings that connect lanelets do have a direction. The name of the forth-direction is generally to be found left/above the line and the reverse relation right/under the string.</p>

<h2 id="dot-graphviz-and-graphml-xml-based-file-export">DOT (GraphViz) and GraphML (xml-based) file export</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">graph</span><span class="o">-&gt;</span><span class="n">exportGraphViz</span><span class="p">(</span><span class="s">"~/graph.gv"</span><span class="p">);</span>
<span class="n">graph</span><span class="o">-&gt;</span><span class="n">exportGraphML</span><span class="p">(</span><span class="s">"~/graph.graphml"</span><span class="p">);</span>

</code></pre></div></div>
<p>These can then be viewed with a graph viewer like <a href="https://gephi.org/">Gephi</a>. The downside compared to the laneletMap export is, that the lanelets aren’t localized.</p>

<h1 id="4-routes">4. Routes</h1>

<p>Example route through <code class="language-plaintext highlighter-rouge">Oststadtkreisel</code>:</p>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/lanelet_map_route_oststadtkreisel_small.jpg" alt=""></p>

<p>Output of <code class="language-plaintext highlighter-rouge">getDebugLaneletMap()</code> function:</p>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/lanelet_map_route.png" alt=""></p>

<h2 id="example-relational-queries-on-routes">Example Relational Queries on Routes:</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get left lanelet of example lanelet 'll'</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLaneletRelation</span><span class="o">&gt;</span> <span class="n">left</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">leftRelation</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>
<span class="c1">// Get conflicting lanelets of 'll'</span>
<span class="n">ConstLanelets</span> <span class="n">conflicting</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">conflictingInRoute</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>


</code></pre></div></div>
<p>Note that a route just returns relations to lanelets that can be used to reach the goal.</p>
<h2 id="other-example-queries">Other example queries:</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get underlying shortest path</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">routing</span><span class="o">::</span><span class="n">LaneletPath</span><span class="o">&gt;</span> <span class="n">shortestPath</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">shortestPath</span><span class="p">();</span>
<span class="c1">// Get the full lane of a given lanelet 'll'</span>
<span class="n">LaneletSequence</span> <span class="n">fullLane</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">fullLane</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>
<span class="c1">// Get remaining lane of a given lanelet 'll'</span>
<span class="n">LaneletSequence</span> <span class="n">remainingLane</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">remainingLane</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>

</code></pre></div></div>

<h1 id="5-interconnect-routing-graphs-of-different-participants">5. Interconnect Routing Graphs of Different Participants</h1>
<p>A <code class="language-plaintext highlighter-rouge">RoutingGraphContainer</code> can be used to <em>connect</em> graphs of different participants to get information about conflicting lanelets.</p>
<h2 id="create-a-routinggraphcontainer">Create a RoutingGraphContainer</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">RoutingGraphPtr</span><span class="o">&gt;</span> <span class="n">graphs</span><span class="p">;</span>
<span class="n">graphs</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">vehicleGraphLaneletMap</span><span class="p">);</span>
<span class="n">graphs</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">pedestrianGraphLaneletMap</span><span class="p">);</span>
<span class="n">RoutingGraphContainer</span> <span class="nf">container</span><span class="p">(</span><span class="n">graphs</span><span class="p">);</span>

</code></pre></div></div>
<h2 id="example-queries">Example Queries</h2>
<p>The last parameter <em>participantHeight</em> is optional and decides whether conflicting lanelets are determined in 2D or 3D.</p>

<h3 id="query-for-a-single-lanelet">Query for a single lanelet</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">heightClearance</span><span class="p">{</span><span class="mf">4.</span><span class="p">};</span> <span class="c1">// Height of the traffic participant</span>
<span class="c1">// Query a single graph for conflicting lanelets</span>
<span class="kt">size_t</span> <span class="n">routingGraphId</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>   <span class="c1">// E.g. 0 for the first graph</span>
<span class="n">ConstLanelets</span> <span class="n">conflictingVehicle</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingInGraph</span><span class="p">(</span><span class="n">bridgeLanelet</span><span class="p">,</span> <span class="n">routingGraphId</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>
<span class="c1">// Query all graphs for conflicting lanelets</span>
<span class="n">RoutingGraphContainer</span><span class="o">::</span><span class="n">ConflictingInGraphs</span> <span class="n">conflicting</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingInGraphs</span><span class="p">(</span><span class="n">bridgeLanelet</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>

</code></pre></div></div>

<h3 id="query-for-a-whole-route">Query for a Whole Route</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Conflicting lanelets of a route in a single graph</span>
<span class="n">ConstLanelets</span> <span class="n">conflictingVehicle</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingOfRouteInGraph</span><span class="p">(</span><span class="n">routePtr</span><span class="p">,</span> <span class="n">routingGraphId</span><span class="p">)};</span>
<span class="c1">// Conflicting lanelets of a route in all graphs</span>
<span class="n">RoutingGraphContainer</span><span class="o">::</span><span class="n">ConflictingInGraphs</span> <span class="n">result</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingOfRouteInGraphs</span><span class="p">(</span><span class="n">routePtr</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>

</code></pre></div></div>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-lanelet2_routing">Changelog for package lanelet2_routing</h1>

<h2 id="122-2024-10-25">1.2.2 (2024-10-25)</h2>

<ul>
  <li>Prevent unintended modification of graph in lanelet::routing::Route
(<a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/issues/352">#352</a>)</li>
  <li>Build documentation with mkdocs
(<a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/issues/321">#321</a>)</li>
  <li>Contributors: DavUhll, poggenhans</li>
</ul>

<h2 id="121-2023-05-10">1.2.1 (2023-05-10)</h2>

<ul>
  <li>Update thirdparty deps, rework projected point, enable python
3.10/3.11 (<a href="https://github.com/immel-f/Lanelet2/issues/300">#300</a>)</li>
  <li>Contributors: poggenhans</li>
</ul>

<h2 id="120-2023-01-30">1.2.0 (2023-01-30)</h2>

<ul>
  <li>Add CI using GitHub Actions
(<a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/issues/256">#256</a>)</li>
  <li>Use TYPED_TEST_SUITE over deprecated TYPED_TEST_CASE in unit
tests</li>
  <li>Add missing include for boost 1.69</li>
  <li>Contributors: Fabian Poggenhans, Fabian Immel</li>
</ul>

<h2 id="111-2020-09-14">1.1.1 (2020-09-14)</h2>

<h2 id="110-2020-09-06">1.1.0 (2020-09-06)</h2>

<ul>
  <li>Implement more flexible configuration for obtaining possible paths.
Still lacking proper tests</li>
  <li>Add parameter to left/right/adjacentLeft/adjacentRight so that they
can be queried based on routing cost id</li>
  <li>Fix routing for lane changes, add tests for it</li>
  <li>Fix wrong route in circles</li>
  <li>Fix unittests that rely on a non-writable root directory</li>
  <li>Add experimental support for building with colcon on ros2 and
ament_cmake</li>
  <li>Fix the documentation about how to create a routing graph</li>
  <li>Removing extra semicolons causing warnings with wpedantic.</li>
  <li>Making all includes in lanelet2_routing consistent.</li>
  <li>Updating package.xml files to format 3.</li>
  <li>Fix use of equals in older boost versions</li>
  <li>Arbitrary lanelet and area adjacencies in LaneletPaths</li>
  <li>Add functionality to create the bounding polygon from a Path</li>
  <li>Contributors: Fabian Poggenhans, Johannes Janosovits, Joshua Whitley</li>
</ul>

<h2 id="101-2020-03-24">1.0.1 (2020-03-24)</h2>

<ul>
  <li>Mention laneletSubmap in README</li>
  <li>Make sure lanelet2 buildtool_export_depends on mrt_cmake_modules</li>
  <li>Add changelogs</li>
  <li>Fix clang-tidy warnings</li>
  <li>Contributors: Fabian Poggenhans</li>
</ul>

<h2 id="100-2020-03-03">1.0.0 (2020-03-03)</h2>

<ul>
  <li>Bump version to 1.0</li>
  <li>Routing: Add shortest path search based on areas</li>
  <li>Fix default values for lane changes in RoutingGraph</li>
  <li>RoutingGraph and Route now use the new LaneletSubmap to store the
lanelets they are using their member functions laneletMap() and
passableMap() are now deprecated and should be replaced by
laneletSubmap() and passableSubmap() respectively. These functions
have less overhead and are less likely to be misinterpreted as
'maps containing only the lanelets you need'</li>
  <li>Edges with nonfinite costs are no longer added to the graph to avoid
overflows. If a cost function returns infinite costs, no edge will
be added and the connection will not be available to the routing
graph</li>
  <li>Introduce proper namespacing for internal objects</li>
  <li>Update documentation</li>
  <li>Routing graph and route object now support queries with a custom
search function Routing graph and route object now both have a
function forEachSuccessor (and more) for doing more advanced
queries. Added doc tests and python bindings</li>
  <li>Update the shortest path algorithm to use the new dijktra search</li>
  <li>Extended and simplified the reachablePath/Set functions by using
boost graphs implementation of dijkstras shortest paths</li>
  <li>Refactored the internal representation of the route. Cleaned up
headers that are only supposed to be used internally</li>
  <li>Complete rewrite of the route builder using boost graph</li>
  <li>Removed the "diverging" and "merging" classification from the
routing graph and update the doc They are now all represented with
the "succeeding" relation. Information about merging or diverging
can now be obtained simply by querying the number of
following/preceding lanelets. As a consequence, the route object no
longer caches queried "lanes". The responsible functions are now
const.</li>
  <li>Fix compiler errors with gcc 5</li>
  <li>Fix image paths in routing doc</li>
  <li>Initial commit</li>
  <li>Contributors: Fabian Poggenhans, Johannes Janosovits, Maximilian
Naumann</li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/lanelet2_routing/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/catkin#galactic-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/catkin#galactic">catkin  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_core#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_core#galactic">ament_cmake_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/mrt_cmake_modules#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/mrt_cmake_modules#galactic">mrt_cmake_modules  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/lanelet2_core#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/lanelet2_core#galactic">lanelet2_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/lanelet2_traffic_rules#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/lanelet2_traffic_rules#galactic">lanelet2_traffic_rules  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/gtest">gtest</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/boost">boost</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2#galactic">lanelet2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2#galactic-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_examples#galactic">lanelet2_examples</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_examples#galactic-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_python#galactic">lanelet2_python</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_python#galactic-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_validation#galactic">lanelet2_validation</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_validation#galactic-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>lanelet2_routing</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="galactic-question-list" class="panel-body" style="display: none;"></div>
      <div id="galactic-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/lanelet2_routing+galactic">here</a>.</p>
      </div>
      <div id="galactic-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/fzi-forschungszentrum-informatik/lanelet2.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/galactic/p/lanelet2_routing"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/lanelet2_routing">lanelet2_routing</a> <small>package from <a style="text-decoration:none" href="/r/lanelet2/github-fzi-forschungszentrum-informatik-lanelet2">lanelet2</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2">

lanelet2
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_core">

lanelet2_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_examples">

lanelet2_examples
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_io">

lanelet2_io
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_maps">

lanelet2_maps
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_matching">

lanelet2_matching
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_projection">

lanelet2_projection
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_python">

lanelet2_python
</a>
            
          
            
            
              <span class="label label-default pkg-label">

lanelet2_routing
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_traffic_rules">

lanelet2_traffic_rules
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_validation">

lanelet2_validation
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/iron/p/lanelet2_routing"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="iron-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#iron-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#iron-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#iron-deps" data-toggle="tab"><span class="label label-primary">7</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#iron-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#iron-questions" data-toggle="tab"><span id="iron-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="iron-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>1.2.2</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-info">
                  
                    CATKIN</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Map handling framework for automated driving</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/fzi-forschungszentrum-informatik/lanelet2.git">https://github.com/fzi-forschungszentrum-informatik/lanelet2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-03-03
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/lanelet2/#iron-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/lanelet2/#iron-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/lanelet2/#iron-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Routing module for lanelet2
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2.git">Repository</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Fabian Immel</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Matthias Mayr</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing/README.md" title="Open in git repository">lanelet2_routing/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="lanelet2-routing">Lanelet2 routing</h1>

<p>The routing module for lanelet2.</p>

<p>For a short version of this you can also look at <a href="https://htmlpreview.github.io/?https://github.com/fzi-forschungszentrum-informatik/Lanelet2/blob/master/lanelet2_routing/doc/lanelet2_routing.html">the presentation</a>. If some images do not render correctly, please clone the repository and open the html file in your browser.</p>

<p>This readme covers some basics. The API offers more than that.</p>

<h1 id="1-components-and-vocabulary">1. Components and Vocabulary</h1>
<h2 id="how-to-create-a-routing-graph">How to create a Routing Graph</h2>
<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/components.png" alt=""></p>

<p>The needed components to create a routing graph are:</p>

<p><strong>Routing Cost Modules:</strong></p>
<ul>
  <li>They generically determine the routing cost for travelling along a lanelet/area</li>
  <li>Can be e.g. length, travel time</li>
  <li>You can dynamically select between them when querying the routing graph</li>
  <li><strong>You can easily plug in your own routing cost calculation</strong></li>
  <li><em>Influences the prefered path</em></li>
</ul>

<p><strong>Traffic Rules for a Specific Participant</strong> (see <a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/tree/master/lanelet2_traffic_rules/README.md">lanelet2_traffic_rules</a>)</p>
<ul>
  <li>Determines which lanelets/areas are passable</li>
  <li><em>Influences the possible paths</em></li>
</ul>

<p><strong>Lanelet Map:</strong> (see <a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing/../lanelet2_core/README.md">lanelet2_core</a>)</p>
<ul>
  <li>Map with Lanelets, Areas, Regulatory Elements, …</li>
</ul>

<h2 id="relations">Relations</h2>
<p>Lanelets that are part of a routing graph can have relations to each other:
<img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/max-hose.png" alt=""></p>

<p>The possible relations are:
    * <code class="language-plaintext highlighter-rouge">left</code>, <code class="language-plaintext highlighter-rouge">right</code> (reachable via lane change)
    * <code class="language-plaintext highlighter-rouge">adjacent left</code>, <code class="language-plaintext highlighter-rouge">adjacent right</code> (lanelets that are neighbours but not reachable via lane change)
    * <code class="language-plaintext highlighter-rouge">succeeding</code> (relation between two subsequent lanelets)
    * <code class="language-plaintext highlighter-rouge">conflicting</code> (intersecting lanelets/areas)
    * <code class="language-plaintext highlighter-rouge">area</code> (reachable area to lanelet/area relation)</p>

<h2 id="route-vs-path-vs-sequence">Route vs Path vs Sequence</h2>
<p>When querying data in the routing graph, you will come across the terms <em>route</em>, <em>path</em> and <em>sequence</em>. In contrast to a simple set of lanelets (data-wise a vector of lanelets), they have a special meaning and are data-wise different classes.</p>

<p>A <em>route</em> means all the lanelets that can be used to a destination without driving a different road. They can be connected by a generic sequence of lane changes and successors.</p>

<p>A <em>path</em> (LaneletPath or LaneletOrAreaPath) is an ordered list of Lanelets/Areas that lead to the destination. They can be connected by lane changes.</p>

<p>A <em>sequence</em> (LaneletSequence) is a sequence of subsequent Lanelets that is not separated by a lane change (think of it as a <em>lane</em>). It does not necessary lead to a destination, instead it ends when a lane change is required. In the example image, the lanelets A, D, B form a valid <em>sequence</em> (and also a valid <em>path</em>), while the lanelets A, D, E are a valid <em>path</em>, but not a valid <em>sequence</em>.</p>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/shortest_path_and_route.png" alt=""></p>

<h1 id="2-code-usage">2. Code Usage</h1>

<h2 id="create-a-routing-graph">Create a Routing Graph</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="k">namespace</span> <span class="n">lanelet</span><span class="p">;</span>

<span class="c1">// Load a map</span>
<span class="n">LaneletMapPtr</span> <span class="n">map</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s">"map.osm"</span><span class="p">,</span> <span class="n">Origin</span><span class="p">({</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">}));</span> <span class="c1">// origin has to be close to the map data in lat/lon coordinates</span>

<span class="c1">// Initialize traffic rules</span>
<span class="n">TrafficRulesPtr</span> <span class="n">trafficRules</span><span class="p">{</span><span class="n">TrafficRulesFactory</span><span class="o">::</span><span class="n">instance</span><span class="p">().</span><span class="n">create</span><span class="p">(</span><span class="n">Locations</span><span class="o">::</span><span class="n">Germany</span><span class="p">,</span> <span class="n">Participants</span><span class="o">::</span><span class="n">Vehicle</span><span class="p">)};</span>

<span class="c1">// Optional: Initalize routing costs</span>
<span class="kt">double</span> <span class="n">laneChangeCost</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">RoutingCostPtrs</span> <span class="n">costPtrs</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">RoutingCostDistance</span><span class="o">&gt;</span><span class="p">(</span><span class="n">laneChangeCost</span><span class="p">)};</span>

<span class="c1">// Optional: Initialize config for routing graph:</span>
<span class="n">RoutingGraph</span><span class="o">::</span><span class="n">Configuration</span> <span class="n">routingGraphConf</span><span class="p">;</span>
<span class="n">routingGraphConf</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="n">RoutingGraph</span><span class="o">::</span><span class="n">ParticipantHeight</span><span class="p">,</span> <span class="n">Attribute</span><span class="p">(</span><span class="s">"2."</span><span class="p">)));</span>

<span class="c1">// Create routing graph</span>
<span class="n">RoutingGraphPtr</span> <span class="n">graph</span> <span class="o">=</span> <span class="n">RoutingGraph</span><span class="o">::</span><span class="n">build</span><span class="p">(</span><span class="n">map</span><span class="p">,</span> <span class="n">trafficRules</span> <span class="cm">/*, costPtrs, routingGraphConf*/</span><span class="p">);</span>

</code></pre></div></div>
<ul>
  <li>The traffic rules object represents the view from which the map will be interpreted. Doing routing with vehicle traffic
rules will yield different results than routing with e.g. bicycle traffic rules.</li>
  <li>Routing for bicycles might include lanelets that are not available to (motorized)vehicles and vice versa.</li>
</ul>

<p>The python interface works similarly:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">lanelet2</span>
<span class="nb">map</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="sh">"</span><span class="s">map.osm</span><span class="sh">"</span><span class="p">,</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nc">Origin</span><span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">trafficRules</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="n">Locations</span><span class="p">.</span><span class="n">Germany</span><span class="p">,</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="n">Participants</span><span class="p">.</span><span class="n">Vehicle</span><span class="p">)</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">routing</span><span class="p">.</span><span class="nc">RoutingGraph</span><span class="p">(</span><span class="nb">map</span><span class="p">,</span> <span class="n">trafficRules</span><span class="p">)</span>

</code></pre></div></div>
<h2 id="get-a-shortest-path">Get a shortest path</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Optional</span><span class="o">&lt;</span><span class="n">routing</span><span class="o">::</span><span class="n">LaneletPath</span><span class="o">&gt;</span> <span class="n">shortestPath</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">shortestPath</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">);</span>

</code></pre></div></div>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">Optional</code> will be uninitialized (false) if there’s no path</li>
  <li>there’s also <code class="language-plaintext highlighter-rouge">shortestPathWithVia</code>
</li>
</ul>

<p>in python:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">shortestPath</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nf">shortestPath</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">)</span>

</code></pre></div></div>
<p>In python, shortestPath simply returns <code class="language-plaintext highlighter-rouge">None</code> if there is no path.</p>

<h2 id="get-and-write-a-route">Get and write a route</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Route</span><span class="o">&gt;</span> <span class="n">route</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">getRoute</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">route</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">LaneletSubmapConstPtr</span> <span class="n">routeMap</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">laneletSubmap</span><span class="p">();</span>
        <span class="n">write</span><span class="p">(</span><span class="s">"route.osm"</span><span class="p">,</span> <span class="o">*</span><span class="n">routeMap</span><span class="o">-&gt;</span><span class="n">laneletMap</span><span class="p">(),</span> <span class="n">Origin</span><span class="p">({</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">}));</span>
    <span class="p">}</span>

</code></pre></div></div>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">Optional</code> will be uninitialized (false) if there’s no route</li>
</ul>

<p>Note that there is a semantic difference between a <code class="language-plaintext highlighter-rouge">LaneletSubmap</code> and a <code class="language-plaintext highlighter-rouge">LaneletMap</code>. While a LaneletSubmap only contains
the things you explicitly added, the <code class="language-plaintext highlighter-rouge">LaneletMap</code> also contains all the things referred by them (the Points, Linestrings, things referred by RegulatoryElements).
The <code class="language-plaintext highlighter-rouge">LaneletSubmap</code> in this case only contains the Lanelets of the route. But since this is not sufficient for writing, you need to transform it into a regular <code class="language-plaintext highlighter-rouge">LaneletMap</code> first.</p>

<p>The written map will therefore not only contain the Lanelets but also their RegulatoryElements.
If these RegulatoryElements contain other Lanelets, these Lanelets will be part of the written map as well, even if they are not on the route.</p>

<p>in python:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">route</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nf">getRoute</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">)</span>
<span class="k">if</span> <span class="n">route</span><span class="p">:</span>
    <span class="n">laneletSubmap</span> <span class="o">=</span> <span class="n">route</span><span class="p">.</span><span class="nf">laneletSubmap</span><span class="p">()</span>
    <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">route.osm</span><span class="sh">"</span><span class="p">,</span> <span class="n">laneletSubmap</span><span class="p">.</span><span class="nf">laneletMap</span><span class="p">(),</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nc">Origin</span><span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">)))</span>

</code></pre></div></div>

<h2 id="get-a-reachable-set-of-lanelets">Get a reachable set of lanelets</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">maxRoutingCost</span><span class="p">{</span><span class="mi">100</span><span class="p">};</span>
<span class="n">ConstLanelets</span> <span class="n">reachableSet</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">reachableSet</span><span class="p">(</span><span class="n">lanelet</span><span class="p">,</span> <span class="n">maxRoutingCost</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">);</span>

</code></pre></div></div>

<h2 id="left-right-following-lanelets">Left, Right, Following Lanelets</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get routable left lanelet if it exists</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLanelet</span><span class="o">&gt;</span> <span class="n">left</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>
<span class="c1">// Get non-routable left lanelet if it exists</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLanelet</span><span class="o">&gt;</span> <span class="n">adjacentLeft</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">adjacentLeft</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>
<span class="c1">// Get following lanelets</span>
<span class="n">ConstLanelets</span> <span class="n">following</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">following</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>

</code></pre></div></div>
<ul>
  <li>Also available: <code class="language-plaintext highlighter-rouge">right</code>, <code class="language-plaintext highlighter-rouge">adjacentRight</code>, <code class="language-plaintext highlighter-rouge">lefts</code>, <code class="language-plaintext highlighter-rouge">rights</code>, <code class="language-plaintext highlighter-rouge">conflicting</code>
</li>
</ul>

<p>Alternatively:
 or queries that return relations:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get relations to all left lanelets</span>
<span class="n">LaneletRelations</span> <span class="n">leftRelations</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">leftRelations</span><span class="p">(</span>
                                                <span class="n">fromLanelet</span><span class="p">);</span>

</code></pre></div></div>
<p>There’s <code class="language-plaintext highlighter-rouge">leftRelations</code> that returns a vector of pairs of LaneletRelations whereas RelationType can be ‘left’ or ‘adjacentLeft’ in this case</p>

<h2 id="more">More</h2>

<p>This is just a quick walkthrough. Advanced examples can be found in <a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing/../lanelet2_examples/README.md">lanelet2_examples</a>.</p>

<h1 id="3-export-and-debugging-routing-graphs">3. Export and Debugging Routing Graphs</h1>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/lanelet_map_routing_graph.png" alt=""></p>

<h2 id="laneletmap-with-routing-information">LaneletMap with Routing Information</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">LaneletMapConstPtr</span> <span class="n">debugLaneletMap</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">getDebugLaneletMap</span><span class="p">(</span><span class="n">RoutingCostId</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<span class="n">write</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">"routing_graph.osm"</span><span class="p">),</span> <span class="o">*</span><span class="n">debugLaneletMap</span><span class="p">);</span>

</code></pre></div></div>
<p>This one is best viewed in <a href="https://josm.openstreetmap.de/">JOSM</a> and using a custom map style css which is to be found in <code class="language-plaintext highlighter-rouge">res/routing.mapcss</code>. <a href="https://josm.openstreetmap.de/attachment/wiki/Styles/addstyle.gif">This gif</a> shows, how to add a style to JOSM, except that one needs to press the <code class="language-plaintext highlighter-rouge">+</code> button in the configuration menu and specify the file.</p>

<p>Most of the information is to be found in the attributes. The line strings that connect lanelets do have a direction. The name of the forth-direction is generally to be found left/above the line and the reverse relation right/under the string.</p>

<h2 id="dot-graphviz-and-graphml-xml-based-file-export">DOT (GraphViz) and GraphML (xml-based) file export</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">graph</span><span class="o">-&gt;</span><span class="n">exportGraphViz</span><span class="p">(</span><span class="s">"~/graph.gv"</span><span class="p">);</span>
<span class="n">graph</span><span class="o">-&gt;</span><span class="n">exportGraphML</span><span class="p">(</span><span class="s">"~/graph.graphml"</span><span class="p">);</span>

</code></pre></div></div>
<p>These can then be viewed with a graph viewer like <a href="https://gephi.org/">Gephi</a>. The downside compared to the laneletMap export is, that the lanelets aren’t localized.</p>

<h1 id="4-routes">4. Routes</h1>

<p>Example route through <code class="language-plaintext highlighter-rouge">Oststadtkreisel</code>:</p>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/lanelet_map_route_oststadtkreisel_small.jpg" alt=""></p>

<p>Output of <code class="language-plaintext highlighter-rouge">getDebugLaneletMap()</code> function:</p>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/lanelet_map_route.png" alt=""></p>

<h2 id="example-relational-queries-on-routes">Example Relational Queries on Routes:</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get left lanelet of example lanelet 'll'</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLaneletRelation</span><span class="o">&gt;</span> <span class="n">left</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">leftRelation</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>
<span class="c1">// Get conflicting lanelets of 'll'</span>
<span class="n">ConstLanelets</span> <span class="n">conflicting</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">conflictingInRoute</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>


</code></pre></div></div>
<p>Note that a route just returns relations to lanelets that can be used to reach the goal.</p>
<h2 id="other-example-queries">Other example queries:</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get underlying shortest path</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">routing</span><span class="o">::</span><span class="n">LaneletPath</span><span class="o">&gt;</span> <span class="n">shortestPath</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">shortestPath</span><span class="p">();</span>
<span class="c1">// Get the full lane of a given lanelet 'll'</span>
<span class="n">LaneletSequence</span> <span class="n">fullLane</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">fullLane</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>
<span class="c1">// Get remaining lane of a given lanelet 'll'</span>
<span class="n">LaneletSequence</span> <span class="n">remainingLane</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">remainingLane</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>

</code></pre></div></div>

<h1 id="5-interconnect-routing-graphs-of-different-participants">5. Interconnect Routing Graphs of Different Participants</h1>
<p>A <code class="language-plaintext highlighter-rouge">RoutingGraphContainer</code> can be used to <em>connect</em> graphs of different participants to get information about conflicting lanelets.</p>
<h2 id="create-a-routinggraphcontainer">Create a RoutingGraphContainer</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">RoutingGraphPtr</span><span class="o">&gt;</span> <span class="n">graphs</span><span class="p">;</span>
<span class="n">graphs</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">vehicleGraphLaneletMap</span><span class="p">);</span>
<span class="n">graphs</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">pedestrianGraphLaneletMap</span><span class="p">);</span>
<span class="n">RoutingGraphContainer</span> <span class="nf">container</span><span class="p">(</span><span class="n">graphs</span><span class="p">);</span>

</code></pre></div></div>
<h2 id="example-queries">Example Queries</h2>
<p>The last parameter <em>participantHeight</em> is optional and decides whether conflicting lanelets are determined in 2D or 3D.</p>

<h3 id="query-for-a-single-lanelet">Query for a single lanelet</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">heightClearance</span><span class="p">{</span><span class="mf">4.</span><span class="p">};</span> <span class="c1">// Height of the traffic participant</span>
<span class="c1">// Query a single graph for conflicting lanelets</span>
<span class="kt">size_t</span> <span class="n">routingGraphId</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>   <span class="c1">// E.g. 0 for the first graph</span>
<span class="n">ConstLanelets</span> <span class="n">conflictingVehicle</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingInGraph</span><span class="p">(</span><span class="n">bridgeLanelet</span><span class="p">,</span> <span class="n">routingGraphId</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>
<span class="c1">// Query all graphs for conflicting lanelets</span>
<span class="n">RoutingGraphContainer</span><span class="o">::</span><span class="n">ConflictingInGraphs</span> <span class="n">conflicting</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingInGraphs</span><span class="p">(</span><span class="n">bridgeLanelet</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>

</code></pre></div></div>

<h3 id="query-for-a-whole-route">Query for a Whole Route</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Conflicting lanelets of a route in a single graph</span>
<span class="n">ConstLanelets</span> <span class="n">conflictingVehicle</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingOfRouteInGraph</span><span class="p">(</span><span class="n">routePtr</span><span class="p">,</span> <span class="n">routingGraphId</span><span class="p">)};</span>
<span class="c1">// Conflicting lanelets of a route in all graphs</span>
<span class="n">RoutingGraphContainer</span><span class="o">::</span><span class="n">ConflictingInGraphs</span> <span class="n">result</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingOfRouteInGraphs</span><span class="p">(</span><span class="n">routePtr</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>

</code></pre></div></div>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-lanelet2_routing">Changelog for package lanelet2_routing</h1>

<h2 id="122-2024-10-25">1.2.2 (2024-10-25)</h2>

<ul>
  <li>Prevent unintended modification of graph in lanelet::routing::Route
(<a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/issues/352">#352</a>)</li>
  <li>Build documentation with mkdocs
(<a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/issues/321">#321</a>)</li>
  <li>Contributors: DavUhll, poggenhans</li>
</ul>

<h2 id="121-2023-05-10">1.2.1 (2023-05-10)</h2>

<ul>
  <li>Update thirdparty deps, rework projected point, enable python
3.10/3.11 (<a href="https://github.com/immel-f/Lanelet2/issues/300">#300</a>)</li>
  <li>Contributors: poggenhans</li>
</ul>

<h2 id="120-2023-01-30">1.2.0 (2023-01-30)</h2>

<ul>
  <li>Add CI using GitHub Actions
(<a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/issues/256">#256</a>)</li>
  <li>Use TYPED_TEST_SUITE over deprecated TYPED_TEST_CASE in unit
tests</li>
  <li>Add missing include for boost 1.69</li>
  <li>Contributors: Fabian Poggenhans, Fabian Immel</li>
</ul>

<h2 id="111-2020-09-14">1.1.1 (2020-09-14)</h2>

<h2 id="110-2020-09-06">1.1.0 (2020-09-06)</h2>

<ul>
  <li>Implement more flexible configuration for obtaining possible paths.
Still lacking proper tests</li>
  <li>Add parameter to left/right/adjacentLeft/adjacentRight so that they
can be queried based on routing cost id</li>
  <li>Fix routing for lane changes, add tests for it</li>
  <li>Fix wrong route in circles</li>
  <li>Fix unittests that rely on a non-writable root directory</li>
  <li>Add experimental support for building with colcon on ros2 and
ament_cmake</li>
  <li>Fix the documentation about how to create a routing graph</li>
  <li>Removing extra semicolons causing warnings with wpedantic.</li>
  <li>Making all includes in lanelet2_routing consistent.</li>
  <li>Updating package.xml files to format 3.</li>
  <li>Fix use of equals in older boost versions</li>
  <li>Arbitrary lanelet and area adjacencies in LaneletPaths</li>
  <li>Add functionality to create the bounding polygon from a Path</li>
  <li>Contributors: Fabian Poggenhans, Johannes Janosovits, Joshua Whitley</li>
</ul>

<h2 id="101-2020-03-24">1.0.1 (2020-03-24)</h2>

<ul>
  <li>Mention laneletSubmap in README</li>
  <li>Make sure lanelet2 buildtool_export_depends on mrt_cmake_modules</li>
  <li>Add changelogs</li>
  <li>Fix clang-tidy warnings</li>
  <li>Contributors: Fabian Poggenhans</li>
</ul>

<h2 id="100-2020-03-03">1.0.0 (2020-03-03)</h2>

<ul>
  <li>Bump version to 1.0</li>
  <li>Routing: Add shortest path search based on areas</li>
  <li>Fix default values for lane changes in RoutingGraph</li>
  <li>RoutingGraph and Route now use the new LaneletSubmap to store the
lanelets they are using their member functions laneletMap() and
passableMap() are now deprecated and should be replaced by
laneletSubmap() and passableSubmap() respectively. These functions
have less overhead and are less likely to be misinterpreted as
'maps containing only the lanelets you need'</li>
  <li>Edges with nonfinite costs are no longer added to the graph to avoid
overflows. If a cost function returns infinite costs, no edge will
be added and the connection will not be available to the routing
graph</li>
  <li>Introduce proper namespacing for internal objects</li>
  <li>Update documentation</li>
  <li>Routing graph and route object now support queries with a custom
search function Routing graph and route object now both have a
function forEachSuccessor (and more) for doing more advanced
queries. Added doc tests and python bindings</li>
  <li>Update the shortest path algorithm to use the new dijktra search</li>
  <li>Extended and simplified the reachablePath/Set functions by using
boost graphs implementation of dijkstras shortest paths</li>
  <li>Refactored the internal representation of the route. Cleaned up
headers that are only supposed to be used internally</li>
  <li>Complete rewrite of the route builder using boost graph</li>
  <li>Removed the "diverging" and "merging" classification from the
routing graph and update the doc They are now all represented with
the "succeeding" relation. Information about merging or diverging
can now be obtained simply by querying the number of
following/preceding lanelets. As a consequence, the route object no
longer caches queried "lanes". The responsible functions are now
const.</li>
  <li>Fix compiler errors with gcc 5</li>
  <li>Fix image paths in routing doc</li>
  <li>Initial commit</li>
  <li>Contributors: Fabian Poggenhans, Johannes Janosovits, Maximilian
Naumann</li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/lanelet2_routing/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/catkin#iron-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/catkin#iron">catkin  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_core#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_core#iron">ament_cmake_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/mrt_cmake_modules#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/mrt_cmake_modules#iron">mrt_cmake_modules  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/lanelet2_core#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/lanelet2_core#iron">lanelet2_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/lanelet2_traffic_rules#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/lanelet2_traffic_rules#iron">lanelet2_traffic_rules  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/gtest">gtest</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/boost">boost</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2#iron">lanelet2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2#iron-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_examples#iron">lanelet2_examples</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_examples#iron-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_python#iron">lanelet2_python</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_python#iron-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_validation#iron">lanelet2_validation</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_validation#iron-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>lanelet2_routing</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="iron-question-list" class="panel-body" style="display: none;"></div>
      <div id="iron-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/lanelet2_routing+iron">here</a>.</p>
      </div>
      <div id="iron-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/fzi-forschungszentrum-informatik/lanelet2.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/iron/p/lanelet2_routing"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/lanelet2_routing">lanelet2_routing</a> <small>package from <a style="text-decoration:none" href="/r/lanelet2/github-fzi-forschungszentrum-informatik-lanelet2">lanelet2</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2">

lanelet2
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_core">

lanelet2_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_examples">

lanelet2_examples
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_io">

lanelet2_io
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_maps">

lanelet2_maps
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_matching">

lanelet2_matching
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_projection">

lanelet2_projection
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_python">

lanelet2_python
</a>
            
          
            
            
              <span class="label label-default pkg-label">

lanelet2_routing
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_traffic_rules">

lanelet2_traffic_rules
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lanelet2_validation">

lanelet2_validation
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/melodic/api/lanelet2_routing/html/"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  <a class="list-group-item text-center "
     target="_blank"
     href="http://wiki.ros.org/lanelet2_routing?distro=melodic"
     title="View this package on wiki.ros.org">
       <span style="margin-right: 5px;" class="glyphicon glyphicon-info-sign"></span>
       <br>
       Wiki
  </a>
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="melodic-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#melodic-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#melodic-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#melodic-deps" data-toggle="tab"><span class="label label-primary">7</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#melodic-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#melodic-questions" data-toggle="tab"><span id="melodic-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="melodic-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>1.2.2</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-info">
                  
                    CATKIN</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">Map handling framework for automated driving</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/fzi-forschungszentrum-informatik/lanelet2.git">https://github.com/fzi-forschungszentrum-informatik/lanelet2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-03-03
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    
                      <div class="dropdown">
                        <button type="button" data-toggle="dropdown" class="btn label label-primary dropdown-toggle ci-result-success" title="Latest build information: Tue, 02 May 2023 07:36:50 GMT
  Total tests: 727
  Succeeded: 727
  Skipped: 0
  Failed: 0
Click to show more build history.">
                          <span class="glyphicon glyphicon-check"></span>
                          Continuous Integration
                          
                            : 727 / 727
                          
                          <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" role="menu">
                          <li class="dropdown-header">Latest build history: Tue, 02 May 2023 07:36:50 GMT (last 5 of 26 builds)</li>
                          
                            <li class="ci-build-info ci-result-success">
                              <a href="http://build.ros.org/job/Mdev__lanelet2__ubuntu_bionic_amd64/76/" target="_blank">
                                <span class="glyphicon glyphicon-ok"></span>
                                <span><strong>#76</strong></span>
                                <span>02-May-2023 07:14</span>
                                <span>727 / 727</span>
                              </a>
                            </li>
                          
                            <li class="ci-build-info ci-result-success">
                              <a href="http://build.ros.org/job/Mdev__lanelet2__ubuntu_bionic_amd64/75/" target="_blank">
                                <span class="glyphicon glyphicon-ok"></span>
                                <span><strong>#75</strong></span>
                                <span>28-Apr-2023 11:14</span>
                                <span>727 / 727</span>
                              </a>
                            </li>
                          
                            <li class="ci-build-info ci-result-success">
                              <a href="http://build.ros.org/job/Mdev__lanelet2__ubuntu_bionic_amd64/74/" target="_blank">
                                <span class="glyphicon glyphicon-ok"></span>
                                <span><strong>#74</strong></span>
                                <span>27-Apr-2023 21:14</span>
                                <span>727 / 727</span>
                              </a>
                            </li>
                          
                            <li class="ci-build-info ci-result-success">
                              <a href="http://build.ros.org/job/Mdev__lanelet2__ubuntu_bionic_amd64/73/" target="_blank">
                                <span class="glyphicon glyphicon-ok"></span>
                                <span><strong>#73</strong></span>
                                <span>12-Apr-2023 17:14</span>
                                <span>727 / 727</span>
                              </a>
                            </li>
                          
                            <li class="ci-build-info ci-result-success">
                              <a href="http://build.ros.org/job/Mdev__lanelet2__ubuntu_bionic_amd64/72/" target="_blank">
                                <span class="glyphicon glyphicon-ok"></span>
                                <span><strong>#72</strong></span>
                                <span>03-Apr-2023 20:14</span>
                                <span>727 / 727</span>
                              </a>
                            </li>
                          
                        </ul>
                      </div>
                    
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/lanelet2/#melodic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/lanelet2/#melodic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/lanelet2/#melodic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Routing module for lanelet2
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2.git">Repository</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Fabian Immel</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Matthias Mayr</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing/README.md" title="Open in git repository">lanelet2_routing/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="lanelet2-routing">Lanelet2 routing</h1>

<p>The routing module for lanelet2.</p>

<p>For a short version of this you can also look at <a href="https://htmlpreview.github.io/?https://github.com/fzi-forschungszentrum-informatik/Lanelet2/blob/master/lanelet2_routing/doc/lanelet2_routing.html">the presentation</a>. If some images do not render correctly, please clone the repository and open the html file in your browser.</p>

<p>This readme covers some basics. The API offers more than that.</p>

<h1 id="1-components-and-vocabulary">1. Components and Vocabulary</h1>
<h2 id="how-to-create-a-routing-graph">How to create a Routing Graph</h2>
<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/components.png" alt=""></p>

<p>The needed components to create a routing graph are:</p>

<p><strong>Routing Cost Modules:</strong></p>
<ul>
  <li>They generically determine the routing cost for travelling along a lanelet/area</li>
  <li>Can be e.g. length, travel time</li>
  <li>You can dynamically select between them when querying the routing graph</li>
  <li><strong>You can easily plug in your own routing cost calculation</strong></li>
  <li><em>Influences the prefered path</em></li>
</ul>

<p><strong>Traffic Rules for a Specific Participant</strong> (see <a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/tree/master/lanelet2_traffic_rules/README.md">lanelet2_traffic_rules</a>)</p>
<ul>
  <li>Determines which lanelets/areas are passable</li>
  <li><em>Influences the possible paths</em></li>
</ul>

<p><strong>Lanelet Map:</strong> (see <a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing/../lanelet2_core/README.md">lanelet2_core</a>)</p>
<ul>
  <li>Map with Lanelets, Areas, Regulatory Elements, …</li>
</ul>

<h2 id="relations">Relations</h2>
<p>Lanelets that are part of a routing graph can have relations to each other:
<img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/max-hose.png" alt=""></p>

<p>The possible relations are:
    * <code class="language-plaintext highlighter-rouge">left</code>, <code class="language-plaintext highlighter-rouge">right</code> (reachable via lane change)
    * <code class="language-plaintext highlighter-rouge">adjacent left</code>, <code class="language-plaintext highlighter-rouge">adjacent right</code> (lanelets that are neighbours but not reachable via lane change)
    * <code class="language-plaintext highlighter-rouge">succeeding</code> (relation between two subsequent lanelets)
    * <code class="language-plaintext highlighter-rouge">conflicting</code> (intersecting lanelets/areas)
    * <code class="language-plaintext highlighter-rouge">area</code> (reachable area to lanelet/area relation)</p>

<h2 id="route-vs-path-vs-sequence">Route vs Path vs Sequence</h2>
<p>When querying data in the routing graph, you will come across the terms <em>route</em>, <em>path</em> and <em>sequence</em>. In contrast to a simple set of lanelets (data-wise a vector of lanelets), they have a special meaning and are data-wise different classes.</p>

<p>A <em>route</em> means all the lanelets that can be used to a destination without driving a different road. They can be connected by a generic sequence of lane changes and successors.</p>

<p>A <em>path</em> (LaneletPath or LaneletOrAreaPath) is an ordered list of Lanelets/Areas that lead to the destination. They can be connected by lane changes.</p>

<p>A <em>sequence</em> (LaneletSequence) is a sequence of subsequent Lanelets that is not separated by a lane change (think of it as a <em>lane</em>). It does not necessary lead to a destination, instead it ends when a lane change is required. In the example image, the lanelets A, D, B form a valid <em>sequence</em> (and also a valid <em>path</em>), while the lanelets A, D, E are a valid <em>path</em>, but not a valid <em>sequence</em>.</p>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/shortest_path_and_route.png" alt=""></p>

<h1 id="2-code-usage">2. Code Usage</h1>

<h2 id="create-a-routing-graph">Create a Routing Graph</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="k">namespace</span> <span class="n">lanelet</span><span class="p">;</span>

<span class="c1">// Load a map</span>
<span class="n">LaneletMapPtr</span> <span class="n">map</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s">"map.osm"</span><span class="p">,</span> <span class="n">Origin</span><span class="p">({</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">}));</span> <span class="c1">// origin has to be close to the map data in lat/lon coordinates</span>

<span class="c1">// Initialize traffic rules</span>
<span class="n">TrafficRulesPtr</span> <span class="n">trafficRules</span><span class="p">{</span><span class="n">TrafficRulesFactory</span><span class="o">::</span><span class="n">instance</span><span class="p">().</span><span class="n">create</span><span class="p">(</span><span class="n">Locations</span><span class="o">::</span><span class="n">Germany</span><span class="p">,</span> <span class="n">Participants</span><span class="o">::</span><span class="n">Vehicle</span><span class="p">)};</span>

<span class="c1">// Optional: Initalize routing costs</span>
<span class="kt">double</span> <span class="n">laneChangeCost</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">RoutingCostPtrs</span> <span class="n">costPtrs</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">RoutingCostDistance</span><span class="o">&gt;</span><span class="p">(</span><span class="n">laneChangeCost</span><span class="p">)};</span>

<span class="c1">// Optional: Initialize config for routing graph:</span>
<span class="n">RoutingGraph</span><span class="o">::</span><span class="n">Configuration</span> <span class="n">routingGraphConf</span><span class="p">;</span>
<span class="n">routingGraphConf</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="n">RoutingGraph</span><span class="o">::</span><span class="n">ParticipantHeight</span><span class="p">,</span> <span class="n">Attribute</span><span class="p">(</span><span class="s">"2."</span><span class="p">)));</span>

<span class="c1">// Create routing graph</span>
<span class="n">RoutingGraphPtr</span> <span class="n">graph</span> <span class="o">=</span> <span class="n">RoutingGraph</span><span class="o">::</span><span class="n">build</span><span class="p">(</span><span class="n">map</span><span class="p">,</span> <span class="n">trafficRules</span> <span class="cm">/*, costPtrs, routingGraphConf*/</span><span class="p">);</span>

</code></pre></div></div>
<ul>
  <li>The traffic rules object represents the view from which the map will be interpreted. Doing routing with vehicle traffic
rules will yield different results than routing with e.g. bicycle traffic rules.</li>
  <li>Routing for bicycles might include lanelets that are not available to (motorized)vehicles and vice versa.</li>
</ul>

<p>The python interface works similarly:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">lanelet2</span>
<span class="nb">map</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="sh">"</span><span class="s">map.osm</span><span class="sh">"</span><span class="p">,</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nc">Origin</span><span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">trafficRules</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="n">Locations</span><span class="p">.</span><span class="n">Germany</span><span class="p">,</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">traffic_rules</span><span class="p">.</span><span class="n">Participants</span><span class="p">.</span><span class="n">Vehicle</span><span class="p">)</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">routing</span><span class="p">.</span><span class="nc">RoutingGraph</span><span class="p">(</span><span class="nb">map</span><span class="p">,</span> <span class="n">trafficRules</span><span class="p">)</span>

</code></pre></div></div>
<h2 id="get-a-shortest-path">Get a shortest path</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Optional</span><span class="o">&lt;</span><span class="n">routing</span><span class="o">::</span><span class="n">LaneletPath</span><span class="o">&gt;</span> <span class="n">shortestPath</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">shortestPath</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">);</span>

</code></pre></div></div>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">Optional</code> will be uninitialized (false) if there’s no path</li>
  <li>there’s also <code class="language-plaintext highlighter-rouge">shortestPathWithVia</code>
</li>
</ul>

<p>in python:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">shortestPath</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nf">shortestPath</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">)</span>

</code></pre></div></div>
<p>In python, shortestPath simply returns <code class="language-plaintext highlighter-rouge">None</code> if there is no path.</p>

<h2 id="get-and-write-a-route">Get and write a route</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Route</span><span class="o">&gt;</span> <span class="n">route</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">getRoute</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">route</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">LaneletSubmapConstPtr</span> <span class="n">routeMap</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">laneletSubmap</span><span class="p">();</span>
        <span class="n">write</span><span class="p">(</span><span class="s">"route.osm"</span><span class="p">,</span> <span class="o">*</span><span class="n">routeMap</span><span class="o">-&gt;</span><span class="n">laneletMap</span><span class="p">(),</span> <span class="n">Origin</span><span class="p">({</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">}));</span>
    <span class="p">}</span>

</code></pre></div></div>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">Optional</code> will be uninitialized (false) if there’s no route</li>
</ul>

<p>Note that there is a semantic difference between a <code class="language-plaintext highlighter-rouge">LaneletSubmap</code> and a <code class="language-plaintext highlighter-rouge">LaneletMap</code>. While a LaneletSubmap only contains
the things you explicitly added, the <code class="language-plaintext highlighter-rouge">LaneletMap</code> also contains all the things referred by them (the Points, Linestrings, things referred by RegulatoryElements).
The <code class="language-plaintext highlighter-rouge">LaneletSubmap</code> in this case only contains the Lanelets of the route. But since this is not sufficient for writing, you need to transform it into a regular <code class="language-plaintext highlighter-rouge">LaneletMap</code> first.</p>

<p>The written map will therefore not only contain the Lanelets but also their RegulatoryElements.
If these RegulatoryElements contain other Lanelets, these Lanelets will be part of the written map as well, even if they are not on the route.</p>

<p>in python:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">route</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nf">getRoute</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">,</span> <span class="n">toLanelet</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">)</span>
<span class="k">if</span> <span class="n">route</span><span class="p">:</span>
    <span class="n">laneletSubmap</span> <span class="o">=</span> <span class="n">route</span><span class="p">.</span><span class="nf">laneletSubmap</span><span class="p">()</span>
    <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">route.osm</span><span class="sh">"</span><span class="p">,</span> <span class="n">laneletSubmap</span><span class="p">.</span><span class="nf">laneletMap</span><span class="p">(),</span> <span class="n">lanelet2</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nc">Origin</span><span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="mi">8</span><span class="p">)))</span>

</code></pre></div></div>

<h2 id="get-a-reachable-set-of-lanelets">Get a reachable set of lanelets</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">maxRoutingCost</span><span class="p">{</span><span class="mi">100</span><span class="p">};</span>
<span class="n">ConstLanelets</span> <span class="n">reachableSet</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">reachableSet</span><span class="p">(</span><span class="n">lanelet</span><span class="p">,</span> <span class="n">maxRoutingCost</span><span class="p">,</span> <span class="n">routingCostId</span><span class="p">);</span>

</code></pre></div></div>

<h2 id="left-right-following-lanelets">Left, Right, Following Lanelets</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get routable left lanelet if it exists</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLanelet</span><span class="o">&gt;</span> <span class="n">left</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>
<span class="c1">// Get non-routable left lanelet if it exists</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLanelet</span><span class="o">&gt;</span> <span class="n">adjacentLeft</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">adjacentLeft</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>
<span class="c1">// Get following lanelets</span>
<span class="n">ConstLanelets</span> <span class="n">following</span><span class="p">{</span><span class="n">graph</span><span class="o">-&gt;</span><span class="n">following</span><span class="p">(</span><span class="n">fromLanelet</span><span class="p">)};</span>

</code></pre></div></div>
<ul>
  <li>Also available: <code class="language-plaintext highlighter-rouge">right</code>, <code class="language-plaintext highlighter-rouge">adjacentRight</code>, <code class="language-plaintext highlighter-rouge">lefts</code>, <code class="language-plaintext highlighter-rouge">rights</code>, <code class="language-plaintext highlighter-rouge">conflicting</code>
</li>
</ul>

<p>Alternatively:
 or queries that return relations:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get relations to all left lanelets</span>
<span class="n">LaneletRelations</span> <span class="n">leftRelations</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">leftRelations</span><span class="p">(</span>
                                                <span class="n">fromLanelet</span><span class="p">);</span>

</code></pre></div></div>
<p>There’s <code class="language-plaintext highlighter-rouge">leftRelations</code> that returns a vector of pairs of LaneletRelations whereas RelationType can be ‘left’ or ‘adjacentLeft’ in this case</p>

<h2 id="more">More</h2>

<p>This is just a quick walkthrough. Advanced examples can be found in <a href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing/../lanelet2_examples/README.md">lanelet2_examples</a>.</p>

<h1 id="3-export-and-debugging-routing-graphs">3. Export and Debugging Routing Graphs</h1>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/lanelet_map_routing_graph.png" alt=""></p>

<h2 id="laneletmap-with-routing-information">LaneletMap with Routing Information</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">LaneletMapConstPtr</span> <span class="n">debugLaneletMap</span> <span class="o">=</span> <span class="n">graph</span><span class="o">-&gt;</span><span class="n">getDebugLaneletMap</span><span class="p">(</span><span class="n">RoutingCostId</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<span class="n">write</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">"routing_graph.osm"</span><span class="p">),</span> <span class="o">*</span><span class="n">debugLaneletMap</span><span class="p">);</span>

</code></pre></div></div>
<p>This one is best viewed in <a href="https://josm.openstreetmap.de/">JOSM</a> and using a custom map style css which is to be found in <code class="language-plaintext highlighter-rouge">res/routing.mapcss</code>. <a href="https://josm.openstreetmap.de/attachment/wiki/Styles/addstyle.gif">This gif</a> shows, how to add a style to JOSM, except that one needs to press the <code class="language-plaintext highlighter-rouge">+</code> button in the configuration menu and specify the file.</p>

<p>Most of the information is to be found in the attributes. The line strings that connect lanelets do have a direction. The name of the forth-direction is generally to be found left/above the line and the reverse relation right/under the string.</p>

<h2 id="dot-graphviz-and-graphml-xml-based-file-export">DOT (GraphViz) and GraphML (xml-based) file export</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">graph</span><span class="o">-&gt;</span><span class="n">exportGraphViz</span><span class="p">(</span><span class="s">"~/graph.gv"</span><span class="p">);</span>
<span class="n">graph</span><span class="o">-&gt;</span><span class="n">exportGraphML</span><span class="p">(</span><span class="s">"~/graph.graphml"</span><span class="p">);</span>

</code></pre></div></div>
<p>These can then be viewed with a graph viewer like <a href="https://gephi.org/">Gephi</a>. The downside compared to the laneletMap export is, that the lanelets aren’t localized.</p>

<h1 id="4-routes">4. Routes</h1>

<p>Example route through <code class="language-plaintext highlighter-rouge">Oststadtkreisel</code>:</p>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/lanelet_map_route_oststadtkreisel_small.jpg" alt=""></p>

<p>Output of <code class="language-plaintext highlighter-rouge">getDebugLaneletMap()</code> function:</p>

<p><img src="https://raw.githubusercontent.com/fzi-forschungszentrum-informatik/lanelet2/master/lanelet2_routing/doc/images/lanelet_map_route.png" alt=""></p>

<h2 id="example-relational-queries-on-routes">Example Relational Queries on Routes:</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get left lanelet of example lanelet 'll'</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">ConstLaneletRelation</span><span class="o">&gt;</span> <span class="n">left</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">leftRelation</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>
<span class="c1">// Get conflicting lanelets of 'll'</span>
<span class="n">ConstLanelets</span> <span class="n">conflicting</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">conflictingInRoute</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>


</code></pre></div></div>
<p>Note that a route just returns relations to lanelets that can be used to reach the goal.</p>
<h2 id="other-example-queries">Other example queries:</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get underlying shortest path</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">routing</span><span class="o">::</span><span class="n">LaneletPath</span><span class="o">&gt;</span> <span class="n">shortestPath</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">shortestPath</span><span class="p">();</span>
<span class="c1">// Get the full lane of a given lanelet 'll'</span>
<span class="n">LaneletSequence</span> <span class="n">fullLane</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">fullLane</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>
<span class="c1">// Get remaining lane of a given lanelet 'll'</span>
<span class="n">LaneletSequence</span> <span class="n">remainingLane</span> <span class="o">=</span> <span class="n">route</span><span class="o">-&gt;</span><span class="n">remainingLane</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>

</code></pre></div></div>

<h1 id="5-interconnect-routing-graphs-of-different-participants">5. Interconnect Routing Graphs of Different Participants</h1>
<p>A <code class="language-plaintext highlighter-rouge">RoutingGraphContainer</code> can be used to <em>connect</em> graphs of different participants to get information about conflicting lanelets.</p>
<h2 id="create-a-routinggraphcontainer">Create a RoutingGraphContainer</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">RoutingGraphPtr</span><span class="o">&gt;</span> <span class="n">graphs</span><span class="p">;</span>
<span class="n">graphs</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">vehicleGraphLaneletMap</span><span class="p">);</span>
<span class="n">graphs</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">pedestrianGraphLaneletMap</span><span class="p">);</span>
<span class="n">RoutingGraphContainer</span> <span class="nf">container</span><span class="p">(</span><span class="n">graphs</span><span class="p">);</span>

</code></pre></div></div>
<h2 id="example-queries">Example Queries</h2>
<p>The last parameter <em>participantHeight</em> is optional and decides whether conflicting lanelets are determined in 2D or 3D.</p>

<h3 id="query-for-a-single-lanelet">Query for a single lanelet</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">heightClearance</span><span class="p">{</span><span class="mf">4.</span><span class="p">};</span> <span class="c1">// Height of the traffic participant</span>
<span class="c1">// Query a single graph for conflicting lanelets</span>
<span class="kt">size_t</span> <span class="n">routingGraphId</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>   <span class="c1">// E.g. 0 for the first graph</span>
<span class="n">ConstLanelets</span> <span class="n">conflictingVehicle</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingInGraph</span><span class="p">(</span><span class="n">bridgeLanelet</span><span class="p">,</span> <span class="n">routingGraphId</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>
<span class="c1">// Query all graphs for conflicting lanelets</span>
<span class="n">RoutingGraphContainer</span><span class="o">::</span><span class="n">ConflictingInGraphs</span> <span class="n">conflicting</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingInGraphs</span><span class="p">(</span><span class="n">bridgeLanelet</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>

</code></pre></div></div>

<h3 id="query-for-a-whole-route">Query for a Whole Route</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Conflicting lanelets of a route in a single graph</span>
<span class="n">ConstLanelets</span> <span class="n">conflictingVehicle</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingOfRouteInGraph</span><span class="p">(</span><span class="n">routePtr</span><span class="p">,</span> <span class="n">routingGraphId</span><span class="p">)};</span>
<span class="c1">// Conflicting lanelets of a route in all graphs</span>
<span class="n">RoutingGraphContainer</span><span class="o">::</span><span class="n">ConflictingInGraphs</span> <span class="n">result</span><span class="p">{</span><span class="n">container</span><span class="o">-&gt;</span><span class="n">conflictingOfRouteInGraphs</span><span class="p">(</span><span class="n">routePtr</span><span class="p">,</span> <span class="n">heightClearance</span><span class="p">)};</span>

</code></pre></div></div>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-lanelet2_routing">Changelog for package lanelet2_routing</h1>

<h2 id="122-2024-10-25">1.2.2 (2024-10-25)</h2>

<ul>
  <li>Prevent unintended modification of graph in lanelet::routing::Route
(<a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/issues/352">#352</a>)</li>
  <li>Build documentation with mkdocs
(<a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/issues/321">#321</a>)</li>
  <li>Contributors: DavUhll, poggenhans</li>
</ul>

<h2 id="121-2023-05-10">1.2.1 (2023-05-10)</h2>

<ul>
  <li>Update thirdparty deps, rework projected point, enable python
3.10/3.11 (<a href="https://github.com/immel-f/Lanelet2/issues/300">#300</a>)</li>
  <li>Contributors: poggenhans</li>
</ul>

<h2 id="120-2023-01-30">1.2.0 (2023-01-30)</h2>

<ul>
  <li>Add CI using GitHub Actions
(<a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/issues/256">#256</a>)</li>
  <li>Use TYPED_TEST_SUITE over deprecated TYPED_TEST_CASE in unit
tests</li>
  <li>Add missing include for boost 1.69</li>
  <li>Contributors: Fabian Poggenhans, Fabian Immel</li>
</ul>

<h2 id="111-2020-09-14">1.1.1 (2020-09-14)</h2>

<h2 id="110-2020-09-06">1.1.0 (2020-09-06)</h2>

<ul>
  <li>Implement more flexible configuration for obtaining possible paths.
Still lacking proper tests</li>
  <li>Add parameter to left/right/adjacentLeft/adjacentRight so that they
can be queried based on routing cost id</li>
  <li>Fix routing for lane changes, add tests for it</li>
  <li>Fix wrong route in circles</li>
  <li>Fix unittests that rely on a non-writable root directory</li>
  <li>Add experimental support for building with colcon on ros2 and
ament_cmake</li>
  <li>Fix the documentation about how to create a routing graph</li>
  <li>Removing extra semicolons causing warnings with wpedantic.</li>
  <li>Making all includes in lanelet2_routing consistent.</li>
  <li>Updating package.xml files to format 3.</li>
  <li>Fix use of equals in older boost versions</li>
  <li>Arbitrary lanelet and area adjacencies in LaneletPaths</li>
  <li>Add functionality to create the bounding polygon from a Path</li>
  <li>Contributors: Fabian Poggenhans, Johannes Janosovits, Joshua Whitley</li>
</ul>

<h2 id="101-2020-03-24">1.0.1 (2020-03-24)</h2>

<ul>
  <li>Mention laneletSubmap in README</li>
  <li>Make sure lanelet2 buildtool_export_depends on mrt_cmake_modules</li>
  <li>Add changelogs</li>
  <li>Fix clang-tidy warnings</li>
  <li>Contributors: Fabian Poggenhans</li>
</ul>

<h2 id="100-2020-03-03">1.0.0 (2020-03-03)</h2>

<ul>
  <li>Bump version to 1.0</li>
  <li>Routing: Add shortest path search based on areas</li>
  <li>Fix default values for lane changes in RoutingGraph</li>
  <li>RoutingGraph and Route now use the new LaneletSubmap to store the
lanelets they are using their member functions laneletMap() and
passableMap() are now deprecated and should be replaced by
laneletSubmap() and passableSubmap() respectively. These functions
have less overhead and are less likely to be misinterpreted as
'maps containing only the lanelets you need'</li>
  <li>Edges with nonfinite costs are no longer added to the graph to avoid
overflows. If a cost function returns infinite costs, no edge will
be added and the connection will not be available to the routing
graph</li>
  <li>Introduce proper namespacing for internal objects</li>
  <li>Update documentation</li>
  <li>Routing graph and route object now support queries with a custom
search function Routing graph and route object now both have a
function forEachSuccessor (and more) for doing more advanced
queries. Added doc tests and python bindings</li>
  <li>Update the shortest path algorithm to use the new dijktra search</li>
  <li>Extended and simplified the reachablePath/Set functions by using
boost graphs implementation of dijkstras shortest paths</li>
  <li>Refactored the internal representation of the route. Cleaned up
headers that are only supposed to be used internally</li>
  <li>Complete rewrite of the route builder using boost graph</li>
  <li>Removed the "diverging" and "merging" classification from the
routing graph and update the doc They are now all represented with
the "succeeding" relation. Information about merging or diverging
can now be obtained simply by querying the number of
following/preceding lanelets. As a consequence, the route object no
longer caches queried "lanes". The responsible functions are now
const.</li>
  <li>Fix compiler errors with gcc 5</li>
  <li>Fix image paths in routing doc</li>
  <li>Initial commit</li>
  <li>Contributors: Fabian Poggenhans, Johannes Janosovits, Maximilian
Naumann</li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="melodic-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/lanelet2_routing/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="melodic-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/catkin#melodic-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/catkin#melodic">catkin  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_core#melodic-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_core#melodic">ament_cmake_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/mrt_cmake_modules#melodic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/mrt_cmake_modules#melodic">mrt_cmake_modules  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/lanelet2_core#melodic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/lanelet2_core#melodic">lanelet2_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/lanelet2_traffic_rules#melodic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/lanelet2_traffic_rules#melodic">lanelet2_traffic_rules  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/gtest">gtest</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/boost">boost</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2#melodic">lanelet2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2#melodic-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_examples#melodic">lanelet2_examples</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_examples#melodic-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_python#melodic">lanelet2_python</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_python#melodic-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/lanelet2_validation#melodic">lanelet2_validation</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lanelet2_validation#melodic-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="melodic-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="melodic-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>lanelet2_routing</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="melodic-question-list" class="panel-body" style="display: none;"></div>
      <div id="melodic-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/lanelet2_routing+melodic">here</a>.</p>
      </div>
      <div id="melodic-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/fzi-forschungszentrum-informatik/lanelet2.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/melodic/api/lanelet2_routing/html/"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/fzi-forschungszentrum-informatik/lanelet2/tree/master/lanelet2_routing"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  <a class="list-group-item "
     target="_blank"
     href="http://wiki.ros.org/lanelet2_routing?distro=melodic"
     title="View this package on wiki.ros.org">
       <span style="margin-right: 5px;" class="glyphicon glyphicon-info-sign"></span>
       
       Wiki
  </a>
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>



<script id="question-list-template" type="text/html">
  <p>
    Browse <a href="https://robotics.stackexchange.com/questions/tagged/lanelet2_routing?tab=Newest">recent questions</a>
    or see the <a href="https://robotics.stackexchange.com/questions/tagged/lanelet2_routing?tab=Votes">highest voted ones</a>.
  </p>
  
  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">Title</th>
        <th scope="col">Answered?</th>
        <th scope="col">Created</th>
        <th scope="col">Active</th>
      </tr>
    </thead>
    <tbody>
      {{#questions}}
      <tr>
        <th scope="row"><a href="{{link}}">{{title}}</a><br><small>Tags: {{strtags}}</small></th>
        <th>{{answered}}</th>
        <th>{{created}}</th>
        <th>{{active}}</th>
      </tr>
      {{/questions}}
    </tbody>
  </table>
  {{#has_more}}
  <hr>
  <h4>Additional questions are available at
    <a href="https://robotics.stackexchange.com/questions/tagged/{{name}}?tab=Newest">Robotics Stack Exchange</a>
  </h4>
  {{/has_more}}
  
</script>

<script type="text/javascript" src="/js/mustache.js"></script>
<script type="text/javascript">
  jQuery(function() {
    jQuery.getJSON(url="https://api.stackexchange.com/2.3/questions?order=desc&site=robotics" +
                       "&tagged=lanelet2_routing&pagesize=50&sort=activity")
    .done(function(feed) {
      if (feed.items.length > 0) {
        var question_count_str = (feed.has_more ? '>' : '') + String(feed.items.length)
        const questions = feed.items.map(
          function(question) {
            question.id = Math.round(Math.random() * 99999.0);
            question.created = (new Date(question.creation_date * 1000)).toDateString()
            question.active = (new Date(question.last_activity_date * 1000)).toDateString()
            question.answered = question.is_answered ? "Yes" : "No"
            question.strtags = question.tags.join(' ')
            return question;
          });
        const template = jQuery("#question-list-template").text();
        Mustache.parse(template);
        var rendered = Mustache.render(
          template, 
          { questions: questions,
            has_more: feed.has_more,
            name: "lanelet2_routing"
          }
        );
      }
      //   TODO(tfoote) Resolve images
      //   jQuery("#-question-list img").each(function() {
      //     if (jQuery(this).attr("src").startsWith("/upfiles")) {
      //        jQuery(this).attr("src", "https://answers.ros.org" + jQuery(this).attr("src"));
      //     }
      //   });
      
      if (feed.items.length > 0) {
        jQuery("#humble-question-list").html(rendered);
        jQuery("#humble-question-list").show();
      } else {
        jQuery("#humble-no-question-list").show();
      }
      jQuery("#humble-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#jazzy-question-list").html(rendered);
        jQuery("#jazzy-question-list").show();
      } else {
        jQuery("#jazzy-no-question-list").show();
      }
      jQuery("#jazzy-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#kilted-question-list").html(rendered);
        jQuery("#kilted-question-list").show();
      } else {
        jQuery("#kilted-no-question-list").show();
      }
      jQuery("#kilted-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#rolling-question-list").html(rendered);
        jQuery("#rolling-question-list").show();
      } else {
        jQuery("#rolling-no-question-list").show();
      }
      jQuery("#rolling-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#github-question-list").html(rendered);
        jQuery("#github-question-list").show();
      } else {
        jQuery("#github-no-question-list").show();
      }
      jQuery("#github-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#noetic-question-list").html(rendered);
        jQuery("#noetic-question-list").show();
      } else {
        jQuery("#noetic-no-question-list").show();
      }
      jQuery("#noetic-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#galactic-question-list").html(rendered);
        jQuery("#galactic-question-list").show();
      } else {
        jQuery("#galactic-no-question-list").show();
      }
      jQuery("#galactic-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#iron-question-list").html(rendered);
        jQuery("#iron-question-list").show();
      } else {
        jQuery("#iron-no-question-list").show();
      }
      jQuery("#iron-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#melodic-question-list").html(rendered);
        jQuery("#melodic-question-list").show();
      } else {
        jQuery("#melodic-no-question-list").show();
      }
      jQuery("#melodic-questions-count").text(question_count_str);
      
    })
    .fail(function(jqxhr, textStatus, error) {
      console.error("Failed to get question data: " + jqxhr.responseText);
      
      jQuery("#humble-get-question-fail").show();
      
      jQuery("#jazzy-get-question-fail").show();
      
      jQuery("#kilted-get-question-fail").show();
      
      jQuery("#rolling-get-question-fail").show();
      
      jQuery("#github-get-question-fail").show();
      
      jQuery("#noetic-get-question-fail").show();
      
      jQuery("#galactic-get-question-fail").show();
      
      jQuery("#iron-get-question-fail").show();
      
      jQuery("#melodic-get-question-fail").show();
      
    });
  });
</script>


<script type="text/javascript">
  $(document).ready(function() {
    setupDistroSwitch("humble");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
