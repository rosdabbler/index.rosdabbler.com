<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Package: nav2_regulated_pure_pursuit_controller</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/p/nav2_regulated_pure_pursuit_controller/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top: 20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/?search_packages=true">Packages</a></li>
        <li class="active">nav2_regulated_pure_pursuit_controller</li>
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-primary" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-primary" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-default" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-default" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-primary" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class=" older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class=" older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/nav2_regulated_pure_pursuit_controller">nav2_regulated_pure_pursuit_controller</a> <small>package from <a style="text-decoration:none" href="/r/navigation2/github-ros-planning-navigation2">navigation2</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_amcl">

nav2_amcl
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_behavior_tree">

nav2_behavior_tree
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_behaviors">

nav2_behaviors
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_bringup">

nav2_bringup
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_bt_navigator">

nav2_bt_navigator
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_collision_monitor">

nav2_collision_monitor
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_common">

nav2_common
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_constrained_smoother">

nav2_constrained_smoother
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_controller">

nav2_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_core">

nav2_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_costmap_2d">

nav2_costmap_2d
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/costmap_queue">

costmap_queue
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_core">

dwb_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_critics">

dwb_critics
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_msgs">

dwb_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_plugins">

dwb_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_dwb_controller">

nav2_dwb_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav_2d_msgs">

nav_2d_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav_2d_utils">

nav_2d_utils
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_graceful_controller">

nav2_graceful_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_lifecycle_manager">

nav2_lifecycle_manager
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_map_server">

nav2_map_server
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_mppi_controller">

nav2_mppi_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_msgs">

nav2_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_navfn_planner">

nav2_navfn_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_planner">

nav2_planner
</a>
            
          
            
            
              <span class="label label-default pkg-label">

nav2_regulated_pure_pursuit_controller
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_rotation_shim_controller">

nav2_rotation_shim_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_rviz_plugins">

nav2_rviz_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_simple_commander">

nav2_simple_commander
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_smac_planner">

nav2_smac_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_smoother">

nav2_smoother
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_system_tests">

nav2_system_tests
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_theta_star_planner">

nav2_theta_star_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_util">

nav2_util
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_velocity_smoother">

nav2_velocity_smoother
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_voxel_grid">

nav2_voxel_grid
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_waypoint_follower">

nav2_waypoint_follower
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/navigation2">

navigation2
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/humble/p/nav2_regulated_pure_pursuit_controller"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/ros-planning/navigation2/tree/humble/nav2_regulated_pure_pursuit_controller"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="humble-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#humble-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#humble-assets" data-toggle="tab"><span class="label label-primary">1</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#humble-deps" data-toggle="tab"><span class="label label-primary">14</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#humble-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#humble-questions" data-toggle="tab"><span id="humble-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="humble-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>1.1.18</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache-2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS 2 Navigation Framework and System</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-planning/navigation2.git">https://github.com/ros-planning/navigation2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">humble</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-05-03
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">robotics</span> <span class="label label-default">navigation</span> <span class="label label-default">ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/navigation2/#humble-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/navigation2/#humble-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/navigation2/#humble-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Regulated Pure Pursuit Controller
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Steve Macenski</li>
                
                  <li>Shrijit Singh</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <em>No additional authors.</em>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/ros-planning/navigation2/tree/humble/nav2_regulated_pure_pursuit_controller/README.md" title="Open in git repository">nav2_regulated_pure_pursuit_controller/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="nav2-regulated-pure-pursuit-controller">Nav2 Regulated Pure Pursuit Controller</h1>

<p>This is a controller (local trajectory planner) that implements a variant on the pure pursuit algorithm to track a path. This variant we call the Regulated Pure Pursuit Algorithm, due to its additional regulation terms on collision and linear speed. It also implements the basics behind the Adaptive Pure Pursuit algorithm to vary lookahead distances by current speed. It was developed by <a href="https://www.linkedin.com/in/shrijitsingh99/">Shrijit Singh</a> and <a href="https://www.linkedin.com/in/steve-macenski-41a985101/">Steve Macenski</a> while at <a href="https://www.sra.samsung.com/">Samsung Research</a> as part of the Nav2 working group.</p>

<p>Code based on a simplified version of this controller is referenced in the <a href="https://navigation.ros.org/plugin_tutorials/docs/writing_new_nav2controller_plugin.html">Writing a New Nav2 Controller</a> tutorial.</p>

<p>This plugin implements the <code class="language-plaintext highlighter-rouge">nav2_core::Controller</code> interface allowing it to be used across the navigation stack as a local trajectory planner in the controller server’s action server (<code class="language-plaintext highlighter-rouge">controller_server</code>).</p>

<p>It builds on top of the ordinary pure pursuit algorithm in a number of ways. It also implements all the common variants of the pure pursuit algorithm such as adaptive pure pursuit. This controller is suitable for use on all types of robots, including differential, legged, and ackermann steering vehicles. It may also be used on omni-directional platforms, but won’t be able to fully leverage the lateral movements of the base (you may consider DWB instead).</p>

<p>This controller has been measured to run at well over 1 kHz on a modern intel processor.</p>

<p align="center">
  <img src="https://user-images.githubusercontent.com/14944147/102563918-3cd49d80-408f-11eb-8e03-b472815a05d8.gif">
</p>

<p>See its <a href="https://navigation.ros.org/configuration/packages/configuring-regulated-pp.html">Configuration Guide Page</a> for additional parameter descriptions.</p>

<h2 id="pure-pursuit-basics">Pure Pursuit Basics</h2>

<p>The Pure Pursuit algorithm has been in use for over 30 years. You can read more about the details of the pure pursuit controller in its <a href="http://www.enseignement.polytechnique.fr/profs/informatique/Eric.Goubault/MRIS/coulter_r_craig_1992_1.pdf">introduction paper</a>. The core idea is to find a point on the path in front of the robot and find the linear and angular velocity to help drive towards it. Once it moves forward, a new point is selected, and the process repeats until the end of the path. The distance used to find the point to drive towards is the <code class="language-plaintext highlighter-rouge">lookahead</code> distance.</p>

<p>In order to simply book-keeping, the global path is continuously pruned to the closest point to the robot (see the figure below) so that we only have to process useful path points. Then, the section of the path within the local costmap bounds is transformed to the robot frame and a lookahead point is determined using a predefined distance.</p>

<p>Finally, the lookahead point will be given to the pure pursuit algorithm which finds the curvature of the path required to drive the robot to the lookahead point. This curvature is then applied to the velocity commands to allow the robot to drive.</p>

<p>Note that a pure pursuit controller is that, it “purely” pursues the path without interest or concern about dynamic obstacles. Therefore, this controller should only be used when paired with a path planner that can generate a path the robot can follow. For a circular (or can be treated as circular) robot, this can really be any planner since you can leverage the particle / inflation relationship in planning. For a “large” robot for the environment or general non-circular robots, this must be something kinematically feasible, like the Smac Planner, such that the path is followable.</p>

<p><img src="https://raw.githubusercontent.com/ros-planning/navigation2/humble/nav2_regulated_pure_pursuit_controller/./doc/lookahead_algorithm.png" alt="Lookahead algorithm"></p>

<h2 id="regulated-pure-pursuit-features">Regulated Pure Pursuit Features</h2>

<p>We have created a new variation on the pure pursuit algorithm that we dubb the Regulated Pure Pursuit algorithm. We combine the features of the Adaptive Pure Pursuit algorithm with rules around linear velocity with a focus on consumer, industrial, and service robot’s needs. We also implement several common-sense safety mechanisms like collision detection.</p>

<p>The Regulated Pure Pursuit controller implements active collision detection. We use a parameter to set the maximum allowable time before a potential collision on the current velocity command. Using the current linear and angular velocity, we project forward in time that duration and check for collisions. Intuitively, you may think that collision checking between the robot and the lookahead point seems logical. However, if you’re maneuvering in tight spaces, it makes alot of sense to only search forward a given amount of time to give the system a little leeway to get itself out. In confined spaces especially, we want to make sure that we’re collision checking a reasonable amount of space for the current action being taken (e.g. if moving at 0.1 m/s, it makes no sense to look 10 meters ahead to the carrot, or 100 seconds into the future). This helps look further at higher speeds / angular rotations and closer with fine, slow motions in constrained environments so it doesn’t over report collisions from valid motions near obstacles. If you set the maximum allowable to a large number, it will collision check all the way, but not exceeding, the lookahead point. We visualize the collision checking arc on the <code class="language-plaintext highlighter-rouge">lookahead_arc</code> topic.</p>

<p>The regulated pure pursuit algorithm also makes use of the common variations on the pure pursuit algorithm. We implement the adaptive pure pursuit’s main contribution of having velocity-scaled lookahead point distances. This helps make the controller more stable over a larger range of potential linear velocities. There are parameters for setting the lookahead gain (or lookahead time) and thresholded values for minimum and maximum.</p>

<p>The final minor improvement we make is slowing on approach to the goal. Knowing that the optimal lookahead distance is <code class="language-plaintext highlighter-rouge">X</code>, we can take the difference in <code class="language-plaintext highlighter-rouge">X</code> and the actual distance of the lookahead point found to find the lookahead point error. During operations, the variation in this error should be exceptionally small and won’t be triggered. However, at the end of the path, there are no more points at a lookahead distance away from the robot, so it uses the last point on the path. So as the robot approaches a target, its error will grow and the robot’s velocity will be reduced proportional to this error until a minimum threshold. This is also tracked by the kinematic speed limits to ensure drivability.</p>

<p>The major improvements that this work implements is the regulations on the linear velocity based on some cost functions.  They were selected to remove long-standing bad behavior within the pure pursuit algorithm. Normal Pure Pursuit has an issue with overshoot and poor handling in particularly high curvature (or extremely rapidly changing curvature) environments. It is commonly known that this will cause the robot to overshoot from the path and potentially collide with the environment. These cost functions in the Regulated Pure Pursuit algorithm were also chosen based on common requirements and needs of mobile robots uses in service, commercial, and industrial use-cases; scaling by curvature creates intuitive behavior of slowing the robot when making sharp turns and slowing when its near a potential collision so that small variations don’t clip obstacles. This is also really useful when working in partially observable environments (like turning in and out of aisles / hallways often) so that you slow before a sharp turn into an unknown dynamic environment to be more conservative in case something is in the way immediately requiring a stop.</p>

<p>The cost functions penalize the robot’s speed based on its proximity to obstacles and the curvature of the path. This is helpful to slow the robot when moving close to things in narrow spaces and scaling down the linear velocity by curvature helps to stabilize the controller over a larger range of lookahead point distances. This also has the added benefit of removing the sensitive tuning of the lookahead point / range, as the robot will track paths far better. Tuning is still required, but it is substantially easier to get reasonable behavior with minor adjustments.</p>

<p>An unintended tertiary benefit of scaling the linear velocities by curvature is that a robot will natively rotate to rough path heading when using holonomic planners that don’t start aligned with the robot pose orientation. As the curvature will be very high, the linear velocity drops and the angular velocity takes over to rotate to heading. While not perfect, it does dramatically reduce the need to rotate to a close path heading before following and opens up a broader range of planning techniques. Pure Pursuit controllers otherwise would be completely unable to recover from this in even modestly confined spaces.</p>

<p>Mixing the proximity and curvature regulated linear velocities with the time-scaled collision checker, we see a near-perfect combination allowing the regulated pure pursuit algorithm to handle high starting deviations from the path and navigate collision-free in tight spaces without overshoot.</p>

<p>Note: The maximum allowed time to collision is thresholded by the lookahead point, starting in Humble. This is such that collision checking isn’t significantly overshooting the path, which can cause issues in constrained environments. For example, if there were a straight-line path going towards a wall that then turned left, if this parameter was set to high, then it would detect a collision past the point of actual robot intended motion. Thusly, if a robot is moving fast, selecting further out lookahead points is not only a matter of behavioral stability for Pure Pursuit, but also gives a robot further predictive collision detection capabilities. The max allowable time parameter is still in place for slow commands, as described in detail above.</p>

<h2 id="configuration">Configuration</h2>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">desired_linear_vel</code></td>
      <td>The desired maximum linear velocity to use.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">lookahead_dist</code></td>
      <td>The lookahead distance to use to find the lookahead point</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">min_lookahead_dist</code></td>
      <td>The minimum lookahead distance threshold when using velocity scaled lookahead distances</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">max_lookahead_dist</code></td>
      <td>The maximum lookahead distance threshold when using velocity scaled lookahead distances</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">lookahead_time</code></td>
      <td>The time to project the velocity by to find the velocity scaled lookahead distance. Also known as the lookahead gain.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">rotate_to_heading_angular_vel</code></td>
      <td>If rotate to heading is used, this is the angular velocity to use.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">transform_tolerance</code></td>
      <td>The TF transform tolerance</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_velocity_scaled_lookahead_dist</code></td>
      <td>Whether to use the velocity scaled lookahead distances or constant <code class="language-plaintext highlighter-rouge">lookahead_distance</code>
</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">min_approach_linear_velocity</code></td>
      <td>The minimum velocity threshold to apply when approaching the goal</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">approach_velocity_scaling_dist</code></td>
      <td>Integrated distance from end of transformed path at which to start applying velocity scaling. This defaults to the forward extent of the costmap minus one costmap cell length.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_collision_detection</code></td>
      <td>Whether to enable collision detection.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">max_allowed_time_to_collision_up_to_carrot</code></td>
      <td>The time to project a velocity command to check for collisions when <code class="language-plaintext highlighter-rouge">use_collision_detection</code> is <code class="language-plaintext highlighter-rouge">true</code>. It is limited to maximum distance of lookahead distance selected.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_regulated_linear_velocity_scaling</code></td>
      <td>Whether to use the regulated features for curvature</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_cost_regulated_linear_velocity_scaling</code></td>
      <td>Whether to use the regulated features for proximity to obstacles</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">cost_scaling_dist</code></td>
      <td>The minimum distance from an obstacle to trigger the scaling of linear velocity, if <code class="language-plaintext highlighter-rouge">use_cost_regulated_linear_velocity_scaling</code> is enabled. The value set should be smaller or equal to the <code class="language-plaintext highlighter-rouge">inflation_radius</code> set in the inflation layer of costmap, since inflation is used to compute the distance from obstacles</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">cost_scaling_gain</code></td>
      <td>A multiplier gain, which should be &lt;= 1.0, used to further scale the speed when an obstacle is within <code class="language-plaintext highlighter-rouge">cost_scaling_dist</code>. Lower value reduces speed more quickly.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">inflation_cost_scaling_factor</code></td>
      <td>The value of <code class="language-plaintext highlighter-rouge">cost_scaling_factor</code> set for the inflation layer in the local costmap. The value should be exactly the same for accurately computing distance from obstacles using the inflated cell values</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">regulated_linear_scaling_min_radius</code></td>
      <td>The turning radius for which the regulation features are triggered. Remember, sharper turns have smaller radii</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">regulated_linear_scaling_min_speed</code></td>
      <td>The minimum speed for which the regulated features can send, to ensure process is still achievable even in high cost spaces with high curvature.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_rotate_to_heading</code></td>
      <td>Whether to enable rotating to rough heading and goal orientation when using holonomic planners. Recommended on for all robot types except ackermann, which cannot rotate in place.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">rotate_to_heading_min_angle</code></td>
      <td>The difference in the path orientation and the starting robot orientation to trigger a rotate in place, if <code class="language-plaintext highlighter-rouge">use_rotate_to_heading</code> is enabled.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">max_angular_accel</code></td>
      <td>Maximum allowable angular acceleration while rotating to heading, if enabled</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">max_robot_pose_search_dist</code></td>
      <td>Maximum integrated distance along the path to bound the search for the closest pose to the robot. This is set by default to the maximum costmap extent, so it shouldn’t be set manually unless there are loops within the local costmap.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_interpolation</code></td>
      <td>Enables interpolation between poses on the path for lookahead point selection. Helps sparse paths to avoid inducing discontinuous commanded velocities. Set this to false for a potential performance boost, at the expense of smooth control.</td>
    </tr>
  </tbody>
</table>

<p>Example fully-described XML with default parameter values:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>controller_server:
  ros__parameters:
    use_sim_time: True
    controller_frequency: 20.0
    min_x_velocity_threshold: 0.001
    min_y_velocity_threshold: 0.5
    min_theta_velocity_threshold: 0.001
    progress_checker_plugin: "progress_checker"
    goal_checker_plugins: "goal_checker"
    controller_plugins: ["FollowPath"]

    progress_checker:
      plugin: "nav2_controller::SimpleProgressChecker"
      required_movement_radius: 0.5
      movement_time_allowance: 10.0
    goal_checker:
      plugin: "nav2_controller::SimpleGoalChecker"
      xy_goal_tolerance: 0.25
      yaw_goal_tolerance: 0.25
      stateful: True
    FollowPath:
      plugin: "nav2_regulated_pure_pursuit_controller::RegulatedPurePursuitController"
      desired_linear_vel: 0.5
      lookahead_dist: 0.6
      min_lookahead_dist: 0.3
      max_lookahead_dist: 0.9
      lookahead_time: 1.5
      rotate_to_heading_angular_vel: 1.8
      transform_tolerance: 0.1
      use_velocity_scaled_lookahead_dist: false
      min_approach_linear_velocity: 0.05
      approach_velocity_scaling_dist: 1.0
      use_collision_detection: true
      max_allowed_time_to_collision_up_to_carrot: 1.0
      use_regulated_linear_velocity_scaling: true
      use_cost_regulated_linear_velocity_scaling: false
      regulated_linear_scaling_min_radius: 0.9
      regulated_linear_scaling_min_speed: 0.25
      use_rotate_to_heading: true
      rotate_to_heading_min_angle: 0.785
      max_angular_accel: 3.2
      max_robot_pose_search_dist: 10.0
      use_interpolation: false
      cost_scaling_dist: 0.3
      cost_scaling_gain: 1.0
      inflation_cost_scaling_factor: 3.0

</code></pre></div></div>

<h2 id="topics">Topics</h2>

<table>
  <thead>
    <tr>
      <th>Topic</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">lookahead_point</code></td>
      <td><code class="language-plaintext highlighter-rouge">geometry_msgs/PointStamped</code></td>
      <td>The current lookahead point on the path</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">lookahead_arc</code></td>
      <td><code class="language-plaintext highlighter-rouge">nav_msgs/Path</code></td>
      <td>The drivable arc between the robot and the carrot. Arc length depends on <code class="language-plaintext highlighter-rouge">max_allowed_time_to_collision_up_to_carrot</code>, forward simulating from the robot pose at the commanded <code class="language-plaintext highlighter-rouge">Twist</code> by that time. In a collision state, the last published arc will be the points leading up to, and including, the first point in collision.</td>
    </tr>
  </tbody>
</table>

<p>Note: The <code class="language-plaintext highlighter-rouge">lookahead_arc</code> is also a really great speed indicator, when “full” to carrot or max time, you know you’re at full speed. If 20% less, you can tell the robot is approximately 20% below maximum speed. Think of it as the collision checking bounds but also a speed guage.</p>

<h2 id="notes-to-users">Notes to users</h2>

<p>By default, the <code class="language-plaintext highlighter-rouge">use_cost_regulated_linear_velocity_scaling</code> is set to <code class="language-plaintext highlighter-rouge">false</code> because the generic sandbox environment we have setup is the TB3 world. This is a highly constrained environment so it overly triggers to slow the robot as everywhere has high costs. This is recommended to be set to <code class="language-plaintext highlighter-rouge">true</code> when not working in constantly high-cost spaces.</p>

<p>To tune to get Adaptive Pure Pursuit behaviors, set all boolean parameters to false except <code class="language-plaintext highlighter-rouge">use_velocity_scaled_lookahead_dist</code> and make sure to tune <code class="language-plaintext highlighter-rouge">lookahead_time</code>, <code class="language-plaintext highlighter-rouge">min_lookahead_dist</code> and <code class="language-plaintext highlighter-rouge">max_lookahead_dist</code>.</p>

<p>To tune to get Pure Pursuit behaviors, set all boolean parameters to false and make sure to tune <code class="language-plaintext highlighter-rouge">lookahead_dist</code>.</p>

<p>Currently, there is no rotate to goal behaviors, so it is expected that the path approach orientations are the orientations of the goal or the goal checker has been set with a generous <code class="language-plaintext highlighter-rouge">min_theta_velocity_threshold</code>. Implementations for rotating to goal heading are on the way.</p>

<p>The choice of lookahead distances are highly dependent on robot size, responsiveness, controller update rate, and speed. Please make sure to tune this for your platform, although the <code class="language-plaintext highlighter-rouge">regulated</code> features do largely make heavy tuning of this value unnecessary. If you see wiggling, increase the distance or scale. If it’s not converging as fast to the path as you’d like, decrease it.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <em>No CHANGELOG found.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/nav2_regulated_pure_pursuit_controller/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#humble">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_gtest#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_gtest#humble">ament_cmake_gtest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#humble">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#humble">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_common#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_common#humble">nav2_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_core#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_core#humble">nav2_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_util#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_util#humble">nav2_util  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_costmap_2d#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_costmap_2d#humble">nav2_costmap_2d  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#humble">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/geometry_msgs#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/geometry_msgs#humble">geometry_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_msgs#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_msgs#humble">nav2_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/pluginlib#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/pluginlib#humble">pluginlib  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/tf2#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/tf2#humble">tf2  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/tf2_geometry_msgs#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/tf2_geometry_msgs#humble">tf2_geometry_msgs  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No direct system dependencies.</em>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/nav2_rotation_shim_controller#humble">nav2_rotation_shim_controller</a></td>
                      <td class="text-center">
                        
                        <a href="/p/nav2_rotation_shim_controller#humble-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/navigation2#humble">navigation2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/navigation2#humble-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/omni_base_2dnav#humble">omni_base_2dnav</a></td>
                      <td class="text-center">
                        
                        <a href="/p/omni_base_2dnav#humble-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/pmb2_2dnav#humble">pmb2_2dnav</a></td>
                      <td class="text-center">
                        
                        <a href="/p/pmb2_2dnav#humble-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <ul>
            
              <li><a href="https://github.com/ros-planning/navigation2/tree/humble/nav2_regulated_pure_pursuit_controller//nav2_regulated_pure_pursuit_controller.xml" target="_blank">nav2_core</a></li>
            
          </ul>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>nav2_regulated_pure_pursuit_controller</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="humble-question-list" class="panel-body" style="display: none;"></div>
      <div id="humble-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/nav2_regulated_pure_pursuit_controller+humble">here</a>.</p>
      </div>
      <div id="humble-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/ros-planning/navigation2.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/humble/p/nav2_regulated_pure_pursuit_controller"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/ros-planning/navigation2/tree/humble/nav2_regulated_pure_pursuit_controller"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/nav2_regulated_pure_pursuit_controller">nav2_regulated_pure_pursuit_controller</a> <small>package from <a style="text-decoration:none" href="/r/navigation2/github-ros-planning-navigation2">navigation2</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_amcl">

nav2_amcl
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_behavior_tree">

nav2_behavior_tree
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_behaviors">

nav2_behaviors
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_bringup">

nav2_bringup
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_bt_navigator">

nav2_bt_navigator
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_collision_monitor">

nav2_collision_monitor
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_common">

nav2_common
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_constrained_smoother">

nav2_constrained_smoother
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_controller">

nav2_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_core">

nav2_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_costmap_2d">

nav2_costmap_2d
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/opennav_docking">

opennav_docking
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/opennav_docking_bt">

opennav_docking_bt
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/opennav_docking_core">

opennav_docking_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/costmap_queue">

costmap_queue
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_core">

dwb_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_critics">

dwb_critics
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_msgs">

dwb_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_plugins">

dwb_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_dwb_controller">

nav2_dwb_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav_2d_msgs">

nav_2d_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav_2d_utils">

nav_2d_utils
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_graceful_controller">

nav2_graceful_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_lifecycle_manager">

nav2_lifecycle_manager
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_loopback_sim">

nav2_loopback_sim
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_map_server">

nav2_map_server
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_mppi_controller">

nav2_mppi_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_msgs">

nav2_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_navfn_planner">

nav2_navfn_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_planner">

nav2_planner
</a>
            
          
            
            
              <span class="label label-default pkg-label">

nav2_regulated_pure_pursuit_controller
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_rotation_shim_controller">

nav2_rotation_shim_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_rviz_plugins">

nav2_rviz_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_simple_commander">

nav2_simple_commander
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_smac_planner">

nav2_smac_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_smoother">

nav2_smoother
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_system_tests">

nav2_system_tests
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_theta_star_planner">

nav2_theta_star_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_util">

nav2_util
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_velocity_smoother">

nav2_velocity_smoother
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_voxel_grid">

nav2_voxel_grid
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_waypoint_follower">

nav2_waypoint_follower
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/navigation2">

navigation2
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/jazzy/p/nav2_regulated_pure_pursuit_controller"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/ros-planning/navigation2/tree/jazzy/nav2_regulated_pure_pursuit_controller"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="jazzy-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#jazzy-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#jazzy-assets" data-toggle="tab"><span class="label label-primary">1</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#jazzy-deps" data-toggle="tab"><span class="label label-primary">15</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#jazzy-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#jazzy-questions" data-toggle="tab"><span id="jazzy-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="jazzy-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>1.3.6</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache-2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS 2 Navigation Framework and System</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-planning/navigation2.git">https://github.com/ros-planning/navigation2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">jazzy</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-05-03
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">robotics</span> <span class="label label-default">navigation</span> <span class="label label-default">ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/navigation2/#jazzy-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/navigation2/#jazzy-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/navigation2/#jazzy-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Regulated Pure Pursuit Controller
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Steve Macenski</li>
                
                  <li>Shrijit Singh</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <em>No additional authors.</em>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/ros-planning/navigation2/tree/jazzy/nav2_regulated_pure_pursuit_controller/README.md" title="Open in git repository">nav2_regulated_pure_pursuit_controller/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="nav2-regulated-pure-pursuit-controller">Nav2 Regulated Pure Pursuit Controller</h1>

<p>This is a controller (local trajectory planner) that implements a variant on the pure pursuit algorithm to track a path. This variant we call the Regulated Pure Pursuit Algorithm, due to its additional regulation terms on collision and linear speed. It also implements the basics behind the Adaptive Pure Pursuit algorithm to vary lookahead distances by current speed. It was developed by <a href="https://www.linkedin.com/in/shrijitsingh99/">Shrijit Singh</a> and <a href="https://www.linkedin.com/in/steve-macenski-41a985101/">Steve Macenski</a> while at <a href="https://www.sra.samsung.com/">Samsung Research</a> as part of the Nav2 working group.</p>

<p>Code based on a simplified version of this controller is referenced in the <a href="https://docs.nav2.org/plugin_tutorials/docs/writing_new_nav2controller_plugin.html">Writing a New Nav2 Controller</a> tutorial.</p>

<p>This plugin implements the <code class="language-plaintext highlighter-rouge">nav2_core::Controller</code> interface allowing it to be used across the navigation stack as a local trajectory planner in the controller server’s action server (<code class="language-plaintext highlighter-rouge">controller_server</code>).</p>

<p>It builds on top of the ordinary pure pursuit algorithm in a number of ways. It also implements all the common variants of the pure pursuit algorithm such as adaptive pure pursuit. This controller is suitable for use on all types of robots, including differential, legged, and ackermann steering vehicles. It may also be used on omni-directional platforms, but won’t be able to fully leverage the lateral movements of the base (you may consider DWB instead).</p>

<p>This controller has been measured to run at well over 1 kHz on a modern intel processor.</p>

<p align="center">
  <img src="https://user-images.githubusercontent.com/14944147/102563918-3cd49d80-408f-11eb-8e03-b472815a05d8.gif">
</p>

<p>See its <a href="https://docs.nav2.org/configuration/packages/configuring-regulated-pp.html">Configuration Guide Page</a> for additional parameter descriptions.</p>

<p>If you use the Regulated Pure Pursuit Controller algorithm or software from this repository, please cite this work in your papers!</p>

<ul>
  <li>S. Macenski, S. Singh, F. Martin, J. Gines, <a href="https://arxiv.org/abs/2305.20026"><strong>Regulated Pure Pursuit for Robot Path Tracking</strong></a>. Autonomous Robots, 2023.</li>
</ul>

<div class="language-bibtex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">@article</span><span class="p">{</span><span class="nl">macenski2023regulated</span><span class="p">,</span>
      <span class="na">title</span><span class="p">=</span><span class="s">{Regulated Pure Pursuit for Robot Path Tracking}</span><span class="p">,</span> 
      <span class="na">author</span><span class="p">=</span><span class="s">{Steve Macenski and Shrijit Singh and Francisco Martin and Jonatan Gines}</span><span class="p">,</span>
      <span class="na">year</span><span class="p">=</span><span class="s">{2023}</span><span class="p">,</span>
      <span class="na">journal</span> <span class="p">=</span> <span class="s">{Autonomous Robots}</span>
<span class="p">}</span>

</code></pre></div></div>

<h2 id="pure-pursuit-basics">Pure Pursuit Basics</h2>

<p>The Pure Pursuit algorithm has been in use for over 30 years. You can read more about the details of the pure pursuit controller in its <a href="http://www.enseignement.polytechnique.fr/profs/informatique/Eric.Goubault/MRIS/coulter_r_craig_1992_1.pdf">introduction paper</a>. The core idea is to find a point on the path in front of the robot and find the linear and angular velocity to help drive towards it. Once it moves forward, a new point is selected, and the process repeats until the end of the path. The distance used to find the point to drive towards is the <code class="language-plaintext highlighter-rouge">lookahead</code> distance.</p>

<p>In order to simply book-keeping, the global path is continuously pruned to the closest point to the robot (see the figure below) so that we only have to process useful path points. Then, the section of the path within the local costmap bounds is transformed to the robot frame and a lookahead point is determined using a predefined distance.</p>

<p>Finally, the lookahead point will be given to the pure pursuit algorithm which finds the curvature of the path required to drive the robot to the lookahead point. This curvature is then applied to the velocity commands to allow the robot to drive.</p>

<p>Note that a pure pursuit controller is that, it “purely” pursues the path without interest or concern about dynamic obstacles. Therefore, this controller should only be used when paired with a path planner that can generate a path the robot can follow. For a circular (or can be treated as circular) robot, this can really be any planner since you can leverage the particle / inflation relationship in planning. For a “large” robot for the environment or general non-circular robots, this must be something kinematically feasible, like the Smac Planner, such that the path is followable.</p>

<p><img src="https://raw.githubusercontent.com/ros-planning/navigation2/jazzy/nav2_regulated_pure_pursuit_controller/./doc/lookahead_algorithm.png" alt="Lookahead algorithm"></p>

<h2 id="regulated-pure-pursuit-features">Regulated Pure Pursuit Features</h2>

<p>We have created a new variation on the pure pursuit algorithm that we dubb the Regulated Pure Pursuit algorithm. We combine the features of the Adaptive Pure Pursuit algorithm with rules around linear velocity with a focus on consumer, industrial, and service robot’s needs. We also implement several common-sense safety mechanisms like collision detection.</p>

<p>The Regulated Pure Pursuit controller implements active collision detection. We use a parameter to set the maximum allowable time before a potential collision on the current velocity command. Using the current linear and angular velocity, we project forward in time that duration and check for collisions. Intuitively, you may think that collision checking between the robot and the lookahead point seems logical. However, if you’re maneuvering in tight spaces, it makes alot of sense to only search forward a given amount of time to give the system a little leeway to get itself out. In confined spaces especially, we want to make sure that we’re collision checking a reasonable amount of space for the current action being taken (e.g. if moving at 0.1 m/s, it makes no sense to look 10 meters ahead to the carrot, or 100 seconds into the future). This helps look further at higher speeds / angular rotations and closer with fine, slow motions in constrained environments so it doesn’t over report collisions from valid motions near obstacles. If you set the maximum allowable to a large number, it will collision check all the way, but not exceeding, the lookahead point. We visualize the collision checking arc on the <code class="language-plaintext highlighter-rouge">lookahead_arc</code> topic.</p>

<p>The regulated pure pursuit algorithm also makes use of the common variations on the pure pursuit algorithm. We implement the adaptive pure pursuit’s main contribution of having velocity-scaled lookahead point distances. This helps make the controller more stable over a larger range of potential linear velocities. There are parameters for setting the lookahead gain (or lookahead time) and thresholded values for minimum and maximum.</p>

<p>The final minor improvement we make is slowing on approach to the goal. Knowing that the optimal lookahead distance is <code class="language-plaintext highlighter-rouge">X</code>, we can take the difference in <code class="language-plaintext highlighter-rouge">X</code> and the actual distance of the lookahead point found to find the lookahead point error. During operations, the variation in this error should be exceptionally small and won’t be triggered. However, at the end of the path, there are no more points at a lookahead distance away from the robot, so it uses the last point on the path. So as the robot approaches a target, its error will grow and the robot’s velocity will be reduced proportional to this error until a minimum threshold. This is also tracked by the kinematic speed limits to ensure drivability.</p>

<p>The major improvements that this work implements is the regulations on the linear velocity based on some cost functions.  They were selected to remove long-standing bad behavior within the pure pursuit algorithm. Normal Pure Pursuit has an issue with overshoot and poor handling in particularly high curvature (or extremely rapidly changing curvature) environments. It is commonly known that this will cause the robot to overshoot from the path and potentially collide with the environment. These cost functions in the Regulated Pure Pursuit algorithm were also chosen based on common requirements and needs of mobile robots uses in service, commercial, and industrial use-cases; scaling by curvature creates intuitive behavior of slowing the robot when making sharp turns and slowing when its near a potential collision so that small variations don’t clip obstacles. This is also really useful when working in partially observable environments (like turning in and out of aisles / hallways often) so that you slow before a sharp turn into an unknown dynamic environment to be more conservative in case something is in the way immediately requiring a stop.</p>

<p>The cost functions penalize the robot’s speed based on its proximity to obstacles and the curvature of the path. This is helpful to slow the robot when moving close to things in narrow spaces and scaling down the linear velocity by curvature helps to stabilize the controller over a larger range of lookahead point distances. This also has the added benefit of removing the sensitive tuning of the lookahead point / range, as the robot will track paths far better. Tuning is still required, but it is substantially easier to get reasonable behavior with minor adjustments.</p>

<p>An unintended tertiary benefit of scaling the linear velocities by curvature is that a robot will natively rotate to rough path heading when using holonomic planners that don’t start aligned with the robot pose orientation. As the curvature will be very high, the linear velocity drops and the angular velocity takes over to rotate to heading. While not perfect, it does dramatically reduce the need to rotate to a close path heading before following and opens up a broader range of planning techniques. Pure Pursuit controllers otherwise would be completely unable to recover from this in even modestly confined spaces.</p>

<p>Mixing the proximity and curvature regulated linear velocities with the time-scaled collision checker, we see a near-perfect combination allowing the regulated pure pursuit algorithm to handle high starting deviations from the path and navigate collision-free in tight spaces without overshoot.</p>

<p>Note: The maximum allowed time to collision is thresholded by the lookahead point, starting in Humble. This is such that collision checking isn’t significantly overshooting the path, which can cause issues in constrained environments. For example, if there were a straight-line path going towards a wall that then turned left, if this parameter was set to high, then it would detect a collision past the point of actual robot intended motion. Thusly, if a robot is moving fast, selecting further out lookahead points is not only a matter of behavioral stability for Pure Pursuit, but also gives a robot further predictive collision detection capabilities. The max allowable time parameter is still in place for slow commands, as described in detail above.</p>

<h2 id="configuration">Configuration</h2>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">desired_linear_vel</code></td>
      <td>The desired maximum linear velocity to use.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">lookahead_dist</code></td>
      <td>The lookahead distance to use to find the lookahead point</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">min_lookahead_dist</code></td>
      <td>The minimum lookahead distance threshold when using velocity scaled lookahead distances</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">max_lookahead_dist</code></td>
      <td>The maximum lookahead distance threshold when using velocity scaled lookahead distances</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">lookahead_time</code></td>
      <td>The time to project the velocity by to find the velocity scaled lookahead distance. Also known as the lookahead gain.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">rotate_to_heading_angular_vel</code></td>
      <td>If rotate to heading is used, this is the angular velocity to use.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">transform_tolerance</code></td>
      <td>The TF transform tolerance</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_velocity_scaled_lookahead_dist</code></td>
      <td>Whether to use the velocity scaled lookahead distances or constant <code class="language-plaintext highlighter-rouge">lookahead_distance</code>
</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">min_approach_linear_velocity</code></td>
      <td>The minimum velocity threshold to apply when approaching the goal</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">approach_velocity_scaling_dist</code></td>
      <td>Integrated distance from end of transformed path at which to start applying velocity scaling. This defaults to the forward extent of the costmap minus one costmap cell length.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_collision_detection</code></td>
      <td>Whether to enable collision detection.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">max_allowed_time_to_collision_up_to_carrot</code></td>
      <td>The time to project a velocity command to check for collisions when <code class="language-plaintext highlighter-rouge">use_collision_detection</code> is <code class="language-plaintext highlighter-rouge">true</code>. It is limited to maximum distance of lookahead distance selected.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_regulated_linear_velocity_scaling</code></td>
      <td>Whether to use the regulated features for curvature</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_cost_regulated_linear_velocity_scaling</code></td>
      <td>Whether to use the regulated features for proximity to obstacles</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">cost_scaling_dist</code></td>
      <td>The minimum distance from an obstacle to trigger the scaling of linear velocity, if <code class="language-plaintext highlighter-rouge">use_cost_regulated_linear_velocity_scaling</code> is enabled. The value set should be smaller or equal to the <code class="language-plaintext highlighter-rouge">inflation_radius</code> set in the inflation layer of costmap, since inflation is used to compute the distance from obstacles</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">cost_scaling_gain</code></td>
      <td>A multiplier gain, which should be &lt;= 1.0, used to further scale the speed when an obstacle is within <code class="language-plaintext highlighter-rouge">cost_scaling_dist</code>. Lower value reduces speed more quickly.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">inflation_cost_scaling_factor</code></td>
      <td>The value of <code class="language-plaintext highlighter-rouge">cost_scaling_factor</code> set for the inflation layer in the local costmap. The value should be exactly the same for accurately computing distance from obstacles using the inflated cell values</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">regulated_linear_scaling_min_radius</code></td>
      <td>The turning radius for which the regulation features are triggered. Remember, sharper turns have smaller radii</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">regulated_linear_scaling_min_speed</code></td>
      <td>The minimum speed for which the regulated features can send, to ensure process is still achievable even in high cost spaces with high curvature.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_fixed_curvature_lookahead</code></td>
      <td>Enable fixed lookahead for curvature detection. Useful for systems with long lookahead.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">curvature_lookahead_dist</code></td>
      <td>Distance to lookahead to determine curvature for velocity regulation purposes. Only used if <code class="language-plaintext highlighter-rouge">use_fixed_curvature_lookahead</code> is enabled.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_rotate_to_heading</code></td>
      <td>Whether to enable rotating to rough heading and goal orientation when using holonomic planners. Recommended on for all robot types except ackermann, which cannot rotate in place.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">rotate_to_heading_min_angle</code></td>
      <td>The difference in the path orientation and the starting robot orientation to trigger a rotate in place, if <code class="language-plaintext highlighter-rouge">use_rotate_to_heading</code> is enabled.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">max_angular_accel</code></td>
      <td>Maximum allowable angular acceleration while rotating to heading, if enabled</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">max_robot_pose_search_dist</code></td>
      <td>Maximum integrated distance along the path to bound the search for the closest pose to the robot. This is set by default to the maximum costmap extent, so it shouldn’t be set manually unless there are loops within the local costmap.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">interpolate_curvature_after_goal</code></td>
      <td>Needs use_fixed_curvature_lookahead to be true. Interpolate a carrot after the goal dedicated to the curvate calculation (to avoid oscilaltions at the end of the path)</td>
    </tr>
  </tbody>
</table>

<p>Example fully-described XML with default parameter values:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>controller_server:
  ros__parameters:
    controller_frequency: 20.0
    min_x_velocity_threshold: 0.001
    min_y_velocity_threshold: 0.5
    min_theta_velocity_threshold: 0.001
    progress_checker_plugins: ["progress_checker"]
    goal_checker_plugins: "goal_checker"
    controller_plugins: ["FollowPath"]

    progress_checker:
      plugin: "nav2_controller::SimpleProgressChecker"
      required_movement_radius: 0.5
      movement_time_allowance: 10.0
    goal_checker:
      plugin: "nav2_controller::SimpleGoalChecker"
      xy_goal_tolerance: 0.25
      yaw_goal_tolerance: 0.25
      stateful: True
    FollowPath:
      plugin: "nav2_regulated_pure_pursuit_controller::RegulatedPurePursuitController"
      desired_linear_vel: 0.5
      lookahead_dist: 0.6
      min_lookahead_dist: 0.3
      max_lookahead_dist: 0.9
      lookahead_time: 1.5
      rotate_to_heading_angular_vel: 1.8
      transform_tolerance: 0.1
      use_velocity_scaled_lookahead_dist: false
      min_approach_linear_velocity: 0.05
      approach_velocity_scaling_dist: 1.0
      use_collision_detection: true
      max_allowed_time_to_collision_up_to_carrot: 1.0
      use_regulated_linear_velocity_scaling: true
      use_cost_regulated_linear_velocity_scaling: false
      regulated_linear_scaling_min_radius: 0.9
      regulated_linear_scaling_min_speed: 0.25
      use_fixed_curvature_lookahead: false
      curvature_lookahead_dist: 1.0
      use_rotate_to_heading: true
      rotate_to_heading_min_angle: 0.785
      max_angular_accel: 3.2
      max_robot_pose_search_dist: 10.0
      interpolate_curvature_after_goal: false
      cost_scaling_dist: 0.3
      cost_scaling_gain: 1.0
      inflation_cost_scaling_factor: 3.0

</code></pre></div></div>

<h2 id="topics">Topics</h2>

<table>
  <thead>
    <tr>
      <th>Topic</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">lookahead_point</code></td>
      <td><code class="language-plaintext highlighter-rouge">geometry_msgs/PointStamped</code></td>
      <td>The current lookahead point on the path</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">lookahead_arc</code></td>
      <td><code class="language-plaintext highlighter-rouge">nav_msgs/Path</code></td>
      <td>The drivable arc between the robot and the carrot. Arc length depends on <code class="language-plaintext highlighter-rouge">max_allowed_time_to_collision_up_to_carrot</code>, forward simulating from the robot pose at the commanded <code class="language-plaintext highlighter-rouge">Twist</code> by that time. In a collision state, the last published arc will be the points leading up to, and including, the first point in collision.</td>
    </tr>
  </tbody>
</table>

<p>Note: The <code class="language-plaintext highlighter-rouge">lookahead_arc</code> is also a really great speed indicator, when “full” to carrot or max time, you know you’re at full speed. If 20% less, you can tell the robot is approximately 20% below maximum speed. Think of it as the collision checking bounds but also a speed guage.</p>

<h2 id="notes-to-users">Notes to users</h2>

<p>By default, the <code class="language-plaintext highlighter-rouge">use_cost_regulated_linear_velocity_scaling</code> is set to <code class="language-plaintext highlighter-rouge">false</code> because the generic sandbox environment we have setup is the TB3 world. This is a highly constrained environment so it overly triggers to slow the robot as everywhere has high costs. This is recommended to be set to <code class="language-plaintext highlighter-rouge">true</code> when not working in constantly high-cost spaces.</p>

<p>To tune to get Adaptive Pure Pursuit behaviors, set all boolean parameters to false except <code class="language-plaintext highlighter-rouge">use_velocity_scaled_lookahead_dist</code> and make sure to tune <code class="language-plaintext highlighter-rouge">lookahead_time</code>, <code class="language-plaintext highlighter-rouge">min_lookahead_dist</code> and <code class="language-plaintext highlighter-rouge">max_lookahead_dist</code>.</p>

<p>To tune to get Pure Pursuit behaviors, set all boolean parameters to false and make sure to tune <code class="language-plaintext highlighter-rouge">lookahead_dist</code>.</p>

<p>Currently, there is no rotate to goal behaviors, so it is expected that the path approach orientations are the orientations of the goal or the goal checker has been set with a generous <code class="language-plaintext highlighter-rouge">min_theta_velocity_threshold</code>. Implementations for rotating to goal heading are on the way.</p>

<p>The choice of lookahead distances are highly dependent on robot size, responsiveness, controller update rate, and speed. Please make sure to tune this for your platform, although the <code class="language-plaintext highlighter-rouge">regulated</code> features do largely make heavy tuning of this value unnecessary. If you see wiggling, increase the distance or scale. If it’s not converging as fast to the path as you’d like, decrease it.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <em>No CHANGELOG found.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/nav2_regulated_pure_pursuit_controller/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#jazzy">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_gtest#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_gtest#jazzy">ament_cmake_gtest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#jazzy">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#jazzy">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/angles#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/angles#jazzy">angles  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_common#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_common#jazzy">nav2_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_core#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_core#jazzy">nav2_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_util#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_util#jazzy">nav2_util  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_costmap_2d#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_costmap_2d#jazzy">nav2_costmap_2d  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#jazzy">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/geometry_msgs#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/geometry_msgs#jazzy">geometry_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_msgs#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_msgs#jazzy">nav2_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/pluginlib#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/pluginlib#jazzy">pluginlib  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/tf2#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/tf2#jazzy">tf2  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/tf2_geometry_msgs#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/tf2_geometry_msgs#jazzy">tf2_geometry_msgs  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No direct system dependencies.</em>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/nav2_rotation_shim_controller#jazzy">nav2_rotation_shim_controller</a></td>
                      <td class="text-center">
                        
                        <a href="/p/nav2_rotation_shim_controller#jazzy-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/navigation2#jazzy">navigation2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/navigation2#jazzy-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <ul>
            
              <li><a href="https://github.com/ros-planning/navigation2/tree/jazzy/nav2_regulated_pure_pursuit_controller//nav2_regulated_pure_pursuit_controller.xml" target="_blank">nav2_core</a></li>
            
          </ul>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>nav2_regulated_pure_pursuit_controller</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="jazzy-question-list" class="panel-body" style="display: none;"></div>
      <div id="jazzy-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/nav2_regulated_pure_pursuit_controller+jazzy">here</a>.</p>
      </div>
      <div id="jazzy-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/ros-planning/navigation2.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/jazzy/p/nav2_regulated_pure_pursuit_controller"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/ros-planning/navigation2/tree/jazzy/nav2_regulated_pure_pursuit_controller"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>kilted</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>rolling</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/nav2_regulated_pure_pursuit_controller">nav2_regulated_pure_pursuit_controller</a> <small>package from <a style="text-decoration:none" href="/r/tup2023-sentry-nav/github-tup-robomaster-tup2023-sentry-nav">tup2023-sentry-nav</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/fast_lio">

fast_lio
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/lio_sam">

lio_sam
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dll">

dll
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map">

grid_map
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_cmake_helpers">

grid_map_cmake_helpers
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_core">

grid_map_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_costmap_2d">

grid_map_costmap_2d
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_cv">

grid_map_cv
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_demos">

grid_map_demos
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_filters">

grid_map_filters
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_loader">

grid_map_loader
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_msgs">

grid_map_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_octomap">

grid_map_octomap
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_pcl">

grid_map_pcl
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_ros">

grid_map_ros
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_rviz_plugin">

grid_map_rviz_plugin
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_sdf">

grid_map_sdf
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/grid_map_visualization">

grid_map_visualization
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/imu_complementary_filter">

imu_complementary_filter
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/imu_filter_madgwick">

imu_filter_madgwick
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/imu_tools">

imu_tools
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/costmap_converter">

costmap_converter
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/costmap_converter_msgs">

costmap_converter_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_amcl">

nav2_amcl
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_behavior_tree">

nav2_behavior_tree
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_bringup">

nav2_bringup
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_gazebo_spawner">

nav2_gazebo_spawner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_bt_navigator">

nav2_bt_navigator
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_common">

nav2_common
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_controller">

nav2_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_core">

nav2_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_costmap_2d">

nav2_costmap_2d
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/costmap_queue">

costmap_queue
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_core">

dwb_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_critics">

dwb_critics
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_msgs">

dwb_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_plugins">

dwb_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_dwb_controller">

nav2_dwb_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav_2d_msgs">

nav_2d_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav_2d_utils">

nav_2d_utils
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_lifecycle_manager">

nav2_lifecycle_manager
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_map_server">

nav2_map_server
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_msgs">

nav2_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_navfn_planner">

nav2_navfn_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_planner">

nav2_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_recoveries">

nav2_recoveries
</a>
            
          
            
            
              <span class="label label-default pkg-label">

nav2_regulated_pure_pursuit_controller
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_rotation_shim_controller">

nav2_rotation_shim_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_rviz_plugins">

nav2_rviz_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_simple_commander">

nav2_simple_commander
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_smac_planner">

nav2_smac_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_system_tests">

nav2_system_tests
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_theta_star_planner">

nav2_theta_star_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_util">

nav2_util
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_voxel_grid">

nav2_voxel_grid
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_waypoint_follower">

nav2_waypoint_follower
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/navigation2">

navigation2
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_costmap_filters_demo">

nav2_costmap_filters_demo
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_gradient_costmap_plugin">

nav2_gradient_costmap_plugin
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_msg_costmap_plugin">

nav2_msg_costmap_plugin
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_sms_behavior">

nav2_sms_behavior
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_straightline_planner">

nav2_straightline_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/sam_bot_description">

sam_bot_description
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/spatio_temporal_voxel_layer">

spatio_temporal_voxel_layer
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/teb_local_planner">

teb_local_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/teb_msgs">

teb_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/octomap_mapping">

octomap_mapping
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/octomap_server">

octomap_server
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/github/p/nav2_regulated_pure_pursuit_controller"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/tup-robomaster/tup2023-sentry-nav/tree/lio_WIP/navigation2/nav2_regulated_pure_pursuit_controller"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="github-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#github-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#github-assets" data-toggle="tab"><span class="label label-primary">1</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#github-deps" data-toggle="tab"><span class="label label-primary">13</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#github-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#github-questions" data-toggle="tab"><span id="github-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="github-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>1.0.12</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache-2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/tup-robomaster/tup2023-sentry-nav.git">https://github.com/tup-robomaster/tup2023-sentry-nav.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">lio_WIP</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2023-09-22
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNKNOWN
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/tup2023-sentry-nav/#github-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/tup2023-sentry-nav/#github-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/tup2023-sentry-nav/#github-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Regulated Pure Pursuit Controller
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Steve Macenski</li>
                
                  <li>Shrijit Singh</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <em>No additional authors.</em>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/tup-robomaster/tup2023-sentry-nav/tree/lio_WIP/navigation2/nav2_regulated_pure_pursuit_controller/README.md" title="Open in git repository">navigation2/nav2_regulated_pure_pursuit_controller/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="nav2-regulated-pure-pursuit-controller">Nav2 Regulated Pure Pursuit Controller</h1>

<p>This is a controller (local trajectory planner) that implements a variant on the pure pursuit algorithm to track a path. This variant we call the Regulated Pure Pursuit Algorithm, due to its additional regulation terms on collision and linear speed. It also implements the basics behind the Adaptive Pure Pursuit algorithm to vary lookahead distances by current speed. It was developed by <a href="https://www.linkedin.com/in/shrijitsingh99/">Shrijit Singh</a> and <a href="https://www.linkedin.com/in/steve-macenski-41a985101/">Steve Macenski</a> while at <a href="https://www.sra.samsung.com/">Samsung Research</a> as part of the Nav2 working group.</p>

<p>Code based on a simplified version of this controller is referenced in the <a href="https://navigation.ros.org/plugin_tutorials/docs/writing_new_nav2controller_plugin.html">Writing a New Nav2 Controller</a> tutorial.</p>

<p>This plugin implements the <code class="language-plaintext highlighter-rouge">nav2_core::Controller</code> interface allowing it to be used across the navigation stack as a local trajectory planner in the controller server’s action server (<code class="language-plaintext highlighter-rouge">controller_server</code>).</p>

<p>It builds on top of the ordinary pure pursuit algorithm in a number of ways. It also implements all the common variants of the pure pursuit algorithm such as adaptive pure pursuit. This controller is suitable for use on all types of robots, including differential, legged, and ackermann steering vehicles. It may also be used on omni-directional platforms, but won’t be able to fully leverage the lateral movements of the base (you may consider DWB instead).</p>

<p>This controller has been measured to run at well over 1 kHz on a modern intel processor.</p>

<p align="center">
  <img src="https://user-images.githubusercontent.com/14944147/102563918-3cd49d80-408f-11eb-8e03-b472815a05d8.gif">
</p>

<h2 id="pure-pursuit-basics">Pure Pursuit Basics</h2>

<p>The Pure Pursuit algorithm has been in use for over 30 years. You can read more about the details of the pure pursuit controller in its <a href="http://www.enseignement.polytechnique.fr/profs/informatique/Eric.Goubault/MRIS/coulter_r_craig_1992_1.pdf">introduction paper</a>. The core idea is to find a point on the path in front of the robot and find the linear and angular velocity to help drive towards it. Once it moves forward, a new point is selected, and the process repeats until the end of the path. The distance used to find the point to drive towards is the <code class="language-plaintext highlighter-rouge">lookahead</code> distance.</p>

<p>In order to simply book-keeping, the global path is continuously pruned to the closest point to the robot (see the figure below) so that we only have to process useful path points. Then, the section of the path within the local costmap bounds is transformed to the robot frame and a lookahead point is determined using a predefined distance.</p>

<p>Finally, the lookahead point will be given to the pure pursuit algorithm which finds the curvature of the path required to drive the robot to the lookahead point. This curvature is then applied to the velocity commands to allow the robot to drive.</p>

<p><img src="https://raw.githubusercontent.com/tup-robomaster/tup2023-sentry-nav/lio_WIP/navigation2/nav2_regulated_pure_pursuit_controller/./doc/lookahead_algorithm.png" alt="Lookahead algorithm"></p>

<h2 id="regulated-pure-pursuit-features">Regulated Pure Pursuit Features</h2>

<p>We have created a new variation on the pure pursuit algorithm that we dubb the Regulated Pure Pursuit algorithm. We combine the features of the Adaptive Pure Pursuit algorithm with rules around linear velocity with a focus on consumer, industrial, and service robot’s needs. We also implement several common-sense safety mechanisms like collision detection and ensuring that commands are kinematically feasible that are missing from all other variants of pure pursuit (for some remarkable reason).</p>

<p>The Regulated Pure Pursuit controller implements active collision detection. We use a parameter to set the maximum allowable time before a potential collision on the current velocity command. Using the current linear and angular velocity, we project forward in time that duration and check for collisions. Intuitively, you may think that collision checking between the robot and the lookahead point seems logical. However, if you’re maneuvering in tight spaces, it makes alot of sense to only search forward a given amount of time to give the system a little leeway to get itself out. In confined spaces especially, we want to make sure that we’re collision checking a reasonable amount of space for the current action being taken (e.g. if moving at 0.1 m/s, it makes no sense to look 10 meters ahead to the carrot, or 100 seconds into the future). This helps look further at higher speeds / angular rotations and closer with fine, slow motions in constrained environments so it doesn’t over report collisions from valid motions near obstacles. If you set the maximum allowable to a large number, it will collision check all the way, but not exceeding, the lookahead point. We visualize the collision checking arc on the <code class="language-plaintext highlighter-rouge">lookahead_arc</code> topic.</p>

<p>The regulated pure pursuit algorithm also makes use of the common variations on the pure pursuit algorithm. We implement the adaptive pure pursuit’s main contribution of having velocity-scaled lookahead point distances. This helps make the controller more stable over a larger range of potential linear velocities. There are parameters for setting the lookahead gain (or lookahead time) and thresholded values for minimum and maximum.</p>

<p>We also implement kinematic speed limits on the linear velocities in operations and angular velocities during pure rotations. This makes sure that the output commands are smooth, safe, and kinematically feasible. This is especially important at the beginning and end of a path tracking task, where you are ramping up to speed and slowing down to the goal.</p>

<p>The final minor improvement we make is slowing on approach to the goal. Knowing that the optimal lookahead distance is <code class="language-plaintext highlighter-rouge">X</code>, we can take the difference in <code class="language-plaintext highlighter-rouge">X</code> and the actual distance of the lookahead point found to find the lookahead point error. During operations, the variation in this error should be exceptionally small and won’t be triggered. However, at the end of the path, there are no more points at a lookahead distance away from the robot, so it uses the last point on the path. So as the robot approaches a target, its error will grow and the robot’s velocity will be reduced proportional to this error until a minimum threshold. This is also tracked by the kinematic speed limits to ensure drivability.</p>

<p>The major improvements that this work implements is the regulations on the linear velocity based on some cost functions.  They were selected to remove long-standing bad behavior within the pure pursuit algorithm. Normal Pure Pursuit has an issue with overshoot and poor handling in particularly high curvature (or extremely rapidly changing curvature) environments. It is commonly known that this will cause the robot to overshoot from the path and potentially collide with the environment. These cost functions in the Regulated Pure Pursuit algorithm were also chosen based on common requirements and needs of mobile robots uses in service, commercial, and industrial use-cases; scaling by curvature creates intuitive behavior of slowing the robot when making sharp turns and slowing when its near a potential collision so that small variations don’t clip obstacles. This is also really useful when working in partially observable environments (like turning in and out of aisles / hallways often) so that you slow before a sharp turn into an unknown dynamic environment to be more conservative in case something is in the way immediately requiring a stop.</p>

<p>The cost functions penalize the robot’s speed based on its proximity to obstacles and the curvature of the path. This is helpful to slow the robot when moving close to things in narrow spaces and scaling down the linear velocity by curvature helps to stabilize the controller over a larger range of lookahead point distances. This also has the added benefit of removing the sensitive tuning of the lookahead point / range, as the robot will track paths far better. Tuning is still required, but it is substantially easier to get reasonable behavior with minor adjustments.</p>

<p>An unintended tertiary benefit of scaling the linear velocities by curvature is that a robot will natively rotate to rough path heading when using holonomic planners that don’t start aligned with the robot pose orientation. As the curvature will be very high, the linear velocity drops and the angular velocity takes over to rotate to heading. While not perfect, it does dramatically reduce the need to rotate to a close path heading before following and opens up a broader range of planning techniques. Pure Pursuit controllers otherwise would be completely unable to recover from this in even modestly confined spaces.</p>

<p>Mixing the proximity and curvature regulated linear velocities with the time-scaled collision checker, we see a near-perfect combination allowing the regulated pure pursuit algorithm to handle high starting deviations from the path and navigate collision-free in tight spaces without overshoot.</p>

<h2 id="configuration">Configuration</h2>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">desired_linear_vel</code></td>
      <td>The desired maximum linear velocity to use.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">max_linear_accel</code></td>
      <td>Acceleration for linear velocity</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">max_linear_decel</code></td>
      <td>Deceleration for linear velocity</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">lookahead_dist</code></td>
      <td>The lookahead distance to use to find the lookahead point</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">min_lookahead_dist</code></td>
      <td>The minimum lookahead distance threshold when using velocity scaled lookahead distances</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">max_lookahead_dist</code></td>
      <td>The maximum lookahead distance threshold when using velocity scaled lookahead distances</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">lookahead_time</code></td>
      <td>The time to project the velocity by to find the velocity scaled lookahead distance. Also known as the lookahead gain.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">rotate_to_heading_angular_vel</code></td>
      <td>If rotate to heading is used, this is the angular velocity to use.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">transform_tolerance</code></td>
      <td>The TF transform tolerance</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_velocity_scaled_lookahead_dist</code></td>
      <td>Whether to use the velocity scaled lookahead distances or constant <code class="language-plaintext highlighter-rouge">lookahead_distance</code>
</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">min_approach_linear_velocity</code></td>
      <td>The minimum velocity threshold to apply when approaching the goal</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_approach_linear_velocity_scaling</code></td>
      <td>Whether to scale the linear velocity down on approach to the goal for a smooth stop</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">max_allowed_time_to_collision</code></td>
      <td>The time to project a velocity command to check for collisions</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_regulated_linear_velocity_scaling</code></td>
      <td>Whether to use the regulated features for curvature</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_cost_regulated_linear_velocity_scaling</code></td>
      <td>Whether to use the regulated features for proximity to obstacles</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">cost_scaling_dist</code></td>
      <td>The minimum distance from an obstacle to trigger the scaling of linear velocity, if <code class="language-plaintext highlighter-rouge">use_cost_regulated_linear_velocity_scaling</code> is enabled. The value set should be smaller or equal to the <code class="language-plaintext highlighter-rouge">inflation_radius</code> set in the inflation layer of costmap, since inflation is used to compute the distance from obstacles</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">cost_scaling_gain</code></td>
      <td>A multiplier gain, which should be &lt;= 1.0, used to further scale the speed when an obstacle is within <code class="language-plaintext highlighter-rouge">cost_scaling_dist</code>. Lower value reduces speed more quickly.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">inflation_cost_scaling_factor</code></td>
      <td>The value of <code class="language-plaintext highlighter-rouge">cost_scaling_factor</code> set for the inflation layer in the local costmap. The value should be exactly the same for accurately computing distance from obstacles using the inflated cell values</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">regulated_linear_scaling_min_radius</code></td>
      <td>The turning radius for which the regulation features are triggered. Remember, sharper turns have smaller radii</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">regulated_linear_scaling_min_speed</code></td>
      <td>The minimum speed for which the regulated features can send, to ensure process is still achievable even in high cost spaces with high curvature.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_rotate_to_heading</code></td>
      <td>Whether to enable rotating to rough heading and goal orientation when using holonomic planners. Recommended on for all robot types except ackermann, which cannot rotate in place.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">rotate_to_heading_min_angle</code></td>
      <td>The difference in the path orientation and the starting robot orientation to trigger a rotate in place, if <code class="language-plaintext highlighter-rouge">use_rotate_to_heading</code> is enabled.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">max_angular_accel</code></td>
      <td>Maximum allowable angular acceleration while rotating to heading, if enabled</td>
    </tr>
  </tbody>
</table>

<p>Example fully-described XML with default parameter values:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>controller_server:
  ros__parameters:
    use_sim_time: True
    controller_frequency: 20.0
    min_x_velocity_threshold: 0.001
    min_y_velocity_threshold: 0.5
    min_theta_velocity_threshold: 0.001
    progress_checker_plugin: "progress_checker"
    goal_checker_plugins: "goal_checker"
    controller_plugins: ["FollowPath"]

    progress_checker:
      plugin: "nav2_controller::SimpleProgressChecker"
      required_movement_radius: 0.5
      movement_time_allowance: 10.0
    goal_checker:
      plugin: "nav2_controller::SimpleGoalChecker"
      xy_goal_tolerance: 0.25
      yaw_goal_tolerance: 0.25
      stateful: True
    FollowPath:
      plugin: "nav2_regulated_pure_pursuit_controller::RegulatedPurePursuitController"
      desired_linear_vel: 0.5
      max_linear_accel: 2.5
      max_linear_decel: 2.5
      lookahead_dist: 0.6
      min_lookahead_dist: 0.3
      max_lookahead_dist: 0.9
      lookahead_time: 1.5
      rotate_to_heading_angular_vel: 1.8
      transform_tolerance: 0.1
      use_velocity_scaled_lookahead_dist: false
      min_approach_linear_velocity: 0.05
      use_approach_linear_velocity_scaling: true
      max_allowed_time_to_collision: 1.0
      use_regulated_linear_velocity_scaling: true
      use_cost_regulated_linear_velocity_scaling: false
      regulated_linear_scaling_min_radius: 0.9
      regulated_linear_scaling_min_speed: 0.25
      use_rotate_to_heading: true
      rotate_to_heading_min_angle: 0.785
      max_angular_accel: 3.2
      cost_scaling_dist: 0.3
      cost_scaling_gain: 1.0
      inflation_cost_scaling_factor: 3.0

</code></pre></div></div>

<h2 id="topics">Topics</h2>

<table>
  <thead>
    <tr>
      <th>Topic</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">lookahead_point</code></td>
      <td><code class="language-plaintext highlighter-rouge">geometry_msgs/PointStamped</code></td>
      <td>The current lookahead point on the path</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">lookahead_arc</code></td>
      <td><code class="language-plaintext highlighter-rouge">nav_msgs/Path</code></td>
      <td>The drivable arc between the robot and the carrot. Arc length depends on <code class="language-plaintext highlighter-rouge">max_allowed_time_to_collision</code>, forward simulating from the robot pose at the commanded <code class="language-plaintext highlighter-rouge">Twist</code> by that time. In a collision state, the last published arc will be the points leading up to, and including, the first point in collision.</td>
    </tr>
  </tbody>
</table>

<p>Note: The <code class="language-plaintext highlighter-rouge">lookahead_arc</code> is also a really great speed indicator, when “full” to carrot or max time, you know you’re at full speed. If 20% less, you can tell the robot is approximately 20% below maximum speed. Think of it as the collision checking bounds but also a speed guage.</p>

<h2 id="notes-to-users">Notes to users</h2>

<p>By default, the <code class="language-plaintext highlighter-rouge">use_cost_regulated_linear_velocity_scaling</code> is set to <code class="language-plaintext highlighter-rouge">false</code> because the generic sandbox environment we have setup is the TB3 world. This is a highly constrained environment so it overly triggers to slow the robot as everywhere has high costs. This is recommended to be set to <code class="language-plaintext highlighter-rouge">true</code> when not working in constantly high-cost spaces.</p>

<p>To tune to get Adaptive Pure Pursuit behaviors, set all boolean parameters to false except <code class="language-plaintext highlighter-rouge">use_velocity_scaled_lookahead_dist</code> and make sure to tune <code class="language-plaintext highlighter-rouge">lookahead_time</code>, <code class="language-plaintext highlighter-rouge">min_lookahead_dist</code> and <code class="language-plaintext highlighter-rouge">max_lookahead_dist</code>.</p>

<p>To tune to get Pure Pursuit behaviors, set all boolean parameters to false and make sure to tune <code class="language-plaintext highlighter-rouge">lookahead_dist</code>.</p>

<p>Currently, there is no rotate to goal behaviors, so it is expected that the path approach orientations are the orientations of the goal or the goal checker has been set with a generous <code class="language-plaintext highlighter-rouge">min_theta_velocity_threshold</code>. Implementations for rotating to goal heading are on the way.</p>

<p>The choice of lookahead distances are highly dependent on robot size, responsiveness, controller update rate, and speed. Please make sure to tune this for your platform, although the <code class="language-plaintext highlighter-rouge">regulated</code> features do largely make heavy tuning of this value unnecessary. If you see wiggling, increase the distance or scale. If it’s not converging as fast to the path as you’d like, decrease it.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <em>No CHANGELOG found.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/nav2_regulated_pure_pursuit_controller/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#github">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_gtest#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_gtest#github">ament_cmake_gtest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#github">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#github">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_common#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_common#github">nav2_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_core#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_core#github">nav2_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_util#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_util#github">nav2_util  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_costmap_2d#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_costmap_2d#github">nav2_costmap_2d  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#github">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/geometry_msgs#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/geometry_msgs#github">geometry_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_msgs#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_msgs#github">nav2_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/pluginlib#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/pluginlib#github">pluginlib  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/tf2#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/tf2#github">tf2  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No direct system dependencies.</em>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/nav2_rotation_shim_controller#github">nav2_rotation_shim_controller</a></td>
                      <td class="text-center">
                        
                        <a href="/p/nav2_rotation_shim_controller#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/nav2_rotation_shim_controller#github">nav2_rotation_shim_controller</a></td>
                      <td class="text-center">
                        
                        <a href="/p/nav2_rotation_shim_controller#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/nav2_rotation_shim_controller#github">nav2_rotation_shim_controller</a></td>
                      <td class="text-center">
                        
                        <a href="/p/nav2_rotation_shim_controller#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/nav2_rotation_shim_controller#github">nav2_rotation_shim_controller</a></td>
                      <td class="text-center">
                        
                        <a href="/p/nav2_rotation_shim_controller#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/nav2_rotation_shim_controller#github">nav2_rotation_shim_controller</a></td>
                      <td class="text-center">
                        
                        <a href="/p/nav2_rotation_shim_controller#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/nav2_rotation_shim_controller#github">nav2_rotation_shim_controller</a></td>
                      <td class="text-center">
                        
                        <a href="/p/nav2_rotation_shim_controller#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/nav2_rotation_shim_controller#github">nav2_rotation_shim_controller</a></td>
                      <td class="text-center">
                        
                        <a href="/p/nav2_rotation_shim_controller#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/navigation2#github">navigation2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/navigation2#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/navigation2#github">navigation2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/navigation2#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/navigation2#github">navigation2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/navigation2#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/navigation2#github">navigation2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/navigation2#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/navigation2#github">navigation2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/navigation2#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/navigation2#github">navigation2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/navigation2#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/navigation2#github">navigation2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/navigation2#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/rover_navigation#github">rover_navigation</a></td>
                      <td class="text-center">
                        
                        <a href="/p/rover_navigation#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <ul>
            
              <li><a href="https://github.com/tup-robomaster/tup2023-sentry-nav/tree/lio_WIP/navigation2/nav2_regulated_pure_pursuit_controller//nav2_regulated_pure_pursuit_controller.xml" target="_blank">nav2_core</a></li>
            
          </ul>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>nav2_regulated_pure_pursuit_controller</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="github-question-list" class="panel-body" style="display: none;"></div>
      <div id="github-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/nav2_regulated_pure_pursuit_controller+github">here</a>.</p>
      </div>
      <div id="github-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/tup-robomaster/tup2023-sentry-nav.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/github/p/nav2_regulated_pure_pursuit_controller"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/tup-robomaster/tup2023-sentry-nav/tree/lio_WIP/navigation2/nav2_regulated_pure_pursuit_controller"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/nav2_regulated_pure_pursuit_controller">nav2_regulated_pure_pursuit_controller</a> <small>package from <a style="text-decoration:none" href="/r/navigation2/github-ros-planning-navigation2">navigation2</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_amcl">

nav2_amcl
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_behavior_tree">

nav2_behavior_tree
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_bringup">

nav2_bringup
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_gazebo_spawner">

nav2_gazebo_spawner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_bt_navigator">

nav2_bt_navigator
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_common">

nav2_common
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_controller">

nav2_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_core">

nav2_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_costmap_2d">

nav2_costmap_2d
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/costmap_queue">

costmap_queue
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_core">

dwb_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_critics">

dwb_critics
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_msgs">

dwb_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_plugins">

dwb_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_dwb_controller">

nav2_dwb_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav_2d_msgs">

nav_2d_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav_2d_utils">

nav_2d_utils
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_lifecycle_manager">

nav2_lifecycle_manager
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_map_server">

nav2_map_server
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_msgs">

nav2_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_navfn_planner">

nav2_navfn_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_planner">

nav2_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_recoveries">

nav2_recoveries
</a>
            
          
            
            
              <span class="label label-default pkg-label">

nav2_regulated_pure_pursuit_controller
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_rotation_shim_controller">

nav2_rotation_shim_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_rviz_plugins">

nav2_rviz_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_simple_commander">

nav2_simple_commander
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_smac_planner">

nav2_smac_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_system_tests">

nav2_system_tests
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_theta_star_planner">

nav2_theta_star_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_util">

nav2_util
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_voxel_grid">

nav2_voxel_grid
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_waypoint_follower">

nav2_waypoint_follower
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/navigation2">

navigation2
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/galactic/p/nav2_regulated_pure_pursuit_controller"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/ros-planning/navigation2/tree/galactic/nav2_regulated_pure_pursuit_controller"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="galactic-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#galactic-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#galactic-assets" data-toggle="tab"><span class="label label-primary">1</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#galactic-deps" data-toggle="tab"><span class="label label-primary">13</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#galactic-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#galactic-questions" data-toggle="tab"><span id="galactic-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="galactic-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>1.0.12</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache-2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS 2 Navigation Framework and System</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-planning/navigation2.git">https://github.com/ros-planning/navigation2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">galactic</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2022-09-15
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">robotics</span> <span class="label label-default">navigation</span> <span class="label label-default">ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/navigation2/#galactic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/navigation2/#galactic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/navigation2/#galactic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Regulated Pure Pursuit Controller
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Steve Macenski</li>
                
                  <li>Shrijit Singh</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <em>No additional authors.</em>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/ros-planning/navigation2/tree/galactic/nav2_regulated_pure_pursuit_controller/README.md" title="Open in git repository">nav2_regulated_pure_pursuit_controller/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="nav2-regulated-pure-pursuit-controller">Nav2 Regulated Pure Pursuit Controller</h1>

<p>This is a controller (local trajectory planner) that implements a variant on the pure pursuit algorithm to track a path. This variant we call the Regulated Pure Pursuit Algorithm, due to its additional regulation terms on collision and linear speed. It also implements the basics behind the Adaptive Pure Pursuit algorithm to vary lookahead distances by current speed. It was developed by <a href="https://www.linkedin.com/in/shrijitsingh99/">Shrijit Singh</a> and <a href="https://www.linkedin.com/in/steve-macenski-41a985101/">Steve Macenski</a> while at <a href="https://www.sra.samsung.com/">Samsung Research</a> as part of the Nav2 working group.</p>

<p>Code based on a simplified version of this controller is referenced in the <a href="https://navigation.ros.org/plugin_tutorials/docs/writing_new_nav2controller_plugin.html">Writing a New Nav2 Controller</a> tutorial.</p>

<p>This plugin implements the <code class="language-plaintext highlighter-rouge">nav2_core::Controller</code> interface allowing it to be used across the navigation stack as a local trajectory planner in the controller server’s action server (<code class="language-plaintext highlighter-rouge">controller_server</code>).</p>

<p>It builds on top of the ordinary pure pursuit algorithm in a number of ways. It also implements all the common variants of the pure pursuit algorithm such as adaptive pure pursuit. This controller is suitable for use on all types of robots, including differential, legged, and ackermann steering vehicles. It may also be used on omni-directional platforms, but won’t be able to fully leverage the lateral movements of the base (you may consider DWB instead).</p>

<p>This controller has been measured to run at well over 1 kHz on a modern intel processor.</p>

<p align="center">
  <img src="https://user-images.githubusercontent.com/14944147/102563918-3cd49d80-408f-11eb-8e03-b472815a05d8.gif">
</p>

<h2 id="pure-pursuit-basics">Pure Pursuit Basics</h2>

<p>The Pure Pursuit algorithm has been in use for over 30 years. You can read more about the details of the pure pursuit controller in its <a href="http://www.enseignement.polytechnique.fr/profs/informatique/Eric.Goubault/MRIS/coulter_r_craig_1992_1.pdf">introduction paper</a>. The core idea is to find a point on the path in front of the robot and find the linear and angular velocity to help drive towards it. Once it moves forward, a new point is selected, and the process repeats until the end of the path. The distance used to find the point to drive towards is the <code class="language-plaintext highlighter-rouge">lookahead</code> distance.</p>

<p>In order to simply book-keeping, the global path is continuously pruned to the closest point to the robot (see the figure below) so that we only have to process useful path points. Then, the section of the path within the local costmap bounds is transformed to the robot frame and a lookahead point is determined using a predefined distance.</p>

<p>Finally, the lookahead point will be given to the pure pursuit algorithm which finds the curvature of the path required to drive the robot to the lookahead point. This curvature is then applied to the velocity commands to allow the robot to drive.</p>

<p><img src="https://raw.githubusercontent.com/ros-planning/navigation2/galactic/nav2_regulated_pure_pursuit_controller/./doc/lookahead_algorithm.png" alt="Lookahead algorithm"></p>

<h2 id="regulated-pure-pursuit-features">Regulated Pure Pursuit Features</h2>

<p>We have created a new variation on the pure pursuit algorithm that we dubb the Regulated Pure Pursuit algorithm. We combine the features of the Adaptive Pure Pursuit algorithm with rules around linear velocity with a focus on consumer, industrial, and service robot’s needs. We also implement several common-sense safety mechanisms like collision detection and ensuring that commands are kinematically feasible that are missing from all other variants of pure pursuit (for some remarkable reason).</p>

<p>The Regulated Pure Pursuit controller implements active collision detection. We use a parameter to set the maximum allowable time before a potential collision on the current velocity command. Using the current linear and angular velocity, we project forward in time that duration and check for collisions. Intuitively, you may think that collision checking between the robot and the lookahead point seems logical. However, if you’re maneuvering in tight spaces, it makes alot of sense to only search forward a given amount of time to give the system a little leeway to get itself out. In confined spaces especially, we want to make sure that we’re collision checking a reasonable amount of space for the current action being taken (e.g. if moving at 0.1 m/s, it makes no sense to look 10 meters ahead to the carrot, or 100 seconds into the future). This helps look further at higher speeds / angular rotations and closer with fine, slow motions in constrained environments so it doesn’t over report collisions from valid motions near obstacles. If you set the maximum allowable to a large number, it will collision check all the way, but not exceeding, the lookahead point. We visualize the collision checking arc on the <code class="language-plaintext highlighter-rouge">lookahead_arc</code> topic.</p>

<p>The regulated pure pursuit algorithm also makes use of the common variations on the pure pursuit algorithm. We implement the adaptive pure pursuit’s main contribution of having velocity-scaled lookahead point distances. This helps make the controller more stable over a larger range of potential linear velocities. There are parameters for setting the lookahead gain (or lookahead time) and thresholded values for minimum and maximum.</p>

<p>We also implement kinematic speed limits on the linear velocities in operations and angular velocities during pure rotations. This makes sure that the output commands are smooth, safe, and kinematically feasible. This is especially important at the beginning and end of a path tracking task, where you are ramping up to speed and slowing down to the goal.</p>

<p>The final minor improvement we make is slowing on approach to the goal. Knowing that the optimal lookahead distance is <code class="language-plaintext highlighter-rouge">X</code>, we can take the difference in <code class="language-plaintext highlighter-rouge">X</code> and the actual distance of the lookahead point found to find the lookahead point error. During operations, the variation in this error should be exceptionally small and won’t be triggered. However, at the end of the path, there are no more points at a lookahead distance away from the robot, so it uses the last point on the path. So as the robot approaches a target, its error will grow and the robot’s velocity will be reduced proportional to this error until a minimum threshold. This is also tracked by the kinematic speed limits to ensure drivability.</p>

<p>The major improvements that this work implements is the regulations on the linear velocity based on some cost functions.  They were selected to remove long-standing bad behavior within the pure pursuit algorithm. Normal Pure Pursuit has an issue with overshoot and poor handling in particularly high curvature (or extremely rapidly changing curvature) environments. It is commonly known that this will cause the robot to overshoot from the path and potentially collide with the environment. These cost functions in the Regulated Pure Pursuit algorithm were also chosen based on common requirements and needs of mobile robots uses in service, commercial, and industrial use-cases; scaling by curvature creates intuitive behavior of slowing the robot when making sharp turns and slowing when its near a potential collision so that small variations don’t clip obstacles. This is also really useful when working in partially observable environments (like turning in and out of aisles / hallways often) so that you slow before a sharp turn into an unknown dynamic environment to be more conservative in case something is in the way immediately requiring a stop.</p>

<p>The cost functions penalize the robot’s speed based on its proximity to obstacles and the curvature of the path. This is helpful to slow the robot when moving close to things in narrow spaces and scaling down the linear velocity by curvature helps to stabilize the controller over a larger range of lookahead point distances. This also has the added benefit of removing the sensitive tuning of the lookahead point / range, as the robot will track paths far better. Tuning is still required, but it is substantially easier to get reasonable behavior with minor adjustments.</p>

<p>An unintended tertiary benefit of scaling the linear velocities by curvature is that a robot will natively rotate to rough path heading when using holonomic planners that don’t start aligned with the robot pose orientation. As the curvature will be very high, the linear velocity drops and the angular velocity takes over to rotate to heading. While not perfect, it does dramatically reduce the need to rotate to a close path heading before following and opens up a broader range of planning techniques. Pure Pursuit controllers otherwise would be completely unable to recover from this in even modestly confined spaces.</p>

<p>Mixing the proximity and curvature regulated linear velocities with the time-scaled collision checker, we see a near-perfect combination allowing the regulated pure pursuit algorithm to handle high starting deviations from the path and navigate collision-free in tight spaces without overshoot.</p>

<h2 id="configuration">Configuration</h2>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">desired_linear_vel</code></td>
      <td>The desired maximum linear velocity to use.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">max_linear_accel</code></td>
      <td>Acceleration for linear velocity</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">max_linear_decel</code></td>
      <td>Deceleration for linear velocity</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">lookahead_dist</code></td>
      <td>The lookahead distance to use to find the lookahead point</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">min_lookahead_dist</code></td>
      <td>The minimum lookahead distance threshold when using velocity scaled lookahead distances</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">max_lookahead_dist</code></td>
      <td>The maximum lookahead distance threshold when using velocity scaled lookahead distances</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">lookahead_time</code></td>
      <td>The time to project the velocity by to find the velocity scaled lookahead distance. Also known as the lookahead gain.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">rotate_to_heading_angular_vel</code></td>
      <td>If rotate to heading is used, this is the angular velocity to use.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">transform_tolerance</code></td>
      <td>The TF transform tolerance</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_velocity_scaled_lookahead_dist</code></td>
      <td>Whether to use the velocity scaled lookahead distances or constant <code class="language-plaintext highlighter-rouge">lookahead_distance</code>
</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">min_approach_linear_velocity</code></td>
      <td>The minimum velocity threshold to apply when approaching the goal</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_approach_linear_velocity_scaling</code></td>
      <td>Whether to scale the linear velocity down on approach to the goal for a smooth stop</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">max_allowed_time_to_collision</code></td>
      <td>The time to project a velocity command to check for collisions</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_regulated_linear_velocity_scaling</code></td>
      <td>Whether to use the regulated features for curvature</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_cost_regulated_linear_velocity_scaling</code></td>
      <td>Whether to use the regulated features for proximity to obstacles</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">cost_scaling_dist</code></td>
      <td>The minimum distance from an obstacle to trigger the scaling of linear velocity, if <code class="language-plaintext highlighter-rouge">use_cost_regulated_linear_velocity_scaling</code> is enabled. The value set should be smaller or equal to the <code class="language-plaintext highlighter-rouge">inflation_radius</code> set in the inflation layer of costmap, since inflation is used to compute the distance from obstacles</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">cost_scaling_gain</code></td>
      <td>A multiplier gain, which should be &lt;= 1.0, used to further scale the speed when an obstacle is within <code class="language-plaintext highlighter-rouge">cost_scaling_dist</code>. Lower value reduces speed more quickly.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">inflation_cost_scaling_factor</code></td>
      <td>The value of <code class="language-plaintext highlighter-rouge">cost_scaling_factor</code> set for the inflation layer in the local costmap. The value should be exactly the same for accurately computing distance from obstacles using the inflated cell values</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">regulated_linear_scaling_min_radius</code></td>
      <td>The turning radius for which the regulation features are triggered. Remember, sharper turns have smaller radii</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">regulated_linear_scaling_min_speed</code></td>
      <td>The minimum speed for which the regulated features can send, to ensure process is still achievable even in high cost spaces with high curvature.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_rotate_to_heading</code></td>
      <td>Whether to enable rotating to rough heading and goal orientation when using holonomic planners. Recommended on for all robot types except ackermann, which cannot rotate in place.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">rotate_to_heading_min_angle</code></td>
      <td>The difference in the path orientation and the starting robot orientation to trigger a rotate in place, if <code class="language-plaintext highlighter-rouge">use_rotate_to_heading</code> is enabled.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">max_angular_accel</code></td>
      <td>Maximum allowable angular acceleration while rotating to heading, if enabled</td>
    </tr>
  </tbody>
</table>

<p>Example fully-described XML with default parameter values:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>controller_server:
  ros__parameters:
    use_sim_time: True
    controller_frequency: 20.0
    min_x_velocity_threshold: 0.001
    min_y_velocity_threshold: 0.5
    min_theta_velocity_threshold: 0.001
    progress_checker_plugin: "progress_checker"
    goal_checker_plugins: "goal_checker"
    controller_plugins: ["FollowPath"]

    progress_checker:
      plugin: "nav2_controller::SimpleProgressChecker"
      required_movement_radius: 0.5
      movement_time_allowance: 10.0
    goal_checker:
      plugin: "nav2_controller::SimpleGoalChecker"
      xy_goal_tolerance: 0.25
      yaw_goal_tolerance: 0.25
      stateful: True
    FollowPath:
      plugin: "nav2_regulated_pure_pursuit_controller::RegulatedPurePursuitController"
      desired_linear_vel: 0.5
      max_linear_accel: 2.5
      max_linear_decel: 2.5
      lookahead_dist: 0.6
      min_lookahead_dist: 0.3
      max_lookahead_dist: 0.9
      lookahead_time: 1.5
      rotate_to_heading_angular_vel: 1.8
      transform_tolerance: 0.1
      use_velocity_scaled_lookahead_dist: false
      min_approach_linear_velocity: 0.05
      use_approach_linear_velocity_scaling: true
      max_allowed_time_to_collision: 1.0
      use_regulated_linear_velocity_scaling: true
      use_cost_regulated_linear_velocity_scaling: false
      regulated_linear_scaling_min_radius: 0.9
      regulated_linear_scaling_min_speed: 0.25
      use_rotate_to_heading: true
      rotate_to_heading_min_angle: 0.785
      max_angular_accel: 3.2
      cost_scaling_dist: 0.3
      cost_scaling_gain: 1.0
      inflation_cost_scaling_factor: 3.0

</code></pre></div></div>

<h2 id="topics">Topics</h2>

<table>
  <thead>
    <tr>
      <th>Topic</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">lookahead_point</code></td>
      <td><code class="language-plaintext highlighter-rouge">geometry_msgs/PointStamped</code></td>
      <td>The current lookahead point on the path</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">lookahead_arc</code></td>
      <td><code class="language-plaintext highlighter-rouge">nav_msgs/Path</code></td>
      <td>The drivable arc between the robot and the carrot. Arc length depends on <code class="language-plaintext highlighter-rouge">max_allowed_time_to_collision</code>, forward simulating from the robot pose at the commanded <code class="language-plaintext highlighter-rouge">Twist</code> by that time. In a collision state, the last published arc will be the points leading up to, and including, the first point in collision.</td>
    </tr>
  </tbody>
</table>

<p>Note: The <code class="language-plaintext highlighter-rouge">lookahead_arc</code> is also a really great speed indicator, when “full” to carrot or max time, you know you’re at full speed. If 20% less, you can tell the robot is approximately 20% below maximum speed. Think of it as the collision checking bounds but also a speed guage.</p>

<h2 id="notes-to-users">Notes to users</h2>

<p>By default, the <code class="language-plaintext highlighter-rouge">use_cost_regulated_linear_velocity_scaling</code> is set to <code class="language-plaintext highlighter-rouge">false</code> because the generic sandbox environment we have setup is the TB3 world. This is a highly constrained environment so it overly triggers to slow the robot as everywhere has high costs. This is recommended to be set to <code class="language-plaintext highlighter-rouge">true</code> when not working in constantly high-cost spaces.</p>

<p>To tune to get Adaptive Pure Pursuit behaviors, set all boolean parameters to false except <code class="language-plaintext highlighter-rouge">use_velocity_scaled_lookahead_dist</code> and make sure to tune <code class="language-plaintext highlighter-rouge">lookahead_time</code>, <code class="language-plaintext highlighter-rouge">min_lookahead_dist</code> and <code class="language-plaintext highlighter-rouge">max_lookahead_dist</code>.</p>

<p>To tune to get Pure Pursuit behaviors, set all boolean parameters to false and make sure to tune <code class="language-plaintext highlighter-rouge">lookahead_dist</code>.</p>

<p>Currently, there is no rotate to goal behaviors, so it is expected that the path approach orientations are the orientations of the goal or the goal checker has been set with a generous <code class="language-plaintext highlighter-rouge">min_theta_velocity_threshold</code>. Implementations for rotating to goal heading are on the way.</p>

<p>The choice of lookahead distances are highly dependent on robot size, responsiveness, controller update rate, and speed. Please make sure to tune this for your platform, although the <code class="language-plaintext highlighter-rouge">regulated</code> features do largely make heavy tuning of this value unnecessary. If you see wiggling, increase the distance or scale. If it’s not converging as fast to the path as you’d like, decrease it.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <em>No CHANGELOG found.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/nav2_regulated_pure_pursuit_controller/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#galactic">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_gtest#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_gtest#galactic">ament_cmake_gtest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#galactic">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#galactic">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_common#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_common#galactic">nav2_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_core#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_core#galactic">nav2_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_util#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_util#galactic">nav2_util  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_costmap_2d#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_costmap_2d#galactic">nav2_costmap_2d  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#galactic">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/geometry_msgs#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/geometry_msgs#galactic">geometry_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_msgs#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_msgs#galactic">nav2_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/pluginlib#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/pluginlib#galactic">pluginlib  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/tf2#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/tf2#galactic">tf2  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No direct system dependencies.</em>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/nav2_rotation_shim_controller#galactic">nav2_rotation_shim_controller</a></td>
                      <td class="text-center">
                        
                        <a href="/p/nav2_rotation_shim_controller#galactic-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/navigation2#galactic">navigation2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/navigation2#galactic-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <ul>
            
              <li><a href="https://github.com/ros-planning/navigation2/tree/galactic/nav2_regulated_pure_pursuit_controller//nav2_regulated_pure_pursuit_controller.xml" target="_blank">nav2_core</a></li>
            
          </ul>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>nav2_regulated_pure_pursuit_controller</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="galactic-question-list" class="panel-body" style="display: none;"></div>
      <div id="galactic-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/nav2_regulated_pure_pursuit_controller+galactic">here</a>.</p>
      </div>
      <div id="galactic-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/ros-planning/navigation2.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/galactic/p/nav2_regulated_pure_pursuit_controller"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/ros-planning/navigation2/tree/galactic/nav2_regulated_pure_pursuit_controller"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/nav2_regulated_pure_pursuit_controller">nav2_regulated_pure_pursuit_controller</a> <small>package from <a style="text-decoration:none" href="/r/navigation2/github-ros-planning-navigation2">navigation2</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_amcl">

nav2_amcl
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_behavior_tree">

nav2_behavior_tree
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_behaviors">

nav2_behaviors
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_bringup">

nav2_bringup
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_bt_navigator">

nav2_bt_navigator
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_collision_monitor">

nav2_collision_monitor
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_common">

nav2_common
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_constrained_smoother">

nav2_constrained_smoother
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_controller">

nav2_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_core">

nav2_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_costmap_2d">

nav2_costmap_2d
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/costmap_queue">

costmap_queue
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_core">

dwb_core
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_critics">

dwb_critics
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_msgs">

dwb_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/dwb_plugins">

dwb_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_dwb_controller">

nav2_dwb_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav_2d_msgs">

nav_2d_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav_2d_utils">

nav_2d_utils
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_lifecycle_manager">

nav2_lifecycle_manager
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_map_server">

nav2_map_server
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_mppi_controller">

nav2_mppi_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_msgs">

nav2_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_navfn_planner">

nav2_navfn_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_planner">

nav2_planner
</a>
            
          
            
            
              <span class="label label-default pkg-label">

nav2_regulated_pure_pursuit_controller
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_rotation_shim_controller">

nav2_rotation_shim_controller
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_rviz_plugins">

nav2_rviz_plugins
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_simple_commander">

nav2_simple_commander
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_smac_planner">

nav2_smac_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_smoother">

nav2_smoother
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_system_tests">

nav2_system_tests
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_theta_star_planner">

nav2_theta_star_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_util">

nav2_util
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_velocity_smoother">

nav2_velocity_smoother
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_voxel_grid">

nav2_voxel_grid
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/nav2_waypoint_follower">

nav2_waypoint_follower
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/navigation2">

navigation2
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/iron/p/nav2_regulated_pure_pursuit_controller"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/ros-planning/navigation2/tree/iron/nav2_regulated_pure_pursuit_controller"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="iron-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#iron-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#iron-assets" data-toggle="tab"><span class="label label-primary">1</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#iron-deps" data-toggle="tab"><span class="label label-primary">14</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#iron-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#iron-questions" data-toggle="tab"><span id="iron-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="iron-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>1.2.10</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache-2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">ROS 2 Navigation Framework and System</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/ros-planning/navigation2.git">https://github.com/ros-planning/navigation2.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">iron</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-10-02
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">robotics</span> <span class="label label-default">navigation</span> <span class="label label-default">ros2</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/navigation2/#iron-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/navigation2/#iron-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/navigation2/#iron-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            Regulated Pure Pursuit Controller
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Steve Macenski</li>
                
                  <li>Shrijit Singh</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <em>No additional authors.</em>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/ros-planning/navigation2/tree/iron/nav2_regulated_pure_pursuit_controller/README.md" title="Open in git repository">nav2_regulated_pure_pursuit_controller/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="nav2-regulated-pure-pursuit-controller">Nav2 Regulated Pure Pursuit Controller</h1>

<p>This is a controller (local trajectory planner) that implements a variant on the pure pursuit algorithm to track a path. This variant we call the Regulated Pure Pursuit Algorithm, due to its additional regulation terms on collision and linear speed. It also implements the basics behind the Adaptive Pure Pursuit algorithm to vary lookahead distances by current speed. It was developed by <a href="https://www.linkedin.com/in/shrijitsingh99/">Shrijit Singh</a> and <a href="https://www.linkedin.com/in/steve-macenski-41a985101/">Steve Macenski</a> while at <a href="https://www.sra.samsung.com/">Samsung Research</a> as part of the Nav2 working group.</p>

<p>Code based on a simplified version of this controller is referenced in the <a href="https://navigation.ros.org/plugin_tutorials/docs/writing_new_nav2controller_plugin.html">Writing a New Nav2 Controller</a> tutorial.</p>

<p>This plugin implements the <code class="language-plaintext highlighter-rouge">nav2_core::Controller</code> interface allowing it to be used across the navigation stack as a local trajectory planner in the controller server’s action server (<code class="language-plaintext highlighter-rouge">controller_server</code>).</p>

<p>It builds on top of the ordinary pure pursuit algorithm in a number of ways. It also implements all the common variants of the pure pursuit algorithm such as adaptive pure pursuit. This controller is suitable for use on all types of robots, including differential, legged, and ackermann steering vehicles. It may also be used on omni-directional platforms, but won’t be able to fully leverage the lateral movements of the base (you may consider DWB instead).</p>

<p>This controller has been measured to run at well over 1 kHz on a modern intel processor.</p>

<p align="center">
  <img src="https://user-images.githubusercontent.com/14944147/102563918-3cd49d80-408f-11eb-8e03-b472815a05d8.gif">
</p>

<p>See its <a href="https://navigation.ros.org/configuration/packages/configuring-regulated-pp.html">Configuration Guide Page</a> for additional parameter descriptions.</p>

<p>If you use the Regulated Pure Pursuit Controller algorithm or software from this repository, please cite this work in your papers!</p>

<ul>
  <li>S. Macenski, S. Singh, F. Martin, J. Gines, <a href="https://arxiv.org/abs/2305.20026"><strong>Regulated Pure Pursuit for Robot Path Tracking</strong></a>. Autonomous Robots, 2023.</li>
</ul>

<div class="language-bibtex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">@article</span><span class="p">{</span><span class="nl">macenski2023regulated</span><span class="p">,</span>
      <span class="na">title</span><span class="p">=</span><span class="s">{Regulated Pure Pursuit for Robot Path Tracking}</span><span class="p">,</span> 
      <span class="na">author</span><span class="p">=</span><span class="s">{Steve Macenski and Shrijit Singh and Francisco Martin and Jonatan Gines}</span><span class="p">,</span>
      <span class="na">year</span><span class="p">=</span><span class="s">{2023}</span><span class="p">,</span>
      <span class="na">journal</span> <span class="p">=</span> <span class="s">{Autonomous Robots}</span>
<span class="p">}</span>

</code></pre></div></div>

<h2 id="pure-pursuit-basics">Pure Pursuit Basics</h2>

<p>The Pure Pursuit algorithm has been in use for over 30 years. You can read more about the details of the pure pursuit controller in its <a href="http://www.enseignement.polytechnique.fr/profs/informatique/Eric.Goubault/MRIS/coulter_r_craig_1992_1.pdf">introduction paper</a>. The core idea is to find a point on the path in front of the robot and find the linear and angular velocity to help drive towards it. Once it moves forward, a new point is selected, and the process repeats until the end of the path. The distance used to find the point to drive towards is the <code class="language-plaintext highlighter-rouge">lookahead</code> distance.</p>

<p>In order to simply book-keeping, the global path is continuously pruned to the closest point to the robot (see the figure below) so that we only have to process useful path points. Then, the section of the path within the local costmap bounds is transformed to the robot frame and a lookahead point is determined using a predefined distance.</p>

<p>Finally, the lookahead point will be given to the pure pursuit algorithm which finds the curvature of the path required to drive the robot to the lookahead point. This curvature is then applied to the velocity commands to allow the robot to drive.</p>

<p>Note that a pure pursuit controller is that, it “purely” pursues the path without interest or concern about dynamic obstacles. Therefore, this controller should only be used when paired with a path planner that can generate a path the robot can follow. For a circular (or can be treated as circular) robot, this can really be any planner since you can leverage the particle / inflation relationship in planning. For a “large” robot for the environment or general non-circular robots, this must be something kinematically feasible, like the Smac Planner, such that the path is followable.</p>

<p><img src="https://raw.githubusercontent.com/ros-planning/navigation2/iron/nav2_regulated_pure_pursuit_controller/./doc/lookahead_algorithm.png" alt="Lookahead algorithm"></p>

<h2 id="regulated-pure-pursuit-features">Regulated Pure Pursuit Features</h2>

<p>We have created a new variation on the pure pursuit algorithm that we dubb the Regulated Pure Pursuit algorithm. We combine the features of the Adaptive Pure Pursuit algorithm with rules around linear velocity with a focus on consumer, industrial, and service robot’s needs. We also implement several common-sense safety mechanisms like collision detection.</p>

<p>The Regulated Pure Pursuit controller implements active collision detection. We use a parameter to set the maximum allowable time before a potential collision on the current velocity command. Using the current linear and angular velocity, we project forward in time that duration and check for collisions. Intuitively, you may think that collision checking between the robot and the lookahead point seems logical. However, if you’re maneuvering in tight spaces, it makes alot of sense to only search forward a given amount of time to give the system a little leeway to get itself out. In confined spaces especially, we want to make sure that we’re collision checking a reasonable amount of space for the current action being taken (e.g. if moving at 0.1 m/s, it makes no sense to look 10 meters ahead to the carrot, or 100 seconds into the future). This helps look further at higher speeds / angular rotations and closer with fine, slow motions in constrained environments so it doesn’t over report collisions from valid motions near obstacles. If you set the maximum allowable to a large number, it will collision check all the way, but not exceeding, the lookahead point. We visualize the collision checking arc on the <code class="language-plaintext highlighter-rouge">lookahead_arc</code> topic.</p>

<p>The regulated pure pursuit algorithm also makes use of the common variations on the pure pursuit algorithm. We implement the adaptive pure pursuit’s main contribution of having velocity-scaled lookahead point distances. This helps make the controller more stable over a larger range of potential linear velocities. There are parameters for setting the lookahead gain (or lookahead time) and thresholded values for minimum and maximum.</p>

<p>The final minor improvement we make is slowing on approach to the goal. Knowing that the optimal lookahead distance is <code class="language-plaintext highlighter-rouge">X</code>, we can take the difference in <code class="language-plaintext highlighter-rouge">X</code> and the actual distance of the lookahead point found to find the lookahead point error. During operations, the variation in this error should be exceptionally small and won’t be triggered. However, at the end of the path, there are no more points at a lookahead distance away from the robot, so it uses the last point on the path. So as the robot approaches a target, its error will grow and the robot’s velocity will be reduced proportional to this error until a minimum threshold. This is also tracked by the kinematic speed limits to ensure drivability.</p>

<p>The major improvements that this work implements is the regulations on the linear velocity based on some cost functions.  They were selected to remove long-standing bad behavior within the pure pursuit algorithm. Normal Pure Pursuit has an issue with overshoot and poor handling in particularly high curvature (or extremely rapidly changing curvature) environments. It is commonly known that this will cause the robot to overshoot from the path and potentially collide with the environment. These cost functions in the Regulated Pure Pursuit algorithm were also chosen based on common requirements and needs of mobile robots uses in service, commercial, and industrial use-cases; scaling by curvature creates intuitive behavior of slowing the robot when making sharp turns and slowing when its near a potential collision so that small variations don’t clip obstacles. This is also really useful when working in partially observable environments (like turning in and out of aisles / hallways often) so that you slow before a sharp turn into an unknown dynamic environment to be more conservative in case something is in the way immediately requiring a stop.</p>

<p>The cost functions penalize the robot’s speed based on its proximity to obstacles and the curvature of the path. This is helpful to slow the robot when moving close to things in narrow spaces and scaling down the linear velocity by curvature helps to stabilize the controller over a larger range of lookahead point distances. This also has the added benefit of removing the sensitive tuning of the lookahead point / range, as the robot will track paths far better. Tuning is still required, but it is substantially easier to get reasonable behavior with minor adjustments.</p>

<p>An unintended tertiary benefit of scaling the linear velocities by curvature is that a robot will natively rotate to rough path heading when using holonomic planners that don’t start aligned with the robot pose orientation. As the curvature will be very high, the linear velocity drops and the angular velocity takes over to rotate to heading. While not perfect, it does dramatically reduce the need to rotate to a close path heading before following and opens up a broader range of planning techniques. Pure Pursuit controllers otherwise would be completely unable to recover from this in even modestly confined spaces.</p>

<p>Mixing the proximity and curvature regulated linear velocities with the time-scaled collision checker, we see a near-perfect combination allowing the regulated pure pursuit algorithm to handle high starting deviations from the path and navigate collision-free in tight spaces without overshoot.</p>

<p>Note: The maximum allowed time to collision is thresholded by the lookahead point, starting in Humble. This is such that collision checking isn’t significantly overshooting the path, which can cause issues in constrained environments. For example, if there were a straight-line path going towards a wall that then turned left, if this parameter was set to high, then it would detect a collision past the point of actual robot intended motion. Thusly, if a robot is moving fast, selecting further out lookahead points is not only a matter of behavioral stability for Pure Pursuit, but also gives a robot further predictive collision detection capabilities. The max allowable time parameter is still in place for slow commands, as described in detail above.</p>

<h2 id="configuration">Configuration</h2>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">desired_linear_vel</code></td>
      <td>The desired maximum linear velocity to use.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">lookahead_dist</code></td>
      <td>The lookahead distance to use to find the lookahead point</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">min_lookahead_dist</code></td>
      <td>The minimum lookahead distance threshold when using velocity scaled lookahead distances</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">max_lookahead_dist</code></td>
      <td>The maximum lookahead distance threshold when using velocity scaled lookahead distances</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">lookahead_time</code></td>
      <td>The time to project the velocity by to find the velocity scaled lookahead distance. Also known as the lookahead gain.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">rotate_to_heading_angular_vel</code></td>
      <td>If rotate to heading is used, this is the angular velocity to use.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">transform_tolerance</code></td>
      <td>The TF transform tolerance</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_velocity_scaled_lookahead_dist</code></td>
      <td>Whether to use the velocity scaled lookahead distances or constant <code class="language-plaintext highlighter-rouge">lookahead_distance</code>
</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">min_approach_linear_velocity</code></td>
      <td>The minimum velocity threshold to apply when approaching the goal</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">approach_velocity_scaling_dist</code></td>
      <td>Integrated distance from end of transformed path at which to start applying velocity scaling. This defaults to the forward extent of the costmap minus one costmap cell length.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_collision_detection</code></td>
      <td>Whether to enable collision detection.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">max_allowed_time_to_collision_up_to_carrot</code></td>
      <td>The time to project a velocity command to check for collisions when <code class="language-plaintext highlighter-rouge">use_collision_detection</code> is <code class="language-plaintext highlighter-rouge">true</code>. It is limited to maximum distance of lookahead distance selected.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_regulated_linear_velocity_scaling</code></td>
      <td>Whether to use the regulated features for curvature</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_cost_regulated_linear_velocity_scaling</code></td>
      <td>Whether to use the regulated features for proximity to obstacles</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">cost_scaling_dist</code></td>
      <td>The minimum distance from an obstacle to trigger the scaling of linear velocity, if <code class="language-plaintext highlighter-rouge">use_cost_regulated_linear_velocity_scaling</code> is enabled. The value set should be smaller or equal to the <code class="language-plaintext highlighter-rouge">inflation_radius</code> set in the inflation layer of costmap, since inflation is used to compute the distance from obstacles</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">cost_scaling_gain</code></td>
      <td>A multiplier gain, which should be &lt;= 1.0, used to further scale the speed when an obstacle is within <code class="language-plaintext highlighter-rouge">cost_scaling_dist</code>. Lower value reduces speed more quickly.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">inflation_cost_scaling_factor</code></td>
      <td>The value of <code class="language-plaintext highlighter-rouge">cost_scaling_factor</code> set for the inflation layer in the local costmap. The value should be exactly the same for accurately computing distance from obstacles using the inflated cell values</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">regulated_linear_scaling_min_radius</code></td>
      <td>The turning radius for which the regulation features are triggered. Remember, sharper turns have smaller radii</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">regulated_linear_scaling_min_speed</code></td>
      <td>The minimum speed for which the regulated features can send, to ensure process is still achievable even in high cost spaces with high curvature.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_fixed_curvature_lookahead</code></td>
      <td>Enable fixed lookahead for curvature detection. Useful for systems with long lookahead.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">curvature_lookahead_dist</code></td>
      <td>Distance to lookahead to determine curvature for velocity regulation purposes. Only used if <code class="language-plaintext highlighter-rouge">use_fixed_curvature_lookahead</code> is enabled.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_rotate_to_heading</code></td>
      <td>Whether to enable rotating to rough heading and goal orientation when using holonomic planners. Recommended on for all robot types except ackermann, which cannot rotate in place.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">rotate_to_heading_min_angle</code></td>
      <td>The difference in the path orientation and the starting robot orientation to trigger a rotate in place, if <code class="language-plaintext highlighter-rouge">use_rotate_to_heading</code> is enabled.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">max_angular_accel</code></td>
      <td>Maximum allowable angular acceleration while rotating to heading, if enabled</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">max_robot_pose_search_dist</code></td>
      <td>Maximum integrated distance along the path to bound the search for the closest pose to the robot. This is set by default to the maximum costmap extent, so it shouldn’t be set manually unless there are loops within the local costmap.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">use_interpolation</code></td>
      <td>Enables interpolation between poses on the path for lookahead point selection. Helps sparse paths to avoid inducing discontinuous commanded velocities. Set this to false for a potential performance boost, at the expense of smooth control.</td>
    </tr>
  </tbody>
</table>

<p>Example fully-described XML with default parameter values:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>controller_server:
  ros__parameters:
    controller_frequency: 20.0
    min_x_velocity_threshold: 0.001
    min_y_velocity_threshold: 0.5
    min_theta_velocity_threshold: 0.001
    progress_checker_plugins: ["progress_checker"]
    goal_checker_plugins: "goal_checker"
    controller_plugins: ["FollowPath"]

    progress_checker:
      plugin: "nav2_controller::SimpleProgressChecker"
      required_movement_radius: 0.5
      movement_time_allowance: 10.0
    goal_checker:
      plugin: "nav2_controller::SimpleGoalChecker"
      xy_goal_tolerance: 0.25
      yaw_goal_tolerance: 0.25
      stateful: True
    FollowPath:
      plugin: "nav2_regulated_pure_pursuit_controller::RegulatedPurePursuitController"
      desired_linear_vel: 0.5
      lookahead_dist: 0.6
      min_lookahead_dist: 0.3
      max_lookahead_dist: 0.9
      lookahead_time: 1.5
      rotate_to_heading_angular_vel: 1.8
      transform_tolerance: 0.1
      use_velocity_scaled_lookahead_dist: false
      min_approach_linear_velocity: 0.05
      approach_velocity_scaling_dist: 1.0
      use_collision_detection: true
      max_allowed_time_to_collision_up_to_carrot: 1.0
      use_regulated_linear_velocity_scaling: true
      use_cost_regulated_linear_velocity_scaling: false
      regulated_linear_scaling_min_radius: 0.9
      regulated_linear_scaling_min_speed: 0.25
      use_fixed_curvature_lookahead: false
      curvature_lookahead_dist: 1.0
      use_rotate_to_heading: true
      rotate_to_heading_min_angle: 0.785
      max_angular_accel: 3.2
      max_robot_pose_search_dist: 10.0
      use_interpolation: false
      cost_scaling_dist: 0.3
      cost_scaling_gain: 1.0
      inflation_cost_scaling_factor: 3.0

</code></pre></div></div>

<h2 id="topics">Topics</h2>

<table>
  <thead>
    <tr>
      <th>Topic</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">lookahead_point</code></td>
      <td><code class="language-plaintext highlighter-rouge">geometry_msgs/PointStamped</code></td>
      <td>The current lookahead point on the path</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">lookahead_arc</code></td>
      <td><code class="language-plaintext highlighter-rouge">nav_msgs/Path</code></td>
      <td>The drivable arc between the robot and the carrot. Arc length depends on <code class="language-plaintext highlighter-rouge">max_allowed_time_to_collision_up_to_carrot</code>, forward simulating from the robot pose at the commanded <code class="language-plaintext highlighter-rouge">Twist</code> by that time. In a collision state, the last published arc will be the points leading up to, and including, the first point in collision.</td>
    </tr>
  </tbody>
</table>

<p>Note: The <code class="language-plaintext highlighter-rouge">lookahead_arc</code> is also a really great speed indicator, when “full” to carrot or max time, you know you’re at full speed. If 20% less, you can tell the robot is approximately 20% below maximum speed. Think of it as the collision checking bounds but also a speed guage.</p>

<h2 id="notes-to-users">Notes to users</h2>

<p>By default, the <code class="language-plaintext highlighter-rouge">use_cost_regulated_linear_velocity_scaling</code> is set to <code class="language-plaintext highlighter-rouge">false</code> because the generic sandbox environment we have setup is the TB3 world. This is a highly constrained environment so it overly triggers to slow the robot as everywhere has high costs. This is recommended to be set to <code class="language-plaintext highlighter-rouge">true</code> when not working in constantly high-cost spaces.</p>

<p>To tune to get Adaptive Pure Pursuit behaviors, set all boolean parameters to false except <code class="language-plaintext highlighter-rouge">use_velocity_scaled_lookahead_dist</code> and make sure to tune <code class="language-plaintext highlighter-rouge">lookahead_time</code>, <code class="language-plaintext highlighter-rouge">min_lookahead_dist</code> and <code class="language-plaintext highlighter-rouge">max_lookahead_dist</code>.</p>

<p>To tune to get Pure Pursuit behaviors, set all boolean parameters to false and make sure to tune <code class="language-plaintext highlighter-rouge">lookahead_dist</code>.</p>

<p>Currently, there is no rotate to goal behaviors, so it is expected that the path approach orientations are the orientations of the goal or the goal checker has been set with a generous <code class="language-plaintext highlighter-rouge">min_theta_velocity_threshold</code>. Implementations for rotating to goal heading are on the way.</p>

<p>The choice of lookahead distances are highly dependent on robot size, responsiveness, controller update rate, and speed. Please make sure to tune this for your platform, although the <code class="language-plaintext highlighter-rouge">regulated</code> features do largely make heavy tuning of this value unnecessary. If you see wiggling, increase the distance or scale. If it’s not converging as fast to the path as you’d like, decrease it.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <em>No CHANGELOG found.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/nav2_regulated_pure_pursuit_controller/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake#iron">ament_cmake  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_gtest#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_gtest#iron">ament_cmake_gtest  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#iron">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#iron">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_common#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_common#iron">nav2_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_core#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_core#iron">nav2_core  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_util#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_util#iron">nav2_util  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_costmap_2d#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_costmap_2d#iron">nav2_costmap_2d  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#iron">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/geometry_msgs#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/geometry_msgs#iron">geometry_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/nav2_msgs#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/nav2_msgs#iron">nav2_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/pluginlib#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/pluginlib#iron">pluginlib  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/tf2#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/tf2#iron">tf2  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/tf2_geometry_msgs#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/tf2_geometry_msgs#iron">tf2_geometry_msgs  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No direct system dependencies.</em>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/nav2_rotation_shim_controller#iron">nav2_rotation_shim_controller</a></td>
                      <td class="text-center">
                        
                        <a href="/p/nav2_rotation_shim_controller#iron-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/navigation2#iron">navigation2</a></td>
                      <td class="text-center">
                        
                        <a href="/p/navigation2#iron-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <ul>
            
              <li><a href="https://github.com/ros-planning/navigation2/tree/iron/nav2_regulated_pure_pursuit_controller//nav2_regulated_pure_pursuit_controller.xml" target="_blank">nav2_core</a></li>
            
          </ul>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>nav2_regulated_pure_pursuit_controller</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="iron-question-list" class="panel-body" style="display: none;"></div>
      <div id="iron-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/nav2_regulated_pure_pursuit_controller+iron">here</a>.</p>
      </div>
      <div id="iron-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/ros-planning/navigation2.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/iron/p/nav2_regulated_pure_pursuit_controller"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/ros-planning/navigation2/tree/iron/nav2_regulated_pure_pursuit_controller"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>



<script id="question-list-template" type="text/html">
  <p>
    Browse <a href="https://robotics.stackexchange.com/questions/tagged/nav2_regulated_pure_pursuit_controller?tab=Newest">recent questions</a>
    or see the <a href="https://robotics.stackexchange.com/questions/tagged/nav2_regulated_pure_pursuit_controller?tab=Votes">highest voted ones</a>.
  </p>
  
  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">Title</th>
        <th scope="col">Answered?</th>
        <th scope="col">Created</th>
        <th scope="col">Active</th>
      </tr>
    </thead>
    <tbody>
      {{#questions}}
      <tr>
        <th scope="row"><a href="{{link}}">{{title}}</a><br><small>Tags: {{strtags}}</small></th>
        <th>{{answered}}</th>
        <th>{{created}}</th>
        <th>{{active}}</th>
      </tr>
      {{/questions}}
    </tbody>
  </table>
  {{#has_more}}
  <hr>
  <h4>Additional questions are available at
    <a href="https://robotics.stackexchange.com/questions/tagged/{{name}}?tab=Newest">Robotics Stack Exchange</a>
  </h4>
  {{/has_more}}
  
</script>

<script type="text/javascript" src="/js/mustache.js"></script>
<script type="text/javascript">
  jQuery(function() {
    jQuery.getJSON(url="https://api.stackexchange.com/2.3/questions?order=desc&site=robotics" +
                       "&tagged=nav2_regulated_pure_pursuit_controller&pagesize=50&sort=activity")
    .done(function(feed) {
      if (feed.items.length > 0) {
        var question_count_str = (feed.has_more ? '>' : '') + String(feed.items.length)
        const questions = feed.items.map(
          function(question) {
            question.id = Math.round(Math.random() * 99999.0);
            question.created = (new Date(question.creation_date * 1000)).toDateString()
            question.active = (new Date(question.last_activity_date * 1000)).toDateString()
            question.answered = question.is_answered ? "Yes" : "No"
            question.strtags = question.tags.join(' ')
            return question;
          });
        const template = jQuery("#question-list-template").text();
        Mustache.parse(template);
        var rendered = Mustache.render(
          template, 
          { questions: questions,
            has_more: feed.has_more,
            name: "nav2_regulated_pure_pursuit_controller"
          }
        );
      }
      //   TODO(tfoote) Resolve images
      //   jQuery("#-question-list img").each(function() {
      //     if (jQuery(this).attr("src").startsWith("/upfiles")) {
      //        jQuery(this).attr("src", "https://answers.ros.org" + jQuery(this).attr("src"));
      //     }
      //   });
      
      if (feed.items.length > 0) {
        jQuery("#humble-question-list").html(rendered);
        jQuery("#humble-question-list").show();
      } else {
        jQuery("#humble-no-question-list").show();
      }
      jQuery("#humble-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#jazzy-question-list").html(rendered);
        jQuery("#jazzy-question-list").show();
      } else {
        jQuery("#jazzy-no-question-list").show();
      }
      jQuery("#jazzy-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#kilted-question-list").html(rendered);
        jQuery("#kilted-question-list").show();
      } else {
        jQuery("#kilted-no-question-list").show();
      }
      jQuery("#kilted-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#rolling-question-list").html(rendered);
        jQuery("#rolling-question-list").show();
      } else {
        jQuery("#rolling-no-question-list").show();
      }
      jQuery("#rolling-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#github-question-list").html(rendered);
        jQuery("#github-question-list").show();
      } else {
        jQuery("#github-no-question-list").show();
      }
      jQuery("#github-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#noetic-question-list").html(rendered);
        jQuery("#noetic-question-list").show();
      } else {
        jQuery("#noetic-no-question-list").show();
      }
      jQuery("#noetic-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#galactic-question-list").html(rendered);
        jQuery("#galactic-question-list").show();
      } else {
        jQuery("#galactic-no-question-list").show();
      }
      jQuery("#galactic-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#iron-question-list").html(rendered);
        jQuery("#iron-question-list").show();
      } else {
        jQuery("#iron-no-question-list").show();
      }
      jQuery("#iron-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#melodic-question-list").html(rendered);
        jQuery("#melodic-question-list").show();
      } else {
        jQuery("#melodic-no-question-list").show();
      }
      jQuery("#melodic-questions-count").text(question_count_str);
      
    })
    .fail(function(jqxhr, textStatus, error) {
      console.error("Failed to get question data: " + jqxhr.responseText);
      
      jQuery("#humble-get-question-fail").show();
      
      jQuery("#jazzy-get-question-fail").show();
      
      jQuery("#kilted-get-question-fail").show();
      
      jQuery("#rolling-get-question-fail").show();
      
      jQuery("#github-get-question-fail").show();
      
      jQuery("#noetic-get-question-fail").show();
      
      jQuery("#galactic-get-question-fail").show();
      
      jQuery("#iron-get-question-fail").show();
      
      jQuery("#melodic-get-question-fail").show();
      
    });
  });
</script>


<script type="text/javascript">
  $(document).ready(function() {
    setupDistroSwitch("humble");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
