<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Package: v4l2_camera</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/p/v4l2_camera/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top: 20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/?search_packages=true">Packages</a></li>
        <li class="active">v4l2_camera</li>
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-primary" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-primary" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-primary" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-primary" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-primary" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-default" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class=" older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class=" older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class="disabled older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/v4l2_camera">v4l2_camera</a> <small>package from <a style="text-decoration:none" href="/r/v4l2_camera/gitlab-boldhearts-ros2_v4l2_camera">v4l2_camera</a> repo</small>
        </h3>
          
            
            
              <span class="label label-default pkg-label">

v4l2_camera
</span>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/humble/p/v4l2_camera"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://gitlab.com/boldhearts/ros2_v4l2_camera/-/tree/humble/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="humble-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#humble-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#humble-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#humble-deps" data-toggle="tab"><span class="label label-primary">9</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#humble-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#humble-questions" data-toggle="tab"><span id="humble-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="humble-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>0.6.2</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache License 2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://gitlab.com/boldhearts/ros2_v4l2_camera.git">https://gitlab.com/boldhearts/ros2_v4l2_camera.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">humble</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2023-05-02
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/v4l2_camera/#humble-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/v4l2_camera/#humble-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/v4l2_camera/#humble-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            A ROS 2 camera driver using Video4Linux2
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Sander G. van Dijk</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Sander G. van Dijk</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://gitlab.com/boldhearts/ros2_v4l2_camera/-/tree/humble/./README.md" title="Open in git repository">README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="v4l2_camera">v4l2_camera</h1>

<p>A ROS 2 camera driver using Video4Linux2 (V4L2).</p>

<h2 id="features">Features</h2>

<ul>
  <li>Lists and exposes all user-settable controls of your camera as ROS 2
parameters.</li>
  <li>Uses <code class="language-plaintext highlighter-rouge">cv_bridge</code> to convert raw frames to ROS 2 messages, so
supports a wide range of encoding conversions.</li>
  <li>Supports <code class="language-plaintext highlighter-rouge">image_transport</code> to enable compression.</li>
  <li>Supports composing the camera node and using ROS 2 intra-process
commmunication with zero-copy messaging.</li>
</ul>

<h2 id="supported-cameras">Supported Cameras</h2>

<p>The package should work with any camera that properly supports V4L2,
which for instance should include most USB cameras. A good way to
check your camera is to install the <code class="language-plaintext highlighter-rouge">v4l2-utils</code> package (on Debian
based systems), and run the <code class="language-plaintext highlighter-rouge">v4l2-compliance</code> tool. If that reports
no, or limited amounts of, failures or warnings, you should be good to
go.</p>

<p>The following cameras have in any case been proven to work:</p>

<table>
  <thead>
    <tr>
      <th>Brand</th>
      <th>Type</th>
      <th>Driver</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Logitech</td>
      <td>C920</td>
      <td><code class="language-plaintext highlighter-rouge">uvcvideo</code></td>
      <td> </td>
    </tr>
    <tr>
      <td>Logitech</td>
      <td>BRIO 4K Pro</td>
      <td><code class="language-plaintext highlighter-rouge">uvcvideo</code></td>
      <td> </td>
    </tr>
    <tr>
      <td>Microdia</td>
      <td>Integrated Webcam HD</td>
      <td><code class="language-plaintext highlighter-rouge">uvcvideo</code></td>
      <td>Integrated laptop camera, e.g. Dell XPS series</td>
    </tr>
    <tr>
      <td>Raspberry Pi</td>
      <td>Camera Module V2 (Noir)</td>
      <td><code class="language-plaintext highlighter-rouge">bm2835 mmal</code></td>
      <td>See Raspberry Pi Support notes below</td>
    </tr>
  </tbody>
</table>

<p>Do let us know about other devices you successfully use this driver
for, for instance through a merge request.</p>

<h3 id="raspberry-pi-support">Raspberry Pi Support</h3>

<p>Raspberry Pi has moved to a <a href="https://www.raspberrypi.com/news/an-open-source-camera-stack-for-raspberry-pi-using-libcamera/">new camera stack based on
libcamera</a>. As
part of this, by default the Broadcom Unicam driver will be loaded for
Raspberry Pi camera modules. This is still a V4L2 driver, however it
has a very limited scope and only provides raw Bayer images. Any
available Image Signal Processors, that can turn those raw images into
more useful formats such as RGB or JPEG, are now exposed as separate
V4L2 devices. This means that responsibility is pushed to an
application such as <code class="language-plaintext highlighter-rouge">v4l2_camera</code> to operate the multiple devices,
rather than the single all-in-one device that most other V4L2 drivers
expose. Supporting this is out of scope of this package.</p>

<p>You can find out whether the Unicam driver is used by installing the
<code class="language-plaintext highlighter-rouge">v4l-utils</code> package, running:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>v4l2-ctl <span class="nt">-D</span>

</code></pre></div></div>
<p>and checking for <code class="language-plaintext highlighter-rouge">bcm2835-unicam</code>. You can also install and run the
<code class="language-plaintext highlighter-rouge">v4l2_camera</code> node, which mentions<code class="language-plaintext highlighter-rouge">unicam</code> as part of the driver name.</p>

<p>Luckily, for at least some devices, it is possible to load the legacy
driver instead of the new Unicam driver, by <a href="https://www.raspberrypi.com/documentation/computers/config_txt.html">changing settings in the
<code class="language-plaintext highlighter-rouge">/boot/config.txt</code>
file</a>:</p>
<ul>
  <li>Set
<a href="https://www.raspberrypi.com/documentation/computers/config_txt.html#camera_auto_detect"><code class="language-plaintext highlighter-rouge">camera_autodetect=0</code></a>
to prevent hardware overlays that use the Unicam driver to be
loaded.</li>
  <li>Set
<a href="https://www.raspberrypi.com/documentation/computers/config_txt.html#start_x-start_debug"><code class="language-plaintext highlighter-rouge">start_x=1</code></a>
to enable the camera using the legacy driver.</li>
</ul>

<p>Now when you reboot and run <code class="language-plaintext highlighter-rouge">v4l2-ctl -D</code> again, or the <code class="language-plaintext highlighter-rouge">v4l2_camera</code>
node, you should see the driver being referred to as <code class="language-plaintext highlighter-rouge">bm2835 mmal</code>
instead. The <code class="language-plaintext highlighter-rouge">v4l2_camera</code> node should then operate as normal.</p>

<h2 id="installation">Installation</h2>

<h3 id="ros-package-install">ROS package install</h3>
<p>This package is available from the ROS package repositories and can
therefore be installed with the following command and your ROS version
name:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>ros-<span class="k">${</span><span class="nv">ROS_DISTRO</span><span class="k">}</span><span class="nt">-v4l2-camera</span>

</code></pre></div></div>

<h3 id="building-from-source">Building from source</h3>
<p>To build this package from source, simply clone this repository into
your workspace, install dependencies, and build it using <code class="language-plaintext highlighter-rouge">colcon</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone <span class="nt">--branch</span> <span class="k">${</span><span class="nv">ROS_DISTRO</span><span class="k">}</span> https://gitlab.com/boldhearts/ros2_v4l2_camera.git src/v4l2_camera
rosdep <span class="nb">install</span> <span class="nt">--from-paths</span> src/v4l2_camera <span class="nt">--ignore-src</span> <span class="nt">-r</span> <span class="nt">-y</span>
colcon build

</code></pre></div></div>

<p>That should be sufficient in most cases, but <a href="https://medium.com/swlh/raspberry-pi-ros-2-camera-eef8f8b94304">this
article</a>
goes into further detail. It focuses on Raspberry Pi OS with the
Raspberry Pi Camera Module V2, but the steps should be generally
applicable.</p>

<h3 id="basic-usage">Basic Usage</h3>
<p>Run the camera node to publish camera images, using the default
parameters:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run v4l2_camera v4l2_camera_node

</code></pre></div></div>

<p>You can use <code class="language-plaintext highlighter-rouge">rqt-image-view</code> to preview the images (open another terminal):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>ros-<span class="k">${</span><span class="nv">ROS_DISTRO</span><span class="k">}</span><span class="nt">-rqt-image-view</span>
ros2 run rqt_image_view rqt_image_view

</code></pre></div></div>

<h2 id="nodes">Nodes</h2>

<h3 id="v4l2_camera_node">v4l2_camera_node</h3>

<p>The <code class="language-plaintext highlighter-rouge">v4l2_camera_node</code> interfaces with standard V4L2 devices and
publishes images as <code class="language-plaintext highlighter-rouge">sensor_msgs/Image</code> messages.</p>

<h4 id="published-topics">Published Topics</h4>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">/image_raw</code> - <code class="language-plaintext highlighter-rouge">sensor_msgs/Image</code></p>

    <p>The image.</p>
  </li>
</ul>

<h4 id="parameters">Parameters</h4>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">video_device</code> - <code class="language-plaintext highlighter-rouge">string</code>, default: <code class="language-plaintext highlighter-rouge">"/dev/video0"</code></p>

    <p>The device the camera is on.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">pixel_format</code> - <code class="language-plaintext highlighter-rouge">string</code>, default: <code class="language-plaintext highlighter-rouge">"YUYV"</code></p>

    <p>The pixel format to request from the camera. Must be a valid four
  character ‘<a href="http://fourcc.org/">FOURCC</a>’ code <a href="https://linuxtv.org/downloads/v4l-dvb-apis/uapi/v4l/videodev.html">supported by
  V4L2</a>
  and by your camera. The node outputs the available formats
  supported by your camera when started.
  Currently supported: <code class="language-plaintext highlighter-rouge">"YUYV"</code>, <code class="language-plaintext highlighter-rouge">"UYVY"</code>, or <code class="language-plaintext highlighter-rouge">"GREY"</code></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">output_encoding</code> - <code class="language-plaintext highlighter-rouge">string</code>, default: <code class="language-plaintext highlighter-rouge">"rgb8"</code></p>

    <p>The encoding to use for the output image. Can be any supported by
  <code class="language-plaintext highlighter-rouge">cv_bridge</code> given the input pixel format. Currently these are:</p>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">"YUYV"</code>: <code class="language-plaintext highlighter-rouge">"yuv422_yuy2"</code> (no conversion), or <code class="language-plaintext highlighter-rouge">"mono8"</code>, <code class="language-plaintext highlighter-rouge">"rgb8"</code>,
  <code class="language-plaintext highlighter-rouge">"bgr8"</code>, <code class="language-plaintext highlighter-rouge">"rgba8"</code> and <code class="language-plaintext highlighter-rouge">"bgra8"</code>, plus their 16 bit variants</li>
      <li>
<code class="language-plaintext highlighter-rouge">"UYVY"</code>: <code class="language-plaintext highlighter-rouge">"yuv422"</code> (no conversion), or <code class="language-plaintext highlighter-rouge">"mono8"</code>, <code class="language-plaintext highlighter-rouge">"rgb8"</code>,
  <code class="language-plaintext highlighter-rouge">"bgr8"</code>, <code class="language-plaintext highlighter-rouge">"rgba8"</code> and <code class="language-plaintext highlighter-rouge">"bgra8"</code>, plus their 16 bit variants</li>
      <li>
<code class="language-plaintext highlighter-rouge">"GREY"</code>: <code class="language-plaintext highlighter-rouge">"mono8"</code> (no conversion), <code class="language-plaintext highlighter-rouge">"rgb8"</code>,
  <code class="language-plaintext highlighter-rouge">"bgr8"</code>, <code class="language-plaintext highlighter-rouge">"rgba8"</code> and <code class="language-plaintext highlighter-rouge">"bgra8"</code>, plus their 16 bit variants</li>
    </ul>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">image_size</code> - <code class="language-plaintext highlighter-rouge">integer_array</code>, default: <code class="language-plaintext highlighter-rouge">[640, 480]</code></p>

    <p>Width and height of the image.</p>
  </li>
  <li>
    <p>Camera Control Parameters</p>

    <p>Camera controls, such as brightness, contrast, white balance, etc,
  are automatically made available as parameters. The driver node
  enumerates all controls, and creates a parameter for each, with
  the corresponding value type. The parameter name is derived from
  the control name reported by the camera driver, made lower case,
  commas removed, and spaces replaced by underscores. So
  <code class="language-plaintext highlighter-rouge">Brightness</code> becomes <code class="language-plaintext highlighter-rouge">brightness</code>, and <code class="language-plaintext highlighter-rouge">White Balance, Automatic</code>
  becomes <code class="language-plaintext highlighter-rouge">white_balance_automatic</code>.</p>
  </li>
</ul>

<h2 id="compressed-transport">Compressed Transport</h2>

<p>This package uses <code class="language-plaintext highlighter-rouge">image_transport</code> to publish images and make
compression possible. However, by default it only supports raw
transfer, additional plugins are required to enable compression. These
need to be installed separately, either cloning an building <a href="https://github.com/ros-perception/image_transport_plugins">them from
source</a>, or
installing the ready made package:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>ros-<span class="k">${</span><span class="nv">ROS_DISTRO</span><span class="k">}</span><span class="nt">-image-transport-plugins</span>

</code></pre></div></div>

<p>Once installed, they will be automatically used by the driver and
additional topics will be available, including
<code class="language-plaintext highlighter-rouge">/image_raw/compressed</code>.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-v4l2_camera">Changelog for package v4l2_camera</h1>

<h2 id="062-2023-05-02">0.6.2 (2023-05-02)</h2>

<ul>
  <li>Don't re-queue buffer before getting the data</li>
  <li>Break out parameter handler into separate class, reducing
unnecessary startup warnings.</li>
  <li>Add UYVY pixel format</li>
  <li>Contributors: Martin Fraunhofer, Sander G. van Dijk</li>
</ul>

<h2 id="060-2022-09-04">0.6.0 (2022-09-04)</h2>

<ul>
  <li>Use cv_bridge to perform conversions</li>
  <li>Fix: Image topic should be image_raw, not raw_image, in README.md</li>
  <li>Fix: Properly declare camera_info_url parameter</li>
  <li>Contributors: Marcus M. Scheunemann, Sander G. van Dijk, ijnek</li>
</ul>

<h2 id="050-2022-08-06">0.5.0 (2022-08-06)</h2>

<ul>
  <li>Add time_per_frame parameter to adjust frame rate</li>
  <li>Fix: use 64 bit integers to store control valueas and ranges</li>
  <li>Contributors: Marcus M. Scheunemann, Sander G. van Dijk</li>
</ul>

<h2 id="040-2021-01-29">0.4.0 (2021-01-29)</h2>

<ul>
  <li>Read-only parameters as now properly marked as such</li>
  <li>Use C-style strings for logging macros to adapt to new formatting
constraints See:
<a href="https://index.ros.org/doc/ros2/Releases/Release-Galactic-Geochelone/#change-in-rclcpp-s-logging-macros">https://index.ros.org/doc/ros2/Releases/Release-Galactic-Geochelone/#change-in-rclcpp-s-logging-macros</a>
</li>
  <li>Add support monochrome cameras</li>
  <li>Contributors: Chris Lalancette, Sander G. van Dijk, nfry321</li>
</ul>

<h2 id="031-2020-11-07">0.3.1 (2020-11-07)</h2>

<ul>
  <li>Handle non discrete frame sizes; fixes support for Raspberry Pi +
Camera Module</li>
  <li>Contributors: Sander G. van Dijk</li>
</ul>

<h2 id="030-2020-09-26">0.3.0 (2020-09-26)</h2>

<ul>
  <li>Publishing is done on private topics to enable remapping of the
namespace</li>
  <li>CameraInfo is published in intra-process communication mode</li>
  <li>Added parameter descriptions</li>
  <li>Contributors: Christian Rauch, Marcus M. Scheunemann, Sander G. van
Dijk</li>
</ul>

<h2 id="021-2020-08-06">0.2.1 (2020-08-06)</h2>

<ul>
  <li>Hold reference to parameters callback handle</li>
  <li>Contributors: Jacob Perron</li>
</ul>

<h2 id="020-2020-06-13">0.2.0 (2020-06-13)</h2>

<ul>
  <li>Set frame_id on published images, default to "camera"</li>
  <li>Output FOURCC code of available formats</li>
  <li>Add parameter for setting the pixel format Default to using YUYV</li>
  <li>Contributors: Sander G. van Dijk</li>
</ul>

<h2 id="011-2019-08-12">0.1.1 (2019-08-12)</h2>

<ul>
  <li>Add missing rclcpp_components build dependency</li>
  <li>Contributors: Sander G. van Dijk</li>
</ul>

<h2 id="010-2019-08-11">0.1.0 (2019-08-11)</h2>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/v4l2_camera/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#humble">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp_components#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp_components#humble">rclcpp_components  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_ros#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_ros#humble">ament_cmake_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#humble">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#humble">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/sensor_msgs#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/sensor_msgs#humble">sensor_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/camera_info_manager#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/camera_info_manager#humble">camera_info_manager  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/cv_bridge#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/cv_bridge#humble">cv_bridge  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/image_transport#humble-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/image_transport#humble">image_transport  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No direct system dependencies.</em>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/leo_bringup#humble">leo_bringup</a></td>
                      <td class="text-center">
                        
                        <a href="/p/leo_bringup#humble-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/andino_bringup#humble">andino_bringup</a></td>
                      <td class="text-center">
                        
                        <a href="/p/andino_bringup#humble-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>v4l2_camera</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="humble-question-list" class="panel-body" style="display: none;"></div>
      <div id="humble-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/v4l2_camera+humble">here</a>.</p>
      </div>
      <div id="humble-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://gitlab.com/boldhearts/ros2_v4l2_camera.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/humble/p/v4l2_camera"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://gitlab.com/boldhearts/ros2_v4l2_camera/-/tree/humble/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/v4l2_camera">v4l2_camera</a> <small>package from <a style="text-decoration:none" href="/r/v4l2_camera/gitlab-boldhearts-ros2_v4l2_camera">v4l2_camera</a> repo</small>
        </h3>
          
            
            
              <span class="label label-default pkg-label">

v4l2_camera
</span>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/jazzy/p/v4l2_camera"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://gitlab.com/boldhearts/ros2_v4l2_camera/-/tree/rolling/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="jazzy-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#jazzy-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#jazzy-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#jazzy-deps" data-toggle="tab"><span class="label label-primary">9</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#jazzy-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#jazzy-questions" data-toggle="tab"><span id="jazzy-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="jazzy-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>0.7.1</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache License 2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://gitlab.com/boldhearts/ros2_v4l2_camera.git">https://gitlab.com/boldhearts/ros2_v4l2_camera.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">rolling</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-04-30
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/v4l2_camera/#jazzy-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/v4l2_camera/#jazzy-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/v4l2_camera/#jazzy-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            A ROS 2 camera driver using Video4Linux2
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Sander G. van Dijk</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Sander G. van Dijk</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://gitlab.com/boldhearts/ros2_v4l2_camera/-/tree/rolling/./README.md" title="Open in git repository">README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="v4l2_camera">v4l2_camera</h1>

<p>A ROS 2 camera driver using Video4Linux2 (V4L2).</p>

<h2 id="features">Features</h2>

<ul>
  <li>Lists and exposes all user-settable controls of your camera as ROS 2
parameters.</li>
  <li>Uses <code class="language-plaintext highlighter-rouge">cv_bridge</code> to convert raw frames to ROS 2 messages, so
supports a wide range of encoding conversions.</li>
  <li>Supports <code class="language-plaintext highlighter-rouge">image_transport</code> to enable compression.</li>
  <li>Supports composing the camera node and using ROS 2 intra-process
commmunication with zero-copy messaging.</li>
</ul>

<h2 id="supported-cameras">Supported Cameras</h2>

<p>The package should work with any camera that properly supports V4L2,
which for instance should include most USB cameras. A good way to
check your camera is to install the <code class="language-plaintext highlighter-rouge">v4l2-utils</code> package (on Debian
based systems), and run the <code class="language-plaintext highlighter-rouge">v4l2-compliance</code> tool. If that reports
no, or limited amounts of, failures or warnings, you should be good to
go.</p>

<p>The following cameras have in any case been proven to work:</p>

<table>
  <thead>
    <tr>
      <th>Brand</th>
      <th>Type</th>
      <th>Driver</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Logitech</td>
      <td>C920</td>
      <td><code class="language-plaintext highlighter-rouge">uvcvideo</code></td>
      <td> </td>
    </tr>
    <tr>
      <td>Logitech</td>
      <td>BRIO 4K Pro</td>
      <td><code class="language-plaintext highlighter-rouge">uvcvideo</code></td>
      <td> </td>
    </tr>
    <tr>
      <td>Microdia</td>
      <td>Integrated Webcam HD</td>
      <td><code class="language-plaintext highlighter-rouge">uvcvideo</code></td>
      <td>Integrated laptop camera, e.g. Dell XPS series</td>
    </tr>
    <tr>
      <td>Raspberry Pi</td>
      <td>Camera Module V2 (Noir)</td>
      <td><code class="language-plaintext highlighter-rouge">bm2835 mmal</code></td>
      <td>See Raspberry Pi Support notes below</td>
    </tr>
  </tbody>
</table>

<p>Do let us know about other devices you successfully use this driver
for, for instance through a merge request.</p>

<h3 id="raspberry-pi-support">Raspberry Pi Support</h3>

<p>Raspberry Pi has moved to a <a href="https://www.raspberrypi.com/news/an-open-source-camera-stack-for-raspberry-pi-using-libcamera/">new camera stack based on
libcamera</a>. As
part of this, by default the Broadcom Unicam driver will be loaded for
Raspberry Pi camera modules. This is still a V4L2 driver, however it
has a very limited scope and only provides raw Bayer images. Any
available Image Signal Processors, that can turn those raw images into
more useful formats such as RGB or JPEG, are now exposed as separate
V4L2 devices. This means that responsibility is pushed to an
application such as <code class="language-plaintext highlighter-rouge">v4l2_camera</code> to operate the multiple devices,
rather than the single all-in-one device that most other V4L2 drivers
expose. Supporting this is out of scope of this package.</p>

<p>You can find out whether the Unicam driver is used by installing the
<code class="language-plaintext highlighter-rouge">v4l-utils</code> package, running:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>v4l2-ctl <span class="nt">-D</span>

</code></pre></div></div>
<p>and checking for <code class="language-plaintext highlighter-rouge">bcm2835-unicam</code>. You can also install and run the
<code class="language-plaintext highlighter-rouge">v4l2_camera</code> node, which mentions<code class="language-plaintext highlighter-rouge">unicam</code> as part of the driver name.</p>

<p>Luckily, for at least some devices, it is possible to load the legacy
driver instead of the new Unicam driver, by <a href="https://www.raspberrypi.com/documentation/computers/config_txt.html">changing settings in the
<code class="language-plaintext highlighter-rouge">/boot/config.txt</code>
file</a>:</p>
<ul>
  <li>Set
<a href="https://www.raspberrypi.com/documentation/computers/config_txt.html#camera_auto_detect"><code class="language-plaintext highlighter-rouge">camera_autodetect=0</code></a>
to prevent hardware overlays that use the Unicam driver to be
loaded.</li>
  <li>Set
<a href="https://www.raspberrypi.com/documentation/computers/config_txt.html#start_x-start_debug"><code class="language-plaintext highlighter-rouge">start_x=1</code></a>
to enable the camera using the legacy driver.</li>
</ul>

<p>Now when you reboot and run <code class="language-plaintext highlighter-rouge">v4l2-ctl -D</code> again, or the <code class="language-plaintext highlighter-rouge">v4l2_camera</code>
node, you should see the driver being referred to as <code class="language-plaintext highlighter-rouge">bm2835 mmal</code>
instead. The <code class="language-plaintext highlighter-rouge">v4l2_camera</code> node should then operate as normal.</p>

<h2 id="installation">Installation</h2>

<h3 id="ros-package-install">ROS package install</h3>
<p>This package is available from the ROS package repositories and can
therefore be installed with the following command and your ROS version
name:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>ros-<span class="k">${</span><span class="nv">ROS_DISTRO</span><span class="k">}</span><span class="nt">-v4l2-camera</span>

</code></pre></div></div>

<h3 id="building-from-source">Building from source</h3>
<p>To build this package from source, simply clone this repository into
your workspace, install dependencies, and build it using <code class="language-plaintext highlighter-rouge">colcon</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone <span class="nt">--branch</span> <span class="k">${</span><span class="nv">ROS_DISTRO</span><span class="k">}</span> https://gitlab.com/boldhearts/ros2_v4l2_camera.git src/v4l2_camera
rosdep <span class="nb">install</span> <span class="nt">--from-paths</span> src/v4l2_camera <span class="nt">--ignore-src</span> <span class="nt">-r</span> <span class="nt">-y</span>
colcon build

</code></pre></div></div>

<p>That should be sufficient in most cases, but <a href="https://medium.com/swlh/raspberry-pi-ros-2-camera-eef8f8b94304">this
article</a>
goes into further detail. It focuses on Raspberry Pi OS with the
Raspberry Pi Camera Module V2, but the steps should be generally
applicable.</p>

<h3 id="basic-usage">Basic Usage</h3>
<p>Run the camera node to publish camera images, using the default
parameters:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run v4l2_camera v4l2_camera_node

</code></pre></div></div>

<p>You can use <code class="language-plaintext highlighter-rouge">rqt-image-view</code> to preview the images (open another terminal):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>ros-<span class="k">${</span><span class="nv">ROS_DISTRO</span><span class="k">}</span><span class="nt">-rqt-image-view</span>
ros2 run rqt_image_view rqt_image_view

</code></pre></div></div>

<h2 id="nodes">Nodes</h2>

<h3 id="v4l2_camera_node">v4l2_camera_node</h3>

<p>The <code class="language-plaintext highlighter-rouge">v4l2_camera_node</code> interfaces with standard V4L2 devices and
publishes images as <code class="language-plaintext highlighter-rouge">sensor_msgs/Image</code> messages.</p>

<h4 id="published-topics">Published Topics</h4>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">/image_raw</code> - <code class="language-plaintext highlighter-rouge">sensor_msgs/Image</code></p>

    <p>The image.</p>
  </li>
</ul>

<h4 id="parameters">Parameters</h4>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">video_device</code> - <code class="language-plaintext highlighter-rouge">string</code>, default: <code class="language-plaintext highlighter-rouge">"/dev/video0"</code></p>

    <p>The device the camera is on.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">pixel_format</code> - <code class="language-plaintext highlighter-rouge">string</code>, default: <code class="language-plaintext highlighter-rouge">"YUYV"</code></p>

    <p>The pixel format to request from the camera. Must be a valid four
  character ‘<a href="http://fourcc.org/">FOURCC</a>’ code <a href="https://linuxtv.org/downloads/v4l-dvb-apis/uapi/v4l/videodev.html">supported by
  V4L2</a>
  and by your camera. The node outputs the available formats
  supported by your camera when started.
  Currently supported: <code class="language-plaintext highlighter-rouge">"YUYV"</code>, <code class="language-plaintext highlighter-rouge">"UYVY"</code>, or <code class="language-plaintext highlighter-rouge">"GREY"</code></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">output_encoding</code> - <code class="language-plaintext highlighter-rouge">string</code>, default: <code class="language-plaintext highlighter-rouge">"rgb8"</code></p>

    <p>The encoding to use for the output image. Can be any supported by
  <code class="language-plaintext highlighter-rouge">cv_bridge</code> given the input pixel format. Currently these are:</p>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">"YUYV"</code>: <code class="language-plaintext highlighter-rouge">"yuv422_yuy2"</code> (no conversion), or <code class="language-plaintext highlighter-rouge">"mono8"</code>, <code class="language-plaintext highlighter-rouge">"rgb8"</code>,
  <code class="language-plaintext highlighter-rouge">"bgr8"</code>, <code class="language-plaintext highlighter-rouge">"rgba8"</code> and <code class="language-plaintext highlighter-rouge">"bgra8"</code>, plus their 16 bit variants</li>
      <li>
<code class="language-plaintext highlighter-rouge">"UYVY"</code>: <code class="language-plaintext highlighter-rouge">"yuv422"</code> (no conversion), or <code class="language-plaintext highlighter-rouge">"mono8"</code>, <code class="language-plaintext highlighter-rouge">"rgb8"</code>,
  <code class="language-plaintext highlighter-rouge">"bgr8"</code>, <code class="language-plaintext highlighter-rouge">"rgba8"</code> and <code class="language-plaintext highlighter-rouge">"bgra8"</code>, plus their 16 bit variants</li>
      <li>
<code class="language-plaintext highlighter-rouge">"GREY"</code>: <code class="language-plaintext highlighter-rouge">"mono8"</code> (no conversion), <code class="language-plaintext highlighter-rouge">"rgb8"</code>,
  <code class="language-plaintext highlighter-rouge">"bgr8"</code>, <code class="language-plaintext highlighter-rouge">"rgba8"</code> and <code class="language-plaintext highlighter-rouge">"bgra8"</code>, plus their 16 bit variants</li>
    </ul>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">image_size</code> - <code class="language-plaintext highlighter-rouge">integer_array</code>, default: <code class="language-plaintext highlighter-rouge">[640, 480]</code></p>

    <p>Width and height of the image.</p>
  </li>
  <li>
    <p>Camera Control Parameters</p>

    <p>Camera controls, such as brightness, contrast, white balance, etc,
  are automatically made available as parameters. The driver node
  enumerates all controls, and creates a parameter for each, with
  the corresponding value type. The parameter name is derived from
  the control name reported by the camera driver, made lower case,
  commas removed, and spaces replaced by underscores. So
  <code class="language-plaintext highlighter-rouge">Brightness</code> becomes <code class="language-plaintext highlighter-rouge">brightness</code>, and <code class="language-plaintext highlighter-rouge">White Balance, Automatic</code>
  becomes <code class="language-plaintext highlighter-rouge">white_balance_automatic</code>.</p>
  </li>
</ul>

<h2 id="compressed-transport">Compressed Transport</h2>

<p>This package uses <code class="language-plaintext highlighter-rouge">image_transport</code> to publish images and make
compression possible. However, by default it only supports raw
transfer, additional plugins are required to enable compression. These
need to be installed separately, either cloning an building <a href="https://github.com/ros-perception/image_transport_plugins">them from
source</a>, or
installing the ready made package:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>ros-<span class="k">${</span><span class="nv">ROS_DISTRO</span><span class="k">}</span><span class="nt">-image-transport-plugins</span>

</code></pre></div></div>

<p>Once installed, they will be automatically used by the driver and
additional topics will be available, including
<code class="language-plaintext highlighter-rouge">/image_raw/compressed</code>.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-v4l2_camera">Changelog for package v4l2_camera</h1>

<h2 id="071-2024-04-30">0.7.1 (2024-04-30)</h2>

<ul>
  <li>Fix deprecated cv_bridge header</li>
  <li>Avoid unnecessary memory operations by using std::vector::assign()</li>
  <li>Add camera frame id to camera info message</li>
  <li>Contributors: Błażej Sowa, Martin Fraunhofer, Muzhyk Belarus,
Sander G. van Dijk</li>
</ul>

<h2 id="070-2023-05-01">0.7.0 (2023-05-01)</h2>

<ul>
  <li>Don't re-queue buffer before getting the data</li>
  <li>Break out parameter handler into separate class, reducing
unnecessary startup warnings.</li>
  <li>Add UYVY pixel format</li>
  <li>Contributors: Martin Fraunhofer, Sander G. van Dijk</li>
</ul>

<h2 id="061-2022-10-08">0.6.1 (2022-10-08)</h2>

<ul>
  <li>Rename include to resolve deprecation warning.</li>
  <li>Contributors: Sander G. van Dijk, Steven! Ragnarök</li>
</ul>

<h2 id="060-2022-09-04">0.6.0 (2022-09-04)</h2>

<ul>
  <li>Use cv_bridge to perform conversions</li>
  <li>Fix: Image topic should be image_raw, not raw_image, in README.md</li>
  <li>Fix: Properly declare camera_info_url parameter</li>
  <li>Contributors: Marcus M. Scheunemann, Sander G. van Dijk, ijnek</li>
</ul>

<h2 id="050-2022-08-06">0.5.0 (2022-08-06)</h2>

<ul>
  <li>Add time_per_frame parameter to adjust frame rate</li>
  <li>Fix: use 64 bit integers to store control valueas and ranges</li>
  <li>Contributors: Marcus M. Scheunemann, Sander G. van Dijk</li>
</ul>

<h2 id="040-2021-01-29">0.4.0 (2021-01-29)</h2>

<ul>
  <li>Read-only parameters as now properly marked as such</li>
  <li>Use C-style strings for logging macros to adapt to new formatting
constraints See:
<a href="https://index.ros.org/doc/ros2/Releases/Release-Galactic-Geochelone/#change-in-rclcpp-s-logging-macros">https://index.ros.org/doc/ros2/Releases/Release-Galactic-Geochelone/#change-in-rclcpp-s-logging-macros</a>
</li>
  <li>Add support monochrome cameras</li>
  <li>Contributors: Chris Lalancette, Sander G. van Dijk, nfry321</li>
</ul>

<h2 id="031-2020-11-07">0.3.1 (2020-11-07)</h2>

<ul>
  <li>Handle non discrete frame sizes; fixes support for Raspberry Pi +
Camera Module</li>
  <li>Contributors: Sander G. van Dijk</li>
</ul>

<h2 id="030-2020-09-26">0.3.0 (2020-09-26)</h2>

<ul>
  <li>Publishing is done on private topics to enable remapping of the
namespace</li>
  <li>CameraInfo is published in intra-process communication mode</li>
  <li>Added parameter descriptions</li>
  <li>Contributors: Christian Rauch, Marcus M. Scheunemann, Sander G. van
Dijk</li>
</ul>

<h2 id="021-2020-08-06">0.2.1 (2020-08-06)</h2>

<ul>
  <li>Hold reference to parameters callback handle</li>
  <li>Contributors: Jacob Perron</li>
</ul>

<h2 id="020-2020-06-13">0.2.0 (2020-06-13)</h2>

<ul>
  <li>Set frame_id on published images, default to "camera"</li>
  <li>Output FOURCC code of available formats</li>
  <li>Add parameter for setting the pixel format Default to using YUYV</li>
  <li>Contributors: Sander G. van Dijk</li>
</ul>

<h2 id="011-2019-08-12">0.1.1 (2019-08-12)</h2>

<ul>
  <li>Add missing rclcpp_components build dependency</li>
  <li>Contributors: Sander G. van Dijk</li>
</ul>

<h2 id="010-2019-08-11">0.1.0 (2019-08-11)</h2>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/v4l2_camera/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#jazzy">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp_components#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp_components#jazzy">rclcpp_components  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_ros#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_ros#jazzy">ament_cmake_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#jazzy">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#jazzy">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/sensor_msgs#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/sensor_msgs#jazzy">sensor_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/camera_info_manager#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/camera_info_manager#jazzy">camera_info_manager  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/cv_bridge#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/cv_bridge#jazzy">cv_bridge  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/image_transport#jazzy-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/image_transport#jazzy">image_transport  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No direct system dependencies.</em>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <em>No known dependants.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>v4l2_camera</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="jazzy-question-list" class="panel-body" style="display: none;"></div>
      <div id="jazzy-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/v4l2_camera+jazzy">here</a>.</p>
      </div>
      <div id="jazzy-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://gitlab.com/boldhearts/ros2_v4l2_camera.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/jazzy/p/v4l2_camera"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://gitlab.com/boldhearts/ros2_v4l2_camera/-/tree/rolling/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/v4l2_camera">v4l2_camera</a> <small>package from <a style="text-decoration:none" href="/r/v4l2_camera/gitlab-boldhearts-ros2_v4l2_camera">v4l2_camera</a> repo</small>
        </h3>
          
            
            
              <span class="label label-default pkg-label">

v4l2_camera
</span>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/kilted/p/v4l2_camera"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://gitlab.com/boldhearts/ros2_v4l2_camera/-/tree/rolling/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="kilted-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#kilted-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#kilted-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#kilted-deps" data-toggle="tab"><span class="label label-primary">9</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#kilted-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#kilted-questions" data-toggle="tab"><span id="kilted-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="kilted-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>0.7.1</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache License 2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://gitlab.com/boldhearts/ros2_v4l2_camera.git">https://gitlab.com/boldhearts/ros2_v4l2_camera.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">rolling</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-04-30
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/v4l2_camera/#kilted-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/v4l2_camera/#kilted-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/v4l2_camera/#kilted-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            A ROS 2 camera driver using Video4Linux2
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Sander G. van Dijk</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Sander G. van Dijk</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://gitlab.com/boldhearts/ros2_v4l2_camera/-/tree/rolling/./README.md" title="Open in git repository">README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="v4l2_camera">v4l2_camera</h1>

<p>A ROS 2 camera driver using Video4Linux2 (V4L2).</p>

<h2 id="features">Features</h2>

<ul>
  <li>Lists and exposes all user-settable controls of your camera as ROS 2
parameters.</li>
  <li>Uses <code class="language-plaintext highlighter-rouge">cv_bridge</code> to convert raw frames to ROS 2 messages, so
supports a wide range of encoding conversions.</li>
  <li>Supports <code class="language-plaintext highlighter-rouge">image_transport</code> to enable compression.</li>
  <li>Supports composing the camera node and using ROS 2 intra-process
commmunication with zero-copy messaging.</li>
</ul>

<h2 id="supported-cameras">Supported Cameras</h2>

<p>The package should work with any camera that properly supports V4L2,
which for instance should include most USB cameras. A good way to
check your camera is to install the <code class="language-plaintext highlighter-rouge">v4l2-utils</code> package (on Debian
based systems), and run the <code class="language-plaintext highlighter-rouge">v4l2-compliance</code> tool. If that reports
no, or limited amounts of, failures or warnings, you should be good to
go.</p>

<p>The following cameras have in any case been proven to work:</p>

<table>
  <thead>
    <tr>
      <th>Brand</th>
      <th>Type</th>
      <th>Driver</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Logitech</td>
      <td>C920</td>
      <td><code class="language-plaintext highlighter-rouge">uvcvideo</code></td>
      <td> </td>
    </tr>
    <tr>
      <td>Logitech</td>
      <td>BRIO 4K Pro</td>
      <td><code class="language-plaintext highlighter-rouge">uvcvideo</code></td>
      <td> </td>
    </tr>
    <tr>
      <td>Microdia</td>
      <td>Integrated Webcam HD</td>
      <td><code class="language-plaintext highlighter-rouge">uvcvideo</code></td>
      <td>Integrated laptop camera, e.g. Dell XPS series</td>
    </tr>
    <tr>
      <td>Raspberry Pi</td>
      <td>Camera Module V2 (Noir)</td>
      <td><code class="language-plaintext highlighter-rouge">bm2835 mmal</code></td>
      <td>See Raspberry Pi Support notes below</td>
    </tr>
  </tbody>
</table>

<p>Do let us know about other devices you successfully use this driver
for, for instance through a merge request.</p>

<h3 id="raspberry-pi-support">Raspberry Pi Support</h3>

<p>Raspberry Pi has moved to a <a href="https://www.raspberrypi.com/news/an-open-source-camera-stack-for-raspberry-pi-using-libcamera/">new camera stack based on
libcamera</a>. As
part of this, by default the Broadcom Unicam driver will be loaded for
Raspberry Pi camera modules. This is still a V4L2 driver, however it
has a very limited scope and only provides raw Bayer images. Any
available Image Signal Processors, that can turn those raw images into
more useful formats such as RGB or JPEG, are now exposed as separate
V4L2 devices. This means that responsibility is pushed to an
application such as <code class="language-plaintext highlighter-rouge">v4l2_camera</code> to operate the multiple devices,
rather than the single all-in-one device that most other V4L2 drivers
expose. Supporting this is out of scope of this package.</p>

<p>You can find out whether the Unicam driver is used by installing the
<code class="language-plaintext highlighter-rouge">v4l-utils</code> package, running:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>v4l2-ctl <span class="nt">-D</span>

</code></pre></div></div>
<p>and checking for <code class="language-plaintext highlighter-rouge">bcm2835-unicam</code>. You can also install and run the
<code class="language-plaintext highlighter-rouge">v4l2_camera</code> node, which mentions<code class="language-plaintext highlighter-rouge">unicam</code> as part of the driver name.</p>

<p>Luckily, for at least some devices, it is possible to load the legacy
driver instead of the new Unicam driver, by <a href="https://www.raspberrypi.com/documentation/computers/config_txt.html">changing settings in the
<code class="language-plaintext highlighter-rouge">/boot/config.txt</code>
file</a>:</p>
<ul>
  <li>Set
<a href="https://www.raspberrypi.com/documentation/computers/config_txt.html#camera_auto_detect"><code class="language-plaintext highlighter-rouge">camera_autodetect=0</code></a>
to prevent hardware overlays that use the Unicam driver to be
loaded.</li>
  <li>Set
<a href="https://www.raspberrypi.com/documentation/computers/config_txt.html#start_x-start_debug"><code class="language-plaintext highlighter-rouge">start_x=1</code></a>
to enable the camera using the legacy driver.</li>
</ul>

<p>Now when you reboot and run <code class="language-plaintext highlighter-rouge">v4l2-ctl -D</code> again, or the <code class="language-plaintext highlighter-rouge">v4l2_camera</code>
node, you should see the driver being referred to as <code class="language-plaintext highlighter-rouge">bm2835 mmal</code>
instead. The <code class="language-plaintext highlighter-rouge">v4l2_camera</code> node should then operate as normal.</p>

<h2 id="installation">Installation</h2>

<h3 id="ros-package-install">ROS package install</h3>
<p>This package is available from the ROS package repositories and can
therefore be installed with the following command and your ROS version
name:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>ros-<span class="k">${</span><span class="nv">ROS_DISTRO</span><span class="k">}</span><span class="nt">-v4l2-camera</span>

</code></pre></div></div>

<h3 id="building-from-source">Building from source</h3>
<p>To build this package from source, simply clone this repository into
your workspace, install dependencies, and build it using <code class="language-plaintext highlighter-rouge">colcon</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone <span class="nt">--branch</span> <span class="k">${</span><span class="nv">ROS_DISTRO</span><span class="k">}</span> https://gitlab.com/boldhearts/ros2_v4l2_camera.git src/v4l2_camera
rosdep <span class="nb">install</span> <span class="nt">--from-paths</span> src/v4l2_camera <span class="nt">--ignore-src</span> <span class="nt">-r</span> <span class="nt">-y</span>
colcon build

</code></pre></div></div>

<p>That should be sufficient in most cases, but <a href="https://medium.com/swlh/raspberry-pi-ros-2-camera-eef8f8b94304">this
article</a>
goes into further detail. It focuses on Raspberry Pi OS with the
Raspberry Pi Camera Module V2, but the steps should be generally
applicable.</p>

<h3 id="basic-usage">Basic Usage</h3>
<p>Run the camera node to publish camera images, using the default
parameters:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run v4l2_camera v4l2_camera_node

</code></pre></div></div>

<p>You can use <code class="language-plaintext highlighter-rouge">rqt-image-view</code> to preview the images (open another terminal):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>ros-<span class="k">${</span><span class="nv">ROS_DISTRO</span><span class="k">}</span><span class="nt">-rqt-image-view</span>
ros2 run rqt_image_view rqt_image_view

</code></pre></div></div>

<h2 id="nodes">Nodes</h2>

<h3 id="v4l2_camera_node">v4l2_camera_node</h3>

<p>The <code class="language-plaintext highlighter-rouge">v4l2_camera_node</code> interfaces with standard V4L2 devices and
publishes images as <code class="language-plaintext highlighter-rouge">sensor_msgs/Image</code> messages.</p>

<h4 id="published-topics">Published Topics</h4>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">/image_raw</code> - <code class="language-plaintext highlighter-rouge">sensor_msgs/Image</code></p>

    <p>The image.</p>
  </li>
</ul>

<h4 id="parameters">Parameters</h4>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">video_device</code> - <code class="language-plaintext highlighter-rouge">string</code>, default: <code class="language-plaintext highlighter-rouge">"/dev/video0"</code></p>

    <p>The device the camera is on.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">pixel_format</code> - <code class="language-plaintext highlighter-rouge">string</code>, default: <code class="language-plaintext highlighter-rouge">"YUYV"</code></p>

    <p>The pixel format to request from the camera. Must be a valid four
  character ‘<a href="http://fourcc.org/">FOURCC</a>’ code <a href="https://linuxtv.org/downloads/v4l-dvb-apis/uapi/v4l/videodev.html">supported by
  V4L2</a>
  and by your camera. The node outputs the available formats
  supported by your camera when started.
  Currently supported: <code class="language-plaintext highlighter-rouge">"YUYV"</code>, <code class="language-plaintext highlighter-rouge">"UYVY"</code>, or <code class="language-plaintext highlighter-rouge">"GREY"</code></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">output_encoding</code> - <code class="language-plaintext highlighter-rouge">string</code>, default: <code class="language-plaintext highlighter-rouge">"rgb8"</code></p>

    <p>The encoding to use for the output image. Can be any supported by
  <code class="language-plaintext highlighter-rouge">cv_bridge</code> given the input pixel format. Currently these are:</p>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">"YUYV"</code>: <code class="language-plaintext highlighter-rouge">"yuv422_yuy2"</code> (no conversion), or <code class="language-plaintext highlighter-rouge">"mono8"</code>, <code class="language-plaintext highlighter-rouge">"rgb8"</code>,
  <code class="language-plaintext highlighter-rouge">"bgr8"</code>, <code class="language-plaintext highlighter-rouge">"rgba8"</code> and <code class="language-plaintext highlighter-rouge">"bgra8"</code>, plus their 16 bit variants</li>
      <li>
<code class="language-plaintext highlighter-rouge">"UYVY"</code>: <code class="language-plaintext highlighter-rouge">"yuv422"</code> (no conversion), or <code class="language-plaintext highlighter-rouge">"mono8"</code>, <code class="language-plaintext highlighter-rouge">"rgb8"</code>,
  <code class="language-plaintext highlighter-rouge">"bgr8"</code>, <code class="language-plaintext highlighter-rouge">"rgba8"</code> and <code class="language-plaintext highlighter-rouge">"bgra8"</code>, plus their 16 bit variants</li>
      <li>
<code class="language-plaintext highlighter-rouge">"GREY"</code>: <code class="language-plaintext highlighter-rouge">"mono8"</code> (no conversion), <code class="language-plaintext highlighter-rouge">"rgb8"</code>,
  <code class="language-plaintext highlighter-rouge">"bgr8"</code>, <code class="language-plaintext highlighter-rouge">"rgba8"</code> and <code class="language-plaintext highlighter-rouge">"bgra8"</code>, plus their 16 bit variants</li>
    </ul>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">image_size</code> - <code class="language-plaintext highlighter-rouge">integer_array</code>, default: <code class="language-plaintext highlighter-rouge">[640, 480]</code></p>

    <p>Width and height of the image.</p>
  </li>
  <li>
    <p>Camera Control Parameters</p>

    <p>Camera controls, such as brightness, contrast, white balance, etc,
  are automatically made available as parameters. The driver node
  enumerates all controls, and creates a parameter for each, with
  the corresponding value type. The parameter name is derived from
  the control name reported by the camera driver, made lower case,
  commas removed, and spaces replaced by underscores. So
  <code class="language-plaintext highlighter-rouge">Brightness</code> becomes <code class="language-plaintext highlighter-rouge">brightness</code>, and <code class="language-plaintext highlighter-rouge">White Balance, Automatic</code>
  becomes <code class="language-plaintext highlighter-rouge">white_balance_automatic</code>.</p>
  </li>
</ul>

<h2 id="compressed-transport">Compressed Transport</h2>

<p>This package uses <code class="language-plaintext highlighter-rouge">image_transport</code> to publish images and make
compression possible. However, by default it only supports raw
transfer, additional plugins are required to enable compression. These
need to be installed separately, either cloning an building <a href="https://github.com/ros-perception/image_transport_plugins">them from
source</a>, or
installing the ready made package:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>ros-<span class="k">${</span><span class="nv">ROS_DISTRO</span><span class="k">}</span><span class="nt">-image-transport-plugins</span>

</code></pre></div></div>

<p>Once installed, they will be automatically used by the driver and
additional topics will be available, including
<code class="language-plaintext highlighter-rouge">/image_raw/compressed</code>.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-v4l2_camera">Changelog for package v4l2_camera</h1>

<h2 id="071-2024-04-30">0.7.1 (2024-04-30)</h2>

<ul>
  <li>Fix deprecated cv_bridge header</li>
  <li>Avoid unnecessary memory operations by using std::vector::assign()</li>
  <li>Add camera frame id to camera info message</li>
  <li>Contributors: Błażej Sowa, Martin Fraunhofer, Muzhyk Belarus,
Sander G. van Dijk</li>
</ul>

<h2 id="070-2023-05-01">0.7.0 (2023-05-01)</h2>

<ul>
  <li>Don't re-queue buffer before getting the data</li>
  <li>Break out parameter handler into separate class, reducing
unnecessary startup warnings.</li>
  <li>Add UYVY pixel format</li>
  <li>Contributors: Martin Fraunhofer, Sander G. van Dijk</li>
</ul>

<h2 id="061-2022-10-08">0.6.1 (2022-10-08)</h2>

<ul>
  <li>Rename include to resolve deprecation warning.</li>
  <li>Contributors: Sander G. van Dijk, Steven! Ragnarök</li>
</ul>

<h2 id="060-2022-09-04">0.6.0 (2022-09-04)</h2>

<ul>
  <li>Use cv_bridge to perform conversions</li>
  <li>Fix: Image topic should be image_raw, not raw_image, in README.md</li>
  <li>Fix: Properly declare camera_info_url parameter</li>
  <li>Contributors: Marcus M. Scheunemann, Sander G. van Dijk, ijnek</li>
</ul>

<h2 id="050-2022-08-06">0.5.0 (2022-08-06)</h2>

<ul>
  <li>Add time_per_frame parameter to adjust frame rate</li>
  <li>Fix: use 64 bit integers to store control valueas and ranges</li>
  <li>Contributors: Marcus M. Scheunemann, Sander G. van Dijk</li>
</ul>

<h2 id="040-2021-01-29">0.4.0 (2021-01-29)</h2>

<ul>
  <li>Read-only parameters as now properly marked as such</li>
  <li>Use C-style strings for logging macros to adapt to new formatting
constraints See:
<a href="https://index.ros.org/doc/ros2/Releases/Release-Galactic-Geochelone/#change-in-rclcpp-s-logging-macros">https://index.ros.org/doc/ros2/Releases/Release-Galactic-Geochelone/#change-in-rclcpp-s-logging-macros</a>
</li>
  <li>Add support monochrome cameras</li>
  <li>Contributors: Chris Lalancette, Sander G. van Dijk, nfry321</li>
</ul>

<h2 id="031-2020-11-07">0.3.1 (2020-11-07)</h2>

<ul>
  <li>Handle non discrete frame sizes; fixes support for Raspberry Pi +
Camera Module</li>
  <li>Contributors: Sander G. van Dijk</li>
</ul>

<h2 id="030-2020-09-26">0.3.0 (2020-09-26)</h2>

<ul>
  <li>Publishing is done on private topics to enable remapping of the
namespace</li>
  <li>CameraInfo is published in intra-process communication mode</li>
  <li>Added parameter descriptions</li>
  <li>Contributors: Christian Rauch, Marcus M. Scheunemann, Sander G. van
Dijk</li>
</ul>

<h2 id="021-2020-08-06">0.2.1 (2020-08-06)</h2>

<ul>
  <li>Hold reference to parameters callback handle</li>
  <li>Contributors: Jacob Perron</li>
</ul>

<h2 id="020-2020-06-13">0.2.0 (2020-06-13)</h2>

<ul>
  <li>Set frame_id on published images, default to "camera"</li>
  <li>Output FOURCC code of available formats</li>
  <li>Add parameter for setting the pixel format Default to using YUYV</li>
  <li>Contributors: Sander G. van Dijk</li>
</ul>

<h2 id="011-2019-08-12">0.1.1 (2019-08-12)</h2>

<ul>
  <li>Add missing rclcpp_components build dependency</li>
  <li>Contributors: Sander G. van Dijk</li>
</ul>

<h2 id="010-2019-08-11">0.1.0 (2019-08-11)</h2>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kilted-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/v4l2_camera/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kilted-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#kilted">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp_components#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp_components#kilted">rclcpp_components  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_ros#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_ros#kilted">ament_cmake_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#kilted">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#kilted">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/sensor_msgs#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/sensor_msgs#kilted">sensor_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/camera_info_manager#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/camera_info_manager#kilted">camera_info_manager  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/cv_bridge#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/cv_bridge#kilted">cv_bridge  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/image_transport#kilted-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/image_transport#kilted">image_transport  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No direct system dependencies.</em>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <em>No known dependants.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kilted-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kilted-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>v4l2_camera</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="kilted-question-list" class="panel-body" style="display: none;"></div>
      <div id="kilted-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/v4l2_camera+kilted">here</a>.</p>
      </div>
      <div id="kilted-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://gitlab.com/boldhearts/ros2_v4l2_camera.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/kilted/p/v4l2_camera"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://gitlab.com/boldhearts/ros2_v4l2_camera/-/tree/rolling/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/v4l2_camera">v4l2_camera</a> <small>package from <a style="text-decoration:none" href="/r/v4l2_camera/gitlab-boldhearts-ros2_v4l2_camera">v4l2_camera</a> repo</small>
        </h3>
          
            
            
              <span class="label label-default pkg-label">

v4l2_camera
</span>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/rolling/p/v4l2_camera"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://gitlab.com/boldhearts/ros2_v4l2_camera/-/tree/rolling/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="rolling-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#rolling-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#rolling-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#rolling-deps" data-toggle="tab"><span class="label label-primary">9</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#rolling-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#rolling-questions" data-toggle="tab"><span id="rolling-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="rolling-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>0.7.1</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache License 2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://gitlab.com/boldhearts/ros2_v4l2_camera.git">https://gitlab.com/boldhearts/ros2_v4l2_camera.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">rolling</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-04-30
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/v4l2_camera/#rolling-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/v4l2_camera/#rolling-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/v4l2_camera/#rolling-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            A ROS 2 camera driver using Video4Linux2
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Sander G. van Dijk</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Sander G. van Dijk</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://gitlab.com/boldhearts/ros2_v4l2_camera/-/tree/rolling/./README.md" title="Open in git repository">README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="v4l2_camera">v4l2_camera</h1>

<p>A ROS 2 camera driver using Video4Linux2 (V4L2).</p>

<h2 id="features">Features</h2>

<ul>
  <li>Lists and exposes all user-settable controls of your camera as ROS 2
parameters.</li>
  <li>Uses <code class="language-plaintext highlighter-rouge">cv_bridge</code> to convert raw frames to ROS 2 messages, so
supports a wide range of encoding conversions.</li>
  <li>Supports <code class="language-plaintext highlighter-rouge">image_transport</code> to enable compression.</li>
  <li>Supports composing the camera node and using ROS 2 intra-process
commmunication with zero-copy messaging.</li>
</ul>

<h2 id="supported-cameras">Supported Cameras</h2>

<p>The package should work with any camera that properly supports V4L2,
which for instance should include most USB cameras. A good way to
check your camera is to install the <code class="language-plaintext highlighter-rouge">v4l2-utils</code> package (on Debian
based systems), and run the <code class="language-plaintext highlighter-rouge">v4l2-compliance</code> tool. If that reports
no, or limited amounts of, failures or warnings, you should be good to
go.</p>

<p>The following cameras have in any case been proven to work:</p>

<table>
  <thead>
    <tr>
      <th>Brand</th>
      <th>Type</th>
      <th>Driver</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Logitech</td>
      <td>C920</td>
      <td><code class="language-plaintext highlighter-rouge">uvcvideo</code></td>
      <td> </td>
    </tr>
    <tr>
      <td>Logitech</td>
      <td>BRIO 4K Pro</td>
      <td><code class="language-plaintext highlighter-rouge">uvcvideo</code></td>
      <td> </td>
    </tr>
    <tr>
      <td>Microdia</td>
      <td>Integrated Webcam HD</td>
      <td><code class="language-plaintext highlighter-rouge">uvcvideo</code></td>
      <td>Integrated laptop camera, e.g. Dell XPS series</td>
    </tr>
    <tr>
      <td>Raspberry Pi</td>
      <td>Camera Module V2 (Noir)</td>
      <td><code class="language-plaintext highlighter-rouge">bm2835 mmal</code></td>
      <td>See Raspberry Pi Support notes below</td>
    </tr>
  </tbody>
</table>

<p>Do let us know about other devices you successfully use this driver
for, for instance through a merge request.</p>

<h3 id="raspberry-pi-support">Raspberry Pi Support</h3>

<p>Raspberry Pi has moved to a <a href="https://www.raspberrypi.com/news/an-open-source-camera-stack-for-raspberry-pi-using-libcamera/">new camera stack based on
libcamera</a>. As
part of this, by default the Broadcom Unicam driver will be loaded for
Raspberry Pi camera modules. This is still a V4L2 driver, however it
has a very limited scope and only provides raw Bayer images. Any
available Image Signal Processors, that can turn those raw images into
more useful formats such as RGB or JPEG, are now exposed as separate
V4L2 devices. This means that responsibility is pushed to an
application such as <code class="language-plaintext highlighter-rouge">v4l2_camera</code> to operate the multiple devices,
rather than the single all-in-one device that most other V4L2 drivers
expose. Supporting this is out of scope of this package.</p>

<p>You can find out whether the Unicam driver is used by installing the
<code class="language-plaintext highlighter-rouge">v4l-utils</code> package, running:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>v4l2-ctl <span class="nt">-D</span>

</code></pre></div></div>
<p>and checking for <code class="language-plaintext highlighter-rouge">bcm2835-unicam</code>. You can also install and run the
<code class="language-plaintext highlighter-rouge">v4l2_camera</code> node, which mentions<code class="language-plaintext highlighter-rouge">unicam</code> as part of the driver name.</p>

<p>Luckily, for at least some devices, it is possible to load the legacy
driver instead of the new Unicam driver, by <a href="https://www.raspberrypi.com/documentation/computers/config_txt.html">changing settings in the
<code class="language-plaintext highlighter-rouge">/boot/config.txt</code>
file</a>:</p>
<ul>
  <li>Set
<a href="https://www.raspberrypi.com/documentation/computers/config_txt.html#camera_auto_detect"><code class="language-plaintext highlighter-rouge">camera_autodetect=0</code></a>
to prevent hardware overlays that use the Unicam driver to be
loaded.</li>
  <li>Set
<a href="https://www.raspberrypi.com/documentation/computers/config_txt.html#start_x-start_debug"><code class="language-plaintext highlighter-rouge">start_x=1</code></a>
to enable the camera using the legacy driver.</li>
</ul>

<p>Now when you reboot and run <code class="language-plaintext highlighter-rouge">v4l2-ctl -D</code> again, or the <code class="language-plaintext highlighter-rouge">v4l2_camera</code>
node, you should see the driver being referred to as <code class="language-plaintext highlighter-rouge">bm2835 mmal</code>
instead. The <code class="language-plaintext highlighter-rouge">v4l2_camera</code> node should then operate as normal.</p>

<h2 id="installation">Installation</h2>

<h3 id="ros-package-install">ROS package install</h3>
<p>This package is available from the ROS package repositories and can
therefore be installed with the following command and your ROS version
name:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>ros-<span class="k">${</span><span class="nv">ROS_DISTRO</span><span class="k">}</span><span class="nt">-v4l2-camera</span>

</code></pre></div></div>

<h3 id="building-from-source">Building from source</h3>
<p>To build this package from source, simply clone this repository into
your workspace, install dependencies, and build it using <code class="language-plaintext highlighter-rouge">colcon</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone <span class="nt">--branch</span> <span class="k">${</span><span class="nv">ROS_DISTRO</span><span class="k">}</span> https://gitlab.com/boldhearts/ros2_v4l2_camera.git src/v4l2_camera
rosdep <span class="nb">install</span> <span class="nt">--from-paths</span> src/v4l2_camera <span class="nt">--ignore-src</span> <span class="nt">-r</span> <span class="nt">-y</span>
colcon build

</code></pre></div></div>

<p>That should be sufficient in most cases, but <a href="https://medium.com/swlh/raspberry-pi-ros-2-camera-eef8f8b94304">this
article</a>
goes into further detail. It focuses on Raspberry Pi OS with the
Raspberry Pi Camera Module V2, but the steps should be generally
applicable.</p>

<h3 id="basic-usage">Basic Usage</h3>
<p>Run the camera node to publish camera images, using the default
parameters:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run v4l2_camera v4l2_camera_node

</code></pre></div></div>

<p>You can use <code class="language-plaintext highlighter-rouge">rqt-image-view</code> to preview the images (open another terminal):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>ros-<span class="k">${</span><span class="nv">ROS_DISTRO</span><span class="k">}</span><span class="nt">-rqt-image-view</span>
ros2 run rqt_image_view rqt_image_view

</code></pre></div></div>

<h2 id="nodes">Nodes</h2>

<h3 id="v4l2_camera_node">v4l2_camera_node</h3>

<p>The <code class="language-plaintext highlighter-rouge">v4l2_camera_node</code> interfaces with standard V4L2 devices and
publishes images as <code class="language-plaintext highlighter-rouge">sensor_msgs/Image</code> messages.</p>

<h4 id="published-topics">Published Topics</h4>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">/image_raw</code> - <code class="language-plaintext highlighter-rouge">sensor_msgs/Image</code></p>

    <p>The image.</p>
  </li>
</ul>

<h4 id="parameters">Parameters</h4>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">video_device</code> - <code class="language-plaintext highlighter-rouge">string</code>, default: <code class="language-plaintext highlighter-rouge">"/dev/video0"</code></p>

    <p>The device the camera is on.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">pixel_format</code> - <code class="language-plaintext highlighter-rouge">string</code>, default: <code class="language-plaintext highlighter-rouge">"YUYV"</code></p>

    <p>The pixel format to request from the camera. Must be a valid four
  character ‘<a href="http://fourcc.org/">FOURCC</a>’ code <a href="https://linuxtv.org/downloads/v4l-dvb-apis/uapi/v4l/videodev.html">supported by
  V4L2</a>
  and by your camera. The node outputs the available formats
  supported by your camera when started.
  Currently supported: <code class="language-plaintext highlighter-rouge">"YUYV"</code>, <code class="language-plaintext highlighter-rouge">"UYVY"</code>, or <code class="language-plaintext highlighter-rouge">"GREY"</code></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">output_encoding</code> - <code class="language-plaintext highlighter-rouge">string</code>, default: <code class="language-plaintext highlighter-rouge">"rgb8"</code></p>

    <p>The encoding to use for the output image. Can be any supported by
  <code class="language-plaintext highlighter-rouge">cv_bridge</code> given the input pixel format. Currently these are:</p>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">"YUYV"</code>: <code class="language-plaintext highlighter-rouge">"yuv422_yuy2"</code> (no conversion), or <code class="language-plaintext highlighter-rouge">"mono8"</code>, <code class="language-plaintext highlighter-rouge">"rgb8"</code>,
  <code class="language-plaintext highlighter-rouge">"bgr8"</code>, <code class="language-plaintext highlighter-rouge">"rgba8"</code> and <code class="language-plaintext highlighter-rouge">"bgra8"</code>, plus their 16 bit variants</li>
      <li>
<code class="language-plaintext highlighter-rouge">"UYVY"</code>: <code class="language-plaintext highlighter-rouge">"yuv422"</code> (no conversion), or <code class="language-plaintext highlighter-rouge">"mono8"</code>, <code class="language-plaintext highlighter-rouge">"rgb8"</code>,
  <code class="language-plaintext highlighter-rouge">"bgr8"</code>, <code class="language-plaintext highlighter-rouge">"rgba8"</code> and <code class="language-plaintext highlighter-rouge">"bgra8"</code>, plus their 16 bit variants</li>
      <li>
<code class="language-plaintext highlighter-rouge">"GREY"</code>: <code class="language-plaintext highlighter-rouge">"mono8"</code> (no conversion), <code class="language-plaintext highlighter-rouge">"rgb8"</code>,
  <code class="language-plaintext highlighter-rouge">"bgr8"</code>, <code class="language-plaintext highlighter-rouge">"rgba8"</code> and <code class="language-plaintext highlighter-rouge">"bgra8"</code>, plus their 16 bit variants</li>
    </ul>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">image_size</code> - <code class="language-plaintext highlighter-rouge">integer_array</code>, default: <code class="language-plaintext highlighter-rouge">[640, 480]</code></p>

    <p>Width and height of the image.</p>
  </li>
  <li>
    <p>Camera Control Parameters</p>

    <p>Camera controls, such as brightness, contrast, white balance, etc,
  are automatically made available as parameters. The driver node
  enumerates all controls, and creates a parameter for each, with
  the corresponding value type. The parameter name is derived from
  the control name reported by the camera driver, made lower case,
  commas removed, and spaces replaced by underscores. So
  <code class="language-plaintext highlighter-rouge">Brightness</code> becomes <code class="language-plaintext highlighter-rouge">brightness</code>, and <code class="language-plaintext highlighter-rouge">White Balance, Automatic</code>
  becomes <code class="language-plaintext highlighter-rouge">white_balance_automatic</code>.</p>
  </li>
</ul>

<h2 id="compressed-transport">Compressed Transport</h2>

<p>This package uses <code class="language-plaintext highlighter-rouge">image_transport</code> to publish images and make
compression possible. However, by default it only supports raw
transfer, additional plugins are required to enable compression. These
need to be installed separately, either cloning an building <a href="https://github.com/ros-perception/image_transport_plugins">them from
source</a>, or
installing the ready made package:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>ros-<span class="k">${</span><span class="nv">ROS_DISTRO</span><span class="k">}</span><span class="nt">-image-transport-plugins</span>

</code></pre></div></div>

<p>Once installed, they will be automatically used by the driver and
additional topics will be available, including
<code class="language-plaintext highlighter-rouge">/image_raw/compressed</code>.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-v4l2_camera">Changelog for package v4l2_camera</h1>

<h2 id="071-2024-04-30">0.7.1 (2024-04-30)</h2>

<ul>
  <li>Fix deprecated cv_bridge header</li>
  <li>Avoid unnecessary memory operations by using std::vector::assign()</li>
  <li>Add camera frame id to camera info message</li>
  <li>Contributors: Błażej Sowa, Martin Fraunhofer, Muzhyk Belarus,
Sander G. van Dijk</li>
</ul>

<h2 id="070-2023-05-01">0.7.0 (2023-05-01)</h2>

<ul>
  <li>Don't re-queue buffer before getting the data</li>
  <li>Break out parameter handler into separate class, reducing
unnecessary startup warnings.</li>
  <li>Add UYVY pixel format</li>
  <li>Contributors: Martin Fraunhofer, Sander G. van Dijk</li>
</ul>

<h2 id="061-2022-10-08">0.6.1 (2022-10-08)</h2>

<ul>
  <li>Rename include to resolve deprecation warning.</li>
  <li>Contributors: Sander G. van Dijk, Steven! Ragnarök</li>
</ul>

<h2 id="060-2022-09-04">0.6.0 (2022-09-04)</h2>

<ul>
  <li>Use cv_bridge to perform conversions</li>
  <li>Fix: Image topic should be image_raw, not raw_image, in README.md</li>
  <li>Fix: Properly declare camera_info_url parameter</li>
  <li>Contributors: Marcus M. Scheunemann, Sander G. van Dijk, ijnek</li>
</ul>

<h2 id="050-2022-08-06">0.5.0 (2022-08-06)</h2>

<ul>
  <li>Add time_per_frame parameter to adjust frame rate</li>
  <li>Fix: use 64 bit integers to store control valueas and ranges</li>
  <li>Contributors: Marcus M. Scheunemann, Sander G. van Dijk</li>
</ul>

<h2 id="040-2021-01-29">0.4.0 (2021-01-29)</h2>

<ul>
  <li>Read-only parameters as now properly marked as such</li>
  <li>Use C-style strings for logging macros to adapt to new formatting
constraints See:
<a href="https://index.ros.org/doc/ros2/Releases/Release-Galactic-Geochelone/#change-in-rclcpp-s-logging-macros">https://index.ros.org/doc/ros2/Releases/Release-Galactic-Geochelone/#change-in-rclcpp-s-logging-macros</a>
</li>
  <li>Add support monochrome cameras</li>
  <li>Contributors: Chris Lalancette, Sander G. van Dijk, nfry321</li>
</ul>

<h2 id="031-2020-11-07">0.3.1 (2020-11-07)</h2>

<ul>
  <li>Handle non discrete frame sizes; fixes support for Raspberry Pi +
Camera Module</li>
  <li>Contributors: Sander G. van Dijk</li>
</ul>

<h2 id="030-2020-09-26">0.3.0 (2020-09-26)</h2>

<ul>
  <li>Publishing is done on private topics to enable remapping of the
namespace</li>
  <li>CameraInfo is published in intra-process communication mode</li>
  <li>Added parameter descriptions</li>
  <li>Contributors: Christian Rauch, Marcus M. Scheunemann, Sander G. van
Dijk</li>
</ul>

<h2 id="021-2020-08-06">0.2.1 (2020-08-06)</h2>

<ul>
  <li>Hold reference to parameters callback handle</li>
  <li>Contributors: Jacob Perron</li>
</ul>

<h2 id="020-2020-06-13">0.2.0 (2020-06-13)</h2>

<ul>
  <li>Set frame_id on published images, default to "camera"</li>
  <li>Output FOURCC code of available formats</li>
  <li>Add parameter for setting the pixel format Default to using YUYV</li>
  <li>Contributors: Sander G. van Dijk</li>
</ul>

<h2 id="011-2019-08-12">0.1.1 (2019-08-12)</h2>

<ul>
  <li>Add missing rclcpp_components build dependency</li>
  <li>Contributors: Sander G. van Dijk</li>
</ul>

<h2 id="010-2019-08-11">0.1.0 (2019-08-11)</h2>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="rolling-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/v4l2_camera/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="rolling-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#rolling">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp_components#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp_components#rolling">rclcpp_components  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_ros#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_ros#rolling">ament_cmake_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#rolling">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#rolling">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/sensor_msgs#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/sensor_msgs#rolling">sensor_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/camera_info_manager#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/camera_info_manager#rolling">camera_info_manager  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/cv_bridge#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/cv_bridge#rolling">cv_bridge  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/image_transport#rolling-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/image_transport#rolling">image_transport  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No direct system dependencies.</em>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <em>No known dependants.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="rolling-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="rolling-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>v4l2_camera</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="rolling-question-list" class="panel-body" style="display: none;"></div>
      <div id="rolling-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/v4l2_camera+rolling">here</a>.</p>
      </div>
      <div id="rolling-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://gitlab.com/boldhearts/ros2_v4l2_camera.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/rolling/p/v4l2_camera"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://gitlab.com/boldhearts/ros2_v4l2_camera/-/tree/rolling/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/v4l2_camera">v4l2_camera</a> <small>package from <a style="text-decoration:none" href="/r/tortoisebot/github-rigbetellabs-tortoisebot">tortoisebot</a> repo</small>
        </h3>
          
            
            
              <a class="label label-primary pkg-label" href="/p/tortoisebot_bringup">

tortoisebot_bringup
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/tortoisebot_control">

tortoisebot_control
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/tortoisebot_description">

tortoisebot_description
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/tortoisebot_firmware">

tortoisebot_firmware
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/tortoisebot_gazebo">

tortoisebot_gazebo
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/tortoisebot_imu">

tortoisebot_imu
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/tortoisebot_navigation">

tortoisebot_navigation
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/tortoisebot_slam">

tortoisebot_slam
</a>
            
          
            
            
              <span class="label label-default pkg-label">

v4l2_camera
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/ydlidar_ros2_driver">

ydlidar_ros2_driver
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/github/p/v4l2_camera"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/rigbetellabs/tortoisebot/tree/ros2-humble/v4l2_camera"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="github-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#github-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#github-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#github-deps" data-toggle="tab"><span class="label label-primary">9</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#github-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#github-questions" data-toggle="tab"><span id="github-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="github-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>0.6.2</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache License 2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">TortoiseBot is an extremely learner-friendly and cost-efficient ROS-based Open-sourced Mobile Robot that is capable of doing Teleoperation, Manual as well as Autonomous Mapping, Navigation, Simulation, etc.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/rigbetellabs/tortoisebot.git">https://github.com/rigbetellabs/tortoisebot.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">ros2-humble</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-12-11
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNKNOWN
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">robot</span> <span class="label label-default">robotics</span> <span class="label label-default">navigation</span> <span class="label label-default">ros</span> <span class="label label-default">gazebo</span> <span class="label label-default">slam</span> <span class="label label-default">turtlebot</span> <span class="label label-default">ros2</span> <span class="label label-default">galactic</span> <span class="label label-default">humble</span> <span class="label label-default">turtlebot3</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/tortoisebot/#github-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/tortoisebot/#github-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/tortoisebot/#github-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            A ROS 2 camera driver using Video4Linux2
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Sander G. van Dijk</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Sander G. van Dijk</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/rigbetellabs/tortoisebot/tree/ros2-humble/v4l2_camera/README.md" title="Open in git repository">v4l2_camera/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="v4l2_camera">v4l2_camera</h1>

<p>A ROS 2 camera driver using Video4Linux2 (V4L2).</p>

<h2 id="features">Features</h2>

<ul>
  <li>Lists and exposes all user-settable controls of your camera as ROS 2
parameters.</li>
  <li>Uses <code class="language-plaintext highlighter-rouge">cv_bridge</code> to convert raw frames to ROS 2 messages, so
supports a wide range of encoding conversions.</li>
  <li>Supports <code class="language-plaintext highlighter-rouge">image_transport</code> to enable compression.</li>
  <li>Supports composing the camera node and using ROS 2 intra-process
commmunication with zero-copy messaging.</li>
</ul>

<h2 id="supported-cameras">Supported Cameras</h2>

<p>The package should work with any camera that properly supports V4L2,
which for instance should include most USB cameras. A good way to
check your camera is to install the <code class="language-plaintext highlighter-rouge">v4l2-utils</code> package (on Debian
based systems), and run the <code class="language-plaintext highlighter-rouge">v4l2-compliance</code> tool. If that reports
no, or limited amounts of, failures or warnings, you should be good to
go.</p>

<p>The following cameras have in any case been proven to work:</p>

<table>
  <thead>
    <tr>
      <th>Brand</th>
      <th>Type</th>
      <th>Driver</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Logitech</td>
      <td>C920</td>
      <td><code class="language-plaintext highlighter-rouge">uvcvideo</code></td>
      <td> </td>
    </tr>
    <tr>
      <td>Logitech</td>
      <td>BRIO 4K Pro</td>
      <td><code class="language-plaintext highlighter-rouge">uvcvideo</code></td>
      <td> </td>
    </tr>
    <tr>
      <td>Microdia</td>
      <td>Integrated Webcam HD</td>
      <td><code class="language-plaintext highlighter-rouge">uvcvideo</code></td>
      <td>Integrated laptop camera, e.g. Dell XPS series</td>
    </tr>
    <tr>
      <td>Raspberry Pi</td>
      <td>Camera Module V2 (Noir)</td>
      <td><code class="language-plaintext highlighter-rouge">bm2835 mmal</code></td>
      <td>See Raspberry Pi Support notes below</td>
    </tr>
  </tbody>
</table>

<p>Do let us know about other devices you successfully use this driver
for, for instance through a merge request.</p>

<h3 id="raspberry-pi-support">Raspberry Pi Support</h3>

<p>Raspberry Pi has moved to a <a href="https://www.raspberrypi.com/news/an-open-source-camera-stack-for-raspberry-pi-using-libcamera/">new camera stack based on
libcamera</a>. As
part of this, by default the Broadcom Unicam driver will be loaded for
Raspberry Pi camera modules. This is still a V4L2 driver, however it
has a very limited scope and only provides raw Bayer images. Any
available Image Signal Processors, that can turn those raw images into
more useful formats such as RGB or JPEG, are now exposed as separate
V4L2 devices. This means that responsibility is pushed to an
application such as <code class="language-plaintext highlighter-rouge">v4l2_camera</code> to operate the multiple devices,
rather than the single all-in-one device that most other V4L2 drivers
expose. Supporting this is out of scope of this package.</p>

<p>You can find out whether the Unicam driver is used by installing the
<code class="language-plaintext highlighter-rouge">v4l-utils</code> package, running:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>v4l2-ctl <span class="nt">-D</span>

</code></pre></div></div>
<p>and checking for <code class="language-plaintext highlighter-rouge">bcm2835-unicam</code>. You can also install and run the
<code class="language-plaintext highlighter-rouge">v4l2_camera</code> node, which mentions<code class="language-plaintext highlighter-rouge">unicam</code> as part of the driver name.</p>

<p>Luckily, for at least some devices, it is possible to load the legacy
driver instead of the new Unicam driver, by <a href="https://www.raspberrypi.com/documentation/computers/config_txt.html">changing settings in the
<code class="language-plaintext highlighter-rouge">/boot/config.txt</code>
file</a>:</p>
<ul>
  <li>Set
<a href="https://www.raspberrypi.com/documentation/computers/config_txt.html#camera_auto_detect"><code class="language-plaintext highlighter-rouge">camera_autodetect=0</code></a>
to prevent hardware overlays that use the Unicam driver to be
loaded.</li>
  <li>Set
<a href="https://www.raspberrypi.com/documentation/computers/config_txt.html#start_x-start_debug"><code class="language-plaintext highlighter-rouge">start_x=1</code></a>
to enable the camera using the legacy driver.</li>
</ul>

<p>Now when you reboot and run <code class="language-plaintext highlighter-rouge">v4l2-ctl -D</code> again, or the <code class="language-plaintext highlighter-rouge">v4l2_camera</code>
node, you should see the driver being referred to as <code class="language-plaintext highlighter-rouge">bm2835 mmal</code>
instead. The <code class="language-plaintext highlighter-rouge">v4l2_camera</code> node should then operate as normal.</p>

<h2 id="installation">Installation</h2>

<h3 id="ros-package-install">ROS package install</h3>
<p>This package is available from the ROS package repositories and can
therefore be installed with the following command and your ROS version
name:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>ros-<span class="k">${</span><span class="nv">ROS_DISTRO</span><span class="k">}</span><span class="nt">-v4l2-camera</span>

</code></pre></div></div>

<h3 id="building-from-source">Building from source</h3>
<p>To build this package from source, simply clone this repository into
your workspace, install dependencies, and build it using <code class="language-plaintext highlighter-rouge">colcon</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone <span class="nt">--branch</span> <span class="k">${</span><span class="nv">ROS_DISTRO</span><span class="k">}</span> https://gitlab.com/boldhearts/ros2_v4l2_camera.git src/v4l2_camera
rosdep <span class="nb">install</span> <span class="nt">--from-paths</span> src/v4l2_camera <span class="nt">--ignore-src</span> <span class="nt">-r</span> <span class="nt">-y</span>
colcon build

</code></pre></div></div>

<p>That should be sufficient in most cases, but <a href="https://medium.com/swlh/raspberry-pi-ros-2-camera-eef8f8b94304">this
article</a>
goes into further detail. It focuses on Raspberry Pi OS with the
Raspberry Pi Camera Module V2, but the steps should be generally
applicable.</p>

<h3 id="basic-usage">Basic Usage</h3>
<p>Run the camera node to publish camera images, using the default
parameters:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run v4l2_camera v4l2_camera_node

</code></pre></div></div>

<p>You can use <code class="language-plaintext highlighter-rouge">rqt-image-view</code> to preview the images (open another terminal):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>ros-<span class="k">${</span><span class="nv">ROS_DISTRO</span><span class="k">}</span><span class="nt">-rqt-image-view</span>
ros2 run rqt_image_view rqt_image_view

</code></pre></div></div>

<h2 id="nodes">Nodes</h2>

<h3 id="v4l2_camera_node">v4l2_camera_node</h3>

<p>The <code class="language-plaintext highlighter-rouge">v4l2_camera_node</code> interfaces with standard V4L2 devices and
publishes images as <code class="language-plaintext highlighter-rouge">sensor_msgs/Image</code> messages.</p>

<h4 id="published-topics">Published Topics</h4>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">/image_raw</code> - <code class="language-plaintext highlighter-rouge">sensor_msgs/Image</code></p>

    <p>The image.</p>
  </li>
</ul>

<h4 id="parameters">Parameters</h4>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">video_device</code> - <code class="language-plaintext highlighter-rouge">string</code>, default: <code class="language-plaintext highlighter-rouge">"/dev/video0"</code></p>

    <p>The device the camera is on.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">pixel_format</code> - <code class="language-plaintext highlighter-rouge">string</code>, default: <code class="language-plaintext highlighter-rouge">"YUYV"</code></p>

    <p>The pixel format to request from the camera. Must be a valid four
  character ‘<a href="http://fourcc.org/">FOURCC</a>’ code <a href="https://linuxtv.org/downloads/v4l-dvb-apis/uapi/v4l/videodev.html">supported by
  V4L2</a>
  and by your camera. The node outputs the available formats
  supported by your camera when started.
  Currently supported: <code class="language-plaintext highlighter-rouge">"YUYV"</code>, <code class="language-plaintext highlighter-rouge">"UYVY"</code>, or <code class="language-plaintext highlighter-rouge">"GREY"</code></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">output_encoding</code> - <code class="language-plaintext highlighter-rouge">string</code>, default: <code class="language-plaintext highlighter-rouge">"rgb8"</code></p>

    <p>The encoding to use for the output image. Can be any supported by
  <code class="language-plaintext highlighter-rouge">cv_bridge</code> given the input pixel format. Currently these are:</p>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">"YUYV"</code>: <code class="language-plaintext highlighter-rouge">"yuv422_yuy2"</code> (no conversion), or <code class="language-plaintext highlighter-rouge">"mono8"</code>, <code class="language-plaintext highlighter-rouge">"rgb8"</code>,
  <code class="language-plaintext highlighter-rouge">"bgr8"</code>, <code class="language-plaintext highlighter-rouge">"rgba8"</code> and <code class="language-plaintext highlighter-rouge">"bgra8"</code>, plus their 16 bit variants</li>
      <li>
<code class="language-plaintext highlighter-rouge">"UYVY"</code>: <code class="language-plaintext highlighter-rouge">"yuv422"</code> (no conversion), or <code class="language-plaintext highlighter-rouge">"mono8"</code>, <code class="language-plaintext highlighter-rouge">"rgb8"</code>,
  <code class="language-plaintext highlighter-rouge">"bgr8"</code>, <code class="language-plaintext highlighter-rouge">"rgba8"</code> and <code class="language-plaintext highlighter-rouge">"bgra8"</code>, plus their 16 bit variants</li>
      <li>
<code class="language-plaintext highlighter-rouge">"GREY"</code>: <code class="language-plaintext highlighter-rouge">"mono8"</code> (no conversion), <code class="language-plaintext highlighter-rouge">"rgb8"</code>,
  <code class="language-plaintext highlighter-rouge">"bgr8"</code>, <code class="language-plaintext highlighter-rouge">"rgba8"</code> and <code class="language-plaintext highlighter-rouge">"bgra8"</code>, plus their 16 bit variants</li>
    </ul>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">image_size</code> - <code class="language-plaintext highlighter-rouge">integer_array</code>, default: <code class="language-plaintext highlighter-rouge">[640, 480]</code></p>

    <p>Width and height of the image.</p>
  </li>
  <li>
    <p>Camera Control Parameters</p>

    <p>Camera controls, such as brightness, contrast, white balance, etc,
  are automatically made available as parameters. The driver node
  enumerates all controls, and creates a parameter for each, with
  the corresponding value type. The parameter name is derived from
  the control name reported by the camera driver, made lower case,
  commas removed, and spaces replaced by underscores. So
  <code class="language-plaintext highlighter-rouge">Brightness</code> becomes <code class="language-plaintext highlighter-rouge">brightness</code>, and <code class="language-plaintext highlighter-rouge">White Balance, Automatic</code>
  becomes <code class="language-plaintext highlighter-rouge">white_balance_automatic</code>.</p>
  </li>
</ul>

<h2 id="compressed-transport">Compressed Transport</h2>

<p>This package uses <code class="language-plaintext highlighter-rouge">image_transport</code> to publish images and make
compression possible. However, by default it only supports raw
transfer, additional plugins are required to enable compression. These
need to be installed separately, either cloning an building <a href="https://github.com/ros-perception/image_transport_plugins">them from
source</a>, or
installing the ready made package:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>ros-<span class="k">${</span><span class="nv">ROS_DISTRO</span><span class="k">}</span><span class="nt">-image-transport-plugins</span>

</code></pre></div></div>

<p>Once installed, they will be automatically used by the driver and
additional topics will be available, including
<code class="language-plaintext highlighter-rouge">/image_raw/compressed</code>.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-v4l2_camera">Changelog for package v4l2_camera</h1>

<h2 id="062-2023-05-02">0.6.2 (2023-05-02)</h2>

<ul>
  <li>Don't re-queue buffer before getting the data</li>
  <li>Break out parameter handler into separate class, reducing
unnecessary startup warnings.</li>
  <li>Add UYVY pixel format</li>
  <li>Contributors: Martin Fraunhofer, Sander G. van Dijk</li>
</ul>

<h2 id="060-2022-09-04">0.6.0 (2022-09-04)</h2>

<ul>
  <li>Use cv_bridge to perform conversions</li>
  <li>Fix: Image topic should be image_raw, not raw_image, in README.md</li>
  <li>Fix: Properly declare camera_info_url parameter</li>
  <li>Contributors: Marcus M. Scheunemann, Sander G. van Dijk, ijnek</li>
</ul>

<h2 id="050-2022-08-06">0.5.0 (2022-08-06)</h2>

<ul>
  <li>Add time_per_frame parameter to adjust frame rate</li>
  <li>Fix: use 64 bit integers to store control valueas and ranges</li>
  <li>Contributors: Marcus M. Scheunemann, Sander G. van Dijk</li>
</ul>

<h2 id="040-2021-01-29">0.4.0 (2021-01-29)</h2>

<ul>
  <li>Read-only parameters as now properly marked as such</li>
  <li>Use C-style strings for logging macros to adapt to new formatting
constraints See:
<a href="https://index.ros.org/doc/ros2/Releases/Release-Galactic-Geochelone/#change-in-rclcpp-s-logging-macros">https://index.ros.org/doc/ros2/Releases/Release-Galactic-Geochelone/#change-in-rclcpp-s-logging-macros</a>
</li>
  <li>Add support monochrome cameras</li>
  <li>Contributors: Chris Lalancette, Sander G. van Dijk, nfry321</li>
</ul>

<h2 id="031-2020-11-07">0.3.1 (2020-11-07)</h2>

<ul>
  <li>Handle non discrete frame sizes; fixes support for Raspberry Pi +
Camera Module</li>
  <li>Contributors: Sander G. van Dijk</li>
</ul>

<h2 id="030-2020-09-26">0.3.0 (2020-09-26)</h2>

<ul>
  <li>Publishing is done on private topics to enable remapping of the
namespace</li>
  <li>CameraInfo is published in intra-process communication mode</li>
  <li>Added parameter descriptions</li>
  <li>Contributors: Christian Rauch, Marcus M. Scheunemann, Sander G. van
Dijk</li>
</ul>

<h2 id="021-2020-08-06">0.2.1 (2020-08-06)</h2>

<ul>
  <li>Hold reference to parameters callback handle</li>
  <li>Contributors: Jacob Perron</li>
</ul>

<h2 id="020-2020-06-13">0.2.0 (2020-06-13)</h2>

<ul>
  <li>Set frame_id on published images, default to "camera"</li>
  <li>Output FOURCC code of available formats</li>
  <li>Add parameter for setting the pixel format Default to using YUYV</li>
  <li>Contributors: Sander G. van Dijk</li>
</ul>

<h2 id="011-2019-08-12">0.1.1 (2019-08-12)</h2>

<ul>
  <li>Add missing rclcpp_components build dependency</li>
  <li>Contributors: Sander G. van Dijk</li>
</ul>

<h2 id="010-2019-08-11">0.1.0 (2019-08-11)</h2>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/v4l2_camera/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#github">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp_components#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp_components#github">rclcpp_components  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_ros#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_ros#github">ament_cmake_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#github">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#github-deps" class="endoftree">
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#github">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/sensor_msgs#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/sensor_msgs#github">sensor_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/camera_info_manager#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/camera_info_manager#github">camera_info_manager  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/cv_bridge#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/cv_bridge#github">cv_bridge  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/image_transport#github-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/image_transport#github">image_transport  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No direct system dependencies.</em>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/lidarbot_bringup#github">lidarbot_bringup</a></td>
                      <td class="text-center">
                        
                        <a href="/p/lidarbot_bringup#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/oasis_drivers_py#github">oasis_drivers_py</a></td>
                      <td class="text-center">
                        
                        <a href="/p/oasis_drivers_py#github-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>v4l2_camera</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="github-question-list" class="panel-body" style="display: none;"></div>
      <div id="github-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/v4l2_camera+github">here</a>.</p>
      </div>
      <div id="github-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/rigbetellabs/tortoisebot.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/github/p/v4l2_camera"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/rigbetellabs/tortoisebot/tree/ros2-humble/v4l2_camera"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>noetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/v4l2_camera">v4l2_camera</a> <small>package from <a style="text-decoration:none" href="/r/v4l2_camera/gitlab-boldhearts-ros2_v4l2_camera">v4l2_camera</a> repo</small>
        </h3>
          
            
            
              <span class="label label-default pkg-label">

v4l2_camera
</span>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/galactic/p/v4l2_camera"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://gitlab.com/boldhearts/ros2_v4l2_camera/-/tree/galactic/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="galactic-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#galactic-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#galactic-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#galactic-deps" data-toggle="tab"><span class="label label-primary">8</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#galactic-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#galactic-questions" data-toggle="tab"><span id="galactic-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="galactic-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>0.5.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache License 2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://gitlab.com/boldhearts/ros2_v4l2_camera.git">https://gitlab.com/boldhearts/ros2_v4l2_camera.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">galactic</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2022-08-19
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/v4l2_camera/#galactic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/v4l2_camera/#galactic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/v4l2_camera/#galactic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            A ROS 2 camera driver using Video4Linux2
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Sander G. van Dijk</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Sander G. van Dijk</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://gitlab.com/boldhearts/ros2_v4l2_camera/-/tree/galactic/./README.md" title="Open in git repository">README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="v4l2_camera">v4l2_camera</h1>

<p>A ROS 2 camera driver using Video4Linux2 (V4L2).</p>

<h2 id="installation">Installation</h2>
<p><a href="https://medium.com/swlh/raspberry-pi-ros-2-camera-eef8f8b94304">This article</a> details how to build and run this package. It focuses on Raspberry Pi OS with the Raspberry Pi Camera Module V2 but should generalise for most systems.</p>

<h3 id="ros-package-install">ROS package install</h3>
<p>This is available from the ROS package repositories and can therefore be installed with the following command and your ROS version name:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apt-get install ros-&lt;ros_version&gt;-v4l2-camera
</code></pre></div></div>

<h3 id="building-from-source">Building from source</h3>
<p>If you need to modify the code or ensure you have the latest update you will need to clone this repo then build the package.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git clone --branch foxy https://gitlab.com/boldhearts/ros2_v4l2_camera.git src/v4l2_camera
$ colcon build
</code></pre></div></div>

<p>Most users will also want to set up compressed transport using the dependencies below.</p>

<h3 id="usage">Usage</h3>
<p>Publish camera images, using the default parameters:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    ros2 run v4l2_camera v4l2_camera_node
</code></pre></div></div>

<p>Preview the image (open another terminal):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    ros2 run rqt_image_view rqt_image_view
</code></pre></div></div>

<h2 id="dependencies">Dependencies</h2>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">image_transport</code> - makes it possible to set up compressed transport
of the images, as described below.</p>

    <p>The ROS 2 port of <code class="language-plaintext highlighter-rouge">image_transport</code> in the <code class="language-plaintext highlighter-rouge">image_common</code>
  repository is needed inside of your workspace:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  git clone --branch ros2 https://github.com/ros-perception/image_common.git src/image_common
</code></pre></div>    </div>

    <p>Note that <code class="language-plaintext highlighter-rouge">image_transport</code> only supports raw transport by default
  and needs additional plugins to actually provide compression; see
  below how to do this.</p>
  </li>
</ul>

<h2 id="nodes">Nodes</h2>

<h3 id="v4l2_camera_node">v4l2_camera_node</h3>

<p>The <code class="language-plaintext highlighter-rouge">v4l2_camera_node</code> interfaces with standard V4L2 devices and
publishes images as <code class="language-plaintext highlighter-rouge">sensor_msgs/Image</code> messages.</p>

<h4 id="published-topics">Published Topics</h4>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">/image_raw</code> - <code class="language-plaintext highlighter-rouge">sensor_msgs/Image</code></p>

    <p>The image.</p>
  </li>
</ul>

<h4 id="parameters">Parameters</h4>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">video_device</code> - <code class="language-plaintext highlighter-rouge">string</code>, default: <code class="language-plaintext highlighter-rouge">"/dev/video0"</code></p>

    <p>The device the camera is on.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">pixel_format</code> - <code class="language-plaintext highlighter-rouge">string</code>, default: <code class="language-plaintext highlighter-rouge">"YUYV"</code></p>

    <p>The pixel format to request from the camera. Must be a valid four
  character ‘<a href="http://fourcc.org/">FOURCC</a>’ code <a href="https://linuxtv.org/downloads/v4l-dvb-apis/uapi/v4l/videodev.html">supported by
  V4L2</a>
  and by your camera. The node outputs the available formats
  supported by your camera when started.<br>
  Currently supported: <code class="language-plaintext highlighter-rouge">"YUYV"</code> or <code class="language-plaintext highlighter-rouge">"GREY"</code></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">output_encoding</code> - <code class="language-plaintext highlighter-rouge">string</code>, default: <code class="language-plaintext highlighter-rouge">"rgb8"</code></p>

    <p>The encoding to use for the output image.<br>
  Currently supported: <code class="language-plaintext highlighter-rouge">"rgb8"</code>, <code class="language-plaintext highlighter-rouge">"yuv422"</code> or <code class="language-plaintext highlighter-rouge">"mono8"</code>.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">image_size</code> - <code class="language-plaintext highlighter-rouge">integer_array</code>, default: <code class="language-plaintext highlighter-rouge">[640, 480]</code></p>

    <p>Width and height of the image.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">time_per_frame</code> - <code class="language-plaintext highlighter-rouge">integer_array</code>, default: current device setting</p>

    <p>The time between two successive frames. The expected value is a
  ratio defined by an array of 2 integers. For instance, a value of
  <code class="language-plaintext highlighter-rouge">[1, 30]</code> sets a period of 1/30, and thus a framrate of 30Hz.</p>

    <p>If the provided period is not supported, the driver may choose
  another period near to it. In that case the parameter change is
  reported to have failed.</p>
  </li>
  <li>
    <p>Camera Control Parameters</p>

    <p>Camera controls, such as brightness, contrast, white balance, etc,
  are automatically made available as parameters. The driver node
  enumerates all controls, and creates a parameter for each, with
  the corresponding value type. The parameter name is derived from
  the control name reported by the camera driver, made lower case,
  commas removed, and spaces replaced by underscores. So
  <code class="language-plaintext highlighter-rouge">Brightness</code> becomes <code class="language-plaintext highlighter-rouge">brightness</code>, and <code class="language-plaintext highlighter-rouge">White Balance, Automatic</code>
  becomes <code class="language-plaintext highlighter-rouge">white_balance_automatic</code>.</p>
  </li>
</ul>

<h2 id="compressed-transport">Compressed Transport</h2>

<p>By default <code class="language-plaintext highlighter-rouge">image_transport</code> only supports raw transfer, plugins are
required to enable compression. Standard ones are available in the
<a href="https://github.com/ros-perception/image_transport_plugins"><code class="language-plaintext highlighter-rouge">image_transport_plugins</code></a>
repository. These depend on the OpenCV facilities provided by the
<code class="language-plaintext highlighter-rouge">vision_opencv</code> repository. You can clone these into your workspace to
get these:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd path/to/workspace
git clone https://github.com/ros-perception/vision_opencv.git --branch ros2 src/vision_opencv
git clone https://github.com/ros-perception/image_transport_plugins.git --branch ros2 src/image_transport_plugins
</code></pre></div></div>

<h3 id="building-ubuntu">Building: Ubuntu</h3>

<p>The following packages are required to be able to build the plugins:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install libtheora-dev libogg-dev libboost-python-dev
</code></pre></div></div>

<h3 id="building-arch">Building: Arch</h3>

<p>To get the plugins compiled on Arch Linux, a few special steps are
needed:</p>

<ul>
  <li>Arch provides OpenCV 4.x, but OpenCV 3.x is required</li>
  <li>Arch provides VTK 8.2, but VTK 8.1 is required</li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">boost-python</code> is used, which <a href="https://bugs.archlinux.org/task/55798">needs to be linked to python libs
explicitly</a>:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  colcon build --symlink-install --packages-select cv_bridge --cmake-args "-DCMAKE_CXX_STANDARD_LIBRARIES=-lpython3.7m"
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="usage-1">Usage</h3>

<p>If the compression plugins are compiled and installed in the current
workspace, they will be automatically used by the driver and an
additional <code class="language-plaintext highlighter-rouge">/image_raw/compressed</code> topic will be available.</p>

<p>Neither Rviz2 or <code class="language-plaintext highlighter-rouge">showimage</code> use <code class="language-plaintext highlighter-rouge">image_transport</code> (yet). Therefore, to
be able to view the compressed topic, it needs to be republished
uncompressed. <code class="language-plaintext highlighter-rouge">image_transport</code> comes with the <code class="language-plaintext highlighter-rouge">republish</code> node to do
this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run image_transport republish compressed in/compressed:=image_raw/compressed raw out:=image_raw/uncompressed
</code></pre></div></div>

<p>The parameters mean:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">compressed</code> - the transport to use for input, in this case
‘compressed’. Alternative: <code class="language-plaintext highlighter-rouge">raw</code>, to republish the raw <code class="language-plaintext highlighter-rouge">/image_raw</code>
topic</li>
  <li>
<code class="language-plaintext highlighter-rouge">in/compressed:=image_raw/compressed</code> - by default, <code class="language-plaintext highlighter-rouge">republish</code> uses
the topics <code class="language-plaintext highlighter-rouge">in</code> and <code class="language-plaintext highlighter-rouge">out</code>, or <code class="language-plaintext highlighter-rouge">in/compressed</code> for example if the
input transport is ‘compressed’. This parameter is a ROS remapping
rule to map those names to the actual topic to use.</li>
  <li>
<code class="language-plaintext highlighter-rouge">raw</code> - the transport to use for output. If omitted, all available
transports are provided.</li>
  <li>
<code class="language-plaintext highlighter-rouge">out:=image_raw/uncompressed</code> - remapping of the output topic.</li>
</ul>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-v4l2_camera">Changelog for package v4l2_camera</h1>

<h2 id="050-2022-08-06">0.5.0 (2022-08-06)</h2>

<ul>
  <li>Add time_per_frame parameter to adjust frame rate</li>
  <li>Fix: use 64 bit integers to store control valueas and ranges</li>
  <li>Contributors: Marcus M. Scheunemann, Sander G. van Dijk</li>
</ul>

<h2 id="040-2021-01-29">0.4.0 (2021-01-29)</h2>

<ul>
  <li>Read-only parameters as now properly marked as such</li>
  <li>Use C-style strings for logging macros to adapt to new formatting
constraints See:
<a href="https://index.ros.org/doc/ros2/Releases/Release-Galactic-Geochelone/#change-in-rclcpp-s-logging-macros">https://index.ros.org/doc/ros2/Releases/Release-Galactic-Geochelone/#change-in-rclcpp-s-logging-macros</a>
</li>
  <li>Add support monochrome cameras</li>
  <li>Contributors: Chris Lalancette, Sander G. van Dijk, nfry321</li>
</ul>

<h2 id="031-2020-11-07">0.3.1 (2020-11-07)</h2>

<ul>
  <li>Handle non discrete frame sizes; fixes support for Raspberry Pi +
Camera Module</li>
  <li>Contributors: Sander G. van Dijk</li>
</ul>

<h2 id="030-2020-09-26">0.3.0 (2020-09-26)</h2>

<ul>
  <li>Publishing is done on private topics to enable remapping of the
namespace</li>
  <li>CameraInfo is published in intra-process communication mode</li>
  <li>Added parameter descriptions</li>
  <li>Contributors: Christian Rauch, Marcus M. Scheunemann, Sander G. van
Dijk</li>
</ul>

<h2 id="021-2020-08-06">0.2.1 (2020-08-06)</h2>

<ul>
  <li>Hold reference to parameters callback handle</li>
  <li>Contributors: Jacob Perron</li>
</ul>

<h2 id="020-2020-06-13">0.2.0 (2020-06-13)</h2>

<ul>
  <li>Set frame_id on published images, default to "camera"</li>
  <li>Output FOURCC code of available formats</li>
  <li>Add parameter for setting the pixel format Default to using YUYV</li>
  <li>Contributors: Sander G. van Dijk</li>
</ul>

<h2 id="011-2019-08-12">0.1.1 (2019-08-12)</h2>

<ul>
  <li>Add missing rclcpp_components build dependency</li>
  <li>Contributors: Sander G. van Dijk</li>
</ul>

<h2 id="010-2019-08-11">0.1.0 (2019-08-11)</h2>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/v4l2_camera/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#galactic">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp_components#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp_components#galactic">rclcpp_components  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_ros#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_ros#galactic">ament_cmake_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#galactic">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#galactic">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/sensor_msgs#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/sensor_msgs#galactic">sensor_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/image_transport#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/image_transport#galactic">image_transport  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/camera_info_manager#galactic-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/camera_info_manager#galactic">camera_info_manager  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No direct system dependencies.</em>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <em>No known dependants.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>v4l2_camera</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="galactic-question-list" class="panel-body" style="display: none;"></div>
      <div id="galactic-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/v4l2_camera+galactic">here</a>.</p>
      </div>
      <div id="galactic-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://gitlab.com/boldhearts/ros2_v4l2_camera.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/galactic/p/v4l2_camera"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://gitlab.com/boldhearts/ros2_v4l2_camera/-/tree/galactic/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/v4l2_camera">v4l2_camera</a> <small>package from <a style="text-decoration:none" href="/r/v4l2_camera/gitlab-boldhearts-ros2_v4l2_camera">v4l2_camera</a> repo</small>
        </h3>
          
            
            
              <span class="label label-default pkg-label">

v4l2_camera
</span>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/iron/p/v4l2_camera"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://gitlab.com/boldhearts/ros2_v4l2_camera/-/tree/rolling/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="iron-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#iron-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#iron-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#iron-deps" data-toggle="tab"><span class="label label-primary">9</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#iron-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#iron-questions" data-toggle="tab"><span id="iron-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="iron-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>0.7.1</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>Apache License 2.0</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    AMENT_CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://gitlab.com/boldhearts/ros2_v4l2_camera.git">https://gitlab.com/boldhearts/ros2_v4l2_camera.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">rolling</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2024-04-30
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/v4l2_camera/#iron-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/v4l2_camera/#iron-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/v4l2_camera/#iron-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            A ROS 2 camera driver using Video4Linux2
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <em>No additional links.</em>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Sander G. van Dijk</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Sander G. van Dijk</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://gitlab.com/boldhearts/ros2_v4l2_camera/-/tree/rolling/./README.md" title="Open in git repository">README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="v4l2_camera">v4l2_camera</h1>

<p>A ROS 2 camera driver using Video4Linux2 (V4L2).</p>

<h2 id="features">Features</h2>

<ul>
  <li>Lists and exposes all user-settable controls of your camera as ROS 2
parameters.</li>
  <li>Uses <code class="language-plaintext highlighter-rouge">cv_bridge</code> to convert raw frames to ROS 2 messages, so
supports a wide range of encoding conversions.</li>
  <li>Supports <code class="language-plaintext highlighter-rouge">image_transport</code> to enable compression.</li>
  <li>Supports composing the camera node and using ROS 2 intra-process
commmunication with zero-copy messaging.</li>
</ul>

<h2 id="supported-cameras">Supported Cameras</h2>

<p>The package should work with any camera that properly supports V4L2,
which for instance should include most USB cameras. A good way to
check your camera is to install the <code class="language-plaintext highlighter-rouge">v4l2-utils</code> package (on Debian
based systems), and run the <code class="language-plaintext highlighter-rouge">v4l2-compliance</code> tool. If that reports
no, or limited amounts of, failures or warnings, you should be good to
go.</p>

<p>The following cameras have in any case been proven to work:</p>

<table>
  <thead>
    <tr>
      <th>Brand</th>
      <th>Type</th>
      <th>Driver</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Logitech</td>
      <td>C920</td>
      <td><code class="language-plaintext highlighter-rouge">uvcvideo</code></td>
      <td> </td>
    </tr>
    <tr>
      <td>Logitech</td>
      <td>BRIO 4K Pro</td>
      <td><code class="language-plaintext highlighter-rouge">uvcvideo</code></td>
      <td> </td>
    </tr>
    <tr>
      <td>Microdia</td>
      <td>Integrated Webcam HD</td>
      <td><code class="language-plaintext highlighter-rouge">uvcvideo</code></td>
      <td>Integrated laptop camera, e.g. Dell XPS series</td>
    </tr>
    <tr>
      <td>Raspberry Pi</td>
      <td>Camera Module V2 (Noir)</td>
      <td><code class="language-plaintext highlighter-rouge">bm2835 mmal</code></td>
      <td>See Raspberry Pi Support notes below</td>
    </tr>
  </tbody>
</table>

<p>Do let us know about other devices you successfully use this driver
for, for instance through a merge request.</p>

<h3 id="raspberry-pi-support">Raspberry Pi Support</h3>

<p>Raspberry Pi has moved to a <a href="https://www.raspberrypi.com/news/an-open-source-camera-stack-for-raspberry-pi-using-libcamera/">new camera stack based on
libcamera</a>. As
part of this, by default the Broadcom Unicam driver will be loaded for
Raspberry Pi camera modules. This is still a V4L2 driver, however it
has a very limited scope and only provides raw Bayer images. Any
available Image Signal Processors, that can turn those raw images into
more useful formats such as RGB or JPEG, are now exposed as separate
V4L2 devices. This means that responsibility is pushed to an
application such as <code class="language-plaintext highlighter-rouge">v4l2_camera</code> to operate the multiple devices,
rather than the single all-in-one device that most other V4L2 drivers
expose. Supporting this is out of scope of this package.</p>

<p>You can find out whether the Unicam driver is used by installing the
<code class="language-plaintext highlighter-rouge">v4l-utils</code> package, running:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>v4l2-ctl <span class="nt">-D</span>

</code></pre></div></div>
<p>and checking for <code class="language-plaintext highlighter-rouge">bcm2835-unicam</code>. You can also install and run the
<code class="language-plaintext highlighter-rouge">v4l2_camera</code> node, which mentions<code class="language-plaintext highlighter-rouge">unicam</code> as part of the driver name.</p>

<p>Luckily, for at least some devices, it is possible to load the legacy
driver instead of the new Unicam driver, by <a href="https://www.raspberrypi.com/documentation/computers/config_txt.html">changing settings in the
<code class="language-plaintext highlighter-rouge">/boot/config.txt</code>
file</a>:</p>
<ul>
  <li>Set
<a href="https://www.raspberrypi.com/documentation/computers/config_txt.html#camera_auto_detect"><code class="language-plaintext highlighter-rouge">camera_autodetect=0</code></a>
to prevent hardware overlays that use the Unicam driver to be
loaded.</li>
  <li>Set
<a href="https://www.raspberrypi.com/documentation/computers/config_txt.html#start_x-start_debug"><code class="language-plaintext highlighter-rouge">start_x=1</code></a>
to enable the camera using the legacy driver.</li>
</ul>

<p>Now when you reboot and run <code class="language-plaintext highlighter-rouge">v4l2-ctl -D</code> again, or the <code class="language-plaintext highlighter-rouge">v4l2_camera</code>
node, you should see the driver being referred to as <code class="language-plaintext highlighter-rouge">bm2835 mmal</code>
instead. The <code class="language-plaintext highlighter-rouge">v4l2_camera</code> node should then operate as normal.</p>

<h2 id="installation">Installation</h2>

<h3 id="ros-package-install">ROS package install</h3>
<p>This package is available from the ROS package repositories and can
therefore be installed with the following command and your ROS version
name:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>ros-<span class="k">${</span><span class="nv">ROS_DISTRO</span><span class="k">}</span><span class="nt">-v4l2-camera</span>

</code></pre></div></div>

<h3 id="building-from-source">Building from source</h3>
<p>To build this package from source, simply clone this repository into
your workspace, install dependencies, and build it using <code class="language-plaintext highlighter-rouge">colcon</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone <span class="nt">--branch</span> <span class="k">${</span><span class="nv">ROS_DISTRO</span><span class="k">}</span> https://gitlab.com/boldhearts/ros2_v4l2_camera.git src/v4l2_camera
rosdep <span class="nb">install</span> <span class="nt">--from-paths</span> src/v4l2_camera <span class="nt">--ignore-src</span> <span class="nt">-r</span> <span class="nt">-y</span>
colcon build

</code></pre></div></div>

<p>That should be sufficient in most cases, but <a href="https://medium.com/swlh/raspberry-pi-ros-2-camera-eef8f8b94304">this
article</a>
goes into further detail. It focuses on Raspberry Pi OS with the
Raspberry Pi Camera Module V2, but the steps should be generally
applicable.</p>

<h3 id="basic-usage">Basic Usage</h3>
<p>Run the camera node to publish camera images, using the default
parameters:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run v4l2_camera v4l2_camera_node

</code></pre></div></div>

<p>You can use <code class="language-plaintext highlighter-rouge">rqt-image-view</code> to preview the images (open another terminal):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>ros-<span class="k">${</span><span class="nv">ROS_DISTRO</span><span class="k">}</span><span class="nt">-rqt-image-view</span>
ros2 run rqt_image_view rqt_image_view

</code></pre></div></div>

<h2 id="nodes">Nodes</h2>

<h3 id="v4l2_camera_node">v4l2_camera_node</h3>

<p>The <code class="language-plaintext highlighter-rouge">v4l2_camera_node</code> interfaces with standard V4L2 devices and
publishes images as <code class="language-plaintext highlighter-rouge">sensor_msgs/Image</code> messages.</p>

<h4 id="published-topics">Published Topics</h4>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">/image_raw</code> - <code class="language-plaintext highlighter-rouge">sensor_msgs/Image</code></p>

    <p>The image.</p>
  </li>
</ul>

<h4 id="parameters">Parameters</h4>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">video_device</code> - <code class="language-plaintext highlighter-rouge">string</code>, default: <code class="language-plaintext highlighter-rouge">"/dev/video0"</code></p>

    <p>The device the camera is on.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">pixel_format</code> - <code class="language-plaintext highlighter-rouge">string</code>, default: <code class="language-plaintext highlighter-rouge">"YUYV"</code></p>

    <p>The pixel format to request from the camera. Must be a valid four
  character ‘<a href="http://fourcc.org/">FOURCC</a>’ code <a href="https://linuxtv.org/downloads/v4l-dvb-apis/uapi/v4l/videodev.html">supported by
  V4L2</a>
  and by your camera. The node outputs the available formats
  supported by your camera when started.
  Currently supported: <code class="language-plaintext highlighter-rouge">"YUYV"</code>, <code class="language-plaintext highlighter-rouge">"UYVY"</code>, or <code class="language-plaintext highlighter-rouge">"GREY"</code></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">output_encoding</code> - <code class="language-plaintext highlighter-rouge">string</code>, default: <code class="language-plaintext highlighter-rouge">"rgb8"</code></p>

    <p>The encoding to use for the output image. Can be any supported by
  <code class="language-plaintext highlighter-rouge">cv_bridge</code> given the input pixel format. Currently these are:</p>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">"YUYV"</code>: <code class="language-plaintext highlighter-rouge">"yuv422_yuy2"</code> (no conversion), or <code class="language-plaintext highlighter-rouge">"mono8"</code>, <code class="language-plaintext highlighter-rouge">"rgb8"</code>,
  <code class="language-plaintext highlighter-rouge">"bgr8"</code>, <code class="language-plaintext highlighter-rouge">"rgba8"</code> and <code class="language-plaintext highlighter-rouge">"bgra8"</code>, plus their 16 bit variants</li>
      <li>
<code class="language-plaintext highlighter-rouge">"UYVY"</code>: <code class="language-plaintext highlighter-rouge">"yuv422"</code> (no conversion), or <code class="language-plaintext highlighter-rouge">"mono8"</code>, <code class="language-plaintext highlighter-rouge">"rgb8"</code>,
  <code class="language-plaintext highlighter-rouge">"bgr8"</code>, <code class="language-plaintext highlighter-rouge">"rgba8"</code> and <code class="language-plaintext highlighter-rouge">"bgra8"</code>, plus their 16 bit variants</li>
      <li>
<code class="language-plaintext highlighter-rouge">"GREY"</code>: <code class="language-plaintext highlighter-rouge">"mono8"</code> (no conversion), <code class="language-plaintext highlighter-rouge">"rgb8"</code>,
  <code class="language-plaintext highlighter-rouge">"bgr8"</code>, <code class="language-plaintext highlighter-rouge">"rgba8"</code> and <code class="language-plaintext highlighter-rouge">"bgra8"</code>, plus their 16 bit variants</li>
    </ul>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">image_size</code> - <code class="language-plaintext highlighter-rouge">integer_array</code>, default: <code class="language-plaintext highlighter-rouge">[640, 480]</code></p>

    <p>Width and height of the image.</p>
  </li>
  <li>
    <p>Camera Control Parameters</p>

    <p>Camera controls, such as brightness, contrast, white balance, etc,
  are automatically made available as parameters. The driver node
  enumerates all controls, and creates a parameter for each, with
  the corresponding value type. The parameter name is derived from
  the control name reported by the camera driver, made lower case,
  commas removed, and spaces replaced by underscores. So
  <code class="language-plaintext highlighter-rouge">Brightness</code> becomes <code class="language-plaintext highlighter-rouge">brightness</code>, and <code class="language-plaintext highlighter-rouge">White Balance, Automatic</code>
  becomes <code class="language-plaintext highlighter-rouge">white_balance_automatic</code>.</p>
  </li>
</ul>

<h2 id="compressed-transport">Compressed Transport</h2>

<p>This package uses <code class="language-plaintext highlighter-rouge">image_transport</code> to publish images and make
compression possible. However, by default it only supports raw
transfer, additional plugins are required to enable compression. These
need to be installed separately, either cloning an building <a href="https://github.com/ros-perception/image_transport_plugins">them from
source</a>, or
installing the ready made package:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>ros-<span class="k">${</span><span class="nv">ROS_DISTRO</span><span class="k">}</span><span class="nt">-image-transport-plugins</span>

</code></pre></div></div>

<p>Once installed, they will be automatically used by the driver and
additional topics will be available, including
<code class="language-plaintext highlighter-rouge">/image_raw/compressed</code>.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="changelog-for-package-v4l2_camera">Changelog for package v4l2_camera</h1>

<h2 id="071-2024-04-30">0.7.1 (2024-04-30)</h2>

<ul>
  <li>Fix deprecated cv_bridge header</li>
  <li>Avoid unnecessary memory operations by using std::vector::assign()</li>
  <li>Add camera frame id to camera info message</li>
  <li>Contributors: Błażej Sowa, Martin Fraunhofer, Muzhyk Belarus,
Sander G. van Dijk</li>
</ul>

<h2 id="070-2023-05-01">0.7.0 (2023-05-01)</h2>

<ul>
  <li>Don't re-queue buffer before getting the data</li>
  <li>Break out parameter handler into separate class, reducing
unnecessary startup warnings.</li>
  <li>Add UYVY pixel format</li>
  <li>Contributors: Martin Fraunhofer, Sander G. van Dijk</li>
</ul>

<h2 id="061-2022-10-08">0.6.1 (2022-10-08)</h2>

<ul>
  <li>Rename include to resolve deprecation warning.</li>
  <li>Contributors: Sander G. van Dijk, Steven! Ragnarök</li>
</ul>

<h2 id="060-2022-09-04">0.6.0 (2022-09-04)</h2>

<ul>
  <li>Use cv_bridge to perform conversions</li>
  <li>Fix: Image topic should be image_raw, not raw_image, in README.md</li>
  <li>Fix: Properly declare camera_info_url parameter</li>
  <li>Contributors: Marcus M. Scheunemann, Sander G. van Dijk, ijnek</li>
</ul>

<h2 id="050-2022-08-06">0.5.0 (2022-08-06)</h2>

<ul>
  <li>Add time_per_frame parameter to adjust frame rate</li>
  <li>Fix: use 64 bit integers to store control valueas and ranges</li>
  <li>Contributors: Marcus M. Scheunemann, Sander G. van Dijk</li>
</ul>

<h2 id="040-2021-01-29">0.4.0 (2021-01-29)</h2>

<ul>
  <li>Read-only parameters as now properly marked as such</li>
  <li>Use C-style strings for logging macros to adapt to new formatting
constraints See:
<a href="https://index.ros.org/doc/ros2/Releases/Release-Galactic-Geochelone/#change-in-rclcpp-s-logging-macros">https://index.ros.org/doc/ros2/Releases/Release-Galactic-Geochelone/#change-in-rclcpp-s-logging-macros</a>
</li>
  <li>Add support monochrome cameras</li>
  <li>Contributors: Chris Lalancette, Sander G. van Dijk, nfry321</li>
</ul>

<h2 id="031-2020-11-07">0.3.1 (2020-11-07)</h2>

<ul>
  <li>Handle non discrete frame sizes; fixes support for Raspberry Pi +
Camera Module</li>
  <li>Contributors: Sander G. van Dijk</li>
</ul>

<h2 id="030-2020-09-26">0.3.0 (2020-09-26)</h2>

<ul>
  <li>Publishing is done on private topics to enable remapping of the
namespace</li>
  <li>CameraInfo is published in intra-process communication mode</li>
  <li>Added parameter descriptions</li>
  <li>Contributors: Christian Rauch, Marcus M. Scheunemann, Sander G. van
Dijk</li>
</ul>

<h2 id="021-2020-08-06">0.2.1 (2020-08-06)</h2>

<ul>
  <li>Hold reference to parameters callback handle</li>
  <li>Contributors: Jacob Perron</li>
</ul>

<h2 id="020-2020-06-13">0.2.0 (2020-06-13)</h2>

<ul>
  <li>Set frame_id on published images, default to "camera"</li>
  <li>Output FOURCC code of available formats</li>
  <li>Add parameter for setting the pixel format Default to using YUYV</li>
  <li>Contributors: Sander G. van Dijk</li>
</ul>

<h2 id="011-2019-08-12">0.1.1 (2019-08-12)</h2>

<ul>
  <li>Add missing rclcpp_components build dependency</li>
  <li>Contributors: Sander G. van Dijk</li>
</ul>

<h2 id="010-2019-08-11">0.1.0 (2019-08-11)</h2>
</div>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/v4l2_camera/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th class="text-center">Deps</th>
                  <th style="width: 100%">Name</th>
                </thead>
                <tbody>
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp#iron">rclcpp  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/rclcpp_components#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/rclcpp_components#iron">rclcpp_components  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_cmake_ros#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_cmake_ros#iron">ament_cmake_ros  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_auto#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_auto#iron">ament_lint_auto  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/ament_lint_common#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/ament_lint_common#iron">ament_lint_common  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/sensor_msgs#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/sensor_msgs#iron">sensor_msgs  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/camera_info_manager#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/camera_info_manager#iron">camera_info_manager  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/cv_bridge#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/cv_bridge#iron">cv_bridge  </a></td>
                      </tr>
                    
                  
                    
                    
                      <tr>
                        <td class="text-center">
                          
                          <a href="/p/image_transport#iron-deps" >
                            <span class="glyphicon glyphicon-arrow-left" title="Package dependencies"></span>
                          </a>
                        </td>
                        <td><a href="/p/image_transport#iron">image_transport  </a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No direct system dependencies.</em>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <em>No known dependants.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>v4l2_camera</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="iron-question-list" class="panel-body" style="display: none;"></div>
      <div id="iron-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/v4l2_camera+iron">here</a>.</p>
      </div>
      <div id="iron-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://gitlab.com/boldhearts/ros2_v4l2_camera.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/iron/p/v4l2_camera"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://gitlab.com/boldhearts/ros2_v4l2_camera/-/tree/rolling/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>



<script id="question-list-template" type="text/html">
  <p>
    Browse <a href="https://robotics.stackexchange.com/questions/tagged/v4l2_camera?tab=Newest">recent questions</a>
    or see the <a href="https://robotics.stackexchange.com/questions/tagged/v4l2_camera?tab=Votes">highest voted ones</a>.
  </p>
  
  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">Title</th>
        <th scope="col">Answered?</th>
        <th scope="col">Created</th>
        <th scope="col">Active</th>
      </tr>
    </thead>
    <tbody>
      {{#questions}}
      <tr>
        <th scope="row"><a href="{{link}}">{{title}}</a><br><small>Tags: {{strtags}}</small></th>
        <th>{{answered}}</th>
        <th>{{created}}</th>
        <th>{{active}}</th>
      </tr>
      {{/questions}}
    </tbody>
  </table>
  {{#has_more}}
  <hr>
  <h4>Additional questions are available at
    <a href="https://robotics.stackexchange.com/questions/tagged/{{name}}?tab=Newest">Robotics Stack Exchange</a>
  </h4>
  {{/has_more}}
  
</script>

<script type="text/javascript" src="/js/mustache.js"></script>
<script type="text/javascript">
  jQuery(function() {
    jQuery.getJSON(url="https://api.stackexchange.com/2.3/questions?order=desc&site=robotics" +
                       "&tagged=v4l2_camera&pagesize=50&sort=activity")
    .done(function(feed) {
      if (feed.items.length > 0) {
        var question_count_str = (feed.has_more ? '>' : '') + String(feed.items.length)
        const questions = feed.items.map(
          function(question) {
            question.id = Math.round(Math.random() * 99999.0);
            question.created = (new Date(question.creation_date * 1000)).toDateString()
            question.active = (new Date(question.last_activity_date * 1000)).toDateString()
            question.answered = question.is_answered ? "Yes" : "No"
            question.strtags = question.tags.join(' ')
            return question;
          });
        const template = jQuery("#question-list-template").text();
        Mustache.parse(template);
        var rendered = Mustache.render(
          template, 
          { questions: questions,
            has_more: feed.has_more,
            name: "v4l2_camera"
          }
        );
      }
      //   TODO(tfoote) Resolve images
      //   jQuery("#-question-list img").each(function() {
      //     if (jQuery(this).attr("src").startsWith("/upfiles")) {
      //        jQuery(this).attr("src", "https://answers.ros.org" + jQuery(this).attr("src"));
      //     }
      //   });
      
      if (feed.items.length > 0) {
        jQuery("#humble-question-list").html(rendered);
        jQuery("#humble-question-list").show();
      } else {
        jQuery("#humble-no-question-list").show();
      }
      jQuery("#humble-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#jazzy-question-list").html(rendered);
        jQuery("#jazzy-question-list").show();
      } else {
        jQuery("#jazzy-no-question-list").show();
      }
      jQuery("#jazzy-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#kilted-question-list").html(rendered);
        jQuery("#kilted-question-list").show();
      } else {
        jQuery("#kilted-no-question-list").show();
      }
      jQuery("#kilted-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#rolling-question-list").html(rendered);
        jQuery("#rolling-question-list").show();
      } else {
        jQuery("#rolling-no-question-list").show();
      }
      jQuery("#rolling-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#github-question-list").html(rendered);
        jQuery("#github-question-list").show();
      } else {
        jQuery("#github-no-question-list").show();
      }
      jQuery("#github-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#noetic-question-list").html(rendered);
        jQuery("#noetic-question-list").show();
      } else {
        jQuery("#noetic-no-question-list").show();
      }
      jQuery("#noetic-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#galactic-question-list").html(rendered);
        jQuery("#galactic-question-list").show();
      } else {
        jQuery("#galactic-no-question-list").show();
      }
      jQuery("#galactic-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#iron-question-list").html(rendered);
        jQuery("#iron-question-list").show();
      } else {
        jQuery("#iron-no-question-list").show();
      }
      jQuery("#iron-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#melodic-question-list").html(rendered);
        jQuery("#melodic-question-list").show();
      } else {
        jQuery("#melodic-no-question-list").show();
      }
      jQuery("#melodic-questions-count").text(question_count_str);
      
    })
    .fail(function(jqxhr, textStatus, error) {
      console.error("Failed to get question data: " + jqxhr.responseText);
      
      jQuery("#humble-get-question-fail").show();
      
      jQuery("#jazzy-get-question-fail").show();
      
      jQuery("#kilted-get-question-fail").show();
      
      jQuery("#rolling-get-question-fail").show();
      
      jQuery("#github-get-question-fail").show();
      
      jQuery("#noetic-get-question-fail").show();
      
      jQuery("#galactic-get-question-fail").show();
      
      jQuery("#iron-get-question-fail").show();
      
      jQuery("#melodic-get-question-fail").show();
      
    });
  });
</script>


<script type="text/javascript">
  $(document).ready(function() {
    setupDistroSwitch("humble");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
