<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Package: apriltag</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="http://index.rosdabbler.com/p/apriltag/">
    
    
    <link rel="icon" sizes="any" type="image/svg+xml" href="/assets/rosindex_logo.svg">

    

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie.js type="text/javascript"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
  </head>

  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">
        <!-- title -->
        <div class="col-xs-3" style="white-space:nowrap">
          <a class="site-title" href="/">
            <img src="/assets/rosindex_logo.svg" width="26" height="26" alt="ROS index logo" style="padding-bottom: 3px"/>
            ROS Index</a>
        </div>
        <!-- main internal links -->
        <div class="col-xs-6 text-center" style="padding:0px">
          <div class="btn-group hidden-xs" role="group" aria-label="..." style="padding: 6px">
            <div class="btn-group" role="group">
              <a href="/?search_packages=true" class="btn btn-default" role="button">Package List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/?search_repos=true" class="btn btn-default" role="button">Repository List</a>
            </div>
            <div class="btn-group" role="group">
              <a href="/search_deps" class="btn btn-default" role="button">System Dependencies</a>
            </div>
          </div>
          <div class="hidden-lg hidden-md hidden-sm">
            <button id="hLabel" class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Lists <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="hLabel">
              <li><a href="/?search_packages=true">Package List</a></li>
              <li><a href="/?search_repos=true">Repository List</a></li>
              <li><a href="/search_deps">System Dependencies</a></li>
            </ul>
          </div>
        </div>
        <!-- additional links -->
        <div class="col-xs-3 text-right" style="white-space:nowrap; padding:0px">
          <ul class="list-inline" style="margin-bottom:0px;">
            <li class="dropdown hidden-xs hidden-sm">
              <button id="rLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ROS Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="rLabel">
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-xs hidden-sm">
              <button id="aLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="aLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-md hidden-lg">
              <button id="qLabel" class="btn btn-link" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="qLabel">
                <li><a href="/about">About </a></li>
                <li><a href="/contribute">Contribute</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/stats">Stats</a></li>
                <hr style="margin:7px" />
                <li><a href="http://docs.ros.org/">Documentation</a></li>
                <li><a href="http://wiki.ros.org/Support">Support</a></li>
                <li><a href="http://discourse.ros.org/">Discussion Forum</a></li>
                <li><a href="http://status.ros.org/">Service Status</a></li>
                <li><a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a></li>
                <li><a href="https://docs.ros.org/en/ros2_packages/">Package API</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top: 20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/?search_packages=true">Packages</a></li>
        <li class="active">apriltag</li>
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="humble-option" class="distro-button btn btn-xs btn-primary" href="#humble" data="humble">
      <input type="radio" name="options" id="humble-radio" autocomplete="off"> humble
    </label>
  
    <label id="jazzy-option" class="distro-button btn btn-xs btn-primary" href="#jazzy" data="jazzy">
      <input type="radio" name="options" id="jazzy-radio" autocomplete="off"> jazzy
    </label>
  
    <label id="kilted-option" class="distro-button btn btn-xs btn-primary" href="#kilted" data="kilted">
      <input type="radio" name="options" id="kilted-radio" autocomplete="off"> kilted
    </label>
  
    <label id="rolling-option" class="distro-button btn btn-xs btn-primary" href="#rolling" data="rolling">
      <input type="radio" name="options" id="rolling-radio" autocomplete="off"> rolling
    </label>
  
    <label id="github-option" class="distro-button btn btn-xs btn-primary" href="#github" data="github">
      <input type="radio" name="options" id="github-radio" autocomplete="off"> github
    </label>
  
    <label id="noetic-option" class="distro-button btn btn-xs btn-primary" href="#noetic" data="noetic">
      <input type="radio" name="options" id="noetic-radio" autocomplete="off"> noetic
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="galactic" id="galactic-option" class=" older-distro-option"  href="#galactic">
          <a href="#galactic" data="galactic" id="galactic-button">galactic</a>
        </li>
      
        <li data="iron" id="iron-option" class=" older-distro-option"  href="#iron">
          <a href="#iron" data="iron" id="iron-button">iron</a>
        </li>
      
        <li data="melodic" id="melodic-option" class=" older-distro-option"  href="#melodic">
          <a href="#melodic" data="melodic" id="melodic-button">melodic</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-humble">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/apriltag">apriltag</a> <small>package from <a style="text-decoration:none" href="/r/apriltag/github-AprilRobotics-apriltag">apriltag</a> repo</small>
        </h3>
          
            
            
              <span class="label label-default pkg-label">

apriltag
</span>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/humble/p/apriltag"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/AprilRobotics/apriltag/tree/master/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="humble-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#humble-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#humble-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#humble-deps" data-toggle="tab"><span class="label label-primary">4</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#humble-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#humble-questions" data-toggle="tab"><span id="humble-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="humble-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>3.4.3</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">AprilTag is a visual fiducial system popular for robotics research.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/AprilRobotics/apriltag.git">https://github.com/AprilRobotics/apriltag.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-17
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">robotics</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/apriltag/#humble-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/apriltag/#humble-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/apriltag/#humble-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            AprilTag detector library
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="https://april.eecs.umich.edu/software/apriltag.html">Website</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Max Krogius</li>
                
                  <li>Wolfgang Merkt</li>
                
                  <li>Christian Rauch</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Edwin Olson</li>
                
                  <li>Max Krogius</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/AprilRobotics/apriltag/tree/master/./README.md" title="Open in git repository">README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="apriltag-3">AprilTag 3</h1>
<p>AprilTag is a visual fiducial system popular in robotics research. This repository contains the most recent version of AprilTag, AprilTag 3, which includes a faster (&gt;2x) detector, improved detection rate on small tags, flexible tag layouts, and pose estimation. AprilTag consists of a small C library with minimal dependencies.</p>

<p>You can find tag images for the pre-generated layouts <a href="https://github.com/AprilRobotics/apriltag-imgs">here</a>. We recommend using the tagStandard41h12 layout.</p>

<h1 id="table-of-contents">Table of Contents</h1>
<ul>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#papers">Papers</a></li>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#install">Install</a></li>
  <li>
<a href="https://github.com/AprilRobotics/apriltag/tree/master/./#usage">Usage</a>
    <ul>
      <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#choosing-a-tag-family">Choosing a Tag Family</a></li>
      <li>
<a href="https://github.com/AprilRobotics/apriltag/tree/master/./#getting-started-with-the-detector">Getting Started with the Detector</a>
        <ul>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#python">Python</a></li>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#c">C</a></li>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#matlab">Matlab</a></li>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#julia">Julia</a></li>
        </ul>
      </li>
      <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#upgrading-from-aprilTag-2">Upgrading from AprilTag 2</a></li>
      <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#opencv-integration">OpenCV Integration</a></li>
      <li>
<a href="https://github.com/AprilRobotics/apriltag/tree/master/./#tuning-the-detector-parameters">Tuning the Detector Parameters</a>
        <ul>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#increasing-speed">Increasing speed.</a></li>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#increasing-detection-distance">Increasing detection distance.</a></li>
        </ul>
      </li>
      <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#pose-estimation">Pose Estimation.</a></li>
    </ul>
  </li>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#debugging">Debugging</a></li>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#flexible-layouts">Flexible Layouts</a></li>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#support">Support</a></li>
</ul>

<h1 id="papers">Papers</h1>
<p>AprilTag is the subject of the following papers.</p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=olson2011tags">AprilTag: A robust and flexible visual fiducial system</a></p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=wang2016iros">AprilTag 2: Efficient and robust fiducial detection</a></p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=krogius2019iros">Flexible Layouts for Fiducial Tags</a></p>

<h1 id="install">Install</h1>

<p>Officially only Linux operating systems are supported, although users have had success installing on Windows too.</p>

<p>The default installation will place headers in /usr/local/include and shared library in /usr/local/lib. It also installs a pkg-config script into /usr/local/lib/pkgconfig and will install a python wrapper if python3 is installed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -DCMAKE_BUILD_TYPE=Release
cmake --build build --target install

</code></pre></div></div>
<p>This will build shared (*.so) libraries by default. If you need static (*.a) libraries set <code class="language-plaintext highlighter-rouge">BUILD_SHARED_LIBS</code> to <code class="language-plaintext highlighter-rouge">OFF</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -DCMAKE_BUILD_TYPE=Release -DBUILD_SHARED_LIBS=OFF
cmake --build build --target install

</code></pre></div></div>

<p>If you have Ninja (<code class="language-plaintext highlighter-rouge">sudo apt install ninja-build</code>) installed, you can use:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -GNinja -DCMAKE_BUILD_TYPE=Release
cmake --build build --target install

</code></pre></div></div>
<p>to generate and compile via the ninja build script. It will be much faster than with cmake’s default Makefile generator.</p>

<p>You can omit <code class="language-plaintext highlighter-rouge">--target install</code> if you only want to use this locally without installing.</p>

<h1 id="usage">Usage</h1>

<h2 id="choosing-a-tag-family">Choosing a Tag Family</h2>
<p>For the vast majority of applications, the tagStandard41h12 family will be the correct choice. You can find the images for the tags in the <a href="https://github.com/AprilRobotics/apriltag-imgs">apriltag-imgs repo</a>. Scale up the images in your favorite editor and print them out.</p>

<p>Some heuristics for when to choose other tag families:</p>
<ol>
  <li>If you need more tags, use tagStandard52h13</li>
  <li>If you need to maximize the use of space on a small circular object, use tagCircle49h12 (or tagCircle21h7).</li>
  <li>If you want to make a recursive tag use tagCustom48h12.</li>
  <li>If you want compatibility with the ArUcO detector use tag36h11</li>
</ol>

<p>If none of these fit your needs, generate your own custom tag family <a href="https://github.com/AprilRobotics/apriltag-generation">here</a>.</p>

<h2 id="getting-started-with-the-detector">Getting Started with the Detector</h2>
<h3 id="python">Python</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import cv2
import numpy as np
from apriltag import apriltag

imagepath = 'test.jpg'
image = cv2.imread(imagepath, cv2.IMREAD_GRAYSCALE)
detector = apriltag("tagStandard41h12")

detections = detector.detect(image)
</code></pre></div></div>

<p>Alternately you can use the AprilTag python bindings created by <a href="https://github.com/duckietown/lib-dt-apriltags">duckietown</a>.</p>

<h3 id="c">C</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>image_u8_t* im = image_u8_create_from_pnm("test.pnm");
if (im == NULL) {
    fprintf(stderr, "Failed to load pnm image.\n");
    exit(1);
}
apriltag_detector_t *td = apriltag_detector_create();
apriltag_family_t *tf = tagStandard41h12_create();
apriltag_detector_add_family(td, tf);
zarray_t *detections = apriltag_detector_detect(td, im);

for (int i = 0; i &lt; zarray_size(detections); i++) {
    apriltag_detection_t *det;
    zarray_get(detections, i, &amp;det);

    // Do stuff with detections here.
}
// Cleanup.
apriltag_detections_destroy(detections);
tagStandard41h12_destroy(tf);
apriltag_detector_destroy(td);
</code></pre></div></div>

<h3 id="matlab">Matlab</h3>

<p>Provided by third-party <a href="https://github.com/alddiaz/MATLAB_AprilTag3">here</a>.</p>

<h3 id="julia">Julia</h3>

<p>Provided by third-party <a href="https://github.com/JuliaRobotics/AprilTags.jl">here</a></p>

<h2 id="upgrading-from-apriltag-2">Upgrading from AprilTag 2</h2>
<p>For most use-cases this should be a drop in replacement.</p>

<ul>
  <li>The options refine_decode, refine_pose, and black_border have been removed.</li>
  <li>If you have generated your own families, you will need to regenerate the c code for those families. The java code however does not need to be regenerated so this should be quick and easy.</li>
</ul>

<h2 id="opencv-integration">OpenCV Integration</h2>

<p>Note that this library has no external dependencies. Most applications
will require, at minimum, a method for acquiring images.</p>

<p>See example/opencv_demo.cc for an example of using AprilTag in C++ with OpenCV.
This example application can be built by executing the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd examples
$ make opencv_demo
</code></pre></div></div>

<p>Image data in a cv::Mat object can be passed to AprilTag without creating
a deep copy. Simply create an image_u8_t header for the cv::Mat data buffer:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cv::Mat img;

image_u8_t img_header = { .width = img.cols,
    .height = img.rows,
    .stride = img.cols,
    .buf = img.data
};
</code></pre></div></div>

<h2 id="tuning-the-detector-parameters">Tuning the Detector Parameters</h2>
<h3 id="increasing-speed">Increasing speed.</h3>
<p>Increasing the quad_decimate parameter will increase the speed of the detector at the cost of detection distance.  If you have extra cpu cores to throw at the problem then you can increase nthreads. If your image is somewhat noisy, increasing the quad_sigma parameter can increase speed.</p>

<h3 id="increasing-detection-distance">Increasing detection distance.</h3>
<p>First choose an example image and run the detector with debug=1 to generate the debug images. These show the detector’s output at each step in the detection pipeline.
If the border of your tag is not being detected as a quadrilateral, decrease quad_decimate (all the way to 1 if necessary).
If the border of the tag is detected then experiment with changing decode_sharpening.</p>

<h2 id="pose-estimation">Pose Estimation.</h2>
<p>We provide a method for computing the pose of the tag as follows (alternately use OpenCv’s Pnp solver with SOLVEPNP_IPPE_SQUARE). You will need to include the apriltag_pose.h header file and then call the estimate_tag_pose function as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// First create an apriltag_detection_info_t struct using your known parameters.
apriltag_detection_info_t info;
info.det = det;
info.tagsize = tagsize;
info.fx = fx;
info.fy = fy;
info.cx = cx;
info.cy = cy;

// Then call estimate_tag_pose.
apriltag_pose_t pose;
double err = estimate_tag_pose(&amp;info, &amp;pose);
// Do something with pose.
...
</code></pre></div></div>

<p>where the parameters are as follows:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">det</code>: The tag detection struct (april_detection_t).</li>
  <li>
<code class="language-plaintext highlighter-rouge">tagsize</code>: The size of the tag in meters. Each tag design has a black border and a white border, but some designs have the white border on the inside and some have the black border on the inside. The tagsize is thus measured from where the two borders meet, see the figure below for an example.</li>
  <li>
<code class="language-plaintext highlighter-rouge">fx</code>, <code class="language-plaintext highlighter-rouge">fy</code>: The camera’s focal length (in pixels). For most cameras <code class="language-plaintext highlighter-rouge">fx</code> and <code class="language-plaintext highlighter-rouge">fy</code> will be equal or nearly so.</li>
  <li>
<code class="language-plaintext highlighter-rouge">cx</code>, <code class="language-plaintext highlighter-rouge">cy</code>: The camera’s focal center (in pixels). For most cameras this will be approximately the same as the image center.</li>
</ul>

<p>Note: The tag size should not be measured from the outside of the tag. The tag size is defined as the distance between the detection corners, or alternately, the length of the edge between the white border and the black border. The following illustration marks the detection corners with red Xs and the tag size with a red arrow for a tag from the 48h12Custom tag family.</p>

<p><img src="https://raw.githubusercontent.com/AprilRobotics/apriltag/master/./tag_size_48h12.png" alt="The tag size is the width of the edge between the white and black borders."></p>

<h3 id="coordinate-system">Coordinate System</h3>
<p>The coordinate system has the origin at the camera center. The z-axis points from the camera center out the camera lens. The x-axis is to the right in the image taken by the camera, and y is down. The tag’s coordinate frame is centered at the center of the tag. From the viewer’s perspective, the x-axis is to the right, y-axis down, and z-axis is into the tag.</p>

<h1 id="debugging">Debugging</h1>

<p>You can enable <a href="https://clang.llvm.org/docs/AddressSanitizer.html">AddressSanitizer</a> to debug memory issues for Debug builds by setting the <code class="language-plaintext highlighter-rouge">ASAN</code> option:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -GNinja -DCMAKE_BUILD_TYPE=Debug -DASAN=ON
cmake --build build

</code></pre></div></div>

<p>Mostly you can then run your executables as usual and inspect the sanitiser output. If you get a message like <code class="language-plaintext highlighter-rouge">ASan runtime does not come first in initial library list; you should either link runtime to your application or manually preload it with LD_PRELOAD.</code> you have to preload the corresponding <code class="language-plaintext highlighter-rouge">libasan.so.5</code> like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libasan.so.5 ./build/opencv_demo

</code></pre></div></div>

<h1 id="flexible-layouts">Flexible Layouts</h1>
<p>AprilTag 3 supports a wide variety of possible tag layouts in addition to the classic layout supported in AprilTag 2. The tag’s data bits can now go outside of the tag border, and it is also possible to define layouts with “holes” inside of the tag border where there are no data bits. In this repo we have included:</p>

<ul>
  <li>Two families of the new standard layout. This layout adds a layer of data bits around the outside of the tag border, increasing data density, and the number of possible tags, at the cost of a slight decrease in detection distance.</li>
  <li>Two families of circular tags.</li>
  <li>One family which has a hole in the middle. This could be used for example for drone applications by placing different sized tags inside of each other to allow detection over a wide range of distances.</li>
</ul>

<p>You can generate your own tag families using our other repo, <a href="https://github.com/AprilRobotics/apriltag-generation">AprilTag-Generation</a>.</p>

<h1 id="support">Support</h1>
<p>Please create an issue on this GitHub for any questions instead of sending a private message. This allows other people with the same question to find your answer.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <em>No CHANGELOG found.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/apriltag/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No dependencies on ROS packages.</em>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/python3-dev">python3-dev</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-numpy">python3-numpy</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/cmake">cmake</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/libopencv-dev">libopencv-dev</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/apriltag_ros#humble">apriltag_ros</a></td>
                      <td class="text-center">
                        
                        <a href="/p/apriltag_ros#humble-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/apriltag_detector_umich#humble">apriltag_detector_umich</a></td>
                      <td class="text-center">
                        
                        <a href="/p/apriltag_detector_umich#humble-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="humble-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>apriltag</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="humble-question-list" class="panel-body" style="display: none;"></div>
      <div id="humble-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/apriltag+humble">here</a>.</p>
      </div>
      <div id="humble-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/AprilRobotics/apriltag.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/humble/p/apriltag"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/AprilRobotics/apriltag/tree/master/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-jazzy">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/apriltag">apriltag</a> <small>package from <a style="text-decoration:none" href="/r/apriltag/github-AprilRobotics-apriltag">apriltag</a> repo</small>
        </h3>
          
            
            
              <span class="label label-default pkg-label">

apriltag
</span>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/jazzy/p/apriltag"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/AprilRobotics/apriltag/tree/master/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="jazzy-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#jazzy-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#jazzy-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#jazzy-deps" data-toggle="tab"><span class="label label-primary">4</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#jazzy-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#jazzy-questions" data-toggle="tab"><span id="jazzy-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="jazzy-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>3.4.3</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">AprilTag is a visual fiducial system popular for robotics research.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/AprilRobotics/apriltag.git">https://github.com/AprilRobotics/apriltag.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-17
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">robotics</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/apriltag/#jazzy-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/apriltag/#jazzy-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/apriltag/#jazzy-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            AprilTag detector library
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="https://april.eecs.umich.edu/software/apriltag.html">Website</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Max Krogius</li>
                
                  <li>Wolfgang Merkt</li>
                
                  <li>Christian Rauch</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Edwin Olson</li>
                
                  <li>Max Krogius</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/AprilRobotics/apriltag/tree/master/./README.md" title="Open in git repository">README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="apriltag-3">AprilTag 3</h1>
<p>AprilTag is a visual fiducial system popular in robotics research. This repository contains the most recent version of AprilTag, AprilTag 3, which includes a faster (&gt;2x) detector, improved detection rate on small tags, flexible tag layouts, and pose estimation. AprilTag consists of a small C library with minimal dependencies.</p>

<p>You can find tag images for the pre-generated layouts <a href="https://github.com/AprilRobotics/apriltag-imgs">here</a>. We recommend using the tagStandard41h12 layout.</p>

<h1 id="table-of-contents">Table of Contents</h1>
<ul>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#papers">Papers</a></li>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#install">Install</a></li>
  <li>
<a href="https://github.com/AprilRobotics/apriltag/tree/master/./#usage">Usage</a>
    <ul>
      <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#choosing-a-tag-family">Choosing a Tag Family</a></li>
      <li>
<a href="https://github.com/AprilRobotics/apriltag/tree/master/./#getting-started-with-the-detector">Getting Started with the Detector</a>
        <ul>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#python">Python</a></li>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#c">C</a></li>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#matlab">Matlab</a></li>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#julia">Julia</a></li>
        </ul>
      </li>
      <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#upgrading-from-aprilTag-2">Upgrading from AprilTag 2</a></li>
      <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#opencv-integration">OpenCV Integration</a></li>
      <li>
<a href="https://github.com/AprilRobotics/apriltag/tree/master/./#tuning-the-detector-parameters">Tuning the Detector Parameters</a>
        <ul>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#increasing-speed">Increasing speed.</a></li>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#increasing-detection-distance">Increasing detection distance.</a></li>
        </ul>
      </li>
      <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#pose-estimation">Pose Estimation.</a></li>
    </ul>
  </li>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#debugging">Debugging</a></li>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#flexible-layouts">Flexible Layouts</a></li>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#support">Support</a></li>
</ul>

<h1 id="papers">Papers</h1>
<p>AprilTag is the subject of the following papers.</p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=olson2011tags">AprilTag: A robust and flexible visual fiducial system</a></p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=wang2016iros">AprilTag 2: Efficient and robust fiducial detection</a></p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=krogius2019iros">Flexible Layouts for Fiducial Tags</a></p>

<h1 id="install">Install</h1>

<p>Officially only Linux operating systems are supported, although users have had success installing on Windows too.</p>

<p>The default installation will place headers in /usr/local/include and shared library in /usr/local/lib. It also installs a pkg-config script into /usr/local/lib/pkgconfig and will install a python wrapper if python3 is installed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -DCMAKE_BUILD_TYPE=Release
cmake --build build --target install

</code></pre></div></div>
<p>This will build shared (*.so) libraries by default. If you need static (*.a) libraries set <code class="language-plaintext highlighter-rouge">BUILD_SHARED_LIBS</code> to <code class="language-plaintext highlighter-rouge">OFF</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -DCMAKE_BUILD_TYPE=Release -DBUILD_SHARED_LIBS=OFF
cmake --build build --target install

</code></pre></div></div>

<p>If you have Ninja (<code class="language-plaintext highlighter-rouge">sudo apt install ninja-build</code>) installed, you can use:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -GNinja -DCMAKE_BUILD_TYPE=Release
cmake --build build --target install

</code></pre></div></div>
<p>to generate and compile via the ninja build script. It will be much faster than with cmake’s default Makefile generator.</p>

<p>You can omit <code class="language-plaintext highlighter-rouge">--target install</code> if you only want to use this locally without installing.</p>

<h1 id="usage">Usage</h1>

<h2 id="choosing-a-tag-family">Choosing a Tag Family</h2>
<p>For the vast majority of applications, the tagStandard41h12 family will be the correct choice. You can find the images for the tags in the <a href="https://github.com/AprilRobotics/apriltag-imgs">apriltag-imgs repo</a>. Scale up the images in your favorite editor and print them out.</p>

<p>Some heuristics for when to choose other tag families:</p>
<ol>
  <li>If you need more tags, use tagStandard52h13</li>
  <li>If you need to maximize the use of space on a small circular object, use tagCircle49h12 (or tagCircle21h7).</li>
  <li>If you want to make a recursive tag use tagCustom48h12.</li>
  <li>If you want compatibility with the ArUcO detector use tag36h11</li>
</ol>

<p>If none of these fit your needs, generate your own custom tag family <a href="https://github.com/AprilRobotics/apriltag-generation">here</a>.</p>

<h2 id="getting-started-with-the-detector">Getting Started with the Detector</h2>
<h3 id="python">Python</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import cv2
import numpy as np
from apriltag import apriltag

imagepath = 'test.jpg'
image = cv2.imread(imagepath, cv2.IMREAD_GRAYSCALE)
detector = apriltag("tagStandard41h12")

detections = detector.detect(image)
</code></pre></div></div>

<p>Alternately you can use the AprilTag python bindings created by <a href="https://github.com/duckietown/lib-dt-apriltags">duckietown</a>.</p>

<h3 id="c">C</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>image_u8_t* im = image_u8_create_from_pnm("test.pnm");
if (im == NULL) {
    fprintf(stderr, "Failed to load pnm image.\n");
    exit(1);
}
apriltag_detector_t *td = apriltag_detector_create();
apriltag_family_t *tf = tagStandard41h12_create();
apriltag_detector_add_family(td, tf);
zarray_t *detections = apriltag_detector_detect(td, im);

for (int i = 0; i &lt; zarray_size(detections); i++) {
    apriltag_detection_t *det;
    zarray_get(detections, i, &amp;det);

    // Do stuff with detections here.
}
// Cleanup.
apriltag_detections_destroy(detections);
tagStandard41h12_destroy(tf);
apriltag_detector_destroy(td);
</code></pre></div></div>

<h3 id="matlab">Matlab</h3>

<p>Provided by third-party <a href="https://github.com/alddiaz/MATLAB_AprilTag3">here</a>.</p>

<h3 id="julia">Julia</h3>

<p>Provided by third-party <a href="https://github.com/JuliaRobotics/AprilTags.jl">here</a></p>

<h2 id="upgrading-from-apriltag-2">Upgrading from AprilTag 2</h2>
<p>For most use-cases this should be a drop in replacement.</p>

<ul>
  <li>The options refine_decode, refine_pose, and black_border have been removed.</li>
  <li>If you have generated your own families, you will need to regenerate the c code for those families. The java code however does not need to be regenerated so this should be quick and easy.</li>
</ul>

<h2 id="opencv-integration">OpenCV Integration</h2>

<p>Note that this library has no external dependencies. Most applications
will require, at minimum, a method for acquiring images.</p>

<p>See example/opencv_demo.cc for an example of using AprilTag in C++ with OpenCV.
This example application can be built by executing the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd examples
$ make opencv_demo
</code></pre></div></div>

<p>Image data in a cv::Mat object can be passed to AprilTag without creating
a deep copy. Simply create an image_u8_t header for the cv::Mat data buffer:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cv::Mat img;

image_u8_t img_header = { .width = img.cols,
    .height = img.rows,
    .stride = img.cols,
    .buf = img.data
};
</code></pre></div></div>

<h2 id="tuning-the-detector-parameters">Tuning the Detector Parameters</h2>
<h3 id="increasing-speed">Increasing speed.</h3>
<p>Increasing the quad_decimate parameter will increase the speed of the detector at the cost of detection distance.  If you have extra cpu cores to throw at the problem then you can increase nthreads. If your image is somewhat noisy, increasing the quad_sigma parameter can increase speed.</p>

<h3 id="increasing-detection-distance">Increasing detection distance.</h3>
<p>First choose an example image and run the detector with debug=1 to generate the debug images. These show the detector’s output at each step in the detection pipeline.
If the border of your tag is not being detected as a quadrilateral, decrease quad_decimate (all the way to 1 if necessary).
If the border of the tag is detected then experiment with changing decode_sharpening.</p>

<h2 id="pose-estimation">Pose Estimation.</h2>
<p>We provide a method for computing the pose of the tag as follows (alternately use OpenCv’s Pnp solver with SOLVEPNP_IPPE_SQUARE). You will need to include the apriltag_pose.h header file and then call the estimate_tag_pose function as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// First create an apriltag_detection_info_t struct using your known parameters.
apriltag_detection_info_t info;
info.det = det;
info.tagsize = tagsize;
info.fx = fx;
info.fy = fy;
info.cx = cx;
info.cy = cy;

// Then call estimate_tag_pose.
apriltag_pose_t pose;
double err = estimate_tag_pose(&amp;info, &amp;pose);
// Do something with pose.
...
</code></pre></div></div>

<p>where the parameters are as follows:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">det</code>: The tag detection struct (april_detection_t).</li>
  <li>
<code class="language-plaintext highlighter-rouge">tagsize</code>: The size of the tag in meters. Each tag design has a black border and a white border, but some designs have the white border on the inside and some have the black border on the inside. The tagsize is thus measured from where the two borders meet, see the figure below for an example.</li>
  <li>
<code class="language-plaintext highlighter-rouge">fx</code>, <code class="language-plaintext highlighter-rouge">fy</code>: The camera’s focal length (in pixels). For most cameras <code class="language-plaintext highlighter-rouge">fx</code> and <code class="language-plaintext highlighter-rouge">fy</code> will be equal or nearly so.</li>
  <li>
<code class="language-plaintext highlighter-rouge">cx</code>, <code class="language-plaintext highlighter-rouge">cy</code>: The camera’s focal center (in pixels). For most cameras this will be approximately the same as the image center.</li>
</ul>

<p>Note: The tag size should not be measured from the outside of the tag. The tag size is defined as the distance between the detection corners, or alternately, the length of the edge between the white border and the black border. The following illustration marks the detection corners with red Xs and the tag size with a red arrow for a tag from the 48h12Custom tag family.</p>

<p><img src="https://raw.githubusercontent.com/AprilRobotics/apriltag/master/./tag_size_48h12.png" alt="The tag size is the width of the edge between the white and black borders."></p>

<h3 id="coordinate-system">Coordinate System</h3>
<p>The coordinate system has the origin at the camera center. The z-axis points from the camera center out the camera lens. The x-axis is to the right in the image taken by the camera, and y is down. The tag’s coordinate frame is centered at the center of the tag. From the viewer’s perspective, the x-axis is to the right, y-axis down, and z-axis is into the tag.</p>

<h1 id="debugging">Debugging</h1>

<p>You can enable <a href="https://clang.llvm.org/docs/AddressSanitizer.html">AddressSanitizer</a> to debug memory issues for Debug builds by setting the <code class="language-plaintext highlighter-rouge">ASAN</code> option:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -GNinja -DCMAKE_BUILD_TYPE=Debug -DASAN=ON
cmake --build build

</code></pre></div></div>

<p>Mostly you can then run your executables as usual and inspect the sanitiser output. If you get a message like <code class="language-plaintext highlighter-rouge">ASan runtime does not come first in initial library list; you should either link runtime to your application or manually preload it with LD_PRELOAD.</code> you have to preload the corresponding <code class="language-plaintext highlighter-rouge">libasan.so.5</code> like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libasan.so.5 ./build/opencv_demo

</code></pre></div></div>

<h1 id="flexible-layouts">Flexible Layouts</h1>
<p>AprilTag 3 supports a wide variety of possible tag layouts in addition to the classic layout supported in AprilTag 2. The tag’s data bits can now go outside of the tag border, and it is also possible to define layouts with “holes” inside of the tag border where there are no data bits. In this repo we have included:</p>

<ul>
  <li>Two families of the new standard layout. This layout adds a layer of data bits around the outside of the tag border, increasing data density, and the number of possible tags, at the cost of a slight decrease in detection distance.</li>
  <li>Two families of circular tags.</li>
  <li>One family which has a hole in the middle. This could be used for example for drone applications by placing different sized tags inside of each other to allow detection over a wide range of distances.</li>
</ul>

<p>You can generate your own tag families using our other repo, <a href="https://github.com/AprilRobotics/apriltag-generation">AprilTag-Generation</a>.</p>

<h1 id="support">Support</h1>
<p>Please create an issue on this GitHub for any questions instead of sending a private message. This allows other people with the same question to find your answer.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <em>No CHANGELOG found.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/apriltag/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No dependencies on ROS packages.</em>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/python3-dev">python3-dev</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-numpy">python3-numpy</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/cmake">cmake</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/libopencv-dev">libopencv-dev</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/apriltag_ros#jazzy">apriltag_ros</a></td>
                      <td class="text-center">
                        
                        <a href="/p/apriltag_ros#jazzy-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/apriltag_detector_umich#jazzy">apriltag_detector_umich</a></td>
                      <td class="text-center">
                        
                        <a href="/p/apriltag_detector_umich#jazzy-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="jazzy-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>apriltag</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="jazzy-question-list" class="panel-body" style="display: none;"></div>
      <div id="jazzy-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/apriltag+jazzy">here</a>.</p>
      </div>
      <div id="jazzy-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/AprilRobotics/apriltag.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/jazzy/p/apriltag"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/AprilRobotics/apriltag/tree/master/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-kilted">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/apriltag">apriltag</a> <small>package from <a style="text-decoration:none" href="/r/apriltag/github-AprilRobotics-apriltag">apriltag</a> repo</small>
        </h3>
          
            
            
              <span class="label label-default pkg-label">

apriltag
</span>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/kilted/p/apriltag"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/AprilRobotics/apriltag/tree/master/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="kilted-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#kilted-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#kilted-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#kilted-deps" data-toggle="tab"><span class="label label-primary">4</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#kilted-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#kilted-questions" data-toggle="tab"><span id="kilted-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="kilted-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>3.4.3</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">AprilTag is a visual fiducial system popular for robotics research.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/AprilRobotics/apriltag.git">https://github.com/AprilRobotics/apriltag.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-17
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">robotics</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/apriltag/#kilted-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/apriltag/#kilted-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/apriltag/#kilted-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            AprilTag detector library
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="https://april.eecs.umich.edu/software/apriltag.html">Website</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Max Krogius</li>
                
                  <li>Wolfgang Merkt</li>
                
                  <li>Christian Rauch</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Edwin Olson</li>
                
                  <li>Max Krogius</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/AprilRobotics/apriltag/tree/master/./README.md" title="Open in git repository">README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="apriltag-3">AprilTag 3</h1>
<p>AprilTag is a visual fiducial system popular in robotics research. This repository contains the most recent version of AprilTag, AprilTag 3, which includes a faster (&gt;2x) detector, improved detection rate on small tags, flexible tag layouts, and pose estimation. AprilTag consists of a small C library with minimal dependencies.</p>

<p>You can find tag images for the pre-generated layouts <a href="https://github.com/AprilRobotics/apriltag-imgs">here</a>. We recommend using the tagStandard41h12 layout.</p>

<h1 id="table-of-contents">Table of Contents</h1>
<ul>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#papers">Papers</a></li>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#install">Install</a></li>
  <li>
<a href="https://github.com/AprilRobotics/apriltag/tree/master/./#usage">Usage</a>
    <ul>
      <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#choosing-a-tag-family">Choosing a Tag Family</a></li>
      <li>
<a href="https://github.com/AprilRobotics/apriltag/tree/master/./#getting-started-with-the-detector">Getting Started with the Detector</a>
        <ul>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#python">Python</a></li>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#c">C</a></li>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#matlab">Matlab</a></li>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#julia">Julia</a></li>
        </ul>
      </li>
      <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#upgrading-from-aprilTag-2">Upgrading from AprilTag 2</a></li>
      <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#opencv-integration">OpenCV Integration</a></li>
      <li>
<a href="https://github.com/AprilRobotics/apriltag/tree/master/./#tuning-the-detector-parameters">Tuning the Detector Parameters</a>
        <ul>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#increasing-speed">Increasing speed.</a></li>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#increasing-detection-distance">Increasing detection distance.</a></li>
        </ul>
      </li>
      <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#pose-estimation">Pose Estimation.</a></li>
    </ul>
  </li>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#debugging">Debugging</a></li>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#flexible-layouts">Flexible Layouts</a></li>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#support">Support</a></li>
</ul>

<h1 id="papers">Papers</h1>
<p>AprilTag is the subject of the following papers.</p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=olson2011tags">AprilTag: A robust and flexible visual fiducial system</a></p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=wang2016iros">AprilTag 2: Efficient and robust fiducial detection</a></p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=krogius2019iros">Flexible Layouts for Fiducial Tags</a></p>

<h1 id="install">Install</h1>

<p>Officially only Linux operating systems are supported, although users have had success installing on Windows too.</p>

<p>The default installation will place headers in /usr/local/include and shared library in /usr/local/lib. It also installs a pkg-config script into /usr/local/lib/pkgconfig and will install a python wrapper if python3 is installed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -DCMAKE_BUILD_TYPE=Release
cmake --build build --target install

</code></pre></div></div>
<p>This will build shared (*.so) libraries by default. If you need static (*.a) libraries set <code class="language-plaintext highlighter-rouge">BUILD_SHARED_LIBS</code> to <code class="language-plaintext highlighter-rouge">OFF</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -DCMAKE_BUILD_TYPE=Release -DBUILD_SHARED_LIBS=OFF
cmake --build build --target install

</code></pre></div></div>

<p>If you have Ninja (<code class="language-plaintext highlighter-rouge">sudo apt install ninja-build</code>) installed, you can use:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -GNinja -DCMAKE_BUILD_TYPE=Release
cmake --build build --target install

</code></pre></div></div>
<p>to generate and compile via the ninja build script. It will be much faster than with cmake’s default Makefile generator.</p>

<p>You can omit <code class="language-plaintext highlighter-rouge">--target install</code> if you only want to use this locally without installing.</p>

<h1 id="usage">Usage</h1>

<h2 id="choosing-a-tag-family">Choosing a Tag Family</h2>
<p>For the vast majority of applications, the tagStandard41h12 family will be the correct choice. You can find the images for the tags in the <a href="https://github.com/AprilRobotics/apriltag-imgs">apriltag-imgs repo</a>. Scale up the images in your favorite editor and print them out.</p>

<p>Some heuristics for when to choose other tag families:</p>
<ol>
  <li>If you need more tags, use tagStandard52h13</li>
  <li>If you need to maximize the use of space on a small circular object, use tagCircle49h12 (or tagCircle21h7).</li>
  <li>If you want to make a recursive tag use tagCustom48h12.</li>
  <li>If you want compatibility with the ArUcO detector use tag36h11</li>
</ol>

<p>If none of these fit your needs, generate your own custom tag family <a href="https://github.com/AprilRobotics/apriltag-generation">here</a>.</p>

<h2 id="getting-started-with-the-detector">Getting Started with the Detector</h2>
<h3 id="python">Python</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import cv2
import numpy as np
from apriltag import apriltag

imagepath = 'test.jpg'
image = cv2.imread(imagepath, cv2.IMREAD_GRAYSCALE)
detector = apriltag("tagStandard41h12")

detections = detector.detect(image)
</code></pre></div></div>

<p>Alternately you can use the AprilTag python bindings created by <a href="https://github.com/duckietown/lib-dt-apriltags">duckietown</a>.</p>

<h3 id="c">C</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>image_u8_t* im = image_u8_create_from_pnm("test.pnm");
if (im == NULL) {
    fprintf(stderr, "Failed to load pnm image.\n");
    exit(1);
}
apriltag_detector_t *td = apriltag_detector_create();
apriltag_family_t *tf = tagStandard41h12_create();
apriltag_detector_add_family(td, tf);
zarray_t *detections = apriltag_detector_detect(td, im);

for (int i = 0; i &lt; zarray_size(detections); i++) {
    apriltag_detection_t *det;
    zarray_get(detections, i, &amp;det);

    // Do stuff with detections here.
}
// Cleanup.
apriltag_detections_destroy(detections);
tagStandard41h12_destroy(tf);
apriltag_detector_destroy(td);
</code></pre></div></div>

<h3 id="matlab">Matlab</h3>

<p>Provided by third-party <a href="https://github.com/alddiaz/MATLAB_AprilTag3">here</a>.</p>

<h3 id="julia">Julia</h3>

<p>Provided by third-party <a href="https://github.com/JuliaRobotics/AprilTags.jl">here</a></p>

<h2 id="upgrading-from-apriltag-2">Upgrading from AprilTag 2</h2>
<p>For most use-cases this should be a drop in replacement.</p>

<ul>
  <li>The options refine_decode, refine_pose, and black_border have been removed.</li>
  <li>If you have generated your own families, you will need to regenerate the c code for those families. The java code however does not need to be regenerated so this should be quick and easy.</li>
</ul>

<h2 id="opencv-integration">OpenCV Integration</h2>

<p>Note that this library has no external dependencies. Most applications
will require, at minimum, a method for acquiring images.</p>

<p>See example/opencv_demo.cc for an example of using AprilTag in C++ with OpenCV.
This example application can be built by executing the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd examples
$ make opencv_demo
</code></pre></div></div>

<p>Image data in a cv::Mat object can be passed to AprilTag without creating
a deep copy. Simply create an image_u8_t header for the cv::Mat data buffer:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cv::Mat img;

image_u8_t img_header = { .width = img.cols,
    .height = img.rows,
    .stride = img.cols,
    .buf = img.data
};
</code></pre></div></div>

<h2 id="tuning-the-detector-parameters">Tuning the Detector Parameters</h2>
<h3 id="increasing-speed">Increasing speed.</h3>
<p>Increasing the quad_decimate parameter will increase the speed of the detector at the cost of detection distance.  If you have extra cpu cores to throw at the problem then you can increase nthreads. If your image is somewhat noisy, increasing the quad_sigma parameter can increase speed.</p>

<h3 id="increasing-detection-distance">Increasing detection distance.</h3>
<p>First choose an example image and run the detector with debug=1 to generate the debug images. These show the detector’s output at each step in the detection pipeline.
If the border of your tag is not being detected as a quadrilateral, decrease quad_decimate (all the way to 1 if necessary).
If the border of the tag is detected then experiment with changing decode_sharpening.</p>

<h2 id="pose-estimation">Pose Estimation.</h2>
<p>We provide a method for computing the pose of the tag as follows (alternately use OpenCv’s Pnp solver with SOLVEPNP_IPPE_SQUARE). You will need to include the apriltag_pose.h header file and then call the estimate_tag_pose function as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// First create an apriltag_detection_info_t struct using your known parameters.
apriltag_detection_info_t info;
info.det = det;
info.tagsize = tagsize;
info.fx = fx;
info.fy = fy;
info.cx = cx;
info.cy = cy;

// Then call estimate_tag_pose.
apriltag_pose_t pose;
double err = estimate_tag_pose(&amp;info, &amp;pose);
// Do something with pose.
...
</code></pre></div></div>

<p>where the parameters are as follows:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">det</code>: The tag detection struct (april_detection_t).</li>
  <li>
<code class="language-plaintext highlighter-rouge">tagsize</code>: The size of the tag in meters. Each tag design has a black border and a white border, but some designs have the white border on the inside and some have the black border on the inside. The tagsize is thus measured from where the two borders meet, see the figure below for an example.</li>
  <li>
<code class="language-plaintext highlighter-rouge">fx</code>, <code class="language-plaintext highlighter-rouge">fy</code>: The camera’s focal length (in pixels). For most cameras <code class="language-plaintext highlighter-rouge">fx</code> and <code class="language-plaintext highlighter-rouge">fy</code> will be equal or nearly so.</li>
  <li>
<code class="language-plaintext highlighter-rouge">cx</code>, <code class="language-plaintext highlighter-rouge">cy</code>: The camera’s focal center (in pixels). For most cameras this will be approximately the same as the image center.</li>
</ul>

<p>Note: The tag size should not be measured from the outside of the tag. The tag size is defined as the distance between the detection corners, or alternately, the length of the edge between the white border and the black border. The following illustration marks the detection corners with red Xs and the tag size with a red arrow for a tag from the 48h12Custom tag family.</p>

<p><img src="https://raw.githubusercontent.com/AprilRobotics/apriltag/master/./tag_size_48h12.png" alt="The tag size is the width of the edge between the white and black borders."></p>

<h3 id="coordinate-system">Coordinate System</h3>
<p>The coordinate system has the origin at the camera center. The z-axis points from the camera center out the camera lens. The x-axis is to the right in the image taken by the camera, and y is down. The tag’s coordinate frame is centered at the center of the tag. From the viewer’s perspective, the x-axis is to the right, y-axis down, and z-axis is into the tag.</p>

<h1 id="debugging">Debugging</h1>

<p>You can enable <a href="https://clang.llvm.org/docs/AddressSanitizer.html">AddressSanitizer</a> to debug memory issues for Debug builds by setting the <code class="language-plaintext highlighter-rouge">ASAN</code> option:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -GNinja -DCMAKE_BUILD_TYPE=Debug -DASAN=ON
cmake --build build

</code></pre></div></div>

<p>Mostly you can then run your executables as usual and inspect the sanitiser output. If you get a message like <code class="language-plaintext highlighter-rouge">ASan runtime does not come first in initial library list; you should either link runtime to your application or manually preload it with LD_PRELOAD.</code> you have to preload the corresponding <code class="language-plaintext highlighter-rouge">libasan.so.5</code> like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libasan.so.5 ./build/opencv_demo

</code></pre></div></div>

<h1 id="flexible-layouts">Flexible Layouts</h1>
<p>AprilTag 3 supports a wide variety of possible tag layouts in addition to the classic layout supported in AprilTag 2. The tag’s data bits can now go outside of the tag border, and it is also possible to define layouts with “holes” inside of the tag border where there are no data bits. In this repo we have included:</p>

<ul>
  <li>Two families of the new standard layout. This layout adds a layer of data bits around the outside of the tag border, increasing data density, and the number of possible tags, at the cost of a slight decrease in detection distance.</li>
  <li>Two families of circular tags.</li>
  <li>One family which has a hole in the middle. This could be used for example for drone applications by placing different sized tags inside of each other to allow detection over a wide range of distances.</li>
</ul>

<p>You can generate your own tag families using our other repo, <a href="https://github.com/AprilRobotics/apriltag-generation">AprilTag-Generation</a>.</p>

<h1 id="support">Support</h1>
<p>Please create an issue on this GitHub for any questions instead of sending a private message. This allows other people with the same question to find your answer.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <em>No CHANGELOG found.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kilted-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/apriltag/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kilted-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No dependencies on ROS packages.</em>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/python3-dev">python3-dev</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-numpy">python3-numpy</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/cmake">cmake</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/libopencv-dev">libopencv-dev</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/apriltag_ros#kilted">apriltag_ros</a></td>
                      <td class="text-center">
                        
                        <a href="/p/apriltag_ros#kilted-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/apriltag_detector_umich#kilted">apriltag_detector_umich</a></td>
                      <td class="text-center">
                        
                        <a href="/p/apriltag_detector_umich#kilted-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kilted-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kilted-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>apriltag</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="kilted-question-list" class="panel-body" style="display: none;"></div>
      <div id="kilted-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/apriltag+kilted">here</a>.</p>
      </div>
      <div id="kilted-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/AprilRobotics/apriltag.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/kilted/p/apriltag"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/AprilRobotics/apriltag/tree/master/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-rolling">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/apriltag">apriltag</a> <small>package from <a style="text-decoration:none" href="/r/apriltag/github-AprilRobotics-apriltag">apriltag</a> repo</small>
        </h3>
          
            
            
              <span class="label label-default pkg-label">

apriltag
</span>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/rolling/p/apriltag"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/AprilRobotics/apriltag/tree/master/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="rolling-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#rolling-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#rolling-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#rolling-deps" data-toggle="tab"><span class="label label-primary">4</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#rolling-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#rolling-questions" data-toggle="tab"><span id="rolling-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="rolling-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>3.4.3</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">AprilTag is a visual fiducial system popular for robotics research.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/AprilRobotics/apriltag.git">https://github.com/AprilRobotics/apriltag.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-17
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">robotics</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/apriltag/#rolling-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/apriltag/#rolling-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/apriltag/#rolling-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            AprilTag detector library
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="https://april.eecs.umich.edu/software/apriltag.html">Website</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Max Krogius</li>
                
                  <li>Wolfgang Merkt</li>
                
                  <li>Christian Rauch</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Edwin Olson</li>
                
                  <li>Max Krogius</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/AprilRobotics/apriltag/tree/master/./README.md" title="Open in git repository">README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="apriltag-3">AprilTag 3</h1>
<p>AprilTag is a visual fiducial system popular in robotics research. This repository contains the most recent version of AprilTag, AprilTag 3, which includes a faster (&gt;2x) detector, improved detection rate on small tags, flexible tag layouts, and pose estimation. AprilTag consists of a small C library with minimal dependencies.</p>

<p>You can find tag images for the pre-generated layouts <a href="https://github.com/AprilRobotics/apriltag-imgs">here</a>. We recommend using the tagStandard41h12 layout.</p>

<h1 id="table-of-contents">Table of Contents</h1>
<ul>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#papers">Papers</a></li>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#install">Install</a></li>
  <li>
<a href="https://github.com/AprilRobotics/apriltag/tree/master/./#usage">Usage</a>
    <ul>
      <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#choosing-a-tag-family">Choosing a Tag Family</a></li>
      <li>
<a href="https://github.com/AprilRobotics/apriltag/tree/master/./#getting-started-with-the-detector">Getting Started with the Detector</a>
        <ul>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#python">Python</a></li>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#c">C</a></li>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#matlab">Matlab</a></li>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#julia">Julia</a></li>
        </ul>
      </li>
      <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#upgrading-from-aprilTag-2">Upgrading from AprilTag 2</a></li>
      <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#opencv-integration">OpenCV Integration</a></li>
      <li>
<a href="https://github.com/AprilRobotics/apriltag/tree/master/./#tuning-the-detector-parameters">Tuning the Detector Parameters</a>
        <ul>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#increasing-speed">Increasing speed.</a></li>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#increasing-detection-distance">Increasing detection distance.</a></li>
        </ul>
      </li>
      <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#pose-estimation">Pose Estimation.</a></li>
    </ul>
  </li>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#debugging">Debugging</a></li>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#flexible-layouts">Flexible Layouts</a></li>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#support">Support</a></li>
</ul>

<h1 id="papers">Papers</h1>
<p>AprilTag is the subject of the following papers.</p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=olson2011tags">AprilTag: A robust and flexible visual fiducial system</a></p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=wang2016iros">AprilTag 2: Efficient and robust fiducial detection</a></p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=krogius2019iros">Flexible Layouts for Fiducial Tags</a></p>

<h1 id="install">Install</h1>

<p>Officially only Linux operating systems are supported, although users have had success installing on Windows too.</p>

<p>The default installation will place headers in /usr/local/include and shared library in /usr/local/lib. It also installs a pkg-config script into /usr/local/lib/pkgconfig and will install a python wrapper if python3 is installed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -DCMAKE_BUILD_TYPE=Release
cmake --build build --target install

</code></pre></div></div>
<p>This will build shared (*.so) libraries by default. If you need static (*.a) libraries set <code class="language-plaintext highlighter-rouge">BUILD_SHARED_LIBS</code> to <code class="language-plaintext highlighter-rouge">OFF</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -DCMAKE_BUILD_TYPE=Release -DBUILD_SHARED_LIBS=OFF
cmake --build build --target install

</code></pre></div></div>

<p>If you have Ninja (<code class="language-plaintext highlighter-rouge">sudo apt install ninja-build</code>) installed, you can use:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -GNinja -DCMAKE_BUILD_TYPE=Release
cmake --build build --target install

</code></pre></div></div>
<p>to generate and compile via the ninja build script. It will be much faster than with cmake’s default Makefile generator.</p>

<p>You can omit <code class="language-plaintext highlighter-rouge">--target install</code> if you only want to use this locally without installing.</p>

<h1 id="usage">Usage</h1>

<h2 id="choosing-a-tag-family">Choosing a Tag Family</h2>
<p>For the vast majority of applications, the tagStandard41h12 family will be the correct choice. You can find the images for the tags in the <a href="https://github.com/AprilRobotics/apriltag-imgs">apriltag-imgs repo</a>. Scale up the images in your favorite editor and print them out.</p>

<p>Some heuristics for when to choose other tag families:</p>
<ol>
  <li>If you need more tags, use tagStandard52h13</li>
  <li>If you need to maximize the use of space on a small circular object, use tagCircle49h12 (or tagCircle21h7).</li>
  <li>If you want to make a recursive tag use tagCustom48h12.</li>
  <li>If you want compatibility with the ArUcO detector use tag36h11</li>
</ol>

<p>If none of these fit your needs, generate your own custom tag family <a href="https://github.com/AprilRobotics/apriltag-generation">here</a>.</p>

<h2 id="getting-started-with-the-detector">Getting Started with the Detector</h2>
<h3 id="python">Python</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import cv2
import numpy as np
from apriltag import apriltag

imagepath = 'test.jpg'
image = cv2.imread(imagepath, cv2.IMREAD_GRAYSCALE)
detector = apriltag("tagStandard41h12")

detections = detector.detect(image)
</code></pre></div></div>

<p>Alternately you can use the AprilTag python bindings created by <a href="https://github.com/duckietown/lib-dt-apriltags">duckietown</a>.</p>

<h3 id="c">C</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>image_u8_t* im = image_u8_create_from_pnm("test.pnm");
if (im == NULL) {
    fprintf(stderr, "Failed to load pnm image.\n");
    exit(1);
}
apriltag_detector_t *td = apriltag_detector_create();
apriltag_family_t *tf = tagStandard41h12_create();
apriltag_detector_add_family(td, tf);
zarray_t *detections = apriltag_detector_detect(td, im);

for (int i = 0; i &lt; zarray_size(detections); i++) {
    apriltag_detection_t *det;
    zarray_get(detections, i, &amp;det);

    // Do stuff with detections here.
}
// Cleanup.
apriltag_detections_destroy(detections);
tagStandard41h12_destroy(tf);
apriltag_detector_destroy(td);
</code></pre></div></div>

<h3 id="matlab">Matlab</h3>

<p>Provided by third-party <a href="https://github.com/alddiaz/MATLAB_AprilTag3">here</a>.</p>

<h3 id="julia">Julia</h3>

<p>Provided by third-party <a href="https://github.com/JuliaRobotics/AprilTags.jl">here</a></p>

<h2 id="upgrading-from-apriltag-2">Upgrading from AprilTag 2</h2>
<p>For most use-cases this should be a drop in replacement.</p>

<ul>
  <li>The options refine_decode, refine_pose, and black_border have been removed.</li>
  <li>If you have generated your own families, you will need to regenerate the c code for those families. The java code however does not need to be regenerated so this should be quick and easy.</li>
</ul>

<h2 id="opencv-integration">OpenCV Integration</h2>

<p>Note that this library has no external dependencies. Most applications
will require, at minimum, a method for acquiring images.</p>

<p>See example/opencv_demo.cc for an example of using AprilTag in C++ with OpenCV.
This example application can be built by executing the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd examples
$ make opencv_demo
</code></pre></div></div>

<p>Image data in a cv::Mat object can be passed to AprilTag without creating
a deep copy. Simply create an image_u8_t header for the cv::Mat data buffer:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cv::Mat img;

image_u8_t img_header = { .width = img.cols,
    .height = img.rows,
    .stride = img.cols,
    .buf = img.data
};
</code></pre></div></div>

<h2 id="tuning-the-detector-parameters">Tuning the Detector Parameters</h2>
<h3 id="increasing-speed">Increasing speed.</h3>
<p>Increasing the quad_decimate parameter will increase the speed of the detector at the cost of detection distance.  If you have extra cpu cores to throw at the problem then you can increase nthreads. If your image is somewhat noisy, increasing the quad_sigma parameter can increase speed.</p>

<h3 id="increasing-detection-distance">Increasing detection distance.</h3>
<p>First choose an example image and run the detector with debug=1 to generate the debug images. These show the detector’s output at each step in the detection pipeline.
If the border of your tag is not being detected as a quadrilateral, decrease quad_decimate (all the way to 1 if necessary).
If the border of the tag is detected then experiment with changing decode_sharpening.</p>

<h2 id="pose-estimation">Pose Estimation.</h2>
<p>We provide a method for computing the pose of the tag as follows (alternately use OpenCv’s Pnp solver with SOLVEPNP_IPPE_SQUARE). You will need to include the apriltag_pose.h header file and then call the estimate_tag_pose function as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// First create an apriltag_detection_info_t struct using your known parameters.
apriltag_detection_info_t info;
info.det = det;
info.tagsize = tagsize;
info.fx = fx;
info.fy = fy;
info.cx = cx;
info.cy = cy;

// Then call estimate_tag_pose.
apriltag_pose_t pose;
double err = estimate_tag_pose(&amp;info, &amp;pose);
// Do something with pose.
...
</code></pre></div></div>

<p>where the parameters are as follows:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">det</code>: The tag detection struct (april_detection_t).</li>
  <li>
<code class="language-plaintext highlighter-rouge">tagsize</code>: The size of the tag in meters. Each tag design has a black border and a white border, but some designs have the white border on the inside and some have the black border on the inside. The tagsize is thus measured from where the two borders meet, see the figure below for an example.</li>
  <li>
<code class="language-plaintext highlighter-rouge">fx</code>, <code class="language-plaintext highlighter-rouge">fy</code>: The camera’s focal length (in pixels). For most cameras <code class="language-plaintext highlighter-rouge">fx</code> and <code class="language-plaintext highlighter-rouge">fy</code> will be equal or nearly so.</li>
  <li>
<code class="language-plaintext highlighter-rouge">cx</code>, <code class="language-plaintext highlighter-rouge">cy</code>: The camera’s focal center (in pixels). For most cameras this will be approximately the same as the image center.</li>
</ul>

<p>Note: The tag size should not be measured from the outside of the tag. The tag size is defined as the distance between the detection corners, or alternately, the length of the edge between the white border and the black border. The following illustration marks the detection corners with red Xs and the tag size with a red arrow for a tag from the 48h12Custom tag family.</p>

<p><img src="https://raw.githubusercontent.com/AprilRobotics/apriltag/master/./tag_size_48h12.png" alt="The tag size is the width of the edge between the white and black borders."></p>

<h3 id="coordinate-system">Coordinate System</h3>
<p>The coordinate system has the origin at the camera center. The z-axis points from the camera center out the camera lens. The x-axis is to the right in the image taken by the camera, and y is down. The tag’s coordinate frame is centered at the center of the tag. From the viewer’s perspective, the x-axis is to the right, y-axis down, and z-axis is into the tag.</p>

<h1 id="debugging">Debugging</h1>

<p>You can enable <a href="https://clang.llvm.org/docs/AddressSanitizer.html">AddressSanitizer</a> to debug memory issues for Debug builds by setting the <code class="language-plaintext highlighter-rouge">ASAN</code> option:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -GNinja -DCMAKE_BUILD_TYPE=Debug -DASAN=ON
cmake --build build

</code></pre></div></div>

<p>Mostly you can then run your executables as usual and inspect the sanitiser output. If you get a message like <code class="language-plaintext highlighter-rouge">ASan runtime does not come first in initial library list; you should either link runtime to your application or manually preload it with LD_PRELOAD.</code> you have to preload the corresponding <code class="language-plaintext highlighter-rouge">libasan.so.5</code> like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libasan.so.5 ./build/opencv_demo

</code></pre></div></div>

<h1 id="flexible-layouts">Flexible Layouts</h1>
<p>AprilTag 3 supports a wide variety of possible tag layouts in addition to the classic layout supported in AprilTag 2. The tag’s data bits can now go outside of the tag border, and it is also possible to define layouts with “holes” inside of the tag border where there are no data bits. In this repo we have included:</p>

<ul>
  <li>Two families of the new standard layout. This layout adds a layer of data bits around the outside of the tag border, increasing data density, and the number of possible tags, at the cost of a slight decrease in detection distance.</li>
  <li>Two families of circular tags.</li>
  <li>One family which has a hole in the middle. This could be used for example for drone applications by placing different sized tags inside of each other to allow detection over a wide range of distances.</li>
</ul>

<p>You can generate your own tag families using our other repo, <a href="https://github.com/AprilRobotics/apriltag-generation">AprilTag-Generation</a>.</p>

<h1 id="support">Support</h1>
<p>Please create an issue on this GitHub for any questions instead of sending a private message. This allows other people with the same question to find your answer.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <em>No CHANGELOG found.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="rolling-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/apriltag/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="rolling-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No dependencies on ROS packages.</em>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/python3-dev">python3-dev</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-numpy">python3-numpy</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/cmake">cmake</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/libopencv-dev">libopencv-dev</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/apriltag_ros#rolling">apriltag_ros</a></td>
                      <td class="text-center">
                        
                        <a href="/p/apriltag_ros#rolling-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/apriltag_detector_umich#rolling">apriltag_detector_umich</a></td>
                      <td class="text-center">
                        
                        <a href="/p/apriltag_detector_umich#rolling-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="rolling-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="rolling-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>apriltag</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="rolling-question-list" class="panel-body" style="display: none;"></div>
      <div id="rolling-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/apriltag+rolling">here</a>.</p>
      </div>
      <div id="rolling-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/AprilRobotics/apriltag.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/rolling/p/apriltag"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/AprilRobotics/apriltag/tree/master/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-github">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/apriltag">apriltag</a> <small>package from <a style="text-decoration:none" href="/r/ugv_ws/github-waveshareteam-ugv_ws">ugv_ws</a> repo</small>
        </h3>
          
            
            
              <span class="label label-default pkg-label">

apriltag
</span>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/apriltag_msgs">

apriltag_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/apriltag_ros">

apriltag_ros
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/cartographer">

cartographer
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/costmap_converter">

costmap_converter
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/costmap_converter_msgs">

costmap_converter_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/emcl2">

emcl2
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/explore_lite">

explore_lite
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/openslam_gmapping">

openslam_gmapping
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/slam_gmapping">

slam_gmapping
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/ldlidar">

ldlidar
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/rf2o_laser_odometry">

rf2o_laser_odometry
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/robot_pose_publisher">

robot_pose_publisher
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/teb_local_planner">

teb_local_planner
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/teb_msgs">

teb_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/vizanti">

vizanti
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/vizanti_cpp">

vizanti_cpp
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/vizanti_demos">

vizanti_demos
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/vizanti_msgs">

vizanti_msgs
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/vizanti_server">

vizanti_server
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/ugv_base_node">

ugv_base_node
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/ugv_bringup">

ugv_bringup
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/ugv_chat_ai">

ugv_chat_ai
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/ugv_description">

ugv_description
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/ugv_gazebo">

ugv_gazebo
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/ugv_interface">

ugv_interface
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/ugv_nav">

ugv_nav
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/ugv_slam">

ugv_slam
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/ugv_tools">

ugv_tools
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/ugv_vision">

ugv_vision
</a>
            
          
            
            
              <a class="label label-primary pkg-label" href="/p/ugv_web_app">

ugv_web_app
</a>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/github/p/apriltag"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/waveshareteam/ugv_ws/tree/ros2-humble-develop/src/ugv_else/apriltag_ros/apriltag"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="github-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#github-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#github-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#github-deps" data-toggle="tab"><span class="label label-primary">4</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#github-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#github-questions" data-toggle="tab"><span id="github-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="github-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>3.4.2</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default"></span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/waveshareteam/ugv_ws.git">https://github.com/waveshareteam/ugv_ws.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">ros2-humble-develop</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-02-25
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNKNOWN
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <em>No category tags.</em>
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/ugv_ws/#github-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ugv_ws/#github-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/ugv_ws/#github-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            AprilTag detector library
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="https://april.eecs.umich.edu/software/apriltag.html">Website</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Max Krogius</li>
                
                  <li>Wolfgang Merkt</li>
                
                  <li>Christian Rauch</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Edwin Olson</li>
                
                  <li>Max Krogius</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/waveshareteam/ugv_ws/tree/ros2-humble-develop/src/ugv_else/apriltag_ros/apriltag/README.md" title="Open in git repository">src/ugv_else/apriltag_ros/apriltag/README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="apriltag-3">AprilTag 3</h1>
<p>AprilTag is a visual fiducial system popular in robotics research. This repository contains the most recent version of AprilTag, AprilTag 3, which includes a faster (&gt;2x) detector, improved detection rate on small tags, flexible tag layouts, and pose estimation. AprilTag consists of a small C library with minimal dependencies.</p>

<p>You can find tag images for the pre-generated layouts <a href="https://github.com/AprilRobotics/apriltag-imgs">here</a>. We recommend using the tagStandard41h12 layout.</p>

<h1 id="table-of-contents">Table of Contents</h1>
<ul>
  <li><a href="https://github.com/waveshareteam/ugv_ws/tree/ros2-humble-develop/src/ugv_else/apriltag_ros/apriltag/#papers">Papers</a></li>
  <li><a href="https://github.com/waveshareteam/ugv_ws/tree/ros2-humble-develop/src/ugv_else/apriltag_ros/apriltag/#install">Install</a></li>
  <li>
<a href="https://github.com/waveshareteam/ugv_ws/tree/ros2-humble-develop/src/ugv_else/apriltag_ros/apriltag/#usage">Usage</a>
    <ul>
      <li><a href="https://github.com/waveshareteam/ugv_ws/tree/ros2-humble-develop/src/ugv_else/apriltag_ros/apriltag/#choosing-a-tag-family">Choosing a Tag Family</a></li>
      <li>
<a href="https://github.com/waveshareteam/ugv_ws/tree/ros2-humble-develop/src/ugv_else/apriltag_ros/apriltag/#getting-started-with-the-detector">Getting Started with the Detector</a>
        <ul>
          <li><a href="https://github.com/waveshareteam/ugv_ws/tree/ros2-humble-develop/src/ugv_else/apriltag_ros/apriltag/#python">Python</a></li>
          <li><a href="https://github.com/waveshareteam/ugv_ws/tree/ros2-humble-develop/src/ugv_else/apriltag_ros/apriltag/#c">C</a></li>
          <li><a href="https://github.com/waveshareteam/ugv_ws/tree/ros2-humble-develop/src/ugv_else/apriltag_ros/apriltag/#matlab">Matlab</a></li>
          <li><a href="https://github.com/waveshareteam/ugv_ws/tree/ros2-humble-develop/src/ugv_else/apriltag_ros/apriltag/#julia">Julia</a></li>
        </ul>
      </li>
      <li><a href="https://github.com/waveshareteam/ugv_ws/tree/ros2-humble-develop/src/ugv_else/apriltag_ros/apriltag/#upgrading-from-aprilTag-2">Upgrading from AprilTag 2</a></li>
      <li><a href="https://github.com/waveshareteam/ugv_ws/tree/ros2-humble-develop/src/ugv_else/apriltag_ros/apriltag/#opencv-integration">OpenCV Integration</a></li>
      <li>
<a href="https://github.com/waveshareteam/ugv_ws/tree/ros2-humble-develop/src/ugv_else/apriltag_ros/apriltag/#tuning-the-detector-parameters">Tuning the Detector Parameters</a>
        <ul>
          <li><a href="https://github.com/waveshareteam/ugv_ws/tree/ros2-humble-develop/src/ugv_else/apriltag_ros/apriltag/#increasing-speed">Increasing speed.</a></li>
          <li><a href="https://github.com/waveshareteam/ugv_ws/tree/ros2-humble-develop/src/ugv_else/apriltag_ros/apriltag/#increasing-detection-distance">Increasing detection distance.</a></li>
        </ul>
      </li>
      <li><a href="https://github.com/waveshareteam/ugv_ws/tree/ros2-humble-develop/src/ugv_else/apriltag_ros/apriltag/#pose-estimation">Pose Estimation.</a></li>
    </ul>
  </li>
  <li><a href="https://github.com/waveshareteam/ugv_ws/tree/ros2-humble-develop/src/ugv_else/apriltag_ros/apriltag/#debugging">Debugging</a></li>
  <li><a href="https://github.com/waveshareteam/ugv_ws/tree/ros2-humble-develop/src/ugv_else/apriltag_ros/apriltag/#flexible-layouts">Flexible Layouts</a></li>
  <li><a href="https://github.com/waveshareteam/ugv_ws/tree/ros2-humble-develop/src/ugv_else/apriltag_ros/apriltag/#support">Support</a></li>
</ul>

<h1 id="papers">Papers</h1>
<p>AprilTag is the subject of the following papers.</p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=olson2011tags">AprilTag: A robust and flexible visual fiducial system</a></p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=wang2016iros">AprilTag 2: Efficient and robust fiducial detection</a></p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=krogius2019iros">Flexible Layouts for Fiducial Tags</a></p>

<h1 id="install">Install</h1>

<p>Officially only Linux operating systems are supported, although users have had success installing on Windows too.</p>

<p>The default installation will place headers in /usr/local/include and shared library in /usr/local/lib. It also installs a pkg-config script into /usr/local/lib/pkgconfig and will install a python wrapper if python3 is installed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -DCMAKE_BUILD_TYPE=Release
cmake --build build --target install

</code></pre></div></div>
<p>This will build shared (*.so) libraries by default. If you need static (*.a) libraries set <code class="language-plaintext highlighter-rouge">BUILD_SHARED_LIBS</code> to <code class="language-plaintext highlighter-rouge">OFF</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -DCMAKE_BUILD_TYPE=Release -DBUILD_SHARED_LIBS=OFF
cmake --build build --target install

</code></pre></div></div>

<p>If you have Ninja (<code class="language-plaintext highlighter-rouge">sudo apt install ninja-build</code>) installed, you can use:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -GNinja -DCMAKE_BUILD_TYPE=Release
cmake --build build --target install

</code></pre></div></div>
<p>to generate and compile via the ninja build script. It will be much faster than with cmake’s default Makefile generator.</p>

<p>You can omit <code class="language-plaintext highlighter-rouge">--target install</code> if you only want to use this locally without installing.</p>

<h1 id="usage">Usage</h1>

<h2 id="choosing-a-tag-family">Choosing a Tag Family</h2>
<p>For the vast majority of applications, the tagStandard41h12 family will be the correct choice. You can find the images for the tags in the <a href="https://github.com/AprilRobotics/apriltag-imgs">apriltag-imgs repo</a>. Scale up the images in your favorite editor and print them out.</p>

<p>Some heuristics for when to choose other tag families:</p>
<ol>
  <li>If you need more tags, use tagStandard52h13</li>
  <li>If you need to maximize the use of space on a small circular object, use tagCircle49h12 (or tagCircle21h7).</li>
  <li>If you want to make a recursive tag use tagCustom48h12.</li>
  <li>If you want compatibility with the ArUcO detector use tag36h11</li>
</ol>

<p>If none of these fit your needs, generate your own custom tag family <a href="https://github.com/AprilRobotics/apriltag-generation">here</a>.</p>

<h2 id="getting-started-with-the-detector">Getting Started with the Detector</h2>
<h3 id="python">Python</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import cv2
import numpy as np
from apriltag import apriltag

imagepath = 'test.jpg'
image = cv2.imread(imagepath, cv2.IMREAD_GRAYSCALE)
detector = apriltag("tagStandard41h12")

detections = detector.detect(image)
</code></pre></div></div>

<p>Alternately you can use the AprilTag python bindings created by <a href="https://github.com/duckietown/lib-dt-apriltags">duckietown</a>.</p>

<h3 id="c">C</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>image_u8_t* im = image_u8_create_from_pnm("test.png");
apriltag_detector_t *td = apriltag_detector_create();
apriltag_family_t *tf = tagStandard41h12_create();
apriltag_detector_add_family(td, tf);
zarray_t *detections = apriltag_detector_detect(td, im);

for (int i = 0; i &lt; zarray_size(detections); i++) {
    apriltag_detection_t *det;
    zarray_get(detections, i, &amp;det);

    // Do stuff with detections here.
}
// Cleanup.
apriltag_detections_destroy(detections);
tagStandard41h12_destroy(tf);
apriltag_detector_destroy(td);
</code></pre></div></div>

<h3 id="matlab">Matlab</h3>

<p>Provided by third-party <a href="https://github.com/alddiaz/MATLAB_AprilTag3">here</a>.</p>

<h3 id="julia">Julia</h3>

<p>Provided by third-party <a href="https://github.com/JuliaRobotics/AprilTags.jl">here</a></p>

<h2 id="upgrading-from-apriltag-2">Upgrading from AprilTag 2</h2>
<p>For most use-cases this should be a drop in replacement.</p>

<ul>
  <li>The options refine_decode, refine_pose, and black_border have been removed.</li>
  <li>If you have generated your own families, you will need to regenerate the c code for those families. The java code however does not need to be regenerated so this should be quick and easy.</li>
</ul>

<h2 id="opencv-integration">OpenCV Integration</h2>

<p>Note that this library has no external dependencies. Most applications
will require, at minimum, a method for acquiring images.</p>

<p>See example/opencv_demo.cc for an example of using AprilTag in C++ with OpenCV.
This example application can be built by executing the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd examples
$ make opencv_demo
</code></pre></div></div>

<p>Image data in a cv::Mat object can be passed to AprilTag without creating
a deep copy. Simply create an image_u8_t header for the cv::Mat data buffer:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cv::Mat img;

image_u8_t img_header = { .width = img.cols,
    .height = img.rows,
    .stride = img.cols,
    .buf = img.data
};
</code></pre></div></div>

<h2 id="tuning-the-detector-parameters">Tuning the Detector Parameters</h2>
<h3 id="increasing-speed">Increasing speed.</h3>
<p>Increasing the quad_decimate parameter will increase the speed of the detector at the cost of detection distance.  If you have extra cpu cores to throw at the problem then you can increase nthreads. If your image is somewhat noisy, increasing the quad_sigma parameter can increase speed.</p>

<h3 id="increasing-detection-distance">Increasing detection distance.</h3>
<p>First choose an example image and run the detector with debug=1 to generate the debug images. These show the detector’s output at each step in the detection pipeline.
If the border of your tag is not being detected as a quadrilateral, decrease quad_decimate (all the way to 1 if necessary).
If the border of the tag is detected then experiment with changing decode_sharpening.</p>

<h2 id="pose-estimation">Pose Estimation.</h2>
<p>We provide a method for computing the pose of the tag as follows (alternately use OpenCv’s Pnp solver with SOLVEPNP_IPPE_SQUARE). You will need to include the apriltag_pose.h header file and then call the estimate_tag_pose function as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// First create an apriltag_detection_info_t struct using your known parameters.
apriltag_detection_info_t info;
info.det = det;
info.tagsize = tagsize;
info.fx = fx;
info.fy = fy;
info.cx = cx;
info.cy = cy;

// Then call estimate_tag_pose.
apriltag_pose_t pose;
double err = estimate_tag_pose(&amp;info, &amp;pose);
// Do something with pose.
...
</code></pre></div></div>

<p>where the parameters are as follows:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">det</code>: The tag detection struct (april_detection_t).</li>
  <li>
<code class="language-plaintext highlighter-rouge">tagsize</code>: The size of the tag in meters. Each tag design has a black border and a white border, but some designs have the white border on the inside and some have the black border on the inside. The tagsize is thus measured from where the two borders meet, see the figure below for an example.</li>
  <li>
<code class="language-plaintext highlighter-rouge">fx</code>, <code class="language-plaintext highlighter-rouge">fy</code>: The camera’s focal length (in pixels). For most cameras <code class="language-plaintext highlighter-rouge">fx</code> and <code class="language-plaintext highlighter-rouge">fy</code> will be equal or nearly so.</li>
  <li>
<code class="language-plaintext highlighter-rouge">cx</code>, <code class="language-plaintext highlighter-rouge">cy</code>: The camera’s focal center (in pixels). For most cameras this will be approximately the same as the image center.</li>
</ul>

<p>Note: The tag size should not be measured from the outside of the tag. The tag size is defined as the distance between the detection corners, or alternately, the length of the edge between the white border and the black border. The following illustration marks the detection corners with red Xs and the tag size with a red arrow for a tag from the 48h12Custom tag family.</p>

<p><img src="https://raw.githubusercontent.com/waveshareteam/ugv_ws/ros2-humble-develop/src/ugv_else/apriltag_ros/apriltag/tag_size_48h12.png" alt="The tag size is the width of the edge between the white and black borders."></p>

<h3 id="coordinate-system">Coordinate System</h3>
<p>The coordinate system has the origin at the camera center. The z-axis points from the camera center out the camera lens. The x-axis is to the right in the image taken by the camera, and y is down. The tag’s coordinate frame is centered at the center of the tag, with x-axis to the right, y-axis down, and z-axis into the tag.</p>

<h1 id="debugging">Debugging</h1>

<p>You can enable <a href="https://clang.llvm.org/docs/AddressSanitizer.html">AddressSanitizer</a> to debug memory issues for Debug builds by setting the <code class="language-plaintext highlighter-rouge">ASAN</code> option:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -GNinja -DCMAKE_BUILD_TYPE=Debug -DASAN=ON
cmake --build build

</code></pre></div></div>

<p>Mostly you can then run your executables as usual and inspect the sanitiser output. If you get a message like <code class="language-plaintext highlighter-rouge">ASan runtime does not come first in initial library list; you should either link runtime to your application or manually preload it with LD_PRELOAD.</code> you have to preload the corresponding <code class="language-plaintext highlighter-rouge">libasan.so.5</code> like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libasan.so.5 ./build/opencv_demo

</code></pre></div></div>

<h1 id="flexible-layouts">Flexible Layouts</h1>
<p>AprilTag 3 supports a wide variety of possible tag layouts in addition to the classic layout supported in AprilTag 2. The tag’s data bits can now go outside of the tag border, and it is also possible to define layouts with “holes” inside of the tag border where there are no data bits. In this repo we have included:</p>

<ul>
  <li>Two families of the new standard layout. This layout adds a layer of data bits around the outside of the tag border, increasing data density, and the number of possible tags, at the cost of a slight decrease in detection distance.</li>
  <li>Two families of circular tags.</li>
  <li>One family which has a hole in the middle. This could be used for example for drone applications by placing different sized tags inside of each other to allow detection over a wide range of distances.</li>
</ul>

<p>You can generate your own tag families using our other repo, <a href="https://github.com/AprilRobotics/apriltag-generation">AprilTag-Generation</a>.</p>

<h1 id="support">Support</h1>
<p>Please create an issue on this GitHub for any questions instead of sending a private message. This allows other people with the same question to find your answer.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <em>No CHANGELOG found.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/apriltag/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No dependencies on ROS packages.</em>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/python3-dev">python3-dev</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-numpy">python3-numpy</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/cmake">cmake</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/libopencv-dev">libopencv-dev</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/apriltag_ros#github">apriltag_ros</a></td>
                      <td class="text-center">
                        
                        <a href="/p/apriltag_ros#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/apriltag_ros#github">apriltag_ros</a></td>
                      <td class="text-center">
                        
                        <a href="/p/apriltag_ros#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/apriltag_ros#github">apriltag_ros</a></td>
                      <td class="text-center">
                        
                        <a href="/p/apriltag_ros#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/apriltag_ros#github">apriltag_ros</a></td>
                      <td class="text-center">
                        
                        <a href="/p/apriltag_ros#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                    <tr>
                      <td><a href="/p/apriltag_ros#github">apriltag_ros</a></td>
                      <td class="text-center">
                        
                        <a href="/p/apriltag_ros#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/apriltag_docking#github">apriltag_docking</a></td>
                      <td class="text-center">
                        
                        <a href="/p/apriltag_docking#github-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/tag_based_sfm_calibrator#github">tag_based_sfm_calibrator</a></td>
                      <td class="text-center">
                        
                        <a href="/p/tag_based_sfm_calibrator#github-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/isaac_ros_launch#github">isaac_ros_launch</a></td>
                      <td class="text-center">
                        
                        <a href="/p/isaac_ros_launch#github-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="github-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>apriltag</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="github-question-list" class="panel-body" style="display: none;"></div>
      <div id="github-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/apriltag+github">here</a>.</p>
      </div>
      <div id="github-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/waveshareteam/ugv_ws.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/github/p/apriltag"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/waveshareteam/ugv_ws/tree/ros2-humble-develop/src/ugv_else/apriltag_ros/apriltag"
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-noetic">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/apriltag">apriltag</a> <small>package from <a style="text-decoration:none" href="/r/apriltag/github-aprilrobotics-apriltag">apriltag</a> repo</small>
        </h3>
          
            
            
              <span class="label label-default pkg-label">

apriltag
</span>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/noetic/api/apriltag/html/"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/aprilrobotics/apriltag/tree/master/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  <a class="list-group-item text-center "
     target="_blank"
     href="http://wiki.ros.org/apriltag?distro=noetic"
     title="View this package on wiki.ros.org">
       <span style="margin-right: 5px;" class="glyphicon glyphicon-info-sign"></span>
       <br>
       Wiki
  </a>
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="noetic-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#noetic-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#noetic-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#noetic-deps" data-toggle="tab"><span class="label label-primary">4</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#noetic-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#noetic-questions" data-toggle="tab"><span id="noetic-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="noetic-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>3.4.3</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">AprilTag is a visual fiducial system popular for robotics research.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/aprilrobotics/apriltag.git">https://github.com/aprilrobotics/apriltag.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-17
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    
                      <a href="https://build.ros.org/view/Ndev/job/Ndev__apriltag__ubuntu_focal_amd64" class="label ci-result-success" title="Latest build information: Mon, 05 Feb 2024 21:13:38 GMT
  Total tests: 0
  Succeeded: 0
  Skipped: 0
  Failed: 0
No build history available for this repository.">
                        <span class="glyphicon glyphicon-check"></span>
                        Continuous Integration
                        
                          : 0 / 0
                        
                      </a>
                    
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">robotics</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/apriltag/#noetic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/apriltag/#noetic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/apriltag/#noetic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            AprilTag detector library
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="https://april.eecs.umich.edu/software/apriltag.html">Website</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Max Krogius</li>
                
                  <li>Wolfgang Merkt</li>
                
                  <li>Christian Rauch</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Edwin Olson</li>
                
                  <li>Max Krogius</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/aprilrobotics/apriltag/tree/master/./README.md" title="Open in git repository">README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="apriltag-3">AprilTag 3</h1>
<p>AprilTag is a visual fiducial system popular in robotics research. This repository contains the most recent version of AprilTag, AprilTag 3, which includes a faster (&gt;2x) detector, improved detection rate on small tags, flexible tag layouts, and pose estimation. AprilTag consists of a small C library with minimal dependencies.</p>

<p>You can find tag images for the pre-generated layouts <a href="https://github.com/AprilRobotics/apriltag-imgs">here</a>. We recommend using the tagStandard41h12 layout.</p>

<h1 id="table-of-contents">Table of Contents</h1>
<ul>
  <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#papers">Papers</a></li>
  <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#install">Install</a></li>
  <li>
<a href="https://github.com/aprilrobotics/apriltag/tree/master/./#usage">Usage</a>
    <ul>
      <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#choosing-a-tag-family">Choosing a Tag Family</a></li>
      <li>
<a href="https://github.com/aprilrobotics/apriltag/tree/master/./#getting-started-with-the-detector">Getting Started with the Detector</a>
        <ul>
          <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#python">Python</a></li>
          <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#c">C</a></li>
          <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#matlab">Matlab</a></li>
          <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#julia">Julia</a></li>
        </ul>
      </li>
      <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#upgrading-from-aprilTag-2">Upgrading from AprilTag 2</a></li>
      <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#opencv-integration">OpenCV Integration</a></li>
      <li>
<a href="https://github.com/aprilrobotics/apriltag/tree/master/./#tuning-the-detector-parameters">Tuning the Detector Parameters</a>
        <ul>
          <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#increasing-speed">Increasing speed.</a></li>
          <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#increasing-detection-distance">Increasing detection distance.</a></li>
        </ul>
      </li>
      <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#pose-estimation">Pose Estimation.</a></li>
    </ul>
  </li>
  <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#debugging">Debugging</a></li>
  <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#flexible-layouts">Flexible Layouts</a></li>
  <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#support">Support</a></li>
</ul>

<h1 id="papers">Papers</h1>
<p>AprilTag is the subject of the following papers.</p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=olson2011tags">AprilTag: A robust and flexible visual fiducial system</a></p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=wang2016iros">AprilTag 2: Efficient and robust fiducial detection</a></p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=krogius2019iros">Flexible Layouts for Fiducial Tags</a></p>

<h1 id="install">Install</h1>

<p>Officially only Linux operating systems are supported, although users have had success installing on Windows too.</p>

<p>The default installation will place headers in /usr/local/include and shared library in /usr/local/lib. It also installs a pkg-config script into /usr/local/lib/pkgconfig and will install a python wrapper if python3 is installed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -DCMAKE_BUILD_TYPE=Release
cmake --build build --target install

</code></pre></div></div>
<p>This will build shared (*.so) libraries by default. If you need static (*.a) libraries set <code class="language-plaintext highlighter-rouge">BUILD_SHARED_LIBS</code> to <code class="language-plaintext highlighter-rouge">OFF</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -DCMAKE_BUILD_TYPE=Release -DBUILD_SHARED_LIBS=OFF
cmake --build build --target install

</code></pre></div></div>

<p>If you have Ninja (<code class="language-plaintext highlighter-rouge">sudo apt install ninja-build</code>) installed, you can use:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -GNinja -DCMAKE_BUILD_TYPE=Release
cmake --build build --target install

</code></pre></div></div>
<p>to generate and compile via the ninja build script. It will be much faster than with cmake’s default Makefile generator.</p>

<p>You can omit <code class="language-plaintext highlighter-rouge">--target install</code> if you only want to use this locally without installing.</p>

<h1 id="usage">Usage</h1>

<h2 id="choosing-a-tag-family">Choosing a Tag Family</h2>
<p>For the vast majority of applications, the tagStandard41h12 family will be the correct choice. You can find the images for the tags in the <a href="https://github.com/AprilRobotics/apriltag-imgs">apriltag-imgs repo</a>. Scale up the images in your favorite editor and print them out.</p>

<p>Some heuristics for when to choose other tag families:</p>
<ol>
  <li>If you need more tags, use tagStandard52h13</li>
  <li>If you need to maximize the use of space on a small circular object, use tagCircle49h12 (or tagCircle21h7).</li>
  <li>If you want to make a recursive tag use tagCustom48h12.</li>
  <li>If you want compatibility with the ArUcO detector use tag36h11</li>
</ol>

<p>If none of these fit your needs, generate your own custom tag family <a href="https://github.com/AprilRobotics/apriltag-generation">here</a>.</p>

<h2 id="getting-started-with-the-detector">Getting Started with the Detector</h2>
<h3 id="python">Python</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import cv2
import numpy as np
from apriltag import apriltag

imagepath = 'test.jpg'
image = cv2.imread(imagepath, cv2.IMREAD_GRAYSCALE)
detector = apriltag("tagStandard41h12")

detections = detector.detect(image)
</code></pre></div></div>

<p>Alternately you can use the AprilTag python bindings created by <a href="https://github.com/duckietown/lib-dt-apriltags">duckietown</a>.</p>

<h3 id="c">C</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>image_u8_t* im = image_u8_create_from_pnm("test.pnm");
if (im == NULL) {
    fprintf(stderr, "Failed to load pnm image.\n");
    exit(1);
}
apriltag_detector_t *td = apriltag_detector_create();
apriltag_family_t *tf = tagStandard41h12_create();
apriltag_detector_add_family(td, tf);
zarray_t *detections = apriltag_detector_detect(td, im);

for (int i = 0; i &lt; zarray_size(detections); i++) {
    apriltag_detection_t *det;
    zarray_get(detections, i, &amp;det);

    // Do stuff with detections here.
}
// Cleanup.
apriltag_detections_destroy(detections);
tagStandard41h12_destroy(tf);
apriltag_detector_destroy(td);
</code></pre></div></div>

<h3 id="matlab">Matlab</h3>

<p>Provided by third-party <a href="https://github.com/alddiaz/MATLAB_AprilTag3">here</a>.</p>

<h3 id="julia">Julia</h3>

<p>Provided by third-party <a href="https://github.com/JuliaRobotics/AprilTags.jl">here</a></p>

<h2 id="upgrading-from-apriltag-2">Upgrading from AprilTag 2</h2>
<p>For most use-cases this should be a drop in replacement.</p>

<ul>
  <li>The options refine_decode, refine_pose, and black_border have been removed.</li>
  <li>If you have generated your own families, you will need to regenerate the c code for those families. The java code however does not need to be regenerated so this should be quick and easy.</li>
</ul>

<h2 id="opencv-integration">OpenCV Integration</h2>

<p>Note that this library has no external dependencies. Most applications
will require, at minimum, a method for acquiring images.</p>

<p>See example/opencv_demo.cc for an example of using AprilTag in C++ with OpenCV.
This example application can be built by executing the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd examples
$ make opencv_demo
</code></pre></div></div>

<p>Image data in a cv::Mat object can be passed to AprilTag without creating
a deep copy. Simply create an image_u8_t header for the cv::Mat data buffer:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cv::Mat img;

image_u8_t img_header = { .width = img.cols,
    .height = img.rows,
    .stride = img.cols,
    .buf = img.data
};
</code></pre></div></div>

<h2 id="tuning-the-detector-parameters">Tuning the Detector Parameters</h2>
<h3 id="increasing-speed">Increasing speed.</h3>
<p>Increasing the quad_decimate parameter will increase the speed of the detector at the cost of detection distance.  If you have extra cpu cores to throw at the problem then you can increase nthreads. If your image is somewhat noisy, increasing the quad_sigma parameter can increase speed.</p>

<h3 id="increasing-detection-distance">Increasing detection distance.</h3>
<p>First choose an example image and run the detector with debug=1 to generate the debug images. These show the detector’s output at each step in the detection pipeline.
If the border of your tag is not being detected as a quadrilateral, decrease quad_decimate (all the way to 1 if necessary).
If the border of the tag is detected then experiment with changing decode_sharpening.</p>

<h2 id="pose-estimation">Pose Estimation.</h2>
<p>We provide a method for computing the pose of the tag as follows (alternately use OpenCv’s Pnp solver with SOLVEPNP_IPPE_SQUARE). You will need to include the apriltag_pose.h header file and then call the estimate_tag_pose function as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// First create an apriltag_detection_info_t struct using your known parameters.
apriltag_detection_info_t info;
info.det = det;
info.tagsize = tagsize;
info.fx = fx;
info.fy = fy;
info.cx = cx;
info.cy = cy;

// Then call estimate_tag_pose.
apriltag_pose_t pose;
double err = estimate_tag_pose(&amp;info, &amp;pose);
// Do something with pose.
...
</code></pre></div></div>

<p>where the parameters are as follows:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">det</code>: The tag detection struct (april_detection_t).</li>
  <li>
<code class="language-plaintext highlighter-rouge">tagsize</code>: The size of the tag in meters. Each tag design has a black border and a white border, but some designs have the white border on the inside and some have the black border on the inside. The tagsize is thus measured from where the two borders meet, see the figure below for an example.</li>
  <li>
<code class="language-plaintext highlighter-rouge">fx</code>, <code class="language-plaintext highlighter-rouge">fy</code>: The camera’s focal length (in pixels). For most cameras <code class="language-plaintext highlighter-rouge">fx</code> and <code class="language-plaintext highlighter-rouge">fy</code> will be equal or nearly so.</li>
  <li>
<code class="language-plaintext highlighter-rouge">cx</code>, <code class="language-plaintext highlighter-rouge">cy</code>: The camera’s focal center (in pixels). For most cameras this will be approximately the same as the image center.</li>
</ul>

<p>Note: The tag size should not be measured from the outside of the tag. The tag size is defined as the distance between the detection corners, or alternately, the length of the edge between the white border and the black border. The following illustration marks the detection corners with red Xs and the tag size with a red arrow for a tag from the 48h12Custom tag family.</p>

<p><img src="https://raw.githubusercontent.com/aprilrobotics/apriltag/master/./tag_size_48h12.png" alt="The tag size is the width of the edge between the white and black borders."></p>

<h3 id="coordinate-system">Coordinate System</h3>
<p>The coordinate system has the origin at the camera center. The z-axis points from the camera center out the camera lens. The x-axis is to the right in the image taken by the camera, and y is down. The tag’s coordinate frame is centered at the center of the tag. From the viewer’s perspective, the x-axis is to the right, y-axis down, and z-axis is into the tag.</p>

<h1 id="debugging">Debugging</h1>

<p>You can enable <a href="https://clang.llvm.org/docs/AddressSanitizer.html">AddressSanitizer</a> to debug memory issues for Debug builds by setting the <code class="language-plaintext highlighter-rouge">ASAN</code> option:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -GNinja -DCMAKE_BUILD_TYPE=Debug -DASAN=ON
cmake --build build

</code></pre></div></div>

<p>Mostly you can then run your executables as usual and inspect the sanitiser output. If you get a message like <code class="language-plaintext highlighter-rouge">ASan runtime does not come first in initial library list; you should either link runtime to your application or manually preload it with LD_PRELOAD.</code> you have to preload the corresponding <code class="language-plaintext highlighter-rouge">libasan.so.5</code> like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libasan.so.5 ./build/opencv_demo

</code></pre></div></div>

<h1 id="flexible-layouts">Flexible Layouts</h1>
<p>AprilTag 3 supports a wide variety of possible tag layouts in addition to the classic layout supported in AprilTag 2. The tag’s data bits can now go outside of the tag border, and it is also possible to define layouts with “holes” inside of the tag border where there are no data bits. In this repo we have included:</p>

<ul>
  <li>Two families of the new standard layout. This layout adds a layer of data bits around the outside of the tag border, increasing data density, and the number of possible tags, at the cost of a slight decrease in detection distance.</li>
  <li>Two families of circular tags.</li>
  <li>One family which has a hole in the middle. This could be used for example for drone applications by placing different sized tags inside of each other to allow detection over a wide range of distances.</li>
</ul>

<p>You can generate your own tag families using our other repo, <a href="https://github.com/AprilRobotics/apriltag-generation">AprilTag-Generation</a>.</p>

<h1 id="support">Support</h1>
<p>Please create an issue on this GitHub for any questions instead of sending a private message. This allows other people with the same question to find your answer.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <em>No CHANGELOG found.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="noetic-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/apriltag/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="noetic-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No dependencies on ROS packages.</em>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/python3-dev">python3-dev</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-numpy">python3-numpy</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/cmake">cmake</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/libopencv-dev">libopencv-dev</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/apriltag_ros#noetic">apriltag_ros</a></td>
                      <td class="text-center">
                        
                        <a href="/p/apriltag_ros#noetic-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="noetic-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="noetic-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>apriltag</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="noetic-question-list" class="panel-body" style="display: none;"></div>
      <div id="noetic-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/apriltag+noetic">here</a>.</p>
      </div>
      <div id="noetic-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/aprilrobotics/apriltag.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/noetic/api/apriltag/html/"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/aprilrobotics/apriltag/tree/master/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  <a class="list-group-item "
     target="_blank"
     href="http://wiki.ros.org/apriltag?distro=noetic"
     title="View this package on wiki.ros.org">
       <span style="margin-right: 5px;" class="glyphicon glyphicon-info-sign"></span>
       
       Wiki
  </a>
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-galactic">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/apriltag">apriltag</a> <small>package from <a style="text-decoration:none" href="/r/apriltag/github-AprilRobotics-apriltag">apriltag</a> repo</small>
        </h3>
          
            
            
              <span class="label label-default pkg-label">

apriltag
</span>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/galactic/p/apriltag"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/AprilRobotics/apriltag/tree/master/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="galactic-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#galactic-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#galactic-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#galactic-deps" data-toggle="tab"><span class="label label-primary">4</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#galactic-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#galactic-questions" data-toggle="tab"><span id="galactic-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="galactic-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>3.4.3</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">AprilTag is a visual fiducial system popular for robotics research.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/AprilRobotics/apriltag.git">https://github.com/AprilRobotics/apriltag.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-17
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">robotics</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/apriltag/#galactic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/apriltag/#galactic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/apriltag/#galactic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            AprilTag detector library
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="https://april.eecs.umich.edu/software/apriltag.html">Website</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Max Krogius</li>
                
                  <li>Wolfgang Merkt</li>
                
                  <li>Christian Rauch</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Edwin Olson</li>
                
                  <li>Max Krogius</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/AprilRobotics/apriltag/tree/master/./README.md" title="Open in git repository">README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="apriltag-3">AprilTag 3</h1>
<p>AprilTag is a visual fiducial system popular in robotics research. This repository contains the most recent version of AprilTag, AprilTag 3, which includes a faster (&gt;2x) detector, improved detection rate on small tags, flexible tag layouts, and pose estimation. AprilTag consists of a small C library with minimal dependencies.</p>

<p>You can find tag images for the pre-generated layouts <a href="https://github.com/AprilRobotics/apriltag-imgs">here</a>. We recommend using the tagStandard41h12 layout.</p>

<h1 id="table-of-contents">Table of Contents</h1>
<ul>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#papers">Papers</a></li>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#install">Install</a></li>
  <li>
<a href="https://github.com/AprilRobotics/apriltag/tree/master/./#usage">Usage</a>
    <ul>
      <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#choosing-a-tag-family">Choosing a Tag Family</a></li>
      <li>
<a href="https://github.com/AprilRobotics/apriltag/tree/master/./#getting-started-with-the-detector">Getting Started with the Detector</a>
        <ul>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#python">Python</a></li>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#c">C</a></li>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#matlab">Matlab</a></li>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#julia">Julia</a></li>
        </ul>
      </li>
      <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#upgrading-from-aprilTag-2">Upgrading from AprilTag 2</a></li>
      <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#opencv-integration">OpenCV Integration</a></li>
      <li>
<a href="https://github.com/AprilRobotics/apriltag/tree/master/./#tuning-the-detector-parameters">Tuning the Detector Parameters</a>
        <ul>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#increasing-speed">Increasing speed.</a></li>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#increasing-detection-distance">Increasing detection distance.</a></li>
        </ul>
      </li>
      <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#pose-estimation">Pose Estimation.</a></li>
    </ul>
  </li>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#debugging">Debugging</a></li>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#flexible-layouts">Flexible Layouts</a></li>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#support">Support</a></li>
</ul>

<h1 id="papers">Papers</h1>
<p>AprilTag is the subject of the following papers.</p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=olson2011tags">AprilTag: A robust and flexible visual fiducial system</a></p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=wang2016iros">AprilTag 2: Efficient and robust fiducial detection</a></p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=krogius2019iros">Flexible Layouts for Fiducial Tags</a></p>

<h1 id="install">Install</h1>

<p>Officially only Linux operating systems are supported, although users have had success installing on Windows too.</p>

<p>The default installation will place headers in /usr/local/include and shared library in /usr/local/lib. It also installs a pkg-config script into /usr/local/lib/pkgconfig and will install a python wrapper if python3 is installed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -DCMAKE_BUILD_TYPE=Release
cmake --build build --target install

</code></pre></div></div>
<p>This will build shared (*.so) libraries by default. If you need static (*.a) libraries set <code class="language-plaintext highlighter-rouge">BUILD_SHARED_LIBS</code> to <code class="language-plaintext highlighter-rouge">OFF</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -DCMAKE_BUILD_TYPE=Release -DBUILD_SHARED_LIBS=OFF
cmake --build build --target install

</code></pre></div></div>

<p>If you have Ninja (<code class="language-plaintext highlighter-rouge">sudo apt install ninja-build</code>) installed, you can use:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -GNinja -DCMAKE_BUILD_TYPE=Release
cmake --build build --target install

</code></pre></div></div>
<p>to generate and compile via the ninja build script. It will be much faster than with cmake’s default Makefile generator.</p>

<p>You can omit <code class="language-plaintext highlighter-rouge">--target install</code> if you only want to use this locally without installing.</p>

<h1 id="usage">Usage</h1>

<h2 id="choosing-a-tag-family">Choosing a Tag Family</h2>
<p>For the vast majority of applications, the tagStandard41h12 family will be the correct choice. You can find the images for the tags in the <a href="https://github.com/AprilRobotics/apriltag-imgs">apriltag-imgs repo</a>. Scale up the images in your favorite editor and print them out.</p>

<p>Some heuristics for when to choose other tag families:</p>
<ol>
  <li>If you need more tags, use tagStandard52h13</li>
  <li>If you need to maximize the use of space on a small circular object, use tagCircle49h12 (or tagCircle21h7).</li>
  <li>If you want to make a recursive tag use tagCustom48h12.</li>
  <li>If you want compatibility with the ArUcO detector use tag36h11</li>
</ol>

<p>If none of these fit your needs, generate your own custom tag family <a href="https://github.com/AprilRobotics/apriltag-generation">here</a>.</p>

<h2 id="getting-started-with-the-detector">Getting Started with the Detector</h2>
<h3 id="python">Python</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import cv2
import numpy as np
from apriltag import apriltag

imagepath = 'test.jpg'
image = cv2.imread(imagepath, cv2.IMREAD_GRAYSCALE)
detector = apriltag("tagStandard41h12")

detections = detector.detect(image)
</code></pre></div></div>

<p>Alternately you can use the AprilTag python bindings created by <a href="https://github.com/duckietown/lib-dt-apriltags">duckietown</a>.</p>

<h3 id="c">C</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>image_u8_t* im = image_u8_create_from_pnm("test.pnm");
if (im == NULL) {
    fprintf(stderr, "Failed to load pnm image.\n");
    exit(1);
}
apriltag_detector_t *td = apriltag_detector_create();
apriltag_family_t *tf = tagStandard41h12_create();
apriltag_detector_add_family(td, tf);
zarray_t *detections = apriltag_detector_detect(td, im);

for (int i = 0; i &lt; zarray_size(detections); i++) {
    apriltag_detection_t *det;
    zarray_get(detections, i, &amp;det);

    // Do stuff with detections here.
}
// Cleanup.
apriltag_detections_destroy(detections);
tagStandard41h12_destroy(tf);
apriltag_detector_destroy(td);
</code></pre></div></div>

<h3 id="matlab">Matlab</h3>

<p>Provided by third-party <a href="https://github.com/alddiaz/MATLAB_AprilTag3">here</a>.</p>

<h3 id="julia">Julia</h3>

<p>Provided by third-party <a href="https://github.com/JuliaRobotics/AprilTags.jl">here</a></p>

<h2 id="upgrading-from-apriltag-2">Upgrading from AprilTag 2</h2>
<p>For most use-cases this should be a drop in replacement.</p>

<ul>
  <li>The options refine_decode, refine_pose, and black_border have been removed.</li>
  <li>If you have generated your own families, you will need to regenerate the c code for those families. The java code however does not need to be regenerated so this should be quick and easy.</li>
</ul>

<h2 id="opencv-integration">OpenCV Integration</h2>

<p>Note that this library has no external dependencies. Most applications
will require, at minimum, a method for acquiring images.</p>

<p>See example/opencv_demo.cc for an example of using AprilTag in C++ with OpenCV.
This example application can be built by executing the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd examples
$ make opencv_demo
</code></pre></div></div>

<p>Image data in a cv::Mat object can be passed to AprilTag without creating
a deep copy. Simply create an image_u8_t header for the cv::Mat data buffer:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cv::Mat img;

image_u8_t img_header = { .width = img.cols,
    .height = img.rows,
    .stride = img.cols,
    .buf = img.data
};
</code></pre></div></div>

<h2 id="tuning-the-detector-parameters">Tuning the Detector Parameters</h2>
<h3 id="increasing-speed">Increasing speed.</h3>
<p>Increasing the quad_decimate parameter will increase the speed of the detector at the cost of detection distance.  If you have extra cpu cores to throw at the problem then you can increase nthreads. If your image is somewhat noisy, increasing the quad_sigma parameter can increase speed.</p>

<h3 id="increasing-detection-distance">Increasing detection distance.</h3>
<p>First choose an example image and run the detector with debug=1 to generate the debug images. These show the detector’s output at each step in the detection pipeline.
If the border of your tag is not being detected as a quadrilateral, decrease quad_decimate (all the way to 1 if necessary).
If the border of the tag is detected then experiment with changing decode_sharpening.</p>

<h2 id="pose-estimation">Pose Estimation.</h2>
<p>We provide a method for computing the pose of the tag as follows (alternately use OpenCv’s Pnp solver with SOLVEPNP_IPPE_SQUARE). You will need to include the apriltag_pose.h header file and then call the estimate_tag_pose function as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// First create an apriltag_detection_info_t struct using your known parameters.
apriltag_detection_info_t info;
info.det = det;
info.tagsize = tagsize;
info.fx = fx;
info.fy = fy;
info.cx = cx;
info.cy = cy;

// Then call estimate_tag_pose.
apriltag_pose_t pose;
double err = estimate_tag_pose(&amp;info, &amp;pose);
// Do something with pose.
...
</code></pre></div></div>

<p>where the parameters are as follows:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">det</code>: The tag detection struct (april_detection_t).</li>
  <li>
<code class="language-plaintext highlighter-rouge">tagsize</code>: The size of the tag in meters. Each tag design has a black border and a white border, but some designs have the white border on the inside and some have the black border on the inside. The tagsize is thus measured from where the two borders meet, see the figure below for an example.</li>
  <li>
<code class="language-plaintext highlighter-rouge">fx</code>, <code class="language-plaintext highlighter-rouge">fy</code>: The camera’s focal length (in pixels). For most cameras <code class="language-plaintext highlighter-rouge">fx</code> and <code class="language-plaintext highlighter-rouge">fy</code> will be equal or nearly so.</li>
  <li>
<code class="language-plaintext highlighter-rouge">cx</code>, <code class="language-plaintext highlighter-rouge">cy</code>: The camera’s focal center (in pixels). For most cameras this will be approximately the same as the image center.</li>
</ul>

<p>Note: The tag size should not be measured from the outside of the tag. The tag size is defined as the distance between the detection corners, or alternately, the length of the edge between the white border and the black border. The following illustration marks the detection corners with red Xs and the tag size with a red arrow for a tag from the 48h12Custom tag family.</p>

<p><img src="https://raw.githubusercontent.com/AprilRobotics/apriltag/master/./tag_size_48h12.png" alt="The tag size is the width of the edge between the white and black borders."></p>

<h3 id="coordinate-system">Coordinate System</h3>
<p>The coordinate system has the origin at the camera center. The z-axis points from the camera center out the camera lens. The x-axis is to the right in the image taken by the camera, and y is down. The tag’s coordinate frame is centered at the center of the tag. From the viewer’s perspective, the x-axis is to the right, y-axis down, and z-axis is into the tag.</p>

<h1 id="debugging">Debugging</h1>

<p>You can enable <a href="https://clang.llvm.org/docs/AddressSanitizer.html">AddressSanitizer</a> to debug memory issues for Debug builds by setting the <code class="language-plaintext highlighter-rouge">ASAN</code> option:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -GNinja -DCMAKE_BUILD_TYPE=Debug -DASAN=ON
cmake --build build

</code></pre></div></div>

<p>Mostly you can then run your executables as usual and inspect the sanitiser output. If you get a message like <code class="language-plaintext highlighter-rouge">ASan runtime does not come first in initial library list; you should either link runtime to your application or manually preload it with LD_PRELOAD.</code> you have to preload the corresponding <code class="language-plaintext highlighter-rouge">libasan.so.5</code> like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libasan.so.5 ./build/opencv_demo

</code></pre></div></div>

<h1 id="flexible-layouts">Flexible Layouts</h1>
<p>AprilTag 3 supports a wide variety of possible tag layouts in addition to the classic layout supported in AprilTag 2. The tag’s data bits can now go outside of the tag border, and it is also possible to define layouts with “holes” inside of the tag border where there are no data bits. In this repo we have included:</p>

<ul>
  <li>Two families of the new standard layout. This layout adds a layer of data bits around the outside of the tag border, increasing data density, and the number of possible tags, at the cost of a slight decrease in detection distance.</li>
  <li>Two families of circular tags.</li>
  <li>One family which has a hole in the middle. This could be used for example for drone applications by placing different sized tags inside of each other to allow detection over a wide range of distances.</li>
</ul>

<p>You can generate your own tag families using our other repo, <a href="https://github.com/AprilRobotics/apriltag-generation">AprilTag-Generation</a>.</p>

<h1 id="support">Support</h1>
<p>Please create an issue on this GitHub for any questions instead of sending a private message. This allows other people with the same question to find your answer.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <em>No CHANGELOG found.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/apriltag/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No dependencies on ROS packages.</em>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/python3-dev">python3-dev</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-numpy">python3-numpy</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/cmake">cmake</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/libopencv-dev">libopencv-dev</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <em>No known dependants.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="galactic-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>apriltag</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="galactic-question-list" class="panel-body" style="display: none;"></div>
      <div id="galactic-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/apriltag+galactic">here</a>.</p>
      </div>
      <div id="galactic-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/AprilRobotics/apriltag.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/galactic/p/apriltag"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/AprilRobotics/apriltag/tree/master/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-iron">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/apriltag">apriltag</a> <small>package from <a style="text-decoration:none" href="/r/apriltag/github-AprilRobotics-apriltag">apriltag</a> repo</small>
        </h3>
          
            
            
              <span class="label label-default pkg-label">

apriltag
</span>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/iron/p/apriltag"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/AprilRobotics/apriltag/tree/master/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="iron-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#iron-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#iron-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#iron-deps" data-toggle="tab"><span class="label label-primary">4</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#iron-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#iron-questions" data-toggle="tab"><span id="iron-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="iron-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>3.4.3</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">AprilTag is a visual fiducial system popular for robotics research.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/AprilRobotics/apriltag.git">https://github.com/AprilRobotics/apriltag.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-17
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    <span class="label label-default" title="No CI information available for this package.">No Continuous Integration</span>
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">robotics</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/apriltag/#iron-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/apriltag/#iron-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/apriltag/#iron-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            AprilTag detector library
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="https://april.eecs.umich.edu/software/apriltag.html">Website</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Max Krogius</li>
                
                  <li>Wolfgang Merkt</li>
                
                  <li>Christian Rauch</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Edwin Olson</li>
                
                  <li>Max Krogius</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/AprilRobotics/apriltag/tree/master/./README.md" title="Open in git repository">README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="apriltag-3">AprilTag 3</h1>
<p>AprilTag is a visual fiducial system popular in robotics research. This repository contains the most recent version of AprilTag, AprilTag 3, which includes a faster (&gt;2x) detector, improved detection rate on small tags, flexible tag layouts, and pose estimation. AprilTag consists of a small C library with minimal dependencies.</p>

<p>You can find tag images for the pre-generated layouts <a href="https://github.com/AprilRobotics/apriltag-imgs">here</a>. We recommend using the tagStandard41h12 layout.</p>

<h1 id="table-of-contents">Table of Contents</h1>
<ul>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#papers">Papers</a></li>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#install">Install</a></li>
  <li>
<a href="https://github.com/AprilRobotics/apriltag/tree/master/./#usage">Usage</a>
    <ul>
      <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#choosing-a-tag-family">Choosing a Tag Family</a></li>
      <li>
<a href="https://github.com/AprilRobotics/apriltag/tree/master/./#getting-started-with-the-detector">Getting Started with the Detector</a>
        <ul>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#python">Python</a></li>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#c">C</a></li>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#matlab">Matlab</a></li>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#julia">Julia</a></li>
        </ul>
      </li>
      <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#upgrading-from-aprilTag-2">Upgrading from AprilTag 2</a></li>
      <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#opencv-integration">OpenCV Integration</a></li>
      <li>
<a href="https://github.com/AprilRobotics/apriltag/tree/master/./#tuning-the-detector-parameters">Tuning the Detector Parameters</a>
        <ul>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#increasing-speed">Increasing speed.</a></li>
          <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#increasing-detection-distance">Increasing detection distance.</a></li>
        </ul>
      </li>
      <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#pose-estimation">Pose Estimation.</a></li>
    </ul>
  </li>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#debugging">Debugging</a></li>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#flexible-layouts">Flexible Layouts</a></li>
  <li><a href="https://github.com/AprilRobotics/apriltag/tree/master/./#support">Support</a></li>
</ul>

<h1 id="papers">Papers</h1>
<p>AprilTag is the subject of the following papers.</p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=olson2011tags">AprilTag: A robust and flexible visual fiducial system</a></p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=wang2016iros">AprilTag 2: Efficient and robust fiducial detection</a></p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=krogius2019iros">Flexible Layouts for Fiducial Tags</a></p>

<h1 id="install">Install</h1>

<p>Officially only Linux operating systems are supported, although users have had success installing on Windows too.</p>

<p>The default installation will place headers in /usr/local/include and shared library in /usr/local/lib. It also installs a pkg-config script into /usr/local/lib/pkgconfig and will install a python wrapper if python3 is installed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -DCMAKE_BUILD_TYPE=Release
cmake --build build --target install

</code></pre></div></div>
<p>This will build shared (*.so) libraries by default. If you need static (*.a) libraries set <code class="language-plaintext highlighter-rouge">BUILD_SHARED_LIBS</code> to <code class="language-plaintext highlighter-rouge">OFF</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -DCMAKE_BUILD_TYPE=Release -DBUILD_SHARED_LIBS=OFF
cmake --build build --target install

</code></pre></div></div>

<p>If you have Ninja (<code class="language-plaintext highlighter-rouge">sudo apt install ninja-build</code>) installed, you can use:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -GNinja -DCMAKE_BUILD_TYPE=Release
cmake --build build --target install

</code></pre></div></div>
<p>to generate and compile via the ninja build script. It will be much faster than with cmake’s default Makefile generator.</p>

<p>You can omit <code class="language-plaintext highlighter-rouge">--target install</code> if you only want to use this locally without installing.</p>

<h1 id="usage">Usage</h1>

<h2 id="choosing-a-tag-family">Choosing a Tag Family</h2>
<p>For the vast majority of applications, the tagStandard41h12 family will be the correct choice. You can find the images for the tags in the <a href="https://github.com/AprilRobotics/apriltag-imgs">apriltag-imgs repo</a>. Scale up the images in your favorite editor and print them out.</p>

<p>Some heuristics for when to choose other tag families:</p>
<ol>
  <li>If you need more tags, use tagStandard52h13</li>
  <li>If you need to maximize the use of space on a small circular object, use tagCircle49h12 (or tagCircle21h7).</li>
  <li>If you want to make a recursive tag use tagCustom48h12.</li>
  <li>If you want compatibility with the ArUcO detector use tag36h11</li>
</ol>

<p>If none of these fit your needs, generate your own custom tag family <a href="https://github.com/AprilRobotics/apriltag-generation">here</a>.</p>

<h2 id="getting-started-with-the-detector">Getting Started with the Detector</h2>
<h3 id="python">Python</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import cv2
import numpy as np
from apriltag import apriltag

imagepath = 'test.jpg'
image = cv2.imread(imagepath, cv2.IMREAD_GRAYSCALE)
detector = apriltag("tagStandard41h12")

detections = detector.detect(image)
</code></pre></div></div>

<p>Alternately you can use the AprilTag python bindings created by <a href="https://github.com/duckietown/lib-dt-apriltags">duckietown</a>.</p>

<h3 id="c">C</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>image_u8_t* im = image_u8_create_from_pnm("test.pnm");
if (im == NULL) {
    fprintf(stderr, "Failed to load pnm image.\n");
    exit(1);
}
apriltag_detector_t *td = apriltag_detector_create();
apriltag_family_t *tf = tagStandard41h12_create();
apriltag_detector_add_family(td, tf);
zarray_t *detections = apriltag_detector_detect(td, im);

for (int i = 0; i &lt; zarray_size(detections); i++) {
    apriltag_detection_t *det;
    zarray_get(detections, i, &amp;det);

    // Do stuff with detections here.
}
// Cleanup.
apriltag_detections_destroy(detections);
tagStandard41h12_destroy(tf);
apriltag_detector_destroy(td);
</code></pre></div></div>

<h3 id="matlab">Matlab</h3>

<p>Provided by third-party <a href="https://github.com/alddiaz/MATLAB_AprilTag3">here</a>.</p>

<h3 id="julia">Julia</h3>

<p>Provided by third-party <a href="https://github.com/JuliaRobotics/AprilTags.jl">here</a></p>

<h2 id="upgrading-from-apriltag-2">Upgrading from AprilTag 2</h2>
<p>For most use-cases this should be a drop in replacement.</p>

<ul>
  <li>The options refine_decode, refine_pose, and black_border have been removed.</li>
  <li>If you have generated your own families, you will need to regenerate the c code for those families. The java code however does not need to be regenerated so this should be quick and easy.</li>
</ul>

<h2 id="opencv-integration">OpenCV Integration</h2>

<p>Note that this library has no external dependencies. Most applications
will require, at minimum, a method for acquiring images.</p>

<p>See example/opencv_demo.cc for an example of using AprilTag in C++ with OpenCV.
This example application can be built by executing the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd examples
$ make opencv_demo
</code></pre></div></div>

<p>Image data in a cv::Mat object can be passed to AprilTag without creating
a deep copy. Simply create an image_u8_t header for the cv::Mat data buffer:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cv::Mat img;

image_u8_t img_header = { .width = img.cols,
    .height = img.rows,
    .stride = img.cols,
    .buf = img.data
};
</code></pre></div></div>

<h2 id="tuning-the-detector-parameters">Tuning the Detector Parameters</h2>
<h3 id="increasing-speed">Increasing speed.</h3>
<p>Increasing the quad_decimate parameter will increase the speed of the detector at the cost of detection distance.  If you have extra cpu cores to throw at the problem then you can increase nthreads. If your image is somewhat noisy, increasing the quad_sigma parameter can increase speed.</p>

<h3 id="increasing-detection-distance">Increasing detection distance.</h3>
<p>First choose an example image and run the detector with debug=1 to generate the debug images. These show the detector’s output at each step in the detection pipeline.
If the border of your tag is not being detected as a quadrilateral, decrease quad_decimate (all the way to 1 if necessary).
If the border of the tag is detected then experiment with changing decode_sharpening.</p>

<h2 id="pose-estimation">Pose Estimation.</h2>
<p>We provide a method for computing the pose of the tag as follows (alternately use OpenCv’s Pnp solver with SOLVEPNP_IPPE_SQUARE). You will need to include the apriltag_pose.h header file and then call the estimate_tag_pose function as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// First create an apriltag_detection_info_t struct using your known parameters.
apriltag_detection_info_t info;
info.det = det;
info.tagsize = tagsize;
info.fx = fx;
info.fy = fy;
info.cx = cx;
info.cy = cy;

// Then call estimate_tag_pose.
apriltag_pose_t pose;
double err = estimate_tag_pose(&amp;info, &amp;pose);
// Do something with pose.
...
</code></pre></div></div>

<p>where the parameters are as follows:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">det</code>: The tag detection struct (april_detection_t).</li>
  <li>
<code class="language-plaintext highlighter-rouge">tagsize</code>: The size of the tag in meters. Each tag design has a black border and a white border, but some designs have the white border on the inside and some have the black border on the inside. The tagsize is thus measured from where the two borders meet, see the figure below for an example.</li>
  <li>
<code class="language-plaintext highlighter-rouge">fx</code>, <code class="language-plaintext highlighter-rouge">fy</code>: The camera’s focal length (in pixels). For most cameras <code class="language-plaintext highlighter-rouge">fx</code> and <code class="language-plaintext highlighter-rouge">fy</code> will be equal or nearly so.</li>
  <li>
<code class="language-plaintext highlighter-rouge">cx</code>, <code class="language-plaintext highlighter-rouge">cy</code>: The camera’s focal center (in pixels). For most cameras this will be approximately the same as the image center.</li>
</ul>

<p>Note: The tag size should not be measured from the outside of the tag. The tag size is defined as the distance between the detection corners, or alternately, the length of the edge between the white border and the black border. The following illustration marks the detection corners with red Xs and the tag size with a red arrow for a tag from the 48h12Custom tag family.</p>

<p><img src="https://raw.githubusercontent.com/AprilRobotics/apriltag/master/./tag_size_48h12.png" alt="The tag size is the width of the edge between the white and black borders."></p>

<h3 id="coordinate-system">Coordinate System</h3>
<p>The coordinate system has the origin at the camera center. The z-axis points from the camera center out the camera lens. The x-axis is to the right in the image taken by the camera, and y is down. The tag’s coordinate frame is centered at the center of the tag. From the viewer’s perspective, the x-axis is to the right, y-axis down, and z-axis is into the tag.</p>

<h1 id="debugging">Debugging</h1>

<p>You can enable <a href="https://clang.llvm.org/docs/AddressSanitizer.html">AddressSanitizer</a> to debug memory issues for Debug builds by setting the <code class="language-plaintext highlighter-rouge">ASAN</code> option:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -GNinja -DCMAKE_BUILD_TYPE=Debug -DASAN=ON
cmake --build build

</code></pre></div></div>

<p>Mostly you can then run your executables as usual and inspect the sanitiser output. If you get a message like <code class="language-plaintext highlighter-rouge">ASan runtime does not come first in initial library list; you should either link runtime to your application or manually preload it with LD_PRELOAD.</code> you have to preload the corresponding <code class="language-plaintext highlighter-rouge">libasan.so.5</code> like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libasan.so.5 ./build/opencv_demo

</code></pre></div></div>

<h1 id="flexible-layouts">Flexible Layouts</h1>
<p>AprilTag 3 supports a wide variety of possible tag layouts in addition to the classic layout supported in AprilTag 2. The tag’s data bits can now go outside of the tag border, and it is also possible to define layouts with “holes” inside of the tag border where there are no data bits. In this repo we have included:</p>

<ul>
  <li>Two families of the new standard layout. This layout adds a layer of data bits around the outside of the tag border, increasing data density, and the number of possible tags, at the cost of a slight decrease in detection distance.</li>
  <li>Two families of circular tags.</li>
  <li>One family which has a hole in the middle. This could be used for example for drone applications by placing different sized tags inside of each other to allow detection over a wide range of distances.</li>
</ul>

<p>You can generate your own tag families using our other repo, <a href="https://github.com/AprilRobotics/apriltag-generation">AprilTag-Generation</a>.</p>

<h1 id="support">Support</h1>
<p>Please create an issue on this GitHub for any questions instead of sending a private message. This allows other people with the same question to find your answer.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <em>No CHANGELOG found.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/apriltag/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No dependencies on ROS packages.</em>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/python3-dev">python3-dev</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-numpy">python3-numpy</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/cmake">cmake</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/libopencv-dev">libopencv-dev</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/apriltag_ros#iron">apriltag_ros</a></td>
                      <td class="text-center">
                        
                        <a href="/p/apriltag_ros#iron-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                    
                    
                    <tr>
                      <td><a href="/p/apriltag_detector_umich#iron">apriltag_detector_umich</a></td>
                      <td class="text-center">
                        
                        <a href="/p/apriltag_detector_umich#iron-deps" class="endoftree">
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="iron-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>apriltag</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="iron-question-list" class="panel-body" style="display: none;"></div>
      <div id="iron-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/apriltag+iron">here</a>.</p>
      </div>
      <div id="iron-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/AprilRobotics/apriltag.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/iron/p/apriltag"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/AprilRobotics/apriltag/tree/master/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/apriltag">apriltag</a> <small>package from <a style="text-decoration:none" href="/r/apriltag/github-aprilrobotics-apriltag">apriltag</a> repo</small>
        </h3>
          
            
            
              <span class="label label-default pkg-label">

apriltag
</span>
            
          
      </td>
    </tr>
  </table>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center"
     target="_blank"
     href="http://docs.ros.org/en/melodic/api/apriltag/html/"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       <br>
       API Docs
  </a>
  <a class="list-group-item text-center"
     target="_blank"
     href="https://github.com/aprilrobotics/apriltag/tree/master/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       <br>
       Browse Code
  </a>
  
  
  
  
  
  <a class="list-group-item text-center "
     target="_blank"
     href="http://wiki.ros.org/apriltag?distro=melodic"
     title="View this package on wiki.ros.org">
       <span style="margin-right: 5px;" class="glyphicon glyphicon-info-sign"></span>
       <br>
       Wiki
  </a>
  
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="melodic-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#melodic-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#melodic-assets" data-toggle="tab"><span class="label label-default">0</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#melodic-deps" data-toggle="tab"><span class="label label-primary">4</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#melodic-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#melodic-questions" data-toggle="tab"><span id="melodic-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="melodic-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>3.4.3</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-default">
                  
                    CMAKE</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            
  <link rel="stylesheet" href="/css/ci-status.css">
  <table class="table table-condensed">
    <tr>
      <td class="text-right"><b>Description</b></td>
      <td><span class="label label-default">AprilTag is a visual fiducial system popular for robotics research.</span></td>
    </tr>
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/aprilrobotics/apriltag.git">https://github.com/aprilrobotics/apriltag.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2025-04-17
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
              <tr>
                <td class="text-right"><b>CI status</b></td>
                <td class="ci-status">
                  
                  
                    
                      <a href="https://build.ros.org/view/Mdev/job/Mdev__apriltag__ubuntu_bionic_amd64" class="label ci-result-success" title="Latest build information: Sat, 24 Jun 2023 06:27:56 GMT
  Total tests: 0
  Succeeded: 0
  Skipped: 0
  Failed: 0
No build history available for this repository.">
                        <span class="glyphicon glyphicon-check"></span>
                        Continuous Integration
                        
                          : 0 / 0
                        
                      </a>
                    
                  
                </td>
              </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Tags</b></td>
      <td>
        
        
          <span class="label label-default">robotics</span> 
        
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Contributing</b></td>
      <td>
        <a class="label label-primary" href="/r/apriltag/#melodic-contribute-lists-help-wanted">
          Help Wanted (<span class="contribute-lists-help-wanted-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/apriltag/#melodic-contribute-lists-good-first-issue">
          Good First Issues (<span class="contribute-lists-good-first-issue-count">0</span>)
        </a>
        <br>
        <a class="label label-primary" href="/r/apriltag/#melodic-contribute-lists-pull-requests">
          Pull Requests to Review (<span class="contribute-lists-pull-requests-count">0</span>)
        </a>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            AprilTag detector library
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="https://april.eecs.umich.edu/software/apriltag.html">Website</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Max Krogius</li>
                
                  <li>Wolfgang Merkt</li>
                
                  <li>Christian Rauch</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Edwin Olson</li>
                
                  <li>Max Krogius</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/aprilrobotics/apriltag/tree/master/./README.md" title="Open in git repository">README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="apriltag-3">AprilTag 3</h1>
<p>AprilTag is a visual fiducial system popular in robotics research. This repository contains the most recent version of AprilTag, AprilTag 3, which includes a faster (&gt;2x) detector, improved detection rate on small tags, flexible tag layouts, and pose estimation. AprilTag consists of a small C library with minimal dependencies.</p>

<p>You can find tag images for the pre-generated layouts <a href="https://github.com/AprilRobotics/apriltag-imgs">here</a>. We recommend using the tagStandard41h12 layout.</p>

<h1 id="table-of-contents">Table of Contents</h1>
<ul>
  <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#papers">Papers</a></li>
  <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#install">Install</a></li>
  <li>
<a href="https://github.com/aprilrobotics/apriltag/tree/master/./#usage">Usage</a>
    <ul>
      <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#choosing-a-tag-family">Choosing a Tag Family</a></li>
      <li>
<a href="https://github.com/aprilrobotics/apriltag/tree/master/./#getting-started-with-the-detector">Getting Started with the Detector</a>
        <ul>
          <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#python">Python</a></li>
          <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#c">C</a></li>
          <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#matlab">Matlab</a></li>
          <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#julia">Julia</a></li>
        </ul>
      </li>
      <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#upgrading-from-aprilTag-2">Upgrading from AprilTag 2</a></li>
      <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#opencv-integration">OpenCV Integration</a></li>
      <li>
<a href="https://github.com/aprilrobotics/apriltag/tree/master/./#tuning-the-detector-parameters">Tuning the Detector Parameters</a>
        <ul>
          <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#increasing-speed">Increasing speed.</a></li>
          <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#increasing-detection-distance">Increasing detection distance.</a></li>
        </ul>
      </li>
      <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#pose-estimation">Pose Estimation.</a></li>
    </ul>
  </li>
  <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#debugging">Debugging</a></li>
  <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#flexible-layouts">Flexible Layouts</a></li>
  <li><a href="https://github.com/aprilrobotics/apriltag/tree/master/./#support">Support</a></li>
</ul>

<h1 id="papers">Papers</h1>
<p>AprilTag is the subject of the following papers.</p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=olson2011tags">AprilTag: A robust and flexible visual fiducial system</a></p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=wang2016iros">AprilTag 2: Efficient and robust fiducial detection</a></p>

<p><a href="https://april.eecs.umich.edu/papers/details.php?name=krogius2019iros">Flexible Layouts for Fiducial Tags</a></p>

<h1 id="install">Install</h1>

<p>Officially only Linux operating systems are supported, although users have had success installing on Windows too.</p>

<p>The default installation will place headers in /usr/local/include and shared library in /usr/local/lib. It also installs a pkg-config script into /usr/local/lib/pkgconfig and will install a python wrapper if python3 is installed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -DCMAKE_BUILD_TYPE=Release
cmake --build build --target install

</code></pre></div></div>
<p>This will build shared (*.so) libraries by default. If you need static (*.a) libraries set <code class="language-plaintext highlighter-rouge">BUILD_SHARED_LIBS</code> to <code class="language-plaintext highlighter-rouge">OFF</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -DCMAKE_BUILD_TYPE=Release -DBUILD_SHARED_LIBS=OFF
cmake --build build --target install

</code></pre></div></div>

<p>If you have Ninja (<code class="language-plaintext highlighter-rouge">sudo apt install ninja-build</code>) installed, you can use:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -GNinja -DCMAKE_BUILD_TYPE=Release
cmake --build build --target install

</code></pre></div></div>
<p>to generate and compile via the ninja build script. It will be much faster than with cmake’s default Makefile generator.</p>

<p>You can omit <code class="language-plaintext highlighter-rouge">--target install</code> if you only want to use this locally without installing.</p>

<h1 id="usage">Usage</h1>

<h2 id="choosing-a-tag-family">Choosing a Tag Family</h2>
<p>For the vast majority of applications, the tagStandard41h12 family will be the correct choice. You can find the images for the tags in the <a href="https://github.com/AprilRobotics/apriltag-imgs">apriltag-imgs repo</a>. Scale up the images in your favorite editor and print them out.</p>

<p>Some heuristics for when to choose other tag families:</p>
<ol>
  <li>If you need more tags, use tagStandard52h13</li>
  <li>If you need to maximize the use of space on a small circular object, use tagCircle49h12 (or tagCircle21h7).</li>
  <li>If you want to make a recursive tag use tagCustom48h12.</li>
  <li>If you want compatibility with the ArUcO detector use tag36h11</li>
</ol>

<p>If none of these fit your needs, generate your own custom tag family <a href="https://github.com/AprilRobotics/apriltag-generation">here</a>.</p>

<h2 id="getting-started-with-the-detector">Getting Started with the Detector</h2>
<h3 id="python">Python</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import cv2
import numpy as np
from apriltag import apriltag

imagepath = 'test.jpg'
image = cv2.imread(imagepath, cv2.IMREAD_GRAYSCALE)
detector = apriltag("tagStandard41h12")

detections = detector.detect(image)
</code></pre></div></div>

<p>Alternately you can use the AprilTag python bindings created by <a href="https://github.com/duckietown/lib-dt-apriltags">duckietown</a>.</p>

<h3 id="c">C</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>image_u8_t* im = image_u8_create_from_pnm("test.pnm");
if (im == NULL) {
    fprintf(stderr, "Failed to load pnm image.\n");
    exit(1);
}
apriltag_detector_t *td = apriltag_detector_create();
apriltag_family_t *tf = tagStandard41h12_create();
apriltag_detector_add_family(td, tf);
zarray_t *detections = apriltag_detector_detect(td, im);

for (int i = 0; i &lt; zarray_size(detections); i++) {
    apriltag_detection_t *det;
    zarray_get(detections, i, &amp;det);

    // Do stuff with detections here.
}
// Cleanup.
apriltag_detections_destroy(detections);
tagStandard41h12_destroy(tf);
apriltag_detector_destroy(td);
</code></pre></div></div>

<h3 id="matlab">Matlab</h3>

<p>Provided by third-party <a href="https://github.com/alddiaz/MATLAB_AprilTag3">here</a>.</p>

<h3 id="julia">Julia</h3>

<p>Provided by third-party <a href="https://github.com/JuliaRobotics/AprilTags.jl">here</a></p>

<h2 id="upgrading-from-apriltag-2">Upgrading from AprilTag 2</h2>
<p>For most use-cases this should be a drop in replacement.</p>

<ul>
  <li>The options refine_decode, refine_pose, and black_border have been removed.</li>
  <li>If you have generated your own families, you will need to regenerate the c code for those families. The java code however does not need to be regenerated so this should be quick and easy.</li>
</ul>

<h2 id="opencv-integration">OpenCV Integration</h2>

<p>Note that this library has no external dependencies. Most applications
will require, at minimum, a method for acquiring images.</p>

<p>See example/opencv_demo.cc for an example of using AprilTag in C++ with OpenCV.
This example application can be built by executing the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd examples
$ make opencv_demo
</code></pre></div></div>

<p>Image data in a cv::Mat object can be passed to AprilTag without creating
a deep copy. Simply create an image_u8_t header for the cv::Mat data buffer:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cv::Mat img;

image_u8_t img_header = { .width = img.cols,
    .height = img.rows,
    .stride = img.cols,
    .buf = img.data
};
</code></pre></div></div>

<h2 id="tuning-the-detector-parameters">Tuning the Detector Parameters</h2>
<h3 id="increasing-speed">Increasing speed.</h3>
<p>Increasing the quad_decimate parameter will increase the speed of the detector at the cost of detection distance.  If you have extra cpu cores to throw at the problem then you can increase nthreads. If your image is somewhat noisy, increasing the quad_sigma parameter can increase speed.</p>

<h3 id="increasing-detection-distance">Increasing detection distance.</h3>
<p>First choose an example image and run the detector with debug=1 to generate the debug images. These show the detector’s output at each step in the detection pipeline.
If the border of your tag is not being detected as a quadrilateral, decrease quad_decimate (all the way to 1 if necessary).
If the border of the tag is detected then experiment with changing decode_sharpening.</p>

<h2 id="pose-estimation">Pose Estimation.</h2>
<p>We provide a method for computing the pose of the tag as follows (alternately use OpenCv’s Pnp solver with SOLVEPNP_IPPE_SQUARE). You will need to include the apriltag_pose.h header file and then call the estimate_tag_pose function as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// First create an apriltag_detection_info_t struct using your known parameters.
apriltag_detection_info_t info;
info.det = det;
info.tagsize = tagsize;
info.fx = fx;
info.fy = fy;
info.cx = cx;
info.cy = cy;

// Then call estimate_tag_pose.
apriltag_pose_t pose;
double err = estimate_tag_pose(&amp;info, &amp;pose);
// Do something with pose.
...
</code></pre></div></div>

<p>where the parameters are as follows:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">det</code>: The tag detection struct (april_detection_t).</li>
  <li>
<code class="language-plaintext highlighter-rouge">tagsize</code>: The size of the tag in meters. Each tag design has a black border and a white border, but some designs have the white border on the inside and some have the black border on the inside. The tagsize is thus measured from where the two borders meet, see the figure below for an example.</li>
  <li>
<code class="language-plaintext highlighter-rouge">fx</code>, <code class="language-plaintext highlighter-rouge">fy</code>: The camera’s focal length (in pixels). For most cameras <code class="language-plaintext highlighter-rouge">fx</code> and <code class="language-plaintext highlighter-rouge">fy</code> will be equal or nearly so.</li>
  <li>
<code class="language-plaintext highlighter-rouge">cx</code>, <code class="language-plaintext highlighter-rouge">cy</code>: The camera’s focal center (in pixels). For most cameras this will be approximately the same as the image center.</li>
</ul>

<p>Note: The tag size should not be measured from the outside of the tag. The tag size is defined as the distance between the detection corners, or alternately, the length of the edge between the white border and the black border. The following illustration marks the detection corners with red Xs and the tag size with a red arrow for a tag from the 48h12Custom tag family.</p>

<p><img src="https://raw.githubusercontent.com/aprilrobotics/apriltag/master/./tag_size_48h12.png" alt="The tag size is the width of the edge between the white and black borders."></p>

<h3 id="coordinate-system">Coordinate System</h3>
<p>The coordinate system has the origin at the camera center. The z-axis points from the camera center out the camera lens. The x-axis is to the right in the image taken by the camera, and y is down. The tag’s coordinate frame is centered at the center of the tag. From the viewer’s perspective, the x-axis is to the right, y-axis down, and z-axis is into the tag.</p>

<h1 id="debugging">Debugging</h1>

<p>You can enable <a href="https://clang.llvm.org/docs/AddressSanitizer.html">AddressSanitizer</a> to debug memory issues for Debug builds by setting the <code class="language-plaintext highlighter-rouge">ASAN</code> option:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -B build -GNinja -DCMAKE_BUILD_TYPE=Debug -DASAN=ON
cmake --build build

</code></pre></div></div>

<p>Mostly you can then run your executables as usual and inspect the sanitiser output. If you get a message like <code class="language-plaintext highlighter-rouge">ASan runtime does not come first in initial library list; you should either link runtime to your application or manually preload it with LD_PRELOAD.</code> you have to preload the corresponding <code class="language-plaintext highlighter-rouge">libasan.so.5</code> like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libasan.so.5 ./build/opencv_demo

</code></pre></div></div>

<h1 id="flexible-layouts">Flexible Layouts</h1>
<p>AprilTag 3 supports a wide variety of possible tag layouts in addition to the classic layout supported in AprilTag 2. The tag’s data bits can now go outside of the tag border, and it is also possible to define layouts with “holes” inside of the tag border where there are no data bits. In this repo we have included:</p>

<ul>
  <li>Two families of the new standard layout. This layout adds a layer of data bits around the outside of the tag border, increasing data density, and the number of possible tags, at the cost of a slight decrease in detection distance.</li>
  <li>Two families of circular tags.</li>
  <li>One family which has a hole in the middle. This could be used for example for drone applications by placing different sized tags inside of each other to allow detection over a wide range of distances.</li>
</ul>

<p>You can generate your own tag families using our other repo, <a href="https://github.com/AprilRobotics/apriltag-generation">AprilTag-Generation</a>.</p>

<h1 id="support">Support</h1>
<p>Please create an issue on this GitHub for any questions instead of sending a private message. This allows other people with the same question to find your answer.</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <em>No CHANGELOG found.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="melodic-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>This package does not provide any links to tutorials in it's <a href="https://index.ros.org/contribute/metadata/">rosindex metadata</a>.</em>
        <em>You can check on the <a href="http://wiki.ros.org/apriltag/Tutorials" target="_blank">ROS Wiki Tutorials</a> page for the package.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="melodic-deps">
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No dependencies on ROS packages.</em>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                </thead>
                <tbody>
                  
                    
                      <tr>
                        <td><a href="/d/python3-dev">python3-dev</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/python3-numpy">python3-numpy</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/cmake">cmake</a></td>
                      </tr>
                    
                  
                    
                      <tr>
                        <td><a href="/d/libopencv-dev">libopencv-dev</a></td>
                      </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <table class="table table-condensed table-striped">
                <thead>
                  <th>Name</th>
                  <th class="text-center">Deps</th>
                </thead>
                <tbody>
                  
                    
                    
                    <tr>
                      <td><a href="/p/apriltag_ros#melodic">apriltag_ros</a></td>
                      <td class="text-center">
                        
                        <a href="/p/apriltag_ros#melodic-deps" >
                          <span class="glyphicon glyphicon-arrow-right"></span>
                        </a>
                      </td>
                    </tr>
                    
                  
                </tbody>
              </table>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="melodic-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <em>No launch files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="melodic-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>apriltag</kbd> at <strong><a href="https://robotics.stackexchange.com/" target="_blank">Robotics Stack Exchange</a></strong></h3>      </div>
      <div id="melodic-question-list" class="panel-body" style="display: none;"></div>
      <div id="melodic-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://robotics.stackexchange.com/questions/tagged/apriltag+melodic">here</a>.</p>
      </div>
      <div id="melodic-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros-infrastructure/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script src=/js/contribution_suggestions.js></script>
<script type="text/javascript">
jQuery(function() {
    // Update the count on the links to the contribution suggestions
    updateContributionSuggestionsCountOnPackage('https://github.com/aprilrobotics/apriltag.git');
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item"
     target="_blank"
     href="http://docs.ros.org/en/melodic/api/apriltag/html/"
     title="View API documentation on docs.ros.org"
     >
       <span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span>
       
       API Docs
  </a>
  <a class="list-group-item"
     target="_blank"
     href="https://github.com/aprilrobotics/apriltag/tree/master/."
     title="View source code on repository">
       <span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span>
       
       Browse Code
  </a>
  
  
  
  
  
  <a class="list-group-item "
     target="_blank"
     href="http://wiki.ros.org/apriltag?distro=melodic"
     title="View this package on wiki.ros.org">
       <span style="margin-right: 5px;" class="glyphicon glyphicon-info-sign"></span>
       
       Wiki
  </a>
  
  
</div>

          </div>
        </div>
      
    </div>
  </div>



<script id="question-list-template" type="text/html">
  <p>
    Browse <a href="https://robotics.stackexchange.com/questions/tagged/apriltag?tab=Newest">recent questions</a>
    or see the <a href="https://robotics.stackexchange.com/questions/tagged/apriltag?tab=Votes">highest voted ones</a>.
  </p>
  
  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">Title</th>
        <th scope="col">Answered?</th>
        <th scope="col">Created</th>
        <th scope="col">Active</th>
      </tr>
    </thead>
    <tbody>
      {{#questions}}
      <tr>
        <th scope="row"><a href="{{link}}">{{title}}</a><br><small>Tags: {{strtags}}</small></th>
        <th>{{answered}}</th>
        <th>{{created}}</th>
        <th>{{active}}</th>
      </tr>
      {{/questions}}
    </tbody>
  </table>
  {{#has_more}}
  <hr>
  <h4>Additional questions are available at
    <a href="https://robotics.stackexchange.com/questions/tagged/{{name}}?tab=Newest">Robotics Stack Exchange</a>
  </h4>
  {{/has_more}}
  
</script>

<script type="text/javascript" src="/js/mustache.js"></script>
<script type="text/javascript">
  jQuery(function() {
    jQuery.getJSON(url="https://api.stackexchange.com/2.3/questions?order=desc&site=robotics" +
                       "&tagged=apriltag&pagesize=50&sort=activity")
    .done(function(feed) {
      if (feed.items.length > 0) {
        var question_count_str = (feed.has_more ? '>' : '') + String(feed.items.length)
        const questions = feed.items.map(
          function(question) {
            question.id = Math.round(Math.random() * 99999.0);
            question.created = (new Date(question.creation_date * 1000)).toDateString()
            question.active = (new Date(question.last_activity_date * 1000)).toDateString()
            question.answered = question.is_answered ? "Yes" : "No"
            question.strtags = question.tags.join(' ')
            return question;
          });
        const template = jQuery("#question-list-template").text();
        Mustache.parse(template);
        var rendered = Mustache.render(
          template, 
          { questions: questions,
            has_more: feed.has_more,
            name: "apriltag"
          }
        );
      }
      //   TODO(tfoote) Resolve images
      //   jQuery("#-question-list img").each(function() {
      //     if (jQuery(this).attr("src").startsWith("/upfiles")) {
      //        jQuery(this).attr("src", "https://answers.ros.org" + jQuery(this).attr("src"));
      //     }
      //   });
      
      if (feed.items.length > 0) {
        jQuery("#humble-question-list").html(rendered);
        jQuery("#humble-question-list").show();
      } else {
        jQuery("#humble-no-question-list").show();
      }
      jQuery("#humble-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#jazzy-question-list").html(rendered);
        jQuery("#jazzy-question-list").show();
      } else {
        jQuery("#jazzy-no-question-list").show();
      }
      jQuery("#jazzy-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#kilted-question-list").html(rendered);
        jQuery("#kilted-question-list").show();
      } else {
        jQuery("#kilted-no-question-list").show();
      }
      jQuery("#kilted-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#rolling-question-list").html(rendered);
        jQuery("#rolling-question-list").show();
      } else {
        jQuery("#rolling-no-question-list").show();
      }
      jQuery("#rolling-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#github-question-list").html(rendered);
        jQuery("#github-question-list").show();
      } else {
        jQuery("#github-no-question-list").show();
      }
      jQuery("#github-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#noetic-question-list").html(rendered);
        jQuery("#noetic-question-list").show();
      } else {
        jQuery("#noetic-no-question-list").show();
      }
      jQuery("#noetic-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#galactic-question-list").html(rendered);
        jQuery("#galactic-question-list").show();
      } else {
        jQuery("#galactic-no-question-list").show();
      }
      jQuery("#galactic-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#iron-question-list").html(rendered);
        jQuery("#iron-question-list").show();
      } else {
        jQuery("#iron-no-question-list").show();
      }
      jQuery("#iron-questions-count").text(question_count_str);
      
      if (feed.items.length > 0) {
        jQuery("#melodic-question-list").html(rendered);
        jQuery("#melodic-question-list").show();
      } else {
        jQuery("#melodic-no-question-list").show();
      }
      jQuery("#melodic-questions-count").text(question_count_str);
      
    })
    .fail(function(jqxhr, textStatus, error) {
      console.error("Failed to get question data: " + jqxhr.responseText);
      
      jQuery("#humble-get-question-fail").show();
      
      jQuery("#jazzy-get-question-fail").show();
      
      jQuery("#kilted-get-question-fail").show();
      
      jQuery("#rolling-get-question-fail").show();
      
      jQuery("#github-get-question-fail").show();
      
      jQuery("#noetic-get-question-fail").show();
      
      jQuery("#galactic-get-question-fail").show();
      
      jQuery("#iron-get-question-fail").show();
      
      jQuery("#melodic-get-question-fail").show();
      
    });
  });
</script>


<script type="text/javascript">
  $(document).ready(function() {
    setupDistroSwitch("humble");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div style="float:left;">
        
          <a href="https://github.com/rkent/rosindex" title="Find rosindex in Github">
          <span class="icon  icon--github">
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
            </svg>
          </span>

          <span class="username">rkent/rosindex</span>
        </a>
        <em class="hidden-xs">| generated on 2025-05-05</em>
      
      </div>
      <div style="float:right;">
        <p class="text"><span class="hidden-xs">a community-maintained index of robotics software
 | </span><a href="/privacy.txt">privacy</a></p>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
